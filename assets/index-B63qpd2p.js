(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function PT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qh={exports:{}},Ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function sC(){if(__)return Ml;__=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:t,type:s,key:u,ref:r!==void 0?r:null,props:a}}return Ml.Fragment=e,Ml.jsx=n,Ml.jsxs=n,Ml}var E_;function oC(){return E_||(E_=1,Qh.exports=sC()),Qh.exports}var E=oC(),Xh={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function rC(){if(T_)return Le;T_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),b=Symbol.iterator;function C(F){return F===null||typeof F!="object"?null:(F=b&&F[b]||F["@@iterator"],typeof F=="function"?F:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,U={};function j(F,ne,he){this.props=F,this.context=ne,this.refs=U,this.updater=he||N}j.prototype.isReactComponent={},j.prototype.setState=function(F,ne){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ne,"setState")},j.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function W(){}W.prototype=j.prototype;function G(F,ne,he){this.props=F,this.context=ne,this.refs=U,this.updater=he||N}var Q=G.prototype=new W;Q.constructor=G,V(Q,j.prototype),Q.isPureReactComponent=!0;var q=Array.isArray;function oe(){}var D={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function M(F,ne,he){var Te=he.ref;return{$$typeof:t,type:F,key:ne,ref:Te!==void 0?Te:null,props:he}}function L(F,ne){return M(F.type,ne,F.props)}function B(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function z(F){var ne={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(he){return ne[he]})}var P=/\/+/g;function we(F,ne){return typeof F=="object"&&F!==null&&F.key!=null?z(""+F.key):ne.toString(36)}function Ie(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(oe,oe):(F.status="pending",F.then(function(ne){F.status==="pending"&&(F.status="fulfilled",F.value=ne)},function(ne){F.status==="pending"&&(F.status="rejected",F.reason=ne)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function Z(F,ne,he,Te,Ne){var Ue=typeof F;(Ue==="undefined"||Ue==="boolean")&&(F=null);var Fe=!1;if(F===null)Fe=!0;else switch(Ue){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(F.$$typeof){case t:case e:Fe=!0;break;case v:return Fe=F._init,Z(Fe(F._payload),ne,he,Te,Ne)}}if(Fe)return Ne=Ne(F),Fe=Te===""?"."+we(F,0):Te,q(Ne)?(he="",Fe!=null&&(he=Fe.replace(P,"$&/")+"/"),Z(Ne,ne,he,"",function(mn){return mn})):Ne!=null&&(B(Ne)&&(Ne=L(Ne,he+(Ne.key==null||F&&F.key===Ne.key?"":(""+Ne.key).replace(P,"$&/")+"/")+Fe)),ne.push(Ne)),1;Fe=0;var Ht=Te===""?".":Te+":";if(q(F))for(var lt=0;lt<F.length;lt++)Te=F[lt],Ue=Ht+we(Te,lt),Fe+=Z(Te,ne,he,Ue,Ne);else if(lt=C(F),typeof lt=="function")for(F=lt.call(F),lt=0;!(Te=F.next()).done;)Te=Te.value,Ue=Ht+we(Te,lt++),Fe+=Z(Te,ne,he,Ue,Ne);else if(Ue==="object"){if(typeof F.then=="function")return Z(Ie(F),ne,he,Te,Ne);throw ne=String(F),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function ce(F,ne,he){if(F==null)return F;var Te=[],Ne=0;return Z(F,Te,"","",function(Ue){return ne.call(he,Ue,Ne++)}),Te}function Ee(F){if(F._status===-1){var ne=F._result;ne=ne(),ne.then(function(he){(F._status===0||F._status===-1)&&(F._status=1,F._result=he)},function(he){(F._status===0||F._status===-1)&&(F._status=2,F._result=he)}),F._status===-1&&(F._status=0,F._result=ne)}if(F._status===1)return F._result.default;throw F._result}var Pe=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},He={map:ce,forEach:function(F,ne,he){ce(F,function(){ne.apply(this,arguments)},he)},count:function(F){var ne=0;return ce(F,function(){ne++}),ne},toArray:function(F){return ce(F,function(ne){return ne})||[]},only:function(F){if(!B(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Le.Activity=T,Le.Children=He,Le.Component=j,Le.Fragment=n,Le.Profiler=r,Le.PureComponent=G,Le.StrictMode=s,Le.Suspense=h,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Le.__COMPILER_RUNTIME={__proto__:null,c:function(F){return D.H.useMemoCache(F)}},Le.cache=function(F){return function(){return F.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(F,ne,he){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Te=V({},F.props),Ne=F.key;if(ne!=null)for(Ue in ne.key!==void 0&&(Ne=""+ne.key),ne)!R.call(ne,Ue)||Ue==="key"||Ue==="__self"||Ue==="__source"||Ue==="ref"&&ne.ref===void 0||(Te[Ue]=ne[Ue]);var Ue=arguments.length-2;if(Ue===1)Te.children=he;else if(1<Ue){for(var Fe=Array(Ue),Ht=0;Ht<Ue;Ht++)Fe[Ht]=arguments[Ht+2];Te.children=Fe}return M(F.type,Ne,Te)},Le.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Le.createElement=function(F,ne,he){var Te,Ne={},Ue=null;if(ne!=null)for(Te in ne.key!==void 0&&(Ue=""+ne.key),ne)R.call(ne,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Ne[Te]=ne[Te]);var Fe=arguments.length-2;if(Fe===1)Ne.children=he;else if(1<Fe){for(var Ht=Array(Fe),lt=0;lt<Fe;lt++)Ht[lt]=arguments[lt+2];Ne.children=Ht}if(F&&F.defaultProps)for(Te in Fe=F.defaultProps,Fe)Ne[Te]===void 0&&(Ne[Te]=Fe[Te]);return M(F,Ue,Ne)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(F){return{$$typeof:d,render:F}},Le.isValidElement=B,Le.lazy=function(F){return{$$typeof:v,_payload:{_status:-1,_result:F},_init:Ee}},Le.memo=function(F,ne){return{$$typeof:m,type:F,compare:ne===void 0?null:ne}},Le.startTransition=function(F){var ne=D.T,he={};D.T=he;try{var Te=F(),Ne=D.S;Ne!==null&&Ne(he,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(oe,Pe)}catch(Ue){Pe(Ue)}finally{ne!==null&&he.types!==null&&(ne.types=he.types),D.T=ne}},Le.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Le.use=function(F){return D.H.use(F)},Le.useActionState=function(F,ne,he){return D.H.useActionState(F,ne,he)},Le.useCallback=function(F,ne){return D.H.useCallback(F,ne)},Le.useContext=function(F){return D.H.useContext(F)},Le.useDebugValue=function(){},Le.useDeferredValue=function(F,ne){return D.H.useDeferredValue(F,ne)},Le.useEffect=function(F,ne){return D.H.useEffect(F,ne)},Le.useEffectEvent=function(F){return D.H.useEffectEvent(F)},Le.useId=function(){return D.H.useId()},Le.useImperativeHandle=function(F,ne,he){return D.H.useImperativeHandle(F,ne,he)},Le.useInsertionEffect=function(F,ne){return D.H.useInsertionEffect(F,ne)},Le.useLayoutEffect=function(F,ne){return D.H.useLayoutEffect(F,ne)},Le.useMemo=function(F,ne){return D.H.useMemo(F,ne)},Le.useOptimistic=function(F,ne){return D.H.useOptimistic(F,ne)},Le.useReducer=function(F,ne,he){return D.H.useReducer(F,ne,he)},Le.useRef=function(F){return D.H.useRef(F)},Le.useState=function(F){return D.H.useState(F)},Le.useSyncExternalStore=function(F,ne,he){return D.H.useSyncExternalStore(F,ne,he)},Le.useTransition=function(){return D.H.useTransition()},Le.version="19.2.4",Le}var S_;function op(){return S_||(S_=1,Xh.exports=rC()),Xh.exports}var ve=op();const aC=PT(ve);var Wh={exports:{}},Dl={},Zh={exports:{}},em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function lC(){return b_||(b_=1,(function(t){function e(Z,ce){var Ee=Z.length;Z.push(ce);e:for(;0<Ee;){var Pe=Ee-1>>>1,He=Z[Pe];if(0<r(He,ce))Z[Pe]=ce,Z[Ee]=He,Ee=Pe;else break e}}function n(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var ce=Z[0],Ee=Z.pop();if(Ee!==ce){Z[0]=Ee;e:for(var Pe=0,He=Z.length,F=He>>>1;Pe<F;){var ne=2*(Pe+1)-1,he=Z[ne],Te=ne+1,Ne=Z[Te];if(0>r(he,Ee))Te<He&&0>r(Ne,he)?(Z[Pe]=Ne,Z[Te]=Ee,Pe=Te):(Z[Pe]=he,Z[ne]=Ee,Pe=ne);else if(Te<He&&0>r(Ne,Ee))Z[Pe]=Ne,Z[Te]=Ee,Pe=Te;else break e}}return ce}function r(Z,ce){var Ee=Z.sortIndex-ce.sortIndex;return Ee!==0?Ee:Z.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var h=[],m=[],v=1,T=null,b=3,C=!1,N=!1,V=!1,U=!1,j=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function Q(Z){for(var ce=n(m);ce!==null;){if(ce.callback===null)s(m);else if(ce.startTime<=Z)s(m),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=n(m)}}function q(Z){if(V=!1,Q(Z),!N)if(n(h)!==null)N=!0,oe||(oe=!0,z());else{var ce=n(m);ce!==null&&Ie(q,ce.startTime-Z)}}var oe=!1,D=-1,R=5,M=-1;function L(){return U?!0:!(t.unstable_now()-M<R)}function B(){if(U=!1,oe){var Z=t.unstable_now();M=Z;var ce=!0;try{e:{N=!1,V&&(V=!1,W(D),D=-1),C=!0;var Ee=b;try{t:{for(Q(Z),T=n(h);T!==null&&!(T.expirationTime>Z&&L());){var Pe=T.callback;if(typeof Pe=="function"){T.callback=null,b=T.priorityLevel;var He=Pe(T.expirationTime<=Z);if(Z=t.unstable_now(),typeof He=="function"){T.callback=He,Q(Z),ce=!0;break t}T===n(h)&&s(h),Q(Z)}else s(h);T=n(h)}if(T!==null)ce=!0;else{var F=n(m);F!==null&&Ie(q,F.startTime-Z),ce=!1}}break e}finally{T=null,b=Ee,C=!1}ce=void 0}}finally{ce?z():oe=!1}}}var z;if(typeof G=="function")z=function(){G(B)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,we=P.port2;P.port1.onmessage=B,z=function(){we.postMessage(null)}}else z=function(){j(B,0)};function Ie(Z,ce){D=j(function(){Z(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(Z){switch(b){case 1:case 2:case 3:var ce=3;break;default:ce=b}var Ee=b;b=ce;try{return Z()}finally{b=Ee}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Ee=b;b=Z;try{return ce()}finally{b=Ee}},t.unstable_scheduleCallback=function(Z,ce,Ee){var Pe=t.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Pe+Ee:Pe):Ee=Pe,Z){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=Ee+He,Z={id:v++,callback:ce,priorityLevel:Z,startTime:Ee,expirationTime:He,sortIndex:-1},Ee>Pe?(Z.sortIndex=Ee,e(m,Z),n(h)===null&&Z===n(m)&&(V?(W(D),D=-1):V=!0,Ie(q,Ee-Pe))):(Z.sortIndex=He,e(h,Z),N||C||(N=!0,oe||(oe=!0,z()))),Z},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(Z){var ce=b;return function(){var Ee=b;b=ce;try{return Z.apply(this,arguments)}finally{b=Ee}}}})(em)),em}var x_;function uC(){return x_||(x_=1,Zh.exports=lC()),Zh.exports}var tm={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function cC(){if(A_)return yn;A_=1;var t=op();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:h,containerInfo:m,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,yn.createPortal=function(h,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(h,m,null,v)},yn.flushSync=function(h){var m=u.T,v=s.p;try{if(u.T=null,s.p=2,h)return h()}finally{u.T=m,s.p=v,s.d.f()}},yn.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(h,m))},yn.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},yn.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,C=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:C}):v==="script"&&s.d.X(h,{crossOrigin:T,integrity:b,fetchPriority:C,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},yn.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);s.d.M(h,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(h)},yn.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin);s.d.L(h,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},yn.preloadModule=function(h,m){if(typeof h=="string")if(m){var v=d(m.as,m.crossOrigin);s.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(h)},yn.requestFormReset=function(h){s.d.r(h)},yn.unstable_batchedUpdates=function(h,m){return h(m)},yn.useFormState=function(h,m,v){return u.H.useFormState(h,m,v)},yn.useFormStatus=function(){return u.H.useHostTransitionStatus()},yn.version="19.2.4",yn}var C_;function dC(){if(C_)return tm.exports;C_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tm.exports=cC(),tm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function fC(){if(w_)return Dl;w_=1;var t=uC(),e=op(),n=dC();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function u(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(a(i)!==i)throw Error(s(188))}function m(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(s(188));return o!==i?null:i}for(var l=i,c=o;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return h(y),i;if(_===c)return h(y),o;_=_.sibling}throw Error(s(188))}if(l.return!==c.return)l=y,c=_;else{for(var x=!1,w=y.child;w;){if(w===l){x=!0,l=y,c=_;break}if(w===c){x=!0,c=y,l=_;break}w=w.sibling}if(!x){for(w=_.child;w;){if(w===l){x=!0,l=_,c=y;break}if(w===c){x=!0,c=_,l=y;break}w=w.sibling}if(!x)throw Error(s(189))}}if(l.alternate!==c)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:o}function v(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=v(i),o!==null)return o;i=i.sibling}return null}var T=Object.assign,b=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),G=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var P=Symbol.for("react.client.reference");function we(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===P?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case V:return"Fragment";case j:return"Profiler";case U:return"StrictMode";case q:return"Suspense";case oe:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case G:return i.displayName||"Context";case W:return(i._context.displayName||"Context")+".Consumer";case Q:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return o=i.displayName||null,o!==null?o:we(i.type)||"Memo";case R:o=i._payload,i=i._init;try{return we(i(o))}catch{}}return null}var Ie=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Pe=[],He=-1;function F(i){return{current:i}}function ne(i){0>He||(i.current=Pe[He],Pe[He]=null,He--)}function he(i,o){He++,Pe[He]=i.current,i.current=o}var Te=F(null),Ne=F(null),Ue=F(null),Fe=F(null);function Ht(i,o){switch(he(Ue,o),he(Ne,i),he(Te,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?qv(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=qv(o),i=Hv(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(Te),he(Te,i)}function lt(){ne(Te),ne(Ne),ne(Ue)}function mn(i){i.memoizedState!==null&&he(Fe,i);var o=Te.current,l=Hv(o,i.type);o!==l&&(he(Ne,i),he(Te,l))}function Pn(i){Ne.current===i&&(ne(Te),ne(Ne)),Fe.current===i&&(ne(Fe),wl._currentValue=Ee)}var es,Ui;function Un(i){if(es===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);es=o&&o[1]||"",Ui=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+es+i+Ui}var Ds=!1;function Po(i,o){if(!i||Ds)return"";Ds=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(ee){var X=ee}Reflect.construct(i,[],re)}else{try{re.call()}catch(ee){X=ee}i.call(re.prototype)}}else{try{throw Error()}catch(ee){X=ee}(re=i())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),x=_[0],w=_[1];if(x&&w){var O=x.split(`
`),J=w.split(`
`);for(y=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===O.length||y===J.length)for(c=O.length-1,y=J.length-1;1<=c&&0<=y&&O[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(O[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||O[c]!==J[y]){var ie=`
`+O[c].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=c&&0<=y);break}}}finally{Ds=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Un(l):""}function Jt(i,o){switch(i.tag){case 26:case 27:case 5:return Un(i.type);case 16:return Un("Lazy");case 13:return i.child!==o&&o!==null?Un("Suspense Fallback"):Un("Suspense");case 19:return Un("SuspenseList");case 0:case 15:return Po(i.type,!1);case 11:return Po(i.type.render,!1);case 1:return Po(i.type,!0);case 31:return Un("Activity");default:return""}}function xt(i){try{var o="",l=null;do o+=Jt(i,l),l=i,i=i.return;while(i);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ki=Object.prototype.hasOwnProperty,Vi=t.unstable_scheduleCallback,oi=t.unstable_cancelCallback,Va=t.unstable_shouldYield,Ze=t.unstable_requestPaint,Tt=t.unstable_now,ts=t.unstable_getCurrentPriorityLevel,Rt=t.unstable_ImmediatePriority,Dt=t.unstable_UserBlockingPriority,ri=t.unstable_NormalPriority,Uo=t.unstable_LowPriority,ns=t.unstable_IdlePriority,Sr=t.log,Li=t.unstable_setDisableYieldValue,et=null,At=null;function sn(i){if(typeof Sr=="function"&&Li(i),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(et,i)}catch{}}var Qt=Math.clz32?Math.clz32:La,yu=Math.log,br=Math.LN2;function La(i){return i>>>=0,i===0?32:31-(yu(i)/br|0)|0}var Ps=256,xn=262144,Si=4194304;function jn(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function kn(i,o,l){var c=i.pendingLanes;if(c===0)return 0;var y=0,_=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var w=c&134217727;return w!==0?(c=w&~_,c!==0?y=jn(c):(x&=w,x!==0?y=jn(x):l||(l=w&~i,l!==0&&(y=jn(l))))):(w=c&~_,w!==0?y=jn(w):x!==0?y=jn(x):l||(l=c&~i,l!==0&&(y=jn(l)))),y===0?0:o!==0&&o!==y&&(o&_)===0&&(_=y&-y,l=o&-o,_>=l||_===32&&(l&4194048)!==0)?o:y}function Oi(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Us(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ko(){var i=Si;return Si<<=1,(Si&62914560)===0&&(Si=4194304),i}function bi(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function Bi(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function zt(i,o,l,c,y,_){var x=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var w=i.entanglements,O=i.expirationTimes,J=i.hiddenUpdates;for(l=x&~l;0<l;){var ie=31-Qt(l),re=1<<ie;w[ie]=0,O[ie]=-1;var X=J[ie];if(X!==null)for(J[ie]=null,ie=0;ie<X.length;ie++){var ee=X[ie];ee!==null&&(ee.lane&=-536870913)}l&=~re}c!==0&&ks(i,c,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(x&~o))}function ks(i,o,l){i.pendingLanes|=o,i.suspendedLanes&=~o;var c=31-Qt(o);i.entangledLanes|=o,i.entanglements[c]=i.entanglements[c]|1073741824|l&261930}function k(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var c=31-Qt(l),y=1<<c;y&o|i[c]&o&&(i[c]|=o),l&=~y}}function le(i,o){var l=o&-o;return l=(l&42)!==0?1:de(l),(l&(i.suspendedLanes|o))!==0?0:l}function de(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function me(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ae(){var i=ce.p;return i!==0?i:(i=window.event,i===void 0?32:f_(i.type))}function pe(i,o){var l=ce.p;try{return ce.p=i,o()}finally{ce.p=l}}var ye=Math.random().toString(36).slice(2),Re="__reactFiber$"+ye,tt="__reactProps$"+ye,$n="__reactContainer$"+ye,xi="__reactEvents$"+ye,pn="__reactListeners$"+ye,Fi="__reactHandles$"+ye,xr="__reactResources$"+ye,ai="__reactMarker$"+ye;function Vo(i){delete i[Re],delete i[tt],delete i[xi],delete i[pn],delete i[Fi]}function is(i){var o=i[Re];if(o)return o;for(var l=i.parentNode;l;){if(o=l[$n]||l[Re]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=Qv(i);i!==null;){if(l=i[Re])return l;i=Qv(i)}return o}i=l,l=i.parentNode}return null}function ss(i){if(i=i[Re]||i[$n]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function Lo(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Ai(i){var o=i[xr];return o||(o=i[xr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Pt(i){i[ai]=!0}var Ar=new Set,Vs={};function An(i,o){Gi(i,o),Gi(i+"Capture",o)}function Gi(i,o){for(Vs[i]=o,i=0;i<o.length;i++)Ar.add(o[i])}var Qd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oa={},Ba={};function vu(i){return ki.call(Ba,i)?!0:ki.call(Oa,i)?!1:Qd.test(i)?Ba[i]=!0:(Oa[i]=!0,!1)}function Ls(i,o,l){if(vu(o))if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+l)}}function Os(i,o,l){if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+l)}}function li(i,o,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(o,l,""+c)}}function Cn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function _u(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Xd(i,o,l){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(x){l=""+x,_.call(this,x)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Cr(i){if(!i._valueTracker){var o=_u(i)?"checked":"value";i._valueTracker=Xd(i,o,""+i[o])}}function Fa(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),c="";return i&&(c=_u(i)?i.checked?"true":"false":i.value),i=c,i!==l?(o.setValue(i),!0):!1}function wr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var os=/[\n"\\]/g;function It(i){return i.replace(os,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Bs(i,o,l,c,y,_,x,w){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),o!=null?x==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Cn(o)):i.value!==""+Cn(o)&&(i.value=""+Cn(o)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),o!=null?Rr(i,x,Cn(o)):l!=null?Rr(i,x,Cn(l)):c!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+Cn(w):i.removeAttribute("name")}function Oo(i,o,l,c,y,_,x,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),o!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){Cr(i);return}l=l!=null?""+Cn(l):"",o=o!=null?""+Cn(o):l,w||o===i.value||(i.value=o),i.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=w?i.checked:!!c,i.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x),Cr(i)}function Rr(i,o,l){o==="number"&&wr(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function nt(i,o,l,c){if(i=i.options,o){o={};for(var y=0;y<l.length;y++)o["$"+l[y]]=!0;for(l=0;l<i.length;l++)y=o.hasOwnProperty("$"+i[l].value),i[l].selected!==y&&(i[l].selected=y),y&&c&&(i[l].defaultSelected=!0)}else{for(l=""+Cn(l),o=null,y=0;y<i.length;y++){if(i[y].value===l){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function Bo(i,o,l){if(o!=null&&(o=""+Cn(o),o!==i.value&&(i.value=o),l==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=l!=null?""+Cn(l):""}function Fs(i,o,l,c){if(o==null){if(c!=null){if(l!=null)throw Error(s(92));if(Ie(c)){if(1<c.length)throw Error(s(93));c=c[0]}l=c}l==null&&(l=""),o=l}l=Cn(o),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c),Cr(i)}function ui(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Wd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ga(i,o,l){var c=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":c?i.setProperty(o,l):typeof l!="number"||l===0||Wd.has(o)?o==="float"?i.cssFloat=l:i[o]=(""+l).trim():i[o]=l+"px"}function Eu(i,o,l){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&l[y]!==c&&Ga(i,y,c)}else for(var _ in o)o.hasOwnProperty(_)&&Ga(i,_,o[_])}function qa(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ef=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qi(i){return ef.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Xt(){}var Ir=null;function Nr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var rs=null,Yn=null;function Tu(i){var o=ss(i);if(o&&(i=o.stateNode)){var l=i[tt]||null;e:switch(i=o.stateNode,o.type){case"input":if(Bs(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+It(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var c=l[o];if(c!==i&&c.form===i.form){var y=c[tt]||null;if(!y)throw Error(s(90));Bs(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<l.length;o++)c=l[o],c.form===i.form&&Fa(c)}break e;case"textarea":Bo(i,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&nt(i,!!l.multiple,o,!1)}}}var Ha=!1;function Su(i,o,l){if(Ha)return i(o,l);Ha=!0;try{var c=i(o);return c}finally{if(Ha=!1,(rs!==null||Yn!==null)&&(vc(),rs&&(o=rs,i=Yn,Yn=rs=null,Tu(o),i)))for(o=0;o<i.length;o++)Tu(i[o])}}function Vn(i,o){var l=i.stateNode;if(l===null)return null;var c=l[tt]||null;if(c===null)return null;l=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,o,typeof l));return l}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=!1;if(Ci)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){za=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{za=!1}var Kn=null,Mr=null,zi=null;function Gs(){if(zi)return zi;var i,o=Mr,l=o.length,c,y="value"in Kn?Kn.value:Kn.textContent,_=y.length;for(i=0;i<l&&o[i]===y[i];i++);var x=l-i;for(c=1;c<=x&&o[l-c]===y[_-c];c++);return zi=y.slice(i,1<c?1-c:void 0)}function Fo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function qs(){return!0}function yt(){return!1}function gn(i){function o(l,c,y,_,x){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(l=i[w],this[w]=l?l(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?qs:yt,this.isPropagationStopped=yt,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),o}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Go=gn(as),Hs=T({},as,{view:0,detail:0}),bu=gn(Hs),zs,Dr,wn,qo=T({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$s,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==wn&&(wn&&i.type==="mousemove"?(zs=i.screenX-wn.screenX,Dr=i.screenY-wn.screenY):Dr=zs=0,wn=i),zs)},movementY:function(i){return"movementY"in i?i.movementY:Dr}}),xu=gn(qo),Ho=T({},qo,{dataTransfer:0}),Au=gn(Ho),ja=T({},Hs,{relatedTarget:0}),js=gn(ja),Cu=T({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),Pr=gn(Cu),tf=T({},as,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),wu=gn(tf),zo=T({},as,{data:0}),$a=gn(zo),Ru={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ya={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ka={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Ka[i])?!!o[i]:!1}function $s(){return Iu}var Nu=T({},Hs,{key:function(i){if(i.key){var o=Ru[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Fo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ya[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$s,charCode:function(i){return i.type==="keypress"?Fo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Mu=gn(Nu),ls=T({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ja=gn(ls),Du=T({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$s}),Pu=gn(Du),Uu=T({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ur=gn(Uu),Rn=T({},qo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ku=gn(Rn),Vu=T({},as,{newState:0,oldState:0}),Ys=gn(Vu),g=[9,13,27,32],S=Ci&&"CompositionEvent"in window,A=null;Ci&&"documentMode"in document&&(A=document.documentMode);var I=Ci&&"TextEvent"in window&&!A,Y=Ci&&(!S||A&&8<A&&11>=A),te=" ",ge=!1;function ut(i,o){switch(i){case"keyup":return g.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ze=!1;function Wt(i,o){switch(i){case"compositionend":return Lt(o);case"keypress":return o.which!==32?null:(ge=!0,te);case"textInput":return i=o.data,i===te&&ge?null:i;default:return null}}function Zt(i,o){if(ze)return i==="compositionend"||!S&&ut(i,o)?(i=Gs(),zi=Mr=Kn=null,ze=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Y&&o.locale!=="ko"?null:o.data;default:return null}}var Ks={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Ks[i.type]:o==="textarea"}function jo(i,o,l,c){rs?Yn?Yn.push(c):Yn=[c]:rs=c,o=Ac(o,"onChange"),0<o.length&&(l=new Go("onChange","change",null,l,c),i.push({event:l,listeners:o}))}var us=null,Qa=null;function Mx(i){Vv(i,0)}function Lu(i){var o=Lo(i);if(Fa(o))return i}function tg(i,o){if(i==="change")return o}var ng=!1;if(Ci){var nf;if(Ci){var sf="oninput"in document;if(!sf){var ig=document.createElement("div");ig.setAttribute("oninput","return;"),sf=typeof ig.oninput=="function"}nf=sf}else nf=!1;ng=nf&&(!document.documentMode||9<document.documentMode)}function sg(){us&&(us.detachEvent("onpropertychange",og),Qa=us=null)}function og(i){if(i.propertyName==="value"&&Lu(Qa)){var o=[];jo(o,Qa,i,Nr(i)),Su(Mx,o)}}function Dx(i,o,l){i==="focusin"?(sg(),us=o,Qa=l,us.attachEvent("onpropertychange",og)):i==="focusout"&&sg()}function Px(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Lu(Qa)}function Ux(i,o){if(i==="click")return Lu(o)}function kx(i,o){if(i==="input"||i==="change")return Lu(o)}function Vx(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Jn=typeof Object.is=="function"?Object.is:Vx;function Xa(i,o){if(Jn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),c=Object.keys(o);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!ki.call(o,y)||!Jn(i[y],o[y]))return!1}return!0}function rg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ag(i,o){var l=rg(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=o&&c>=o)return{node:l,offset:o-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=rg(l)}}function lg(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?lg(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function ug(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=wr(i.document);o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=wr(i.document)}return o}function of(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var Lx=Ci&&"documentMode"in document&&11>=document.documentMode,kr=null,rf=null,Wa=null,af=!1;function cg(i,o,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;af||kr==null||kr!==wr(c)||(c=kr,"selectionStart"in c&&of(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Wa&&Xa(Wa,c)||(Wa=c,c=Ac(rf,"onSelect"),0<c.length&&(o=new Go("onSelect","select",null,o,l),i.push({event:o,listeners:c}),o.target=kr)))}function $o(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Vr={animationend:$o("Animation","AnimationEnd"),animationiteration:$o("Animation","AnimationIteration"),animationstart:$o("Animation","AnimationStart"),transitionrun:$o("Transition","TransitionRun"),transitionstart:$o("Transition","TransitionStart"),transitioncancel:$o("Transition","TransitionCancel"),transitionend:$o("Transition","TransitionEnd")},lf={},dg={};Ci&&(dg=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function Yo(i){if(lf[i])return lf[i];if(!Vr[i])return i;var o=Vr[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in dg)return lf[i]=o[l];return i}var fg=Yo("animationend"),hg=Yo("animationiteration"),mg=Yo("animationstart"),Ox=Yo("transitionrun"),Bx=Yo("transitionstart"),Fx=Yo("transitioncancel"),pg=Yo("transitionend"),gg=new Map,uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uf.push("scrollEnd");function wi(i,o){gg.set(i,o),An(o,[i])}var Ou=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ci=[],Lr=0,cf=0;function Bu(){for(var i=Lr,o=cf=Lr=0;o<i;){var l=ci[o];ci[o++]=null;var c=ci[o];ci[o++]=null;var y=ci[o];ci[o++]=null;var _=ci[o];if(ci[o++]=null,c!==null&&y!==null){var x=c.pending;x===null?y.next=y:(y.next=x.next,x.next=y),c.pending=y}_!==0&&yg(l,y,_)}}function Fu(i,o,l,c){ci[Lr++]=i,ci[Lr++]=o,ci[Lr++]=l,ci[Lr++]=c,cf|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function df(i,o,l,c){return Fu(i,o,l,c),Gu(i)}function Ko(i,o){return Fu(i,null,null,o),Gu(i)}function yg(i,o,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=i.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&o!==null&&(y=31-Qt(l),i=_.hiddenUpdates,c=i[y],c===null?i[y]=[o]:c.push(o),o.lane=l|536870912),_):null}function Gu(i){if(50<El)throw El=0,Eh=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Or={};function Gx(i,o,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(i,o,l,c){return new Gx(i,o,l,c)}function ff(i){return i=i.prototype,!(!i||!i.isReactComponent)}function cs(i,o){var l=i.alternate;return l===null?(l=Qn(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function vg(i,o){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,o=l.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function qu(i,o,l,c,y,_){var x=0;if(c=i,typeof i=="function")ff(i)&&(x=1);else if(typeof i=="string")x=$A(i,l,Te.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=Qn(31,l,o,y),i.elementType=M,i.lanes=_,i;case V:return Jo(l.children,y,_,o);case U:x=8,y|=24;break;case j:return i=Qn(12,l,o,y|2),i.elementType=j,i.lanes=_,i;case q:return i=Qn(13,l,o,y),i.elementType=q,i.lanes=_,i;case oe:return i=Qn(19,l,o,y),i.elementType=oe,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case G:x=10;break e;case W:x=9;break e;case Q:x=11;break e;case D:x=14;break e;case R:x=16,c=null;break e}x=29,l=Error(s(130,i===null?"null":typeof i,"")),c=null}return o=Qn(x,l,o,y),o.elementType=i,o.type=c,o.lanes=_,o}function Jo(i,o,l,c){return i=Qn(7,i,c,o),i.lanes=l,i}function hf(i,o,l){return i=Qn(6,i,null,o),i.lanes=l,i}function _g(i){var o=Qn(18,null,null,0);return o.stateNode=i,o}function mf(i,o,l){return o=Qn(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Eg=new WeakMap;function di(i,o){if(typeof i=="object"&&i!==null){var l=Eg.get(i);return l!==void 0?l:(o={value:i,source:o,stack:xt(o)},Eg.set(i,o),o)}return{value:i,source:o,stack:xt(o)}}var Br=[],Fr=0,Hu=null,Za=0,fi=[],hi=0,Js=null,ji=1,$i="";function ds(i,o){Br[Fr++]=Za,Br[Fr++]=Hu,Hu=i,Za=o}function Tg(i,o,l){fi[hi++]=ji,fi[hi++]=$i,fi[hi++]=Js,Js=i;var c=ji;i=$i;var y=32-Qt(c)-1;c&=~(1<<y),l+=1;var _=32-Qt(o)+y;if(30<_){var x=y-y%5;_=(c&(1<<x)-1).toString(32),c>>=x,y-=x,ji=1<<32-Qt(o)+y|l<<y|c,$i=_+i}else ji=1<<_|l<<y|c,$i=i}function pf(i){i.return!==null&&(ds(i,1),Tg(i,1,0))}function gf(i){for(;i===Hu;)Hu=Br[--Fr],Br[Fr]=null,Za=Br[--Fr],Br[Fr]=null;for(;i===Js;)Js=fi[--hi],fi[hi]=null,$i=fi[--hi],fi[hi]=null,ji=fi[--hi],fi[hi]=null}function Sg(i,o){fi[hi++]=ji,fi[hi++]=$i,fi[hi++]=Js,ji=o.id,$i=o.overflow,Js=i}var on=null,vt=null,Qe=!1,Qs=null,mi=!1,yf=Error(s(519));function Xs(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw el(di(o,i)),yf}function bg(i){var o=i.stateNode,l=i.type,c=i.memoizedProps;switch(o[Re]=i,o[tt]=c,l){case"dialog":$e("cancel",o),$e("close",o);break;case"iframe":case"object":case"embed":$e("load",o);break;case"video":case"audio":for(l=0;l<Sl.length;l++)$e(Sl[l],o);break;case"source":$e("error",o);break;case"img":case"image":case"link":$e("error",o),$e("load",o);break;case"details":$e("toggle",o);break;case"input":$e("invalid",o),Oo(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":$e("invalid",o);break;case"textarea":$e("invalid",o),Fs(o,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||c.suppressHydrationWarning===!0||Fv(o.textContent,l)?(c.popover!=null&&($e("beforetoggle",o),$e("toggle",o)),c.onScroll!=null&&$e("scroll",o),c.onScrollEnd!=null&&$e("scrollend",o),c.onClick!=null&&(o.onclick=Xt),o=!0):o=!1,o||Xs(i,!0)}function xg(i){for(on=i.return;on;)switch(on.tag){case 5:case 31:case 13:mi=!1;return;case 27:case 3:mi=!0;return;default:on=on.return}}function Gr(i){if(i!==on)return!1;if(!Qe)return xg(i),Qe=!0,!1;var o=i.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||kh(i.type,i.memoizedProps)),l=!l),l&&vt&&Xs(i),xg(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));vt=Jv(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));vt=Jv(i)}else o===27?(o=vt,fo(i.type)?(i=Fh,Fh=null,vt=i):vt=o):vt=on?gi(i.stateNode.nextSibling):null;return!0}function Qo(){vt=on=null,Qe=!1}function vf(){var i=Qs;return i!==null&&(Gn===null?Gn=i:Gn.push.apply(Gn,i),Qs=null),i}function el(i){Qs===null?Qs=[i]:Qs.push(i)}var _f=F(null),Xo=null,fs=null;function Ws(i,o,l){he(_f,o._currentValue),o._currentValue=l}function hs(i){i._currentValue=_f.current,ne(_f)}function Ef(i,o,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),i===l)break;i=i.return}}function Tf(i,o,l,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var x=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var O=0;O<o.length;O++)if(w.context===o[O]){_.lanes|=l,w=_.alternate,w!==null&&(w.lanes|=l),Ef(_.return,l,i),c||(x=null);break e}_=w.next}}else if(y.tag===18){if(x=y.return,x===null)throw Error(s(341));x.lanes|=l,_=x.alternate,_!==null&&(_.lanes|=l),Ef(x,l,i),x=null}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===i){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}}function qr(i,o,l,c){i=null;for(var y=o,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var x=y.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var w=y.type;Jn(y.pendingProps.value,x.value)||(i!==null?i.push(w):i=[w])}}else if(y===Fe.current){if(x=y.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(wl):i=[wl])}y=y.return}i!==null&&Tf(o,i,l,c),o.flags|=262144}function zu(i){for(i=i.firstContext;i!==null;){if(!Jn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Wo(i){Xo=i,fs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function rn(i){return Ag(Xo,i)}function ju(i,o){return Xo===null&&Wo(i),Ag(i,o)}function Ag(i,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},fs===null){if(i===null)throw Error(s(308));fs=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else fs=fs.next=o;return l}var qx=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){o.aborted=!0,i.forEach(function(l){return l()})}},Hx=t.unstable_scheduleCallback,zx=t.unstable_NormalPriority,Ot={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sf(){return{controller:new qx,data:new Map,refCount:0}}function tl(i){i.refCount--,i.refCount===0&&Hx(zx,function(){i.controller.abort()})}var nl=null,bf=0,Hr=0,zr=null;function jx(i,o){if(nl===null){var l=nl=[];bf=0,Hr=Ch(),zr={status:"pending",value:void 0,then:function(c){l.push(c)}}}return bf++,o.then(Cg,Cg),o}function Cg(){if(--bf===0&&nl!==null){zr!==null&&(zr.status="fulfilled");var i=nl;nl=null,Hr=0,zr=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function $x(i,o){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return i.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<l.length;y++)(0,l[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var wg=Z.S;Z.S=function(i,o){cv=Tt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&jx(i,o),wg!==null&&wg(i,o)};var Zo=F(null);function xf(){var i=Zo.current;return i!==null?i:gt.pooledCache}function $u(i,o){o===null?he(Zo,Zo.current):he(Zo,o.pool)}function Rg(){var i=xf();return i===null?null:{parent:Ot._currentValue,pool:i}}var jr=Error(s(460)),Af=Error(s(474)),Yu=Error(s(542)),Ku={then:function(){}};function Ig(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ng(i,o,l){switch(l=i[l],l===void 0?i.push(o):l!==o&&(o.then(Xt,Xt),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Dg(i),i;default:if(typeof o.status=="string")o.then(Xt,Xt);else{if(i=gt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Dg(i),i}throw tr=o,jr}}function er(i){try{var o=i._init;return o(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(tr=l,jr):l}}var tr=null;function Mg(){if(tr===null)throw Error(s(459));var i=tr;return tr=null,i}function Dg(i){if(i===jr||i===Yu)throw Error(s(483))}var $r=null,il=0;function Ju(i){var o=il;return il+=1,$r===null&&($r=[]),Ng($r,i,o)}function sl(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Qu(i,o){throw o.$$typeof===b?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Pg(i){function o($,H){if(i){var K=$.deletions;K===null?($.deletions=[H],$.flags|=16):K.push(H)}}function l($,H){if(!i)return null;for(;H!==null;)o($,H),H=H.sibling;return null}function c($){for(var H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function y($,H){return $=cs($,H),$.index=0,$.sibling=null,$}function _($,H,K){return $.index=K,i?(K=$.alternate,K!==null?(K=K.index,K<H?($.flags|=67108866,H):K):($.flags|=67108866,H)):($.flags|=1048576,H)}function x($){return i&&$.alternate===null&&($.flags|=67108866),$}function w($,H,K,se){return H===null||H.tag!==6?(H=hf(K,$.mode,se),H.return=$,H):(H=y(H,K),H.return=$,H)}function O($,H,K,se){var Ce=K.type;return Ce===V?ie($,H,K.props.children,se,K.key):H!==null&&(H.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===R&&er(Ce)===H.type)?(H=y(H,K.props),sl(H,K),H.return=$,H):(H=qu(K.type,K.key,K.props,null,$.mode,se),sl(H,K),H.return=$,H)}function J($,H,K,se){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=mf(K,$.mode,se),H.return=$,H):(H=y(H,K.children||[]),H.return=$,H)}function ie($,H,K,se,Ce){return H===null||H.tag!==7?(H=Jo(K,$.mode,se,Ce),H.return=$,H):(H=y(H,K),H.return=$,H)}function re($,H,K){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=hf(""+H,$.mode,K),H.return=$,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case C:return K=qu(H.type,H.key,H.props,null,$.mode,K),sl(K,H),K.return=$,K;case N:return H=mf(H,$.mode,K),H.return=$,H;case R:return H=er(H),re($,H,K)}if(Ie(H)||z(H))return H=Jo(H,$.mode,K,null),H.return=$,H;if(typeof H.then=="function")return re($,Ju(H),K);if(H.$$typeof===G)return re($,ju($,H),K);Qu($,H)}return null}function X($,H,K,se){var Ce=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ce!==null?null:w($,H,""+K,se);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return K.key===Ce?O($,H,K,se):null;case N:return K.key===Ce?J($,H,K,se):null;case R:return K=er(K),X($,H,K,se)}if(Ie(K)||z(K))return Ce!==null?null:ie($,H,K,se,null);if(typeof K.then=="function")return X($,H,Ju(K),se);if(K.$$typeof===G)return X($,H,ju($,K),se);Qu($,K)}return null}function ee($,H,K,se,Ce){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return $=$.get(K)||null,w(H,$,""+se,Ce);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case C:return $=$.get(se.key===null?K:se.key)||null,O(H,$,se,Ce);case N:return $=$.get(se.key===null?K:se.key)||null,J(H,$,se,Ce);case R:return se=er(se),ee($,H,K,se,Ce)}if(Ie(se)||z(se))return $=$.get(K)||null,ie(H,$,se,Ce,null);if(typeof se.then=="function")return ee($,H,K,Ju(se),Ce);if(se.$$typeof===G)return ee($,H,K,ju(H,se),Ce);Qu(H,se)}return null}function Se($,H,K,se){for(var Ce=null,it=null,xe=H,qe=H=0,Ke=null;xe!==null&&qe<K.length;qe++){xe.index>qe?(Ke=xe,xe=null):Ke=xe.sibling;var st=X($,xe,K[qe],se);if(st===null){xe===null&&(xe=Ke);break}i&&xe&&st.alternate===null&&o($,xe),H=_(st,H,qe),it===null?Ce=st:it.sibling=st,it=st,xe=Ke}if(qe===K.length)return l($,xe),Qe&&ds($,qe),Ce;if(xe===null){for(;qe<K.length;qe++)xe=re($,K[qe],se),xe!==null&&(H=_(xe,H,qe),it===null?Ce=xe:it.sibling=xe,it=xe);return Qe&&ds($,qe),Ce}for(xe=c(xe);qe<K.length;qe++)Ke=ee(xe,$,qe,K[qe],se),Ke!==null&&(i&&Ke.alternate!==null&&xe.delete(Ke.key===null?qe:Ke.key),H=_(Ke,H,qe),it===null?Ce=Ke:it.sibling=Ke,it=Ke);return i&&xe.forEach(function(yo){return o($,yo)}),Qe&&ds($,qe),Ce}function De($,H,K,se){if(K==null)throw Error(s(151));for(var Ce=null,it=null,xe=H,qe=H=0,Ke=null,st=K.next();xe!==null&&!st.done;qe++,st=K.next()){xe.index>qe?(Ke=xe,xe=null):Ke=xe.sibling;var yo=X($,xe,st.value,se);if(yo===null){xe===null&&(xe=Ke);break}i&&xe&&yo.alternate===null&&o($,xe),H=_(yo,H,qe),it===null?Ce=yo:it.sibling=yo,it=yo,xe=Ke}if(st.done)return l($,xe),Qe&&ds($,qe),Ce;if(xe===null){for(;!st.done;qe++,st=K.next())st=re($,st.value,se),st!==null&&(H=_(st,H,qe),it===null?Ce=st:it.sibling=st,it=st);return Qe&&ds($,qe),Ce}for(xe=c(xe);!st.done;qe++,st=K.next())st=ee(xe,$,qe,st.value,se),st!==null&&(i&&st.alternate!==null&&xe.delete(st.key===null?qe:st.key),H=_(st,H,qe),it===null?Ce=st:it.sibling=st,it=st);return i&&xe.forEach(function(iC){return o($,iC)}),Qe&&ds($,qe),Ce}function pt($,H,K,se){if(typeof K=="object"&&K!==null&&K.type===V&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case C:e:{for(var Ce=K.key;H!==null;){if(H.key===Ce){if(Ce=K.type,Ce===V){if(H.tag===7){l($,H.sibling),se=y(H,K.props.children),se.return=$,$=se;break e}}else if(H.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===R&&er(Ce)===H.type){l($,H.sibling),se=y(H,K.props),sl(se,K),se.return=$,$=se;break e}l($,H);break}else o($,H);H=H.sibling}K.type===V?(se=Jo(K.props.children,$.mode,se,K.key),se.return=$,$=se):(se=qu(K.type,K.key,K.props,null,$.mode,se),sl(se,K),se.return=$,$=se)}return x($);case N:e:{for(Ce=K.key;H!==null;){if(H.key===Ce)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){l($,H.sibling),se=y(H,K.children||[]),se.return=$,$=se;break e}else{l($,H);break}else o($,H);H=H.sibling}se=mf(K,$.mode,se),se.return=$,$=se}return x($);case R:return K=er(K),pt($,H,K,se)}if(Ie(K))return Se($,H,K,se);if(z(K)){if(Ce=z(K),typeof Ce!="function")throw Error(s(150));return K=Ce.call(K),De($,H,K,se)}if(typeof K.then=="function")return pt($,H,Ju(K),se);if(K.$$typeof===G)return pt($,H,ju($,K),se);Qu($,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,H!==null&&H.tag===6?(l($,H.sibling),se=y(H,K),se.return=$,$=se):(l($,H),se=hf(K,$.mode,se),se.return=$,$=se),x($)):l($,H)}return function($,H,K,se){try{il=0;var Ce=pt($,H,K,se);return $r=null,Ce}catch(xe){if(xe===jr||xe===Yu)throw xe;var it=Qn(29,xe,null,$.mode);return it.lanes=se,it.return=$,it}finally{}}}var nr=Pg(!0),Ug=Pg(!1),Zs=!1;function Cf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wf(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function eo(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function to(i,o,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(at&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=Gu(i),yg(i,null,l),o}return Fu(i,c,o,l),Gu(i)}function ol(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var c=o.lanes;c&=i.pendingLanes,l|=c,o.lanes=l,k(i,l)}}function Rf(i,o){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=x:_=_.next=x,l=l.next}while(l!==null);_===null?y=_=o:_=_.next=o}else y=_=o;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}var If=!1;function rl(){if(If){var i=zr;if(i!==null)throw i}}function al(i,o,l,c){If=!1;var y=i.updateQueue;Zs=!1;var _=y.firstBaseUpdate,x=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var O=w,J=O.next;O.next=null,x===null?_=J:x.next=J,x=O;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,w=ie.lastBaseUpdate,w!==x&&(w===null?ie.firstBaseUpdate=J:w.next=J,ie.lastBaseUpdate=O))}if(_!==null){var re=y.baseState;x=0,ie=J=O=null,w=_;do{var X=w.lane&-536870913,ee=X!==w.lane;if(ee?(Ye&X)===X:(c&X)===X){X!==0&&X===Hr&&(If=!0),ie!==null&&(ie=ie.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Se=i,De=w;X=o;var pt=l;switch(De.tag){case 1:if(Se=De.payload,typeof Se=="function"){re=Se.call(pt,re,X);break e}re=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=De.payload,X=typeof Se=="function"?Se.call(pt,re,X):Se,X==null)break e;re=T({},re,X);break e;case 2:Zs=!0}}X=w.callback,X!==null&&(i.flags|=64,ee&&(i.flags|=8192),ee=y.callbacks,ee===null?y.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ie===null?(J=ie=ee,O=re):ie=ie.next=ee,x|=X;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;ee=w,w=ee.next,ee.next=null,y.lastBaseUpdate=ee,y.shared.pending=null}}while(!0);ie===null&&(O=re),y.baseState=O,y.firstBaseUpdate=J,y.lastBaseUpdate=ie,_===null&&(y.shared.lanes=0),ro|=x,i.lanes=x,i.memoizedState=re}}function kg(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Vg(i,o){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)kg(l[i],o)}var Yr=F(null),Xu=F(0);function Lg(i,o){i=Ss,he(Xu,i),he(Yr,o),Ss=i|o.baseLanes}function Nf(){he(Xu,Ss),he(Yr,Yr.current)}function Mf(){Ss=Xu.current,ne(Yr),ne(Xu)}var Xn=F(null),pi=null;function no(i){var o=i.alternate;he(Ut,Ut.current&1),he(Xn,i),pi===null&&(o===null||Yr.current!==null||o.memoizedState!==null)&&(pi=i)}function Df(i){he(Ut,Ut.current),he(Xn,i),pi===null&&(pi=i)}function Og(i){i.tag===22?(he(Ut,Ut.current),he(Xn,i),pi===null&&(pi=i)):io()}function io(){he(Ut,Ut.current),he(Xn,Xn.current)}function Wn(i){ne(Xn),pi===i&&(pi=null),ne(Ut)}var Ut=F(0);function Wu(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Oh(l)||Bh(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ms=0,Ge=null,ht=null,Bt=null,Zu=!1,Kr=!1,ir=!1,ec=0,ll=0,Jr=null,Yx=0;function Nt(){throw Error(s(321))}function Pf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!Jn(i[l],o[l]))return!1;return!0}function Uf(i,o,l,c,y,_){return ms=_,Ge=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Z.H=i===null||i.memoizedState===null?Ty:Jf,ir=!1,_=l(c,y),ir=!1,Kr&&(_=Fg(o,l,c,y)),Bg(i),_}function Bg(i){Z.H=dl;var o=ht!==null&&ht.next!==null;if(ms=0,Bt=ht=Ge=null,Zu=!1,ll=0,Jr=null,o)throw Error(s(300));i===null||Ft||(i=i.dependencies,i!==null&&zu(i)&&(Ft=!0))}function Fg(i,o,l,c){Ge=i;var y=0;do{if(Kr&&(Jr=null),ll=0,Kr=!1,25<=y)throw Error(s(301));if(y+=1,Bt=ht=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Z.H=Sy,_=o(l,c)}while(Kr);return _}function Kx(){var i=Z.H,o=i.useState()[0];return o=typeof o.then=="function"?ul(o):o,i=i.useState()[0],(ht!==null?ht.memoizedState:null)!==i&&(Ge.flags|=1024),o}function kf(){var i=ec!==0;return ec=0,i}function Vf(i,o,l){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~l}function Lf(i){if(Zu){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Zu=!1}ms=0,Bt=ht=Ge=null,Kr=!1,ll=ec=0,Jr=null}function In(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Ge.memoizedState=Bt=i:Bt=Bt.next=i,Bt}function kt(){if(ht===null){var i=Ge.alternate;i=i!==null?i.memoizedState:null}else i=ht.next;var o=Bt===null?Ge.memoizedState:Bt.next;if(o!==null)Bt=o,ht=i;else{if(i===null)throw Ge.alternate===null?Error(s(467)):Error(s(310));ht=i,i={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Bt===null?Ge.memoizedState=Bt=i:Bt=Bt.next=i}return Bt}function tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(i){var o=ll;return ll+=1,Jr===null&&(Jr=[]),i=Ng(Jr,i,o),o=Ge,(Bt===null?o.memoizedState:Bt.next)===null&&(o=o.alternate,Z.H=o===null||o.memoizedState===null?Ty:Jf),i}function nc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ul(i);if(i.$$typeof===G)return rn(i)}throw Error(s(438,String(i)))}function Of(i){var o=null,l=Ge.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var c=Ge.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=tc(),Ge.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(i),c=0;c<i;c++)l[c]=L;return o.index++,l}function ps(i,o){return typeof o=="function"?o(i):o}function ic(i){var o=kt();return Bf(o,ht,i)}function Bf(i,o,l){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=l;var y=i.baseQueue,_=c.pending;if(_!==null){if(y!==null){var x=y.next;y.next=_.next,_.next=x}o.baseQueue=y=_,c.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{o=y.next;var w=x=null,O=null,J=o,ie=!1;do{var re=J.lane&-536870913;if(re!==J.lane?(Ye&re)===re:(ms&re)===re){var X=J.revertLane;if(X===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),re===Hr&&(ie=!0);else if((ms&X)===X){J=J.next,X===Hr&&(ie=!0);continue}else re={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},O===null?(w=O=re,x=_):O=O.next=re,Ge.lanes|=X,ro|=X;re=J.action,ir&&l(_,re),_=J.hasEagerState?J.eagerState:l(_,re)}else X={lane:re,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},O===null?(w=O=X,x=_):O=O.next=X,Ge.lanes|=re,ro|=re;J=J.next}while(J!==null&&J!==o);if(O===null?x=_:O.next=w,!Jn(_,i.memoizedState)&&(Ft=!0,ie&&(l=zr,l!==null)))throw l;i.memoizedState=_,i.baseState=x,i.baseQueue=O,c.lastRenderedState=_}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Ff(i){var o=kt(),l=o.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var c=l.dispatch,y=l.pending,_=o.memoizedState;if(y!==null){l.pending=null;var x=y=y.next;do _=i(_,x.action),x=x.next;while(x!==y);Jn(_,o.memoizedState)||(Ft=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),l.lastRenderedState=_}return[_,c]}function Gg(i,o,l){var c=Ge,y=kt(),_=Qe;if(_){if(l===void 0)throw Error(s(407));l=l()}else l=o();var x=!Jn((ht||y).memoizedState,l);if(x&&(y.memoizedState=l,Ft=!0),y=y.queue,Hf(zg.bind(null,c,y,i),[i]),y.getSnapshot!==o||x||Bt!==null&&Bt.memoizedState.tag&1){if(c.flags|=2048,Qr(9,{destroy:void 0},Hg.bind(null,c,y,l,o),null),gt===null)throw Error(s(349));_||(ms&127)!==0||qg(c,o,l)}return l}function qg(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Ge.updateQueue,o===null?(o=tc(),Ge.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Hg(i,o,l,c){o.value=l,o.getSnapshot=c,jg(o)&&$g(i)}function zg(i,o,l){return l(function(){jg(o)&&$g(i)})}function jg(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!Jn(i,l)}catch{return!0}}function $g(i){var o=Ko(i,2);o!==null&&qn(o,i,2)}function Gf(i){var o=In();if(typeof i=="function"){var l=i;if(i=l(),ir){sn(!0);try{l()}finally{sn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:i},o}function Yg(i,o,l,c){return i.baseState=l,Bf(i,ht,typeof c=="function"?c:ps)}function Jx(i,o,l,c,y){if(rc(i))throw Error(s(485));if(i=o.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){_.listeners.push(x)}};Z.T!==null?l(!0):_.isTransition=!1,c(_),l=o.pending,l===null?(_.next=o.pending=_,Kg(o,_)):(_.next=l.next,o.pending=l.next=_)}}function Kg(i,o){var l=o.action,c=o.payload,y=i.state;if(o.isTransition){var _=Z.T,x={};Z.T=x;try{var w=l(y,c),O=Z.S;O!==null&&O(x,w),Jg(i,o,w)}catch(J){qf(i,o,J)}finally{_!==null&&x.types!==null&&(_.types=x.types),Z.T=_}}else try{_=l(y,c),Jg(i,o,_)}catch(J){qf(i,o,J)}}function Jg(i,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Qg(i,o,c)},function(c){return qf(i,o,c)}):Qg(i,o,l)}function Qg(i,o,l){o.status="fulfilled",o.value=l,Xg(o),i.state=l,o=i.pending,o!==null&&(l=o.next,l===o?i.pending=null:(l=l.next,o.next=l,Kg(i,l)))}function qf(i,o,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=l,Xg(o),o=o.next;while(o!==c)}i.action=null}function Xg(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Wg(i,o){return o}function Zg(i,o){if(Qe){var l=gt.formState;if(l!==null){e:{var c=Ge;if(Qe){if(vt){t:{for(var y=vt,_=mi;y.nodeType!==8;){if(!_){y=null;break t}if(y=gi(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){vt=gi(y.nextSibling),c=y.data==="F!";break e}}Xs(c)}c=!1}c&&(o=l[0])}}return l=In(),l.memoizedState=l.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wg,lastRenderedState:o},l.queue=c,l=vy.bind(null,Ge,c),c.dispatch=l,c=Gf(!1),_=Kf.bind(null,Ge,!1,c.queue),c=In(),y={state:o,dispatch:null,action:i,pending:null},c.queue=y,l=Jx.bind(null,Ge,y,_,l),y.dispatch=l,c.memoizedState=i,[o,l,!1]}function ey(i){var o=kt();return ty(o,ht,i)}function ty(i,o,l){if(o=Bf(i,o,Wg)[0],i=ic(ps)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=ul(o)}catch(x){throw x===jr?Yu:x}else c=o;o=kt();var y=o.queue,_=y.dispatch;return l!==o.memoizedState&&(Ge.flags|=2048,Qr(9,{destroy:void 0},Qx.bind(null,y,l),null)),[c,_,i]}function Qx(i,o){i.action=o}function ny(i){var o=kt(),l=ht;if(l!==null)return ty(o,l,i);kt(),o=o.memoizedState,l=kt();var c=l.queue.dispatch;return l.memoizedState=i,[o,c,!1]}function Qr(i,o,l,c){return i={tag:i,create:l,deps:c,inst:o,next:null},o=Ge.updateQueue,o===null&&(o=tc(),Ge.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,o.lastEffect=i),i}function iy(){return kt().memoizedState}function sc(i,o,l,c){var y=In();Ge.flags|=i,y.memoizedState=Qr(1|o,{destroy:void 0},l,c===void 0?null:c)}function oc(i,o,l,c){var y=kt();c=c===void 0?null:c;var _=y.memoizedState.inst;ht!==null&&c!==null&&Pf(c,ht.memoizedState.deps)?y.memoizedState=Qr(o,_,l,c):(Ge.flags|=i,y.memoizedState=Qr(1|o,_,l,c))}function sy(i,o){sc(8390656,8,i,o)}function Hf(i,o){oc(2048,8,i,o)}function Xx(i){Ge.flags|=4;var o=Ge.updateQueue;if(o===null)o=tc(),Ge.updateQueue=o,o.events=[i];else{var l=o.events;l===null?o.events=[i]:l.push(i)}}function oy(i){var o=kt().memoizedState;return Xx({ref:o,nextImpl:i}),function(){if((at&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function ry(i,o){return oc(4,2,i,o)}function ay(i,o){return oc(4,4,i,o)}function ly(i,o){if(typeof o=="function"){i=i();var l=o(i);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function uy(i,o,l){l=l!=null?l.concat([i]):null,oc(4,4,ly.bind(null,o,i),l)}function zf(){}function cy(i,o){var l=kt();o=o===void 0?null:o;var c=l.memoizedState;return o!==null&&Pf(o,c[1])?c[0]:(l.memoizedState=[i,o],i)}function dy(i,o){var l=kt();o=o===void 0?null:o;var c=l.memoizedState;if(o!==null&&Pf(o,c[1]))return c[0];if(c=i(),ir){sn(!0);try{i()}finally{sn(!1)}}return l.memoizedState=[c,o],c}function jf(i,o,l){return l===void 0||(ms&1073741824)!==0&&(Ye&261930)===0?i.memoizedState=o:(i.memoizedState=l,i=fv(),Ge.lanes|=i,ro|=i,l)}function fy(i,o,l,c){return Jn(l,o)?l:Yr.current!==null?(i=jf(i,l,c),Jn(i,o)||(Ft=!0),i):(ms&42)===0||(ms&1073741824)!==0&&(Ye&261930)===0?(Ft=!0,i.memoizedState=l):(i=fv(),Ge.lanes|=i,ro|=i,o)}function hy(i,o,l,c,y){var _=ce.p;ce.p=_!==0&&8>_?_:8;var x=Z.T,w={};Z.T=w,Kf(i,!1,o,l);try{var O=y(),J=Z.S;if(J!==null&&J(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ie=$x(O,c);cl(i,o,ie,ti(i))}else cl(i,o,c,ti(i))}catch(re){cl(i,o,{then:function(){},status:"rejected",reason:re},ti())}finally{ce.p=_,x!==null&&w.types!==null&&(x.types=w.types),Z.T=x}}function Wx(){}function $f(i,o,l,c){if(i.tag!==5)throw Error(s(476));var y=my(i).queue;hy(i,y,o,Ee,l===null?Wx:function(){return py(i),l(c)})}function my(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:Ee},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:l},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function py(i){var o=my(i);o.next===null&&(o=i.alternate.memoizedState),cl(i,o.next.queue,{},ti())}function Yf(){return rn(wl)}function gy(){return kt().memoizedState}function yy(){return kt().memoizedState}function Zx(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var l=ti();i=eo(l);var c=to(o,i,l);c!==null&&(qn(c,o,l),ol(c,o,l)),o={cache:Sf()},i.payload=o;return}o=o.return}}function eA(i,o,l){var c=ti();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},rc(i)?_y(o,l):(l=df(i,o,l,c),l!==null&&(qn(l,i,c),Ey(l,o,c)))}function vy(i,o,l){var c=ti();cl(i,o,l,c)}function cl(i,o,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(rc(i))_y(o,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var x=o.lastRenderedState,w=_(x,l);if(y.hasEagerState=!0,y.eagerState=w,Jn(w,x))return Fu(i,o,y,0),gt===null&&Bu(),!1}catch{}finally{}if(l=df(i,o,y,c),l!==null)return qn(l,i,c),Ey(l,o,c),!0}return!1}function Kf(i,o,l,c){if(c={lane:2,revertLane:Ch(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},rc(i)){if(o)throw Error(s(479))}else o=df(i,l,c,2),o!==null&&qn(o,i,2)}function rc(i){var o=i.alternate;return i===Ge||o!==null&&o===Ge}function _y(i,o){Kr=Zu=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function Ey(i,o,l){if((l&4194048)!==0){var c=o.lanes;c&=i.pendingLanes,l|=c,o.lanes=l,k(i,l)}}var dl={readContext:rn,use:nc,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};dl.useEffectEvent=Nt;var Ty={readContext:rn,use:nc,useCallback:function(i,o){return In().memoizedState=[i,o===void 0?null:o],i},useContext:rn,useEffect:sy,useImperativeHandle:function(i,o,l){l=l!=null?l.concat([i]):null,sc(4194308,4,ly.bind(null,o,i),l)},useLayoutEffect:function(i,o){return sc(4194308,4,i,o)},useInsertionEffect:function(i,o){sc(4,2,i,o)},useMemo:function(i,o){var l=In();o=o===void 0?null:o;var c=i();if(ir){sn(!0);try{i()}finally{sn(!1)}}return l.memoizedState=[c,o],c},useReducer:function(i,o,l){var c=In();if(l!==void 0){var y=l(o);if(ir){sn(!0);try{l(o)}finally{sn(!1)}}}else y=o;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=eA.bind(null,Ge,i),[c.memoizedState,i]},useRef:function(i){var o=In();return i={current:i},o.memoizedState=i},useState:function(i){i=Gf(i);var o=i.queue,l=vy.bind(null,Ge,o);return o.dispatch=l,[i.memoizedState,l]},useDebugValue:zf,useDeferredValue:function(i,o){var l=In();return jf(l,i,o)},useTransition:function(){var i=Gf(!1);return i=hy.bind(null,Ge,i.queue,!0,!1),In().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,l){var c=Ge,y=In();if(Qe){if(l===void 0)throw Error(s(407));l=l()}else{if(l=o(),gt===null)throw Error(s(349));(Ye&127)!==0||qg(c,o,l)}y.memoizedState=l;var _={value:l,getSnapshot:o};return y.queue=_,sy(zg.bind(null,c,_,i),[i]),c.flags|=2048,Qr(9,{destroy:void 0},Hg.bind(null,c,_,l,o),null),l},useId:function(){var i=In(),o=gt.identifierPrefix;if(Qe){var l=$i,c=ji;l=(c&~(1<<32-Qt(c)-1)).toString(32)+l,o="_"+o+"R_"+l,l=ec++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=Yx++,o="_"+o+"r_"+l.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Yf,useFormState:Zg,useActionState:Zg,useOptimistic:function(i){var o=In();o.memoizedState=o.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Kf.bind(null,Ge,!0,l),l.dispatch=o,[i,o]},useMemoCache:Of,useCacheRefresh:function(){return In().memoizedState=Zx.bind(null,Ge)},useEffectEvent:function(i){var o=In(),l={impl:i};return o.memoizedState=l,function(){if((at&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Jf={readContext:rn,use:nc,useCallback:cy,useContext:rn,useEffect:Hf,useImperativeHandle:uy,useInsertionEffect:ry,useLayoutEffect:ay,useMemo:dy,useReducer:ic,useRef:iy,useState:function(){return ic(ps)},useDebugValue:zf,useDeferredValue:function(i,o){var l=kt();return fy(l,ht.memoizedState,i,o)},useTransition:function(){var i=ic(ps)[0],o=kt().memoizedState;return[typeof i=="boolean"?i:ul(i),o]},useSyncExternalStore:Gg,useId:gy,useHostTransitionStatus:Yf,useFormState:ey,useActionState:ey,useOptimistic:function(i,o){var l=kt();return Yg(l,ht,i,o)},useMemoCache:Of,useCacheRefresh:yy};Jf.useEffectEvent=oy;var Sy={readContext:rn,use:nc,useCallback:cy,useContext:rn,useEffect:Hf,useImperativeHandle:uy,useInsertionEffect:ry,useLayoutEffect:ay,useMemo:dy,useReducer:Ff,useRef:iy,useState:function(){return Ff(ps)},useDebugValue:zf,useDeferredValue:function(i,o){var l=kt();return ht===null?jf(l,i,o):fy(l,ht.memoizedState,i,o)},useTransition:function(){var i=Ff(ps)[0],o=kt().memoizedState;return[typeof i=="boolean"?i:ul(i),o]},useSyncExternalStore:Gg,useId:gy,useHostTransitionStatus:Yf,useFormState:ny,useActionState:ny,useOptimistic:function(i,o){var l=kt();return ht!==null?Yg(l,ht,i,o):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Of,useCacheRefresh:yy};Sy.useEffectEvent=oy;function Qf(i,o,l,c){o=i.memoizedState,l=l(c,o),l=l==null?o:T({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Xf={enqueueSetState:function(i,o,l){i=i._reactInternals;var c=ti(),y=eo(c);y.payload=o,l!=null&&(y.callback=l),o=to(i,y,c),o!==null&&(qn(o,i,c),ol(o,i,c))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var c=ti(),y=eo(c);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=to(i,y,c),o!==null&&(qn(o,i,c),ol(o,i,c))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=ti(),c=eo(l);c.tag=2,o!=null&&(c.callback=o),o=to(i,c,l),o!==null&&(qn(o,i,l),ol(o,i,l))}};function by(i,o,l,c,y,_,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,_,x):o.prototype&&o.prototype.isPureReactComponent?!Xa(l,c)||!Xa(y,_):!0}function xy(i,o,l,c){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,c),o.state!==i&&Xf.enqueueReplaceState(o,o.state,null)}function sr(i,o){var l=o;if("ref"in o){l={};for(var c in o)c!=="ref"&&(l[c]=o[c])}if(i=i.defaultProps){l===o&&(l=T({},l));for(var y in i)l[y]===void 0&&(l[y]=i[y])}return l}function Ay(i){Ou(i)}function Cy(i){console.error(i)}function wy(i){Ou(i)}function ac(i,o){try{var l=i.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function Ry(i,o,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Wf(i,o,l){return l=eo(l),l.tag=3,l.payload={element:null},l.callback=function(){ac(i,o)},l}function Iy(i){return i=eo(i),i.tag=3,i}function Ny(i,o,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;i.payload=function(){return y(_)},i.callback=function(){Ry(o,l,c)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){Ry(o,l,c),typeof y!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function tA(i,o,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=l.alternate,o!==null&&qr(o,l,y,!0),l=Xn.current,l!==null){switch(l.tag){case 31:case 13:return pi===null?_c():l.alternate===null&&Mt===0&&(Mt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Ku?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([c]):o.add(c),bh(i,c,y)),!1;case 22:return l.flags|=65536,c===Ku?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([c]):l.add(c)),bh(i,c,y)),!1}throw Error(s(435,l.tag))}return bh(i,c,y),_c(),!1}if(Qe)return o=Xn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==yf&&(i=Error(s(422),{cause:c}),el(di(i,l)))):(c!==yf&&(o=Error(s(423),{cause:c}),el(di(o,l))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=di(c,l),y=Wf(i.stateNode,c,y),Rf(i,y),Mt!==4&&(Mt=2)),!1;var _=Error(s(520),{cause:c});if(_=di(_,l),_l===null?_l=[_]:_l.push(_),Mt!==4&&(Mt=2),o===null)return!0;c=di(c,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,i=y&-y,l.lanes|=i,i=Wf(l.stateNode,c,i),Rf(l,i),!1;case 1:if(o=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ao===null||!ao.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=Iy(y),Ny(y,i,l,c),Rf(l,y),!1}l=l.return}while(l!==null);return!1}var Zf=Error(s(461)),Ft=!1;function an(i,o,l,c){o.child=i===null?Ug(o,null,l,c):nr(o,i.child,l,c)}function My(i,o,l,c,y){l=l.render;var _=o.ref;if("ref"in c){var x={};for(var w in c)w!=="ref"&&(x[w]=c[w])}else x=c;return Wo(o),c=Uf(i,o,l,x,_,y),w=kf(),i!==null&&!Ft?(Vf(i,o,y),gs(i,o,y)):(Qe&&w&&pf(o),o.flags|=1,an(i,o,c,y),o.child)}function Dy(i,o,l,c,y){if(i===null){var _=l.type;return typeof _=="function"&&!ff(_)&&_.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=_,Py(i,o,_,c,y)):(i=qu(l.type,null,c,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!ah(i,y)){var x=_.memoizedProps;if(l=l.compare,l=l!==null?l:Xa,l(x,c)&&i.ref===o.ref)return gs(i,o,y)}return o.flags|=1,i=cs(_,c),i.ref=o.ref,i.return=o,o.child=i}function Py(i,o,l,c,y){if(i!==null){var _=i.memoizedProps;if(Xa(_,c)&&i.ref===o.ref)if(Ft=!1,o.pendingProps=c=_,ah(i,y))(i.flags&131072)!==0&&(Ft=!0);else return o.lanes=i.lanes,gs(i,o,y)}return eh(i,o,l,c,y)}function Uy(i,o,l,c){var y=c.children,_=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(c=o.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,o.child=null;return ky(i,o,_,l,c)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&$u(o,_!==null?_.cachePool:null),_!==null?Lg(o,_):Nf(),Og(o);else return c=o.lanes=536870912,ky(i,o,_!==null?_.baseLanes|l:l,l,c)}else _!==null?($u(o,_.cachePool),Lg(o,_),io(),o.memoizedState=null):(i!==null&&$u(o,null),Nf(),io());return an(i,o,y,l),o.child}function fl(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function ky(i,o,l,c,y){var _=xf();return _=_===null?null:{parent:Ot._currentValue,pool:_},o.memoizedState={baseLanes:l,cachePool:_},i!==null&&$u(o,null),Nf(),Og(o),i!==null&&qr(i,o,c,!0),o.childLanes=y,null}function lc(i,o){return o=cc({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Vy(i,o,l){return nr(o,i.child,null,l),i=lc(o,o.pendingProps),i.flags|=2,Wn(o),o.memoizedState=null,i}function nA(i,o,l){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Qe){if(c.mode==="hidden")return i=lc(o,c),o.lanes=536870912,fl(null,i);if(Df(o),(i=vt)?(i=Kv(i,mi),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Js!==null?{id:ji,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},l=_g(i),l.return=o,o.child=l,on=o,vt=null)):i=null,i===null)throw Xs(o);return o.lanes=536870912,null}return lc(o,c)}var _=i.memoizedState;if(_!==null){var x=_.dehydrated;if(Df(o),y)if(o.flags&256)o.flags&=-257,o=Vy(i,o,l);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Ft||qr(i,o,l,!1),y=(l&i.childLanes)!==0,Ft||y){if(c=gt,c!==null&&(x=le(c,l),x!==0&&x!==_.retryLane))throw _.retryLane=x,Ko(i,x),qn(c,i,x),Zf;_c(),o=Vy(i,o,l)}else i=_.treeContext,vt=gi(x.nextSibling),on=o,Qe=!0,Qs=null,mi=!1,i!==null&&Sg(o,i),o=lc(o,c),o.flags|=4096;return o}return i=cs(i.child,{mode:c.mode,children:c.children}),i.ref=o.ref,o.child=i,i.return=o,i}function uc(i,o){var l=o.ref;if(l===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(o.flags|=4194816)}}function eh(i,o,l,c,y){return Wo(o),l=Uf(i,o,l,c,void 0,y),c=kf(),i!==null&&!Ft?(Vf(i,o,y),gs(i,o,y)):(Qe&&c&&pf(o),o.flags|=1,an(i,o,l,y),o.child)}function Ly(i,o,l,c,y,_){return Wo(o),o.updateQueue=null,l=Fg(o,c,l,y),Bg(i),c=kf(),i!==null&&!Ft?(Vf(i,o,_),gs(i,o,_)):(Qe&&c&&pf(o),o.flags|=1,an(i,o,l,_),o.child)}function Oy(i,o,l,c,y){if(Wo(o),o.stateNode===null){var _=Or,x=l.contextType;typeof x=="object"&&x!==null&&(_=rn(x)),_=new l(c,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Xf,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=c,_.state=o.memoizedState,_.refs={},Cf(o),x=l.contextType,_.context=typeof x=="object"&&x!==null?rn(x):Or,_.state=o.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Qf(o,l,x,c),_.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(x=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),x!==_.state&&Xf.enqueueReplaceState(_,_.state,null),al(o,c,_,y),rl(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(i===null){_=o.stateNode;var w=o.memoizedProps,O=sr(l,w);_.props=O;var J=_.context,ie=l.contextType;x=Or,typeof ie=="object"&&ie!==null&&(x=rn(ie));var re=l.getDerivedStateFromProps;ie=typeof re=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=o.pendingProps!==w,ie||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||J!==x)&&xy(o,_,c,x),Zs=!1;var X=o.memoizedState;_.state=X,al(o,c,_,y),rl(),J=o.memoizedState,w||X!==J||Zs?(typeof re=="function"&&(Qf(o,l,re,c),J=o.memoizedState),(O=Zs||by(o,l,O,c,X,J,x))?(ie||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=J),_.props=c,_.state=J,_.context=x,c=O):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{_=o.stateNode,wf(i,o),x=o.memoizedProps,ie=sr(l,x),_.props=ie,re=o.pendingProps,X=_.context,J=l.contextType,O=Or,typeof J=="object"&&J!==null&&(O=rn(J)),w=l.getDerivedStateFromProps,(J=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(x!==re||X!==O)&&xy(o,_,c,O),Zs=!1,X=o.memoizedState,_.state=X,al(o,c,_,y),rl();var ee=o.memoizedState;x!==re||X!==ee||Zs||i!==null&&i.dependencies!==null&&zu(i.dependencies)?(typeof w=="function"&&(Qf(o,l,w,c),ee=o.memoizedState),(ie=Zs||by(o,l,ie,c,X,ee,O)||i!==null&&i.dependencies!==null&&zu(i.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,ee,O),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,ee,O)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||x===i.memoizedProps&&X===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&X===i.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=ee),_.props=c,_.state=ee,_.context=O,c=ie):(typeof _.componentDidUpdate!="function"||x===i.memoizedProps&&X===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&X===i.memoizedState||(o.flags|=1024),c=!1)}return _=c,uc(i,o),c=(o.flags&128)!==0,_||c?(_=o.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,i!==null&&c?(o.child=nr(o,i.child,null,y),o.child=nr(o,null,l,y)):an(i,o,l,y),o.memoizedState=_.state,i=o.child):i=gs(i,o,y),i}function By(i,o,l,c){return Qo(),o.flags|=256,an(i,o,l,c),o.child}var th={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nh(i){return{baseLanes:i,cachePool:Rg()}}function ih(i,o,l){return i=i!==null?i.childLanes&~l:0,o&&(i|=ei),i}function Fy(i,o,l){var c=o.pendingProps,y=!1,_=(o.flags&128)!==0,x;if((x=_)||(x=i!==null&&i.memoizedState===null?!1:(Ut.current&2)!==0),x&&(y=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,i===null){if(Qe){if(y?no(o):io(),(i=vt)?(i=Kv(i,mi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Js!==null?{id:ji,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},l=_g(i),l.return=o,o.child=l,on=o,vt=null)):i=null,i===null)throw Xs(o);return Bh(i)?o.lanes=32:o.lanes=536870912,null}var w=c.children;return c=c.fallback,y?(io(),y=o.mode,w=cc({mode:"hidden",children:w},y),c=Jo(c,y,l,null),w.return=o,c.return=o,w.sibling=c,o.child=w,c=o.child,c.memoizedState=nh(l),c.childLanes=ih(i,x,l),o.memoizedState=th,fl(null,c)):(no(o),sh(o,w))}var O=i.memoizedState;if(O!==null&&(w=O.dehydrated,w!==null)){if(_)o.flags&256?(no(o),o.flags&=-257,o=oh(i,o,l)):o.memoizedState!==null?(io(),o.child=i.child,o.flags|=128,o=null):(io(),w=c.fallback,y=o.mode,c=cc({mode:"visible",children:c.children},y),w=Jo(w,y,l,null),w.flags|=2,c.return=o,w.return=o,c.sibling=w,o.child=c,nr(o,i.child,null,l),c=o.child,c.memoizedState=nh(l),c.childLanes=ih(i,x,l),o.memoizedState=th,o=fl(null,c));else if(no(o),Bh(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var J=x.dgst;x=J,c=Error(s(419)),c.stack="",c.digest=x,el({value:c,source:null,stack:null}),o=oh(i,o,l)}else if(Ft||qr(i,o,l,!1),x=(l&i.childLanes)!==0,Ft||x){if(x=gt,x!==null&&(c=le(x,l),c!==0&&c!==O.retryLane))throw O.retryLane=c,Ko(i,c),qn(x,i,c),Zf;Oh(w)||_c(),o=oh(i,o,l)}else Oh(w)?(o.flags|=192,o.child=i.child,o=null):(i=O.treeContext,vt=gi(w.nextSibling),on=o,Qe=!0,Qs=null,mi=!1,i!==null&&Sg(o,i),o=sh(o,c.children),o.flags|=4096);return o}return y?(io(),w=c.fallback,y=o.mode,O=i.child,J=O.sibling,c=cs(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,J!==null?w=cs(J,w):(w=Jo(w,y,l,null),w.flags|=2),w.return=o,c.return=o,c.sibling=w,o.child=c,fl(null,c),c=o.child,w=i.child.memoizedState,w===null?w=nh(l):(y=w.cachePool,y!==null?(O=Ot._currentValue,y=y.parent!==O?{parent:O,pool:O}:y):y=Rg(),w={baseLanes:w.baseLanes|l,cachePool:y}),c.memoizedState=w,c.childLanes=ih(i,x,l),o.memoizedState=th,fl(i.child,c)):(no(o),l=i.child,i=l.sibling,l=cs(l,{mode:"visible",children:c.children}),l.return=o,l.sibling=null,i!==null&&(x=o.deletions,x===null?(o.deletions=[i],o.flags|=16):x.push(i)),o.child=l,o.memoizedState=null,l)}function sh(i,o){return o=cc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function cc(i,o){return i=Qn(22,i,null,o),i.lanes=0,i}function oh(i,o,l){return nr(o,i.child,null,l),i=sh(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Gy(i,o,l){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o),Ef(i.return,o,l)}function rh(i,o,l,c,y,_){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=l,x.tailMode=y,x.treeForkCount=_)}function qy(i,o,l){var c=o.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var x=Ut.current,w=(x&2)!==0;if(w?(x=x&1|2,o.flags|=128):x&=1,he(Ut,x),an(i,o,c,l),c=Qe?Za:0,!w&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Gy(i,l,o);else if(i.tag===19)Gy(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(l=o.child,y=null;l!==null;)i=l.alternate,i!==null&&Wu(i)===null&&(y=l),l=l.sibling;l=y,l===null?(y=o.child,o.child=null):(y=l.sibling,l.sibling=null),rh(o,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&Wu(i)===null){o.child=y;break}i=y.sibling,y.sibling=l,l=y,y=i}rh(o,!0,l,null,_,c);break;case"together":rh(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function gs(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),ro|=o.lanes,(l&o.childLanes)===0)if(i!==null){if(qr(i,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,l=cs(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=cs(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function ah(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&zu(i)))}function iA(i,o,l){switch(o.tag){case 3:Ht(o,o.stateNode.containerInfo),Ws(o,Ot,i.memoizedState.cache),Qo();break;case 27:case 5:mn(o);break;case 4:Ht(o,o.stateNode.containerInfo);break;case 10:Ws(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Df(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(no(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Fy(i,o,l):(no(o),i=gs(i,o,l),i!==null?i.sibling:null);no(o);break;case 19:var y=(i.flags&128)!==0;if(c=(l&o.childLanes)!==0,c||(qr(i,o,l,!1),c=(l&o.childLanes)!==0),y){if(c)return qy(i,o,l);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),he(Ut,Ut.current),c)break;return null;case 22:return o.lanes=0,Uy(i,o,l,o.pendingProps);case 24:Ws(o,Ot,i.memoizedState.cache)}return gs(i,o,l)}function Hy(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps)Ft=!0;else{if(!ah(i,l)&&(o.flags&128)===0)return Ft=!1,iA(i,o,l);Ft=(i.flags&131072)!==0}else Ft=!1,Qe&&(o.flags&1048576)!==0&&Tg(o,Za,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(i=er(o.elementType),o.type=i,typeof i=="function")ff(i)?(c=sr(i,c),o.tag=1,o=Oy(null,o,i,c,l)):(o.tag=0,o=eh(null,o,i,c,l));else{if(i!=null){var y=i.$$typeof;if(y===Q){o.tag=11,o=My(null,o,i,c,l);break e}else if(y===D){o.tag=14,o=Dy(null,o,i,c,l);break e}}throw o=we(i)||i,Error(s(306,o,""))}}return o;case 0:return eh(i,o,o.type,o.pendingProps,l);case 1:return c=o.type,y=sr(c,o.pendingProps),Oy(i,o,c,y,l);case 3:e:{if(Ht(o,o.stateNode.containerInfo),i===null)throw Error(s(387));c=o.pendingProps;var _=o.memoizedState;y=_.element,wf(i,o),al(o,c,null,l);var x=o.memoizedState;if(c=x.cache,Ws(o,Ot,c),c!==_.cache&&Tf(o,[Ot],l,!0),rl(),c=x.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=By(i,o,c,l);break e}else if(c!==y){y=di(Error(s(424)),o),el(y),o=By(i,o,c,l);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(vt=gi(i.firstChild),on=o,Qe=!0,Qs=null,mi=!0,l=Ug(o,null,c,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Qo(),c===y){o=gs(i,o,l);break e}an(i,o,c,l)}o=o.child}return o;case 26:return uc(i,o),i===null?(l=e_(o.type,null,o.pendingProps,null))?o.memoizedState=l:Qe||(l=o.type,i=o.pendingProps,c=Cc(Ue.current).createElement(l),c[Re]=o,c[tt]=i,ln(c,l,i),Pt(c),o.stateNode=c):o.memoizedState=e_(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return mn(o),i===null&&Qe&&(c=o.stateNode=Xv(o.type,o.pendingProps,Ue.current),on=o,mi=!0,y=vt,fo(o.type)?(Fh=y,vt=gi(c.firstChild)):vt=y),an(i,o,o.pendingProps.children,l),uc(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Qe&&((y=c=vt)&&(c=PA(c,o.type,o.pendingProps,mi),c!==null?(o.stateNode=c,on=o,vt=gi(c.firstChild),mi=!1,y=!0):y=!1),y||Xs(o)),mn(o),y=o.type,_=o.pendingProps,x=i!==null?i.memoizedProps:null,c=_.children,kh(y,_)?c=null:x!==null&&kh(y,x)&&(o.flags|=32),o.memoizedState!==null&&(y=Uf(i,o,Kx,null,null,l),wl._currentValue=y),uc(i,o),an(i,o,c,l),o.child;case 6:return i===null&&Qe&&((i=l=vt)&&(l=UA(l,o.pendingProps,mi),l!==null?(o.stateNode=l,on=o,vt=null,i=!0):i=!1),i||Xs(o)),null;case 13:return Fy(i,o,l);case 4:return Ht(o,o.stateNode.containerInfo),c=o.pendingProps,i===null?o.child=nr(o,null,c,l):an(i,o,c,l),o.child;case 11:return My(i,o,o.type,o.pendingProps,l);case 7:return an(i,o,o.pendingProps,l),o.child;case 8:return an(i,o,o.pendingProps.children,l),o.child;case 12:return an(i,o,o.pendingProps.children,l),o.child;case 10:return c=o.pendingProps,Ws(o,o.type,c.value),an(i,o,c.children,l),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,Wo(o),y=rn(y),c=c(y),o.flags|=1,an(i,o,c,l),o.child;case 14:return Dy(i,o,o.type,o.pendingProps,l);case 15:return Py(i,o,o.type,o.pendingProps,l);case 19:return qy(i,o,l);case 31:return nA(i,o,l);case 22:return Uy(i,o,l,o.pendingProps);case 24:return Wo(o),c=rn(Ot),i===null?(y=xf(),y===null&&(y=gt,_=Sf(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),o.memoizedState={parent:c,cache:y},Cf(o),Ws(o,Ot,y)):((i.lanes&l)!==0&&(wf(i,o),al(o,null,null,l),rl()),y=i.memoizedState,_=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),Ws(o,Ot,c)):(c=_.cache,Ws(o,Ot,c),c!==y.cache&&Tf(o,[Ot],l,!0))),an(i,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function ys(i){i.flags|=4}function lh(i,o,l,c,y){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(gv())i.flags|=8192;else throw tr=Ku,Af}else i.flags&=-16777217}function zy(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!o_(o))if(gv())i.flags|=8192;else throw tr=Ku,Af}function dc(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?ko():536870912,i.lanes|=o,ea|=o)}function hl(i,o){if(!Qe)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function _t(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(o)for(var y=i.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=l,o}function sA(i,o,l){var c=o.pendingProps;switch(gf(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(o),null;case 1:return _t(o),null;case 3:return l=o.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),hs(Ot),lt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Gr(o)?ys(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,vf())),_t(o),null;case 26:var y=o.type,_=o.memoizedState;return i===null?(ys(o),_!==null?(_t(o),zy(o,_)):(_t(o),lh(o,y,null,c,l))):_?_!==i.memoizedState?(ys(o),_t(o),zy(o,_)):(_t(o),o.flags&=-16777217):(i=i.memoizedProps,i!==c&&ys(o),_t(o),lh(o,y,i,c,l)),null;case 27:if(Pn(o),l=Ue.current,y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&ys(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return _t(o),null}i=Te.current,Gr(o)?bg(o):(i=Xv(y,c,l),o.stateNode=i,ys(o))}return _t(o),null;case 5:if(Pn(o),y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&ys(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return _t(o),null}if(_=Te.current,Gr(o))bg(o);else{var x=Cc(Ue.current);switch(_){case 1:_=x.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=x.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=x.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=x.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=x.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?x.createElement(y,{is:c.is}):x.createElement(y)}}_[Re]=o,_[tt]=c;e:for(x=o.child;x!==null;){if(x.tag===5||x.tag===6)_.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===o)break e;for(;x.sibling===null;){if(x.return===null||x.return===o)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}o.stateNode=_;e:switch(ln(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ys(o)}}return _t(o),lh(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,l),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==c&&ys(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(s(166));if(i=Ue.current,Gr(o)){if(i=o.stateNode,l=o.memoizedProps,c=null,y=on,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[Re]=o,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Fv(i.nodeValue,l)),i||Xs(o,!0)}else i=Cc(i).createTextNode(c),i[Re]=o,o.stateNode=i}return _t(o),null;case 31:if(l=o.memoizedState,i===null||i.memoizedState!==null){if(c=Gr(o),l!==null){if(i===null){if(!c)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Re]=o}else Qo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_t(o),i=!1}else l=vf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return o.flags&256?(Wn(o),o):(Wn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return _t(o),null;case 13:if(c=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Gr(o),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Re]=o}else Qo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_t(o),y=!1}else y=vf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Wn(o),o):(Wn(o),null)}return Wn(o),(o.flags&128)!==0?(o.lanes=l,o):(l=c!==null,i=i!==null&&i.memoizedState!==null,l&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==i&&l&&(o.child.flags|=8192),dc(o,o.updateQueue),_t(o),null);case 4:return lt(),i===null&&Nh(o.stateNode.containerInfo),_t(o),null;case 10:return hs(o.type),_t(o),null;case 19:if(ne(Ut),c=o.memoizedState,c===null)return _t(o),null;if(y=(o.flags&128)!==0,_=c.rendering,_===null)if(y)hl(c,!1);else{if(Mt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=Wu(i),_!==null){for(o.flags|=128,hl(c,!1),i=_.updateQueue,o.updateQueue=i,dc(o,i),o.subtreeFlags=0,i=l,l=o.child;l!==null;)vg(l,i),l=l.sibling;return he(Ut,Ut.current&1|2),Qe&&ds(o,c.treeForkCount),o.child}i=i.sibling}c.tail!==null&&Tt()>gc&&(o.flags|=128,y=!0,hl(c,!1),o.lanes=4194304)}else{if(!y)if(i=Wu(_),i!==null){if(o.flags|=128,y=!0,i=i.updateQueue,o.updateQueue=i,dc(o,i),hl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Qe)return _t(o),null}else 2*Tt()-c.renderingStartTime>gc&&l!==536870912&&(o.flags|=128,y=!0,hl(c,!1),o.lanes=4194304);c.isBackwards?(_.sibling=o.child,o.child=_):(i=c.last,i!==null?i.sibling=_:o.child=_,c.last=_)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=Tt(),i.sibling=null,l=Ut.current,he(Ut,y?l&1|2:l&1),Qe&&ds(o,c.treeForkCount),i):(_t(o),null);case 22:case 23:return Wn(o),Mf(),c=o.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(l&536870912)!==0&&(o.flags&128)===0&&(_t(o),o.subtreeFlags&6&&(o.flags|=8192)):_t(o),l=o.updateQueue,l!==null&&dc(o,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==l&&(o.flags|=2048),i!==null&&ne(Zo),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),hs(Ot),_t(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function oA(i,o){switch(gf(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return hs(Ot),lt(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Pn(o),null;case 31:if(o.memoizedState!==null){if(Wn(o),o.alternate===null)throw Error(s(340));Qo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Wn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Qo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ne(Ut),null;case 4:return lt(),null;case 10:return hs(o.type),null;case 22:case 23:return Wn(o),Mf(),i!==null&&ne(Zo),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return hs(Ot),null;case 25:return null;default:return null}}function jy(i,o){switch(gf(o),o.tag){case 3:hs(Ot),lt();break;case 26:case 27:case 5:Pn(o);break;case 4:lt();break;case 31:o.memoizedState!==null&&Wn(o);break;case 13:Wn(o);break;case 19:ne(Ut);break;case 10:hs(o.type);break;case 22:case 23:Wn(o),Mf(),i!==null&&ne(Zo);break;case 24:hs(Ot)}}function ml(i,o){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&i)===i){c=void 0;var _=l.create,x=l.inst;c=_(),x.destroy=c}l=l.next}while(l!==y)}}catch(w){dt(o,o.return,w)}}function so(i,o,l){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&i)===i){var x=c.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,y=o;var O=l,J=w;try{J()}catch(ie){dt(y,O,ie)}}}c=c.next}while(c!==_)}}catch(ie){dt(o,o.return,ie)}}function $y(i){var o=i.updateQueue;if(o!==null){var l=i.stateNode;try{Vg(o,l)}catch(c){dt(i,i.return,c)}}}function Yy(i,o,l){l.props=sr(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){dt(i,o,c)}}function pl(i,o){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof l=="function"?i.refCleanup=l(c):l.current=c}}catch(y){dt(i,o,y)}}function Yi(i,o){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){dt(i,o,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){dt(i,o,y)}else l.current=null}function Ky(i){var o=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){dt(i,i.return,y)}}function uh(i,o,l){try{var c=i.stateNode;wA(c,i.type,l,o),c[tt]=o}catch(y){dt(i,i.return,y)}}function Jy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&fo(i.type)||i.tag===4}function ch(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Jy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&fo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function dh(i,o,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(i),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Xt));else if(c!==4&&(c===27&&fo(i.type)&&(l=i.stateNode,o=null),i=i.child,i!==null))for(dh(i,o,l),i=i.sibling;i!==null;)dh(i,o,l),i=i.sibling}function fc(i,o,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(c!==4&&(c===27&&fo(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(fc(i,o,l),i=i.sibling;i!==null;)fc(i,o,l),i=i.sibling}function Qy(i){var o=i.stateNode,l=i.memoizedProps;try{for(var c=i.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);ln(o,c,l),o[Re]=i,o[tt]=l}catch(_){dt(i,i.return,_)}}var vs=!1,Gt=!1,fh=!1,Xy=typeof WeakSet=="function"?WeakSet:Set,en=null;function rA(i,o){if(i=i.containerInfo,Ph=Pc,i=ug(i),of(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var x=0,w=-1,O=-1,J=0,ie=0,re=i,X=null;t:for(;;){for(var ee;re!==l||y!==0&&re.nodeType!==3||(w=x+y),re!==_||c!==0&&re.nodeType!==3||(O=x+c),re.nodeType===3&&(x+=re.nodeValue.length),(ee=re.firstChild)!==null;)X=re,re=ee;for(;;){if(re===i)break t;if(X===l&&++J===y&&(w=x),X===_&&++ie===c&&(O=x),(ee=re.nextSibling)!==null)break;re=X,X=re.parentNode}re=ee}l=w===-1||O===-1?null:{start:w,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Uh={focusedElem:i,selectionRange:l},Pc=!1,en=o;en!==null;)if(o=en,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,en=i;else for(;en!==null;){switch(o=en,_=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)y=i[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=o,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var Se=sr(l.type,y);i=c.getSnapshotBeforeUpdate(Se,_),c.__reactInternalSnapshotBeforeUpdate=i}catch(De){dt(l,l.return,De)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,l=i.nodeType,l===9)Lh(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Lh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,en=i;break}en=o.return}}function Wy(i,o,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Es(i,l),c&4&&ml(5,l);break;case 1:if(Es(i,l),c&4)if(i=l.stateNode,o===null)try{i.componentDidMount()}catch(x){dt(l,l.return,x)}else{var y=sr(l.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(y,o,i.__reactInternalSnapshotBeforeUpdate)}catch(x){dt(l,l.return,x)}}c&64&&$y(l),c&512&&pl(l,l.return);break;case 3:if(Es(i,l),c&64&&(i=l.updateQueue,i!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Vg(i,o)}catch(x){dt(l,l.return,x)}}break;case 27:o===null&&c&4&&Qy(l);case 26:case 5:Es(i,l),o===null&&c&4&&Ky(l),c&512&&pl(l,l.return);break;case 12:Es(i,l);break;case 31:Es(i,l),c&4&&tv(i,l);break;case 13:Es(i,l),c&4&&nv(i,l),c&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=pA.bind(null,l),kA(i,l))));break;case 22:if(c=l.memoizedState!==null||vs,!c){o=o!==null&&o.memoizedState!==null||Gt,y=vs;var _=Gt;vs=c,(Gt=o)&&!_?Ts(i,l,(l.subtreeFlags&8772)!==0):Es(i,l),vs=y,Gt=_}break;case 30:break;default:Es(i,l)}}function Zy(i){var o=i.alternate;o!==null&&(i.alternate=null,Zy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Vo(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var St=null,On=!1;function _s(i,o,l){for(l=l.child;l!==null;)ev(i,o,l),l=l.sibling}function ev(i,o,l){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(et,l)}catch{}switch(l.tag){case 26:Gt||Yi(l,o),_s(i,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Gt||Yi(l,o);var c=St,y=On;fo(l.type)&&(St=l.stateNode,On=!1),_s(i,o,l),xl(l.stateNode),St=c,On=y;break;case 5:Gt||Yi(l,o);case 6:if(c=St,y=On,St=null,_s(i,o,l),St=c,On=y,St!==null)if(On)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(l.stateNode)}catch(_){dt(l,o,_)}else try{St.removeChild(l.stateNode)}catch(_){dt(l,o,_)}break;case 18:St!==null&&(On?(i=St,$v(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),la(i)):$v(St,l.stateNode));break;case 4:c=St,y=On,St=l.stateNode.containerInfo,On=!0,_s(i,o,l),St=c,On=y;break;case 0:case 11:case 14:case 15:so(2,l,o),Gt||so(4,l,o),_s(i,o,l);break;case 1:Gt||(Yi(l,o),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Yy(l,o,c)),_s(i,o,l);break;case 21:_s(i,o,l);break;case 22:Gt=(c=Gt)||l.memoizedState!==null,_s(i,o,l),Gt=c;break;default:_s(i,o,l)}}function tv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{la(i)}catch(l){dt(o,o.return,l)}}}function nv(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{la(i)}catch(l){dt(o,o.return,l)}}function aA(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Xy),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Xy),o;default:throw Error(s(435,i.tag))}}function hc(i,o){var l=aA(i);o.forEach(function(c){if(!l.has(c)){l.add(c);var y=gA.bind(null,i,c);c.then(y,y)}})}function Bn(i,o){var l=o.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=i,x=o,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(fo(w.type)){St=w.stateNode,On=!1;break e}break;case 5:St=w.stateNode,On=!1;break e;case 3:case 4:St=w.stateNode.containerInfo,On=!0;break e}w=w.return}if(St===null)throw Error(s(160));ev(_,x,y),St=null,On=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)iv(o,i),o=o.sibling}var Ri=null;function iv(i,o){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Bn(o,i),Fn(i),c&4&&(so(3,i,i.return),ml(3,i),so(5,i,i.return));break;case 1:Bn(o,i),Fn(i),c&512&&(Gt||l===null||Yi(l,l.return)),c&64&&vs&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=Ri;if(Bn(o,i),Fn(i),c&512&&(Gt||l===null||Yi(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[ai]||_[Re]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),ln(_,c,l),_[Re]=i,Pt(_),c=_;break e;case"link":var x=i_("link","href",y).get(c+(l.href||""));if(x){for(var w=0;w<x.length;w++)if(_=x[w],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(w,1);break t}}_=y.createElement(c),ln(_,c,l),y.head.appendChild(_);break;case"meta":if(x=i_("meta","content",y).get(c+(l.content||""))){for(w=0;w<x.length;w++)if(_=x[w],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(w,1);break t}}_=y.createElement(c),ln(_,c,l),y.head.appendChild(_);break;default:throw Error(s(468,c))}_[Re]=i,Pt(_),c=_}i.stateNode=c}else s_(y,i.type,i.stateNode);else i.stateNode=n_(y,c,i.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?s_(y,i.type,i.stateNode):n_(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&uh(i,i.memoizedProps,l.memoizedProps)}break;case 27:Bn(o,i),Fn(i),c&512&&(Gt||l===null||Yi(l,l.return)),l!==null&&c&4&&uh(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Bn(o,i),Fn(i),c&512&&(Gt||l===null||Yi(l,l.return)),i.flags&32){y=i.stateNode;try{ui(y,"")}catch(Se){dt(i,i.return,Se)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,uh(i,y,l!==null?l.memoizedProps:y)),c&1024&&(fh=!0);break;case 6:if(Bn(o,i),Fn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(Se){dt(i,i.return,Se)}}break;case 3:if(Ic=null,y=Ri,Ri=wc(o.containerInfo),Bn(o,i),Ri=y,Fn(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{la(o.containerInfo)}catch(Se){dt(i,i.return,Se)}fh&&(fh=!1,sv(i));break;case 4:c=Ri,Ri=wc(i.stateNode.containerInfo),Bn(o,i),Fn(i),Ri=c;break;case 12:Bn(o,i),Fn(i);break;case 31:Bn(o,i),Fn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,hc(i,c)));break;case 13:Bn(o,i),Fn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(pc=Tt()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,hc(i,c)));break;case 22:y=i.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,J=vs,ie=Gt;if(vs=J||y,Gt=ie||O,Bn(o,i),Gt=ie,vs=J,Fn(i),c&8192)e:for(o=i.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(l===null||O||vs||Gt||or(i)),l=null,o=i;;){if(o.tag===5||o.tag===26){if(l===null){O=l=o;try{if(_=O.stateNode,y)x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=O.stateNode;var re=O.memoizedProps.style,X=re!=null&&re.hasOwnProperty("display")?re.display:null;w.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Se){dt(O,O.return,Se)}}}else if(o.tag===6){if(l===null){O=o;try{O.stateNode.nodeValue=y?"":O.memoizedProps}catch(Se){dt(O,O.return,Se)}}}else if(o.tag===18){if(l===null){O=o;try{var ee=O.stateNode;y?Yv(ee,!0):Yv(O.stateNode,!1)}catch(Se){dt(O,O.return,Se)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,hc(i,l))));break;case 19:Bn(o,i),Fn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,hc(i,c)));break;case 30:break;case 21:break;default:Bn(o,i),Fn(i)}}function Fn(i){var o=i.flags;if(o&2){try{for(var l,c=i.return;c!==null;){if(Jy(c)){l=c;break}c=c.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var y=l.stateNode,_=ch(i);fc(i,_,y);break;case 5:var x=l.stateNode;l.flags&32&&(ui(x,""),l.flags&=-33);var w=ch(i);fc(i,w,x);break;case 3:case 4:var O=l.stateNode.containerInfo,J=ch(i);dh(i,J,O);break;default:throw Error(s(161))}}catch(ie){dt(i,i.return,ie)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function sv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;sv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Es(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Wy(i,o.alternate,o),o=o.sibling}function or(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:so(4,o,o.return),or(o);break;case 1:Yi(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Yy(o,o.return,l),or(o);break;case 27:xl(o.stateNode);case 26:case 5:Yi(o,o.return),or(o);break;case 22:o.memoizedState===null&&or(o);break;case 30:or(o);break;default:or(o)}i=i.sibling}}function Ts(i,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=i,_=o,x=_.flags;switch(_.tag){case 0:case 11:case 15:Ts(y,_,l),ml(4,_);break;case 1:if(Ts(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){dt(c,c.return,J)}if(c=_,y=c.updateQueue,y!==null){var w=c.stateNode;try{var O=y.shared.hiddenCallbacks;if(O!==null)for(y.shared.hiddenCallbacks=null,y=0;y<O.length;y++)kg(O[y],w)}catch(J){dt(c,c.return,J)}}l&&x&64&&$y(_),pl(_,_.return);break;case 27:Qy(_);case 26:case 5:Ts(y,_,l),l&&c===null&&x&4&&Ky(_),pl(_,_.return);break;case 12:Ts(y,_,l);break;case 31:Ts(y,_,l),l&&x&4&&tv(y,_);break;case 13:Ts(y,_,l),l&&x&4&&nv(y,_);break;case 22:_.memoizedState===null&&Ts(y,_,l),pl(_,_.return);break;case 30:break;default:Ts(y,_,l)}o=o.sibling}}function hh(i,o){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&tl(l))}function mh(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&tl(i))}function Ii(i,o,l,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ov(i,o,l,c),o=o.sibling}function ov(i,o,l,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Ii(i,o,l,c),y&2048&&ml(9,o);break;case 1:Ii(i,o,l,c);break;case 3:Ii(i,o,l,c),y&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&tl(i)));break;case 12:if(y&2048){Ii(i,o,l,c),i=o.stateNode;try{var _=o.memoizedProps,x=_.id,w=_.onPostCommit;typeof w=="function"&&w(x,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(O){dt(o,o.return,O)}}else Ii(i,o,l,c);break;case 31:Ii(i,o,l,c);break;case 13:Ii(i,o,l,c);break;case 23:break;case 22:_=o.stateNode,x=o.alternate,o.memoizedState!==null?_._visibility&2?Ii(i,o,l,c):gl(i,o):_._visibility&2?Ii(i,o,l,c):(_._visibility|=2,Xr(i,o,l,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&hh(x,o);break;case 24:Ii(i,o,l,c),y&2048&&mh(o.alternate,o);break;default:Ii(i,o,l,c)}}function Xr(i,o,l,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=i,x=o,w=l,O=c,J=x.flags;switch(x.tag){case 0:case 11:case 15:Xr(_,x,w,O,y),ml(8,x);break;case 23:break;case 22:var ie=x.stateNode;x.memoizedState!==null?ie._visibility&2?Xr(_,x,w,O,y):gl(_,x):(ie._visibility|=2,Xr(_,x,w,O,y)),y&&J&2048&&hh(x.alternate,x);break;case 24:Xr(_,x,w,O,y),y&&J&2048&&mh(x.alternate,x);break;default:Xr(_,x,w,O,y)}o=o.sibling}}function gl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=i,c=o,y=c.flags;switch(c.tag){case 22:gl(l,c),y&2048&&hh(c.alternate,c);break;case 24:gl(l,c),y&2048&&mh(c.alternate,c);break;default:gl(l,c)}o=o.sibling}}var yl=8192;function Wr(i,o,l){if(i.subtreeFlags&yl)for(i=i.child;i!==null;)rv(i,o,l),i=i.sibling}function rv(i,o,l){switch(i.tag){case 26:Wr(i,o,l),i.flags&yl&&i.memoizedState!==null&&YA(l,Ri,i.memoizedState,i.memoizedProps);break;case 5:Wr(i,o,l);break;case 3:case 4:var c=Ri;Ri=wc(i.stateNode.containerInfo),Wr(i,o,l),Ri=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=yl,yl=16777216,Wr(i,o,l),yl=c):Wr(i,o,l));break;default:Wr(i,o,l)}}function av(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function vl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];en=c,uv(c,i)}av(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)lv(i),i=i.sibling}function lv(i){switch(i.tag){case 0:case 11:case 15:vl(i),i.flags&2048&&so(9,i,i.return);break;case 3:vl(i);break;case 12:vl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,mc(i)):vl(i);break;default:vl(i)}}function mc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];en=c,uv(c,i)}av(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:so(8,o,o.return),mc(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,mc(o));break;default:mc(o)}i=i.sibling}}function uv(i,o){for(;en!==null;){var l=en;switch(l.tag){case 0:case 11:case 15:so(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:tl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,en=c;else e:for(l=i;en!==null;){c=en;var y=c.sibling,_=c.return;if(Zy(c),c===l){en=null;break e}if(y!==null){y.return=_,en=y;break e}en=_}}}var lA={getCacheForType:function(i){var o=rn(Ot),l=o.data.get(i);return l===void 0&&(l=i(),o.data.set(i,l)),l},cacheSignal:function(){return rn(Ot).controller.signal}},uA=typeof WeakMap=="function"?WeakMap:Map,at=0,gt=null,je=null,Ye=0,ct=0,Zn=null,oo=!1,Zr=!1,ph=!1,Ss=0,Mt=0,ro=0,rr=0,gh=0,ei=0,ea=0,_l=null,Gn=null,yh=!1,pc=0,cv=0,gc=1/0,yc=null,ao=null,jt=0,lo=null,ta=null,bs=0,vh=0,_h=null,dv=null,El=0,Eh=null;function ti(){return(at&2)!==0&&Ye!==0?Ye&-Ye:Z.T!==null?Ch():ae()}function fv(){if(ei===0)if((Ye&536870912)===0||Qe){var i=xn;xn<<=1,(xn&3932160)===0&&(xn=262144),ei=i}else ei=536870912;return i=Xn.current,i!==null&&(i.flags|=32),ei}function qn(i,o,l){(i===gt&&(ct===2||ct===9)||i.cancelPendingCommit!==null)&&(na(i,0),uo(i,Ye,ei,!1)),Bi(i,l),((at&2)===0||i!==gt)&&(i===gt&&((at&2)===0&&(rr|=l),Mt===4&&uo(i,Ye,ei,!1)),Ki(i))}function hv(i,o,l){if((at&6)!==0)throw Error(s(327));var c=!l&&(o&127)===0&&(o&i.expiredLanes)===0||Oi(i,o),y=c?fA(i,o):Sh(i,o,!0),_=c;do{if(y===0){Zr&&!c&&uo(i,o,0,!1);break}else{if(l=i.current.alternate,_&&!cA(l)){y=Sh(i,o,!1),_=!1;continue}if(y===2){if(_=o,i.errorRecoveryDisabledLanes&_)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;e:{var w=i;y=_l;var O=w.current.memoizedState.isDehydrated;if(O&&(na(w,x).flags|=256),x=Sh(w,x,!1),x!==2){if(ph&&!O){w.errorRecoveryDisabledLanes|=_,rr|=_,y=4;break e}_=Gn,Gn=y,_!==null&&(Gn===null?Gn=_:Gn.push.apply(Gn,_))}y=x}if(_=!1,y!==2)continue}}if(y===1){na(i,0),uo(i,o,0,!0);break}e:{switch(c=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:uo(c,o,ei,!oo);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(y=pc+300-Tt(),10<y)){if(uo(c,o,ei,!oo),kn(c,0,!0)!==0)break e;bs=o,c.timeoutHandle=zv(mv.bind(null,c,l,Gn,yc,yh,o,ei,rr,ea,oo,_,"Throttled",-0,0),y);break e}mv(c,l,Gn,yc,yh,o,ei,rr,ea,oo,_,null,-0,0)}}break}while(!0);Ki(i)}function mv(i,o,l,c,y,_,x,w,O,J,ie,re,X,ee){if(i.timeoutHandle=-1,re=o.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xt},rv(o,_,re);var Se=(_&62914560)===_?pc-Tt():(_&4194048)===_?cv-Tt():0;if(Se=KA(re,Se),Se!==null){bs=_,i.cancelPendingCommit=Se(Sv.bind(null,i,o,_,l,c,y,x,w,O,ie,re,null,X,ee)),uo(i,_,x,!J);return}}Sv(i,o,_,l,c,y,x,w,O)}function cA(i){for(var o=i;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!Jn(_(),y))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function uo(i,o,l,c){o&=~gh,o&=~rr,i.suspendedLanes|=o,i.pingedLanes&=~o,c&&(i.warmLanes|=o),c=i.expirationTimes;for(var y=o;0<y;){var _=31-Qt(y),x=1<<_;c[_]=-1,y&=~x}l!==0&&ks(i,l,o)}function vc(){return(at&6)===0?(Tl(0),!1):!0}function Th(){if(je!==null){if(ct===0)var i=je.return;else i=je,fs=Xo=null,Lf(i),$r=null,il=0,i=je;for(;i!==null;)jy(i.alternate,i),i=i.return;je=null}}function na(i,o){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,NA(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),bs=0,Th(),gt=i,je=l=cs(i.current,null),Ye=o,ct=0,Zn=null,oo=!1,Zr=Oi(i,o),ph=!1,ea=ei=gh=rr=ro=Mt=0,Gn=_l=null,yh=!1,(o&8)!==0&&(o|=o&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=o;0<c;){var y=31-Qt(c),_=1<<y;o|=i[y],c&=~_}return Ss=o,Bu(),l}function pv(i,o){Ge=null,Z.H=dl,o===jr||o===Yu?(o=Mg(),ct=3):o===Af?(o=Mg(),ct=4):ct=o===Zf?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Zn=o,je===null&&(Mt=1,ac(i,di(o,i.current)))}function gv(){var i=Xn.current;return i===null?!0:(Ye&4194048)===Ye?pi===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?i===pi:!1}function yv(){var i=Z.H;return Z.H=dl,i===null?dl:i}function vv(){var i=Z.A;return Z.A=lA,i}function _c(){Mt=4,oo||(Ye&4194048)!==Ye&&Xn.current!==null||(Zr=!0),(ro&134217727)===0&&(rr&134217727)===0||gt===null||uo(gt,Ye,ei,!1)}function Sh(i,o,l){var c=at;at|=2;var y=yv(),_=vv();(gt!==i||Ye!==o)&&(yc=null,na(i,o)),o=!1;var x=Mt;e:do try{if(ct!==0&&je!==null){var w=je,O=Zn;switch(ct){case 8:Th(),x=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(o=!0);var J=ct;if(ct=0,Zn=null,ia(i,w,O,J),l&&Zr){x=0;break e}break;default:J=ct,ct=0,Zn=null,ia(i,w,O,J)}}dA(),x=Mt;break}catch(ie){pv(i,ie)}while(!0);return o&&i.shellSuspendCounter++,fs=Xo=null,at=c,Z.H=y,Z.A=_,je===null&&(gt=null,Ye=0,Bu()),x}function dA(){for(;je!==null;)_v(je)}function fA(i,o){var l=at;at|=2;var c=yv(),y=vv();gt!==i||Ye!==o?(yc=null,gc=Tt()+500,na(i,o)):Zr=Oi(i,o);e:do try{if(ct!==0&&je!==null){o=je;var _=Zn;t:switch(ct){case 1:ct=0,Zn=null,ia(i,o,_,1);break;case 2:case 9:if(Ig(_)){ct=0,Zn=null,Ev(o);break}o=function(){ct!==2&&ct!==9||gt!==i||(ct=7),Ki(i)},_.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Ig(_)?(ct=0,Zn=null,Ev(o)):(ct=0,Zn=null,ia(i,o,_,7));break;case 5:var x=null;switch(je.tag){case 26:x=je.memoizedState;case 5:case 27:var w=je;if(x?o_(x):w.stateNode.complete){ct=0,Zn=null;var O=w.sibling;if(O!==null)je=O;else{var J=w.return;J!==null?(je=J,Ec(J)):je=null}break t}}ct=0,Zn=null,ia(i,o,_,5);break;case 6:ct=0,Zn=null,ia(i,o,_,6);break;case 8:Th(),Mt=6;break e;default:throw Error(s(462))}}hA();break}catch(ie){pv(i,ie)}while(!0);return fs=Xo=null,Z.H=c,Z.A=y,at=l,je!==null?0:(gt=null,Ye=0,Bu(),Mt)}function hA(){for(;je!==null&&!Va();)_v(je)}function _v(i){var o=Hy(i.alternate,i,Ss);i.memoizedProps=i.pendingProps,o===null?Ec(i):je=o}function Ev(i){var o=i,l=o.alternate;switch(o.tag){case 15:case 0:o=Ly(l,o,o.pendingProps,o.type,void 0,Ye);break;case 11:o=Ly(l,o,o.pendingProps,o.type.render,o.ref,Ye);break;case 5:Lf(o);default:jy(l,o),o=je=vg(o,Ss),o=Hy(l,o,Ss)}i.memoizedProps=i.pendingProps,o===null?Ec(i):je=o}function ia(i,o,l,c){fs=Xo=null,Lf(o),$r=null,il=0;var y=o.return;try{if(tA(i,y,o,l,Ye)){Mt=1,ac(i,di(l,i.current)),je=null;return}}catch(_){if(y!==null)throw je=y,_;Mt=1,ac(i,di(l,i.current)),je=null;return}o.flags&32768?(Qe||c===1?i=!0:Zr||(Ye&536870912)!==0?i=!1:(oo=i=!0,(c===2||c===9||c===3||c===6)&&(c=Xn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Tv(o,i)):Ec(o)}function Ec(i){var o=i;do{if((o.flags&32768)!==0){Tv(o,oo);return}i=o.return;var l=sA(o.alternate,o,Ss);if(l!==null){je=l;return}if(o=o.sibling,o!==null){je=o;return}je=o=i}while(o!==null);Mt===0&&(Mt=5)}function Tv(i,o){do{var l=oA(i.alternate,i);if(l!==null){l.flags&=32767,je=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(i=i.sibling,i!==null)){je=i;return}je=i=l}while(i!==null);Mt=6,je=null}function Sv(i,o,l,c,y,_,x,w,O){i.cancelPendingCommit=null;do Tc();while(jt!==0);if((at&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(_=o.lanes|o.childLanes,_|=cf,zt(i,l,_,x,w,O),i===gt&&(je=gt=null,Ye=0),ta=o,lo=i,bs=l,vh=_,_h=y,dv=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,yA(ri,function(){return wv(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,y=ce.p,ce.p=2,x=at,at|=4;try{rA(i,o,l)}finally{at=x,ce.p=y,Z.T=c}}jt=1,bv(),xv(),Av()}}function bv(){if(jt===1){jt=0;var i=lo,o=ta,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null;var c=ce.p;ce.p=2;var y=at;at|=4;try{iv(o,i);var _=Uh,x=ug(i.containerInfo),w=_.focusedElem,O=_.selectionRange;if(x!==w&&w&&w.ownerDocument&&lg(w.ownerDocument.documentElement,w)){if(O!==null&&of(w)){var J=O.start,ie=O.end;if(ie===void 0&&(ie=J),"selectionStart"in w)w.selectionStart=J,w.selectionEnd=Math.min(ie,w.value.length);else{var re=w.ownerDocument||document,X=re&&re.defaultView||window;if(X.getSelection){var ee=X.getSelection(),Se=w.textContent.length,De=Math.min(O.start,Se),pt=O.end===void 0?De:Math.min(O.end,Se);!ee.extend&&De>pt&&(x=pt,pt=De,De=x);var $=ag(w,De),H=ag(w,pt);if($&&H&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==H.node||ee.focusOffset!==H.offset)){var K=re.createRange();K.setStart($.node,$.offset),ee.removeAllRanges(),De>pt?(ee.addRange(K),ee.extend(H.node,H.offset)):(K.setEnd(H.node,H.offset),ee.addRange(K))}}}}for(re=[],ee=w;ee=ee.parentNode;)ee.nodeType===1&&re.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<re.length;w++){var se=re[w];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Pc=!!Ph,Uh=Ph=null}finally{at=y,ce.p=c,Z.T=l}}i.current=o,jt=2}}function xv(){if(jt===2){jt=0;var i=lo,o=ta,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=Z.T,Z.T=null;var c=ce.p;ce.p=2;var y=at;at|=4;try{Wy(i,o.alternate,o)}finally{at=y,ce.p=c,Z.T=l}}jt=3}}function Av(){if(jt===4||jt===3){jt=0,Ze();var i=lo,o=ta,l=bs,c=dv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?jt=5:(jt=0,ta=lo=null,Cv(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(ao=null),me(l),o=o.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(et,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=Z.T,y=ce.p,ce.p=2,Z.T=null;try{for(var _=i.onRecoverableError,x=0;x<c.length;x++){var w=c[x];_(w.value,{componentStack:w.stack})}}finally{Z.T=o,ce.p=y}}(bs&3)!==0&&Tc(),Ki(i),y=i.pendingLanes,(l&261930)!==0&&(y&42)!==0?i===Eh?El++:(El=0,Eh=i):El=0,Tl(0)}}function Cv(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,tl(o)))}function Tc(){return bv(),xv(),Av(),wv()}function wv(){if(jt!==5)return!1;var i=lo,o=vh;vh=0;var l=me(bs),c=Z.T,y=ce.p;try{ce.p=32>l?32:l,Z.T=null,l=_h,_h=null;var _=lo,x=bs;if(jt=0,ta=lo=null,bs=0,(at&6)!==0)throw Error(s(331));var w=at;if(at|=4,lv(_.current),ov(_,_.current,x,l),at=w,Tl(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(et,_)}catch{}return!0}finally{ce.p=y,Z.T=c,Cv(i,o)}}function Rv(i,o,l){o=di(l,o),o=Wf(i.stateNode,o,2),i=to(i,o,2),i!==null&&(Bi(i,2),Ki(i))}function dt(i,o,l){if(i.tag===3)Rv(i,i,l);else for(;o!==null;){if(o.tag===3){Rv(o,i,l);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ao===null||!ao.has(c))){i=di(l,i),l=Iy(2),c=to(o,l,2),c!==null&&(Ny(l,c,o,i),Bi(c,2),Ki(c));break}}o=o.return}}function bh(i,o,l){var c=i.pingCache;if(c===null){c=i.pingCache=new uA;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(l)||(ph=!0,y.add(l),i=mA.bind(null,i,o,l),o.then(i,i))}function mA(i,o,l){var c=i.pingCache;c!==null&&c.delete(o),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,gt===i&&(Ye&l)===l&&(Mt===4||Mt===3&&(Ye&62914560)===Ye&&300>Tt()-pc?(at&2)===0&&na(i,0):gh|=l,ea===Ye&&(ea=0)),Ki(i)}function Iv(i,o){o===0&&(o=ko()),i=Ko(i,o),i!==null&&(Bi(i,o),Ki(i))}function pA(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),Iv(i,l)}function gA(i,o){var l=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(o),Iv(i,l)}function yA(i,o){return Vi(i,o)}var Sc=null,sa=null,xh=!1,bc=!1,Ah=!1,co=0;function Ki(i){i!==sa&&i.next===null&&(sa===null?Sc=sa=i:sa=sa.next=i),bc=!0,xh||(xh=!0,_A())}function Tl(i,o){if(!Ah&&bc){Ah=!0;do for(var l=!1,c=Sc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var x=c.suspendedLanes,w=c.pingedLanes;_=(1<<31-Qt(42|i)+1)-1,_&=y&~(x&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,Pv(c,_))}else _=Ye,_=kn(c,c===gt?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Oi(c,_)||(l=!0,Pv(c,_));c=c.next}while(l);Ah=!1}}function vA(){Nv()}function Nv(){bc=xh=!1;var i=0;co!==0&&IA()&&(i=co);for(var o=Tt(),l=null,c=Sc;c!==null;){var y=c.next,_=Mv(c,o);_===0?(c.next=null,l===null?Sc=y:l.next=y,y===null&&(sa=l)):(l=c,(i!==0||(_&3)!==0)&&(bc=!0)),c=y}jt!==0&&jt!==5||Tl(i),co!==0&&(co=0)}function Mv(i,o){for(var l=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var x=31-Qt(_),w=1<<x,O=y[x];O===-1?((w&l)===0||(w&c)!==0)&&(y[x]=Us(w,o)):O<=o&&(i.expiredLanes|=w),_&=~w}if(o=gt,l=Ye,l=kn(i,i===o?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,l===0||i===o&&(ct===2||ct===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&oi(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Oi(i,l)){if(o=l&-l,o===i.callbackPriority)return o;switch(c!==null&&oi(c),me(l)){case 2:case 8:l=Dt;break;case 32:l=ri;break;case 268435456:l=ns;break;default:l=ri}return c=Dv.bind(null,i),l=Vi(l,c),i.callbackPriority=o,i.callbackNode=l,o}return c!==null&&c!==null&&oi(c),i.callbackPriority=2,i.callbackNode=null,2}function Dv(i,o){if(jt!==0&&jt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Tc()&&i.callbackNode!==l)return null;var c=Ye;return c=kn(i,i===gt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(hv(i,c,o),Mv(i,Tt()),i.callbackNode!=null&&i.callbackNode===l?Dv.bind(null,i):null)}function Pv(i,o){if(Tc())return null;hv(i,o,!0)}function _A(){MA(function(){(at&6)!==0?Vi(Rt,vA):Nv()})}function Ch(){if(co===0){var i=Hr;i===0&&(i=Ps,Ps<<=1,(Ps&261888)===0&&(Ps=256)),co=i}return co}function Uv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:qi(""+i)}function kv(i,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,i.id&&l.setAttribute("form",i.id),o.parentNode.insertBefore(l,o),i=new FormData(i),l.parentNode.removeChild(l),i}function EA(i,o,l,c,y){if(o==="submit"&&l&&l.stateNode===y){var _=Uv((y[tt]||null).action),x=c.submitter;x&&(o=(o=x[tt]||null)?Uv(o.formAction):x.getAttribute("formAction"),o!==null&&(_=o,x=null));var w=new Go("action","action",null,c,y);i.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(co!==0){var O=x?kv(y,x):new FormData(y);$f(l,{pending:!0,data:O,method:y.method,action:_},null,O)}}else typeof _=="function"&&(w.preventDefault(),O=x?kv(y,x):new FormData(y),$f(l,{pending:!0,data:O,method:y.method,action:_},_,O))},currentTarget:y}]})}}for(var wh=0;wh<uf.length;wh++){var Rh=uf[wh],TA=Rh.toLowerCase(),SA=Rh[0].toUpperCase()+Rh.slice(1);wi(TA,"on"+SA)}wi(fg,"onAnimationEnd"),wi(hg,"onAnimationIteration"),wi(mg,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(Ox,"onTransitionRun"),wi(Bx,"onTransitionStart"),wi(Fx,"onTransitionCancel"),wi(pg,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),An("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),An("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),An("onBeforeInput",["compositionend","keypress","textInput","paste"]),An("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),An("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),An("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function Vv(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],y=c.event;c=c.listeners;e:{var _=void 0;if(o)for(var x=c.length-1;0<=x;x--){var w=c[x],O=w.instance,J=w.currentTarget;if(w=w.listener,O!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=J;try{_(y)}catch(ie){Ou(ie)}y.currentTarget=null,_=O}else for(x=0;x<c.length;x++){if(w=c[x],O=w.instance,J=w.currentTarget,w=w.listener,O!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=J;try{_(y)}catch(ie){Ou(ie)}y.currentTarget=null,_=O}}}}function $e(i,o){var l=o[xi];l===void 0&&(l=o[xi]=new Set);var c=i+"__bubble";l.has(c)||(Lv(o,i,2,!1),l.add(c))}function Ih(i,o,l){var c=0;o&&(c|=4),Lv(l,i,c,o)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Nh(i){if(!i[xc]){i[xc]=!0,Ar.forEach(function(l){l!=="selectionchange"&&(bA.has(l)||Ih(l,!1,i),Ih(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[xc]||(o[xc]=!0,Ih("selectionchange",!1,o))}}function Lv(i,o,l,c){switch(f_(o)){case 2:var y=XA;break;case 8:y=WA;break;default:y=jh}l=y.bind(null,o,l,i),y=void 0,!za||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(o,l,{capture:!0,passive:y}):i.addEventListener(o,l,!0):y!==void 0?i.addEventListener(o,l,{passive:y}):i.addEventListener(o,l,!1)}function Mh(i,o,l,c,y){var _=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var w=c.stateNode.containerInfo;if(w===y)break;if(x===4)for(x=c.return;x!==null;){var O=x.tag;if((O===3||O===4)&&x.stateNode.containerInfo===y)return;x=x.return}for(;w!==null;){if(x=is(w),x===null)return;if(O=x.tag,O===5||O===6||O===26||O===27){c=_=x;continue e}w=w.parentNode}}c=c.return}Su(function(){var J=_,ie=Nr(l),re=[];e:{var X=gg.get(i);if(X!==void 0){var ee=Go,Se=i;switch(i){case"keypress":if(Fo(l)===0)break e;case"keydown":case"keyup":ee=Mu;break;case"focusin":Se="focus",ee=js;break;case"focusout":Se="blur",ee=js;break;case"beforeblur":case"afterblur":ee=js;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Pu;break;case fg:case hg:case mg:ee=Pr;break;case pg:ee=Ur;break;case"scroll":case"scrollend":ee=bu;break;case"wheel":ee=ku;break;case"copy":case"cut":case"paste":ee=wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Ja;break;case"toggle":case"beforetoggle":ee=Ys}var De=(o&4)!==0,pt=!De&&(i==="scroll"||i==="scrollend"),$=De?X!==null?X+"Capture":null:X;De=[];for(var H=J,K;H!==null;){var se=H;if(K=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||K===null||$===null||(se=Vn(H,$),se!=null&&De.push(bl(H,se,K))),pt)break;H=H.return}0<De.length&&(X=new ee(X,Se,null,l,ie),re.push({event:X,listeners:De}))}}if((o&7)===0){e:{if(X=i==="mouseover"||i==="pointerover",ee=i==="mouseout"||i==="pointerout",X&&l!==Ir&&(Se=l.relatedTarget||l.fromElement)&&(is(Se)||Se[$n]))break e;if((ee||X)&&(X=ie.window===ie?ie:(X=ie.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(Se=l.relatedTarget||l.toElement,ee=J,Se=Se?is(Se):null,Se!==null&&(pt=a(Se),De=Se.tag,Se!==pt||De!==5&&De!==27&&De!==6)&&(Se=null)):(ee=null,Se=J),ee!==Se)){if(De=xu,se="onMouseLeave",$="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(De=Ja,se="onPointerLeave",$="onPointerEnter",H="pointer"),pt=ee==null?X:Lo(ee),K=Se==null?X:Lo(Se),X=new De(se,H+"leave",ee,l,ie),X.target=pt,X.relatedTarget=K,se=null,is(ie)===J&&(De=new De($,H+"enter",Se,l,ie),De.target=K,De.relatedTarget=pt,se=De),pt=se,ee&&Se)t:{for(De=xA,$=ee,H=Se,K=0,se=$;se;se=De(se))K++;se=0;for(var Ce=H;Ce;Ce=De(Ce))se++;for(;0<K-se;)$=De($),K--;for(;0<se-K;)H=De(H),se--;for(;K--;){if($===H||H!==null&&$===H.alternate){De=$;break t}$=De($),H=De(H)}De=null}else De=null;ee!==null&&Ov(re,X,ee,De,!1),Se!==null&&pt!==null&&Ov(re,pt,Se,De,!0)}}e:{if(X=J?Lo(J):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var it=tg;else if(Ln(X))if(ng)it=kx;else{it=Px;var xe=Dx}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?J&&qa(J.elementType)&&(it=tg):it=Ux;if(it&&(it=it(i,J))){jo(re,it,l,ie);break e}xe&&xe(i,X,J),i==="focusout"&&J&&X.type==="number"&&J.memoizedProps.value!=null&&Rr(X,"number",X.value)}switch(xe=J?Lo(J):window,i){case"focusin":(Ln(xe)||xe.contentEditable==="true")&&(kr=xe,rf=J,Wa=null);break;case"focusout":Wa=rf=kr=null;break;case"mousedown":af=!0;break;case"contextmenu":case"mouseup":case"dragend":af=!1,cg(re,l,ie);break;case"selectionchange":if(Lx)break;case"keydown":case"keyup":cg(re,l,ie)}var qe;if(S)e:{switch(i){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else ze?ut(i,l)&&(Ke="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ke="onCompositionStart");Ke&&(Y&&l.locale!=="ko"&&(ze||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&ze&&(qe=Gs()):(Kn=ie,Mr="value"in Kn?Kn.value:Kn.textContent,ze=!0)),xe=Ac(J,Ke),0<xe.length&&(Ke=new $a(Ke,i,null,l,ie),re.push({event:Ke,listeners:xe}),qe?Ke.data=qe:(qe=Lt(l),qe!==null&&(Ke.data=qe)))),(qe=I?Wt(i,l):Zt(i,l))&&(Ke=Ac(J,"onBeforeInput"),0<Ke.length&&(xe=new $a("onBeforeInput","beforeinput",null,l,ie),re.push({event:xe,listeners:Ke}),xe.data=qe)),EA(re,i,J,l,ie)}Vv(re,o)})}function bl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function Ac(i,o){for(var l=o+"Capture",c=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Vn(i,l),y!=null&&c.unshift(bl(i,y,_)),y=Vn(i,o),y!=null&&c.push(bl(i,y,_))),i.tag===3)return c;i=i.return}return[]}function xA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Ov(i,o,l,c,y){for(var _=o._reactName,x=[];l!==null&&l!==c;){var w=l,O=w.alternate,J=w.stateNode;if(w=w.tag,O!==null&&O===c)break;w!==5&&w!==26&&w!==27||J===null||(O=J,y?(J=Vn(l,_),J!=null&&x.unshift(bl(l,J,O))):y||(J=Vn(l,_),J!=null&&x.push(bl(l,J,O)))),l=l.return}x.length!==0&&i.push({event:o,listeners:x})}var AA=/\r\n?/g,CA=/\u0000|\uFFFD/g;function Bv(i){return(typeof i=="string"?i:""+i).replace(AA,`
`).replace(CA,"")}function Fv(i,o){return o=Bv(o),Bv(i)===o}function mt(i,o,l,c,y,_){switch(l){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||ui(i,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&ui(i,""+c);break;case"className":Os(i,"class",c);break;case"tabIndex":Os(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Os(i,l,c);break;case"style":Eu(i,c,_);break;case"data":if(o!=="object"){Os(i,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=qi(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(o!=="input"&&mt(i,o,"name",y.name,y,null),mt(i,o,"formEncType",y.formEncType,y,null),mt(i,o,"formMethod",y.formMethod,y,null),mt(i,o,"formTarget",y.formTarget,y,null)):(mt(i,o,"encType",y.encType,y,null),mt(i,o,"method",y.method,y,null),mt(i,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=qi(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=Xt);break;case"onScroll":c!=null&&$e("scroll",i);break;case"onScrollEnd":c!=null&&$e("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=qi(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":$e("beforetoggle",i),$e("toggle",i),Ls(i,"popover",c);break;case"xlinkActuate":li(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":li(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":li(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":li(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":li(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":li(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":li(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":li(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":li(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ls(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Zd.get(l)||l,Ls(i,l,c))}}function Dh(i,o,l,c,y,_){switch(l){case"style":Eu(i,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof c=="string"?ui(i,c):(typeof c=="number"||typeof c=="bigint")&&ui(i,""+c);break;case"onScroll":c!=null&&$e("scroll",i);break;case"onScrollEnd":c!=null&&$e("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Xt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vs.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),o=l.slice(2,y?l.length-7:void 0),_=i[tt]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(o,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(o,c,y);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):Ls(i,l,c)}}}function ln(i,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",i),$e("load",i);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var x=l[_];if(x!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:mt(i,o,_,x,l,null)}}y&&mt(i,o,"srcSet",l.srcSet,l,null),c&&mt(i,o,"src",l.src,l,null);return;case"input":$e("invalid",i);var w=_=x=y=null,O=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var ie=l[c];if(ie!=null)switch(c){case"name":y=ie;break;case"type":x=ie;break;case"checked":O=ie;break;case"defaultChecked":J=ie;break;case"value":_=ie;break;case"defaultValue":w=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,o));break;default:mt(i,o,c,ie,l,null)}}Oo(i,_,w,O,J,x,y,!1);return;case"select":$e("invalid",i),c=x=_=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":x=w;break;case"multiple":c=w;default:mt(i,o,y,w,l,null)}o=_,l=x,i.multiple=!!c,o!=null?nt(i,!!c,o,!1):l!=null&&nt(i,!!c,l,!0);return;case"textarea":$e("invalid",i),_=y=c=null;for(x in l)if(l.hasOwnProperty(x)&&(w=l[x],w!=null))switch(x){case"value":c=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:mt(i,o,x,w,l,null)}Fs(i,c,y,_);return;case"option":for(O in l)if(l.hasOwnProperty(O)&&(c=l[O],c!=null))switch(O){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:mt(i,o,O,c,l,null)}return;case"dialog":$e("beforetoggle",i),$e("toggle",i),$e("cancel",i),$e("close",i);break;case"iframe":case"object":$e("load",i);break;case"video":case"audio":for(c=0;c<Sl.length;c++)$e(Sl[c],i);break;case"image":$e("error",i),$e("load",i);break;case"details":$e("toggle",i);break;case"embed":case"source":case"link":$e("error",i),$e("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:mt(i,o,J,c,l,null)}return;default:if(qa(o)){for(ie in l)l.hasOwnProperty(ie)&&(c=l[ie],c!==void 0&&Dh(i,o,ie,c,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(c=l[w],c!=null&&mt(i,o,w,c,l,null))}function wA(i,o,l,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,x=null,w=null,O=null,J=null,ie=null;for(ee in l){var re=l[ee];if(l.hasOwnProperty(ee)&&re!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":O=re;default:c.hasOwnProperty(ee)||mt(i,o,ee,null,c,re)}}for(var X in c){var ee=c[X];if(re=l[X],c.hasOwnProperty(X)&&(ee!=null||re!=null))switch(X){case"type":_=ee;break;case"name":y=ee;break;case"checked":J=ee;break;case"defaultChecked":ie=ee;break;case"value":x=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,o));break;default:ee!==re&&mt(i,o,X,ee,c,re)}}Bs(i,x,w,O,J,ie,_,y);return;case"select":ee=x=w=X=null;for(_ in l)if(O=l[_],l.hasOwnProperty(_)&&O!=null)switch(_){case"value":break;case"multiple":ee=O;default:c.hasOwnProperty(_)||mt(i,o,_,null,c,O)}for(y in c)if(_=c[y],O=l[y],c.hasOwnProperty(y)&&(_!=null||O!=null))switch(y){case"value":X=_;break;case"defaultValue":w=_;break;case"multiple":x=_;default:_!==O&&mt(i,o,y,_,c,O)}o=w,l=x,c=ee,X!=null?nt(i,!!l,X,!1):!!c!=!!l&&(o!=null?nt(i,!!l,o,!0):nt(i,!!l,l?[]:"",!1));return;case"textarea":ee=X=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:mt(i,o,w,null,c,y)}for(x in c)if(y=c[x],_=l[x],c.hasOwnProperty(x)&&(y!=null||_!=null))switch(x){case"value":X=y;break;case"defaultValue":ee=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&mt(i,o,x,y,c,_)}Bo(i,X,ee);return;case"option":for(var Se in l)if(X=l[Se],l.hasOwnProperty(Se)&&X!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":i.selected=!1;break;default:mt(i,o,Se,null,c,X)}for(O in c)if(X=c[O],ee=l[O],c.hasOwnProperty(O)&&X!==ee&&(X!=null||ee!=null))switch(O){case"selected":i.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:mt(i,o,O,X,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in l)X=l[De],l.hasOwnProperty(De)&&X!=null&&!c.hasOwnProperty(De)&&mt(i,o,De,null,c,X);for(J in c)if(X=c[J],ee=l[J],c.hasOwnProperty(J)&&X!==ee&&(X!=null||ee!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,o));break;default:mt(i,o,J,X,c,ee)}return;default:if(qa(o)){for(var pt in l)X=l[pt],l.hasOwnProperty(pt)&&X!==void 0&&!c.hasOwnProperty(pt)&&Dh(i,o,pt,void 0,c,X);for(ie in c)X=c[ie],ee=l[ie],!c.hasOwnProperty(ie)||X===ee||X===void 0&&ee===void 0||Dh(i,o,ie,X,c,ee);return}}for(var $ in l)X=l[$],l.hasOwnProperty($)&&X!=null&&!c.hasOwnProperty($)&&mt(i,o,$,null,c,X);for(re in c)X=c[re],ee=l[re],!c.hasOwnProperty(re)||X===ee||X==null&&ee==null||mt(i,o,re,X,c,ee)}function Gv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,x=y.initiatorType,w=y.duration;if(_&&w&&Gv(x)){for(x=0,w=y.responseEnd,c+=1;c<l.length;c++){var O=l[c],J=O.startTime;if(J>w)break;var ie=O.transferSize,re=O.initiatorType;ie&&Gv(re)&&(O=O.responseEnd,x+=ie*(O<w?1:(w-J)/(O-J)))}if(--c,o+=8*(_+x)/(y.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Ph=null,Uh=null;function Cc(i){return i.nodeType===9?i:i.ownerDocument}function qv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hv(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function kh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Vh=null;function IA(){var i=window.event;return i&&i.type==="popstate"?i===Vh?!1:(Vh=i,!0):(Vh=null,!1)}var zv=typeof setTimeout=="function"?setTimeout:void 0,NA=typeof clearTimeout=="function"?clearTimeout:void 0,jv=typeof Promise=="function"?Promise:void 0,MA=typeof queueMicrotask=="function"?queueMicrotask:typeof jv<"u"?function(i){return jv.resolve(null).then(i).catch(DA)}:zv;function DA(i){setTimeout(function(){throw i})}function fo(i){return i==="head"}function $v(i,o){var l=o,c=0;do{var y=l.nextSibling;if(i.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){i.removeChild(y),la(o);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")xl(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,xl(l);for(var _=l.firstChild;_;){var x=_.nextSibling,w=_.nodeName;_[ai]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=x}}else l==="body"&&xl(i.ownerDocument.body);l=y}while(l);la(o)}function Yv(i,o){var l=i;i=0;do{var c=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=c}while(l)}function Lh(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Lh(l),Vo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function PA(i,o,l,c){for(;i.nodeType===1;){var y=l;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[ai])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=gi(i.nextSibling),i===null)break}return null}function UA(i,o,l){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=gi(i.nextSibling),i===null))return null;return i}function Kv(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=gi(i.nextSibling),i===null))return null;return i}function Oh(i){return i.data==="$?"||i.data==="$~"}function Bh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function kA(i,o){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||l.readyState!=="loading")o();else{var c=function(){o(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function gi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Fh=null;function Jv(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(o===0)return gi(i.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}i=i.nextSibling}return null}function Qv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return i;o--}else l!=="/$"&&l!=="/&"||o++}i=i.previousSibling}return null}function Xv(i,o,l){switch(o=Cc(l),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function xl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Vo(i)}var yi=new Map,Wv=new Set;function wc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var xs=ce.d;ce.d={f:VA,r:LA,D:OA,C:BA,L:FA,m:GA,X:HA,S:qA,M:zA};function VA(){var i=xs.f(),o=vc();return i||o}function LA(i){var o=ss(i);o!==null&&o.tag===5&&o.type==="form"?py(o):xs.r(i)}var oa=typeof document>"u"?null:document;function Zv(i,o,l){var c=oa;if(c&&typeof o=="string"&&o){var y=It(o);y='link[rel="'+i+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Wv.has(y)||(Wv.add(y),i={rel:i,crossOrigin:l,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),ln(o,"link",i),Pt(o),c.head.appendChild(o)))}}function OA(i){xs.D(i),Zv("dns-prefetch",i,null)}function BA(i,o){xs.C(i,o),Zv("preconnect",i,o)}function FA(i,o,l){xs.L(i,o,l);var c=oa;if(c&&i&&o){var y='link[rel="preload"][as="'+It(o)+'"]';o==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+It(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+It(l.imageSizes)+'"]')):y+='[href="'+It(i)+'"]';var _=y;switch(o){case"style":_=ra(i);break;case"script":_=aa(i)}yi.has(_)||(i=T({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:i,as:o},l),yi.set(_,i),c.querySelector(y)!==null||o==="style"&&c.querySelector(Al(_))||o==="script"&&c.querySelector(Cl(_))||(o=c.createElement("link"),ln(o,"link",i),Pt(o),c.head.appendChild(o)))}}function GA(i,o){xs.m(i,o);var l=oa;if(l&&i){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+It(c)+'"][href="'+It(i)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=aa(i)}if(!yi.has(_)&&(i=T({rel:"modulepreload",href:i},o),yi.set(_,i),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Cl(_)))return}c=l.createElement("link"),ln(c,"link",i),Pt(c),l.head.appendChild(c)}}}function qA(i,o,l){xs.S(i,o,l);var c=oa;if(c&&i){var y=Ai(c).hoistableStyles,_=ra(i);o=o||"default";var x=y.get(_);if(!x){var w={loading:0,preload:null};if(x=c.querySelector(Al(_)))w.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":o},l),(l=yi.get(_))&&Gh(i,l);var O=x=c.createElement("link");Pt(O),ln(O,"link",i),O._p=new Promise(function(J,ie){O.onload=J,O.onerror=ie}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Rc(x,o,c)}x={type:"stylesheet",instance:x,count:1,state:w},y.set(_,x)}}}function HA(i,o){xs.X(i,o);var l=oa;if(l&&i){var c=Ai(l).hoistableScripts,y=aa(i),_=c.get(y);_||(_=l.querySelector(Cl(y)),_||(i=T({src:i,async:!0},o),(o=yi.get(y))&&qh(i,o),_=l.createElement("script"),Pt(_),ln(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function zA(i,o){xs.M(i,o);var l=oa;if(l&&i){var c=Ai(l).hoistableScripts,y=aa(i),_=c.get(y);_||(_=l.querySelector(Cl(y)),_||(i=T({src:i,async:!0,type:"module"},o),(o=yi.get(y))&&qh(i,o),_=l.createElement("script"),Pt(_),ln(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function e_(i,o,l,c){var y=(y=Ue.current)?wc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=ra(l.href),l=Ai(y).hoistableStyles,c=l.get(o),c||(c={type:"style",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=ra(l.href);var _=Ai(y).hoistableStyles,x=_.get(i);if(x||(y=y.ownerDocument||y,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,x),(_=y.querySelector(Al(i)))&&!_._p&&(x.instance=_,x.state.loading=5),yi.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},yi.set(i,l),_||jA(y,i,l,x.state))),o&&c===null)throw Error(s(528,""));return x}if(o&&c!==null)throw Error(s(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=aa(l),l=Ai(y).hoistableScripts,c=l.get(o),c||(c={type:"script",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function ra(i){return'href="'+It(i)+'"'}function Al(i){return'link[rel="stylesheet"]['+i+"]"}function t_(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function jA(i,o,l,c){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=i.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),ln(o,"link",l),Pt(o),i.head.appendChild(o))}function aa(i){return'[src="'+It(i)+'"]'}function Cl(i){return"script[async]"+i}function n_(i,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var c=i.querySelector('style[data-href~="'+It(l.href)+'"]');if(c)return o.instance=c,Pt(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Pt(c),ln(c,"style",y),Rc(c,l.precedence,i),o.instance=c;case"stylesheet":y=ra(l.href);var _=i.querySelector(Al(y));if(_)return o.state.loading|=4,o.instance=_,Pt(_),_;c=t_(l),(y=yi.get(y))&&Gh(c,y),_=(i.ownerDocument||i).createElement("link"),Pt(_);var x=_;return x._p=new Promise(function(w,O){x.onload=w,x.onerror=O}),ln(_,"link",c),o.state.loading|=4,Rc(_,l.precedence,i),o.instance=_;case"script":return _=aa(l.src),(y=i.querySelector(Cl(_)))?(o.instance=y,Pt(y),y):(c=l,(y=yi.get(_))&&(c=T({},l),qh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Pt(y),ln(y,"link",c),i.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Rc(c,l.precedence,i));return o.instance}function Rc(i,o,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,x=0;x<c.length;x++){var w=c[x];if(w.dataset.precedence===o)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(i,o.firstChild))}function Gh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function qh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Ic=null;function i_(i,o,l){if(Ic===null){var c=new Map,y=Ic=new Map;y.set(l,c)}else y=Ic,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),y=0;y<l.length;y++){var _=l[y];if(!(_[ai]||_[Re]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var x=_.getAttribute(o)||"";x=i+x;var w=c.get(x);w?w.push(_):c.set(x,[_])}}return c}function s_(i,o,l){i=i.ownerDocument||i,i.head.insertBefore(l,o==="title"?i.querySelector("head > title"):null)}function $A(i,o,l){if(l===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function o_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function YA(i,o,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ra(c.href),_=o.querySelector(Al(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Nc.bind(i),o.then(i,i)),l.state.loading|=4,l.instance=_,Pt(_);return}_=o.ownerDocument||o,c=t_(c),(y=yi.get(y))&&Gh(c,y),_=_.createElement("link"),Pt(_);var x=_;x._p=new Promise(function(w,O){x.onload=w,x.onerror=O}),ln(_,"link",c),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Nc.bind(i),o.addEventListener("load",l),o.addEventListener("error",l))}}var Hh=0;function KA(i,o){return i.stylesheets&&i.count===0&&Dc(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var c=setTimeout(function(){if(i.stylesheets&&Dc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+o);0<i.imgBytes&&Hh===0&&(Hh=62500*RA());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Dc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Hh?50:800)+o);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Nc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Mc=null;function Dc(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Mc=new Map,o.forEach(JA,i),Mc=null,Nc.call(i))}function JA(i,o){if(!(o.state.loading&4)){var l=Mc.get(i);if(l)var c=l.get(null);else{l=new Map,Mc.set(i,l);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var x=y[_];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),c=x)}c&&l.set(null,c)}y=o.instance,x=y.getAttribute("data-precedence"),_=l.get(x)||c,_===c&&l.set(null,y),l.set(x,y),this.count++,c=Nc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),o.state.loading|=4}}var wl={$$typeof:G,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function QA(i,o,l,c,y,_,x,w,O){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function r_(i,o,l,c,y,_,x,w,O,J,ie,re){return i=new QA(i,o,l,x,O,J,ie,re,w),o=1,_===!0&&(o|=24),_=Qn(3,null,null,o),i.current=_,_.stateNode=i,o=Sf(),o.refCount++,i.pooledCache=o,o.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:o},Cf(_),i}function a_(i){return i?(i=Or,i):Or}function l_(i,o,l,c,y,_){y=a_(y),c.context===null?c.context=y:c.pendingContext=y,c=eo(o),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=to(i,c,o),l!==null&&(qn(l,i,o),ol(l,i,o))}function u_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function zh(i,o){u_(i,o),(i=i.alternate)&&u_(i,o)}function c_(i){if(i.tag===13||i.tag===31){var o=Ko(i,67108864);o!==null&&qn(o,i,67108864),zh(i,67108864)}}function d_(i){if(i.tag===13||i.tag===31){var o=ti();o=de(o);var l=Ko(i,o);l!==null&&qn(l,i,o),zh(i,o)}}var Pc=!0;function XA(i,o,l,c){var y=Z.T;Z.T=null;var _=ce.p;try{ce.p=2,jh(i,o,l,c)}finally{ce.p=_,Z.T=y}}function WA(i,o,l,c){var y=Z.T;Z.T=null;var _=ce.p;try{ce.p=8,jh(i,o,l,c)}finally{ce.p=_,Z.T=y}}function jh(i,o,l,c){if(Pc){var y=$h(c);if(y===null)Mh(i,o,c,Uc,l),h_(i,c);else if(eC(y,i,o,l,c))c.stopPropagation();else if(h_(i,c),o&4&&-1<ZA.indexOf(i)){for(;y!==null;){var _=ss(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var x=jn(_.pendingLanes);if(x!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var O=1<<31-Qt(x);w.entanglements[1]|=O,x&=~O}Ki(_),(at&6)===0&&(gc=Tt()+500,Tl(0))}}break;case 31:case 13:w=Ko(_,2),w!==null&&qn(w,_,2),vc(),zh(_,2)}if(_=$h(c),_===null&&Mh(i,o,c,Uc,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else Mh(i,o,c,null,l)}}function $h(i){return i=Nr(i),Yh(i)}var Uc=null;function Yh(i){if(Uc=null,i=is(i),i!==null){var o=a(i);if(o===null)i=null;else{var l=o.tag;if(l===13){if(i=u(o),i!==null)return i;i=null}else if(l===31){if(i=d(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Uc=i,null}function f_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ts()){case Rt:return 2;case Dt:return 8;case ri:case Uo:return 32;case ns:return 268435456;default:return 32}default:return 32}}var Kh=!1,ho=null,mo=null,po=null,Rl=new Map,Il=new Map,go=[],ZA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function h_(i,o){switch(i){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":mo=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":Rl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(o.pointerId)}}function Nl(i,o,l,c,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},o!==null&&(o=ss(o),o!==null&&c_(o)),i):(i.eventSystemFlags|=c,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function eC(i,o,l,c,y){switch(o){case"focusin":return ho=Nl(ho,i,o,l,c,y),!0;case"dragenter":return mo=Nl(mo,i,o,l,c,y),!0;case"mouseover":return po=Nl(po,i,o,l,c,y),!0;case"pointerover":var _=y.pointerId;return Rl.set(_,Nl(Rl.get(_)||null,i,o,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Il.set(_,Nl(Il.get(_)||null,i,o,l,c,y)),!0}return!1}function m_(i){var o=is(i.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){i.blockedOn=o,pe(i.priority,function(){d_(l)});return}}else if(o===31){if(o=d(l),o!==null){i.blockedOn=o,pe(i.priority,function(){d_(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function kc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=$h(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);Ir=c,l.target.dispatchEvent(c),Ir=null}else return o=ss(l),o!==null&&c_(o),i.blockedOn=l,!1;o.shift()}return!0}function p_(i,o,l){kc(i)&&l.delete(o)}function tC(){Kh=!1,ho!==null&&kc(ho)&&(ho=null),mo!==null&&kc(mo)&&(mo=null),po!==null&&kc(po)&&(po=null),Rl.forEach(p_),Il.forEach(p_)}function Vc(i,o){i.blockedOn===o&&(i.blockedOn=null,Kh||(Kh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tC)))}var Lc=null;function g_(i){Lc!==i&&(Lc=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Lc===i&&(Lc=null);for(var o=0;o<i.length;o+=3){var l=i[o],c=i[o+1],y=i[o+2];if(typeof c!="function"){if(Yh(c||l)===null)continue;break}var _=ss(l);_!==null&&(i.splice(o,3),o-=3,$f(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function la(i){function o(O){return Vc(O,i)}ho!==null&&Vc(ho,i),mo!==null&&Vc(mo,i),po!==null&&Vc(po,i),Rl.forEach(o),Il.forEach(o);for(var l=0;l<go.length;l++){var c=go[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<go.length&&(l=go[0],l.blockedOn===null);)m_(l),l.blockedOn===null&&go.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],x=y[tt]||null;if(typeof _=="function")x||g_(l);else if(x){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,x=_[tt]||null)w=x.formAction;else if(Yh(y)!==null)continue}else w=x.action;typeof w=="function"?l[c+1]=w:(l.splice(c,3),c-=3),g_(l)}}}function y_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(x){return y=x})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Jh(i){this._internalRoot=i}Oc.prototype.render=Jh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var l=o.current,c=ti();l_(l,c,i,o,null,null)},Oc.prototype.unmount=Jh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;l_(i.current,2,null,i,null,null),vc(),o[$n]=null}};function Oc(i){this._internalRoot=i}Oc.prototype.unstable_scheduleHydration=function(i){if(i){var o=ae();i={blockedOn:null,target:i,priority:o};for(var l=0;l<go.length&&o!==0&&o<go[l].priority;l++);go.splice(l,0,i),l===0&&m_(i)}};var v_=e.version;if(v_!=="19.2.4")throw Error(s(527,v_,"19.2.4"));ce.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(o),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var nC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{et=Bc.inject(nC),At=Bc}catch{}}return Dl.createRoot=function(i,o){if(!r(i))throw Error(s(299));var l=!1,c="",y=Ay,_=Cy,x=wy;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError)),o=r_(i,1,!1,null,null,l,c,null,y,_,x,y_),i[$n]=o.current,Nh(i),new Jh(o)},Dl.hydrateRoot=function(i,o,l){if(!r(i))throw Error(s(299));var c=!1,y="",_=Ay,x=Cy,w=wy,O=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.formState!==void 0&&(O=l.formState)),o=r_(i,1,!0,o,l??null,c,y,O,_,x,w,y_),o.context=a_(null),l=o.current,c=ti(),c=de(c),y=eo(c),y.callback=null,to(l,y,c),l=c,o.current.lanes=l,Bi(o,l),Ki(o),i[$n]=o.current,Nh(i),new Oc(o)},Dl.version="19.2.4",Dl}var R_;function hC(){if(R_)return Wh.exports;R_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Wh.exports=fC(),Wh.exports}var mC=hC();const pC=PT(mC),ad="/edu/assets/logo-C-dOhpPe.png",Jl={phone:"01011828609",googleSheet:"https://docs.google.com/spreadsheets/d/1vVjXx-RvBcK45bfo-5LY5W0t2amk4rt_KN80he7wAE4/edit?usp=sharing"},Eo=[{id:"primary",name:" ",icon:""},{id:"preparatory",name:" ",icon:""},{id:"secondary",name:" ",icon:""},{id:"languages",name:" ",icon:""}],gC=[{stage:"primary",subjects:[" ",""," ",""," "]},{stage:"preparatory",subjects:[" ",""," ",""," ","",""]},{stage:"secondary",subjects:[" ","","",""," "," "," "," ","",""]},{stage:"languages",subjects:["English (Main)","Mathematics (Lang)","Science (Lang)","Arabic","Social Studies"]}],I_=[{id:"t1",name:".  ",subject:" ",imageUrl:"https://picsum.photos/seed/t1/400",whatsapp:"01011828609",availability:"  ",teachingHours:"4:00 - 8:00 ",bio:"       .",grades:[" "," "],stages:["primary"]}],N_=[{id:"c1",title:"  ",description:"        .",stage:"primary",grade:" ",gradeId:"p4",teacherId:"t1",media:[{id:"m1",title:" ",url:"https://www.w3schools.com/html/mov_bbb.mp4",type:"video"},{id:"m2",title:"  ",url:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",type:"pdf"}]}],vn=()=>[{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]}],M_=[{id:"p1",name:"  ",stage:"primary",schedule:vn(),teachers:[],courses:[]},{id:"p2",name:"  ",stage:"primary",schedule:vn(),teachers:[],courses:[]},{id:"p3",name:"  ",stage:"primary",schedule:vn(),teachers:[],courses:[]},{id:"p4",name:"  ",stage:"primary",schedule:vn(),teachers:["t1"],courses:["c1"]},{id:"p5",name:"  ",stage:"primary",schedule:vn(),teachers:["t1"],courses:[]},{id:"p6",name:"  ",stage:"primary",schedule:vn(),teachers:[],courses:[]},{id:"pr1",name:"  ",stage:"preparatory",schedule:vn(),teachers:[],courses:[]},{id:"pr2",name:"  ",stage:"preparatory",schedule:vn(),teachers:[],courses:[]},{id:"pr3",name:"  ",stage:"preparatory",schedule:vn(),teachers:[],courses:[]},{id:"s1",name:"  ",stage:"secondary",schedule:vn(),teachers:[],courses:[]},{id:"s2",name:"  ",stage:"secondary",schedule:vn(),teachers:[],courses:[]},{id:"s3",name:"  ",stage:"secondary",schedule:vn(),teachers:[],courses:[]},{id:"l1",name:"Primary 1 (Languages)",stage:"languages",schedule:vn(),teachers:[],courses:[]},{id:"l2",name:"Primary 2 (Languages)",stage:"languages",schedule:vn(),teachers:[],courses:[]},{id:"l3",name:"Prep 1 (Languages)",stage:"languages",schedule:vn(),teachers:[],courses:[]},{id:"l4",name:"Secondary 1 (Languages)",stage:"languages",schedule:vn(),teachers:[],courses:[]}],yC=({onNavigate:t,isAdmin:e})=>E.jsx("nav",{className:"bg-white border-b sticky top-0 z-50 shadow-sm",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"flex justify-between h-20 items-center",children:[E.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("home"),children:[E.jsx("img",{src:ad,alt:"Educators Academy Logo",className:"h-14 w-auto object-contain"}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"text-[#0a192f] font-black text-xl leading-none hidden md:block",children:"Educators Academy"}),E.jsx("span",{className:"text-[#10b981] font-bold text-xs hidden md:block tracking-widest",children:"CENTER OF EXCELLENCE"})]})]}),E.jsxs("div",{className:"hidden md:flex items-center space-x-8 space-x-reverse text-gray-600 font-medium",children:[E.jsx("button",{onClick:()=>t("home"),className:"hover:text-[#10b981] transition font-bold",children:""}),E.jsx("button",{onClick:()=>t("stages"),className:"hover:text-[#10b981] transition font-bold",children:""}),E.jsx("button",{onClick:()=>t("teachers"),className:"hover:text-[#10b981] transition font-bold",children:""}),E.jsx("button",{onClick:()=>t("admin"),className:`px-4 py-2 rounded-xl font-bold transition-all ${e?"bg-[#0a192f] text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e?"  ":"  "})]}),E.jsx("a",{href:`https://wa.me/20${Jl.phone}`,target:"_blank",className:"bg-[#f97316] text-white px-6 py-2.5 rounded-full font-black hover:bg-orange-600 transition shadow-xl shadow-orange-500/20 active:scale-95",children:" "})]})})}),vC=async t=>{const e=localStorage.getItem("google_sheet_webhook_url");if(!e)return console.warn("       ."),!1;try{const n=new URLSearchParams;return n.append("studentName",t.studentName),n.append("parentPhone",t.parentPhone),n.append("teacherName",t.teacherName),n.append("timestamp",t.timestamp),await fetch(e,{method:"POST",mode:"no-cors",body:n}),!0}catch(n){return console.error("  :",n),!1}},UT=({targetName:t,type:e,onClose:n})=>{const[s,r]=ve.useState(""),[a,u]=ve.useState(""),[d,h]=ve.useState(!1),[m,v]=ve.useState(!1),[T,b]=ve.useState(""),C=async N=>{if(N.preventDefault(),!s||!a)return;h(!0);const U=new Date().toLocaleString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0});await vC({studentName:s,parentPhone:a,teacherName:t,timestamp:U});const W=Jl.phone,G=W.startsWith("0")?`2${W}`:`20${W}`,Q=`       : ${s}  /: ${t}`,q=`https://wa.me/${G}?text=${encodeURIComponent(Q)}`;b(q),v(!0);const oe=window.open(q,"_blank");setTimeout(()=>{(!oe||oe.closed||typeof oe.closed>"u")&&console.warn("Popup blocked or failed to redirect automatically."),h(!1)},1200)};return m?E.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/80 backdrop-blur-md animate-in fade-in duration-300",children:E.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 text-center shadow-2xl animate-in zoom-in-95",children:[E.jsx("div",{className:"text-7xl mb-6",children:""}),E.jsx("h3",{className:"text-3xl font-black text-[#0a192f] mb-3",children:"  !"}),E.jsx("p",{className:"text-gray-500 font-bold mb-8 text-lg leading-relaxed",children:"   .."}),E.jsxs("div",{className:"space-y-4",children:[E.jsx("a",{href:T,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-[#25d366] text-white py-5 rounded-2xl font-black text-xl hover:bg-[#1ebe57] transition-all shadow-xl shadow-green-500/20",children:"      "}),E.jsx("button",{onClick:n,className:"block w-full text-gray-400 font-bold hover:text-[#0a192f] transition-colors",children:"  "})]})]})}):E.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/60 backdrop-blur-sm animate-in fade-in duration-300 text-right",children:E.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 border-t-8 border-[#2d5a4c]",children:[E.jsxs("div",{className:"p-8 text-center",children:[E.jsx("h3",{className:"text-3xl font-black text-[#2d5a4c] mb-2",children:"  "}),E.jsxs("p",{className:"text-gray-400 font-bold text-lg",children:[" : ",t]})]}),E.jsxs("form",{onSubmit:C,className:"px-8 pb-10 space-y-5",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2 mr-1",children:"  :"}),E.jsx("input",{required:!0,type:"text",value:s,onChange:N=>r(N.target.value),className:"w-full border border-gray-200 rounded-xl p-4 bg-gray-50 focus:border-[#10b981] outline-none font-black text-right text-lg",placeholder:":   "})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2 mr-1",children:"  :"}),E.jsx("input",{required:!0,type:"tel",value:a,onChange:N=>u(N.target.value),className:"w-full border border-gray-200 rounded-xl p-4 bg-gray-50 focus:border-[#10b981] outline-none font-black text-left text-lg",dir:"ltr",placeholder:"010xxxxxxxx"})]}),E.jsxs("div",{className:"pt-4",children:[E.jsx("button",{type:"submit",disabled:d,className:"w-full bg-[#25d366] text-white py-5 rounded-xl font-black text-xl hover:bg-[#1ebe57] transition-all shadow-xl shadow-green-500/10 disabled:opacity-50",children:d?"  ...":"  "}),E.jsx("button",{type:"button",onClick:n,className:"w-full text-gray-400 font-bold mt-4 hover:text-red-500 transition-colors",children:" "})]})]})]})})},_C=({grade:t,teachers:e,courses:n,onBack:s})=>{const r=q=>{if(!q)return"";if(q.match(/AM|PM||/))return q;const oe=q.match(/^(\d{1,2}):(\d{2})$/);if(oe){let D=parseInt(oe[1]);const R=oe[2],M=D>=12?"":"";return D=D%12||12,`${D}:${R} ${M}`}return q},[a,u]=ve.useState("schedule"),[d,h]=ve.useState(null),[m,v]=ve.useState(null),[T,b]=ve.useState(null),[C,N]=ve.useState(!1),V=C&&t.ramadanSchedule&&t.ramadanSchedule.length>0?t.ramadanSchedule:t.schedule,U=e.filter(q=>t.teachers.includes(q.id)),j=n.filter(q=>t.courses.includes(q.id)),W=q=>{const oe=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,D=q.match(oe);return D&&D[2].length===11?`https://www.youtube.com/embed/${D[2]}`:null},G=q=>q.includes("firebasestorage")||q.endsWith(".mp4")||q.endsWith(".webm")||q.endsWith(".mov"),Q=q=>q.includes("drive.google.com")&&!q.includes("/preview")?q.replace("/view","/preview").replace("/edit","/preview"):q.includes("docs.google.com/presentation")||q.includes("docs.google.com/document")?q.replace("/edit","/preview").replace("/view","/preview"):`https://docs.google.com/gview?url=${encodeURIComponent(q)}&embedded=true`;return E.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[T&&E.jsx(UT,{targetName:T.name,type:T.type,onClose:()=>b(null)}),E.jsxs("button",{onClick:s,className:"mb-8 text-gray-400 flex items-center gap-3 hover:text-[#0a192f] transition-all group font-black",children:[E.jsx("span",{className:"bg-white p-2 rounded-xl shadow-sm group-hover:-translate-x-1 transition-transform",children:""}),"   "]}),E.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl overflow-hidden mb-12 border border-gray-100 animate-in fade-in zoom-in-95 duration-700",children:[E.jsxs("div",{className:"bg-[#0a192f] p-12 text-white relative overflow-hidden text-right",children:[E.jsxs("div",{className:"relative z-10",children:[E.jsx("h1",{className:"text-5xl font-black mb-4",children:t.name}),E.jsx("p",{className:"text-blue-200/80 text-xl font-medium max-w-2xl",children:"         "})]}),E.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-[#10b981] rounded-full blur-[140px] opacity-20 -mr-40 -mt-40"}),E.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-[#f97316] rounded-full blur-[120px] opacity-10 -ml-32 -mb-32"})]}),E.jsxs("div",{className:"flex border-b bg-gray-50/50 overflow-x-auto whitespace-nowrap scrollbar-hide",children:[E.jsxs("button",{onClick:()=>u("schedule"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${a==="schedule"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[E.jsx("span",{children:""}),"  "]}),E.jsxs("button",{onClick:()=>u("teachers"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${a==="teachers"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[E.jsx("span",{children:""}),"  "]}),E.jsxs("button",{onClick:()=>u("courses"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${a==="courses"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[E.jsx("span",{children:""}),"  "]})]}),E.jsxs("div",{className:"p-8 md:p-14 text-right",children:[a==="schedule"&&E.jsxs("div",{children:[t.ramadanSchedule&&t.ramadanSchedule.length>0&&E.jsx("div",{className:"flex justify-center mb-8",children:E.jsxs("button",{onClick:()=>N(!C),className:`relative px-8 py-3 rounded-full font-black text-lg transition-all flex items-center gap-3 shadow-lg ${C?"bg-[#f97316] text-white":"bg-[#0a192f] text-white hover:bg-[#10b981]"}`,children:[E.jsx("span",{children:C?"   ":"   "}),C&&E.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[E.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),E.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-white"})]})]})}),C&&E.jsxs("div",{className:"text-center mb-6 animate-in fade-in zoom-in",children:[E.jsx("h2",{className:"text-3xl font-black text-[#f97316]",children:"    "}),E.jsx("p",{className:"text-gray-500 font-bold mt-2",children:"    -  "})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-6 animate-in slide-in-from-bottom-8 duration-500",children:V.map((q,oe)=>E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsx("div",{className:"bg-[#0a192f] text-white py-4 rounded-3xl text-center font-black shadow-xl",children:q.day}),E.jsxs("div",{className:"space-y-4",children:[(()=>{const D=new Set;return q.slots.map(R=>{const M=(q.day||"").trim(),L=(R.subject||"").trim(),B=(R.time||"").trim(),z=`${M}-${L}-${B}`;if(D.has(z))return null;D.add(z);const P=e.find(we=>we.id===R.teacherId);return E.jsxs("div",{onClick:()=>P&&h(P),className:`${R.color} p-6 rounded-[2rem] shadow-sm border border-black/5 flex flex-col gap-3 transform hover:scale-[1.05] hover:shadow-xl transition-all cursor-pointer`,children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-3xl",children:R.icon||""}),P&&E.jsxs("span",{className:"text-[10px] bg-white/40 backdrop-blur-md px-3 py-1 rounded-full font-black uppercase text-gray-900",children:["/ ",P.name.split(" ")[1]||P.name]})]}),E.jsxs("div",{children:[E.jsx("div",{className:"font-black text-2xl text-gray-900 leading-tight",children:R.subject}),E.jsx("div",{className:"text-sm font-bold opacity-70 mt-1",children:r(R.time)})]})]},R.id)})})(),q.slots.length===0&&E.jsx("div",{className:"text-gray-200 text-center py-10 italic text-sm border-2 border-dashed border-gray-100 rounded-3xl",children:" "})]})]},oe))})]}),a==="teachers"&&E.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 animate-in slide-in-from-right-8 duration-500",children:[U.map(q=>E.jsxs("div",{onClick:()=>h(q),className:"group bg-white rounded-[3rem] border border-gray-100 shadow-lg hover:shadow-2xl hover:border-[#10b981]/30 transition-all cursor-pointer overflow-hidden flex flex-col h-full active:scale-95",children:[E.jsxs("div",{className:"h-48 overflow-hidden relative",children:[E.jsx("img",{src:q.imageUrl,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000",alt:q.name}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent"}),E.jsx("div",{className:"absolute bottom-4 right-6 bg-white/20 backdrop-blur-md text-white px-5 py-1.5 rounded-full text-xs font-black",children:" "})]}),E.jsxs("div",{className:"p-8 text-center flex-1 flex flex-col items-center",children:[E.jsx("h3",{className:"text-3xl font-black mb-1 text-[#0a192f]",children:q.name}),E.jsx("p",{className:"text-[#10b981] font-black text-xl mb-6",children:q.subject}),E.jsx("div",{className:"w-full h-px bg-gray-50 mb-6"}),E.jsx("button",{onClick:oe=>{oe.stopPropagation(),b({name:q.name,type:""})},className:"mt-auto w-full bg-[#10b981] text-white py-5 rounded-2xl font-black text-xl hover:bg-emerald-600 transition-all shadow-xl shadow-emerald-500/10",children:"  "})]})]},q.id)),U.length===0&&E.jsx("div",{className:"col-span-full py-32 text-center",children:E.jsx("p",{className:"text-gray-300 font-black text-2xl",children:"     "})})]}),a==="courses"&&E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 animate-in slide-in-from-left-8 duration-500",children:[j.map(q=>E.jsxs("div",{className:"bg-white border-2 border-gray-100 rounded-[3.5rem] flex flex-col hover:border-[#f97316] transition-all group overflow-hidden shadow-sm hover:shadow-2xl active:scale-[0.98]",children:[E.jsxs("div",{className:"h-64 overflow-hidden relative",children:[E.jsx("img",{src:q.thumbnailUrl,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000",alt:q.title}),E.jsx("div",{className:"absolute top-6 right-6 bg-[#f97316] text-white px-5 py-2 rounded-full text-xs font-black shadow-2xl animate-pulse",children:"  (4K Content)"}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"})]}),E.jsxs("div",{className:"p-10 flex-1 flex flex-col",children:[E.jsx("h3",{className:"text-3xl font-black text-[#0a192f] group-hover:text-[#f97316] transition-colors mb-4",children:q.title}),E.jsx("p",{className:"text-gray-500 text-xl leading-relaxed mb-8 flex-1 line-clamp-3",children:q.description}),E.jsxs("div",{className:"space-y-4 mb-10",children:[E.jsxs("h4",{className:"font-black text-sm text-gray-300 uppercase tracking-widest flex items-center gap-2",children:[E.jsx("span",{className:"w-4 h-0.5 bg-gray-200"}),"  "]}),q.media.map(oe=>E.jsxs("div",{onClick:()=>v(oe),className:"flex items-center justify-between bg-gray-50 hover:bg-orange-50 p-5 rounded-3xl border border-gray-100 hover:border-orange-200 transition-all cursor-pointer group/item",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("span",{className:"text-3xl bg-white w-12 h-12 rounded-2xl shadow-sm flex items-center justify-center",children:oe.type==="video"?"":oe.type==="pdf"?"":""}),E.jsx("span",{className:"font-black text-xl text-[#0a192f]",children:oe.title})]}),E.jsx("span",{className:"text-[#f97316] font-black text-sm opacity-0 group-hover/item:opacity-100 transition-all",children:"  "})]},oe.id))]}),E.jsx("button",{onClick:()=>b({name:q.title,type:""}),className:"w-full bg-[#f97316] text-white py-6 rounded-3xl font-black text-2xl hover:bg-orange-600 transition-all shadow-2xl shadow-orange-500/30",children:"    "})]})]},q.id)),j.length===0&&E.jsx("div",{className:"col-span-full py-32 text-center",children:E.jsx("p",{className:"text-gray-300 font-black text-2xl",children:"    "})})]})]})]}),m&&E.jsxs("div",{className:"fixed inset-0 z-[120] bg-[#0a192f]/98 flex flex-col p-4 sm:p-10 animate-in fade-in duration-500",children:[E.jsxs("div",{className:"flex justify-between items-center mb-8 text-right",children:[E.jsxs("div",{className:"flex items-center gap-6",children:[E.jsx("button",{onClick:()=>v(null),className:"text-white bg-white/10 w-16 h-16 rounded-3xl flex items-center justify-center hover:bg-red-500 transition-all text-2xl shadow-2xl",children:""}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-white text-3xl font-black",children:m.title}),E.jsx("p",{className:"text-blue-400 font-bold text-sm",children:"    "})]})]}),E.jsxs("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"text-white font-black bg-[#10b981] px-10 py-4 rounded-2xl shadow-xl hover:bg-emerald-600 transition-all hidden sm:flex items-center gap-2",children:[E.jsx("span",{children:" / "})," "]})]}),E.jsxs("div",{className:"flex-1 bg-black rounded-[3rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.5)] relative flex items-center justify-center border border-white/10 group",children:[m.type==="video"?W(m.url)?E.jsx("iframe",{src:`${W(m.url)}?autoplay=1&rel=0&modestbranding=1`,className:"w-full h-full border-none shadow-inner",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}):G(m.url)?E.jsx("video",{src:m.url,controls:!0,className:"max-h-full max-w-full rounded-2xl",autoPlay:!0,playsInline:!0,controlsList:"nodownload"}):E.jsxs("div",{className:"text-center p-10",children:[E.jsx("p",{className:"text-white text-2xl font-bold mb-6",children:"     "}),E.jsxs("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"bg-[#f97316] text-white px-8 py-4 rounded-2xl font-black text-xl hover:bg-orange-600 transition-all shadow-lg inline-flex items-center gap-2",children:[E.jsx("span",{children:"    "})," "]})]}):m.type==="pdf"?E.jsx("iframe",{src:Q(m.url),className:"w-full h-full border-none bg-white rounded-2xl",title:"PDF Viewer"}):E.jsx("img",{src:m.url,className:"max-h-full max-w-full object-contain group-hover:scale-105 transition-transform duration-1000"}),E.jsx("div",{className:"absolute top-10 left-10 pointer-events-none opacity-20 hidden sm:block",children:E.jsx("span",{className:"text-white text-9xl font-black select-none",children:"EDUCATORS"})})]})]}),d&&E.jsx("div",{className:"fixed inset-0 z-[110] flex justify-end items-center bg-[#0a192f]/90 backdrop-blur-2xl animate-in fade-in p-0 sm:p-6 duration-500 cursor-pointer",onClick:()=>h(null),children:E.jsxs("div",{className:"bg-white h-full sm:h-auto w-full max-w-2xl sm:rounded-[3.5rem] overflow-hidden shadow-[0_0_80px_rgba(0,0,0,0.4)] animate-in slide-in-from-left duration-700 text-right flex flex-col cursor-default relative",onClick:q=>q.stopPropagation(),children:[E.jsx("button",{onClick:()=>h(null),className:"fixed top-6 left-6 z-[120] bg-red-500 hover:bg-red-600 text-white w-16 h-16 rounded-full flex items-center justify-center shadow-2xl border-4 border-white/20 hover:scale-110 transition-all animate-pulse",title:"",children:E.jsx("span",{className:"text-4xl font-black mb-1",children:""})}),E.jsxs("div",{className:"relative h-80 bg-[#0a192f]",children:[E.jsx("img",{src:d.imageUrl,className:"w-full h-full object-cover opacity-70"}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a192f] via-[#0a192f]/40 to-transparent"}),E.jsxs("div",{className:"absolute bottom-10 right-12",children:[E.jsx("h2",{className:"text-5xl font-black text-white mb-2",children:d.name}),E.jsxs("div",{className:"flex gap-3",children:[E.jsx("div",{className:"bg-[#10b981] text-white px-6 py-2 rounded-full inline-block font-black text-lg shadow-xl",children:d.subject}),d.whatsapp&&E.jsxs("a",{href:`https://wa.me/20${d.whatsapp}`,target:"_blank",rel:"noopener noreferrer",className:"bg-[#25D366] text-white px-6 py-2 rounded-full inline-flex items-center gap-2 font-black text-lg shadow-xl hover:bg-[#128C7E] transition-colors",children:[E.jsx("span",{children:""})," "]})]})]})]}),E.jsxs("div",{className:"p-12 flex-1 space-y-10 overflow-y-auto",children:[E.jsxs("div",{className:"animate-in slide-in-from-bottom-4 duration-500",children:[E.jsxs("h3",{className:"text-2xl font-black text-[#0a192f] mb-6 flex items-center gap-3",children:[E.jsx("span",{className:"w-1.5 h-6 bg-[#10b981] rounded-full"}),"  "]}),E.jsx("p",{className:"text-gray-600 text-2xl leading-relaxed bg-gray-50/50 p-10 rounded-[2.5rem] border-2 border-dashed border-gray-100 font-medium italic",children:d.bio||"           ."})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 animate-in slide-in-from-bottom-8 duration-700",children:[E.jsxs("div",{className:"bg-emerald-50/50 p-8 rounded-[2rem] border-2 border-emerald-100 flex flex-col items-center text-center",children:[E.jsx("span",{className:"text-4xl mb-3",children:""}),E.jsx("p",{className:"text-gray-400 text-xs font-black mb-1 uppercase tracking-tighter",children:"  "}),E.jsx("p",{className:"text-[#0a192f] font-black text-2xl",children:d.availability||"  "})]}),E.jsxs("div",{className:"bg-blue-50/50 p-8 rounded-[2rem] border-2 border-blue-100 flex flex-col items-center text-center",children:[E.jsx("span",{className:"text-4xl mb-3",children:""}),E.jsx("p",{className:"text-gray-400 text-xs font-black mb-1 uppercase tracking-tighter",children:" "}),E.jsx("p",{className:"text-[#0a192f] font-black text-2xl",children:d.teachingHours||" "})]})]}),d.hourlyRates&&E.jsxs("div",{className:"animate-in slide-in-from-bottom-8 duration-700 delay-100",children:[E.jsxs("h3",{className:"text-2xl font-black text-[#0a192f] mb-6 flex items-center gap-3",children:[E.jsx("span",{className:"w-1.5 h-6 bg-[#f97316] rounded-full"}),"  "]}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries(d.hourlyRates).map(([q,oe])=>E.jsxs("div",{className:"flex justify-between items-center bg-orange-50/50 p-6 rounded-2xl border border-orange-100",children:[E.jsx("span",{className:"font-bold text-[#0a192f] text-lg",children:q}),E.jsxs("span",{className:"font-black text-[#f97316] text-xl",children:[oe," ."]})]},q))})]}),E.jsxs("div",{className:"flex flex-col gap-4 mt-auto",children:[E.jsx("button",{onClick:()=>b({name:d.name,type:""}),className:"w-full bg-[#10b981] text-white py-6 rounded-3xl font-black text-2xl shadow-2xl shadow-emerald-500/30 hover:bg-emerald-600 transition-all active:scale-95 animate-in slide-in-from-bottom-12 duration-1000",children:"     "}),E.jsx("button",{onClick:()=>h(null),className:"w-full bg-gray-100 text-gray-500 py-4 rounded-3xl font-bold text-xl hover:bg-gray-200 transition-all active:scale-95",children:"  "})]})]})]})})]})};var EC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let TC,SC;function bC(){return{geminiUrl:TC,vertexUrl:SC}}function xC(t,e,n,s){var r,a;if(!(t!=null&&t.baseUrl)){const u=bC();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:n:(a=u.geminiUrl)!==null&&a!==void 0?a:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ns{}function _e(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const h=t[d];if(Array.isArray(n))for(let m=0;m<h.length;m++){const v=h[m];p(v,e.slice(a+1),n[m])}else for(const m of h)p(m,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const h=t[d];p(h[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const r=e[s];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(s+1),n)):n}else return n}else t=t[r]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function AC(t,e){for(const[n,s]of Object.entries(e)){const r=n.split("."),a=s.split("."),u=new Set;let d=-1;for(let h=0;h<r.length;h++)if(r[h]==="*"){d=h;break}if(d!==-1&&a.length>d)for(let h=d;h<a.length;h++){const m=a[h];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Tm(t,r,a,0,u)}}function Tm(t,e,n,s,r){if(s>=e.length||typeof t!="object"||t===null)return;const a=e[s];if(a.endsWith("[]")){const u=a.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const h of d[u])Tm(h,e,n,s+1,r)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!r.has(m)),h={};for(const m of d)h[m]=u[m];for(const[m,v]of Object.entries(h)){const T=[];for(const b of n.slice(s))b==="*"?T.push(m):T.push(b);p(u,T,v)}for(const m of d)delete u[m]}}else{const u=t;a in u&&Tm(u[a],e,n,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CC(t){const e={},n=f(t,["operationName"]);n!=null&&p(e,["operationName"],n);const s=f(t,["resourceName"]);return s!=null&&p(e,["_url","resourceName"],s),e}function wC(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],IC(u)),e}function RC(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],NC(u)),e}function IC(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>MC(u))),p(e,["generatedVideos"],a)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function NC(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>DC(u))),p(e,["generatedVideos"],a)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function MC(t){const e={},n=f(t,["video"]);return n!=null&&p(e,["video"],OC(n)),e}function DC(t){const e={},n=f(t,["_self"]);return n!=null&&p(e,["video"],BC(n)),e}function PC(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function UC(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function kC(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],VC(u)),e}function VC(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["parent"]);s!=null&&p(e,["parent"],s);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function kT(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],LC(u)),e}function LC(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["parent"]);s!=null&&p(e,["parent"],s);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function OC(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const s=f(t,["encodedVideo"]);s!=null&&p(e,["videoBytes"],rp(s));const r=f(t,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function BC(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const s=f(t,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],rp(s));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var D_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(D_||(D_={}));var P_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(P_||(P_={}));var U_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(U_||(U_={}));var $t;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})($t||($t={}));var k_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(k_||(k_={}));var V_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(V_||(V_={}));var L_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(L_||(L_={}));var O_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(O_||(O_={}));var B_;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(B_||(B_={}));var F_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(F_||(F_={}));var G_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(G_||(G_={}));var q_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(q_||(q_={}));var H_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(H_||(H_={}));var z_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(z_||(z_={}));var j_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(j_||(j_={}));var $_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})($_||($_={}));var Y_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Y_||(Y_={}));var K_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(K_||(K_={}));var J_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(J_||(J_={}));var Q_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Q_||(Q_={}));var X_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(X_||(X_={}));var ld;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ld||(ld={}));var W_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(W_||(W_={}));var Z_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Z_||(Z_={}));var e0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(e0||(e0={}));var Sm;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Sm||(Sm={}));var t0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(t0||(t0={}));var n0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(n0||(n0={}));var bm;(function(t){t.COLLECTION="COLLECTION"})(bm||(bm={}));var i0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(i0||(i0={}));var s0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(s0||(s0={}));var o0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(o0||(o0={}));var r0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(r0||(r0={}));var a0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(a0||(a0={}));var l0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(l0||(l0={}));var u0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(u0||(u0={}));var c0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(c0||(c0={}));var d0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(d0||(d0={}));var f0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(f0||(f0={}));var h0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(h0||(h0={}));var m0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(m0||(m0={}));var p0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(p0||(p0={}));var g0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(g0||(g0={}));var y0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(y0||(y0={}));var v0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(v0||(v0={}));var _0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(_0||(_0={}));var E0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(E0||(E0={}));var T0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(T0||(T0={}));var S0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(S0||(S0={}));var b0;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(b0||(b0={}));var x0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(x0||(x0={}));var A0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(A0||(A0={}));var C0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(C0||(C0={}));var w0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(w0||(w0={}));var R0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(R0||(R0={}));var I0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(I0||(I0={}));var ga;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ga||(ga={}));class xm{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Pl{get text(){var e,n,s,r,a,u,d,h;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const T=[];for(const b of(h=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[C,N]of Object.entries(b))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(N!==null||N!==void 0)&&T.push(C);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;v=!0,m+=b.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,n,s,r,a,u,d,h;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const T of(h=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[b,C]of Object.entries(T))b!=="inlineData"&&(C!==null||C!==void 0)&&v.push(b);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,s,r,a,u,d,h;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(h=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,s,r,a,u,d,h,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(h=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,s,r,a,u,d,h,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(h=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class N0{}class M0{}class FC{}class GC{}class qC{}class HC{}class D0{}class P0{}class U0{}class zC{}class ud{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new ud;let r;const a=e;return n?r=RC(a):r=wC(a),Object.assign(s,r),s}}class k0{}class V0{}class L0{}class O0{}class jC{}class $C{}class YC{}class ap{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new ap,a=kC(e);return Object.assign(s,a),s}}class KC{}class JC{}class QC{}class XC{}class B0{}class WC{get text(){var e,n,s;let r="",a=!1;const u=[];for(const d of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[h,m]of Object.entries(d))h!=="text"&&h!=="thought"&&m!==null&&u.push(h);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,s;let r="";const a=[];for(const u of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[d,h]of Object.entries(u))d!=="inlineData"&&h!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class ZC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class lp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new lp,a=kT(e);return Object.assign(s,a),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function VT(t,e){const n=rt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function LT(t){return Array.isArray(t)?t.map(e=>cd(e)):[cd(t)]}function cd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function OT(t){const e=cd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function BT(t){const e=cd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function F0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function FT(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>F0(e)):[F0(t)]}function Am(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function G0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function q0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function bn(t){if(t==null)throw new Error("ContentUnion is required");return Am(t)?t:{role:"user",parts:FT(t)}}function up(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=bn(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=bn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>bn(n)):[bn(e)]}function _i(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(G0(t)||q0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[bn(t)]}const e=[],n=[],s=Am(t[0]);for(const r of t){const a=Am(r);if(a!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(G0(r)||q0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return s||e.push({role:"user",parts:FT(n)}),e}function ew(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values($t).includes(n[0].toUpperCase())?n[0].toUpperCase():$t.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values($t).includes(s.toUpperCase())?s.toUpperCase():$t.TYPE_UNSPECIFIED})}}function va(t){const e={},n=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&ew(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values($t).includes(d.toUpperCase())?d.toUpperCase():$t.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=va(d);else if(s.includes(u)){const h=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}h.push(va(m))}e[u]=h}else if(r.includes(u)){const h={};for(const[m,v]of Object.entries(d))h[m]=va(v);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=d}return e}function cp(t){return va(t)}function dp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function fp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ia(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=va(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=va(e.response));return t}function Na(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function tw(t,e,n,s=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Ms(t,e){if(typeof e!="string")throw new Error("name must be a string");return tw(t,e,"cachedContents")}function GT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Mo(t){return rp(t)}function nw(t){return t!=null&&typeof t=="object"&&"name"in t}function iw(t){return t!=null&&typeof t=="object"&&"video"in t}function sw(t){return t!=null&&typeof t=="object"&&"uri"in t}function qT(t){var e;let n;if(nw(t)&&(n=t.name),!(sw(t)&&(n=t.uri,n===void 0))&&!(iw(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function HT(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function zT(t){for(const e of["models","tunedModels","publisherModels"])if(ow(t,e))return t[e];return[]}function ow(t,e){return t!==null&&typeof t=="object"&&e in t}function rw(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function aw(t,e={}){const n=[],s=new Set;for(const r of t){const a=r.name;if(s.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);s.add(a);const u=rw(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function jT(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function lw(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function $T(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ma(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function YT(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uw(t){const e={},n=f(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const s=f(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Hw(u))),p(e,["inlinedResponses"],a)}const r=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function cw(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const s=f(t,["gcsDestination","outputUriPrefix"]);s!=null&&p(e,["gcsUri"],s);const r=f(t,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function dw(t){const e={},n=f(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const s=f(t,["gcsUri"]);s!=null&&p(e,["gcsDestination","outputUriPrefix"],s);const r=f(t,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Zc(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata","displayName"]);s!=null&&p(e,["displayName"],s);const r=f(t,["metadata","state"]);r!=null&&p(e,["state"],YT(r));const a=f(t,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=f(t,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=f(t,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const h=f(t,["metadata","model"]);h!=null&&p(e,["model"],h);const m=f(t,["metadata","output"]);return m!=null&&p(e,["dest"],uw($T(m))),e}function Cm(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["displayName"]);s!=null&&p(e,["displayName"],s);const r=f(t,["state"]);r!=null&&p(e,["state"],YT(r));const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["createTime"]);u!=null&&p(e,["createTime"],u);const d=f(t,["startTime"]);d!=null&&p(e,["startTime"],d);const h=f(t,["endTime"]);h!=null&&p(e,["endTime"],h);const m=f(t,["updateTime"]);m!=null&&p(e,["updateTime"],m);const v=f(t,["model"]);v!=null&&p(e,["model"],v);const T=f(t,["inputConfig"]);T!=null&&p(e,["src"],fw(T));const b=f(t,["outputConfig"]);b!=null&&p(e,["dest"],cw($T(b)));const C=f(t,["completionStats"]);return C!=null&&p(e,["completionStats"],C),e}function fw(t){const e={},n=f(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const s=f(t,["gcsSource","uris"]);s!=null&&p(e,["gcsUri"],s);const r=f(t,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function hw(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&p(n,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>qw(t,u))),p(n,["requests","requests"],a)}return n}function mw(t){const e={},n=f(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const s=f(t,["gcsUri"]);s!=null&&p(e,["gcsSource","uris"],s);const r=f(t,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function pw(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function gw(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Ma(t,s)),n}function yw(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Ma(t,s)),n}function vw(t){const e={},n=f(t,["content"]);n!=null&&p(e,["content"],n);const s=f(t,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],_w(s));const r=f(t,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const a=f(t,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const h=f(t,["index"]);h!=null&&p(e,["index"],h);const m=f(t,["logprobsResult"]);m!=null&&p(e,["logprobsResult"],m);const v=f(t,["safetyRatings"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(C=>C)),p(e,["safetyRatings"],b)}const T=f(t,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function _w(t){const e={},n=f(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["citations"],s)}return e}function KT(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Qw(a))),p(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&p(e,["role"],s),e}function Ew(t,e){const n={},s=f(t,["displayName"]);if(e!==void 0&&s!=null&&p(e,["batch","displayName"],s),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Tw(t,e){const n={},s=f(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=f(t,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],dw(lw(r))),n}function H0(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["_url","model"],rt(t,s));const r=f(e,["src"]);r!=null&&p(n,["batch","inputConfig"],hw(t,jT(t,r)));const a=f(e,["config"]);return a!=null&&Ew(a,n),n}function Sw(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["model"],rt(t,s));const r=f(e,["src"]);r!=null&&p(n,["inputConfig"],mw(jT(t,r)));const a=f(e,["config"]);return a!=null&&Tw(a,n),n}function bw(t,e){const n={},s=f(t,["displayName"]);return e!==void 0&&s!=null&&p(e,["batch","displayName"],s),n}function xw(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["_url","model"],rt(t,s));const r=f(e,["src"]);r!=null&&p(n,["batch","inputConfig"],Mw(t,r));const a=f(e,["config"]);return a!=null&&bw(a,n),n}function Aw(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Ma(t,s)),n}function Cw(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Ma(t,s)),n}function ww(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["name"]);s!=null&&p(e,["name"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);return a!=null&&p(e,["error"],a),e}function Rw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["name"]);s!=null&&p(e,["name"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);return a!=null&&p(e,["error"],a),e}function Iw(t,e){const n={},s=f(e,["contents"]);if(s!=null){let a=up(t,s);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["requests[]","request","content"],a)}const r=f(e,["config"]);return r!=null&&(p(n,["_self"],Nw(r,n)),AC(n,{"requests[].*":"requests[].request.*"})),n}function Nw(t,e){const n={},s=f(t,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const r=f(t,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Mw(t,e){const n={},s=f(e,["fileName"]);s!=null&&p(n,["file_name"],s);const r=f(e,["inlinedRequests"]);return r!=null&&p(n,["requests"],Iw(t,r)),n}function Dw(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Pw(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const s=f(t,["args"]);s!=null&&p(e,["args"],s);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Uw(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const s=f(t,["mode"]);if(s!=null&&p(e,["mode"],s),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function kw(t,e,n){const s={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],KT(bn(r)));const a=f(e,["temperature"]);a!=null&&p(s,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(s,["topP"],u);const d=f(e,["topK"]);d!=null&&p(s,["topK"],d);const h=f(e,["candidateCount"]);h!=null&&p(s,["candidateCount"],h);const m=f(e,["maxOutputTokens"]);m!=null&&p(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&p(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&p(s,["responseLogprobs"],T);const b=f(e,["logprobs"]);b!=null&&p(s,["logprobs"],b);const C=f(e,["presencePenalty"]);C!=null&&p(s,["presencePenalty"],C);const N=f(e,["frequencyPenalty"]);N!=null&&p(s,["frequencyPenalty"],N);const V=f(e,["seed"]);V!=null&&p(s,["seed"],V);const U=f(e,["responseMimeType"]);U!=null&&p(s,["responseMimeType"],U);const j=f(e,["responseSchema"]);j!=null&&p(s,["responseSchema"],cp(j));const W=f(e,["responseJsonSchema"]);if(W!=null&&p(s,["responseJsonSchema"],W),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=f(e,["safetySettings"]);if(n!==void 0&&G!=null){let P=G;Array.isArray(P)&&(P=P.map(we=>Xw(we))),p(n,["safetySettings"],P)}const Q=f(e,["tools"]);if(n!==void 0&&Q!=null){let P=Na(Q);Array.isArray(P)&&(P=P.map(we=>Zw(Ia(we)))),p(n,["tools"],P)}const q=f(e,["toolConfig"]);if(n!==void 0&&q!=null&&p(n,["toolConfig"],Ww(q)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const oe=f(e,["cachedContent"]);n!==void 0&&oe!=null&&p(n,["cachedContent"],Ms(t,oe));const D=f(e,["responseModalities"]);D!=null&&p(s,["responseModalities"],D);const R=f(e,["mediaResolution"]);R!=null&&p(s,["mediaResolution"],R);const M=f(e,["speechConfig"]);if(M!=null&&p(s,["speechConfig"],dp(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&p(s,["thinkingConfig"],L);const B=f(e,["imageConfig"]);B!=null&&p(s,["imageConfig"],Gw(B));const z=f(e,["enableEnhancedCivicAnswers"]);if(z!=null&&p(s,["enableEnhancedCivicAnswers"],z),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function Vw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>vw(m))),p(e,["candidates"],h)}const r=f(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const a=f(t,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(t,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function Lw(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Ma(t,s)),n}function Ow(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Ma(t,s)),n}function Bw(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function Fw(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function Gw(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const s=f(t,["imageSize"]);if(s!=null&&p(e,["imageSize"],s),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function qw(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["request","model"],rt(t,s));const r=f(e,["contents"]);if(r!=null){let d=_i(r);Array.isArray(d)&&(d=d.map(h=>KT(h))),p(n,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&p(n,["metadata"],a);const u=f(e,["config"]);return u!=null&&p(n,["request","generationConfig"],kw(t,u,f(n,["request"],{}))),n}function Hw(t){const e={},n=f(t,["response"]);n!=null&&p(e,["response"],Vw(n));const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["error"]);return r!=null&&p(e,["error"],r),e}function zw(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function jw(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const a=f(t,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),n}function $w(t){const e={},n=f(t,["config"]);return n!=null&&zw(n,e),e}function Yw(t){const e={},n=f(t,["config"]);return n!=null&&jw(n,e),e}function Kw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Zc(u))),p(e,["batchJobs"],a)}return e}function Jw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Cm(u))),p(e,["batchJobs"],a)}return e}function Qw(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const s=f(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],Dw(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],Pw(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(t,["inlineData"]);h!=null&&p(e,["inlineData"],pw(h));const m=f(t,["text"]);m!=null&&p(e,["text"],m);const v=f(t,["thought"]);v!=null&&p(e,["thought"],v);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const b=f(t,["videoMetadata"]);return b!=null&&p(e,["videoMetadata"],b),e}function Xw(t){const e={},n=f(t,["category"]);if(n!=null&&p(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(t,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function Ww(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const s=f(t,["functionCallingConfig"]);return s!=null&&p(e,["functionCallingConfig"],Uw(s)),e}function Zw(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=f(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],Bw(u));const d=f(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],Fw(d));const h=f(t,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const m=f(t,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Cs||(Cs={}));class vr{constructor(e,n,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,r)}init(e,n,s){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eR extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vr(Cs.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=H0(this.apiClient,e),s=n._url,r=_e("{model}:batchGenerateContent",s),d=n.batch.inputConfig.requests,h=d.requests,m=[];for(const v of h){const T=Object.assign({},v);if(T.systemInstruction){const b=T.systemInstruction;delete T.systemInstruction;const C=T.request;C.systemInstruction=b,T.request=C}m.push(T)}return d.requests=m,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?s.dest=`${a.slice(0,-6)}/dest`:s.dest=`${a}_dest_${r}`;else if(u)s.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=Sw(this.apiClient,e);return d=_e("batchPredictionJobs",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Cm(v))}else{const m=H0(this.apiClient,e);return d=_e("{model}:batchGenerateContent",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Zc(v))}}async createEmbeddingsInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xw(this.apiClient,e);return a=_e("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>Zc(h))}}async get(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=Ow(this.apiClient,e);return d=_e("batchPredictionJobs/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Cm(v))}else{const m=Lw(this.apiClient,e);return d=_e("batches/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Zc(v))}}async cancel(e){var n,s,r,a;let u="",d={};if(this.apiClient.isVertexAI()){const h=yw(this.apiClient,e);u=_e("batchPredictionJobs/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const h=gw(this.apiClient,e);u=_e("batches/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=Yw(e);return d=_e("batchPredictionJobs",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=Jw(v),b=new B0;return Object.assign(b,T),b})}else{const m=$w(e);return d=_e("batches",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=Kw(v),b=new B0;return Object.assign(b,T),b})}}async delete(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=Cw(this.apiClient,e);return d=_e("batchPredictionJobs/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>Rw(v))}else{const m=Aw(this.apiClient,e);return d=_e("batches/{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>ww(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tR(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function z0(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>xR(a))),p(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&p(e,["role"],s),e}function nR(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const a=f(t,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let v=_i(u);Array.isArray(v)&&(v=v.map(T=>z0(T))),p(e,["contents"],v)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],z0(bn(d)));const h=f(t,["tools"]);if(e!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(T=>CR(T))),p(e,["tools"],v)}const m=f(t,["toolConfig"]);if(e!==void 0&&m!=null&&p(e,["toolConfig"],AR(m)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function iR(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const a=f(t,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let T=_i(u);Array.isArray(T)&&(T=T.map(b=>b)),p(e,["contents"],T)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],bn(d));const h=f(t,["tools"]);if(e!==void 0&&h!=null){let T=h;Array.isArray(T)&&(T=T.map(b=>wR(b))),p(e,["tools"],T)}const m=f(t,["toolConfig"]);e!==void 0&&m!=null&&p(e,["toolConfig"],m);const v=f(t,["kmsKeyName"]);return e!==void 0&&v!=null&&p(e,["encryption_spec","kmsKeyName"],v),n}function sR(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["model"],VT(t,s));const r=f(e,["config"]);return r!=null&&nR(r,n),n}function oR(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["model"],VT(t,s));const r=f(e,["config"]);return r!=null&&iR(r,n),n}function rR(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Ms(t,s)),n}function aR(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Ms(t,s)),n}function lR(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function uR(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function cR(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function dR(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const s=f(t,["args"]);s!=null&&p(e,["args"],s);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fR(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const s=f(t,["mode"]);if(s!=null&&p(e,["mode"],s),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hR(t){const e={},n=f(t,["description"]);n!=null&&p(e,["description"],n);const s=f(t,["name"]);s!=null&&p(e,["name"],s);const r=f(t,["parameters"]);r!=null&&p(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&p(e,["response"],u);const d=f(t,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function mR(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Ms(t,s)),n}function pR(t,e){const n={},s=f(e,["name"]);return s!=null&&p(n,["_url","name"],Ms(t,s)),n}function gR(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function yR(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function vR(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function _R(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function ER(t){const e={},n=f(t,["config"]);return n!=null&&vR(n,e),e}function TR(t){const e={},n=f(t,["config"]);return n!=null&&_R(n,e),e}function SR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function bR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function xR(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const s=f(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],cR(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],dR(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(t,["inlineData"]);h!=null&&p(e,["inlineData"],tR(h));const m=f(t,["text"]);m!=null&&p(e,["text"],m);const v=f(t,["thought"]);v!=null&&p(e,["thought"],v);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const b=f(t,["videoMetadata"]);return b!=null&&p(e,["videoMetadata"],b),e}function AR(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const s=f(t,["functionCallingConfig"]);return s!=null&&p(e,["functionCallingConfig"],fR(s)),e}function CR(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=f(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],gR(u));const d=f(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],yR(d));const h=f(t,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const m=f(t,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function wR(t){const e={},n=f(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const s=f(t,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const a=f(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=f(t,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(b=>hR(b))),p(e,["functionDeclarations"],T)}const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const h=f(t,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const m=f(t,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function RR(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function IR(t,e){const n={},s=f(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function NR(t,e){const n={},s=f(e,["name"]);s!=null&&p(n,["_url","name"],Ms(t,s));const r=f(e,["config"]);return r!=null&&RR(r,n),n}function MR(t,e){const n={},s=f(e,["name"]);s!=null&&p(n,["_url","name"],Ms(t,s));const r=f(e,["config"]);return r!=null&&IR(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DR extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vr(Cs.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=oR(this.apiClient,e);return d=_e("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=sR(this.apiClient,e);return d=_e("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=pR(this.apiClient,e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=mR(this.apiClient,e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=aR(this.apiClient,e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=uR(v),b=new L0;return Object.assign(b,T),b})}else{const m=rR(this.apiClient,e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=lR(v),b=new L0;return Object.assign(b,T),b})}}async update(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=MR(this.apiClient,e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=NR(this.apiClient,e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=TR(e);return d=_e("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=bR(v),b=new O0;return Object.assign(b,T),b})}else{const m=ER(e);return d=_e("cachedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=SR(v),b=new O0;return Object.assign(b,T),b})}}}function dd(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function j0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ve(t){return this instanceof Ve?(this.v=t,this):new Ve(t)}function Ni(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(C){return function(N){return Promise.resolve(N).then(C,T)}}function d(C,N){s[C]&&(r[C]=function(V){return new Promise(function(U,j){a.push([C,V,U,j])>1||h(C,V)})},N&&(r[C]=N(r[C])))}function h(C,N){try{m(s[C](N))}catch(V){b(a[0][3],V)}}function m(C){C.value instanceof Ve?Promise.resolve(C.value.v).then(v,T):b(a[0][2],C)}function v(C){h("next",C)}function T(C){h("throw",C)}function b(C,N){C(N),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Mi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof j0=="function"?j0(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(a){n[a]=t[a]&&function(u){return new Promise(function(d,h){u=t[a](u),r(d,h,u.done,u.value)})}}function r(a,u,d,h){Promise.resolve(h).then(function(m){a({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PR(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:JT(n)}function JT(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function UR(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function $0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let a=!0;for(;s<n&&t[s].role==="model";)r.push(t[s]),a&&!JT(t[s])&&(a=!1),s++;a?e.push(...r):e.pop()}return e}class kR{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new VR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class VR{constructor(e,n,s,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),UR(a)}async sendMessage(e){var n;await this.sendPromise;const s=bn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,d;const h=await r,m=(u=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=h.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let b=[];v!=null&&(b=(d=v.slice(T))!==null&&d!==void 0?d:[]);const C=m?[m]:[];this.recordHistory(s,C,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const s=bn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,s)}getHistory(e=!1){const n=e?$0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Ni(this,arguments,function*(){var r,a,u,d,h,m;const v=[];try{for(var T=!0,b=Mi(e),C;C=yield Ve(b.next()),r=C.done,!r;T=!0){d=C.value,T=!1;const N=d;if(PR(N)){const V=(m=(h=N.candidates)===null||h===void 0?void 0:h[0])===null||m===void 0?void 0:m.content;V!==void 0&&v.push(V)}yield yield Ve(N)}}catch(N){a={error:N}}finally{try{!T&&!r&&(u=b.return)&&(yield Ve(u.call(b)))}finally{if(a)throw a.error}}this.recordHistory(n,v)})}recordHistory(e,n,s){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...$0(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ql extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ql.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LR(t){const e={},n=f(t,["file"]);return n!=null&&p(e,["file"],n),e}function OR(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function BR(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],qT(n)),e}function FR(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function GR(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],qT(n)),e}function qR(t){const e={},n=f(t,["uris"]);return n!=null&&p(e,["uris"],n),e}function HR(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function zR(t){const e={},n=f(t,["config"]);return n!=null&&HR(n,e),e}function jR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}function $R(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),p(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YR extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vr(Cs.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zR(e);return a=_e("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),r.then(h=>{const m=jR(h),v=new KC;return Object.assign(v,m),v})}}async createInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=LR(e);return a=_e("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const m=OR(h),v=new JC;return Object.assign(v,m),v})}}async get(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=GR(e);return a=_e("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BR(e);return a=_e("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),r.then(h=>{const m=FR(h),v=new QC;return Object.assign(v,m),v})}}async registerFilesInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qR(e);return a=_e("files:register",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const m=$R(h),v=new XC;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ed(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function KR(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>cI(a))),p(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&p(e,["role"],s),e}function JR(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function QR(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const s=f(t,["args"]);s!=null&&p(e,["args"],s);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XR(t){const e={},n=f(t,["description"]);n!=null&&p(e,["description"],n);const s=f(t,["name"]);s!=null&&p(e,["name"],s);const r=f(t,["parameters"]);r!=null&&p(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&p(e,["response"],u);const d=f(t,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function WR(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const s=f(t,["responseJsonSchema"]);s!=null&&p(e,["responseJsonSchema"],s);const r=f(t,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const a=f(t,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(t,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const h=f(t,["logprobs"]);h!=null&&p(e,["logprobs"],h);const m=f(t,["maxOutputTokens"]);m!=null&&p(e,["maxOutputTokens"],m);const v=f(t,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const T=f(t,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const b=f(t,["responseLogprobs"]);b!=null&&p(e,["responseLogprobs"],b);const C=f(t,["responseMimeType"]);C!=null&&p(e,["responseMimeType"],C);const N=f(t,["responseModalities"]);N!=null&&p(e,["responseModalities"],N);const V=f(t,["responseSchema"]);V!=null&&p(e,["responseSchema"],V);const U=f(t,["routingConfig"]);U!=null&&p(e,["routingConfig"],U);const j=f(t,["seed"]);j!=null&&p(e,["seed"],j);const W=f(t,["speechConfig"]);W!=null&&p(e,["speechConfig"],W);const G=f(t,["stopSequences"]);G!=null&&p(e,["stopSequences"],G);const Q=f(t,["temperature"]);Q!=null&&p(e,["temperature"],Q);const q=f(t,["thinkingConfig"]);q!=null&&p(e,["thinkingConfig"],q);const oe=f(t,["topK"]);oe!=null&&p(e,["topK"],oe);const D=f(t,["topP"]);if(D!=null&&p(e,["topP"],D),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ZR(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function eI(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function tI(t,e){const n={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=f(t,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],fp(T));const b=f(t,["thinkingConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","thinkingConfig"],b);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const N=f(t,["systemInstruction"]);e!==void 0&&N!=null&&p(e,["setup","systemInstruction"],KR(bn(N)));const V=f(t,["tools"]);if(e!==void 0&&V!=null){let oe=Na(V);Array.isArray(oe)&&(oe=oe.map(D=>fI(Ia(D)))),p(e,["setup","tools"],oe)}const U=f(t,["sessionResumption"]);e!==void 0&&U!=null&&p(e,["setup","sessionResumption"],dI(U));const j=f(t,["inputAudioTranscription"]);e!==void 0&&j!=null&&p(e,["setup","inputAudioTranscription"],j);const W=f(t,["outputAudioTranscription"]);e!==void 0&&W!=null&&p(e,["setup","outputAudioTranscription"],W);const G=f(t,["realtimeInputConfig"]);e!==void 0&&G!=null&&p(e,["setup","realtimeInputConfig"],G);const Q=f(t,["contextWindowCompression"]);e!==void 0&&Q!=null&&p(e,["setup","contextWindowCompression"],Q);const q=f(t,["proactivity"]);if(e!==void 0&&q!=null&&p(e,["setup","proactivity"],q),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function nI(t,e){const n={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],WR(s));const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=f(t,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],fp(T));const b=f(t,["thinkingConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","thinkingConfig"],b);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const N=f(t,["systemInstruction"]);e!==void 0&&N!=null&&p(e,["setup","systemInstruction"],bn(N));const V=f(t,["tools"]);if(e!==void 0&&V!=null){let D=Na(V);Array.isArray(D)&&(D=D.map(R=>hI(Ia(R)))),p(e,["setup","tools"],D)}const U=f(t,["sessionResumption"]);e!==void 0&&U!=null&&p(e,["setup","sessionResumption"],U);const j=f(t,["inputAudioTranscription"]);e!==void 0&&j!=null&&p(e,["setup","inputAudioTranscription"],j);const W=f(t,["outputAudioTranscription"]);e!==void 0&&W!=null&&p(e,["setup","outputAudioTranscription"],W);const G=f(t,["realtimeInputConfig"]);e!==void 0&&G!=null&&p(e,["setup","realtimeInputConfig"],G);const Q=f(t,["contextWindowCompression"]);e!==void 0&&Q!=null&&p(e,["setup","contextWindowCompression"],Q);const q=f(t,["proactivity"]);e!==void 0&&q!=null&&p(e,["setup","proactivity"],q);const oe=f(t,["explicitVadSignal"]);return e!==void 0&&oe!=null&&p(e,["setup","explicitVadSignal"],oe),n}function iI(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["setup","model"],rt(t,s));const r=f(e,["config"]);return r!=null&&p(n,["config"],tI(r,n)),n}function sI(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["setup","model"],rt(t,s));const r=f(e,["config"]);return r!=null&&p(n,["config"],nI(r,n)),n}function oI(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function rI(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["weightedPrompts"],s)}return e}function aI(t){const e={},n=f(t,["media"]);if(n!=null){let m=LT(n);Array.isArray(m)&&(m=m.map(v=>ed(v))),p(e,["mediaChunks"],m)}const s=f(t,["audio"]);s!=null&&p(e,["audio"],ed(BT(s)));const r=f(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const a=f(t,["video"]);a!=null&&p(e,["video"],ed(OT(a)));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&p(e,["activityStart"],d);const h=f(t,["activityEnd"]);return h!=null&&p(e,["activityEnd"],h),e}function lI(t){const e={},n=f(t,["media"]);if(n!=null){let m=LT(n);Array.isArray(m)&&(m=m.map(v=>v)),p(e,["mediaChunks"],m)}const s=f(t,["audio"]);s!=null&&p(e,["audio"],BT(s));const r=f(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const a=f(t,["video"]);a!=null&&p(e,["video"],OT(a));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&p(e,["activityStart"],d);const h=f(t,["activityEnd"]);return h!=null&&p(e,["activityEnd"],h),e}function uI(t){const e={},n=f(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const s=f(t,["serverContent"]);s!=null&&p(e,["serverContent"],s);const r=f(t,["toolCall"]);r!=null&&p(e,["toolCall"],r);const a=f(t,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=f(t,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],mI(u));const d=f(t,["goAway"]);d!=null&&p(e,["goAway"],d);const h=f(t,["sessionResumptionUpdate"]);h!=null&&p(e,["sessionResumptionUpdate"],h);const m=f(t,["voiceActivityDetectionSignal"]);m!=null&&p(e,["voiceActivityDetectionSignal"],m);const v=f(t,["voiceActivity"]);return v!=null&&p(e,["voiceActivity"],pI(v)),e}function cI(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const s=f(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],JR(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],QR(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(t,["inlineData"]);h!=null&&p(e,["inlineData"],ed(h));const m=f(t,["text"]);m!=null&&p(e,["text"],m);const v=f(t,["thought"]);v!=null&&p(e,["thought"],v);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const b=f(t,["videoMetadata"]);return b!=null&&p(e,["videoMetadata"],b),e}function dI(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fI(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=f(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],ZR(u));const d=f(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],eI(d));const h=f(t,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const m=f(t,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function hI(t){const e={},n=f(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const s=f(t,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const a=f(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=f(t,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(b=>XR(b))),p(e,["functionDeclarations"],T)}const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const h=f(t,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const m=f(t,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function mI(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const s=f(t,["cachedContentTokenCount"]);s!=null&&p(e,["cachedContentTokenCount"],s);const r=f(t,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const a=f(t,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=f(t,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=f(t,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const h=f(t,["promptTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(N=>N)),p(e,["promptTokensDetails"],C)}const m=f(t,["cacheTokensDetails"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(N=>N)),p(e,["cacheTokensDetails"],C)}const v=f(t,["candidatesTokensDetails"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(N=>N)),p(e,["responseTokensDetails"],C)}const T=f(t,["toolUsePromptTokensDetails"]);if(T!=null){let C=T;Array.isArray(C)&&(C=C.map(N=>N)),p(e,["toolUsePromptTokensDetails"],C)}const b=f(t,["trafficType"]);return b!=null&&p(e,["trafficType"],b),e}function pI(t){const e={},n=f(t,["type"]);return n!=null&&p(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gI(t,e){const n={},s=f(t,["data"]);if(s!=null&&p(n,["data"],s),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}function yI(t,e){const n={},s=f(t,["content"]);s!=null&&p(n,["content"],s);const r=f(t,["citationMetadata"]);r!=null&&p(n,["citationMetadata"],vI(r));const a=f(t,["tokenCount"]);a!=null&&p(n,["tokenCount"],a);const u=f(t,["finishReason"]);u!=null&&p(n,["finishReason"],u);const d=f(t,["avgLogprobs"]);d!=null&&p(n,["avgLogprobs"],d);const h=f(t,["groundingMetadata"]);h!=null&&p(n,["groundingMetadata"],h);const m=f(t,["index"]);m!=null&&p(n,["index"],m);const v=f(t,["logprobsResult"]);v!=null&&p(n,["logprobsResult"],v);const T=f(t,["safetyRatings"]);if(T!=null){let C=T;Array.isArray(C)&&(C=C.map(N=>N)),p(n,["safetyRatings"],C)}const b=f(t,["urlContextMetadata"]);return b!=null&&p(n,["urlContextMetadata"],b),n}function vI(t,e){const n={},s=f(t,["citationSources"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),p(n,["citations"],r)}return n}function _I(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["contents"]);if(a!=null){let u=_i(a);Array.isArray(u)&&(u=u.map(d=>d)),p(s,["contents"],u)}return s}function EI(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["tokensInfo"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(n,["tokensInfo"],a)}return n}function TI(t,e){const n={},s=f(t,["values"]);s!=null&&p(n,["values"],s);const r=f(t,["statistics"]);return r!=null&&p(n,["statistics"],SI(r)),n}function SI(t,e){const n={},s=f(t,["truncated"]);s!=null&&p(n,["truncated"],s);const r=f(t,["token_count"]);return r!=null&&p(n,["tokenCount"],r),n}function Cd(t,e){const n={},s=f(t,["parts"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>MN(u))),p(n,["parts"],a)}const r=f(t,["role"]);return r!=null&&p(n,["role"],r),n}function bI(t,e){const n={},s=f(t,["controlType"]);s!=null&&p(n,["controlType"],s);const r=f(t,["enableControlImageComputation"]);return r!=null&&p(n,["computeControl"],r),n}function xI(t,e){const n={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function AI(t,e,n){const s={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],bn(r));const a=f(t,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>ZT(h))),p(e,["tools"],d)}const u=f(t,["generationConfig"]);return e!==void 0&&u!=null&&p(e,["generationConfig"],gN(u)),s}function CI(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["contents"]);if(a!=null){let d=_i(a);Array.isArray(d)&&(d=d.map(h=>Cd(h))),p(s,["contents"],d)}const u=f(e,["config"]);return u!=null&&xI(u),s}function wI(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["contents"]);if(a!=null){let d=_i(a);Array.isArray(d)&&(d=d.map(h=>h)),p(s,["contents"],d)}const u=f(e,["config"]);return u!=null&&AI(u,s),s}function RI(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["totalTokens"]);r!=null&&p(n,["totalTokens"],r);const a=f(t,["cachedContentTokenCount"]);return a!=null&&p(n,["cachedContentTokenCount"],a),n}function II(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["totalTokens"]);return r!=null&&p(n,["totalTokens"],r),n}function NI(t,e,n){const s={},r=f(e,["model"]);return r!=null&&p(s,["_url","name"],rt(t,r)),s}function MI(t,e,n){const s={},r=f(e,["model"]);return r!=null&&p(s,["_url","name"],rt(t,r)),s}function DI(t,e){const n={},s=f(t,["sdkHttpResponse"]);return s!=null&&p(n,["sdkHttpResponse"],s),n}function PI(t,e){const n={},s=f(t,["sdkHttpResponse"]);return s!=null&&p(n,["sdkHttpResponse"],s),n}function UI(t,e,n){const s={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const a=f(t,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=f(t,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(t,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const h=f(t,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const m=f(t,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const v=f(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&p(e,["parameters","safetySetting"],v);const T=f(t,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const b=f(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&p(e,["parameters","includeSafetyAttributes"],b);const C=f(t,["includeRaiReason"]);e!==void 0&&C!=null&&p(e,["parameters","includeRaiReason"],C);const N=f(t,["language"]);e!==void 0&&N!=null&&p(e,["parameters","language"],N);const V=f(t,["outputMimeType"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","mimeType"],V);const U=f(t,["outputCompressionQuality"]);e!==void 0&&U!=null&&p(e,["parameters","outputOptions","compressionQuality"],U);const j=f(t,["addWatermark"]);e!==void 0&&j!=null&&p(e,["parameters","addWatermark"],j);const W=f(t,["labels"]);e!==void 0&&W!=null&&p(e,["labels"],W);const G=f(t,["editMode"]);e!==void 0&&G!=null&&p(e,["parameters","editMode"],G);const Q=f(t,["baseSteps"]);return e!==void 0&&Q!=null&&p(e,["parameters","editConfig","baseSteps"],Q),s}function kI(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["prompt"]);a!=null&&p(s,["instances[0]","prompt"],a);const u=f(e,["referenceImages"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>LN(m))),p(s,["instances[0]","referenceImages"],h)}const d=f(e,["config"]);return d!=null&&UI(d,s),s}function VI(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>wd(u))),p(n,["generatedImages"],a)}return n}function LI(t,e,n){const s={},r=f(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const a=f(t,["title"]);e!==void 0&&a!=null&&p(e,["requests[]","title"],a);const u=f(t,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function OI(t,e,n){const s={},r=f(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const a=f(t,["title"]);e!==void 0&&a!=null&&p(e,["instances[]","title"],a);const u=f(t,["outputDimensionality"]);e!==void 0&&u!=null&&p(e,["parameters","outputDimensionality"],u);const d=f(t,["mimeType"]);e!==void 0&&d!=null&&p(e,["instances[]","mimeType"],d);const h=f(t,["autoTruncate"]);return e!==void 0&&h!=null&&p(e,["parameters","autoTruncate"],h),s}function BI(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["contents"]);if(a!=null){let h=up(t,a);Array.isArray(h)&&(h=h.map(m=>m)),p(s,["requests[]","content"],h)}const u=f(e,["config"]);u!=null&&LI(u,s);const d=f(e,["model"]);return d!==void 0&&p(s,["requests[]","model"],rt(t,d)),s}function FI(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["contents"]);if(a!=null){let d=up(t,a);Array.isArray(d)&&(d=d.map(h=>h)),p(s,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&OI(u,s),s}function GI(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),p(n,["embeddings"],u)}const a=f(t,["metadata"]);return a!=null&&p(n,["metadata"],a),n}function qI(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>TI(d))),p(n,["embeddings"],u)}const a=f(t,["metadata"]);return a!=null&&p(n,["metadata"],a),n}function HI(t,e){const n={},s=f(t,["endpoint"]);s!=null&&p(n,["name"],s);const r=f(t,["deployedModelId"]);return r!=null&&p(n,["deployedModelId"],r),n}function zI(t,e){const n={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["fileUri"]);s!=null&&p(n,["fileUri"],s);const r=f(t,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}function jI(t,e){const n={},s=f(t,["id"]);s!=null&&p(n,["id"],s);const r=f(t,["args"]);r!=null&&p(n,["args"],r);const a=f(t,["name"]);if(a!=null&&p(n,["name"],a),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function $I(t,e){const n={},s=f(t,["allowedFunctionNames"]);s!=null&&p(n,["allowedFunctionNames"],s);const r=f(t,["mode"]);if(r!=null&&p(n,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function YI(t,e){const n={},s=f(t,["description"]);s!=null&&p(n,["description"],s);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const a=f(t,["parameters"]);a!=null&&p(n,["parameters"],a);const u=f(t,["parametersJsonSchema"]);u!=null&&p(n,["parametersJsonSchema"],u);const d=f(t,["response"]);d!=null&&p(n,["response"],d);const h=f(t,["responseJsonSchema"]);if(h!=null&&p(n,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function KI(t,e,n,s){const r={},a=f(e,["systemInstruction"]);n!==void 0&&a!=null&&p(n,["systemInstruction"],Cd(bn(a)));const u=f(e,["temperature"]);u!=null&&p(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(r,["topP"],d);const h=f(e,["topK"]);h!=null&&p(r,["topK"],h);const m=f(e,["candidateCount"]);m!=null&&p(r,["candidateCount"],m);const v=f(e,["maxOutputTokens"]);v!=null&&p(r,["maxOutputTokens"],v);const T=f(e,["stopSequences"]);T!=null&&p(r,["stopSequences"],T);const b=f(e,["responseLogprobs"]);b!=null&&p(r,["responseLogprobs"],b);const C=f(e,["logprobs"]);C!=null&&p(r,["logprobs"],C);const N=f(e,["presencePenalty"]);N!=null&&p(r,["presencePenalty"],N);const V=f(e,["frequencyPenalty"]);V!=null&&p(r,["frequencyPenalty"],V);const U=f(e,["seed"]);U!=null&&p(r,["seed"],U);const j=f(e,["responseMimeType"]);j!=null&&p(r,["responseMimeType"],j);const W=f(e,["responseSchema"]);W!=null&&p(r,["responseSchema"],cp(W));const G=f(e,["responseJsonSchema"]);if(G!=null&&p(r,["responseJsonSchema"],G),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(n!==void 0&&Q!=null){let we=Q;Array.isArray(we)&&(we=we.map(Ie=>ON(Ie))),p(n,["safetySettings"],we)}const q=f(e,["tools"]);if(n!==void 0&&q!=null){let we=Na(q);Array.isArray(we)&&(we=we.map(Ie=>jN(Ia(Ie)))),p(n,["tools"],we)}const oe=f(e,["toolConfig"]);if(n!==void 0&&oe!=null&&p(n,["toolConfig"],zN(oe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=f(e,["cachedContent"]);n!==void 0&&D!=null&&p(n,["cachedContent"],Ms(t,D));const R=f(e,["responseModalities"]);R!=null&&p(r,["responseModalities"],R);const M=f(e,["mediaResolution"]);M!=null&&p(r,["mediaResolution"],M);const L=f(e,["speechConfig"]);if(L!=null&&p(r,["speechConfig"],dp(L)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=f(e,["thinkingConfig"]);B!=null&&p(r,["thinkingConfig"],B);const z=f(e,["imageConfig"]);z!=null&&p(r,["imageConfig"],TN(z));const P=f(e,["enableEnhancedCivicAnswers"]);if(P!=null&&p(r,["enableEnhancedCivicAnswers"],P),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function JI(t,e,n,s){const r={},a=f(e,["systemInstruction"]);n!==void 0&&a!=null&&p(n,["systemInstruction"],bn(a));const u=f(e,["temperature"]);u!=null&&p(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(r,["topP"],d);const h=f(e,["topK"]);h!=null&&p(r,["topK"],h);const m=f(e,["candidateCount"]);m!=null&&p(r,["candidateCount"],m);const v=f(e,["maxOutputTokens"]);v!=null&&p(r,["maxOutputTokens"],v);const T=f(e,["stopSequences"]);T!=null&&p(r,["stopSequences"],T);const b=f(e,["responseLogprobs"]);b!=null&&p(r,["responseLogprobs"],b);const C=f(e,["logprobs"]);C!=null&&p(r,["logprobs"],C);const N=f(e,["presencePenalty"]);N!=null&&p(r,["presencePenalty"],N);const V=f(e,["frequencyPenalty"]);V!=null&&p(r,["frequencyPenalty"],V);const U=f(e,["seed"]);U!=null&&p(r,["seed"],U);const j=f(e,["responseMimeType"]);j!=null&&p(r,["responseMimeType"],j);const W=f(e,["responseSchema"]);W!=null&&p(r,["responseSchema"],cp(W));const G=f(e,["responseJsonSchema"]);G!=null&&p(r,["responseJsonSchema"],G);const Q=f(e,["routingConfig"]);Q!=null&&p(r,["routingConfig"],Q);const q=f(e,["modelSelectionConfig"]);q!=null&&p(r,["modelConfig"],q);const oe=f(e,["safetySettings"]);if(n!==void 0&&oe!=null){let Ee=oe;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>Pe)),p(n,["safetySettings"],Ee)}const D=f(e,["tools"]);if(n!==void 0&&D!=null){let Ee=Na(D);Array.isArray(Ee)&&(Ee=Ee.map(Pe=>ZT(Ia(Pe)))),p(n,["tools"],Ee)}const R=f(e,["toolConfig"]);n!==void 0&&R!=null&&p(n,["toolConfig"],R);const M=f(e,["labels"]);n!==void 0&&M!=null&&p(n,["labels"],M);const L=f(e,["cachedContent"]);n!==void 0&&L!=null&&p(n,["cachedContent"],Ms(t,L));const B=f(e,["responseModalities"]);B!=null&&p(r,["responseModalities"],B);const z=f(e,["mediaResolution"]);z!=null&&p(r,["mediaResolution"],z);const P=f(e,["speechConfig"]);P!=null&&p(r,["speechConfig"],dp(P));const we=f(e,["audioTimestamp"]);we!=null&&p(r,["audioTimestamp"],we);const Ie=f(e,["thinkingConfig"]);Ie!=null&&p(r,["thinkingConfig"],Ie);const Z=f(e,["imageConfig"]);if(Z!=null&&p(r,["imageConfig"],SN(Z)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ce=f(e,["modelArmorConfig"]);return n!==void 0&&ce!=null&&p(n,["modelArmorConfig"],ce),r}function Y0(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["contents"]);if(a!=null){let d=_i(a);Array.isArray(d)&&(d=d.map(h=>Cd(h))),p(s,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(s,["generationConfig"],KI(t,u,s)),s}function K0(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["contents"]);if(a!=null){let d=_i(a);Array.isArray(d)&&(d=d.map(h=>h)),p(s,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(s,["generationConfig"],JI(t,u,s)),s}function J0(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(v=>yI(v))),p(n,["candidates"],m)}const a=f(t,["modelVersion"]);a!=null&&p(n,["modelVersion"],a);const u=f(t,["promptFeedback"]);u!=null&&p(n,["promptFeedback"],u);const d=f(t,["responseId"]);d!=null&&p(n,["responseId"],d);const h=f(t,["usageMetadata"]);return h!=null&&p(n,["usageMetadata"],h),n}function Q0(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["candidates"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(T=>T)),p(n,["candidates"],v)}const a=f(t,["createTime"]);a!=null&&p(n,["createTime"],a);const u=f(t,["modelVersion"]);u!=null&&p(n,["modelVersion"],u);const d=f(t,["promptFeedback"]);d!=null&&p(n,["promptFeedback"],d);const h=f(t,["responseId"]);h!=null&&p(n,["responseId"],h);const m=f(t,["usageMetadata"]);return m!=null&&p(n,["usageMetadata"],m),n}function QI(t,e,n){const s={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=f(t,["guidanceScale"]);if(e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const h=f(t,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const m=f(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const v=f(t,["includeRaiReason"]);e!==void 0&&v!=null&&p(e,["parameters","includeRaiReason"],v);const T=f(t,["language"]);e!==void 0&&T!=null&&p(e,["parameters","language"],T);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","mimeType"],b);const C=f(t,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&p(e,["parameters","outputOptions","compressionQuality"],C),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=f(t,["imageSize"]);if(e!==void 0&&N!=null&&p(e,["parameters","sampleImageSize"],N),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function XI(t,e,n){const s={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const a=f(t,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=f(t,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(t,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const h=f(t,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const m=f(t,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const v=f(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&p(e,["parameters","safetySetting"],v);const T=f(t,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const b=f(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&p(e,["parameters","includeSafetyAttributes"],b);const C=f(t,["includeRaiReason"]);e!==void 0&&C!=null&&p(e,["parameters","includeRaiReason"],C);const N=f(t,["language"]);e!==void 0&&N!=null&&p(e,["parameters","language"],N);const V=f(t,["outputMimeType"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","mimeType"],V);const U=f(t,["outputCompressionQuality"]);e!==void 0&&U!=null&&p(e,["parameters","outputOptions","compressionQuality"],U);const j=f(t,["addWatermark"]);e!==void 0&&j!=null&&p(e,["parameters","addWatermark"],j);const W=f(t,["labels"]);e!==void 0&&W!=null&&p(e,["labels"],W);const G=f(t,["imageSize"]);e!==void 0&&G!=null&&p(e,["parameters","sampleImageSize"],G);const Q=f(t,["enhancePrompt"]);return e!==void 0&&Q!=null&&p(e,["parameters","enhancePrompt"],Q),s}function WI(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["prompt"]);a!=null&&p(s,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&QI(u,s),s}function ZI(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["prompt"]);a!=null&&p(s,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&XI(u,s),s}function eN(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>fN(d))),p(n,["generatedImages"],u)}const a=f(t,["positivePromptSafetyAttributes"]);return a!=null&&p(n,["positivePromptSafetyAttributes"],XT(a)),n}function tN(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>wd(d))),p(n,["generatedImages"],u)}const a=f(t,["positivePromptSafetyAttributes"]);return a!=null&&p(n,["positivePromptSafetyAttributes"],WT(a)),n}function nN(t,e,n){const s={},r=f(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(t,["durationSeconds"]);if(e!==void 0&&a!=null&&p(e,["parameters","durationSeconds"],a),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(t,["resolution"]);e!==void 0&&d!=null&&p(e,["parameters","resolution"],d);const h=f(t,["personGeneration"]);if(e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(t,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const v=f(t,["enhancePrompt"]);if(e!==void 0&&v!=null&&p(e,["parameters","enhancePrompt"],v),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(t,["lastFrame"]);e!==void 0&&T!=null&&p(e,["instances[0]","lastFrame"],Rd(T));const b=f(t,["referenceImages"]);if(e!==void 0&&b!=null){let C=b;Array.isArray(C)&&(C=C.map(N=>s1(N))),p(e,["instances[0]","referenceImages"],C)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function iN(t,e,n){const s={},r=f(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=f(t,["fps"]);e!==void 0&&u!=null&&p(e,["parameters","fps"],u);const d=f(t,["durationSeconds"]);e!==void 0&&d!=null&&p(e,["parameters","durationSeconds"],d);const h=f(t,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const m=f(t,["aspectRatio"]);e!==void 0&&m!=null&&p(e,["parameters","aspectRatio"],m);const v=f(t,["resolution"]);e!==void 0&&v!=null&&p(e,["parameters","resolution"],v);const T=f(t,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const b=f(t,["pubsubTopic"]);e!==void 0&&b!=null&&p(e,["parameters","pubsubTopic"],b);const C=f(t,["negativePrompt"]);e!==void 0&&C!=null&&p(e,["parameters","negativePrompt"],C);const N=f(t,["enhancePrompt"]);e!==void 0&&N!=null&&p(e,["parameters","enhancePrompt"],N);const V=f(t,["generateAudio"]);e!==void 0&&V!=null&&p(e,["parameters","generateAudio"],V);const U=f(t,["lastFrame"]);e!==void 0&&U!=null&&p(e,["instances[0]","lastFrame"],Pi(U));const j=f(t,["referenceImages"]);if(e!==void 0&&j!=null){let Q=j;Array.isArray(Q)&&(Q=Q.map(q=>o1(q))),p(e,["instances[0]","referenceImages"],Q)}const W=f(t,["mask"]);e!==void 0&&W!=null&&p(e,["instances[0]","mask"],i1(W));const G=f(t,["compressionQuality"]);return e!==void 0&&G!=null&&p(e,["parameters","compressionQuality"],G),s}function sN(t,e){const n={},s=f(t,["name"]);s!=null&&p(n,["name"],s);const r=f(t,["metadata"]);r!=null&&p(n,["metadata"],r);const a=f(t,["done"]);a!=null&&p(n,["done"],a);const u=f(t,["error"]);u!=null&&p(n,["error"],u);const d=f(t,["response","generateVideoResponse"]);return d!=null&&p(n,["response"],lN(d)),n}function oN(t,e){const n={},s=f(t,["name"]);s!=null&&p(n,["name"],s);const r=f(t,["metadata"]);r!=null&&p(n,["metadata"],r);const a=f(t,["done"]);a!=null&&p(n,["done"],a);const u=f(t,["error"]);u!=null&&p(n,["error"],u);const d=f(t,["response"]);return d!=null&&p(n,["response"],uN(d)),n}function rN(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["prompt"]);a!=null&&p(s,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&p(s,["instances[0]","image"],Rd(u));const d=f(e,["video"]);d!=null&&p(s,["instances[0]","video"],eS(d));const h=f(e,["source"]);h!=null&&cN(h,s);const m=f(e,["config"]);return m!=null&&nN(m,s),s}function aN(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["prompt"]);a!=null&&p(s,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&p(s,["instances[0]","image"],Pi(u));const d=f(e,["video"]);d!=null&&p(s,["instances[0]","video"],tS(d));const h=f(e,["source"]);h!=null&&dN(h,s);const m=f(e,["config"]);return m!=null&&iN(m,s),s}function lN(t,e){const n={},s=f(t,["generatedSamples"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>mN(d))),p(n,["generatedVideos"],u)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&p(n,["raiMediaFilteredCount"],r);const a=f(t,["raiMediaFilteredReasons"]);return a!=null&&p(n,["raiMediaFilteredReasons"],a),n}function uN(t,e){const n={},s=f(t,["videos"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>pN(d))),p(n,["generatedVideos"],u)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&p(n,["raiMediaFilteredCount"],r);const a=f(t,["raiMediaFilteredReasons"]);return a!=null&&p(n,["raiMediaFilteredReasons"],a),n}function cN(t,e,n){const s={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const a=f(t,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],Rd(a));const u=f(t,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],eS(u)),s}function dN(t,e,n){const s={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const a=f(t,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],Pi(a));const u=f(t,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],tS(u)),s}function fN(t,e){const n={},s=f(t,["_self"]);s!=null&&p(n,["image"],bN(s));const r=f(t,["raiFilteredReason"]);r!=null&&p(n,["raiFilteredReason"],r);const a=f(t,["_self"]);return a!=null&&p(n,["safetyAttributes"],XT(a)),n}function wd(t,e){const n={},s=f(t,["_self"]);s!=null&&p(n,["image"],QT(s));const r=f(t,["raiFilteredReason"]);r!=null&&p(n,["raiFilteredReason"],r);const a=f(t,["_self"]);a!=null&&p(n,["safetyAttributes"],WT(a));const u=f(t,["prompt"]);return u!=null&&p(n,["enhancedPrompt"],u),n}function hN(t,e){const n={},s=f(t,["_self"]);s!=null&&p(n,["mask"],QT(s));const r=f(t,["labels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(n,["labels"],a)}return n}function mN(t,e){const n={},s=f(t,["video"]);return s!=null&&p(n,["video"],t1(s)),n}function pN(t,e){const n={},s=f(t,["_self"]);return s!=null&&p(n,["video"],n1(s)),n}function gN(t,e){const n={},s=f(t,["modelSelectionConfig"]);s!=null&&p(n,["modelConfig"],s);const r=f(t,["responseJsonSchema"]);r!=null&&p(n,["responseJsonSchema"],r);const a=f(t,["audioTimestamp"]);a!=null&&p(n,["audioTimestamp"],a);const u=f(t,["candidateCount"]);u!=null&&p(n,["candidateCount"],u);const d=f(t,["enableAffectiveDialog"]);d!=null&&p(n,["enableAffectiveDialog"],d);const h=f(t,["frequencyPenalty"]);h!=null&&p(n,["frequencyPenalty"],h);const m=f(t,["logprobs"]);m!=null&&p(n,["logprobs"],m);const v=f(t,["maxOutputTokens"]);v!=null&&p(n,["maxOutputTokens"],v);const T=f(t,["mediaResolution"]);T!=null&&p(n,["mediaResolution"],T);const b=f(t,["presencePenalty"]);b!=null&&p(n,["presencePenalty"],b);const C=f(t,["responseLogprobs"]);C!=null&&p(n,["responseLogprobs"],C);const N=f(t,["responseMimeType"]);N!=null&&p(n,["responseMimeType"],N);const V=f(t,["responseModalities"]);V!=null&&p(n,["responseModalities"],V);const U=f(t,["responseSchema"]);U!=null&&p(n,["responseSchema"],U);const j=f(t,["routingConfig"]);j!=null&&p(n,["routingConfig"],j);const W=f(t,["seed"]);W!=null&&p(n,["seed"],W);const G=f(t,["speechConfig"]);G!=null&&p(n,["speechConfig"],G);const Q=f(t,["stopSequences"]);Q!=null&&p(n,["stopSequences"],Q);const q=f(t,["temperature"]);q!=null&&p(n,["temperature"],q);const oe=f(t,["thinkingConfig"]);oe!=null&&p(n,["thinkingConfig"],oe);const D=f(t,["topK"]);D!=null&&p(n,["topK"],D);const R=f(t,["topP"]);if(R!=null&&p(n,["topP"],R),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function yN(t,e,n){const s={},r=f(e,["model"]);return r!=null&&p(s,["_url","name"],rt(t,r)),s}function vN(t,e,n){const s={},r=f(e,["model"]);return r!=null&&p(s,["_url","name"],rt(t,r)),s}function _N(t,e){const n={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=f(t,["enableWidget"]);return s!=null&&p(n,["enableWidget"],s),n}function EN(t,e){const n={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=f(t,["timeRangeFilter"]);return s!=null&&p(n,["timeRangeFilter"],s),n}function TN(t,e){const n={},s=f(t,["aspectRatio"]);s!=null&&p(n,["aspectRatio"],s);const r=f(t,["imageSize"]);if(r!=null&&p(n,["imageSize"],r),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function SN(t,e){const n={},s=f(t,["aspectRatio"]);s!=null&&p(n,["aspectRatio"],s);const r=f(t,["imageSize"]);r!=null&&p(n,["imageSize"],r);const a=f(t,["personGeneration"]);a!=null&&p(n,["personGeneration"],a);const u=f(t,["outputMimeType"]);u!=null&&p(n,["imageOutputOptions","mimeType"],u);const d=f(t,["outputCompressionQuality"]);return d!=null&&p(n,["imageOutputOptions","compressionQuality"],d),n}function bN(t,e){const n={},s=f(t,["bytesBase64Encoded"]);s!=null&&p(n,["imageBytes"],Mo(s));const r=f(t,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}function QT(t,e){const n={},s=f(t,["gcsUri"]);s!=null&&p(n,["gcsUri"],s);const r=f(t,["bytesBase64Encoded"]);r!=null&&p(n,["imageBytes"],Mo(r));const a=f(t,["mimeType"]);return a!=null&&p(n,["mimeType"],a),n}function Rd(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=f(t,["imageBytes"]);s!=null&&p(n,["bytesBase64Encoded"],Mo(s));const r=f(t,["mimeType"]);return r!=null&&p(n,["mimeType"],r),n}function Pi(t,e){const n={},s=f(t,["gcsUri"]);s!=null&&p(n,["gcsUri"],s);const r=f(t,["imageBytes"]);r!=null&&p(n,["bytesBase64Encoded"],Mo(r));const a=f(t,["mimeType"]);return a!=null&&p(n,["mimeType"],a),n}function xN(t,e,n,s){const r={},a=f(e,["pageSize"]);n!==void 0&&a!=null&&p(n,["_query","pageSize"],a);const u=f(e,["pageToken"]);n!==void 0&&u!=null&&p(n,["_query","pageToken"],u);const d=f(e,["filter"]);n!==void 0&&d!=null&&p(n,["_query","filter"],d);const h=f(e,["queryBase"]);return n!==void 0&&h!=null&&p(n,["_url","models_url"],HT(t,h)),r}function AN(t,e,n,s){const r={},a=f(e,["pageSize"]);n!==void 0&&a!=null&&p(n,["_query","pageSize"],a);const u=f(e,["pageToken"]);n!==void 0&&u!=null&&p(n,["_query","pageToken"],u);const d=f(e,["filter"]);n!==void 0&&d!=null&&p(n,["_query","filter"],d);const h=f(e,["queryBase"]);return n!==void 0&&h!=null&&p(n,["_url","models_url"],HT(t,h)),r}function CN(t,e,n){const s={},r=f(e,["config"]);return r!=null&&xN(t,r,s),s}function wN(t,e,n){const s={},r=f(e,["config"]);return r!=null&&AN(t,r,s),s}function RN(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const a=f(t,["_self"]);if(a!=null){let u=zT(a);Array.isArray(u)&&(u=u.map(d=>wm(d))),p(n,["models"],u)}return n}function IN(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const a=f(t,["_self"]);if(a!=null){let u=zT(a);Array.isArray(u)&&(u=u.map(d=>Rm(d))),p(n,["models"],u)}return n}function NN(t,e){const n={},s=f(t,["maskMode"]);s!=null&&p(n,["maskMode"],s);const r=f(t,["segmentationClasses"]);r!=null&&p(n,["maskClasses"],r);const a=f(t,["maskDilation"]);return a!=null&&p(n,["dilation"],a),n}function wm(t,e){const n={},s=f(t,["name"]);s!=null&&p(n,["name"],s);const r=f(t,["displayName"]);r!=null&&p(n,["displayName"],r);const a=f(t,["description"]);a!=null&&p(n,["description"],a);const u=f(t,["version"]);u!=null&&p(n,["version"],u);const d=f(t,["_self"]);d!=null&&p(n,["tunedModelInfo"],$N(d));const h=f(t,["inputTokenLimit"]);h!=null&&p(n,["inputTokenLimit"],h);const m=f(t,["outputTokenLimit"]);m!=null&&p(n,["outputTokenLimit"],m);const v=f(t,["supportedGenerationMethods"]);v!=null&&p(n,["supportedActions"],v);const T=f(t,["temperature"]);T!=null&&p(n,["temperature"],T);const b=f(t,["maxTemperature"]);b!=null&&p(n,["maxTemperature"],b);const C=f(t,["topP"]);C!=null&&p(n,["topP"],C);const N=f(t,["topK"]);N!=null&&p(n,["topK"],N);const V=f(t,["thinking"]);return V!=null&&p(n,["thinking"],V),n}function Rm(t,e){const n={},s=f(t,["name"]);s!=null&&p(n,["name"],s);const r=f(t,["displayName"]);r!=null&&p(n,["displayName"],r);const a=f(t,["description"]);a!=null&&p(n,["description"],a);const u=f(t,["versionId"]);u!=null&&p(n,["version"],u);const d=f(t,["deployedModels"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(C=>HI(C))),p(n,["endpoints"],b)}const h=f(t,["labels"]);h!=null&&p(n,["labels"],h);const m=f(t,["_self"]);m!=null&&p(n,["tunedModelInfo"],YN(m));const v=f(t,["defaultCheckpointId"]);v!=null&&p(n,["defaultCheckpointId"],v);const T=f(t,["checkpoints"]);if(T!=null){let b=T;Array.isArray(b)&&(b=b.map(C=>C)),p(n,["checkpoints"],b)}return n}function MN(t,e){const n={},s=f(t,["mediaResolution"]);s!=null&&p(n,["mediaResolution"],s);const r=f(t,["codeExecutionResult"]);r!=null&&p(n,["codeExecutionResult"],r);const a=f(t,["executableCode"]);a!=null&&p(n,["executableCode"],a);const u=f(t,["fileData"]);u!=null&&p(n,["fileData"],zI(u));const d=f(t,["functionCall"]);d!=null&&p(n,["functionCall"],jI(d));const h=f(t,["functionResponse"]);h!=null&&p(n,["functionResponse"],h);const m=f(t,["inlineData"]);m!=null&&p(n,["inlineData"],gI(m));const v=f(t,["text"]);v!=null&&p(n,["text"],v);const T=f(t,["thought"]);T!=null&&p(n,["thought"],T);const b=f(t,["thoughtSignature"]);b!=null&&p(n,["thoughtSignature"],b);const C=f(t,["videoMetadata"]);return C!=null&&p(n,["videoMetadata"],C),n}function DN(t,e){const n={},s=f(t,["productImage"]);return s!=null&&p(n,["image"],Pi(s)),n}function PN(t,e,n){const s={},r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const a=f(t,["baseSteps"]);e!==void 0&&a!=null&&p(e,["parameters","baseSteps"],a);const u=f(t,["outputGcsUri"]);e!==void 0&&u!=null&&p(e,["parameters","storageUri"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const m=f(t,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const v=f(t,["addWatermark"]);e!==void 0&&v!=null&&p(e,["parameters","addWatermark"],v);const T=f(t,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const b=f(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","compressionQuality"],b);const C=f(t,["enhancePrompt"]);e!==void 0&&C!=null&&p(e,["parameters","enhancePrompt"],C);const N=f(t,["labels"]);return e!==void 0&&N!=null&&p(e,["labels"],N),s}function UN(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["source"]);a!=null&&VN(a,s);const u=f(e,["config"]);return u!=null&&PN(u,s),s}function kN(t,e){const n={},s=f(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>wd(a))),p(n,["generatedImages"],r)}return n}function VN(t,e,n){const s={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const a=f(t,["personImage"]);e!==void 0&&a!=null&&p(e,["instances[0]","personImage","image"],Pi(a));const u=f(t,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>DN(h))),p(e,["instances[0]","productImages"],d)}return s}function LN(t,e){const n={},s=f(t,["referenceImage"]);s!=null&&p(n,["referenceImage"],Pi(s));const r=f(t,["referenceId"]);r!=null&&p(n,["referenceId"],r);const a=f(t,["referenceType"]);a!=null&&p(n,["referenceType"],a);const u=f(t,["maskImageConfig"]);u!=null&&p(n,["maskImageConfig"],NN(u));const d=f(t,["controlImageConfig"]);d!=null&&p(n,["controlImageConfig"],bI(d));const h=f(t,["styleImageConfig"]);h!=null&&p(n,["styleImageConfig"],h);const m=f(t,["subjectImageConfig"]);return m!=null&&p(n,["subjectImageConfig"],m),n}function XT(t,e){const n={},s=f(t,["safetyAttributes","categories"]);s!=null&&p(n,["categories"],s);const r=f(t,["safetyAttributes","scores"]);r!=null&&p(n,["scores"],r);const a=f(t,["contentType"]);return a!=null&&p(n,["contentType"],a),n}function WT(t,e){const n={},s=f(t,["safetyAttributes","categories"]);s!=null&&p(n,["categories"],s);const r=f(t,["safetyAttributes","scores"]);r!=null&&p(n,["scores"],r);const a=f(t,["contentType"]);return a!=null&&p(n,["contentType"],a),n}function ON(t,e){const n={},s=f(t,["category"]);if(s!=null&&p(n,["category"],s),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(t,["threshold"]);return r!=null&&p(n,["threshold"],r),n}function BN(t,e){const n={},s=f(t,["image"]);return s!=null&&p(n,["image"],Pi(s)),n}function FN(t,e,n){const s={},r=f(t,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const a=f(t,["maxPredictions"]);e!==void 0&&a!=null&&p(e,["parameters","maxPredictions"],a);const u=f(t,["confidenceThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","confidenceThreshold"],u);const d=f(t,["maskDilation"]);e!==void 0&&d!=null&&p(e,["parameters","maskDilation"],d);const h=f(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&p(e,["parameters","binaryColorThreshold"],h);const m=f(t,["labels"]);return e!==void 0&&m!=null&&p(e,["labels"],m),s}function GN(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["source"]);a!=null&&HN(a,s);const u=f(e,["config"]);return u!=null&&FN(u,s),s}function qN(t,e){const n={},s=f(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>hN(a))),p(n,["generatedMasks"],r)}return n}function HN(t,e,n){const s={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const a=f(t,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],Pi(a));const u=f(t,["scribbleImage"]);return e!==void 0&&u!=null&&p(e,["instances[0]","scribble"],BN(u)),s}function zN(t,e){const n={},s=f(t,["retrievalConfig"]);s!=null&&p(n,["retrievalConfig"],s);const r=f(t,["functionCallingConfig"]);return r!=null&&p(n,["functionCallingConfig"],$I(r)),n}function jN(t,e){const n={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(t,["computerUse"]);s!=null&&p(n,["computerUse"],s);const r=f(t,["fileSearch"]);r!=null&&p(n,["fileSearch"],r);const a=f(t,["codeExecution"]);if(a!=null&&p(n,["codeExecution"],a),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(t,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(b=>b)),p(n,["functionDeclarations"],T)}const d=f(t,["googleMaps"]);d!=null&&p(n,["googleMaps"],_N(d));const h=f(t,["googleSearch"]);h!=null&&p(n,["googleSearch"],EN(h));const m=f(t,["googleSearchRetrieval"]);m!=null&&p(n,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&p(n,["urlContext"],v),n}function ZT(t,e){const n={},s=f(t,["retrieval"]);s!=null&&p(n,["retrieval"],s);const r=f(t,["computerUse"]);if(r!=null&&p(n,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(t,["codeExecution"]);a!=null&&p(n,["codeExecution"],a);const u=f(t,["enterpriseWebSearch"]);u!=null&&p(n,["enterpriseWebSearch"],u);const d=f(t,["functionDeclarations"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(C=>YI(C))),p(n,["functionDeclarations"],b)}const h=f(t,["googleMaps"]);h!=null&&p(n,["googleMaps"],h);const m=f(t,["googleSearch"]);m!=null&&p(n,["googleSearch"],m);const v=f(t,["googleSearchRetrieval"]);v!=null&&p(n,["googleSearchRetrieval"],v);const T=f(t,["urlContext"]);return T!=null&&p(n,["urlContext"],T),n}function $N(t,e){const n={},s=f(t,["baseModel"]);s!=null&&p(n,["baseModel"],s);const r=f(t,["createTime"]);r!=null&&p(n,["createTime"],r);const a=f(t,["updateTime"]);return a!=null&&p(n,["updateTime"],a),n}function YN(t,e){const n={},s=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&p(n,["baseModel"],s);const r=f(t,["createTime"]);r!=null&&p(n,["createTime"],r);const a=f(t,["updateTime"]);return a!=null&&p(n,["updateTime"],a),n}function KN(t,e,n){const s={},r=f(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const a=f(t,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=f(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),s}function JN(t,e,n){const s={},r=f(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const a=f(t,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=f(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),s}function QN(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","name"],rt(t,r));const a=f(e,["config"]);return a!=null&&KN(a,s),s}function XN(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["config"]);return a!=null&&JN(a,s),s}function WN(t,e,n){const s={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const a=f(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const u=f(t,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const d=f(t,["includeRaiReason"]);e!==void 0&&d!=null&&p(e,["parameters","includeRaiReason"],d);const h=f(t,["outputMimeType"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","mimeType"],h);const m=f(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const v=f(t,["enhanceInputImage"]);e!==void 0&&v!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],v);const T=f(t,["imagePreservationFactor"]);e!==void 0&&T!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const b=f(t,["labels"]);e!==void 0&&b!=null&&p(e,["labels"],b);const C=f(t,["numberOfImages"]);e!==void 0&&C!=null&&p(e,["parameters","sampleCount"],C);const N=f(t,["mode"]);return e!==void 0&&N!=null&&p(e,["parameters","mode"],N),s}function ZN(t,e,n){const s={},r=f(e,["model"]);r!=null&&p(s,["_url","model"],rt(t,r));const a=f(e,["image"]);a!=null&&p(s,["instances[0]","image"],Pi(a));const u=f(e,["upscaleFactor"]);u!=null&&p(s,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&WN(d,s),s}function e1(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>wd(u))),p(n,["generatedImages"],a)}return n}function t1(t,e){const n={},s=f(t,["uri"]);s!=null&&p(n,["uri"],s);const r=f(t,["encodedVideo"]);r!=null&&p(n,["videoBytes"],Mo(r));const a=f(t,["encoding"]);return a!=null&&p(n,["mimeType"],a),n}function n1(t,e){const n={},s=f(t,["gcsUri"]);s!=null&&p(n,["uri"],s);const r=f(t,["bytesBase64Encoded"]);r!=null&&p(n,["videoBytes"],Mo(r));const a=f(t,["mimeType"]);return a!=null&&p(n,["mimeType"],a),n}function i1(t,e){const n={},s=f(t,["image"]);s!=null&&p(n,["_self"],Pi(s));const r=f(t,["maskMode"]);return r!=null&&p(n,["maskMode"],r),n}function s1(t,e){const n={},s=f(t,["image"]);s!=null&&p(n,["image"],Rd(s));const r=f(t,["referenceType"]);return r!=null&&p(n,["referenceType"],r),n}function o1(t,e){const n={},s=f(t,["image"]);s!=null&&p(n,["image"],Pi(s));const r=f(t,["referenceType"]);return r!=null&&p(n,["referenceType"],r),n}function eS(t,e){const n={},s=f(t,["uri"]);s!=null&&p(n,["uri"],s);const r=f(t,["videoBytes"]);r!=null&&p(n,["encodedVideo"],Mo(r));const a=f(t,["mimeType"]);return a!=null&&p(n,["encoding"],a),n}function tS(t,e){const n={},s=f(t,["uri"]);s!=null&&p(n,["gcsUri"],s);const r=f(t,["videoBytes"]);r!=null&&p(n,["bytesBase64Encoded"],Mo(r));const a=f(t,["mimeType"]);return a!=null&&p(n,["mimeType"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r1(t,e){const n={},s=f(t,["displayName"]);return e!==void 0&&s!=null&&p(e,["displayName"],s),n}function a1(t){const e={},n=f(t,["config"]);return n!=null&&r1(n,e),e}function l1(t,e){const n={},s=f(t,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),n}function u1(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const s=f(t,["config"]);return s!=null&&l1(s,e),e}function c1(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function d1(t,e){const n={},s=f(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const r=f(t,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),n}function f1(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const s=f(t,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],m1(u)),e}function h1(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const s=f(t,["fileName"]);s!=null&&p(e,["fileName"],s);const r=f(t,["config"]);return r!=null&&d1(r,e),e}function m1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["parent"]);s!=null&&p(e,["parent"],s);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function p1(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function g1(t){const e={},n=f(t,["config"]);return n!=null&&p1(n,e),e}function y1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function nS(t,e){const n={},s=f(t,["mimeType"]);e!==void 0&&s!=null&&p(e,["mimeType"],s);const r=f(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const a=f(t,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>h)),p(e,["customMetadata"],d)}const u=f(t,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),n}function v1(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const s=f(t,["config"]);return s!=null&&nS(s,e),e}function _1(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E1="Content-Type",T1="X-Server-Timeout",S1="User-Agent",Im="x-goog-api-client",b1="1.40.0",x1=`google-genai-sdk/${b1}`,A1="v1beta1",C1="v1beta";class w1{constructor(e){var n,s,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:A1}else{if(!this.clientOptions.apiKey)throw new Ql({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:C1,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const r=[this.getRequestUrlInternal(n)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===bm.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?s[r]=Object.assign(Object.assign({},s[r]),a):a!==void 0&&(s[r]=a);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,r){if(n&&n.timeout||r){const a=new AbortController,u=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>a.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&R1(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await X0(r),new xm(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await X0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Ni(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield Ve(r.read());if(m){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(v,{stream:!0});try{const N=JSON.parse(T);if("error"in N){const V=JSON.parse(JSON.stringify(N.error)),U=V.status,j=V.code,W=`got status: ${U}. ${JSON.stringify(N)}`;if(j>=400&&j<600)throw new Ql({message:W,status:j})}}catch(N){if(N.name==="ApiError")throw N}u+=T;let b=-1,C=0;for(;;){b=-1,C=0;for(const U of h){const j=u.indexOf(U);j!==-1&&(b===-1||j<b)&&(b=j,C=U.length)}if(b===-1)break;const N=u.substring(0,b);u=u.substring(b+C);const V=N.trim();if(V.startsWith(d)){const U=V.substring(d.length).trim();try{const j=new Response(U,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ve(new xm(j))}catch(j){throw new Error(`exception parsing stream chunk ${U}. ${j}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=x1+" "+this.clientOptions.userAgentExtra;return e[S1]=n,e[Im]=n,e[E1]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))s.append(r,a);e.timeout&&e.timeout>0&&s.append(T1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const d=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const h={file:r},m=this.getFileName(e),v=_e("upload/v1beta/files",h._url),T=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,h,n==null?void 0:n.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,n,s){var r;const a=this.clientOptions.uploader,u=await a.stat(n),d=String(u.size),h=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),T={};s!=null&&nS(s,T);const b=await this.fetchUploadUrl(m,d,h,v,T,s==null?void 0:s.httpOptions);return a.uploadToFileSearchStore(n,b,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,r,a,u){var d;let h={};u?h=u:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function X0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(s);throw n>=400&&n<600?new Ql({message:r,status:n}):new Error(r)}}function R1(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(a,u){const d=Object.assign({},a);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const m=u[h],v=d[h];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[h]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[h]=m)}return d}const r=s(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I1="mcp_used/unknown";let N1=!1;function iS(t){for(const e of t)if(M1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return N1}function sS(t){var e;const n=(e=t[Im])!==null&&e!==void 0?e:"";t[Im]=(n+` ${I1}`).trimStart()}function M1(t){return t!==null&&typeof t=="object"&&t instanceof hp}function D1(t){return Ni(this,arguments,function*(n,s=100){let r,a=0;for(;a<s;){const u=yield Ve(n.listTools({cursor:r}));for(const d of u.tools)yield yield Ve(d),a++;if(!u.nextCursor)break;r=u.nextCursor}})}class hp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new hp(e,n)}async initialize(){var e,n,s,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,h=(n=void 0,Mi(D1(v))),m;m=await h.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const T=r;u.push(T);const b=T.name;if(a[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);a[b]=v}}catch(T){n={error:T}}finally{try{!d&&!e&&(s=h.return)&&await s.call(h)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),aw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:s.name,arguments:s.args},void 0,a);n.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function P1(t,e,n){const s=new ZC;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(s,r),e(s)}class U1{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=L1(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),h=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(G=>{m=G}),T=e.callbacks,b=function(){m({})},C=this.apiClient,N={onopen:b,onmessage:G=>{P1(C,T.onmessage,G)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(G){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(G){}},V=this.webSocketFactory.create(h,V1(u),N);V.connect(),await v;const W={setup:{model:rt(this.apiClient,e.model)}};return V.send(JSON.stringify(W)),new k1(V,this.apiClient)}}class k1{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=rI(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=oI(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ga.PLAY)}pause(){this.sendPlaybackControl(ga.PAUSE)}stop(){this.sendPlaybackControl(ga.STOP)}resetContext(){this.sendPlaybackControl(ga.RESET_CONTEXT)}close(){this.conn.close()}}function V1(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function L1(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function B1(t,e,n){const s=new WC;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const u=uI(a);Object.assign(s,u)}else Object.assign(s,a);e(s)}class F1{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new U1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,r,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&iS(e.config.tools)&&sS(T);const b=z1(T);if(this.apiClient.isVertexAI()){const M=this.apiClient.getProject(),L=this.apiClient.getLocation(),B=this.apiClient.getApiKey(),z=!!M&&!!L||!!B;this.apiClient.getCustomBaseUrl()&&!z?v=h:(v=`${h}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b,v))}else{const M=this.apiClient.getApiKey();let L="BidiGenerateContent",B="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",B="access_token"),v=`${h}/ws/google.ai.generativelanguage.${m}.GenerativeService.${L}?${B}=${M}`}let C=()=>{};const N=new Promise(M=>{C=M}),V=e.callbacks,U=function(){var M;(M=V==null?void 0:V.onopen)===null||M===void 0||M.call(V),C({})},j=this.apiClient,W={onopen:U,onmessage:M=>{B1(j,V.onmessage,M)},onerror:(n=V==null?void 0:V.onerror)!==null&&n!==void 0?n:function(M){},onclose:(s=V==null?void 0:V.onclose)!==null&&s!==void 0?s:function(M){}},G=this.webSocketFactory.create(v,H1(b),W);G.connect(),await N;let Q=rt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Q.startsWith("publishers/")){const M=this.apiClient.getProject(),L=this.apiClient.getLocation();M&&L&&(Q=`projects/${M}/locations/${L}/`+Q)}let q={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ld.AUDIO]}:e.config.responseModalities=[ld.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const oe=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],D=[];for(const M of oe)if(this.isCallableTool(M)){const L=M;D.push(await L.tool())}else D.push(M);D.length>0&&(e.config.tools=D);const R={model:Q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=sI(this.apiClient,R):q=iI(this.apiClient,R),delete q.config,G.send(JSON.stringify(q)),new q1(G,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const G1={turnComplete:!0};class q1{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=_i(n.turns),e.isVertexAI()||(s=s.map(r=>Cd(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const a of s){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(O1)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},G1),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:lI(e)}:n={realtimeInput:aI(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function H1(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function z1(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W0=10;function Z0(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(_a(u)){r=!0;break}if(!r)return!0;const a=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function _a(t){return"callTool"in t&&typeof t.callTool=="function"}function j1(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>_a(r)))!==null&&s!==void 0?s:!1}function eE(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,r)=>{if(_a(s))return;const a=s;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(r)}),n}function tE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $1 extends Ns{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,r,a,u,d;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!j1(n)||Z0(n.config))return await this.generateContentInternal(h);const m=eE(n);if(m.length>0){const V=m.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let v,T;const b=_i(h.contents),C=(a=(r=(s=h.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:W0;let N=0;for(;N<C&&(v=await this.generateContentInternal(h),!(!v.functionCalls||v.functionCalls.length===0));){const V=v.candidates[0].content,U=[];for(const j of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(_a(j)){const G=await j.callTool(v.functionCalls);U.push(...G)}N++,T={role:"user",parts:U},h.contents=_i(h.contents),h.contents.push(V),h.contents.push(T),tE(h.config)&&(b.push(V),b.push(T))}return tE(h.config)&&(v.automaticFunctionCallingHistory=b),v},this.generateContentStream=async n=>{var s,r,a,u,d;if(this.maybeMoveToResponseJsonSchem(n),Z0(n.config)){const T=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(T)}const h=eE(n);if(h.length>0){const T=h.map(b=>`tools[${b}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(a=(r=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(d=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var r;let a;const u=[];if(s!=null&&s.generatedImages)for(const h of s.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((r=h==null?void 0:h.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:u.push(h);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async n=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new vr(Cs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var s,r,a,u,d,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((h=(d=n.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async h=>_a(h)?await h.tool():h)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&iS(e.config.tools)){const h=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},h);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),sS(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var n,s,r;const a=new Map;for(const u of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(_a(u)){const d=u,h=await d.tool();for(const m of(r=h.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,d)}}return a}async processAfcStream(e){var n,s,r;const a=(r=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:W0;let u=!1,d=0;const h=await this.initAfcToolsMap(e);return(function(m,v,T){return Ni(this,arguments,function*(){for(var b,C,N,V,U,j;d<a;){u&&(d++,u=!1);const q=yield Ve(m.processParamsMaybeAddMcpUsage(T)),oe=yield Ve(m.generateContentStreamInternal(q)),D=[],R=[];try{for(var W=!0,G=(C=void 0,Mi(oe)),Q;Q=yield Ve(G.next()),b=Q.done,!b;W=!0){V=Q.value,W=!1;const M=V;if(yield yield Ve(M),M.candidates&&(!((U=M.candidates[0])===null||U===void 0)&&U.content)){R.push(M.candidates[0].content);for(const L of(j=M.candidates[0].content.parts)!==null&&j!==void 0?j:[])if(d<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(L.functionCall.name)){const B=yield Ve(v.get(L.functionCall.name).callTool([L.functionCall]));D.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(M){C={error:M}}finally{try{!W&&!b&&(N=G.return)&&(yield Ve(N.call(G)))}finally{if(C)throw C.error}}if(D.length>0){u=!0;const M=new Pl;M.candidates=[{content:{role:"user",parts:D}}],yield yield Ve(M);const L=[];L.push(...R),L.push({role:"user",parts:D});const B=_i(T.contents).concat(L);T.contents=B}else break}})})(this,h,e)}async generateContentInternal(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=K0(this.apiClient,e);return d=_e("{model}:generateContent",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=Q0(v),b=new Pl;return Object.assign(b,T),b})}else{const m=Y0(this.apiClient,e);return d=_e("{model}:generateContent",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=J0(v),b=new Pl;return Object.assign(b,T),b})}}async generateContentStreamInternal(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=K0(this.apiClient,e);return d=_e("{model}:streamGenerateContent?alt=sse",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(T){return Ni(this,arguments,function*(){var b,C,N,V;try{for(var U=!0,j=Mi(T),W;W=yield Ve(j.next()),b=W.done,!b;U=!0){V=W.value,U=!1;const G=V,Q=Q0(yield Ve(G.json()),e);Q.sdkHttpResponse={headers:G.headers};const q=new Pl;Object.assign(q,Q),yield yield Ve(q)}}catch(G){C={error:G}}finally{try{!U&&!b&&(N=j.return)&&(yield Ve(N.call(j)))}finally{if(C)throw C.error}}})})}else{const m=Y0(this.apiClient,e);return d=_e("{model}:streamGenerateContent?alt=sse",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return Ni(this,arguments,function*(){var b,C,N,V;try{for(var U=!0,j=Mi(T),W;W=yield Ve(j.next()),b=W.done,!b;U=!0){V=W.value,U=!1;const G=V,Q=J0(yield Ve(G.json()),e);Q.sdkHttpResponse={headers:G.headers};const q=new Pl;Object.assign(q,Q),yield yield Ve(q)}}catch(G){C={error:G}}finally{try{!U&&!b&&(N=j.return)&&(yield Ve(N.call(j)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=FI(this.apiClient,e);return d=_e("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=qI(v),b=new N0;return Object.assign(b,T),b})}else{const m=BI(this.apiClient,e);return d=_e("{model}:batchEmbedContents",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=GI(v),b=new N0;return Object.assign(b,T),b})}}async generateImagesInternal(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=ZI(this.apiClient,e);return d=_e("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=tN(v),b=new M0;return Object.assign(b,T),b})}else{const m=WI(this.apiClient,e);return d=_e("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=eN(v),b=new M0;return Object.assign(b,T),b})}}async editImageInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=kI(this.apiClient,e);return a=_e("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),r.then(h=>{const m=VI(h),v=new FC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=ZN(this.apiClient,e);return a=_e("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),r.then(h=>{const m=e1(h),v=new GC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=UN(this.apiClient,e);return a=_e("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const m=kN(h),v=new qC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=GN(this.apiClient,e);return a=_e("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const m=qN(h),v=new HC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=vN(this.apiClient,e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Rm(v))}else{const m=yN(this.apiClient,e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>wm(v))}}async listInternal(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=wN(this.apiClient,e);return d=_e("{models_url}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=IN(v),b=new D0;return Object.assign(b,T),b})}else{const m=CN(this.apiClient,e);return d=_e("{models_url}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=RN(v),b=new D0;return Object.assign(b,T),b})}}async update(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=XN(this.apiClient,e);return d=_e("{model}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Rm(v))}else{const m=QN(this.apiClient,e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>wm(v))}}async delete(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=MI(this.apiClient,e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=PI(v),b=new P0;return Object.assign(b,T),b})}else{const m=NI(this.apiClient,e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=DI(v),b=new P0;return Object.assign(b,T),b})}}async countTokens(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=wI(this.apiClient,e);return d=_e("{model}:countTokens",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=II(v),b=new U0;return Object.assign(b,T),b})}else{const m=CI(this.apiClient,e);return d=_e("{model}:countTokens",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=RI(v),b=new U0;return Object.assign(b,T),b})}}async computeTokens(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=_I(this.apiClient,e);return a=_e("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),r.then(h=>{const m=EI(h),v=new zC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=aN(this.apiClient,e);return d=_e("{model}:predictLongRunning",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const T=oN(v),b=new ud;return Object.assign(b,T),b})}else{const m=rN(this.apiClient,e);return d=_e("{model}:predictLongRunning",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const T=sN(v),b=new ud;return Object.assign(b,T),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y1 extends Ns{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=UC(e);return d=_e("{operationName}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const m=PC(e);return d=_e("{operationName}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=CC(e);return a=_e("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K1(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function J1(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>sM(a))),p(e,["parts"],r)}const s=f(t,["role"]);return s!=null&&p(e,["role"],s),e}function Q1(t,e,n){const s={},r=f(e,["expireTime"]);n!==void 0&&r!=null&&p(n,["expireTime"],r);const a=f(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&p(n,["newSessionExpireTime"],a);const u=f(e,["uses"]);n!==void 0&&u!=null&&p(n,["uses"],u);const d=f(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&p(n,["bidiGenerateContentSetup"],iM(t,d));const h=f(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&p(n,["fieldMask"],h),s}function X1(t,e){const n={},s=f(e,["config"]);return s!=null&&p(n,["config"],Q1(t,s,n)),n}function W1(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=f(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Z1(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const s=f(t,["args"]);s!=null&&p(e,["args"],s);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eM(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function tM(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function nM(t,e){const n={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=f(t,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],fp(T));const b=f(t,["thinkingConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","thinkingConfig"],b);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const N=f(t,["systemInstruction"]);e!==void 0&&N!=null&&p(e,["setup","systemInstruction"],J1(bn(N)));const V=f(t,["tools"]);if(e!==void 0&&V!=null){let oe=Na(V);Array.isArray(oe)&&(oe=oe.map(D=>rM(Ia(D)))),p(e,["setup","tools"],oe)}const U=f(t,["sessionResumption"]);e!==void 0&&U!=null&&p(e,["setup","sessionResumption"],oM(U));const j=f(t,["inputAudioTranscription"]);e!==void 0&&j!=null&&p(e,["setup","inputAudioTranscription"],j);const W=f(t,["outputAudioTranscription"]);e!==void 0&&W!=null&&p(e,["setup","outputAudioTranscription"],W);const G=f(t,["realtimeInputConfig"]);e!==void 0&&G!=null&&p(e,["setup","realtimeInputConfig"],G);const Q=f(t,["contextWindowCompression"]);e!==void 0&&Q!=null&&p(e,["setup","contextWindowCompression"],Q);const q=f(t,["proactivity"]);if(e!==void 0&&q!=null&&p(e,["setup","proactivity"],q),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function iM(t,e){const n={},s=f(e,["model"]);s!=null&&p(n,["setup","model"],rt(t,s));const r=f(e,["config"]);return r!=null&&p(n,["config"],nM(r,n)),n}function sM(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const s=f(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],W1(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],Z1(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(t,["inlineData"]);h!=null&&p(e,["inlineData"],K1(h));const m=f(t,["text"]);m!=null&&p(e,["text"],m);const v=f(t,["thought"]);v!=null&&p(e,["thought"],v);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const b=f(t,["videoMetadata"]);return b!=null&&p(e,["videoMetadata"],b),e}function oM(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rM(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=f(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],eM(u));const d=f(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],tM(d));const h=f(t,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const m=f(t,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aM(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function lM(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const a=s.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=aM(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(m=>u.includes(m)?`generationConfig.${m}`:m));const h=[];a&&h.push(a),d.length>0&&h.push(...d),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class uM extends Ns{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=X1(this.apiClient,e);a=_e("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const h=lM(d,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cM(t,e){const n={},s=f(t,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),n}function dM(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const s=f(t,["config"]);return s!=null&&cM(s,e),e}function fM(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function hM(t,e){const n={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function mM(t){const e={},n=f(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const s=f(t,["config"]);return s!=null&&hM(s,e),e}function pM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=f(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(t,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gM extends Ns{constructor(e){super(),this.apiClient=e,this.list=async n=>new vr(Cs.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fM(e);return a=_e("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,s;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=dM(e);r=_e("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mM(e);return a=_e("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const m=pM(h),v=new jC;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yM extends Ns{constructor(e,n=new gM(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new vr(Cs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=a1(e);return a=_e("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=c1(e);return a=_e("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,s;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=u1(e);r=_e("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=g1(e);return a=_e("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const m=y1(h),v=new $C;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=v1(e);return a=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const m=_1(h),v=new YC;return Object.assign(v,m),v})}}async importFile(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=h1(e);return a=_e("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const m=f1(h),v=new ap;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oS=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return oS=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const vM=()=>oS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Mm=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ti extends Error{}class Dn extends Ti{constructor(e,n,s,r){super(`${Dn.makeMessage(e,n,s)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,s){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,s,r){if(!e||!r)return new Id({message:s,cause:Mm(n)});const a=n;return e===400?new aS(e,a,s,r):e===401?new lS(e,a,s,r):e===403?new uS(e,a,s,r):e===404?new cS(e,a,s,r):e===409?new dS(e,a,s,r):e===422?new fS(e,a,s,r):e===429?new hS(e,a,s,r):e>=500?new mS(e,a,s,r):new Dn(e,a,s,r)}}class Dm extends Dn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Id extends Dn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class rS extends Id{constructor({message:e}={}){super({message:e??"Request timed out."})}}class aS extends Dn{}class lS extends Dn{}class uS extends Dn{}class cS extends Dn{}class dS extends Dn{}class fS extends Dn{}class hS extends Dn{}class mS extends Dn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _M=/^[a-z][a-z0-9+.-]*:/i,EM=t=>_M.test(t);let Pm=t=>(Pm=Array.isArray,Pm(t));const TM=Pm;let SM=TM;const nE=SM;function bM(t){if(!t)return!0;for(const e in t)return!1;return!0}function xM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const AM=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ti(`${t} must be an integer`);if(e<0)throw new Ti(`${t} must be a positive integer`);return e},CM=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wM=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const da="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const IM=()=>{var t,e,n,s,r;const a=RM();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":da,"X-Stainless-OS":sE(Deno.build.os),"X-Stainless-Arch":iE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":da,"X-Stainless-OS":sE((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":iE((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=NM();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function NM(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const r=s[1]||0,a=s[2]||0,u=s[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const iE=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",sE=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Fc;const MM=()=>Fc??(Fc=IM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function pS(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function PM(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return pS({start(){},async pull(n){const{done:s,value:r}=await e.next();s?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function gS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function UM(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yS=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function nm(t,e,n){return yS(),new File(t,e??"unknown_file",n)}function VM(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const LM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vS=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",OM=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&vS(t),BM=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function FM(t,e,n){if(yS(),t=await t,OM(t))return t instanceof File?t:nm([await t.arrayBuffer()],t.name);if(BM(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),nm(await Um(r),e,n)}const s=await Um(t);if(e||(e=VM(t)),!(n!=null&&n.type)){const r=s.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return nm(s,e,n)}async function Um(t){var e,n,s,r,a;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(vS(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(LM(t))try{for(var d=!0,h=Mi(t),m;m=await h.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const v=r;u.push(...await Um(v))}}catch(v){n={error:v}}finally{try{!d&&!e&&(s=h.return)&&await s.call(h)}finally{if(n)throw n.error}}else{const v=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${GM(t)}`)}return u}function GM(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _S{constructor(e){this._client=e}}_S._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ES(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const oE=Object.freeze(Object.create(null)),qM=(t=ES)=>(function(n,...s){if(n.length===1)return n[0];let r=!1;const a=[],u=n.reduce((v,T,b)=>{var C,N,V;/[?#]/.test(T)&&(r=!0);const U=s[b];let j=(r?encodeURIComponent:t)(""+U);return b!==s.length&&(U==null||typeof U=="object"&&U.toString===((V=Object.getPrototypeOf((N=Object.getPrototypeOf((C=U.hasOwnProperty)!==null&&C!==void 0?C:oE))!==null&&N!==void 0?N:oE))===null||V===void 0?void 0:V.toString))&&(j=U+"",a.push({start:v.length+T.length,length:j.length,error:`Value of type ${Object.prototype.toString.call(U).slice(8,-1)} is not a valid path parameter`})),v+T+(b===s.length?"":j)},""),d=u.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=h.exec(d))!==null;)a.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(a.sort((v,T)=>v.start-T.start),a.length>0){let v=0;const T=a.reduce((b,C)=>{const N=" ".repeat(C.start-v),V="^".repeat(C.length);return v=C.start+C.length,b+N+V},"");throw new Ti(`Path parameters result in path with invalid segments:
${a.map(b=>b.error).join(`
`)}
${u}
${T}`)}return u}),Gc=qM(ES);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TS extends _S{create(e,n){var s;const{api_version:r=this._client.apiVersion}=e,a=dd(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Ti("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Ti("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Gc`/${r}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Gc`/${r}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Gc`/${r}/interactions/${e}/cancel`,s)}get(e,n={},s){var r;const a=n??{},{api_version:u=this._client.apiVersion}=a,d=dd(a,["api_version"]);return this._client.get(Gc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},s),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}TS._key=Object.freeze(["interactions"]);class SS extends TS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HM(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let s=0;for(const r of t)n.set(r,s),s+=r.length;return n}let qc;function mp(t){let e;return(qc??(e=new globalThis.TextEncoder,qc=e.encode.bind(e)))(t)}let Hc;function rE(t){let e;return(Hc??(e=new globalThis.TextDecoder,Hc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?mp(e):e;this.buffer=HM([this.buffer,n]);const s=[];let r;for(;(r=zM(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(rE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=rE(this.buffer.subarray(0,a));s.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Nd.NEWLINE_CHARS=new Set([`
`,"\r"]);Nd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function zM(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function jM(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fd={off:0,error:200,warn:300,info:400,debug:500},aE=(t,e,n)=>{if(t){if(xM(fd,t))return t;Mn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(fd))}`)}};function Bl(){}function zc(t,e,n){return!e||fd[t]>fd[n]?Bl:e[t].bind(e)}const $M={error:Bl,warn:Bl,info:Bl,debug:Bl};let lE=new WeakMap;function Mn(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return $M;const r=lE.get(n);if(r&&r[0]===s)return r[1];const a={error:zc("error",n,s),warn:zc("warn",n,s),info:zc("info",n,s),debug:zc("debug",n,s)};return lE.set(n,[s,a]),a}const lr=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ya{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let r=!1;const a=s?Mn(s):console;function u(){return Ni(this,arguments,function*(){var h,m,v,T;if(r)throw new Ti("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let b=!1;try{try{for(var C=!0,N=Mi(YM(e,n)),V;V=yield Ve(N.next()),h=V.done,!h;C=!0){T=V.value,C=!1;const U=T;if(!b)if(U.data.startsWith("[DONE]")){b=!0;continue}else try{yield yield Ve(JSON.parse(U.data))}catch(j){throw a.error("Could not parse message into JSON:",U.data),a.error("From chunk:",U.raw),j}}}catch(U){m={error:U}}finally{try{!C&&!h&&(v=N.return)&&(yield Ve(v.call(N)))}finally{if(m)throw m.error}}b=!0}catch(U){if(Nm(U))return yield Ve(void 0);throw U}finally{b||n.abort()}})}return new ya(u,n,s)}static fromReadableStream(e,n,s){let r=!1;function a(){return Ni(this,arguments,function*(){var h,m,v,T;const b=new Nd,C=gS(e);try{for(var N=!0,V=Mi(C),U;U=yield Ve(V.next()),h=U.done,!h;N=!0){T=U.value,N=!1;const j=T;for(const W of b.decode(j))yield yield Ve(W)}}catch(j){m={error:j}}finally{try{!N&&!h&&(v=V.return)&&(yield Ve(v.call(V)))}finally{if(m)throw m.error}}for(const j of b.flush())yield yield Ve(j)})}function u(){return Ni(this,arguments,function*(){var h,m,v,T;if(r)throw new Ti("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let b=!1;try{try{for(var C=!0,N=Mi(a()),V;V=yield Ve(N.next()),h=V.done,!h;C=!0){T=V.value,C=!1;const U=T;b||U&&(yield yield Ve(JSON.parse(U)))}}catch(U){m={error:U}}finally{try{!C&&!h&&(v=N.return)&&(yield Ve(v.call(N)))}finally{if(m)throw m.error}}b=!0}catch(U){if(Nm(U))return yield Ve(void 0);throw U}finally{b||n.abort()}})}return new ya(u,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=s.next();e.push(u),n.push(u)}return a.shift()}});return[new ya(()=>r(e),this.controller,this.client),new ya(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return pS({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:a}=await n.next();if(a)return s.close();const u=mp(JSON.stringify(r)+`
`);s.enqueue(u)}catch(r){s.error(r)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function YM(t,e){return Ni(this,arguments,function*(){var s,r,a,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ti("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ti("Attempted to iterate over a response with no body");const d=new JM,h=new Nd,m=gS(t.body);try{for(var v=!0,T=Mi(KM(m)),b;b=yield Ve(T.next()),s=b.done,!s;v=!0){u=b.value,v=!1;const C=u;for(const N of h.decode(C)){const V=d.decode(N);V&&(yield yield Ve(V))}}}catch(C){r={error:C}}finally{try{!v&&!s&&(a=T.return)&&(yield Ve(a.call(T)))}finally{if(r)throw r.error}}for(const C of h.flush()){const N=d.decode(C);N&&(yield yield Ve(N))}})}function KM(t){return Ni(this,arguments,function*(){var n,s,r,a;let u=new Uint8Array;try{for(var d=!0,h=Mi(t),m;m=yield Ve(h.next()),n=m.done,!n;d=!0){a=m.value,d=!1;const v=a;if(v==null)continue;const T=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?mp(v):v;let b=new Uint8Array(u.length+T.length);b.set(u),b.set(T,u.length),u=b;let C;for(;(C=jM(u))!==-1;)yield yield Ve(u.slice(0,C)),u=u.slice(C)}}catch(v){s={error:v}}finally{try{!d&&!n&&(r=h.return)&&(yield Ve(r.call(h)))}finally{if(s)throw s.error}}u.length>0&&(yield yield Ve(u))})}class JM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,r]=QM(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function QM(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function XM(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return Mn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ya.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type"),m=(d=h==null?void 0:h.split(";")[0])===null||d===void 0?void 0:d.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return Mn(t).debug(`[${s}] response parsed`,lr({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pp extends Promise{constructor(e,n,s=XM){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new pp(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bS=Symbol("brand.privateNullableHeaders");function*WM(t){if(!t)return;if(bS in t){const{values:s,nulls:r}=t;yield*s.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():nE(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=nE(s[1])?s[1]:[s[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const Ul=t=>{const e=new Headers,n=new Set;for(const s of t){const r=new Set;for(const[a,u]of WM(s)){const d=a.toLowerCase();r.has(d)||(e.delete(a),r.add(d)),u===null?(e.delete(a),n.add(d)):(e.append(a,u),n.delete(d))}}return{[bS]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const im=t=>{var e,n,s,r,a,u;if(typeof globalThis.process<"u")return(s=(n=(e=EC)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xS;class Md{constructor(e){var n,s,r,a,u,d,h,{baseURL:m=im("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=im("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:T="v1beta"}=e,b=dd(e,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:v,apiVersion:T},b),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(s=C.timeout)!==null&&s!==void 0?s:Md.DEFAULT_TIMEOUT,this.logger=(r=C.logger)!==null&&r!==void 0?r:console;const N="warn";this.logLevel=N,this.logLevel=(u=(a=aE(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:aE(im("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:N,this.fetchOptions=C.fetchOptions,this.maxRetries=(d=C.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(h=C.fetch)!==null&&h!==void 0?h:DM(),this.encoder=kM,this._options=C,this.apiKey=v,this.apiVersion=T,this.clientAdapter=C.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Ul([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ul([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ul([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new Ti(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${da}`}defaultIdempotencyKey(){return`stainless-node-retry-${vM()}`}makeStatusError(e,n,s,r){return Dn.generate(e,n,s,r)}buildURL(e,n,s){const r=!this.baseURLOverridden()&&s||this.baseURL,a=EM(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return bM(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new pp(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var r,a,u;const d=await e,h=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=h),await this.prepareOptions(d);const{req:m,url:v,timeout:T}=await this.buildRequest(d,{retryCount:h-n});await this.prepareRequest(m,{url:v,options:d});const b="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=s===void 0?"":`, retryOf: ${s}`,N=Date.now();if(Mn(this).debug(`[${b}] sending request`,lr({retryOfRequestLogID:s,method:d.method,url:v,options:d,headers:m.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new Dm;const V=new AbortController,U=await this.fetchWithTimeout(v,m,T,V).catch(Mm),j=Date.now();if(U instanceof globalThis.Error){const G=`retrying, ${n} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Dm;const Q=Nm(U)||/timed? ?out/i.test(String(U)+("cause"in U?String(U.cause):""));if(n)return Mn(this).info(`[${b}] connection ${Q?"timed out":"failed"} - ${G}`),Mn(this).debug(`[${b}] connection ${Q?"timed out":"failed"} (${G})`,lr({retryOfRequestLogID:s,url:v,durationMs:j-N,message:U.message})),this.retryRequest(d,n,s??b);throw Mn(this).info(`[${b}] connection ${Q?"timed out":"failed"} - error; no more retries left`),Mn(this).debug(`[${b}] connection ${Q?"timed out":"failed"} (error; no more retries left)`,lr({retryOfRequestLogID:s,url:v,durationMs:j-N,message:U.message})),Q?new rS:new Id({cause:U})}const W=`[${b}${C}] ${m.method} ${v} ${U.ok?"succeeded":"failed"} with status ${U.status} in ${j-N}ms`;if(!U.ok){const G=await this.shouldRetry(U);if(n&&G){const M=`retrying, ${n} attempts remaining`;return await UM(U.body),Mn(this).info(`${W} - ${M}`),Mn(this).debug(`[${b}] response error (${M})`,lr({retryOfRequestLogID:s,url:U.url,status:U.status,headers:U.headers,durationMs:j-N})),this.retryRequest(d,n,s??b,U.headers)}const Q=G?"error; no more retries left":"error; not retryable";Mn(this).info(`${W} - ${Q}`);const q=await U.text().catch(M=>Mm(M).message),oe=CM(q),D=oe?void 0:q;throw Mn(this).debug(`[${b}] response error (${Q})`,lr({retryOfRequestLogID:s,url:U.url,status:U.status,headers:U.headers,message:D,durationMs:Date.now()-N})),this.makeStatusError(U.status,oe,D,U.headers)}return Mn(this).info(W),Mn(this).debug(`[${b}] response start`,lr({retryOfRequestLogID:s,url:U.url,status:U.status,headers:U.headers,durationMs:j-N})),{response:U,options:d,controller:V,requestLogID:b,retryOfRequestLogID:s,startTime:N}}async fetchWithTimeout(e,n,s,r){const a=n||{},{signal:u,method:d}=a,h=dd(a,["signal","method"]),m=r.abort.bind(r);u&&u.addEventListener("abort",m,{once:!0});const v=setTimeout(m,s),T=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},T?{duplex:"half"}:{}),{method:"GET"}),h);d&&(b.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(v)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,r){var a;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(u=m)}const h=r==null?void 0:r.get("retry-after");if(h&&!u){const m=parseFloat(h);Number.isNaN(m)?u=Date.parse(h)-Date.now():u=m*1e3}if(!(u&&0<=u&&u<60*1e3)){const m=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,m)}return await wM(u),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,r,a;const u=Object.assign({},e),{method:d,path:h,query:m,defaultBaseURL:v}=u,T=this.buildURL(h,m,v);"timeout"in u&&AM("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:b,body:C}=this.buildBody({options:u}),N=await this.buildHeaders({options:e,method:d,bodyHeaders:b,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:N},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Ul([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),MM()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Ul([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:PM(e)}:this.encoder({body:e,headers:s})}}Md.DEFAULT_TIMEOUT=6e4;class nn extends Md{constructor(){super(...arguments),this.interactions=new SS(this)}}xS=nn;nn.GeminiNextGenAPIClient=xS;nn.GeminiNextGenAPIClientError=Ti;nn.APIError=Dn;nn.APIConnectionError=Id;nn.APIConnectionTimeoutError=rS;nn.APIUserAbortError=Dm;nn.NotFoundError=cS;nn.ConflictError=dS;nn.RateLimitError=hS;nn.BadRequestError=aS;nn.AuthenticationError=lS;nn.InternalServerError=mS;nn.PermissionDeniedError=uS;nn.UnprocessableEntityError=fS;nn.toFile=FM;nn.Interactions=SS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZM(t,e){const n={},s=f(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function eD(t,e){const n={},s=f(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function tD(t,e){const n={},s=f(t,["sdkHttpResponse"]);return s!=null&&p(n,["sdkHttpResponse"],s),n}function nD(t,e){const n={},s=f(t,["sdkHttpResponse"]);return s!=null&&p(n,["sdkHttpResponse"],s),n}function iD(t,e,n){const s={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(t,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(t,["learningRateMultiplier"]);if(u!=null&&p(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const h=f(t,["learningRate"]);if(e!==void 0&&h!=null&&p(e,["tuningTask","hyperparameters","learningRate"],h),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return s}function sD(t,e,n){const s={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const q=f(t,["validationDataset"]);e!==void 0&&q!=null&&p(e,["supervisedTuningSpec"],sm(q))}else if(r==="PREFERENCE_TUNING"){const q=f(t,["validationDataset"]);e!==void 0&&q!=null&&p(e,["preferenceOptimizationSpec"],sm(q))}else if(r==="DISTILLATION"){const q=f(t,["validationDataset"]);e!==void 0&&q!=null&&p(e,["distillationSpec"],sm(q))}const a=f(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=f(t,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=f(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const q=f(t,["epochCount"]);e!==void 0&&q!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],q)}else if(d==="PREFERENCE_TUNING"){const q=f(t,["epochCount"]);e!==void 0&&q!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],q)}else if(d==="DISTILLATION"){const q=f(t,["epochCount"]);e!==void 0&&q!=null&&p(e,["distillationSpec","hyperParameters","epochCount"],q)}let h=f(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const q=f(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],q)}else if(h==="PREFERENCE_TUNING"){const q=f(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],q)}else if(h==="DISTILLATION"){const q=f(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&p(e,["distillationSpec","hyperParameters","learningRateMultiplier"],q)}let m=f(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const q=f(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],q)}else if(m==="PREFERENCE_TUNING"){const q=f(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],q)}else if(m==="DISTILLATION"){const q=f(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&p(e,["distillationSpec","exportLastCheckpointOnly"],q)}let v=f(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const q=f(t,["adapterSize"]);e!==void 0&&q!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],q)}else if(v==="PREFERENCE_TUNING"){const q=f(t,["adapterSize"]);e!==void 0&&q!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],q)}else if(v==="DISTILLATION"){const q=f(t,["adapterSize"]);e!==void 0&&q!=null&&p(e,["distillationSpec","hyperParameters","adapterSize"],q)}let T=f(n,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const q=f(t,["tuningMode"]);e!==void 0&&q!=null&&p(e,["supervisedTuningSpec","tuningMode"],q)}const b=f(t,["customBaseModel"]);e!==void 0&&b!=null&&p(e,["customBaseModel"],b);let C=f(n,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const q=f(t,["batchSize"]);e!==void 0&&q!=null&&p(e,["supervisedTuningSpec","hyperParameters","batchSize"],q)}let N=f(n,["config","method"]);if(N===void 0&&(N="SUPERVISED_FINE_TUNING"),N==="SUPERVISED_FINE_TUNING"){const q=f(t,["learningRate"]);e!==void 0&&q!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRate"],q)}const V=f(t,["labels"]);e!==void 0&&V!=null&&p(e,["labels"],V);const U=f(t,["beta"]);e!==void 0&&U!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],U);const j=f(t,["baseTeacherModel"]);e!==void 0&&j!=null&&p(e,["distillationSpec","baseTeacherModel"],j);const W=f(t,["tunedTeacherModelSource"]);e!==void 0&&W!=null&&p(e,["distillationSpec","tunedTeacherModelSource"],W);const G=f(t,["sftLossWeightMultiplier"]);e!==void 0&&G!=null&&p(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],G);const Q=f(t,["outputUri"]);return e!==void 0&&Q!=null&&p(e,["outputUri"],Q),s}function oD(t,e){const n={},s=f(t,["baseModel"]);s!=null&&p(n,["baseModel"],s);const r=f(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const a=f(t,["trainingDataset"]);a!=null&&gD(a);const u=f(t,["config"]);return u!=null&&iD(u,n),n}function rD(t,e){const n={},s=f(t,["baseModel"]);s!=null&&p(n,["baseModel"],s);const r=f(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const a=f(t,["trainingDataset"]);a!=null&&yD(a,n,e);const u=f(t,["config"]);return u!=null&&sD(u,n,e),n}function aD(t,e){const n={},s=f(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function lD(t,e){const n={},s=f(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function uD(t,e,n){const s={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),s}function cD(t,e,n){const s={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),s}function dD(t,e){const n={},s=f(t,["config"]);return s!=null&&uD(s,n),n}function fD(t,e){const n={},s=f(t,["config"]);return s!=null&&cD(s,n),n}function hD(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const a=f(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>AS(d))),p(n,["tuningJobs"],u)}return n}function mD(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const a=f(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>km(d))),p(n,["tuningJobs"],u)}return n}function pD(t,e){const n={},s=f(t,["name"]);s!=null&&p(n,["model"],s);const r=f(t,["name"]);return r!=null&&p(n,["endpoint"],r),n}function gD(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(t,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),p(n,["examples","examples"],r)}return n}function yD(t,e,n){const s={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}let a=f(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function AS(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const a=f(t,["state"]);a!=null&&p(n,["state"],GT(a));const u=f(t,["createTime"]);u!=null&&p(n,["createTime"],u);const d=f(t,["tuningTask","startTime"]);d!=null&&p(n,["startTime"],d);const h=f(t,["tuningTask","completeTime"]);h!=null&&p(n,["endTime"],h);const m=f(t,["updateTime"]);m!=null&&p(n,["updateTime"],m);const v=f(t,["description"]);v!=null&&p(n,["description"],v);const T=f(t,["baseModel"]);T!=null&&p(n,["baseModel"],T);const b=f(t,["_self"]);return b!=null&&p(n,["tunedModel"],pD(b)),n}function km(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const a=f(t,["state"]);a!=null&&p(n,["state"],GT(a));const u=f(t,["createTime"]);u!=null&&p(n,["createTime"],u);const d=f(t,["startTime"]);d!=null&&p(n,["startTime"],d);const h=f(t,["endTime"]);h!=null&&p(n,["endTime"],h);const m=f(t,["updateTime"]);m!=null&&p(n,["updateTime"],m);const v=f(t,["error"]);v!=null&&p(n,["error"],v);const T=f(t,["description"]);T!=null&&p(n,["description"],T);const b=f(t,["baseModel"]);b!=null&&p(n,["baseModel"],b);const C=f(t,["tunedModel"]);C!=null&&p(n,["tunedModel"],C);const N=f(t,["preTunedModel"]);N!=null&&p(n,["preTunedModel"],N);const V=f(t,["supervisedTuningSpec"]);V!=null&&p(n,["supervisedTuningSpec"],V);const U=f(t,["preferenceOptimizationSpec"]);U!=null&&p(n,["preferenceOptimizationSpec"],U);const j=f(t,["distillationSpec"]);j!=null&&p(n,["distillationSpec"],j);const W=f(t,["tuningDataStats"]);W!=null&&p(n,["tuningDataStats"],W);const G=f(t,["encryptionSpec"]);G!=null&&p(n,["encryptionSpec"],G);const Q=f(t,["partnerModelTuningSpec"]);Q!=null&&p(n,["partnerModelTuningSpec"],Q);const q=f(t,["customBaseModel"]);q!=null&&p(n,["customBaseModel"],q);const oe=f(t,["experiment"]);oe!=null&&p(n,["experiment"],oe);const D=f(t,["labels"]);D!=null&&p(n,["labels"],D);const R=f(t,["outputUri"]);R!=null&&p(n,["outputUri"],R);const M=f(t,["pipelineJob"]);M!=null&&p(n,["pipelineJob"],M);const L=f(t,["serviceAccount"]);L!=null&&p(n,["serviceAccount"],L);const B=f(t,["tunedModelDisplayName"]);B!=null&&p(n,["tunedModelDisplayName"],B);const z=f(t,["veoTuningSpec"]);return z!=null&&p(n,["veoTuningSpec"],z),n}function vD(t,e){const n={},s=f(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const a=f(t,["metadata"]);a!=null&&p(n,["metadata"],a);const u=f(t,["done"]);u!=null&&p(n,["done"],u);const d=f(t,["error"]);return d!=null&&p(n,["error"],d),n}function sm(t,e){const n={},s=f(t,["gcsUri"]);s!=null&&p(n,["validationDatasetUri"],s);const r=f(t,["vertexDatasetResource"]);return r!=null&&p(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _D extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vr(Cs.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Sm.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=lD(e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>km(v))}else{const m=aD(e);return d=_e("{name}",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>AS(v))}}async listInternal(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=fD(e);return d=_e("tuningJobs",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=mD(v),b=new k0;return Object.assign(b,T),b})}else{const m=dD(e);return d=_e("tunedModels",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=hD(v),b=new k0;return Object.assign(b,T),b})}}async cancel(e){var n,s,r,a;let u,d="",h={};if(this.apiClient.isVertexAI()){const m=eD(e);return d=_e("{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=nD(v),b=new V0;return Object.assign(b,T),b})}else{const m=ZM(e);return d=_e("{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const b=T;return b.sdkHttpResponse={headers:v.headers},b})),u.then(v=>{const T=tD(v),b=new V0;return Object.assign(b,T),b})}}async tuneInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=rD(e,e);return a=_e("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),r.then(h=>km(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oD(e);return a=_e("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),r.then(h=>vD(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ED{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const TD=1024*1024*8,SD=3,bD=1e3,xD=2,hd="x-goog-upload-status";async function AD(t,e,n){var s;const r=await CS(t,e,n),a=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[hd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function CD(t,e,n){var s;const r=await CS(t,e,n),a=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[hd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=kT(a),d=new lp;return Object.assign(d,u),d}async function CS(t,e,n){var s,r;let a=0,u=0,d=new xm(new Response),h="upload";for(a=t.size;u<a;){const m=Math.min(TD,a-u),v=t.slice(u,u+m);u+m>=a&&(h+=", finalize");let T=0,b=bD;for(;T<SD&&(d=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[hd]));)T++,await RD(b),b=b*xD;if(u+=m,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[hd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function wD(t){return{size:t.size,type:t.type}}function RD(t){return new Promise(e=>setTimeout(e,t))}class ID{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AD(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await CD(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ND{create(e,n,s){return new MD(e,n,s)}}class MD{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uE="x-goog-api-key";class DD{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(uE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(uE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PD="gl-node/";class gp{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new nn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=xC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new DD(this.apiKey);this.apiClient=new w1({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:PD+"web",uploader:new ID,downloader:new ED}),this.models=new $1(this.apiClient),this.live=new F1(this.apiClient,r,new ND),this.batches=new eR(this.apiClient),this.chats=new kR(this.models,this.apiClient),this.caches=new DR(this.apiClient),this.files=new YR(this.apiClient),this.operations=new Y1(this.apiClient),this.authTokens=new uM(this.apiClient),this.tunings=new _D(this.apiClient),this.fileSearchStores=new yM(this.apiClient)}}const cE=t=>{const e={:"",:"",sunday:"",sun:"",:"",:"",:"",monday:"",mon:"",:"",:"",thursday:"",tue:"",tues:"",:"",:"",:"",wed:"",:"",:"",thu:"",thurs:"",:"",fri:"",:"",sat:""},n={Math:{name:"",color:"bg-blue-100 text-blue-800",icon:"",keywords:["","","","","math",""]},Science:{name:"",color:"bg-green-100 text-green-800",icon:"",keywords:["","","kimya","science","physics","chemistry","biology","","",""]},Arabic:{name:" ",color:"bg-emerald-100 text-emerald-800",icon:"",keywords:[""," ","arabic","",""," "," "]},English:{name:" ",color:"bg-red-100 text-red-800",icon:"",keywords:["","","english",""]},Social:{name:" ",color:"bg-yellow-100 text-yellow-800",icon:"",keywords:["","","","social","history"]},Religion:{name:" ",color:"bg-purple-100 text-purple-800",icon:"",keywords:[""," ","islamic","quran",""]},Art:{name:" ",color:"bg-pink-100 text-pink-800",icon:"",keywords:["","art",""]},Sport:{name:" ",color:"bg-orange-100 text-orange-800",icon:"",keywords:["","","sport","pe"]}},s=[],r=h=>{let m=s.find(v=>v.day===h);return m||(m={day:h,slots:[]},s.push(m)),m};t.replace(//g," ").replace(/-/g," ").replace(/_/g," ").replace(/ /g,"  ").replace(/\s+/g," ");const a=t.split(/\n|\.|/).map(h=>h.trim()).filter(h=>h.length>2);let u=" ",d={color:"bg-gray-100 text-gray-800",icon:""};for(const h of a){let m="",v=null;for(const[C,N]of Object.entries(n))if(N.keywords.some(V=>h.toLowerCase().includes(V))){m=N.name,v=N;break}const T=/\d/.test(h),b=Object.keys(e).some(C=>h.includes(C));if(m&&!T&&!b){u=m,d=v;continue}if(b){let C=u,N=d;m&&(C=m,N=v);const V=[];for(const[G,Q]of Object.entries(e)){const q=new RegExp(G,"gi");let oe;for(;(oe=q.exec(h))!==null;)V.some(D=>D.index===oe.index)||V.push({day:Q,index:oe.index})}V.sort((G,Q)=>G.index-Q.index);const U=[],j=/(\d{1,2})(:\d{2})?\s*(||pm|am||)?|\s*(\d{1,2})/gi;let W;for(;(W=j.exec(h))!==null;){let G=W[0],Q=W[1]||W[4],q=parseInt(Q);if(q){let oe="";G.match(/|pm||PM/i)||q>=12&&q<=6||q>=1&&q<=6?oe="":q>=7&&q<=11&&(oe="");let D=`${q}:00 ${oe}`;U.push({time:D,index:W.index,raw:G})}}V.length>0&&(U.length===1?V.forEach(G=>{r(G.day).slots.push({id:`s-${Math.random()}`,subject:C,time:U[0].time,color:N.color,icon:N.icon})}):U.length>1&&V.forEach((G,Q)=>{var R;const q=((R=V[Q+1])==null?void 0:R.index)??1/0,D=U.find(M=>M.index>G.index&&M.index<q)||U[U.length-1];D&&r(G.day).slots.push({id:`s-${Math.random()}`,subject:C,time:D.time,color:N.color,icon:N.icon})}))}}return s.length===0&&t.trim()&&s.push({day:"",slots:[{id:`s-${Math.random()}`,subject:t.trim().substring(0,30),time:"09:00 ",color:"bg-blue-100 text-blue-800",icon:""}]}),s},wS=async(t,e)=>{try{const n=await fetch("/api/anthropic/v1/messages",{method:"POST",headers:{"x-api-key":e,"anthropic-version":"2023-06-01","content-type":"application/json"},body:JSON.stringify({model:"claude-3-5-sonnet-20240620",max_tokens:4096,messages:[{role:"user",content:t}]})});if(!n.ok){const r=await n.text();throw new Error(`Claude API Error: ${r}`)}return(await n.json()).content[0].text}catch(n){throw console.error("Claude API Request Failed:",n),n}},dE=async(t,e,n="gemini")=>{try{const s=e||void 0;if(!s)return console.warn("API Key missing, using Smart Context Regex parser."),cE(t);const r={Math:{name:"",color:"bg-blue-100 text-blue-800",icon:"",keywords:["","","","","math",""]},Science:{name:"",color:"bg-green-100 text-green-800",icon:"",keywords:["","","kimya","science","physics","chemistry","biology","","",""]},Arabic:{name:" ",color:"bg-emerald-100 text-emerald-800",icon:"",keywords:[""," ","arabic","",""," "," "]},English:{name:" ",color:"bg-red-100 text-red-800",icon:"",keywords:["","","english",""]},Social:{name:" ",color:"bg-yellow-100 text-yellow-800",icon:"",keywords:["","","","social","history"]},Religion:{name:" ",color:"bg-purple-100 text-purple-800",icon:"",keywords:[""," ","islamic","quran",""]},Art:{name:" ",color:"bg-pink-100 text-pink-800",icon:"",keywords:["","art",""]},Sport:{name:" ",color:"bg-orange-100 text-orange-800",icon:"",keywords:["","","sport","pe"]}},a="gemini-1.5-flash",u=`
           .     " "   JSON  .
      
       :
      1. :  (day)  (subject)  (time).
      2.   :   (      )  .
      3.  :            .
      4.  :    (: "" -> "").
      5. :      JSON    .
      
        :
      [{"day": "", "subject": " ", "time": "04:00 "}, ...]

       :
      "${t}"
    `;let d="";if(n==="claude"?d=await wS(u,s):d=(await new gp({apiKey:s}).models.generateContent({model:a,contents:[{role:"user",parts:[{text:u}]}],config:{responseMimeType:"application/json"}})).text||"",!d)throw new Error("Empty response from AI");const h=JSON.parse(d),m=[],v={};return h.forEach(T=>{v[T.day]||(v[T.day]={day:T.day,slots:[]},m.push(v[T.day]));let b={color:"bg-gray-100 text-gray-800",icon:""};for(const C of Object.values(r))if(C.keywords.some(N=>T.subject.includes(N)||C.name.includes(T.subject))){b=C,!T.subject.includes(C.name)&&C.name.includes(T.subject)&&(T.subject=C.name);break}v[T.day].slots.push({id:`s-${Math.random().toString(36).substr(2,9)}`,subject:T.subject,time:T.time,color:b.color,icon:b.icon})}),m}catch(s){return console.error("AI Schedule Parsing Error:",s),cE(t)}},fE=t=>{const e=[],n=t.split(/\n|,|/).map(r=>r.trim()).filter(r=>r.length>5),s={:" "," ":" ",:"",:"",:"",:"",:" ",english:" ",:" ",:" "};return n.forEach(r=>{const a=r.match(/(|||\/)\s*([\u0600-\u06FF\s]+)/)||[null,"",r.split(" ").slice(0,2).join(" ")];let u=a[2]||a[0]||" ",d=" ";for(const[v,T]of Object.entries(s))if(r.includes(v)){d=T;break}const m=["","","","","","",""].filter(v=>r.includes(v)).join(" ");u.length>3&&e.push({id:`t-${Math.random()}`,name:u.trim(),subject:d,availability:m||"  ",bio:"     ( )",imageUrl:`https://picsum.photos/seed/${Math.random()}/400`,grades:[]})}),e},UD=async(t,e,n="gemini")=>{try{const s=e||void 0;if(!s)return console.warn("API Key is missing, using Offline Regex Parser."),fE(t);const r=`         JSON.
      : "${t}"
      
        ( ):
      - name:  .
      - subject:  ().
      - bio:   ().
      - availability:   ().
      - teachingHours:   ().
      - grades:   ().
      - imageUrl:   .
      - id:  .
      
      Output ONLY JSON array.`;let a="";return n==="claude"?a=await wS(r,s):a=(await new gp({apiKey:s}).models.generateContent({model:"gemini-1.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:$t.ARRAY,items:{type:$t.OBJECT,properties:{id:{type:$t.STRING},name:{type:$t.STRING},subject:{type:$t.STRING},bio:{type:$t.STRING},availability:{type:$t.STRING},teachingHours:{type:$t.STRING},grades:{type:$t.ARRAY,items:{type:$t.STRING}},imageUrl:{type:$t.STRING}},required:["id","name","subject","bio","availability","teachingHours","grades","imageUrl"]}}}})).text||"[]",JSON.parse(a.trim())}catch(s){return console.error("AI Teacher Parsing Error:",s),fE(t)}};class kD{constructor(e="ar-EG"){this.supported=!1,this.isListening=!1,this.lang=e;const n=window.SpeechRecognition||window.webkitSpeechRecognition;this.synth=window.speechSynthesis,n?(this.recognition=new n,this.recognition.lang=e,this.recognition.interimResults=!1,this.recognition.maxAlternatives=1,this.recognition.continuous=!1,this.supported=!0,console.log(" Speech Recognition initialized:",{lang:e,supported:this.supported,browser:navigator.userAgent.includes("Chrome")?"Chrome":"Other"})):(console.error(" Speech Recognition not supported in this browser."),console.warn(" Try using Chrome or Edge for best results"),this.supported=!1)}listen(){return new Promise((e,n)=>{var s;if(!this.supported)return console.error(" Browser not supported"),n("     .  Chrome  Edge");if(this.isListening){console.warn(" Already listening, stopping previous instance");try{this.recognition.stop()}catch{}this.isListening=!1}(s=navigator.mediaDevices)==null||s.getUserMedia({audio:!0}).then(()=>{console.log(" Microphone permission granted"),this.startRecognition(e,n)}).catch(r=>{console.error(" Microphone permission denied:",r),n("       ")})})}startRecognition(e,n){try{this.isListening=!0,console.log(" Starting speech recognition..."),this.recognition.start();const s=setTimeout(()=>{this.isListening&&(console.warn(" Recognition timeout"),this.recognition.stop(),this.isListening=!1,n("timeout"))},1e4);this.recognition.onresult=r=>{clearTimeout(s);const a=r.results[0][0].transcript,u=r.results[0][0].confidence;console.log(" Recognized:",{text:a,confidence:(u*100).toFixed(1)+"%"}),this.isListening=!1,e(a)},this.recognition.onerror=r=>{clearTimeout(s),this.isListening=!1,console.error(" Recognition error:",r.error);const u={"no-speech":"  .    ","audio-capture":"      ","not-allowed":"     ",network:"  .   ",aborted:"  ","language-not-supported":"     .  Chrome"}[r.error]||" .   ";n(u)},this.recognition.onend=()=>{console.log(" Recognition ended"),this.isListening=!1},this.recognition.onstart=()=>{console.log(" Recognition started - speak now!")}}catch(s){this.isListening=!1,console.error(" Failed to start recognition:",s),n("  .  ")}}say(e){return new Promise((n,s)=>{if(!this.synth)return console.warn(" Speech synthesis not available"),n();this.synth.cancel();const r=new SpeechSynthesisUtterance(e);r.lang=this.lang,r.pitch=1,r.rate=1,r.volume=1,r.onend=()=>{console.log(" Speech finished:",e.substring(0,50)+"..."),n()},r.onerror=a=>{console.error(" Speech Synthesis Error",a),n()},console.log(" Speaking:",e),this.synth.speak(r)})}stop(){if(this.isListening&&this.recognition)try{this.recognition.stop(),this.isListening=!1,console.log(" Recognition stopped")}catch(e){console.warn("Warning stopping recognition:",e)}}}const kl=new kD;var hE;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(hE||(hE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mE;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(mE||(mE={}));var pE;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(pE||(pE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=["user","model","function","system"];var yE;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(yE||(yE={}));var vE;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(vE||(vE={}));var _E;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(_E||(_E={}));var EE;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(EE||(EE={}));var Hl;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Hl||(Hl={}));var TE;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(TE||(TE={}));var SE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(SE||(SE={}));var bE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(bE||(bE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ua extends Sn{constructor(e,n){super(e),this.response=n}}class RS extends Sn{constructor(e,n,s,r){super(e),this.status=n,this.statusText=s,this.errorDetails=r}}class So extends Sn{}class IS extends Sn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="https://generativelanguage.googleapis.com",LD="v1beta",OD="0.24.1",BD="genai-js";var hr;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(hr||(hr={}));class FD{constructor(e,n,s,r,a){this.model=e,this.task=n,this.apiKey=s,this.stream=r,this.requestOptions=a}toString(){var e,n;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||LD;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||VD}/${s}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function GD(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${BD}/${OD}`),e.join(" ")}async function qD(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",GD(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let s=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(r){throw new So(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${r.message}`)}for(const[r,a]of s.entries()){if(r==="x-goog-api-key")throw new So(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new So(`Header name ${r} can only be set using the apiClient field`);n.append(r,a)}}return n}async function HD(t,e,n,s,r,a){const u=new FD(t,e,n,s,a);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},YD(a)),{method:"POST",headers:await qD(u),body:r})}}async function lu(t,e,n,s,r,a={},u=fetch){const{url:d,fetchOptions:h}=await HD(t,e,n,s,r,a);return zD(d,h,u)}async function zD(t,e,n=fetch){let s;try{s=await n(t,e)}catch(r){jD(r,t)}return s.ok||await $D(s,t),s}function jD(t,e){let n=t;throw n.name==="AbortError"?(n=new IS(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof RS||t instanceof So||(n=new Sn(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function $D(t,e){let n="",s;try{const r=await t.json();n=r.error.message,r.error.details&&(n+=` ${JSON.stringify(r.error.details)}`,s=r.error.details)}catch{}throw new RS(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,s)}function YD(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),td(t.candidates[0]))throw new ua(`${vo(t)}`,t);return KD(t)}else if(t.promptFeedback)throw new ua(`Text not available. ${vo(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),td(t.candidates[0]))throw new ua(`${vo(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),xE(t)[0]}else if(t.promptFeedback)throw new ua(`Function call not available. ${vo(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),td(t.candidates[0]))throw new ua(`${vo(t)}`,t);return xE(t)}else if(t.promptFeedback)throw new ua(`Function call not available. ${vo(t)}`,t)},t}function KD(t){var e,n,s,r;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(r=(s=t.candidates)===null||s===void 0?void 0:s[0].content)===null||r===void 0?void 0:r.parts)u.text&&a.push(u.text),u.executableCode&&a.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&a.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function xE(t){var e,n,s,r;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(r=(s=t.candidates)===null||s===void 0?void 0:s[0].content)===null||r===void 0?void 0:r.parts)u.functionCall&&a.push(u.functionCall);if(a.length>0)return a}const JD=[Hl.RECITATION,Hl.SAFETY,Hl.LANGUAGE];function td(t){return!!t.finishReason&&JD.includes(t.finishReason)}function vo(t){var e,n,s;let r="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)r+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(r+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((s=t.candidates)===null||s===void 0)&&s[0]){const a=t.candidates[0];td(a)&&(r+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(r+=`: ${a.finishMessage}`))}return r}function Xl(t){return this instanceof Xl?(this.v=t,this):new Xl(t)}function QD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,a=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(b){s[b]&&(r[b]=function(C){return new Promise(function(N,V){a.push([b,C,N,V])>1||d(b,C)})})}function d(b,C){try{h(s[b](C))}catch(N){T(a[0][3],N)}}function h(b){b.value instanceof Xl?Promise.resolve(b.value.v).then(m,v):T(a[0][2],b)}function m(b){d("next",b)}function v(b){d("throw",b)}function T(b,C){b(C),a.shift(),a.length&&d(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function XD(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=e2(e),[s,r]=n.tee();return{stream:ZD(s),response:WD(r)}}async function WD(t){const e=[],n=t.getReader();for(;;){const{done:s,value:r}=await n.read();if(s)return yp(t2(e));e.push(r)}}function ZD(t){return QD(this,arguments,function*(){const n=t.getReader();for(;;){const{value:s,done:r}=yield Xl(n.read());if(r)break;yield yield Xl(yp(s))}})}function e2(t){const e=t.getReader();return new ReadableStream({start(s){let r="";return a();function a(){return e.read().then(({value:u,done:d})=>{if(d){if(r.trim()){s.error(new Sn("Failed to parse stream"));return}s.close();return}r+=u;let h=r.match(AE),m;for(;h;){try{m=JSON.parse(h[1])}catch{s.error(new Sn(`Error parsing JSON response: "${h[1]}"`));return}s.enqueue(m),r=r.substring(h[0].length),h=r.match(AE)}return a()}).catch(u=>{let d=u;throw d.stack=u.stack,d.name==="AbortError"?d=new IS("Request aborted when reading from the stream"):d=new Sn("Error reading from the stream"),d})}}})}function t2(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const s of t){if(s.candidates){let r=0;for(const a of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[r]||(n.candidates[r]={index:r}),n.candidates[r].citationMetadata=a.citationMetadata,n.candidates[r].groundingMetadata=a.groundingMetadata,n.candidates[r].finishReason=a.finishReason,n.candidates[r].finishMessage=a.finishMessage,n.candidates[r].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[r].content||(n.candidates[r].content={role:a.content.role||"user",parts:[]});const u={};for(const d of a.content.parts)d.text&&(u.text=d.text),d.functionCall&&(u.functionCall=d.functionCall),d.executableCode&&(u.executableCode=d.executableCode),d.codeExecutionResult&&(u.codeExecutionResult=d.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),n.candidates[r].content.parts.push(u)}r++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NS(t,e,n,s){const r=await lu(e,hr.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),s);return XD(r)}async function MS(t,e,n,s){const a=await(await lu(e,hr.GENERATE_CONTENT,t,!1,JSON.stringify(n),s)).json();return{response:yp(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function Wl(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return n2(e)}function n2(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,r=!1;for(const a of t)"functionResponse"in a?(n.parts.push(a),r=!0):(e.parts.push(a),s=!0);if(s&&r)throw new Sn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!r)throw new Sn("No content is provided for sending chat message.");return s?e:n}function i2(t,e){var n;let s={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const r=t.generateContentRequest!=null;if(t.contents){if(r)throw new So("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=t.contents}else if(r)s=Object.assign(Object.assign({},s),t.generateContentRequest);else{const a=Wl(t);s.contents=[a]}return{generateContentRequest:s}}function CE(t){let e;return t.contents?e=t:e={contents:[Wl(t)]},t.systemInstruction&&(e.systemInstruction=DS(t.systemInstruction)),e}function s2(t){return typeof t=="string"||Array.isArray(t)?{content:Wl(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],o2={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function r2(t){let e=!1;for(const n of t){const{role:s,parts:r}=n;if(!e&&s!=="user")throw new Sn(`First content should be with role 'user', got ${s}`);if(!gE.includes(s))throw new Sn(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(gE)}`);if(!Array.isArray(r))throw new Sn("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new Sn("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of r)for(const h of wE)h in d&&(a[h]+=1);const u=o2[s];for(const d of wE)if(!u.includes(d)&&a[d]>0)throw new Sn(`Content with role '${s}' can't contain '${d}' part`);e=!0}}function RE(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="SILENT_ERROR";class a2{constructor(e,n,s,r={}){this.model=n,this.params=s,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s!=null&&s.history&&(r2(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var s,r,a,u,d,h;await this._sendPromise;const m=Wl(e),v={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,m]},T=Object.assign(Object.assign({},this._requestOptions),n);let b;return this._sendPromise=this._sendPromise.then(()=>MS(this._apiKey,this.model,v,T)).then(C=>{var N;if(RE(C.response)){this._history.push(m);const V=Object.assign({parts:[],role:"model"},(N=C.response.candidates)===null||N===void 0?void 0:N[0].content);this._history.push(V)}else{const V=vo(C.response);V&&console.warn(`sendMessage() was unsuccessful. ${V}. Inspect response object for details.`)}b=C}).catch(C=>{throw this._sendPromise=Promise.resolve(),C}),await this._sendPromise,b}async sendMessageStream(e,n={}){var s,r,a,u,d,h;await this._sendPromise;const m=Wl(e),v={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,m]},T=Object.assign(Object.assign({},this._requestOptions),n),b=NS(this._apiKey,this.model,v,T);return this._sendPromise=this._sendPromise.then(()=>b).catch(C=>{throw new Error(IE)}).then(C=>C.response).then(C=>{if(RE(C)){this._history.push(m);const N=Object.assign({},C.candidates[0].content);N.role||(N.role="model"),this._history.push(N)}else{const N=vo(C);N&&console.warn(`sendMessageStream() was unsuccessful. ${N}. Inspect response object for details.`)}}).catch(C=>{C.message!==IE&&console.error(C)}),b}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t,e,n,s){return(await lu(e,hr.COUNT_TOKENS,t,!1,JSON.stringify(n),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(t,e,n,s){return(await lu(e,hr.EMBED_CONTENT,t,!1,JSON.stringify(n),s)).json()}async function c2(t,e,n,s){const r=n.requests.map(u=>Object.assign(Object.assign({},u),{model:e}));return(await lu(e,hr.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:r}),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,s={}){this.apiKey=e,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=DS(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var s;const r=CE(e),a=Object.assign(Object.assign({},this._requestOptions),n);return MS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},r),a)}async generateContentStream(e,n={}){var s;const r=CE(e),a=Object.assign(Object.assign({},this._requestOptions),n);return NS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},r),a)}startChat(e){var n;return new a2(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const s=i2(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),n);return l2(this.apiKey,this.model,s,r)}async embedContent(e,n={}){const s=s2(e),r=Object.assign(Object.assign({},this._requestOptions),n);return u2(this.apiKey,this.model,s,r)}async batchEmbedContents(e,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return c2(this.apiKey,this.model,e,s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Sn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new NE(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,s){if(!e.name)throw new So("Cached content must contain a `name` field.");if(!e.model)throw new So("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const u of r)if(n!=null&&n[u]&&e[u]&&(n==null?void 0:n[u])!==e[u]){if(u==="model"){const d=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,h=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(d===h)continue}throw new So(`Different value for "${u}" specified in modelParams (${n[u]}) and cachedContent (${e[u]})`)}const a=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new NE(this.apiKey,a,s)}}class f2{constructor(e){this.genAI=null,this.model=null,e&&this.initialize(e)}initialize(e){try{this.genAI=new d2(e),this.model=this.genAI.getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{temperature:.7,topP:.95,topK:40,maxOutputTokens:1024}}),console.log(" Gemini AI initialized successfully")}catch(n){console.error(" Failed to initialize Gemini AI:",n),this.genAI=null,this.model=null}}isReady(){return this.model!==null}getAvailableFunctions(){return[{name:"navigate",description:"     ",parameters:{type:"object",properties:{view:{type:"string",enum:["home","stages","grade","admin","teachers"],description:"   : home (), stages (), grade (  ), admin ( ), teachers ( )"}},required:["view"]}},{name:"addTeacher",description:"   ",parameters:{type:"object",properties:{name:{type:"string",description:"  "},subject:{type:"string",description:"   (:    )"},whatsapp:{type:"string",description:"  (11 )"},availability:{type:"string",description:"  (:   )"},teachingHours:{type:"string",description:"  (: 4:00 - 8:00 )"},bio:{type:"string",description:"  "},grades:{type:"array",items:{type:"string"},description:"    (:    )"},stages:{type:"array",items:{type:"string",enum:["primary","preparatory","secondary","languages"]},description:" : primary (), preparatory (), secondary (), languages ()"}},required:["name","subject"]}},{name:"searchTeachers",description:"      ",parameters:{type:"object",properties:{query:{type:"string",description:"  (   ) -    "},subject:{type:"string",description:"  "},stage:{type:"string",enum:["primary","preparatory","secondary","languages"],description:"  "}},required:[]}},{name:"addCourse",description:"  ",parameters:{type:"object",properties:{title:{type:"string",description:" "},description:{type:"string",description:" "},stage:{type:"string",enum:["primary","preparatory","secondary","languages"],description:" "},grade:{type:"string",description:" "},teacherName:{type:"string",description:" "}},required:["title","stage","grade"]}},{name:"updateSchedule",description:"     ",parameters:{type:"object",properties:{gradeName:{type:"string",description:"  (:    )"},day:{type:"string",enum:["","","","","",""],description:" "},period:{type:"number",description:"  (1-8)"},subject:{type:"string",description:" "},teacherName:{type:"string",description:" "},remove:{type:"boolean",description:"true   false /"}},required:["gradeName","day","period"]}},{name:"getStatistics",description:"   ",parameters:{type:"object",properties:{metric:{type:"string",enum:["teachers","courses","grades","all"],description:"  "}},required:["metric"]}}]}async processCommand(e,n=[]){var s,r,a,u;if(!this.isReady())return{text:"     .    API Key  .",success:!1};try{console.log(" Processing voice command:",e);const d=`         .

 :
-      
-    
-   
-    

 :
-     ( !)
-    
-   : "" "" "" " " " "
-   
-        

 :
-     
-   
-   
-   

  :
"  !    ."
"  !"
"  3 ."

     .    ! `,h=[{functionDeclarations:this.getAvailableFunctions()}],T=(await this.model.startChat({tools:h,history:[{role:"user",parts:[{text:d}]},{role:"model",parts:[{text:"!    .     "}]},...n.map(N=>({role:N.role,parts:[{text:N.parts}]}))]}).sendMessage(e)).response;console.log(" AI Response:",T);const b=T.functionCalls();if(b&&b.length>0)return console.log(" Function calls detected:",b),{text:T.text()||"  ...",functionCalls:b,success:!0};const C=T.text();return!C||C.trim()===""?(console.warn(" Empty response from AI"),{text:"  .   ",success:!0}):{text:C,success:!0}}catch(d){return console.error(" AI Processing Error:",d),(s=d==null?void 0:d.message)!=null&&s.includes("API key")?{text:"     API.    .",success:!1}:(r=d==null?void 0:d.message)!=null&&r.includes("quota")?{text:"Quota .    .",success:!1}:(a=d==null?void 0:d.message)!=null&&a.includes("network")||(u=d==null?void 0:d.message)!=null&&u.includes("fetch")?{text:"  .   .",success:!1}:{text:"  .       API Key.",success:!1}}}}const jc=new f2;async function h2(t,e){try{return e.navigate(t.view),{success:!0,message:`   ${{home:" ",stages:" ",admin:" ",teachers:" ",grade:" "}[t.view]||t.view}`}}catch{return{success:!1,message:"   "}}}async function m2(t,e){try{if(!t.name||!t.subject)return{success:!1,message:"    "};const s={id:`t-${Date.now()}`,name:t.name,subject:t.subject,whatsapp:t.whatsapp||"",availability:t.availability||"",teachingHours:t.teachingHours||"",bio:t.bio||` ${t.subject}`,imageUrl:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name)}&background=random`,grades:t.grades||[],stages:t.stages||["primary"]};return e.setTeachers([...e.teachers,s]),{success:!0,message:`   ${t.name} !`,data:s}}catch(n){return console.error("Add Teacher Error:",n),{success:!1,message:"    "}}}async function p2(t,e){try{let n=e.teachers;if(t.query){const r=t.query.toLowerCase();n=n.filter(a=>a.name.toLowerCase().includes(r)||a.subject.toLowerCase().includes(r))}if(t.subject&&(n=n.filter(r=>r.subject.toLowerCase().includes(t.subject.toLowerCase()))),t.stage&&(n=n.filter(r=>{var a;return(a=r.stages)==null?void 0:a.includes(t.stage)})),n.length===0)return{success:!0,message:"   ",data:[]};const s=n.map(r=>r.name).join(" ");return{success:!0,message:` ${n.length} : ${s}`,data:n}}catch{return{success:!1,message:"   "}}}async function g2(t,e){try{if(!t.title||!t.stage||!t.grade)return{success:!1,message:"     "};let n="";if(t.teacherName){const u=e.findTeacher(t.teacherName);u&&(n=u.id)}const s=e.findGrade(t.grade);if(!s)return{success:!1,message:`   ${t.grade}`};const a={id:`c-${Date.now()}`,title:t.title,description:t.description||"",stage:t.stage,grade:t.grade,gradeId:s.id,teacherId:n,media:[]};return e.setCourses([...e.courses,a]),{success:!0,message:`   "${t.title}" !`,data:a}}catch(n){return console.error("Add Course Error:",n),{success:!1,message:"    "}}}async function y2(t,e){try{const n=e.findGrade(t.gradeName);if(!n)return{success:!1,message:`   "${t.gradeName}"`};if(["","","","","",""].indexOf(t.day)===-1)return{success:!1,message:"  "};if(t.period<1||t.period>8)return{success:!1,message:"    ( 1  8)"};const r=e.grades.map(a=>{if(a.id!==n.id)return a;const u=[...a.schedule];let d=u.find(h=>h.day===t.day);return d||(d={day:t.day,periods:Array(8).fill(null)},u.push(d)),t.remove?d.periods[t.period-1]=null:d.periods[t.period-1]=t.subject||" ",{...a,schedule:u}});return e.setGrades(r),t.remove?{success:!0,message:`     ${t.day}`}:{success:!0,message:` ${t.subject?"":""}  ${t.subject||""}  ${t.day}  ${t.period}`}}catch(n){return console.error("Update Schedule Error:",n),{success:!1,message:"    "}}}async function v2(t,e){try{const n={teachers:e.teachers.length,courses:e.courses.length,grades:e.grades.length};return t.metric==="all"?{success:!0,message:` ${n.teachers}  ${n.courses}  ${n.grades}  `,data:n}:t.metric==="teachers"?{success:!0,message:` ${n.teachers} `,data:{count:n.teachers}}:t.metric==="courses"?{success:!0,message:` ${n.courses} `,data:{count:n.courses}}:t.metric==="grades"?{success:!0,message:` ${n.grades}  `,data:{count:n.grades}}:{success:!1,message:"   "}}catch{return{success:!1,message:"    "}}}async function _2(t,e){const{name:n,args:s}=t;switch(console.log(` Executing function: ${n}`,s),n){case"navigate":return h2(s,e);case"addTeacher":return m2(s,e);case"searchTeachers":return p2(s,e);case"addCourse":return g2(s,e);case"updateSchedule":return y2(s,e);case"getStatistics":return v2(s,e);default:return{success:!1,message:` "${n}"  `}}}const PS=({grades:t,teachers:e,courses:n,setGrades:s,setTeachers:r,setCourses:a,onNavigate:u,apiKey:d})=>{const[h,m]=ve.useState(!1),[v,T]=ve.useState(!1),[b,C]=ve.useState(!1),[N,V]=ve.useState(!1),[U,j]=ve.useState(" "),[W,G]=ve.useState([]),[Q,q]=ve.useState(!1);ve.useEffect(()=>{d&&jc.initialize(d)},[d]);const oe=P=>{const we=P.toLowerCase();return e.find(Ie=>Ie.name.toLowerCase().includes(we)||Ie.subject.toLowerCase().includes(we))||null},D=P=>{const we=P.toLowerCase();return n.find(Ie=>Ie.title.toLowerCase().includes(we)||Ie.description.toLowerCase().includes(we))||null},R=P=>{const we=P.toLowerCase();return t.find(Ie=>Ie.name.toLowerCase().includes(we))||null},M=()=>({grades:t,teachers:e,courses:n,currentView:"home",setGrades:s,setTeachers:r,setCourses:a,navigate:u,findTeacher:oe,findCourse:D,findGrade:R});ve.useEffect(()=>{let P=!0;const we=async()=>{if(!(!h||!P)){try{T(!0),C(!1),V(!1),j(" ... ");const Ie=await kl.listen();if(!P||!h)return;if(T(!1),j(`: "${Ie}"`),console.log(" Voice Command:",Ie),G(ce=>[...ce,{role:"user",parts:Ie}]),!jc.isReady()){const ce='   .    API Key.  F12  Console : localStorage.setItem("gemini_api_key", "YOUR_KEY")';await kl.say(ce),j(" "+ce),P&&h&&(await new Promise(Ee=>setTimeout(Ee,3e3)),we());return}C(!0),j(" ... ");const Z=await jc.processCommand(Ie,W);if(!P||!h)return;if(C(!1),console.log(" AI Response:",Z),Z.functionCalls&&Z.functionCalls.length>0){V(!0),j(" ... ");const ce=M(),Ee=[];for(const ne of Z.functionCalls){const he=await _2(ne,ce);Ee.push(he),console.log(" Function result:",he)}const Pe=Ee.filter(ne=>ne.success).map(ne=>ne.message).join(". "),He=Ee.filter(ne=>!ne.success).map(ne=>ne.message).join(". ");let F=Z.text;Pe&&(F=Pe),He&&(F+=(F?". ":"")+He),V(!1),j(F),await kl.say(F),G(ne=>[...ne,{role:"model",parts:F}])}else j(Z.text),await kl.say(Z.text),G(ce=>[...ce,{role:"model",parts:Z.text}])}catch(Ie){console.error("Voice Error:",Ie),P&&h&&(j(typeof Ie=="string"?Ie:"  ... "),typeof Ie=="string"&&!Ie.includes("timeout")&&await kl.say(Ie))}P&&h&&(await new Promise(Ie=>setTimeout(Ie,1e3)),we())}};return h?we():(T(!1),C(!1),V(!1),j(" "),window.speechSynthesis.cancel()),()=>{P=!1}},[h,W,t,e,n]);const L=()=>{m(!h),h&&G([])},B=()=>v?"":b?"":N?"":"",z=()=>v?"bg-red-500":b?"bg-blue-500":N?"bg-yellow-500":"bg-gray-300";return E.jsxs("div",{className:"fixed bottom-8 left-8 z-[100] flex flex-col items-end gap-4",children:[h&&E.jsxs("div",{className:"rounded-3xl shadow-2xl w-80 border bg-white border-emerald-100 animate-in slide-in-from-bottom-4 overflow-hidden",children:[E.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 p-4 text-white",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:`w-3 h-3 rounded-full ${z()} ${v||b||N?"animate-pulse":""}`}),E.jsx("span",{className:"font-black",children:jc.isReady()?"  ":" ( AI)"})]}),E.jsx("button",{onClick:()=>q(!Q),className:"text-white/80 hover:text-white text-sm",children:Q?"":""})]})}),E.jsx("div",{className:"p-4 border-b",children:E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("span",{className:"text-2xl",children:B()}),E.jsx("p",{className:"text-gray-700 text-sm font-bold leading-relaxed flex-1",children:U})]})}),Q&&W.length>0&&E.jsx("div",{className:"p-4 max-h-60 overflow-y-auto bg-gray-50",children:E.jsx("div",{className:"space-y-3",children:W.slice(-6).map((P,we)=>E.jsxs("div",{className:`p-3 rounded-xl text-sm ${P.role==="user"?"bg-blue-100 text-blue-900 mr-4":"bg-emerald-100 text-emerald-900 ml-4"}`,children:[E.jsx("div",{className:"font-bold text-xs mb-1",children:P.role==="user"?"":""}),P.parts]},we))})}),!Q&&E.jsxs("div",{className:"p-4 bg-gray-50 text-xs text-gray-600",children:[E.jsx("div",{className:"font-bold mb-2",children:" :"}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("div",{children:' "    "'}),E.jsx("div",{children:' "  "'}),E.jsx("div",{children:' "  "'})]})]})]}),E.jsx("button",{onClick:L,className:`w-20 h-20 rounded-full flex items-center justify-center shadow-2xl transition-all active:scale-90 ${h?"bg-red-500 text-white animate-pulse":"bg-gradient-to-br from-emerald-500 to-teal-500 text-white hover:from-emerald-600 hover:to-teal-600"}`,title:h?" ":"  ",children:h?E.jsx("span",{className:"text-3xl",children:""}):E.jsx("span",{className:"text-4xl",children:""})})]})};var ME={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},E2=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[s++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],u=t[n++],d=t[n++],h=((r&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(h>>10)),e[s++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],u=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(a&63)<<6|u&63)}}return e.join("")},kS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const a=t[r],u=r+1<t.length,d=u?t[r+1]:0,h=r+2<t.length,m=h?t[r+2]:0,v=a>>2,T=(a&3)<<4|d>>4;let b=(d&15)<<2|m>>6,C=m&63;h||(C=64,u||(b=64)),s.push(n[v],n[T],n[b],n[C])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(US(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):E2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],d=r<t.length?n[t.charAt(r)]:0;++r;const m=r<t.length?n[t.charAt(r)]:64;++r;const T=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||d==null||m==null||T==null)throw new T2;const b=a<<2|d>>4;if(s.push(b),m!==64){const C=d<<4&240|m>>2;if(s.push(C),T!==64){const N=m<<6&192|T;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class T2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S2=function(t){const e=US(t);return kS.encodeByteArray(e,!0)},md=function(t){return S2(t).replace(/\./g,"")},b2=function(t){try{return kS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=()=>x2().__FIREBASE_DEFAULTS__,C2=()=>{if(typeof process>"u"||typeof ME>"u")return;const t=ME.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},w2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&b2(t[1]);return e&&JSON.parse(e)},vp=()=>{try{return A2()||C2()||w2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},R2=t=>{var e,n;return(n=(e=vp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},VS=t=>{const e=R2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},LS=()=>{var t;return(t=vp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[md(JSON.stringify(n)),md(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M2(){var t;const e=(t=vp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D2(){return!M2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P2(){try{return typeof indexedDB=="object"}catch{return!1}}function U2(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="FirebaseError";class _r extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=k2,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,BS.prototype.create)}}class BS{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],u=a?V2(a,s):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new _r(r,d,s)}}function V2(t,e){return t.replace(L2,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const L2=/\{\$([^}]+)}/g;function Vm(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const a=t[r],u=e[r];if(DE(a)&&DE(u)){if(!Vm(a,u))return!1}else if(a!==u)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function DE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t){return t&&t._delegate?t._delegate:t}class Ta{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new I2;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F2(e))try{this.getOrInitializeService({instanceIdentifier:ur})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});s.resolve(a)}catch{}}}}clearInstance(e=ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ur){return this.instances.has(e)}getOptions(e=ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);s===d&&u.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(r,a);const u=this.instances.get(r);return u&&e(u,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:B2(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ur){return this.component?this.component.multipleInstances?e:ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B2(t){return t===ur?void 0:t}function F2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new O2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const q2={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},H2=We.INFO,z2={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},j2=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=z2[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class FS{constructor(e){this.name=e,this._logLevel=H2,this._logHandler=j2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const $2=(t,e)=>e.some(n=>t instanceof n);let PE,UE;function Y2(){return PE||(PE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K2(){return UE||(UE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GS=new WeakMap,Lm=new WeakMap,qS=new WeakMap,om=new WeakMap,_p=new WeakMap;function J2(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(bo(t.result)),r()},u=()=>{s(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&GS.set(n,t)}).catch(()=>{}),_p.set(e,t),e}function Q2(t){if(Lm.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),r()},u=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Lm.set(t,e)}let Om={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function X2(t){Om=t(Om)}function W2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(rm(this),e,...n);return qS.set(s,e.sort?e.sort():[e]),bo(s)}:K2().includes(t)?function(...e){return t.apply(rm(this),e),bo(GS.get(this))}:function(...e){return bo(t.apply(rm(this),e))}}function Z2(t){return typeof t=="function"?W2(t):(t instanceof IDBTransaction&&Q2(t),$2(t,Y2())?new Proxy(t,Om):t)}function bo(t){if(t instanceof IDBRequest)return J2(t);if(om.has(t))return om.get(t);const e=Z2(t);return e!==t&&(om.set(t,e),_p.set(e,t)),e}const rm=t=>_p.get(t);function eP(t,e,{blocked:n,upgrade:s,blocking:r,terminated:a}={}){const u=indexedDB.open(t,e),d=bo(u);return s&&u.addEventListener("upgradeneeded",h=>{s(bo(u.result),h.oldVersion,h.newVersion,bo(u.transaction),h)}),n&&u.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),d.then(h=>{a&&h.addEventListener("close",()=>a()),r&&h.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const tP=["get","getKey","getAll","getAllKeys","count"],nP=["put","add","delete","clear"],am=new Map;function kE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(am.get(e))return am.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=nP.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||tP.includes(n)))return;const a=async function(u,...d){const h=this.transaction(u,r?"readwrite":"readonly");let m=h.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),r&&h.done]))[0]};return am.set(e,a),a}X2(t=>({...t,get:(e,n,s)=>kE(e,n)||t.get(e,n,s),has:(e,n)=>!!kE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sP(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function sP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bm="@firebase/app",VE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new FS("@firebase/app"),oP="@firebase/app-compat",rP="@firebase/analytics-compat",aP="@firebase/analytics",lP="@firebase/app-check-compat",uP="@firebase/app-check",cP="@firebase/auth",dP="@firebase/auth-compat",fP="@firebase/database",hP="@firebase/data-connect",mP="@firebase/database-compat",pP="@firebase/functions",gP="@firebase/functions-compat",yP="@firebase/installations",vP="@firebase/installations-compat",_P="@firebase/messaging",EP="@firebase/messaging-compat",TP="@firebase/performance",SP="@firebase/performance-compat",bP="@firebase/remote-config",xP="@firebase/remote-config-compat",AP="@firebase/storage",CP="@firebase/storage-compat",wP="@firebase/firestore",RP="@firebase/vertexai-preview",IP="@firebase/firestore-compat",NP="firebase",MP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="[DEFAULT]",DP={[Bm]:"fire-core",[oP]:"fire-core-compat",[aP]:"fire-analytics",[rP]:"fire-analytics-compat",[uP]:"fire-app-check",[lP]:"fire-app-check-compat",[cP]:"fire-auth",[dP]:"fire-auth-compat",[fP]:"fire-rtdb",[hP]:"fire-data-connect",[mP]:"fire-rtdb-compat",[pP]:"fire-fn",[gP]:"fire-fn-compat",[yP]:"fire-iid",[vP]:"fire-iid-compat",[_P]:"fire-fcm",[EP]:"fire-fcm-compat",[TP]:"fire-perf",[SP]:"fire-perf-compat",[bP]:"fire-rc",[xP]:"fire-rc-compat",[AP]:"fire-gcs",[CP]:"fire-gcs-compat",[wP]:"fire-fst",[IP]:"fire-fst-compat",[RP]:"fire-vertex","fire-js":"fire-js",[NP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new Map,PP=new Map,Gm=new Map;function LE(t,e){try{t.container.addComponent(e)}catch(n){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zl(t){const e=t.name;if(Gm.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,t);for(const n of pd.values())LE(n,t);for(const n of PP.values())LE(n,t);return!0}function HS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xo=new BS("app","Firebase",UP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=MP;function jS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Fm,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw xo.create("bad-app-name",{appName:String(r)});if(n||(n=LS()),!n)throw xo.create("no-options");const a=pd.get(r);if(a){if(Vm(n,a.options)&&Vm(s,a.config))return a;throw xo.create("duplicate-app",{appName:r})}const u=new G2(r);for(const h of Gm.values())u.addComponent(h);const d=new kP(n,s,u);return pd.set(r,d),d}function $S(t=Fm){const e=pd.get(t);if(!e&&t===Fm&&LS())return jS();if(!e)throw xo.create("no-app",{appName:t});return e}function Ao(t,e,n){var s;let r=(s=DP[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${r}" with version "${e}":`];a&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(d.join(" "));return}Zl(new Ta(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="firebase-heartbeat-database",LP=1,eu="firebase-heartbeat-store";let lm=null;function YS(){return lm||(lm=eP(VP,LP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(eu)}catch(n){console.warn(n)}}}}).catch(t=>{throw xo.create("idb-open",{originalErrorMessage:t.message})})),lm}async function OP(t){try{const n=(await YS()).transaction(eu),s=await n.objectStore(eu).get(KS(t));return await n.done,s}catch(e){if(e instanceof _r)ws.warn(e.message);else{const n=xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ws.warn(n.message)}}}async function OE(t,e){try{const s=(await YS()).transaction(eu,"readwrite");await s.objectStore(eu).put(e,KS(t)),await s.done}catch(n){if(n instanceof _r)ws.warn(n.message);else{const s=xo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ws.warn(s.message)}}}function KS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=1024,FP=720*60*60*1e3;class GP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HP(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=BE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=FP}),this._storage.overwrite(this._heartbeatsCache))}catch(s){ws.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=BE(),{heartbeatsToSend:s,unsentEntries:r}=qP(this._heartbeatsCache.heartbeats),a=md(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ws.warn(n),""}}}function BE(){return new Date().toISOString().substring(0,10)}function qP(t,e=BP){const n=[];let s=t.slice();for(const r of t){const a=n.find(u=>u.agent===r.agent);if(a){if(a.dates.push(r.date),FE(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),FE(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class HP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return P2()?U2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return OE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return OE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function FE(t){return md(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t){Zl(new Ta("platform-logger",e=>new iP(e),"PRIVATE")),Zl(new Ta("heartbeat",e=>new GP(e),"PRIVATE")),Ao(Bm,VE,t),Ao(Bm,VE,"esm2017"),Ao("fire-js","")}zP("");var jP="firebase",$P="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ao(jP,$P,"app");var GE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dr,JS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function M(){}M.prototype=R.prototype,D.D=R.prototype,D.prototype=new M,D.prototype.constructor=D,D.C=function(L,B,z){for(var P=Array(arguments.length-2),we=2;we<arguments.length;we++)P[we-2]=arguments[we];return R.prototype[B].apply(L,P)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,R,M){M||(M=0);var L=Array(16);if(typeof R=="string")for(var B=0;16>B;++B)L[B]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(B=0;16>B;++B)L[B]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=D.g[0],M=D.g[1],B=D.g[2];var z=D.g[3],P=R+(z^M&(B^z))+L[0]+3614090360&4294967295;R=M+(P<<7&4294967295|P>>>25),P=z+(B^R&(M^B))+L[1]+3905402710&4294967295,z=R+(P<<12&4294967295|P>>>20),P=B+(M^z&(R^M))+L[2]+606105819&4294967295,B=z+(P<<17&4294967295|P>>>15),P=M+(R^B&(z^R))+L[3]+3250441966&4294967295,M=B+(P<<22&4294967295|P>>>10),P=R+(z^M&(B^z))+L[4]+4118548399&4294967295,R=M+(P<<7&4294967295|P>>>25),P=z+(B^R&(M^B))+L[5]+1200080426&4294967295,z=R+(P<<12&4294967295|P>>>20),P=B+(M^z&(R^M))+L[6]+2821735955&4294967295,B=z+(P<<17&4294967295|P>>>15),P=M+(R^B&(z^R))+L[7]+4249261313&4294967295,M=B+(P<<22&4294967295|P>>>10),P=R+(z^M&(B^z))+L[8]+1770035416&4294967295,R=M+(P<<7&4294967295|P>>>25),P=z+(B^R&(M^B))+L[9]+2336552879&4294967295,z=R+(P<<12&4294967295|P>>>20),P=B+(M^z&(R^M))+L[10]+4294925233&4294967295,B=z+(P<<17&4294967295|P>>>15),P=M+(R^B&(z^R))+L[11]+2304563134&4294967295,M=B+(P<<22&4294967295|P>>>10),P=R+(z^M&(B^z))+L[12]+1804603682&4294967295,R=M+(P<<7&4294967295|P>>>25),P=z+(B^R&(M^B))+L[13]+4254626195&4294967295,z=R+(P<<12&4294967295|P>>>20),P=B+(M^z&(R^M))+L[14]+2792965006&4294967295,B=z+(P<<17&4294967295|P>>>15),P=M+(R^B&(z^R))+L[15]+1236535329&4294967295,M=B+(P<<22&4294967295|P>>>10),P=R+(B^z&(M^B))+L[1]+4129170786&4294967295,R=M+(P<<5&4294967295|P>>>27),P=z+(M^B&(R^M))+L[6]+3225465664&4294967295,z=R+(P<<9&4294967295|P>>>23),P=B+(R^M&(z^R))+L[11]+643717713&4294967295,B=z+(P<<14&4294967295|P>>>18),P=M+(z^R&(B^z))+L[0]+3921069994&4294967295,M=B+(P<<20&4294967295|P>>>12),P=R+(B^z&(M^B))+L[5]+3593408605&4294967295,R=M+(P<<5&4294967295|P>>>27),P=z+(M^B&(R^M))+L[10]+38016083&4294967295,z=R+(P<<9&4294967295|P>>>23),P=B+(R^M&(z^R))+L[15]+3634488961&4294967295,B=z+(P<<14&4294967295|P>>>18),P=M+(z^R&(B^z))+L[4]+3889429448&4294967295,M=B+(P<<20&4294967295|P>>>12),P=R+(B^z&(M^B))+L[9]+568446438&4294967295,R=M+(P<<5&4294967295|P>>>27),P=z+(M^B&(R^M))+L[14]+3275163606&4294967295,z=R+(P<<9&4294967295|P>>>23),P=B+(R^M&(z^R))+L[3]+4107603335&4294967295,B=z+(P<<14&4294967295|P>>>18),P=M+(z^R&(B^z))+L[8]+1163531501&4294967295,M=B+(P<<20&4294967295|P>>>12),P=R+(B^z&(M^B))+L[13]+2850285829&4294967295,R=M+(P<<5&4294967295|P>>>27),P=z+(M^B&(R^M))+L[2]+4243563512&4294967295,z=R+(P<<9&4294967295|P>>>23),P=B+(R^M&(z^R))+L[7]+1735328473&4294967295,B=z+(P<<14&4294967295|P>>>18),P=M+(z^R&(B^z))+L[12]+2368359562&4294967295,M=B+(P<<20&4294967295|P>>>12),P=R+(M^B^z)+L[5]+4294588738&4294967295,R=M+(P<<4&4294967295|P>>>28),P=z+(R^M^B)+L[8]+2272392833&4294967295,z=R+(P<<11&4294967295|P>>>21),P=B+(z^R^M)+L[11]+1839030562&4294967295,B=z+(P<<16&4294967295|P>>>16),P=M+(B^z^R)+L[14]+4259657740&4294967295,M=B+(P<<23&4294967295|P>>>9),P=R+(M^B^z)+L[1]+2763975236&4294967295,R=M+(P<<4&4294967295|P>>>28),P=z+(R^M^B)+L[4]+1272893353&4294967295,z=R+(P<<11&4294967295|P>>>21),P=B+(z^R^M)+L[7]+4139469664&4294967295,B=z+(P<<16&4294967295|P>>>16),P=M+(B^z^R)+L[10]+3200236656&4294967295,M=B+(P<<23&4294967295|P>>>9),P=R+(M^B^z)+L[13]+681279174&4294967295,R=M+(P<<4&4294967295|P>>>28),P=z+(R^M^B)+L[0]+3936430074&4294967295,z=R+(P<<11&4294967295|P>>>21),P=B+(z^R^M)+L[3]+3572445317&4294967295,B=z+(P<<16&4294967295|P>>>16),P=M+(B^z^R)+L[6]+76029189&4294967295,M=B+(P<<23&4294967295|P>>>9),P=R+(M^B^z)+L[9]+3654602809&4294967295,R=M+(P<<4&4294967295|P>>>28),P=z+(R^M^B)+L[12]+3873151461&4294967295,z=R+(P<<11&4294967295|P>>>21),P=B+(z^R^M)+L[15]+530742520&4294967295,B=z+(P<<16&4294967295|P>>>16),P=M+(B^z^R)+L[2]+3299628645&4294967295,M=B+(P<<23&4294967295|P>>>9),P=R+(B^(M|~z))+L[0]+4096336452&4294967295,R=M+(P<<6&4294967295|P>>>26),P=z+(M^(R|~B))+L[7]+1126891415&4294967295,z=R+(P<<10&4294967295|P>>>22),P=B+(R^(z|~M))+L[14]+2878612391&4294967295,B=z+(P<<15&4294967295|P>>>17),P=M+(z^(B|~R))+L[5]+4237533241&4294967295,M=B+(P<<21&4294967295|P>>>11),P=R+(B^(M|~z))+L[12]+1700485571&4294967295,R=M+(P<<6&4294967295|P>>>26),P=z+(M^(R|~B))+L[3]+2399980690&4294967295,z=R+(P<<10&4294967295|P>>>22),P=B+(R^(z|~M))+L[10]+4293915773&4294967295,B=z+(P<<15&4294967295|P>>>17),P=M+(z^(B|~R))+L[1]+2240044497&4294967295,M=B+(P<<21&4294967295|P>>>11),P=R+(B^(M|~z))+L[8]+1873313359&4294967295,R=M+(P<<6&4294967295|P>>>26),P=z+(M^(R|~B))+L[15]+4264355552&4294967295,z=R+(P<<10&4294967295|P>>>22),P=B+(R^(z|~M))+L[6]+2734768916&4294967295,B=z+(P<<15&4294967295|P>>>17),P=M+(z^(B|~R))+L[13]+1309151649&4294967295,M=B+(P<<21&4294967295|P>>>11),P=R+(B^(M|~z))+L[4]+4149444226&4294967295,R=M+(P<<6&4294967295|P>>>26),P=z+(M^(R|~B))+L[11]+3174756917&4294967295,z=R+(P<<10&4294967295|P>>>22),P=B+(R^(z|~M))+L[2]+718787259&4294967295,B=z+(P<<15&4294967295|P>>>17),P=M+(z^(B|~R))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(B+(P<<21&4294967295|P>>>11))&4294967295,D.g[2]=D.g[2]+B&4294967295,D.g[3]=D.g[3]+z&4294967295}s.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var M=R-this.blockSize,L=this.B,B=this.h,z=0;z<R;){if(B==0)for(;z<=M;)r(this,D,z),z+=this.blockSize;if(typeof D=="string"){for(;z<R;)if(L[B++]=D.charCodeAt(z++),B==this.blockSize){r(this,L),B=0;break}}else for(;z<R;)if(L[B++]=D[z++],B==this.blockSize){r(this,L),B=0;break}}this.h=B,this.o+=R},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var M=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=M&255,M/=256;for(this.u(D),D=Array(16),R=M=0;4>R;++R)for(var L=0;32>L;L+=8)D[M++]=this.g[R]>>>L&255;return D};function a(D,R){var M=d;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=R(D)}function u(D,R){this.h=R;for(var M=[],L=!0,B=D.length-1;0<=B;B--){var z=D[B]|0;L&&z==R||(M[B]=z,L=!1)}this.g=M}var d={};function h(D){return-128<=D&&128>D?a(D,function(R){return new u([R|0],0>R?-1:0)}):new u([D|0],0>D?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return U(m(-D));for(var R=[],M=1,L=0;D>=M;L++)R[L]=D/M|0,M*=4294967296;return new u(R,0)}function v(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return U(v(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=m(Math.pow(R,8)),L=T,B=0;B<D.length;B+=8){var z=Math.min(8,D.length-B),P=parseInt(D.substring(B,B+z),R);8>z?(z=m(Math.pow(R,z)),L=L.j(z).add(m(P))):(L=L.j(M),L=L.add(m(P)))}return L}var T=h(0),b=h(1),C=h(16777216);t=u.prototype,t.m=function(){if(V(this))return-U(this).m();for(var D=0,R=1,M=0;M<this.g.length;M++){var L=this.i(M);D+=(0<=L?L:4294967296+L)*R,R*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(N(this))return"0";if(V(this))return"-"+U(this).toString(D);for(var R=m(Math.pow(D,6)),M=this,L="";;){var B=Q(M,R).g;M=j(M,B.j(R));var z=((0<M.g.length?M.g[0]:M.h)>>>0).toString(D);if(M=B,N(M))return z+L;for(;6>z.length;)z="0"+z;L=z+L}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function N(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function V(D){return D.h==-1}t.l=function(D){return D=j(this,D),V(D)?-1:N(D)?0:1};function U(D){for(var R=D.g.length,M=[],L=0;L<R;L++)M[L]=~D.g[L];return new u(M,~D.h).add(b)}t.abs=function(){return V(this)?U(this):this},t.add=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],L=0,B=0;B<=R;B++){var z=L+(this.i(B)&65535)+(D.i(B)&65535),P=(z>>>16)+(this.i(B)>>>16)+(D.i(B)>>>16);L=P>>>16,z&=65535,P&=65535,M[B]=P<<16|z}return new u(M,M[M.length-1]&-2147483648?-1:0)};function j(D,R){return D.add(U(R))}t.j=function(D){if(N(this)||N(D))return T;if(V(this))return V(D)?U(this).j(U(D)):U(U(this).j(D));if(V(D))return U(this.j(U(D)));if(0>this.l(C)&&0>D.l(C))return m(this.m()*D.m());for(var R=this.g.length+D.g.length,M=[],L=0;L<2*R;L++)M[L]=0;for(L=0;L<this.g.length;L++)for(var B=0;B<D.g.length;B++){var z=this.i(L)>>>16,P=this.i(L)&65535,we=D.i(B)>>>16,Ie=D.i(B)&65535;M[2*L+2*B]+=P*Ie,W(M,2*L+2*B),M[2*L+2*B+1]+=z*Ie,W(M,2*L+2*B+1),M[2*L+2*B+1]+=P*we,W(M,2*L+2*B+1),M[2*L+2*B+2]+=z*we,W(M,2*L+2*B+2)}for(L=0;L<R;L++)M[L]=M[2*L+1]<<16|M[2*L];for(L=R;L<2*R;L++)M[L]=0;return new u(M,0)};function W(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function G(D,R){this.g=D,this.h=R}function Q(D,R){if(N(R))throw Error("division by zero");if(N(D))return new G(T,T);if(V(D))return R=Q(U(D),R),new G(U(R.g),U(R.h));if(V(R))return R=Q(D,U(R)),new G(U(R.g),R.h);if(30<D.g.length){if(V(D)||V(R))throw Error("slowDivide_ only works with positive integers.");for(var M=b,L=R;0>=L.l(D);)M=q(M),L=q(L);var B=oe(M,1),z=oe(L,1);for(L=oe(L,2),M=oe(M,2);!N(L);){var P=z.add(L);0>=P.l(D)&&(B=B.add(M),z=P),L=oe(L,1),M=oe(M,1)}return R=j(D,B.j(R)),new G(B,R)}for(B=T;0<=D.l(R);){for(M=Math.max(1,Math.floor(D.m()/R.m())),L=Math.ceil(Math.log(M)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),z=m(M),P=z.j(R);V(P)||0<P.l(D);)M-=L,z=m(M),P=z.j(R);N(z)&&(z=b),B=B.add(z),D=j(D,P)}return new G(B,D)}t.A=function(D){return Q(this,D).h},t.and=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],L=0;L<R;L++)M[L]=this.i(L)&D.i(L);return new u(M,this.h&D.h)},t.or=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],L=0;L<R;L++)M[L]=this.i(L)|D.i(L);return new u(M,this.h|D.h)},t.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),M=[],L=0;L<R;L++)M[L]=this.i(L)^D.i(L);return new u(M,this.h^D.h)};function q(D){for(var R=D.g.length+1,M=[],L=0;L<R;L++)M[L]=D.i(L)<<1|D.i(L-1)>>>31;return new u(M,D.h)}function oe(D,R){var M=R>>5;R%=32;for(var L=D.g.length-M,B=[],z=0;z<L;z++)B[z]=0<R?D.i(z+M)>>>R|D.i(z+M+1)<<32-R:D.i(z+M);return new u(B,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,JS=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,dr=u}).apply(typeof GE<"u"?GE:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QS,Fl,XS,nd,qm,WS,ZS,eb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,S,A){return g==Array.prototype||g==Object.prototype||(g[S]=A.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var S=0;S<g.length;++S){var A=g[S];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var s=n(this);function r(g,S){if(S)e:{var A=s;g=g.split(".");for(var I=0;I<g.length-1;I++){var Y=g[I];if(!(Y in A))break e;A=A[Y]}g=g[g.length-1],I=A[g],S=S(I),S!=I&&S!=null&&e(A,g,{configurable:!0,writable:!0,value:S})}}function a(g,S){g instanceof String&&(g+="");var A=0,I=!1,Y={next:function(){if(!I&&A<g.length){var te=A++;return{value:S(te,g[te]),done:!1}}return I=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}r("Array.prototype.values",function(g){return g||function(){return a(this,function(S,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function h(g){var S=typeof g;return S=S!="object"?S:g?Array.isArray(g)?"array":S:"null",S=="array"||S=="object"&&typeof g.length=="number"}function m(g){var S=typeof g;return S=="object"&&g!=null||S=="function"}function v(g,S,A){return g.call.apply(g.bind,arguments)}function T(g,S,A){if(!g)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,I),g.apply(S,Y)}}return function(){return g.apply(S,arguments)}}function b(g,S,A){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,b.apply(null,arguments)}function C(g,S){var A=Array.prototype.slice.call(arguments,1);return function(){var I=A.slice();return I.push.apply(I,arguments),g.apply(this,I)}}function N(g,S){function A(){}A.prototype=S.prototype,g.aa=S.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(I,Y,te){for(var ge=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)ge[ut-2]=arguments[ut];return S.prototype[Y].apply(I,ge)}}function V(g){const S=g.length;if(0<S){const A=Array(S);for(let I=0;I<S;I++)A[I]=g[I];return A}return[]}function U(g,S){for(let A=1;A<arguments.length;A++){const I=arguments[A];if(h(I)){const Y=g.length||0,te=I.length||0;g.length=Y+te;for(let ge=0;ge<te;ge++)g[Y+ge]=I[ge]}else g.push(I)}}class j{constructor(S,A){this.i=S,this.j=A,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function W(g){return/^[\s\xa0]*$/.test(g)}function G(){var g=d.navigator;return g&&(g=g.userAgent)?g:""}function Q(g){return Q[" "](g),g}Q[" "]=function(){};var q=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function oe(g,S,A){for(const I in g)S.call(A,g[I],I,g)}function D(g,S){for(const A in g)S.call(void 0,g[A],A,g)}function R(g){const S={};for(const A in g)S[A]=g[A];return S}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(g,S){let A,I;for(let Y=1;Y<arguments.length;Y++){I=arguments[Y];for(A in I)g[A]=I[A];for(let te=0;te<M.length;te++)A=M[te],Object.prototype.hasOwnProperty.call(I,A)&&(g[A]=I[A])}}function B(g){var S=1;g=g.split(":");const A=[];for(;0<S&&g.length;)A.push(g.shift()),S--;return g.length&&A.push(g.join(":")),A}function z(g){d.setTimeout(()=>{throw g},0)}function P(){var g=Pe;let S=null;return g.g&&(S=g.g,g.g=g.g.next,g.g||(g.h=null),S.next=null),S}class we{constructor(){this.h=this.g=null}add(S,A){const I=Ie.get();I.set(S,A),this.h?this.h.next=I:this.g=I,this.h=I}}var Ie=new j(()=>new Z,g=>g.reset());class Z{constructor(){this.next=this.g=this.h=null}set(S,A){this.h=S,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,Ee=!1,Pe=new we,He=()=>{const g=d.Promise.resolve(void 0);ce=()=>{g.then(F)}};var F=()=>{for(var g;g=P();){try{g.h.call(g.g)}catch(A){z(A)}var S=Ie;S.j(g),100>S.h&&(S.h++,g.next=S.g,S.g=g)}Ee=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(g,S){this.type=g,this.g=this.target=S,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Te=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var g=!1,S=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};d.addEventListener("test",A,S),d.removeEventListener("test",A,S)}catch{}return g})();function Ne(g,S){if(he.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,I=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=S,S=g.relatedTarget){if(q){e:{try{Q(S.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(S=null)}}else A=="mouseover"?S=g.fromElement:A=="mouseout"&&(S=g.toElement);this.relatedTarget=S,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Ue[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Ne.aa.h.call(this)}}N(Ne,he);var Ue={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ht=0;function lt(g,S,A,I,Y){this.listener=g,this.proxy=null,this.src=S,this.type=A,this.capture=!!I,this.ha=Y,this.key=++Ht,this.da=this.fa=!1}function mn(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Pn(g){this.src=g,this.g={},this.h=0}Pn.prototype.add=function(g,S,A,I,Y){var te=g.toString();g=this.g[te],g||(g=this.g[te]=[],this.h++);var ge=Ui(g,S,I,Y);return-1<ge?(S=g[ge],A||(S.fa=!1)):(S=new lt(S,this.src,te,!!I,Y),S.fa=A,g.push(S)),S};function es(g,S){var A=S.type;if(A in g.g){var I=g.g[A],Y=Array.prototype.indexOf.call(I,S,void 0),te;(te=0<=Y)&&Array.prototype.splice.call(I,Y,1),te&&(mn(S),g.g[A].length==0&&(delete g.g[A],g.h--))}}function Ui(g,S,A,I){for(var Y=0;Y<g.length;++Y){var te=g[Y];if(!te.da&&te.listener==S&&te.capture==!!A&&te.ha==I)return Y}return-1}var Un="closure_lm_"+(1e6*Math.random()|0),Ds={};function Po(g,S,A,I,Y){if(Array.isArray(S)){for(var te=0;te<S.length;te++)Po(g,S[te],A,I,Y);return null}return A=ts(A),g&&g[Fe]?g.K(S,A,m(I)?!!I.capture:!1,Y):Jt(g,S,A,!1,I,Y)}function Jt(g,S,A,I,Y,te){if(!S)throw Error("Invalid event type");var ge=m(Y)?!!Y.capture:!!Y,ut=Ze(g);if(ut||(g[Un]=ut=new Pn(g)),A=ut.add(S,A,I,ge,te),A.proxy)return A;if(I=xt(),A.proxy=I,I.src=g,I.listener=A,g.addEventListener)Te||(Y=ge),Y===void 0&&(Y=!1),g.addEventListener(S.toString(),I,Y);else if(g.attachEvent)g.attachEvent(oi(S.toString()),I);else if(g.addListener&&g.removeListener)g.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return A}function xt(){function g(A){return S.call(g.src,g.listener,A)}const S=Va;return g}function ki(g,S,A,I,Y){if(Array.isArray(S))for(var te=0;te<S.length;te++)ki(g,S[te],A,I,Y);else I=m(I)?!!I.capture:!!I,A=ts(A),g&&g[Fe]?(g=g.i,S=String(S).toString(),S in g.g&&(te=g.g[S],A=Ui(te,A,I,Y),-1<A&&(mn(te[A]),Array.prototype.splice.call(te,A,1),te.length==0&&(delete g.g[S],g.h--)))):g&&(g=Ze(g))&&(S=g.g[S.toString()],g=-1,S&&(g=Ui(S,A,I,Y)),(A=-1<g?S[g]:null)&&Vi(A))}function Vi(g){if(typeof g!="number"&&g&&!g.da){var S=g.src;if(S&&S[Fe])es(S.i,g);else{var A=g.type,I=g.proxy;S.removeEventListener?S.removeEventListener(A,I,g.capture):S.detachEvent?S.detachEvent(oi(A),I):S.addListener&&S.removeListener&&S.removeListener(I),(A=Ze(S))?(es(A,g),A.h==0&&(A.src=null,S[Un]=null)):mn(g)}}}function oi(g){return g in Ds?Ds[g]:Ds[g]="on"+g}function Va(g,S){if(g.da)g=!0;else{S=new Ne(S,this);var A=g.listener,I=g.ha||g.src;g.fa&&Vi(g),g=A.call(I,S)}return g}function Ze(g){return g=g[Un],g instanceof Pn?g:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ts(g){return typeof g=="function"?g:(g[Tt]||(g[Tt]=function(S){return g.handleEvent(S)}),g[Tt])}function Rt(){ne.call(this),this.i=new Pn(this),this.M=this,this.F=null}N(Rt,ne),Rt.prototype[Fe]=!0,Rt.prototype.removeEventListener=function(g,S,A,I){ki(this,g,S,A,I)};function Dt(g,S){var A,I=g.F;if(I)for(A=[];I;I=I.F)A.push(I);if(g=g.M,I=S.type||S,typeof S=="string")S=new he(S,g);else if(S instanceof he)S.target=S.target||g;else{var Y=S;S=new he(I,g),L(S,Y)}if(Y=!0,A)for(var te=A.length-1;0<=te;te--){var ge=S.g=A[te];Y=ri(ge,I,!0,S)&&Y}if(ge=S.g=g,Y=ri(ge,I,!0,S)&&Y,Y=ri(ge,I,!1,S)&&Y,A)for(te=0;te<A.length;te++)ge=S.g=A[te],Y=ri(ge,I,!1,S)&&Y}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var g=this.i,S;for(S in g.g){for(var A=g.g[S],I=0;I<A.length;I++)mn(A[I]);delete g.g[S],g.h--}}this.F=null},Rt.prototype.K=function(g,S,A,I){return this.i.add(String(g),S,!1,A,I)},Rt.prototype.L=function(g,S,A,I){return this.i.add(String(g),S,!0,A,I)};function ri(g,S,A,I){if(S=g.i.g[String(S)],!S)return!0;S=S.concat();for(var Y=!0,te=0;te<S.length;++te){var ge=S[te];if(ge&&!ge.da&&ge.capture==A){var ut=ge.listener,Lt=ge.ha||ge.src;ge.fa&&es(g.i,ge),Y=ut.call(Lt,I)!==!1&&Y}}return Y&&!I.defaultPrevented}function Uo(g,S,A){if(typeof g=="function")A&&(g=b(g,A));else if(g&&typeof g.handleEvent=="function")g=b(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:d.setTimeout(g,S||0)}function ns(g){g.g=Uo(()=>{g.g=null,g.i&&(g.i=!1,ns(g))},g.l);const S=g.h;g.h=null,g.m.apply(null,S)}class Sr extends ne{constructor(S,A){super(),this.m=S,this.l=A,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ns(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Li(g){ne.call(this),this.h=g,this.g={}}N(Li,ne);var et=[];function At(g){oe(g.g,function(S,A){this.g.hasOwnProperty(A)&&Vi(S)},g),g.g={}}Li.prototype.N=function(){Li.aa.N.call(this),At(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sn=d.JSON.stringify,Qt=d.JSON.parse,yu=class{stringify(g){return d.JSON.stringify(g,void 0)}parse(g){return d.JSON.parse(g,void 0)}};function br(){}br.prototype.h=null;function La(g){return g.h||(g.h=g.i())}function Ps(){}var xn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Si(){he.call(this,"d")}N(Si,he);function jn(){he.call(this,"c")}N(jn,he);var kn={},Oi=null;function Us(){return Oi=Oi||new Rt}kn.La="serverreachability";function ko(g){he.call(this,kn.La,g)}N(ko,he);function bi(g){const S=Us();Dt(S,new ko(S))}kn.STAT_EVENT="statevent";function Bi(g,S){he.call(this,kn.STAT_EVENT,g),this.stat=S}N(Bi,he);function zt(g){const S=Us();Dt(S,new Bi(S,g))}kn.Ma="timingevent";function ks(g,S){he.call(this,kn.Ma,g),this.size=S}N(ks,he);function k(g,S){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){g()},S)}function le(){this.g=!0}le.prototype.xa=function(){this.g=!1};function de(g,S,A,I,Y,te){g.info(function(){if(g.g)if(te)for(var ge="",ut=te.split("&"),Lt=0;Lt<ut.length;Lt++){var ze=ut[Lt].split("=");if(1<ze.length){var Wt=ze[0];ze=ze[1];var Zt=Wt.split("_");ge=2<=Zt.length&&Zt[1]=="type"?ge+(Wt+"="+ze+"&"):ge+(Wt+"=redacted&")}}else ge=null;else ge=te;return"XMLHTTP REQ ("+I+") [attempt "+Y+"]: "+S+`
`+A+`
`+ge})}function me(g,S,A,I,Y,te,ge){g.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Y+"]: "+S+`
`+A+`
`+te+" "+ge})}function ae(g,S,A,I){g.info(function(){return"XMLHTTP TEXT ("+S+"): "+ye(g,A)+(I?" "+I:"")})}function pe(g,S){g.info(function(){return"TIMEOUT: "+S})}le.prototype.info=function(){};function ye(g,S){if(!g.g)return S;if(!S)return null;try{var A=JSON.parse(S);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var I=A[g];if(!(2>I.length)){var Y=I[1];if(Array.isArray(Y)&&!(1>Y.length)){var te=Y[0];if(te!="noop"&&te!="stop"&&te!="close")for(var ge=1;ge<Y.length;ge++)Y[ge]=""}}}}return sn(A)}catch{return S}}var Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function xi(){}N(xi,br),xi.prototype.g=function(){return new XMLHttpRequest},xi.prototype.i=function(){return{}},$n=new xi;function pn(g,S,A,I){this.j=g,this.i=S,this.l=A,this.R=I||1,this.U=new Li(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fi}function Fi(){this.i=null,this.g="",this.h=!1}var xr={},ai={};function Vo(g,S,A){g.L=1,g.v=Bo(It(S)),g.m=A,g.P=!0,is(g,null)}function is(g,S){g.F=Date.now(),Ai(g),g.A=It(g.v);var A=g.A,I=g.R;Array.isArray(I)||(I=[String(I)]),rs(A.i,"t",I),g.C=0,A=g.j.J,g.h=new Fi,g.g=Pu(g.j,A?S:null,!g.m),0<g.O&&(g.M=new Sr(b(g.Y,g,g.g),g.O)),S=g.U,A=g.g,I=g.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(et[0]=Y.toString()),Y=et);for(var te=0;te<Y.length;te++){var ge=Po(A,Y[te],I||S.handleEvent,!1,S.h||S);if(!ge)break;S.g[ge.key]=ge}S=g.H?R(g.H):{},g.m?(g.u||(g.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,S)):(g.u="GET",g.g.ea(g.A,g.u,null,S)),bi(),de(g.i,g.u,g.A,g.l,g.R,g.m)}pn.prototype.ca=function(g){g=g.target;const S=this.M;S&&wn(g)==3?S.j():this.Y(g)},pn.prototype.Y=function(g){try{if(g==this.g)e:{const Zt=wn(this.g);var S=this.g.Ba();const Ks=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||qo(this.g)))){this.J||Zt!=4||S==7||(S==8||0>=Ks?bi(3):bi(2)),Ar(this);var A=this.g.Z();this.X=A;t:if(ss(this)){var I=qo(this.g);g="";var Y=I.length,te=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),Vs(this);var ge="";break t}this.h.i=new d.TextDecoder}for(S=0;S<Y;S++)this.h.h=!0,g+=this.h.i.decode(I[S],{stream:!(te&&S==Y-1)});I.length=0,this.h.g+=g,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=A==200,me(this.i,this.u,this.A,this.l,this.R,Zt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Lt=this.g;if((ut=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(ut)){var ze=ut;break t}}ze=null}if(A=ze)ae(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gi(this,A);else{this.o=!1,this.s=3,zt(12),An(this),Vs(this);break e}}if(this.P){A=!0;let Ln;for(;!this.J&&this.C<ge.length;)if(Ln=Lo(this,ge),Ln==ai){Zt==4&&(this.s=4,zt(14),A=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(Ln==xr){this.s=4,zt(15),ae(this.i,this.l,ge,"[Invalid Chunk]"),A=!1;break}else ae(this.i,this.l,Ln,null),Gi(this,Ln);if(ss(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||ge.length!=0||this.h.h||(this.s=1,zt(16),A=!1),this.o=this.o&&A,!A)ae(this.i,this.l,ge,"[Invalid Chunked Response]"),An(this),Vs(this);else if(0<ge.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Ka(Wt),Wt.M=!0,zt(11))}}else ae(this.i,this.l,ge,null),Gi(this,ge);Zt==4&&An(this),this.o&&!this.J&&(Zt==4?Nu(this.j,this):(this.o=!1,Ai(this)))}else xu(this.g),A==400&&0<ge.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),An(this),Vs(this)}}}catch{}finally{}};function ss(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Lo(g,S){var A=g.C,I=S.indexOf(`
`,A);return I==-1?ai:(A=Number(S.substring(A,I)),isNaN(A)?xr:(I+=1,I+A>S.length?ai:(S=S.slice(I,I+A),g.C=I+A,S)))}pn.prototype.cancel=function(){this.J=!0,An(this)};function Ai(g){g.S=Date.now()+g.I,Pt(g,g.I)}function Pt(g,S){if(g.B!=null)throw Error("WatchDog timer not null");g.B=k(b(g.ba,g),S)}function Ar(g){g.B&&(d.clearTimeout(g.B),g.B=null)}pn.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(pe(this.i,this.A),this.L!=2&&(bi(),zt(17)),An(this),this.s=2,Vs(this)):Pt(this,this.S-g)};function Vs(g){g.j.G==0||g.J||Nu(g.j,g)}function An(g){Ar(g);var S=g.M;S&&typeof S.ma=="function"&&S.ma(),g.M=null,At(g.U),g.g&&(S=g.g,g.g=null,S.abort(),S.ma())}function Gi(g,S){try{var A=g.j;if(A.G!=0&&(A.g==g||Ls(A.h,g))){if(!g.K&&Ls(A.h,g)&&A.G==3){try{var I=A.Da.g.parse(S)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Y=I;if(Y[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)$s(A),js(A);else break e;Ya(A),zt(18)}}else A.za=Y[1],0<A.za-A.T&&37500>Y[2]&&A.F&&A.v==0&&!A.C&&(A.C=k(b(A.Za,A),6e3));if(1>=vu(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else ls(A,11)}else if((g.K||A.g==g)&&$s(A),!W(S))for(Y=A.Da.g.parse(S),S=0;S<Y.length;S++){let ze=Y[S];if(A.T=ze[0],ze=ze[1],A.G==2)if(ze[0]=="c"){A.K=ze[1],A.ia=ze[2];const Wt=ze[3];Wt!=null&&(A.la=Wt,A.j.info("VER="+A.la));const Zt=ze[4];Zt!=null&&(A.Aa=Zt,A.j.info("SVER="+A.Aa));const Ks=ze[5];Ks!=null&&typeof Ks=="number"&&0<Ks&&(I=1.5*Ks,A.L=I,A.j.info("backChannelRequestTimeoutMs_="+I)),I=A;const Ln=g.g;if(Ln){const jo=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jo){var te=I.h;te.g||jo.indexOf("spdy")==-1&&jo.indexOf("quic")==-1&&jo.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Os(te,te.h),te.h=null))}if(I.D){const us=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;us&&(I.ya=us,nt(I.I,I.D,us))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),I=A;var ge=g;if(I.qa=Du(I,I.J?I.ia:null,I.W),ge.K){li(I.h,ge);var ut=ge,Lt=I.L;Lt&&(ut.I=Lt),ut.B&&(Ar(ut),Ai(ut)),I.g=ge}else Ru(I);0<A.i.length&&Pr(A)}else ze[0]!="stop"&&ze[0]!="close"||ls(A,7);else A.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?ls(A,7):ja(A):ze[0]!="noop"&&A.l&&A.l.ta(ze),A.v=0)}}bi(4)}catch{}}var Qd=class{constructor(g,S){this.g=g,this.map=S}};function Oa(g){this.l=g||10,d.PerformanceNavigationTiming?(g=d.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ba(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function vu(g){return g.h?1:g.g?g.g.size:0}function Ls(g,S){return g.h?g.h==S:g.g?g.g.has(S):!1}function Os(g,S){g.g?g.g.add(S):g.h=S}function li(g,S){g.h&&g.h==S?g.h=null:g.g&&g.g.has(S)&&g.g.delete(S)}Oa.prototype.cancel=function(){if(this.i=Cn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Cn(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let S=g.i;for(const A of g.g.values())S=S.concat(A.D);return S}return V(g.i)}function _u(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(h(g)){for(var S=[],A=g.length,I=0;I<A;I++)S.push(g[I]);return S}S=[],A=0;for(I in g)S[A++]=g[I];return S}function Xd(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(h(g)||typeof g=="string"){var S=[];g=g.length;for(var A=0;A<g;A++)S.push(A);return S}S=[],A=0;for(const I in g)S[A++]=I;return S}}}function Cr(g,S){if(g.forEach&&typeof g.forEach=="function")g.forEach(S,void 0);else if(h(g)||typeof g=="string")Array.prototype.forEach.call(g,S,void 0);else for(var A=Xd(g),I=_u(g),Y=I.length,te=0;te<Y;te++)S.call(void 0,I[te],A&&A[te],g)}var Fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wr(g,S){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var I=g[A].indexOf("="),Y=null;if(0<=I){var te=g[A].substring(0,I);Y=g[A].substring(I+1)}else te=g[A];S(te,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function os(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof os){this.h=g.h,Bs(this,g.j),this.o=g.o,this.g=g.g,Oo(this,g.s),this.l=g.l;var S=g.i,A=new qi;A.i=S.i,S.g&&(A.g=new Map(S.g),A.h=S.h),Rr(this,A),this.m=g.m}else g&&(S=String(g).match(Fa))?(this.h=!1,Bs(this,S[1]||"",!0),this.o=Fs(S[2]||""),this.g=Fs(S[3]||"",!0),Oo(this,S[4]),this.l=Fs(S[5]||"",!0),Rr(this,S[6]||"",!0),this.m=Fs(S[7]||"")):(this.h=!1,this.i=new qi(null,this.h))}os.prototype.toString=function(){var g=[],S=this.j;S&&g.push(ui(S,Ga,!0),":");var A=this.g;return(A||S=="file")&&(g.push("//"),(S=this.o)&&g.push(ui(S,Ga,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(ui(A,A.charAt(0)=="/"?qa:Eu,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",ui(A,ef)),g.join("")};function It(g){return new os(g)}function Bs(g,S,A){g.j=A?Fs(S,!0):S,g.j&&(g.j=g.j.replace(/:$/,""))}function Oo(g,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);g.s=S}else g.s=null}function Rr(g,S,A){S instanceof qi?(g.i=S,Tu(g.i,g.h)):(A||(S=ui(S,Zd)),g.i=new qi(S,g.h))}function nt(g,S,A){g.i.set(S,A)}function Bo(g){return nt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Fs(g,S){return g?S?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ui(g,S,A){return typeof g=="string"?(g=encodeURI(g).replace(S,Wd),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Wd(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ga=/[#\/\?@]/g,Eu=/[#\?:]/g,qa=/[#\?]/g,Zd=/[#\?@]/g,ef=/#/g;function qi(g,S){this.h=this.g=null,this.i=g||null,this.j=!!S}function Xt(g){g.g||(g.g=new Map,g.h=0,g.i&&wr(g.i,function(S,A){g.add(decodeURIComponent(S.replace(/\+/g," ")),A)}))}t=qi.prototype,t.add=function(g,S){Xt(this),this.i=null,g=Yn(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(S),this.h+=1,this};function Ir(g,S){Xt(g),S=Yn(g,S),g.g.has(S)&&(g.i=null,g.h-=g.g.get(S).length,g.g.delete(S))}function Nr(g,S){return Xt(g),S=Yn(g,S),g.g.has(S)}t.forEach=function(g,S){Xt(this),this.g.forEach(function(A,I){A.forEach(function(Y){g.call(S,Y,I,this)},this)},this)},t.na=function(){Xt(this);const g=Array.from(this.g.values()),S=Array.from(this.g.keys()),A=[];for(let I=0;I<S.length;I++){const Y=g[I];for(let te=0;te<Y.length;te++)A.push(S[I])}return A},t.V=function(g){Xt(this);let S=[];if(typeof g=="string")Nr(this,g)&&(S=S.concat(this.g.get(Yn(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)S=S.concat(g[A])}return S},t.set=function(g,S){return Xt(this),this.i=null,g=Yn(this,g),Nr(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[S]),this.h+=1,this},t.get=function(g,S){return g?(g=this.V(g),0<g.length?String(g[0]):S):S};function rs(g,S,A){Ir(g,S),0<A.length&&(g.i=null,g.g.set(Yn(g,S),V(A)),g.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],S=Array.from(this.g.keys());for(var A=0;A<S.length;A++){var I=S[A];const te=encodeURIComponent(String(I)),ge=this.V(I);for(I=0;I<ge.length;I++){var Y=te;ge[I]!==""&&(Y+="="+encodeURIComponent(String(ge[I]))),g.push(Y)}}return this.i=g.join("&")};function Yn(g,S){return S=String(S),g.j&&(S=S.toLowerCase()),S}function Tu(g,S){S&&!g.j&&(Xt(g),g.i=null,g.g.forEach(function(A,I){var Y=I.toLowerCase();I!=Y&&(Ir(this,I),rs(this,Y,A))},g)),g.j=S}function Ha(g,S){const A=new le;if(d.Image){const I=new Image;I.onload=C(Vn,A,"TestLoadImage: loaded",!0,S,I),I.onerror=C(Vn,A,"TestLoadImage: error",!1,S,I),I.onabort=C(Vn,A,"TestLoadImage: abort",!1,S,I),I.ontimeout=C(Vn,A,"TestLoadImage: timeout",!1,S,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=g}else S(!1)}function Su(g,S){const A=new le,I=new AbortController,Y=setTimeout(()=>{I.abort(),Vn(A,"TestPingServer: timeout",!1,S)},1e4);fetch(g,{signal:I.signal}).then(te=>{clearTimeout(Y),te.ok?Vn(A,"TestPingServer: ok",!0,S):Vn(A,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Y),Vn(A,"TestPingServer: error",!1,S)})}function Vn(g,S,A,I,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),I(A)}catch{}}function Ci(){this.g=new yu}function za(g,S,A){const I=A||"";try{Cr(g,function(Y,te){let ge=Y;m(Y)&&(ge=sn(Y)),S.push(I+te+"="+encodeURIComponent(ge))})}catch(Y){throw S.push(I+"type="+encodeURIComponent("_badmap")),Y}}function Hi(g){this.l=g.Ub||null,this.j=g.eb||!1}N(Hi,br),Hi.prototype.g=function(){return new Kn(this.l,this.j)},Hi.prototype.i=(function(g){return function(){return g}})({});function Kn(g,S){Rt.call(this),this.D=g,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Kn,Rt),t=Kn.prototype,t.open=function(g,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=S,this.readyState=1,Gs(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(S.body=g),(this.D||d).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Gs(this)),this.g&&(this.readyState=3,Gs(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mr(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mr(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var S=g.value?g.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!g.done}))&&(this.response=this.responseText+=S)}g.done?zi(this):Gs(this),this.readyState==3&&Mr(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,zi(this))},t.Qa=function(g){this.g&&(this.response=g,zi(this))},t.ga=function(){this.g&&zi(this)};function zi(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Gs(g)}t.setRequestHeader=function(g,S){this.u.append(g,S)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],S=this.h.entries();for(var A=S.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=S.next();return g.join(`\r
`)};function Gs(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Kn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Fo(g){let S="";return oe(g,function(A,I){S+=I,S+=":",S+=A,S+=`\r
`}),S}function qs(g,S,A){e:{for(I in A){var I=!1;break e}I=!0}I||(A=Fo(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):nt(g,S,A))}function yt(g){Rt.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(yt,Rt);var gn=/^https?$/i,as=["POST","PUT"];t=yt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,S,A,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);S=S?S.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?La(this.o):La($n),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(S,String(g),!0),this.B=!1}catch(te){Go(this,te);return}if(g=A||"",A=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Y in I)A.set(Y,I[Y]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const te of I.keys())A.set(te,I.get(te));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(A.keys()).find(te=>te.toLowerCase()=="content-type"),Y=d.FormData&&g instanceof d.FormData,!(0<=Array.prototype.indexOf.call(as,S,void 0))||I||Y||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,ge]of A)this.g.setRequestHeader(te,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dr(this),this.u=!0,this.g.send(g),this.u=!1}catch(te){Go(this,te)}};function Go(g,S){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=S,g.m=5,Hs(g),zs(g)}function Hs(g){g.A||(g.A=!0,Dt(g,"complete"),Dt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Dt(this,"complete"),Dt(this,"abort"),zs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zs(this,!0)),yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bu(this):this.bb())},t.bb=function(){bu(this)};function bu(g){if(g.h&&typeof u<"u"&&(!g.v[1]||wn(g)!=4||g.Z()!=2)){if(g.u&&wn(g)==4)Uo(g.Ea,0,g);else if(Dt(g,"readystatechange"),wn(g)==4){g.h=!1;try{const ge=g.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var A;if(!(A=S)){var I;if(I=ge===0){var Y=String(g.D).match(Fa)[1]||null;!Y&&d.self&&d.self.location&&(Y=d.self.location.protocol.slice(0,-1)),I=!gn.test(Y?Y.toLowerCase():"")}A=I}if(A)Dt(g,"complete"),Dt(g,"success");else{g.m=6;try{var te=2<wn(g)?g.g.statusText:""}catch{te=""}g.l=te+" ["+g.Z()+"]",Hs(g)}}finally{zs(g)}}}}function zs(g,S){if(g.g){Dr(g);const A=g.g,I=g.v[0]?()=>{}:null;g.g=null,g.v=null,S||Dt(g,"ready");try{A.onreadystatechange=I}catch{}}}function Dr(g){g.I&&(d.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function wn(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var S=this.g.responseText;return g&&S.indexOf(g)==0&&(S=S.substring(g.length)),Qt(S)}};function qo(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function xu(g){const S={};g=(g.g&&2<=wn(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<g.length;I++){if(W(g[I]))continue;var A=B(g[I]);const Y=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const te=S[Y]||[];S[Y]=te,te.push(A)}D(S,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ho(g,S,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||S}function Au(g){this.Aa=0,this.i=[],this.j=new le,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ho("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ho("baseRetryDelayMs",5e3,g),this.cb=Ho("retryDelaySeedMs",1e4,g),this.Wa=Ho("forwardChannelMaxRetries",2,g),this.wa=Ho("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Oa(g&&g.concurrentRequestLimit),this.Da=new Ci,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Au.prototype,t.la=8,t.G=1,t.connect=function(g,S,A,I){zt(0),this.W=g,this.H=S||{},A&&I!==void 0&&(this.H.OSID=A,this.H.OAID=I),this.F=this.X,this.I=Du(this,null,this.W),Pr(this)};function ja(g){if(Cu(g),g.G==3){var S=g.U++,A=It(g.I);if(nt(A,"SID",g.K),nt(A,"RID",S),nt(A,"TYPE","terminate"),zo(g,A),S=new pn(g,g.j,S),S.L=2,S.v=Bo(It(A)),A=!1,d.navigator&&d.navigator.sendBeacon)try{A=d.navigator.sendBeacon(S.v.toString(),"")}catch{}!A&&d.Image&&(new Image().src=S.v,A=!0),A||(S.g=Pu(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Ai(S)}Ja(g)}function js(g){g.g&&(Ka(g),g.g.cancel(),g.g=null)}function Cu(g){js(g),g.u&&(d.clearTimeout(g.u),g.u=null),$s(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&d.clearTimeout(g.s),g.s=null)}function Pr(g){if(!Ba(g.h)&&!g.s){g.s=!0;var S=g.Ga;ce||He(),Ee||(ce(),Ee=!0),Pe.add(S,g),g.B=0}}function tf(g,S){return vu(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=S.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=k(b(g.Ga,g,S),Mu(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const Y=new pn(this,this.j,g);let te=this.o;if(this.S&&(te?(te=R(te),L(te,this.S)):te=this.S),this.m!==null||this.O||(Y.H=te,te=null),this.P)e:{for(var S=0,A=0;A<this.i.length;A++){t:{var I=this.i[A];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(S+=I,4096<S){S=A;break e}if(S===4096||A===this.i.length-1){S=A+1;break e}}S=1e3}else S=1e3;S=$a(this,Y,S),A=It(this.I),nt(A,"RID",g),nt(A,"CVER",22),this.D&&nt(A,"X-HTTP-Session-Id",this.D),zo(this,A),te&&(this.O?S="headers="+encodeURIComponent(String(Fo(te)))+"&"+S:this.m&&qs(A,this.m,te)),Os(this.h,Y),this.Ua&&nt(A,"TYPE","init"),this.P?(nt(A,"$req",S),nt(A,"SID","null"),Y.T=!0,Vo(Y,A,null)):Vo(Y,A,S),this.G=2}}else this.G==3&&(g?wu(this,g):this.i.length==0||Ba(this.h)||wu(this))};function wu(g,S){var A;S?A=S.l:A=g.U++;const I=It(g.I);nt(I,"SID",g.K),nt(I,"RID",A),nt(I,"AID",g.T),zo(g,I),g.m&&g.o&&qs(I,g.m,g.o),A=new pn(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),S&&(g.i=S.D.concat(g.i)),S=$a(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Os(g.h,A),Vo(A,I,S)}function zo(g,S){g.H&&oe(g.H,function(A,I){nt(S,I,A)}),g.l&&Cr({},function(A,I){nt(S,I,A)})}function $a(g,S,A){A=Math.min(g.i.length,A);var I=g.l?b(g.l.Na,g.l,g):null;e:{var Y=g.i;let te=-1;for(;;){const ge=["count="+A];te==-1?0<A?(te=Y[0].g,ge.push("ofs="+te)):te=0:ge.push("ofs="+te);let ut=!0;for(let Lt=0;Lt<A;Lt++){let ze=Y[Lt].g;const Wt=Y[Lt].map;if(ze-=te,0>ze)te=Math.max(0,Y[Lt].g-100),ut=!1;else try{za(Wt,ge,"req"+ze+"_")}catch{I&&I(Wt)}}if(ut){I=ge.join("&");break e}}}return g=g.i.splice(0,A),S.D=g,I}function Ru(g){if(!g.g&&!g.u){g.Y=1;var S=g.Fa;ce||He(),Ee||(ce(),Ee=!0),Pe.add(S,g),g.v=0}}function Ya(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=k(b(g.Fa,g),Mu(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=k(b(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),js(this),Iu(this))};function Ka(g){g.A!=null&&(d.clearTimeout(g.A),g.A=null)}function Iu(g){g.g=new pn(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var S=It(g.qa);nt(S,"RID","rpc"),nt(S,"SID",g.K),nt(S,"AID",g.T),nt(S,"CI",g.F?"0":"1"),!g.F&&g.ja&&nt(S,"TO",g.ja),nt(S,"TYPE","xmlhttp"),zo(g,S),g.m&&g.o&&qs(S,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=Bo(It(S)),A.m=null,A.P=!0,is(A,g)}t.Za=function(){this.C!=null&&(this.C=null,js(this),Ya(this),zt(19))};function $s(g){g.C!=null&&(d.clearTimeout(g.C),g.C=null)}function Nu(g,S){var A=null;if(g.g==S){$s(g),Ka(g),g.g=null;var I=2}else if(Ls(g.h,S))A=S.D,li(g.h,S),I=1;else return;if(g.G!=0){if(S.o)if(I==1){A=S.m?S.m.length:0,S=Date.now()-S.F;var Y=g.B;I=Us(),Dt(I,new ks(I,A)),Pr(g)}else Ru(g);else if(Y=S.s,Y==3||Y==0&&0<S.X||!(I==1&&tf(g,S)||I==2&&Ya(g)))switch(A&&0<A.length&&(S=g.h,S.i=S.i.concat(A)),Y){case 1:ls(g,5);break;case 4:ls(g,10);break;case 3:ls(g,6);break;default:ls(g,2)}}}function Mu(g,S){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*S}function ls(g,S){if(g.j.info("Error code "+S),S==2){var A=b(g.fb,g),I=g.Xa;const Y=!I;I=new os(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Bs(I,"https"),Bo(I),Y?Ha(I.toString(),A):Su(I.toString(),A)}else zt(2);g.G=0,g.l&&g.l.sa(S),Ja(g),Cu(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Ja(g){if(g.G=0,g.ka=[],g.l){const S=Cn(g.h);(S.length!=0||g.i.length!=0)&&(U(g.ka,S),U(g.ka,g.i),g.h.i.length=0,V(g.i),g.i.length=0),g.l.ra()}}function Du(g,S,A){var I=A instanceof os?It(A):new os(A);if(I.g!="")S&&(I.g=S+"."+I.g),Oo(I,I.s);else{var Y=d.location;I=Y.protocol,S=S?S+"."+Y.hostname:Y.hostname,Y=+Y.port;var te=new os(null);I&&Bs(te,I),S&&(te.g=S),Y&&Oo(te,Y),A&&(te.l=A),I=te}return A=g.D,S=g.ya,A&&S&&nt(I,A,S),nt(I,"VER",g.la),zo(g,I),I}function Pu(g,S,A){if(S&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=g.Ca&&!g.pa?new yt(new Hi({eb:A})):new yt(g.pa),S.Ha(g.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uu(){}t=Uu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ur(){}Ur.prototype.g=function(g,S){return new Rn(g,S)};function Rn(g,S){Rt.call(this),this.g=new Au(S),this.l=g,this.h=S&&S.messageUrlParams||null,g=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(g?g["X-WebChannel-Content-Type"]=S.messageContentType:g={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(g?g["X-WebChannel-Client-Profile"]=S.va:g={"X-WebChannel-Client-Profile":S.va}),this.g.S=g,(g=S&&S.Sb)&&!W(g)&&(this.g.m=g),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!W(S)&&(this.g.D=S,g=this.h,g!==null&&S in g&&(g=this.h,S in g&&delete g[S])),this.j=new Ys(this)}N(Rn,Rt),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){ja(this.g)},Rn.prototype.o=function(g){var S=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=sn(g),g=A);S.i.push(new Qd(S.Ya++,g)),S.G==3&&Pr(S)},Rn.prototype.N=function(){this.g.l=null,delete this.j,ja(this.g),delete this.g,Rn.aa.N.call(this)};function ku(g){Si.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var S=g.__sm__;if(S){e:{for(const A in S){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,S=S!==null&&g in S?S[g]:void 0),this.data=S}else this.data=g}N(ku,Si);function Vu(){jn.call(this),this.status=1}N(Vu,jn);function Ys(g){this.g=g}N(Ys,Uu),Ys.prototype.ua=function(){Dt(this.g,"a")},Ys.prototype.ta=function(g){Dt(this.g,new ku(g))},Ys.prototype.sa=function(g){Dt(this.g,new Vu)},Ys.prototype.ra=function(){Dt(this.g,"b")},Ur.prototype.createWebChannel=Ur.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,eb=function(){return new Ur},ZS=function(){return Us()},WS=kn,qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,nd=Re,tt.COMPLETE="complete",XS=tt,Ps.EventType=xn,xn.OPEN="a",xn.CLOSE="b",xn.ERROR="c",xn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Fl=Ps,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,QS=yt}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const qE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new FS("@firebase/firestore");function Vl(){return mr.logLevel}function be(t,...e){if(mr.logLevel<=We.DEBUG){const n=e.map(Ep);mr.debug(`Firestore (${Da}): ${t}`,...n)}}function Rs(t,...e){if(mr.logLevel<=We.ERROR){const n=e.map(Ep);mr.error(`Firestore (${Da}): ${t}`,...n)}}function Sa(t,...e){if(mr.logLevel<=We.WARN){const n=e.map(Ep);mr.warn(`Firestore (${Da}): ${t}`,...n)}}function Ep(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t="Unexpected state"){const e=`FIRESTORE (${Da}) INTERNAL ASSERTION FAILED: `+t;throw Rs(e),new Error(e)}function ft(t,e){t||ke()}function Be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends _r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(En.UNAUTHENTICATED)))}shutdown(){}}class KP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class JP{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ft(this.o===void 0);let s=this.i;const r=h=>this.i!==s?(s=this.i,n(h)):Promise.resolve();let a=new Co;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Co,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await r(this.currentUser)}))},d=h=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Co)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ft(typeof s.accessToken=="string"),new tb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string"),new En(e)}}class QP{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=En.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class XP{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new QP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class WP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ft(this.o===void 0);const s=a=>{a.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>s(a)))};const r=a=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?r(a):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ft(typeof n.token=="string"),this.R=n.token,new WP(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=eU(40);for(let a=0;a<r.length;++a)s.length<20&&r[a]<n&&(s+=e.charAt(r[a]%e.length))}return s}}function ot(t,e){return t<e?-1:t>e?1:0}function ba(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Kt(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Kt(0,0))}static max(){return new Oe(new Kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,s){n===void 0?n=0:n>e.length&&ke(),s===void 0?s=e.length-n:s>e.length-n&&ke(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return tu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tu?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const a=e.get(r),u=n.get(r);if(a<u)return-1;if(a>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class bt extends tu{construct(e,n,s){return new bt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const tU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends tu{construct(e,n,s){return new dn(e,n,s)}static isValidIdentifier(e){return tU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dn(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const a=()=>{if(s.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new Ae(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ae(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=h,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(s+=d,r++):(a(),r++)}if(a(),u)throw new Ae(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(bt.fromString(e))}static fromName(e){return new Me(bt.fromString(e).popFirst(5))}static empty(){return new Me(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new bt(e.slice()))}}function nU(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Oe.fromTimestamp(s===1e9?new Kt(n+1,0):new Kt(n,s));return new Ro(r,Me.empty(),e)}function iU(t){return new Ro(t.readTime,t.key,-1)}class Ro{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ro(Oe.min(),Me.empty(),-1)}static max(){return new Ro(Oe.max(),Me.empty(),-1)}}function sU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==oU)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((s,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,s)=>{n(e)}))}static reject(e){return new fe(((n,s)=>{s(e)}))}static waitFor(e){return new fe(((n,s)=>{let r=0,a=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++a,u&&a===r&&n()}),(h=>s(h)))})),u=!0,a===r&&n()}))}static or(e){let n=fe.resolve(!1);for(const s of e)n=n.next((r=>r?fe.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,a)=>{s.push(n.call(this,r,a))})),this.waitFor(s)}static mapArray(e,n){return new fe(((s,r)=>{const a=e.length,u=new Array(a);let d=0;for(let h=0;h<a;h++){const m=h;n(e[m]).next((v=>{u[m]=v,++d,d===a&&s(u)}),(v=>r(v)))}}))}static doWhile(e,n){return new fe(((s,r)=>{const a=()=>{e()===!0?n().next((()=>{a()}),r):s()};a()}))}}function aU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Tp.oe=-1;function Dd(t){return t==null}function gd(t){return t===0&&1/t==-1/0}function lU(t){return typeof t=="number"&&Number.isInteger(t)&&!gd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Er(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ib(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||cn.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?s(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,n,s,r,a){this.key=e,this.value=n,this.color=s??cn.RED,this.left=r??cn.EMPTY,this.right=a??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,a){return new cn(e??this.key,n??this.value,s??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const a=s(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,n,s),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return cn.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const e=this.left.check();if(e!==this.right.check())throw ke();return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(e,n,s,r,a){return this}insert(e,n,s){return new cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zE(this.data.getIterator())}getIteratorFrom(e){return new zE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=s.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new fn(this.comparator);return n.data=e,n}}class zE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new ni([])}unionWith(e){let n=new fn(dn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ni(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new sb("Invalid base64 string: "+a):a}})(e);return new hn(n)}static fromUint8Array(e){const n=(function(r){let a="";for(let u=0;u<r.length;++u)a+=String.fromCharCode(r[u]);return a})(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const uU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Io(t){if(ft(!!t),typeof t=="string"){let e=0;const n=uU.exec(t);if(ft(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pr(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bp(t){const e=t.mapValue.fields.__previous_value__;return Sp(e)?bp(e):e}function nu(t){const e=Io(t.mapValue.fields.__local_write_time__.timestampValue);return new Kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n,s,r,a,u,d,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=m}}class iu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc={mapValue:{}};function gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sp(t)?4:fU(t)?9007199254740991:dU(t)?10:11:ke()}function Wi(t,e){if(t===e)return!0;const n=gr(t);if(n!==gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nu(t).isEqual(nu(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const u=Io(r.timestampValue),d=Io(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,a){return pr(r.bytesValue).isEqual(pr(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,a){return Vt(r.geoPointValue.latitude)===Vt(a.geoPointValue.latitude)&&Vt(r.geoPointValue.longitude)===Vt(a.geoPointValue.longitude)})(t,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Vt(r.integerValue)===Vt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const u=Vt(r.doubleValue),d=Vt(a.doubleValue);return u===d?gd(u)===gd(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return ba(t.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(r,a){const u=r.mapValue.fields||{},d=a.mapValue.fields||{};if(HE(u)!==HE(d))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(d[h]===void 0||!Wi(u[h],d[h])))return!1;return!0})(t,e);default:return ke()}}function su(t,e){return(t.values||[]).find((n=>Wi(n,e)))!==void 0}function xa(t,e){if(t===e)return 0;const n=gr(t),s=gr(e);if(n!==s)return ot(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Vt(a.integerValue||a.doubleValue),h=Vt(u.integerValue||u.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(t,e);case 3:return jE(t.timestampValue,e.timestampValue);case 4:return jE(nu(t),nu(e));case 5:return ot(t.stringValue,e.stringValue);case 6:return(function(a,u){const d=pr(a),h=pr(u);return d.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),h=u.split("/");for(let m=0;m<d.length&&m<h.length;m++){const v=ot(d[m],h[m]);if(v!==0)return v}return ot(d.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=ot(Vt(a.latitude),Vt(u.latitude));return d!==0?d:ot(Vt(a.longitude),Vt(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return $E(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,h,m,v;const T=a.fields||{},b=u.fields||{},C=(d=T.value)===null||d===void 0?void 0:d.arrayValue,N=(h=b.value)===null||h===void 0?void 0:h.arrayValue,V=ot(((m=C==null?void 0:C.values)===null||m===void 0?void 0:m.length)||0,((v=N==null?void 0:N.values)===null||v===void 0?void 0:v.length)||0);return V!==0?V:$E(C,N)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Kc.mapValue&&u===Kc.mapValue)return 0;if(a===Kc.mapValue)return 1;if(u===Kc.mapValue)return-1;const d=a.fields||{},h=Object.keys(d),m=u.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let T=0;T<h.length&&T<v.length;++T){const b=ot(h[T],v[T]);if(b!==0)return b;const C=xa(d[h[T]],m[v[T]]);if(C!==0)return C}return ot(h.length,v.length)})(t.mapValue,e.mapValue);default:throw ke()}}function jE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=Io(t),s=Io(e),r=ot(n.seconds,s.seconds);return r!==0?r:ot(n.nanos,s.nanos)}function $E(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const a=xa(n[r],s[r]);if(a)return a}return ot(n.length,s.length)}function Aa(t){return Hm(t)}function Hm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Io(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return pr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Me.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const a of n.values||[])r?r=!1:s+=",",s+=Hm(a);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const u of s)a?a=!1:r+=",",r+=`${u}:${Hm(n.fields[u])}`;return r+"}"})(t.mapValue):ke()}function zm(t){return!!t&&"integerValue"in t}function xp(t){return!!t&&"arrayValue"in t}function YE(t){return!!t&&"nullValue"in t}function KE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function id(t){return!!t&&"mapValue"in t}function dU(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function zl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Er(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=zl(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function fU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!id(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zl(n)}setAll(e){let n=dn.emptyPath(),s={},r=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const h=this.getFieldsMap(n);this.applyChanges(h,s,r),s={},r=[],n=d.popLast()}u?s[d.lastSegment()]=zl(u):r.push(d.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,s,r)}delete(e){const n=this.field(e.popLast());id(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];id(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Er(n,((r,a)=>e[r]=a));for(const r of s)delete e[r]}clone(){return new zn(zl(this.value))}}function ob(t){const e=[];return Er(t.fields,((n,s)=>{const r=new dn([n]);if(id(s)){const a=ob(s.mapValue).fields;if(a.length===0)e.push(r);else for(const u of a)e.push(r.child(u))}else e.push(r)})),new ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,s,r,a,u,d){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Tn(e,0,Oe.min(),Oe.min(),Oe.min(),zn.empty(),0)}static newFoundDocument(e,n,s,r){return new Tn(e,1,n,Oe.min(),s,r,0)}static newNoDocument(e,n){return new Tn(e,2,n,Oe.min(),Oe.min(),zn.empty(),0)}static newUnknownDocument(e,n){return new Tn(e,3,n,Oe.min(),Oe.min(),zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){this.position=e,this.inclusive=n}}function JE(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const a=e[r],u=t.position[r];if(a.field.isKeyField()?s=Me.comparator(Me.fromName(u.referenceValue),n.key):s=xa(u,n.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function QE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n="asc"){this.field=e,this.dir=n}}function hU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{}class Yt extends rb{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new pU(e,n,s):n==="array-contains"?new vU(e,s):n==="in"?new _U(e,s):n==="not-in"?new EU(e,s):n==="array-contains-any"?new TU(e,s):new Yt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new gU(e,s):new yU(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xa(n,this.value)):n!==null&&gr(this.value)===gr(n)&&this.matchesComparison(xa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zi extends rb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zi(e,n)}matches(e){return ab(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ab(t){return t.op==="and"}function lb(t){return mU(t)&&ab(t)}function mU(t){for(const e of t.filters)if(e instanceof Zi)return!1;return!0}function jm(t){if(t instanceof Yt)return t.field.canonicalString()+t.op.toString()+Aa(t.value);if(lb(t))return t.filters.map((e=>jm(e))).join(",");{const e=t.filters.map((n=>jm(n))).join(",");return`${t.op}(${e})`}}function ub(t,e){return t instanceof Yt?(function(s,r){return r instanceof Yt&&s.op===r.op&&s.field.isEqual(r.field)&&Wi(s.value,r.value)})(t,e):t instanceof Zi?(function(s,r){return r instanceof Zi&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((a,u,d)=>a&&ub(u,r.filters[d])),!0):!1})(t,e):void ke()}function cb(t){return t instanceof Yt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Aa(n.value)}`})(t):t instanceof Zi?(function(n){return n.op.toString()+" {"+n.getFilters().map(cb).join(" ,")+"}"})(t):"Filter"}class pU extends Yt{constructor(e,n,s){super(e,n,s),this.key=Me.fromName(s.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class gU extends Yt{constructor(e,n){super(e,"in",n),this.keys=db("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class yU extends Yt{constructor(e,n){super(e,"not-in",n),this.keys=db("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function db(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((s=>Me.fromName(s.referenceValue)))}class vU extends Yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xp(n)&&su(n.arrayValue,this.value)}}class _U extends Yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&su(this.value.arrayValue,n)}}class EU extends Yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!su(this.value.arrayValue,n)}}class TU extends Yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>su(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e,n=null,s=[],r=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function XE(t,e=null,n=[],s=[],r=null,a=null,u=null){return new SU(t,e,n,s,r,a,u)}function Ap(t){const e=Be(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>jm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(a){return a.field.canonicalString()+a.dir})(s))).join(","),Dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Aa(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Aa(s))).join(",")),e.ue=n}return e.ue}function Cp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ub(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QE(t.startAt,e.startAt)&&QE(t.endAt,e.endAt)}function $m(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n=null,s=[],r=[],a=null,u="F",d=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bU(t,e,n,s,r,a,u,d){return new Pd(t,e,n,s,r,a,u,d)}function fb(t){return new Pd(t)}function WE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xU(t){return t.collectionGroup!==null}function jl(t){const e=Be(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new fn(dn.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new vd(a,s))})),n.has(dn.keyField().canonicalString())||e.ce.push(new vd(dn.keyField(),s))}return e.ce}function Qi(t){const e=Be(t);return e.le||(e.le=AU(e,jl(t))),e.le}function AU(t,e){if(t.limitType==="F")return XE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new vd(r.field,a)}));const n=t.endAt?new yd(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new yd(t.startAt.position,t.startAt.inclusive):null;return XE(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Ym(t,e,n){return new Pd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ud(t,e){return Cp(Qi(t),Qi(e))&&t.limitType===e.limitType}function hb(t){return`${Ap(Qi(t))}|lt:${t.limitType}`}function fa(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>cb(r))).join(", ")}]`),Dd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>Aa(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>Aa(r))).join(",")),`Target(${s})`})(Qi(t))}; limitType=${t.limitType})`}function kd(t,e){return e.isFoundDocument()&&(function(s,r){const a=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):Me.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)})(t,e)&&(function(s,r){for(const a of jl(s))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const a of s.filters)if(!a.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(u,d,h){const m=JE(u,d,h);return u.inclusive?m<=0:m<0})(s.startAt,jl(s),r)||s.endAt&&!(function(u,d,h){const m=JE(u,d,h);return u.inclusive?m>=0:m>0})(s.endAt,jl(s),r))})(t,e)}function CU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mb(t){return(e,n)=>{let s=!1;for(const r of jl(t)){const a=wU(r,e,n);if(a!==0)return a;s=s||r.field.isKeyField()}return 0}}function wU(t,e,n){const s=t.field.isKeyField()?Me.comparator(e.key,n.key):(function(a,u,d){const h=u.data.field(a),m=d.data.field(a);return h!==null&&m!==null?xa(h,m):ke()})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,a]of s)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,((n,s)=>{for(const[r,a]of s)e(r,a)}))}isEmpty(){return ib(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=new Ct(Me.comparator);function Is(){return RU}const pb=new Ct(Me.comparator);function Gl(...t){let e=pb;for(const n of t)e=e.insert(n.key,n);return e}function gb(t){let e=pb;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function cr(){return $l()}function yb(){return $l()}function $l(){return new Pa((t=>t.toString()),((t,e)=>t.isEqual(e)))}const IU=new Ct(Me.comparator),NU=new fn(Me.comparator);function Je(...t){let e=NU;for(const n of t)e=e.add(n);return e}const MU=new fn(ot);function DU(){return MU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gd(e)?"-0":e}}function vb(t){return{integerValue:""+t}}function PU(t,e){return lU(e)?vb(e):wp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(){this._=void 0}}function UU(t,e,n){return t instanceof _d?(function(r,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Sp(a)&&(a=bp(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(n,e):t instanceof ou?Eb(t,e):t instanceof ru?Tb(t,e):(function(r,a){const u=_b(r,a),d=ZE(u)+ZE(r.Pe);return zm(u)&&zm(r.Pe)?vb(d):wp(r.serializer,d)})(t,e)}function kU(t,e,n){return t instanceof ou?Eb(t,e):t instanceof ru?Tb(t,e):n}function _b(t,e){return t instanceof Ed?(function(s){return zm(s)||(function(a){return!!a&&"doubleValue"in a})(s)})(e)?e:{integerValue:0}:null}class _d extends Vd{}class ou extends Vd{constructor(e){super(),this.elements=e}}function Eb(t,e){const n=Sb(e);for(const s of t.elements)n.some((r=>Wi(r,s)))||n.push(s);return{arrayValue:{values:n}}}class ru extends Vd{constructor(e){super(),this.elements=e}}function Tb(t,e){let n=Sb(e);for(const s of t.elements)n=n.filter((r=>!Wi(r,s)));return{arrayValue:{values:n}}}class Ed extends Vd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ZE(t){return Vt(t.integerValue||t.doubleValue)}function Sb(t){return xp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function VU(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof ou&&r instanceof ou||s instanceof ru&&r instanceof ru?ba(s.elements,r.elements,Wi):s instanceof Ed&&r instanceof Ed?Wi(s.Pe,r.Pe):s instanceof _d&&r instanceof _d})(t.transform,e.transform)}class LU{constructor(e,n){this.version=e,this.transformResults=n}}class Ei{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ei}static exists(e){return new Ei(void 0,e)}static updateTime(e){return new Ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ld{}function bb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Od(t.key,Ei.none()):new du(t.key,t.data,Ei.none());{const n=t.data,s=zn.empty();let r=new fn(dn.comparator);for(let a of e.fields)if(!r.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?s.delete(a):s.set(a,u),r=r.add(a)}return new Do(t.key,s,new ni(r.toArray()),Ei.none())}}function OU(t,e,n){t instanceof du?(function(r,a,u){const d=r.value.clone(),h=tT(r.fieldTransforms,a,u.transformResults);d.setAll(h),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof Do?(function(r,a,u){if(!sd(r.precondition,a))return void a.convertToUnknownDocument(u.version);const d=tT(r.fieldTransforms,a,u.transformResults),h=a.data;h.setAll(xb(r)),h.setAll(d),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):(function(r,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Yl(t,e,n,s){return t instanceof du?(function(a,u,d,h){if(!sd(a.precondition,u))return d;const m=a.value.clone(),v=nT(a.fieldTransforms,h,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(t,e,n,s):t instanceof Do?(function(a,u,d,h){if(!sd(a.precondition,u))return d;const m=nT(a.fieldTransforms,h,u),v=u.data;return v.setAll(xb(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(t,e,n,s):(function(a,u,d){return sd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function BU(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),a=_b(s.transform,r||null);a!=null&&(n===null&&(n=zn.empty()),n.set(s.field,a))}return n||null}function eT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ba(s,r,((a,u)=>VU(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class du extends Ld{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Do extends Ld{constructor(e,n,s,r,a=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xb(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function tT(t,e,n){const s=new Map;ft(t.length===n.length);for(let r=0;r<n.length;r++){const a=t[r],u=a.transform,d=e.data.field(a.field);s.set(a.field,kU(u,d,n[r]))}return s}function nT(t,e,n){const s=new Map;for(const r of t){const a=r.transform,u=n.data.field(r.field);s.set(r.field,UU(a,u,e))}return s}class Od extends Ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FU extends Ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&OU(a,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Yl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Yl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=yb();return this.mutations.forEach((r=>{const a=e.get(r.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=n.has(r.key)?null:d;const h=bb(u,d);h!==null&&s.set(r.key,h),u.isValidDocument()||u.convertToNoDocument(Oe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,((n,s)=>eT(n,s)))&&ba(this.baseMutations,e.baseMutations,((n,s)=>eT(n,s)))}}class Rp{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){ft(e.mutations.length===s.length);let r=(function(){return IU})();const a=e.mutations;for(let u=0;u<a.length;u++)r=r.insert(a[u].key,s[u].version);return new Rp(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Xe;function zU(t){switch(t){default:return ke();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function Ab(t){if(t===void 0)return Rs("GRPC error has no .code"),ue.UNKNOWN;switch(t){case qt.OK:return ue.OK;case qt.CANCELLED:return ue.CANCELLED;case qt.UNKNOWN:return ue.UNKNOWN;case qt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case qt.INTERNAL:return ue.INTERNAL;case qt.UNAVAILABLE:return ue.UNAVAILABLE;case qt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case qt.NOT_FOUND:return ue.NOT_FOUND;case qt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case qt.ABORTED:return ue.ABORTED;case qt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case qt.DATA_LOSS:return ue.DATA_LOSS;default:return ke()}}(Xe=qt||(qt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=new dr([4294967295,4294967295],0);function iT(t){const e=jU().encode(t),n=new JS;return n.update(e),new Uint8Array(n.digest())}function sT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new dr([n,s],0),new dr([r,a],0)]}class Ip{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ql(`Invalid padding: ${n}`);if(s<0)throw new ql(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ql(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=dr.fromNumber(this.Ie)}Ee(e,n,s){let r=e.add(n.multiply(dr.fromNumber(s)));return r.compare($U)===1&&(r=new dr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=iT(e),[s,r]=sT(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(s,r,a);if(!this.de(u))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Ip(a,r,n);return s.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const n=iT(e),[s,r]=sT(n);for(let a=0;a<this.hashCount;a++){const u=this.Ee(s,r,a);this.Ae(u)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,s,r,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Bd(Oe.min(),r,new Ct(ot),Is(),Je())}}class fu{constructor(e,n,s,r,a){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new fu(s,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n,s,r){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=r}}class Cb{constructor(e,n){this.targetId=e,this.me=n}}class wb{constructor(e,n,s=hn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class oT{constructor(){this.fe=0,this.ge=aT(),this.pe=hn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Je(),n=Je(),s=Je();return this.ge.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ke()}})),new fu(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=aT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ft(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class YU{constructor(e){this.Le=e,this.Be=new Map,this.ke=Is(),this.qe=rT(),this.Qe=new Ct(ot)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const s=this.Ge(n);switch(e.state){case 0:this.ze(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),s.De(e.resumeToken));break;default:ke()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((s,r)=>{this.ze(r)&&n(r)}))}He(e){const n=e.targetId,s=e.me.count,r=this.Je(n);if(r){const a=r.target;if($m(a))if(s===0){const u=new Me(a.path);this.Ue(n,u,Tn.newNoDocument(u,Oe.min()))}else ft(s===1);else{const u=this.Ye(n);if(u!==s){const d=this.Ze(e),h=d?this.Xe(d,e,u):1;if(h!==0){this.je(n);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:a=0}=n;let u,d;try{u=pr(s).toUint8Array()}catch(h){if(h instanceof sb)return Sa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new Ip(u,r,a)}catch(h){return Sa(h instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.Ie===0?null:d}Xe(e,n,s){return n.me.count===s-this.nt(e,n.targetId)?0:2}nt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let r=0;return s.forEach((a=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(n,a,null),r++)})),r}rt(e){const n=new Map;this.Be.forEach(((a,u)=>{const d=this.Je(u);if(d){if(a.current&&$m(d.target)){const h=new Me(d.target.path);this.ke.get(h)!==null||this.it(u,h)||this.Ue(u,h,Tn.newNoDocument(h,e))}a.be&&(n.set(u,a.ve()),a.Ce())}}));let s=Je();this.qe.forEach(((a,u)=>{let d=!0;u.forEachWhile((h=>{const m=this.Je(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const r=new Bd(e,n,this.Qe,this.ke,s);return this.ke=Is(),this.qe=rT(),this.Qe=new Ct(ot),r}$e(e,n){if(!this.ze(e))return;const s=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,s){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new oT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new fn(ot),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new oT),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function rT(){return new Ct(Me.comparator)}function aT(){return new Ct(Me.comparator)}const KU={asc:"ASCENDING",desc:"DESCENDING"},JU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QU={and:"AND",or:"OR"};class XU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Km(t,e){return t.useProto3Json||Dd(e)?e:{value:e}}function Td(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WU(t,e){return Td(t,e.toTimestamp())}function Xi(t){return ft(!!t),Oe.fromTimestamp((function(n){const s=Io(n);return new Kt(s.seconds,s.nanos)})(t))}function Np(t,e){return Jm(t,e).canonicalString()}function Jm(t,e){const n=(function(r){return new bt(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Ib(t){const e=bt.fromString(t);return ft(Ub(e)),e}function Qm(t,e){return Np(t.databaseId,e.path)}function um(t,e){const n=Ib(e);if(n.get(1)!==t.databaseId.projectId)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Me(Mb(n))}function Nb(t,e){return Np(t.databaseId,e)}function ZU(t){const e=Ib(t);return e.length===4?bt.emptyPath():Mb(e)}function Xm(t){return new bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mb(t){return ft(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lT(t,e,n){return{name:Qm(t,e),fields:n.value.mapValue.fields}}function ek(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ke()})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(ft(v===void 0||typeof v=="string"),hn.fromBase64String(v||"")):(ft(v===void 0||v instanceof Buffer||v instanceof Uint8Array),hn.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?ue.UNKNOWN:Ab(m.code);return new Ae(v,m.message||"")})(u);n=new wb(s,r,a,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=um(t,s.document.name),a=Xi(s.document.updateTime),u=s.document.createTime?Xi(s.document.createTime):Oe.min(),d=new zn({mapValue:{fields:s.document.fields}}),h=Tn.newFoundDocument(r,a,u,d),m=s.targetIds||[],v=s.removedTargetIds||[];n=new od(m,v,h.key,h)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=um(t,s.document),a=s.readTime?Xi(s.readTime):Oe.min(),u=Tn.newNoDocument(r,a),d=s.removedTargetIds||[];n=new od([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=um(t,s.document),a=s.removedTargetIds||[];n=new od([],a,r,null)}else{if(!("filter"in e))return ke();{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:a}=s,u=new HU(r,a),d=s.targetId;n=new Cb(d,u)}}return n}function tk(t,e){let n;if(e instanceof du)n={update:lT(t,e.key,e.value)};else if(e instanceof Od)n={delete:Qm(t,e.key)};else if(e instanceof Do)n={update:lT(t,e.key,e.data),updateMask:ck(e.fieldMask)};else{if(!(e instanceof FU))return ke();n={verify:Qm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(a,u){const d=u.transform;if(d instanceof _d)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ou)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ru)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ed)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw ke()})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:WU(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke()})(t,e.precondition)),n}function nk(t,e){return t&&t.length>0?(ft(e!==void 0),t.map((n=>(function(r,a){let u=r.updateTime?Xi(r.updateTime):Xi(a);return u.isEqual(Oe.min())&&(u=Xi(a)),new LU(u,r.transformResults||[])})(n,e)))):[]}function ik(t,e){return{documents:[Nb(t,e.path)]}}function sk(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Nb(t,r);const a=(function(m){if(m.length!==0)return Pb(Zi.create(m,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((v=>(function(b){return{field:ha(b.field),direction:ak(b.dir)}})(v)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=Km(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:n,parent:r}}function ok(t){let e=ZU(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ft(s===1);const v=n.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=(function(T){const b=Db(T);return b instanceof Zi&&lb(b)?b.getFilters():[b]})(n.where));let u=[];n.orderBy&&(u=(function(T){return T.map((b=>(function(N){return new vd(ma(N.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(b)))})(n.orderBy));let d=null;n.limit&&(d=(function(T){let b;return b=typeof T=="object"?T.value:T,Dd(b)?null:b})(n.limit));let h=null;n.startAt&&(h=(function(T){const b=!!T.before,C=T.values||[];return new yd(C,b)})(n.startAt));let m=null;return n.endAt&&(m=(function(T){const b=!T.before,C=T.values||[];return new yd(C,b)})(n.endAt)),bU(e,r,u,a,d,"F",h,m)}function rk(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Db(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ma(n.unaryFilter.field);return Yt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ma(n.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ma(n.unaryFilter.field);return Yt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ma(n.unaryFilter.field);return Yt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ke()}})(t):t.fieldFilter!==void 0?(function(n){return Yt.create(ma(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Zi.create(n.compositeFilter.filters.map((s=>Db(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ke()}})(n.compositeFilter.op))})(t):ke()}function ak(t){return KU[t]}function lk(t){return JU[t]}function uk(t){return QU[t]}function ha(t){return{fieldPath:t.canonicalString()}}function ma(t){return dn.fromServerFormat(t.fieldPath)}function Pb(t){return t instanceof Yt?(function(n){if(n.op==="=="){if(KE(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NAN"}};if(YE(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(KE(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NAN"}};if(YE(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(n.field),op:lk(n.op),value:n.value}}})(t):t instanceof Zi?(function(n){const s=n.getFilters().map((r=>Pb(r)));return s.length===1?s[0]:{compositeFilter:{op:uk(n.op),filters:s}}})(t):ke()}function ck(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Ub(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n,s,r,a=Oe.min(),u=Oe.min(),d=hn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new To(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.ct=e}}function fk(t){const e=ok({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ym(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.un=new mk}addToCollectionParentIndex(e,n){return this.un.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(Ro.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(Ro.min())}updateCollectionGroup(e,n,s){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class mk{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new fn(bt.comparator),a=!r.has(s);return this.index[n]=r.add(s),a}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new fn(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ca(0)}static kn(){return new Ca(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(){this.changes=new Pa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?fe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&Yl(s.mutation,r,ni.empty(),Kt.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Je()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Je()){const r=cr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((a=>{let u=Gl();return a.forEach(((d,h)=>{u=u.insert(d,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const s=cr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Je())))}populateOverlays(e,n,s){const r=[];return s.forEach((a=>{n.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,s,r){let a=Is();const u=$l(),d=(function(){return $l()})();return n.forEach(((h,m)=>{const v=s.get(m.key);r.has(m.key)&&(v===void 0||v.mutation instanceof Do)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),Yl(v.mutation,m,v.mutation.getFieldMask(),Kt.now())):u.set(m.key,ni.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((m,v)=>u.set(m,v))),n.forEach(((m,v)=>{var T;return d.set(m,new gk(v,(T=u.get(m))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,n){const s=$l();let r=new Ct(((u,d)=>u-d)),a=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((h=>{const m=n.get(h);if(m===null)return;let v=s.get(h)||ni.empty();v=d.applyToLocalView(m,v),s.set(h,v);const T=(r.get(d.batchId)||Je()).add(h);r=r.insert(d.batchId,T)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),m=h.key,v=h.value,T=yb();v.forEach((b=>{if(!a.has(b)){const C=bb(n.get(b),s.get(b));C!==null&&T.set(b,C),a=a.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,T))}return fe.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(u){return Me.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((a=>{const u=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-a.size):fe.resolve(cr());let d=-1,h=a;return u.next((m=>fe.forEach(m,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(v)?fe.resolve():this.remoteDocumentCache.getEntry(e,v).next((b=>{h=h.insert(v,b)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,h,m,Je()))).next((v=>({batchId:d,changes:gb(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next((s=>{let r=Gl();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const a=n.collectionGroup;let u=Gl();return this.indexManager.getCollectionParents(e,a).next((d=>fe.forEach(d,(h=>{const m=(function(T,b){return new Pd(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,s,r).next((v=>{v.forEach(((T,b)=>{u=u.insert(T,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,a,r)))).next((u=>{a.forEach(((h,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,Tn.newInvalidDocument(v)))}));let d=Gl();return u.forEach(((h,m)=>{const v=a.get(h);v!==void 0&&Yl(v.mutation,m,ni.empty(),Kt.now()),kd(n,m)&&(d=d.insert(h,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return fe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Xi(r.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(r){return{name:r.name,query:fk(r.bundledQuery),readTime:Xi(r.readTime)}})(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.overlays=new Ct(Me.comparator),this.Ir=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=cr();return fe.forEach(n,(r=>this.getOverlay(e,r).next((a=>{a!==null&&s.set(r,a)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,a)=>{this.ht(e,n,a)})),fe.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Ir.get(s);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(s)),fe.resolve()}getOverlaysForCollection(e,n,s){const r=cr(),a=n.length+1,u=new Me(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const h=d.getNext().value,m=h.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===a&&h.largestBatchId>s&&r.set(h.getKey(),h)}return fe.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let a=new Ct(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>s){let v=a.get(m.largestBatchId);v===null&&(v=cr(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=cr(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=r)););return fe.resolve(d)}ht(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const u=this.Ir.get(r.largestBatchId).delete(s.key);this.Ir.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new qU(n,s));let a=this.Ir.get(n);a===void 0&&(a=Je(),this.Ir.set(n,a)),this.Ir.set(n,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(){this.Tr=new fn(tn.Er),this.dr=new fn(tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const s=new tn(e,n);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Vr(new tn(e,n))}mr(e,n){e.forEach((s=>this.removeReference(s,n)))}gr(e){const n=new Me(new bt([])),s=new tn(n,e),r=new tn(n,e+1),a=[];return this.dr.forEachInRange([s,r],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Me(new bt([])),s=new tn(n,e),r=new tn(n,e+1);let a=Je();return this.dr.forEachInRange([s,r],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new tn(e,0),s=this.Tr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class tn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Me.comparator(e.key,n.key)||ot(e.wr,n.wr)}static Ar(e,n){return ot(e.wr,n.wr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new fn(tn.Er)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new GU(a,n,s,r);this.mutationQueue.push(u);for(const d of r)this.br=this.br.add(new tn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return fe.resolve(u)}lookupMutationBatch(e,n){return fe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.vr(s),a=r<0?0:r;return fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new tn(n,0),r=new tn(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([s,r],(u=>{const d=this.Dr(u.wr);a.push(d)})),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new fn(ot);return n.forEach((r=>{const a=new tn(r,0),u=new tn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(d=>{s=s.add(d.wr)}))})),fe.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let a=s;Me.isDocumentKey(a)||(a=a.child(""));const u=new tn(new Me(a),0);let d=new fn(ot);return this.br.forEachWhile((h=>{const m=h.key.path;return!!s.isPrefixOf(m)&&(m.length===r&&(d=d.add(h.wr)),!0)}),u),fe.resolve(this.Cr(d))}Cr(e){const n=[];return e.forEach((s=>{const r=this.Dr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){ft(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return fe.forEach(n.mutations,(r=>{const a=new tn(r.key,n.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=s}))}On(e){}containsKey(e,n){const s=new tn(n,0),r=this.br.firstAfterOrEqual(s);return fe.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.Mr=e,this.docs=(function(){return new Ct(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),a=r?r.size:0,u=this.Mr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return fe.resolve(s?s.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(e,n){let s=Is();return n.forEach((r=>{const a=this.docs.get(r);s=s.insert(r,a?a.document.mutableCopy():Tn.newInvalidDocument(r))})),fe.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let a=Is();const u=n.path,d=new Me(u.child("")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:m,value:{document:v}}=h.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||sU(iU(v),s)<=0||(r.has(v.key)||kd(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return fe.resolve(a)}getAllFromCollectionGroup(e,n,s,r){ke()}Or(e,n){return fe.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new bk(this)}getSize(e){return fe.resolve(this.size)}}class bk extends pk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(s)})),fe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.persistence=e,this.Nr=new Pa((n=>Ap(n)),Cp),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mp,this.targetCount=0,this.kr=Ca.Bn()}forEachTarget(e,n){return this.Nr.forEach(((s,r)=>n(r))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Lr&&(this.Lr=n),fe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ca(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.Kn(n),fe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,s){let r=0;const a=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=n&&s.get(d.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),fe.waitFor(a).next((()=>r))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const s=this.Nr.get(n)||null;return fe.resolve(s)}addMatchingKeys(e,n,s){return this.Br.Rr(n,s),fe.resolve()}removeMatchingKeys(e,n,s){this.Br.mr(n,s);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach((u=>{a.push(r.markPotentiallyOrphaned(e,u))})),fe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Br.yr(n);return fe.resolve(s)}containsKey(e,n){return fe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Tp(0),this.Kr=!1,this.Kr=!0,this.$r=new Ek,this.referenceDelegate=e(this),this.Ur=new xk(this),this.indexManager=new hk,this.remoteDocumentCache=(function(r){return new Sk(r)})((s=>this.referenceDelegate.Wr(s))),this.serializer=new dk(n),this.Gr=new vk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _k,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.qr[e.toKey()];return s||(s=new Tk(n,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,s){be("MemoryPersistence","Starting transaction:",e);const r=new Ck(this.Qr.next());return this.referenceDelegate.zr(),s(r).next((a=>this.referenceDelegate.jr(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Hr(e,n){return fe.or(Object.values(this.qr).map((s=>()=>s.containsKey(e,n))))}}class Ck extends rU{constructor(e){super(),this.currentSequenceNumber=e}}class Dp{constructor(e){this.persistence=e,this.Jr=new Mp,this.Yr=null}static Zr(e){return new Dp(e)}get Xr(){if(this.Yr)return this.Yr;throw ke()}addReference(e,n,s){return this.Jr.addReference(s,n),this.Xr.delete(s.toString()),fe.resolve()}removeReference(e,n,s){return this.Jr.removeReference(s,n),this.Xr.add(s.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((r=>this.Xr.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((a=>this.Xr.add(a.toString())))})).next((()=>s.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Xr,(s=>{const r=Me.fromPath(s);return this.ei(e,r).next((a=>{a||n.removeEntry(r,Oe.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((s=>{s?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return fe.or([()=>fe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.$i=s,this.Ui=r}static Wi(e,n){let s=Je(),r=Je();for(const a of n.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Pp(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return D2()?8:aU(N2())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,s,r){const a={result:null};return this.Yi(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,n,r,s).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new wk;return this.Xi(e,n,u).next((d=>{if(a.result=d,this.zi)return this.es(e,n,u,d.size)}))})).next((()=>a.result))}es(e,n,s,r){return s.documentReadCount<this.ji?(Vl()<=We.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",fa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),fe.resolve()):(Vl()<=We.DEBUG&&be("QueryEngine","Query:",fa(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.Hi*r?(Vl()<=We.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",fa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(n))):fe.resolve())}Yi(e,n){if(WE(n))return fe.resolve(null);let s=Qi(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Ym(n,null,"F"),s=Qi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((a=>{const u=Je(...a);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,s).next((h=>{const m=this.ts(n,d);return this.ns(n,m,u,h.readTime)?this.Yi(e,Ym(n,null,"F")):this.rs(e,m,n,h)}))))})))))}Zi(e,n,s,r){return WE(n)||r.isEqual(Oe.min())?fe.resolve(null):this.Ji.getDocuments(e,s).next((a=>{const u=this.ts(n,a);return this.ns(n,u,s,r)?fe.resolve(null):(Vl()<=We.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fa(n)),this.rs(e,u,n,nU(r,-1)).next((d=>d)))}))}ts(e,n){let s=new fn(mb(e));return n.forEach(((r,a)=>{kd(e,a)&&(s=s.add(a))})),s}ns(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Xi(e,n,s){return Vl()<=We.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",fa(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ro.min(),s)}rs(e,n,s,r){return this.Ji.getDocumentsMatchingQuery(e,s,r).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n,s,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Ct(ot),this._s=new Pa((a=>Ap(a)),Cp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function Nk(t,e,n,s){return new Ik(t,e,n,s)}async function kb(t,e){const n=Be(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((a=>(r=a,n.ls(e),n.mutationQueue.getAllMutationBatches(s)))).next((a=>{const u=[],d=[];let h=Je();for(const m of r){u.push(m.batchId);for(const v of m.mutations)h=h.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)h=h.add(v.key)}return n.localDocuments.getDocuments(s,h).next((m=>({hs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function Mk(t,e){const n=Be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(d,h,m,v){const T=m.batch,b=T.keys();let C=fe.resolve();return b.forEach((N=>{C=C.next((()=>v.getEntry(h,N))).next((V=>{const U=m.docVersions.get(N);ft(U!==null),V.version.compareTo(U)<0&&(T.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),v.addEntry(V)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(h,T)))})(n,s,e,a).next((()=>a.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let h=Je();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(h=h.add(d.batch.mutations[m].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function Vb(t){const e=Be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function Dk(t,e){const n=Be(t),s=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const d=[];e.targetChanges.forEach(((v,T)=>{const b=r.get(T);if(!b)return;d.push(n.Ur.removeMatchingKeys(a,v.removedDocuments,T).next((()=>n.Ur.addMatchingKeys(a,v.addedDocuments,T))));let C=b.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(hn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,s)),r=r.insert(T,C),(function(V,U,j){return V.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(b,C,v)&&d.push(n.Ur.updateTargetData(a,C))}));let h=Is(),m=Je();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(Pk(a,u,e.documentUpdates).next((v=>{h=v.Ps,m=v.Is}))),!s.isEqual(Oe.min())){const v=n.Ur.getLastRemoteSnapshotVersion(a).next((T=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,s)));d.push(v)}return fe.waitFor(d).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,h,m))).next((()=>h))})).then((a=>(n.os=r,a)))}function Pk(t,e,n){let s=Je(),r=Je();return n.forEach((a=>s=s.add(a))),e.getEntries(t,s).next((a=>{let u=Is();return n.forEach(((d,h)=>{const m=a.get(d);h.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),h.isNoDocument()&&h.version.isEqual(Oe.min())?(e.removeEntry(d,h.readTime),u=u.insert(d,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),u=u.insert(d,h)):be("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",h.version)})),{Ps:u,Is:r}}))}function Uk(t,e){const n=Be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function kk(t,e){const n=Be(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Ur.getTargetData(s,e).next((a=>a?(r=a,fe.resolve(r)):n.Ur.allocateTargetId(s).next((u=>(r=new To(e,u,"TargetPurposeListen",s.currentSequenceNumber),n.Ur.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.os.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(s.targetId,s),n._s.set(e,s.targetId)),s}))}async function Wm(t,e,n){const s=Be(t),r=s.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",a,(u=>s.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!cu(u))throw u;be("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}s.os=s.os.remove(e),s._s.delete(r.target)}function uT(t,e,n){const s=Be(t);let r=Oe.min(),a=Je();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,m,v){const T=Be(h),b=T._s.get(v);return b!==void 0?fe.resolve(T.os.get(b)):T.Ur.getTargetData(m,v)})(s,u,Qi(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(u,d.targetId).next((h=>{a=h}))})).next((()=>s.ss.getDocumentsMatchingQuery(u,e,n?r:Oe.min(),n?a:Je()))).next((d=>(Vk(s,CU(e),d),{documents:d,Ts:a})))))}function Vk(t,e,n){let s=t.us.get(e)||Oe.min();n.forEach(((r,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)})),t.us.set(e,s)}class cT{constructor(){this.activeTargetIds=DU()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lk{constructor(){this.so=new cT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,s){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new cT,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function cm(){return Jc===null?Jc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class Gk extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+n.host,this.vo=`projects/${r}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${a}`}get Fo(){return!1}Mo(n,s,r,a,u){const d=cm(),h=this.xo(n,s.toUriEncodedString());be("RestConnection",`Sending RPC '${n}' ${d}:`,h,r);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,u),this.No(n,h,m,r).then((v=>(be("RestConnection",`Received RPC '${n}' ${d}: `,v),v)),(v=>{throw Sa("RestConnection",`RPC '${n}' ${d} failed with error: `,v,"url: ",h,"request:",r),v}))}Lo(n,s,r,a,u,d){return this.Mo(n,s,r,a,u)}Oo(n,s,r){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Da})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((a,u)=>n[u]=a)),r&&r.headers.forEach(((a,u)=>n[u]=a))}xo(n,s){const r=Bk[n];return`${this.Do}/v1/${s}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,s,r){const a=cm();return new Promise(((u,d)=>{const h=new QS;h.setWithCredentials(!0),h.listenOnce(XS.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case nd.NO_ERROR:const v=h.getResponseJson();be(_n,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),u(v);break;case nd.TIMEOUT:be(_n,`RPC '${e}' ${a} timed out`),d(new Ae(ue.DEADLINE_EXCEEDED,"Request time out"));break;case nd.HTTP_ERROR:const T=h.getStatus();if(be(_n,`RPC '${e}' ${a} failed with status:`,T,"response text:",h.getResponseText()),T>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const C=b==null?void 0:b.error;if(C&&C.status&&C.message){const N=(function(U){const j=U.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(j)>=0?j:ue.UNKNOWN})(C.status);d(new Ae(N,C.message))}else d(new Ae(ue.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Ae(ue.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{be(_n,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(r);be(_n,`RPC '${e}' ${a} sending request:`,r),h.send(n,"POST",m,s,15)}))}Bo(e,n,s){const r=cm(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=eb(),d=ZS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,n,s),h.encodeInitMessageHeaders=!0;const v=a.join("");be(_n,`Creating RPC '${e}' stream ${r}: ${v}`,h);const T=u.createWebChannel(v,h);let b=!1,C=!1;const N=new Fk({Io:U=>{C?be(_n,`Not sending because RPC '${e}' stream ${r} is closed:`,U):(b||(be(_n,`Opening RPC '${e}' stream ${r} transport.`),T.open(),b=!0),be(_n,`RPC '${e}' stream ${r} sending:`,U),T.send(U))},To:()=>T.close()}),V=(U,j,W)=>{U.listen(j,(G=>{try{W(G)}catch(Q){setTimeout((()=>{throw Q}),0)}}))};return V(T,Fl.EventType.OPEN,(()=>{C||(be(_n,`RPC '${e}' stream ${r} transport opened.`),N.yo())})),V(T,Fl.EventType.CLOSE,(()=>{C||(C=!0,be(_n,`RPC '${e}' stream ${r} transport closed`),N.So())})),V(T,Fl.EventType.ERROR,(U=>{C||(C=!0,Sa(_n,`RPC '${e}' stream ${r} transport errored:`,U),N.So(new Ae(ue.UNAVAILABLE,"The operation could not be completed")))})),V(T,Fl.EventType.MESSAGE,(U=>{var j;if(!C){const W=U.data[0];ft(!!W);const G=W,Q=G.error||((j=G[0])===null||j===void 0?void 0:j.error);if(Q){be(_n,`RPC '${e}' stream ${r} received error:`,Q);const q=Q.status;let oe=(function(M){const L=qt[M];if(L!==void 0)return Ab(L)})(q),D=Q.message;oe===void 0&&(oe=ue.INTERNAL,D="Unknown error status: "+q+" with message "+Q.message),C=!0,N.So(new Ae(oe,D)),T.close()}else be(_n,`RPC '${e}' stream ${r} received:`,W),N.bo(W)}})),V(d,WS.STAT_EVENT,(U=>{U.stat===qm.PROXY?be(_n,`RPC '${e}' stream ${r} detected buffering proxy`):U.stat===qm.NOPROXY&&be(_n,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{N.wo()}),0),N}}function dm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t){return new XU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n,s=1e3,r=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=s,this.qo=r,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-s);r>0&&be("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n,s,r,a,u,d,h){this.ui=e,this.Ho=s,this.Jo=r,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Lb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(Rs(n.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.Yo===n&&this.P_(s,r)}),(s=>{e((()=>{const r=new Ae(ue.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(r)}))}))}P_(e,n){const s=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{s((()=>this.listener.Eo()))})),this.stream.Ro((()=>{s((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((r=>{s((()=>this.I_(r)))})),this.stream.onMessage((r=>{s((()=>++this.e_==1?this.E_(r):this.onNext(r)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qk extends Ob{constructor(e,n,s,r,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,u),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=ek(this.serializer,e),s=(function(a){if(!("targetChange"in a))return Oe.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Oe.min():u.readTime?Xi(u.readTime):Oe.min()})(e);return this.listener.d_(n,s)}A_(e){const n={};n.database=Xm(this.serializer),n.addTarget=(function(a,u){let d;const h=u.target;if(d=$m(h)?{documents:ik(a,h)}:{query:sk(a,h)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=Rb(a,u.resumeToken);const m=Km(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Oe.min())>0){d.readTime=Td(a,u.snapshotVersion.toTimestamp());const m=Km(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const s=rk(this.serializer,e);s&&(n.labels=s),this.a_(n)}R_(e){const n={};n.database=Xm(this.serializer),n.removeTarget=e,this.a_(n)}}class Hk extends Ob{constructor(e,n,s,r,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ft(!!e.streamToken),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=nk(e.writeResults,e.commitTime),s=Xi(e.commitTime);return this.listener.g_(s,n)}p_(){const e={};e.database=Xm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>tk(this.serializer,s)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,s,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,Jm(n,s),r,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(ue.UNKNOWN,a.toString())}))}Lo(e,n,s,r,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,Jm(n,s),r,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(ue.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class jk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Rs(n),this.D_=!1):be("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,s,r,a){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{s.enqueueAndForget((async()=>{Tr(this)&&(be("RemoteStore","Restarting streams for network reachability change."),await(async function(h){const m=Be(h);m.L_.add(4),await hu(m),m.q_.set("Unknown"),m.L_.delete(4),await Gd(m)})(this))}))})),this.q_=new jk(s,r)}}async function Gd(t){if(Tr(t))for(const e of t.B_)await e(!0)}async function hu(t){for(const e of t.B_)await e(!1)}function Bb(t,e){const n=Be(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Lp(n)?Vp(n):Ua(n).r_()&&kp(n,e))}function Up(t,e){const n=Be(t),s=Ua(n);n.N_.delete(e),s.r_()&&Fb(n,e),n.N_.size===0&&(s.r_()?s.o_():Tr(n)&&n.q_.set("Unknown"))}function kp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ua(t).A_(e)}function Fb(t,e){t.Q_.xe(e),Ua(t).R_(e)}function Vp(t){t.Q_=new YU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ua(t).start(),t.q_.v_()}function Lp(t){return Tr(t)&&!Ua(t).n_()&&t.N_.size>0}function Tr(t){return Be(t).L_.size===0}function Gb(t){t.Q_=void 0}async function Yk(t){t.q_.set("Online")}async function Kk(t){t.N_.forEach(((e,n)=>{kp(t,e)}))}async function Jk(t,e){Gb(t),Lp(t)?(t.q_.M_(e),Vp(t)):t.q_.set("Unknown")}async function Qk(t,e,n){if(t.q_.set("Online"),e instanceof wb&&e.state===2&&e.cause)try{await(async function(r,a){const u=a.cause;for(const d of a.targetIds)r.N_.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.N_.delete(d),r.Q_.removeTarget(d))})(t,e)}catch(s){be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Sd(t,s)}else if(e instanceof od?t.Q_.Ke(e):e instanceof Cb?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Oe.min()))try{const s=await Vb(t.localStore);n.compareTo(s)>=0&&await(function(a,u){const d=a.Q_.rt(u);return d.targetChanges.forEach(((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=a.N_.get(m);v&&a.N_.set(m,v.withResumeToken(h.resumeToken,u))}})),d.targetMismatches.forEach(((h,m)=>{const v=a.N_.get(h);if(!v)return;a.N_.set(h,v.withResumeToken(hn.EMPTY_BYTE_STRING,v.snapshotVersion)),Fb(a,h);const T=new To(v.target,h,m,v.sequenceNumber);kp(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(s){be("RemoteStore","Failed to raise snapshot:",s),await Sd(t,s)}}async function Sd(t,e,n){if(!cu(e))throw e;t.L_.add(1),await hu(t),t.q_.set("Offline"),n||(n=()=>Vb(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{be("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Gd(t)}))}function qb(t,e){return e().catch((n=>Sd(t,n,e)))}async function qd(t){const e=Be(t),n=No(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Xk(e);)try{const r=await Uk(e.localStore,s);if(r===null){e.O_.length===0&&n.o_();break}s=r.batchId,Wk(e,r)}catch(r){await Sd(e,r)}Hb(e)&&zb(e)}function Xk(t){return Tr(t)&&t.O_.length<10}function Wk(t,e){t.O_.push(e);const n=No(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Hb(t){return Tr(t)&&!No(t).n_()&&t.O_.length>0}function zb(t){No(t).start()}async function Zk(t){No(t).p_()}async function eV(t){const e=No(t);for(const n of t.O_)e.m_(n.mutations)}async function tV(t,e,n){const s=t.O_.shift(),r=Rp.from(s,e,n);await qb(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await qd(t)}async function nV(t,e){e&&No(t).V_&&await(async function(s,r){if((function(u){return zU(u)&&u!==ue.ABORTED})(r.code)){const a=s.O_.shift();No(s).s_(),await qb(s,(()=>s.remoteSyncer.rejectFailedWrite(a.batchId,r))),await qd(s)}})(t,e),Hb(t)&&zb(t)}async function fT(t,e){const n=Be(t);n.asyncQueue.verifyOperationInProgress(),be("RemoteStore","RemoteStore received new credentials");const s=Tr(n);n.L_.add(3),await hu(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Gd(n)}async function iV(t,e){const n=Be(t);e?(n.L_.delete(2),await Gd(n)):e||(n.L_.add(2),await hu(n),n.q_.set("Unknown"))}function Ua(t){return t.K_||(t.K_=(function(n,s,r){const a=Be(n);return a.w_(),new qk(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(t.datastore,t.asyncQueue,{Eo:Yk.bind(null,t),Ro:Kk.bind(null,t),mo:Jk.bind(null,t),d_:Qk.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),Lp(t)?Vp(t):t.q_.set("Unknown")):(await t.K_.stop(),Gb(t))}))),t.K_}function No(t){return t.U_||(t.U_=(function(n,s,r){const a=Be(n);return a.w_(),new Hk(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Zk.bind(null,t),mo:nV.bind(null,t),f_:eV.bind(null,t),g_:tV.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await qd(t)):(await t.U_.stop(),t.O_.length>0&&(be("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n,s,r,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=a,this.deferred=new Co,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,a){const u=Date.now()+s,d=new Op(e,n,u,r,a);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bp(t,e){if(Rs("AsyncQueue",`${e}: ${t}`),cu(t))return new Ae(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.comparator=e?(n,s)=>e(n,s)||Me.comparator(n.key,s.key):(n,s)=>Me.comparator(n.key,s.key),this.keyedMap=Gl(),this.sortedSet=new Ct(this.comparator)}static emptySet(e){return new Ea(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ea)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=s.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ea;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.W_=new Ct(Me.comparator)}track(e){const n=e.doc.key,s=this.W_.get(n);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(n,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(n):e.type===1&&s.type===2?this.W_=this.W_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ke():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,s)=>{e.push(s)})),e}}class wa{constructor(e,n,s,r,a,u,d,h,m){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,n,s,r,a){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new wa(e,n,Ea.emptySet(n),u,s,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class oV{constructor(){this.queries=mT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,s){const r=Be(n),a=r.queries;r.queries=mT(),a.forEach(((u,d)=>{for(const h of d.j_)h.onError(s)}))})(this,new Ae(ue.ABORTED,"Firestore shutting down"))}}function mT(){return new Pa((t=>hb(t)),Ud)}async function rV(t,e){const n=Be(t);let s=3;const r=e.query;let a=n.queries.get(r);a?!a.H_()&&e.J_()&&(s=2):(a=new sV,s=e.J_()?0:1);try{switch(s){case 0:a.z_=await n.onListen(r,!0);break;case 1:a.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(u){const d=Bp(u,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(d)}n.queries.set(r,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Fp(n)}async function aV(t,e){const n=Be(t),s=e.query;let r=3;const a=n.queries.get(s);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?r=e.J_()?0:1:!a.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function lV(t,e){const n=Be(t);let s=!1;for(const r of e){const a=r.query,u=n.queries.get(a);if(u){for(const d of u.j_)d.X_(r)&&(s=!0);u.z_=r}}s&&Fp(n)}function uV(t,e,n){const s=Be(t),r=s.queries.get(e);if(r)for(const a of r.j_)a.onError(n);s.queries.delete(e)}function Fp(t){t.Y_.forEach((e=>{e.next()}))}var Zm,pT;(pT=Zm||(Zm={})).ea="default",pT.Cache="cache";class cV{constructor(e,n,s){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new wa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const s=n!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.key=e}}class $b{constructor(e){this.key=e}}class dV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Je(),this.mutatedKeys=Je(),this.Aa=mb(e),this.Ra=new Ea(this.Aa)}get Va(){return this.Ta}ma(e,n){const s=n?n.fa:new hT,r=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,u=r,d=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,T)=>{const b=r.get(v),C=kd(this.query,T)?T:null,N=!!b&&this.mutatedKeys.has(b.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let U=!1;b&&C?b.data.isEqual(C.data)?N!==V&&(s.track({type:3,doc:C}),U=!0):this.ga(b,C)||(s.track({type:2,doc:C}),U=!0,(h&&this.Aa(C,h)>0||m&&this.Aa(C,m)<0)&&(d=!0)):!b&&C?(s.track({type:0,doc:C}),U=!0):b&&!C&&(s.track({type:1,doc:b}),U=!0,(h||m)&&(d=!0)),U&&(C?(u=u.add(C),a=V?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),s.track({type:1,doc:v})}return{Ra:u,fa:s,ns:d,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((v,T)=>(function(C,N){const V=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return V(C)-V(N)})(v.type,T.type)||this.Aa(v.doc,T.doc))),this.pa(s),r=r!=null&&r;const d=n&&!r?this.ya():[],h=this.da.size===0&&this.current&&!r?1:0,m=h!==this.Ea;return this.Ea=h,u.length!==0||m?{snapshot:new wa(this.query,e.Ra,a,u,e.mutatedKeys,h===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Je(),this.Ra.forEach((s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))}));const n=[];return e.forEach((s=>{this.da.has(s)||n.push(new $b(s))})),this.da.forEach((s=>{e.has(s)||n.push(new jb(s))})),n}ba(e){this.Ta=e.Ts,this.da=Je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return wa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fV{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class hV{constructor(e){this.key=e,this.va=!1}}class mV{constructor(e,n,s,r,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Pa((d=>hb(d)),Ud),this.Ma=new Map,this.xa=new Set,this.Oa=new Ct(Me.comparator),this.Na=new Map,this.La=new Mp,this.Ba={},this.ka=new Map,this.qa=Ca.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pV(t,e,n=!0){const s=Wb(t);let r;const a=s.Fa.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.Da()):r=await Yb(s,e,n,!0),r}async function gV(t,e){const n=Wb(t);await Yb(n,e,!0,!1)}async function Yb(t,e,n,s){const r=await kk(t.localStore,Qi(e)),a=r.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let d;return s&&(d=await yV(t,e,a,u==="current",r.resumeToken)),t.isPrimaryClient&&n&&Bb(t.remoteStore,r),d}async function yV(t,e,n,s,r){t.Ka=(T,b,C)=>(async function(V,U,j,W){let G=U.view.ma(j);G.ns&&(G=await uT(V.localStore,U.query,!1).then((({documents:D})=>U.view.ma(D,G))));const Q=W&&W.targetChanges.get(U.targetId),q=W&&W.targetMismatches.get(U.targetId)!=null,oe=U.view.applyChanges(G,V.isPrimaryClient,Q,q);return yT(V,U.targetId,oe.wa),oe.snapshot})(t,T,b,C);const a=await uT(t.localStore,e,!0),u=new dV(e,a.Ts),d=u.ma(a.documents),h=fu.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),m=u.applyChanges(d,t.isPrimaryClient,h);yT(t,n,m.wa);const v=new fV(e,n,u);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function vV(t,e,n){const s=Be(t),r=s.Fa.get(e),a=s.Ma.get(r.targetId);if(a.length>1)return s.Ma.set(r.targetId,a.filter((u=>!Ud(u,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Wm(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Up(s.remoteStore,r.targetId),ep(s,r.targetId)})).catch(uu)):(ep(s,r.targetId),await Wm(s.localStore,r.targetId,!0))}async function _V(t,e){const n=Be(t),s=n.Fa.get(e),r=n.Ma.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Up(n.remoteStore,s.targetId))}async function EV(t,e,n){const s=wV(t);try{const r=await(function(u,d){const h=Be(u),m=Kt.now(),v=d.reduce(((C,N)=>C.add(N.key)),Je());let T,b;return h.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let N=Is(),V=Je();return h.cs.getEntries(C,v).next((U=>{N=U,N.forEach(((j,W)=>{W.isValidDocument()||(V=V.add(j))}))})).next((()=>h.localDocuments.getOverlayedDocuments(C,N))).next((U=>{T=U;const j=[];for(const W of d){const G=BU(W,T.get(W.key).overlayedDocument);G!=null&&j.push(new Do(W.key,G,ob(G.value.mapValue),Ei.exists(!0)))}return h.mutationQueue.addMutationBatch(C,m,j,d)})).next((U=>{b=U;const j=U.applyToLocalDocumentSet(T,V);return h.documentOverlayCache.saveOverlays(C,U.batchId,j)}))})).then((()=>({batchId:b.batchId,changes:gb(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(u,d,h){let m=u.Ba[u.currentUser.toKey()];m||(m=new Ct(ot)),m=m.insert(d,h),u.Ba[u.currentUser.toKey()]=m})(s,r.batchId,n),await mu(s,r.changes),await qd(s.remoteStore)}catch(r){const a=Bp(r,"Failed to persist write");n.reject(a)}}async function Kb(t,e){const n=Be(t);try{const s=await Dk(n.localStore,e);e.targetChanges.forEach(((r,a)=>{const u=n.Na.get(a);u&&(ft(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.va=!0:r.modifiedDocuments.size>0?ft(u.va):r.removedDocuments.size>0&&(ft(u.va),u.va=!1))})),await mu(n,s,e)}catch(s){await uu(s)}}function gT(t,e,n){const s=Be(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Fa.forEach(((a,u)=>{const d=u.view.Z_(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const h=Be(u);h.onlineState=d;let m=!1;h.queries.forEach(((v,T)=>{for(const b of T.j_)b.Z_(d)&&(m=!0)})),m&&Fp(h)})(s.eventManager,e),r.length&&s.Ca.d_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function TV(t,e,n){const s=Be(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Na.get(e),a=r&&r.key;if(a){let u=new Ct(Me.comparator);u=u.insert(a,Tn.newNoDocument(a,Oe.min()));const d=Je().add(a),h=new Bd(Oe.min(),new Map,new Ct(ot),u,d);await Kb(s,h),s.Oa=s.Oa.remove(a),s.Na.delete(e),Gp(s)}else await Wm(s.localStore,e,!1).then((()=>ep(s,e,n))).catch(uu)}async function SV(t,e){const n=Be(t),s=e.batch.batchId;try{const r=await Mk(n.localStore,e);Qb(n,s,null),Jb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await mu(n,r)}catch(r){await uu(r)}}async function bV(t,e,n){const s=Be(t);try{const r=await(function(u,d){const h=Be(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return h.mutationQueue.lookupMutationBatch(m,d).next((T=>(ft(T!==null),v=T.keys(),h.mutationQueue.removeMutationBatch(m,T)))).next((()=>h.mutationQueue.performConsistencyCheck(m))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>h.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);Qb(s,e,n),Jb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await mu(s,r)}catch(r){await uu(r)}}function Jb(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function Qb(t,e,n){const s=Be(t);let r=s.Ba[s.currentUser.toKey()];if(r){const a=r.get(e);a&&(n?a.reject(n):a.resolve(),r=r.remove(e)),s.Ba[s.currentUser.toKey()]=r}}function ep(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Ma.get(e))t.Fa.delete(s),n&&t.Ca.$a(s,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((s=>{t.La.containsKey(s)||Xb(t,s)}))}function Xb(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Up(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Gp(t))}function yT(t,e,n){for(const s of n)s instanceof jb?(t.La.addReference(s.key,e),xV(t,s)):s instanceof $b?(be("SyncEngine","Document no longer in limbo: "+s.key),t.La.removeReference(s.key,e),t.La.containsKey(s.key)||Xb(t,s.key)):ke()}function xV(t,e){const n=e.key,s=n.path.canonicalString();t.Oa.get(n)||t.xa.has(s)||(be("SyncEngine","New document in limbo: "+n),t.xa.add(s),Gp(t))}function Gp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Me(bt.fromString(e)),s=t.qa.next();t.Na.set(s,new hV(n)),t.Oa=t.Oa.insert(n,s),Bb(t.remoteStore,new To(Qi(fb(n.path)),s,"TargetPurposeLimboResolution",Tp.oe))}}async function mu(t,e,n){const s=Be(t),r=[],a=[],u=[];s.Fa.isEmpty()||(s.Fa.forEach(((d,h)=>{u.push(s.Ka(h,e,n).then((m=>{var v;if((m||n)&&s.isPrimaryClient){const T=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(h.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(h.targetId,T?"current":"not-current")}if(m){r.push(m);const T=Pp.Wi(h.targetId,m);a.push(T)}})))})),await Promise.all(u),s.Ca.d_(r),await(async function(h,m){const v=Be(h);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>fe.forEach(m,(b=>fe.forEach(b.$i,(C=>v.persistence.referenceDelegate.addReference(T,b.targetId,C))).next((()=>fe.forEach(b.Ui,(C=>v.persistence.referenceDelegate.removeReference(T,b.targetId,C)))))))))}catch(T){if(!cu(T))throw T;be("LocalStore","Failed to update sequence numbers: "+T)}for(const T of m){const b=T.targetId;if(!T.fromCache){const C=v.os.get(b),N=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(N);v.os=v.os.insert(b,V)}}})(s.localStore,a))}async function AV(t,e){const n=Be(t);if(!n.currentUser.isEqual(e)){be("SyncEngine","User change. New user:",e.toKey());const s=await kb(n.localStore,e);n.currentUser=e,(function(a,u){a.ka.forEach((d=>{d.forEach((h=>{h.reject(new Ae(ue.CANCELLED,u))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await mu(n,s.hs)}}function CV(t,e){const n=Be(t),s=n.Na.get(e);if(s&&s.va)return Je().add(s.key);{let r=Je();const a=n.Ma.get(e);if(!a)return r;for(const u of a){const d=n.Fa.get(u);r=r.unionWith(d.view.Va)}return r}}function Wb(t){const e=Be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TV.bind(null,e),e.Ca.d_=lV.bind(null,e.eventManager),e.Ca.$a=uV.bind(null,e.eventManager),e}function wV(t){const e=Be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bV.bind(null,e),e}class bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Nk(this.persistence,new Rk,e.initialUser,this.serializer)}Ga(e){return new Ak(Dp.Zr,this.serializer)}Wa(e){return new Lk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bd.provider={build:()=>new bd};class tp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=AV.bind(null,this.syncEngine),await iV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oV})()}createDatastore(e){const n=Fd(e.databaseInfo.databaseId),s=(function(a){return new Gk(a)})(e.databaseInfo);return(function(a,u,d,h){return new zk(a,u,d,h)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,a,u,d){return new $k(s,r,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>gT(this.syncEngine,n,0)),(function(){return dT.D()?new dT:new Ok})())}createSyncEngine(e,n){return(function(r,a,u,d,h,m,v){const T=new mV(r,a,u,d,h,m);return v&&(T.Qa=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const a=Be(r);be("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await hu(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}tp.provider={build:()=>new tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Rs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,n,s,r,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=En.UNAUTHENTICATED,this.clientId=nb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,(async u=>{be("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(be("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Co;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Bp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function fm(t,e){t.asyncQueue.verifyOperationInProgress(),be("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await kb(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function vT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await NV(t);be("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>fT(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>fT(e.remoteStore,r))),t._onlineComponents=e}async function NV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be("FirestoreClient","Using user provided OfflineComponentProvider");try{await fm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ue.FAILED_PRECONDITION||r.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Sa("Error using user provided cache. Falling back to memory cache: "+n),await fm(t,new bd)}}else be("FirestoreClient","Using default OfflineComponentProvider"),await fm(t,new bd);return t._offlineComponents}async function Zb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be("FirestoreClient","Using user provided OnlineComponentProvider"),await vT(t,t._uninitializedComponentsProvider._online)):(be("FirestoreClient","Using default OnlineComponentProvider"),await vT(t,new tp))),t._onlineComponents}function MV(t){return Zb(t).then((e=>e.syncEngine))}async function DV(t){const e=await Zb(t),n=e.eventManager;return n.onListen=pV.bind(null,e.syncEngine),n.onUnlisten=vV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_V.bind(null,e.syncEngine),n}function PV(t,e,n={}){const s=new Co;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,h,m){const v=new RV({next:b=>{v.Za(),u.enqueueAndForget((()=>aV(a,T))),b.fromCache&&h.source==="server"?m.reject(new Ae(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),T=new cV(d,v,{includeMetadataChanges:!0,_a:!0});return rV(a,T)})(await DV(t),t.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t,e,n){if(!n)throw new Ae(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UV(t,e,n,s){if(e===!0&&s===!0)throw new Ae(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ET(t){if(!Me.isDocumentKey(t))throw new Ae(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function TT(t){if(Me.isDocumentKey(t))throw new Ae(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke()}function au(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qp(t);throw new Ae(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ae(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ex((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hd{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ST({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ST(e),e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new YP;switch(s.type){case"firstParty":return new XP(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ae(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=_T.get(n);s&&(be("ComponentProvider","Removing Datastore"),_T.delete(n),s.terminate())})(this),Promise.resolve()}}function kV(t,e,n,s={}){var r;const a=(t=au(t,Hd))._getSettings(),u=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),s.mockUserToken){let d,h;if(typeof s.mockUserToken=="string")d=s.mockUserToken,h=En.MOCK_USER;else{d=OS(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new Ae(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new En(m)}t._authCredentials=new KP(new tb(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new zd(this.firestore,e,this._query)}}class Di{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Di(this.firestore,e,this._key)}}class wo extends zd{constructor(e,n,s){super(e,n,fb(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Di(this.firestore,null,new Me(e))}withConverter(e){return new wo(this.firestore,e,this._path)}}function hm(t,e,...n){if(t=si(t),tx("collection","path",e),t instanceof Hd){const s=bt.fromString(e,...n);return TT(s),new wo(t,null,s)}{if(!(t instanceof Di||t instanceof wo))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(bt.fromString(e,...n));return TT(s),new wo(t.firestore,null,s)}}function Ll(t,e,...n){if(t=si(t),arguments.length===1&&(e=nb.newId()),tx("doc","path",e),t instanceof Hd){const s=bt.fromString(e,...n);return ET(s),new Di(t,null,new Me(s))}{if(!(t instanceof Di||t instanceof wo))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(bt.fromString(e,...n));return ET(s),new Di(t.firestore,t instanceof wo?t.converter:null,new Me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Lb(this,"async_queue_retry"),this.Vu=()=>{const s=dm();s&&be("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const n=dm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=dm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new Co;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!cu(e))throw e;be("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((s=>{this.Eu=s,this.du=!1;const r=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(s);throw Rs("INTERNAL UNHANDLED ERROR: ",r),s})).then((s=>(this.du=!1,s))))));return this.mu=n,n}enqueueAfterDelay(e,n,s){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Op.createAndSchedule(this,e,n,s,(a=>this.yu(a)));return this.Tu.push(r),r}fu(){this.Eu&&ke()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class jd extends Hd{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new bT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bT(e),this._firestoreClient=void 0,await e}}}function VV(t,e){const n=typeof t=="object"?t:$S(),s=typeof t=="string"?t:"(default)",r=HS(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const a=VS("firestore");a&&kV(r,...a)}return r}function Hp(t){if(t._terminated)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LV(t),t._firestoreClient}function LV(t){var e,n,s;const r=t._freezeSettings(),a=(function(d,h,m,v){return new cU(d,h,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,ex(v.experimentalLongPollingOptions),v.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new IV(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ra(hn.fromBase64String(e))}catch(n){throw new Ae(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ra(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==r[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=/^__.*__$/;class BV{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Do(e,this.data,this.fieldMask,n,this.fieldTransforms):new du(e,this.data,n,this.fieldTransforms)}}class nx{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Do(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ix(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class Yp{constructor(e,n,s,r,a,u){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Yp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:s,xu:!1});return r.Ou(e),r}Nu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:s,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ix(this.Cu)&&OV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class FV{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Fd(e)}Qu(e,n,s,r=!1){return new Yp({Cu:e,methodName:n,qu:s,path:dn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GV(t){const e=t._freezeSettings(),n=Fd(t._databaseId);return new FV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qV(t,e,n,s,r,a={}){const u=t.Qu(a.merge||a.mergeFields?2:0,e,n,r);Kp("Data must be an object, but it was:",u,s);const d=sx(s,u);let h,m;if(a.merge)h=new ni(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const b=np(e,T,n);if(!u.contains(b))throw new Ae(ue.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);rx(v,b)||v.push(b)}h=new ni(v),m=u.fieldTransforms.filter((T=>h.covers(T.field)))}else h=null,m=u.fieldTransforms;return new BV(new zn(d),h,m)}class Yd extends zp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yd}}function HV(t,e,n,s){const r=t.Qu(1,e,n);Kp("Data must be an object, but it was:",r,s);const a=[],u=zn.empty();Er(s,((h,m)=>{const v=Jp(e,h,n);m=si(m);const T=r.Nu(v);if(m instanceof Yd)a.push(v);else{const b=Kd(m,T);b!=null&&(a.push(v),u.set(v,b))}}));const d=new ni(a);return new nx(u,d,r.fieldTransforms)}function zV(t,e,n,s,r,a){const u=t.Qu(1,e,n),d=[np(e,s,n)],h=[r];if(a.length%2!=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<a.length;b+=2)d.push(np(e,a[b])),h.push(a[b+1]);const m=[],v=zn.empty();for(let b=d.length-1;b>=0;--b)if(!rx(m,d[b])){const C=d[b];let N=h[b];N=si(N);const V=u.Nu(C);if(N instanceof Yd)m.push(C);else{const U=Kd(N,V);U!=null&&(m.push(C),v.set(C,U))}}const T=new ni(m);return new nx(v,T,u.fieldTransforms)}function Kd(t,e){if(ox(t=si(t)))return Kp("Unsupported field value:",e,t),sx(t,e);if(t instanceof zp)return(function(s,r){if(!ix(r.Cu))throw r.Bu(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(s,r){const a=[];let u=0;for(const d of s){let h=Kd(d,r.Lu(u));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),u++}return{arrayValue:{values:a}}})(t,e)}return(function(s,r){if((s=si(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return PU(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=Kt.fromDate(s);return{timestampValue:Td(r.serializer,a)}}if(s instanceof Kt){const a=new Kt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Td(r.serializer,a)}}if(s instanceof jp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ra)return{bytesValue:Rb(r.serializer,s._byteString)};if(s instanceof Di){const a=r.databaseId,u=s.firestore._databaseId;if(!u.isEqual(a))throw r.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Np(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof $p)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Bu("VectorValues must only contain numeric values.");return wp(d.serializer,h)}))}}}}}})(s,r);throw r.Bu(`Unsupported field value: ${qp(s)}`)})(t,e)}function sx(t,e){const n={};return ib(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(t,((s,r)=>{const a=Kd(r,e.Mu(s));a!=null&&(n[s]=a)})),{mapValue:{fields:n}}}function ox(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Kt||t instanceof jp||t instanceof Ra||t instanceof Di||t instanceof zp||t instanceof $p)}function Kp(t,e,n){if(!ox(n)||!(function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)})(n)){const s=qp(n);throw s==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+s)}}function np(t,e,n){if((e=si(e))instanceof $d)return e._internalPath;if(typeof e=="string")return Jp(t,e);throw xd("Field path arguments must be of type string or ",t,!1,void 0,n)}const jV=new RegExp("[~\\*/\\[\\]]");function Jp(t,e,n){if(e.search(jV)>=0)throw xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $d(...e.split("."))._internalPath}catch{throw xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xd(t,e,n,s,r){const a=s&&!s.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(a||u)&&(h+=" (found",a&&(h+=` in field ${s}`),u&&(h+=` in document ${r}`),h+=")"),new Ae(ue.INVALID_ARGUMENT,d+t+h)}function rx(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,n,s,r,a){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Di(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $V(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $V extends ax{data(){return super.data()}}function lx(t,e){return typeof e=="string"?Jp(t,e):e instanceof $d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KV{convertValue(e,n="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Er(e,((r,a)=>{s[r]=this.convertValue(a,n)})),s}convertVectorValue(e){var n,s,r;const a=(r=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map((u=>Vt(u.doubleValue)));return new $p(a)}convertGeoPoint(e){return new jp(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=bp(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(nu(e));default:return null}}convertTimestamp(e){const n=Io(e);return new Kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=bt.fromString(e);ft(Ub(s));const r=new iu(s.get(1),s.get(3)),a=new Me(s.popFirst(5));return r.isEqual(n)||Rs(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class QV extends ax{constructor(e,n,s,r,a,u){super(e,n,s,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(lx("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class rd extends QV{data(e={}){return super.data(e)}}class XV{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Qc(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new rd(this._firestore,this._userDataWriter,s.key,s,new Qc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const h=new rd(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Qc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const h=new rd(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Qc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:WV(d.type),doc:h,oldIndex:m,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function WV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}class ZV extends KV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ra(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Di(this.firestore,null,n)}}function mm(t){t=au(t,zd);const e=au(t.firestore,jd),n=Hp(e),s=new ZV(e);return YV(t._query),PV(n,t._query).then((r=>new XV(e,s,t,r)))}function xT(t){return ux(au(t.firestore,jd),[new Od(t._key,Ei.none())])}function ux(t,e){return(function(s,r){const a=new Co;return s.asyncQueue.enqueueAndForget((async()=>EV(await MV(s),r,a))),a.promise})(Hp(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=GV(e)}set(e,n,s){this._verifyNotCommitted();const r=pm(e,this._firestore),a=JV(r.converter,n,s),u=qV(this._dataReader,"WriteBatch.set",r._key,a,r.converter!==null,s);return this._mutations.push(u.toMutation(r._key,Ei.none())),this}update(e,n,s,...r){this._verifyNotCommitted();const a=pm(e,this._firestore);let u;return u=typeof(n=si(n))=="string"||n instanceof $d?zV(this._dataReader,"WriteBatch.update",a._key,n,s,r):HV(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(u.toMutation(a._key,Ei.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=pm(e,this._firestore);return this._mutations=this._mutations.concat(new Od(n._key,Ei.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pm(t,e){if((t=si(t)).firestore!==e)throw new Ae(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t){return Hp(t=au(t,jd)),new eL(t,(e=>ux(t,e)))}(function(e,n=!0){(function(r){Da=r})(zS),Zl(new Ta("firestore",((s,{instanceIdentifier:r,options:a})=>{const u=s.getProvider("app").getImmediate(),d=new jd(new JP(s.getProvider("auth-internal")),new ZP(s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ae(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(m.options.projectId,v)})(u,r),u);return a=Object.assign({useFetchStreams:n},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Ao(qE,"4.7.3",e),Ao(qE,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="firebasestorage.googleapis.com",dx="storageBucket",tL=120*1e3,nL=600*1e3,iL=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt extends _r{constructor(e,n,s=0){super(ym(e),`Firebase Storage: ${n} (${ym(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ym(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Et||(Et={}));function ym(t){return"storage/"+t}function Qp(){const t="An unknown error occurred, please check the error payload for server response.";return new wt(Et.UNKNOWN,t)}function sL(t){return new wt(Et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function oL(t){return new wt(Et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wt(Et.UNAUTHENTICATED,t)}function aL(){return new wt(Et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function lL(t){return new wt(Et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function fx(){return new wt(Et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hx(){return new wt(Et.CANCELED,"User canceled the upload/download.")}function uL(t){return new wt(Et.INVALID_URL,"Invalid URL '"+t+"'.")}function cL(t){return new wt(Et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function dL(){return new wt(Et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+dx+"' property when initializing the app?")}function mx(){return new wt(Et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fL(){return new wt(Et.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function hL(){return new wt(Et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function mL(t){return new wt(Et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ip(t){return new wt(Et.INVALID_ARGUMENT,t)}function px(){return new wt(Et.APP_DELETED,"The Firebase app was deleted.")}function pL(t){return new wt(Et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kl(t,e){return new wt(Et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ol(t){throw new wt(Et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=ii.makeFromUrl(e,n)}catch{return new ii(e,"")}if(s.path==="")return s;throw cL(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function a(Q){Q.path.charAt(Q.path.length-1)==="/"&&(Q.path_=Q.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+r+u,"i"),h={bucket:1,path:3};function m(Q){Q.path_=decodeURIComponent(Q.path)}const v="v[A-Za-z0-9_]+",T=n.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",C=new RegExp(`^https?://${T}/${v}/b/${r}/o${b}`,"i"),N={bucket:1,path:3},V=n===cx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",j=new RegExp(`^https?://${V}/${r}/${U}`,"i"),G=[{regex:d,indices:h,postModify:a},{regex:C,indices:N,postModify:m},{regex:j,indices:{bucket:1,path:2},postModify:m}];for(let Q=0;Q<G.length;Q++){const q=G[Q],oe=q.regex.exec(e);if(oe){const D=oe[q.indices.bucket];let R=oe[q.indices.path];R||(R=""),s=new ii(D,R),q.postModify(s);break}}if(s==null)throw uL(e);return s}}class gL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(t,e,n){let s=1,r=null,a=null,u=!1,d=0;function h(){return d===2}let m=!1;function v(...U){m||(m=!0,e.apply(null,U))}function T(U){r=setTimeout(()=>{r=null,t(C,h())},U)}function b(){a&&clearTimeout(a)}function C(U,...j){if(m){b();return}if(U){b(),v.call(null,U,...j);return}if(h()||u){b(),v.call(null,U,...j);return}s<64&&(s*=2);let G;d===1?(d=2,G=0):G=(s+Math.random())*1e3,T(G)}let N=!1;function V(U){N||(N=!0,b(),!m&&(r!==null?(U||(d=2),clearTimeout(r),T(0)):U||(d=1)))}return T(0),a=setTimeout(()=>{u=!0,V(!0)},n),V}function vL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t){return t!==void 0}function EL(t){return typeof t=="function"}function TL(t){return typeof t=="object"&&!Array.isArray(t)}function Jd(t){return typeof t=="string"||t instanceof String}function AT(t){return Xp()&&t instanceof Blob}function Xp(){return typeof Blob<"u"}function CT(t,e,n,s){if(s<e)throw ip(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw ip(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function gx(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var fr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fr||(fr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||r||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,n,s,r,a,u,d,h,m,v,T,b=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=h,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=T,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,N)=>{this.resolve_=C,this.reject_=N,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new Xc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const h=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===fr.NO_ERROR,h=a.getStatus();if(!d||yx(h,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===fr.ABORT;s(!1,new Xc(!1,null,v));return}const m=this.successCodes_.indexOf(h)!==-1;s(!0,new Xc(m,a))})},n=(s,r)=>{const a=this.resolve_,u=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(d,d.getResponse());_L(h)?a(h):a()}catch(h){u(h)}else if(d!==null){const h=Qp();h.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,h)):u(h)}else if(r.canceled){const h=this.appDelete_?px():hx();u(h)}else{const h=fx();u(h)}};this.canceled_?n(!1,new Xc(!1,null,!0)):this.backoffId_=yL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xc{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function bL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function xL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function AL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function CL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function wL(t,e,n,s,r,a,u=!0){const d=gx(t.urlParams),h=t.url+d,m=Object.assign({},t.headers);return AL(m,e),bL(m,n),xL(m,a),CL(m,s),new SL(h,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function IL(...t){const e=RL();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(Xp())return new Blob(t);throw new wt(Et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function NL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t){if(typeof atob>"u")throw mL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vm{constructor(e,n){this.data=e,this.contentType=n||null}}function DL(t,e){switch(t){case Ji.RAW:return new vm(vx(e));case Ji.BASE64:case Ji.BASE64URL:return new vm(_x(t,e));case Ji.DATA_URL:return new vm(UL(e),kL(e))}throw Qp()}function vx(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=s,u=t.charCodeAt(++n);s=65536|(a&1023)<<10|u&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function PL(t){let e;try{e=decodeURIComponent(t)}catch{throw Kl(Ji.DATA_URL,"Malformed data URL.")}return vx(e)}function _x(t,e){switch(t){case Ji.BASE64:{const r=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(r||a)throw Kl(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ji.BASE64URL:{const r=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(r||a)throw Kl(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ML(e)}catch(r){throw r.message.includes("polyfill")?r:Kl(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class Ex{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Kl(Ji.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=VL(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function UL(t){const e=new Ex(t);return e.base64?_x(Ji.BASE64,e.rest):PL(e.rest)}function kL(t){return new Ex(t).contentType}function VL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){let s=0,r="";AT(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(AT(this.data_)){const s=this.data_,r=NL(s,e,n);return r===null?null:new _o(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new _o(s,!0)}}static getBlob(...e){if(Xp()){const n=e.map(s=>s instanceof _o?s.data_:s);return new _o(IL.apply(null,n))}else{const n=e.map(u=>Jd(u)?DL(Ji.RAW,u).data:u.data_);let s=0;n.forEach(u=>{s+=u.byteLength});const r=new Uint8Array(s);let a=0;return n.forEach(u=>{for(let d=0;d<u.length;d++)r[a++]=u[d]}),new _o(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){let e;try{e=JSON.parse(t)}catch{return null}return TL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function OL(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function Sx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t,e){return e}class Nn{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||BL}}let Wc=null;function FL(t){return!Jd(t)||t.length<2?t:Sx(t)}function bx(){if(Wc)return Wc;const t=[];t.push(new Nn("bucket")),t.push(new Nn("generation")),t.push(new Nn("metageneration")),t.push(new Nn("name","fullPath",!0));function e(a,u){return FL(u)}const n=new Nn("name");n.xform=e,t.push(n);function s(a,u){return u!==void 0?Number(u):u}const r=new Nn("size");return r.xform=s,t.push(r),t.push(new Nn("timeCreated")),t.push(new Nn("updated")),t.push(new Nn("md5Hash",null,!0)),t.push(new Nn("cacheControl",null,!0)),t.push(new Nn("contentDisposition",null,!0)),t.push(new Nn("contentEncoding",null,!0)),t.push(new Nn("contentLanguage",null,!0)),t.push(new Nn("contentType",null,!0)),t.push(new Nn("metadata","customMetadata",!0)),Wc=t,Wc}function GL(t,e){function n(){const s=t.bucket,r=t.fullPath,a=new ii(s,r);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function qL(t,e,n){const s={};s.type="file";const r=n.length;for(let a=0;a<r;a++){const u=n[a];s[u.local]=u.xform(s,e[u.server])}return GL(s,t),s}function xx(t,e,n){const s=Tx(e);return s===null?null:qL(t,s,n)}function HL(t,e,n,s){const r=Tx(e);if(r===null||!Jd(r.downloadTokens))return null;const a=r.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const v=t.bucket,T=t.fullPath,b="/b/"+u(v)+"/o/"+u(T),C=pu(b,n,s),N=gx({alt:"media",token:m});return C+N})[0]}function Ax(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const a=e[r];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class ka{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t){if(!t)throw Qp()}function Wp(t,e){function n(s,r){const a=xx(t,r,e);return As(a!==null),a}return n}function zL(t,e){function n(s,r){const a=xx(t,r,e);return As(a!==null),HL(a,r,t.host,t._protocol)}return n}function gu(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=aL():r=rL():n.getStatus()===402?r=oL(t.bucket):n.getStatus()===403?r=lL(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function Cx(t){const e=gu(t);function n(s,r){let a=e(s,r);return s.getStatus()===404&&(a=sL(t.path)),a.serverResponse=r.serverResponse,a}return n}function jL(t,e,n){const s=e.fullServerUrl(),r=pu(s,t.host,t._protocol),a="GET",u=t.maxOperationRetryTime,d=new ka(r,a,Wp(t,n),u);return d.errorHandler=Cx(e),d}function $L(t,e,n){const s=e.fullServerUrl(),r=pu(s,t.host,t._protocol),a="GET",u=t.maxOperationRetryTime,d=new ka(r,a,zL(t,n),u);return d.errorHandler=Cx(e),d}function YL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function wx(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=YL(null,e)),s}function KL(t,e,n,s,r){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let G="";for(let Q=0;Q<2;Q++)G=G+Math.random().toString().slice(2);return G}const h=d();u["Content-Type"]="multipart/related; boundary="+h;const m=wx(e,s,r),v=Ax(m,n),T="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+h+`\r
Content-Type: `+m.contentType+`\r
\r
`,b=`\r
--`+h+"--",C=_o.getBlob(T,s,b);if(C===null)throw mx();const N={name:m.fullPath},V=pu(a,t.host,t._protocol),U="POST",j=t.maxUploadRetryTime,W=new ka(V,U,Wp(t,n),j);return W.urlParams=N,W.headers=u,W.body=C.uploadData(),W.errorHandler=gu(e),W}class Ad{constructor(e,n,s,r){this.current=e,this.total=n,this.finalized=!!s,this.metadata=r||null}}function Zp(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{As(!1)}return As(!!n&&(e||["active"]).indexOf(n)!==-1),n}function JL(t,e,n,s,r){const a=e.bucketOnlyServerUrl(),u=wx(e,s,r),d={name:u.fullPath},h=pu(a,t.host,t._protocol),m="POST",v={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},T=Ax(u,n),b=t.maxUploadRetryTime;function C(V){Zp(V);let U;try{U=V.getResponseHeader("X-Goog-Upload-URL")}catch{As(!1)}return As(Jd(U)),U}const N=new ka(h,m,C,b);return N.urlParams=d,N.headers=v,N.body=T,N.errorHandler=gu(e),N}function QL(t,e,n,s){const r={"X-Goog-Upload-Command":"query"};function a(m){const v=Zp(m,["active","final"]);let T=null;try{T=m.getResponseHeader("X-Goog-Upload-Size-Received")}catch{As(!1)}T||As(!1);const b=Number(T);return As(!isNaN(b)),new Ad(b,s.size(),v==="final")}const u="POST",d=t.maxUploadRetryTime,h=new ka(n,u,a,d);return h.headers=r,h.errorHandler=gu(e),h}const wT=256*1024;function XL(t,e,n,s,r,a,u,d){const h=new Ad(0,0);if(u?(h.current=u.current,h.total=u.total):(h.current=0,h.total=s.size()),s.size()!==h.total)throw fL();const m=h.total-h.current;let v=m;r>0&&(v=Math.min(v,r));const T=h.current,b=T+v;let C="";v===0?C="finalize":m===v?C="upload, finalize":C="upload";const N={"X-Goog-Upload-Command":C,"X-Goog-Upload-Offset":`${h.current}`},V=s.slice(T,b);if(V===null)throw mx();function U(Q,q){const oe=Zp(Q,["active","final"]),D=h.current+v,R=s.size();let M;return oe==="final"?M=Wp(e,a)(Q,q):M=null,new Ad(D,R,oe==="final",M)}const j="POST",W=e.maxUploadRetryTime,G=new ka(n,j,U,W);return G.headers=N,G.body=V.uploadData(),G.progressCallback=d||null,G.errorHandler=gu(t),G}const Hn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _m(t){switch(t){case"running":case"pausing":case"canceling":return Hn.RUNNING;case"paused":return Hn.PAUSED;case"success":return Hn.SUCCESS;case"canceled":return Hn.CANCELED;case"error":return Hn.ERROR;default:return Hn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,n,s){if(EL(e)||n!=null||s!=null)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class ZL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r){if(this.sent_)throw Ol("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const a in r)r.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,r[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ol("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ol("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ol("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ol("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class eO extends ZL{initXhr(){this.xhr_.responseType="text"}}function pa(){return new eO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=bx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Et.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(yx(r.status,[]))if(a)r=fx();else{this.sleepTime=Math.max(this.sleepTime*2,iL),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Et.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,a)=>{this._resolve=r,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const s=JL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,pa,e,n);this._request=r,r.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const r=QL(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(r,pa,n,s);this._request=a,a.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=wT*this._chunkMultiplier,n=new Ad(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((r,a)=>{let u;try{u=XL(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(h){this._error=h,this._transition("error");return}const d=this._ref.storage._makeRequest(u,pa,r,a,!1);this._request=d,d.getPromise().then(h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(h.current),h.finalized?(this._metadata=h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){wT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=jL(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(s,pa,e,n);this._request=r,r.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=KL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,pa,e,n);this._request=r,r.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=hx(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=_m(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,r){const a=new WL(n||void 0,s||void 0,r||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(_m(this._state)){case Hn.SUCCESS:ca(this._resolve.bind(null,this.snapshot))();break;case Hn.CANCELED:case Hn.ERROR:const n=this._reject;ca(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_m(this._state)){case Hn.RUNNING:case Hn.PAUSED:e.next&&ca(e.next.bind(e,this.snapshot))();break;case Hn.SUCCESS:e.complete&&ca(e.complete.bind(e))();break;case Hn.CANCELED:case Hn.ERROR:e.error&&ca(e.error.bind(e,this._error))();break;default:e.error&&ca(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){this._service=e,n instanceof ii?this._location=n:this._location=ii.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new yr(e,n)}get root(){const e=new ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Sx(this._location.path)}get storage(){return this._service}get parent(){const e=LL(this._location.path);if(e===null)return null;const n=new ii(this._location.bucket,e);return new yr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw pL(e)}}function nO(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new tO(t,new _o(e),n)}function iO(t){t._throwIfRoot("getDownloadURL");const e=$L(t.storage,t._location,bx());return t.storage.makeRequestWithTokens(e,pa).then(n=>{if(n===null)throw hL();return n})}function sO(t,e){const n=OL(t._location.path,e),s=new ii(t._location.bucket,n);return new yr(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t){return/^[A-Za-z]+:\/\//.test(t)}function rO(t,e){return new yr(t,e)}function Rx(t,e){if(t instanceof eg){const n=t;if(n._bucket==null)throw dL();const s=new yr(n,n._bucket);return e!=null?Rx(s,e):s}else return e!==void 0?sO(t,e):t}function aO(t,e){if(e&&oO(e)){if(t instanceof eg)return rO(t,e);throw ip("To use ref(service, url), the first argument must be a Storage instance.")}else return Rx(t,e)}function RT(t,e){const n=e==null?void 0:e[dx];return n==null?null:ii.makeFromBucketSpec(n,t)}function lO(t,e,n,s={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=s;r&&(t._overrideAuthToken=typeof r=="string"?r:OS(r,t.app.options.projectId))}class eg{constructor(e,n,s,r,a){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=a,this._bucket=null,this._host=cx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tL,this._maxUploadRetryTime=nL,this._requests=new Set,r!=null?this._bucket=ii.makeFromBucketSpec(r,this._host):this._bucket=RT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ii.makeFromBucketSpec(this._url,e):this._bucket=RT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){CT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){CT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yr(this,e)}_makeRequest(e,n,s,r,a=!0){if(this._deleted)return new gL(px());{const u=wL(e,this._appId,s,r,n,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const IT="@firebase/storage",NT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="storage";function uO(t,e,n){return t=si(t),nO(t,e,n)}function cO(t){return t=si(t),iO(t)}function dO(t,e){return t=si(t),aO(t,e)}function fO(t=$S(),e){t=si(t);const s=HS(t,Ix).getImmediate({identifier:e}),r=VS("storage");return r&&hO(s,...r),s}function hO(t,e,n,s={}){lO(t,e,n,s)}function mO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new eg(n,s,r,e,zS)}function pO(){Zl(new Ta(Ix,mO,"PUBLIC").setMultipleInstances(!0)),Ao(IT,NT,""),Ao(IT,NT,"esm2017")}pO();const gO={apiKey:"AIzaSyBvTHMQKOJ3wc3iz-MiOYCBG9j2o3oDOGc",authDomain:"educators-academy.firebaseapp.com",projectId:"educators-academy",storageBucket:"educators-academy.firebasestorage.app",messagingSenderId:"827874514960",appId:"1:827874514960:web:4ab3a29c04b447b413d295",measurementId:"G-TDZ7DD1HQL"},Nx=jS(gO),un=VV(Nx),MT=fO(Nx),yO=async t=>t.type.startsWith("image/")?new Promise((e,n)=>{const s=new Image,r=URL.createObjectURL(t);s.src=r,s.onload=()=>{URL.revokeObjectURL(r);const a=document.createElement("canvas"),u=a.getContext("2d");if(!u){e(t);return}const d=1200;let h=s.width,m=s.height;h>d&&(m*=d/h,h=d),a.width=h,a.height=m,u.drawImage(s,0,0,h,m),a.toBlob(v=>{if(!v){e(t);return}const T=new File([v],t.name.replace(/\.[^/.]+$/,"")+".jpg",{type:"image/jpeg",lastModified:Date.now()});T.size>t.size?e(t):e(T)},"image/jpeg",.8)},s.onerror=a=>{URL.revokeObjectURL(r),console.warn("Image load failed for compression",a),e(t)}}):t,Em=t=>JSON.parse(JSON.stringify(t,(e,n)=>n===void 0?null:n)),vi={async uploadFile(t,e,n){if(!MT)throw new Error("Firebase Storage is not initialized properly.");let s=t;try{s=await yO(t)}catch(h){console.warn("Compression failed, using original file",h)}const r=s.name.split(".").pop(),a=`${Date.now()}_${Math.random().toString(36).substr(2,5)}.${r}`,u=dO(MT,`${e}/${a}`),d=uO(u,s);return new Promise((h,m)=>{d.on("state_changed",v=>{const T=v.bytesTransferred/v.totalBytes*100;n&&n(T)},v=>{console.error("Upload failed:",v),m(v)},async()=>{const v=await cO(d.snapshot.ref);h(v)})})},async saveGrades(t){if(console.log(" saveGrades called with",t.length,"grades"),localStorage.setItem("academy_grades",JSON.stringify(t)),un)try{console.log(" Saving grades to Firebase...");const e=gm(un);t.forEach(n=>{const s=Ll(un,"grades",n.id);e.set(s,Em(n))}),await e.commit(),console.log(" Grades saved successfully to Firebase")}catch(e){console.error(" Firebase Save Grades Error:",e),console.error("Error details:",{code:e.code,message:e.message})}else console.warn(" Firebase DB is not initialized - grades only saved to localStorage")},async saveTeachers(t){if(console.log(" saveTeachers called with",t.length,"teachers"),localStorage.setItem("academy_teachers",JSON.stringify(t)),un)try{console.log(" Saving teachers to Firebase...");const e=gm(un);t.forEach(n=>{const s=Ll(un,"teachers",n.id);e.set(s,Em(n))}),await e.commit(),console.log(" Teachers saved successfully to Firebase")}catch(e){console.error(" Firebase Save Teachers Error:",e),console.error("Error details:",{code:e.code,message:e.message})}else console.warn(" Firebase DB is not initialized - teachers only saved to localStorage")},async saveCourses(t){if(console.log(" saveCourses called with",t.length,"courses"),localStorage.setItem("academy_courses",JSON.stringify(t)),un)try{console.log(" Saving courses to Firebase...");const e=gm(un);t.forEach(n=>{const s=Ll(un,"courses",n.id);e.set(s,Em(n))}),await e.commit(),console.log(" Courses saved successfully to Firebase")}catch(e){console.error(" Firebase Save Courses Error:",e),console.error("Error details:",{code:e.code,message:e.message})}else console.warn(" Firebase DB is not initialized - courses only saved to localStorage")},async deleteTeacher(t){if(console.log(" deleteTeacher called for id:",t),!un){console.warn(" Firebase DB is not initialized - cannot delete from Firebase");return}try{console.log(" Deleting teacher from Firebase..."),await xT(Ll(un,"teachers",t)),console.log(" Teacher deleted successfully from Firebase")}catch(e){throw console.error(" Firebase Delete Teacher Error:",e),console.error("Error details:",{code:e.code,message:e.message}),e}},async deleteCourse(t){if(console.log(" deleteCourse called for id:",t),!un){console.warn(" Firebase DB is not initialized - cannot delete from Firebase");return}try{console.log(" Deleting course from Firebase..."),await xT(Ll(un,"courses",t)),console.log(" Course deleted successfully from Firebase")}catch(e){throw console.error(" Firebase Delete Course Error:",e),console.error("Error details:",{code:e.code,message:e.message}),e}},async loadData(){var e,n,s;console.log(" loadData called");const t={grades:JSON.parse(localStorage.getItem("academy_grades")||"null"),teachers:JSON.parse(localStorage.getItem("academy_teachers")||"null"),courses:JSON.parse(localStorage.getItem("academy_courses")||"null")};if(console.log(" Cached data:",{gradesCount:((e=t.grades)==null?void 0:e.length)||0,teachersCount:((n=t.teachers)==null?void 0:n.length)||0,coursesCount:((s=t.courses)==null?void 0:s.length)||0}),un){console.log(" Firebase DB available, fetching remote data...");try{const[r,a,u]=await Promise.all([mm(hm(un,"grades")),mm(hm(un,"teachers")),mm(hm(un,"courses"))]),d={grades:r.docs.map(h=>h.data()),teachers:a.docs.map(h=>h.data()),courses:u.docs.map(h=>h.data())};return console.log(" Remote data fetched:",{gradesCount:d.grades.length,teachersCount:d.teachers.length,coursesCount:d.courses.length}),localStorage.setItem("academy_grades",JSON.stringify(d.grades)),localStorage.setItem("academy_teachers",JSON.stringify(d.teachers)),localStorage.setItem("academy_courses",JSON.stringify(d.courses)),console.log(" Cache updated with remote data"),d}catch(r){console.error(" Firebase Load Error:",r),console.error("Error details:",{code:r.code,message:r.message}),console.warn(" Falling back to cached data")}}else console.warn(" Firebase DB is not initialized - using cached data only");return t}},DT=({value:t,onChange:e})=>{const n=C=>{let N="12",V="00",U="AM";if(!C)return{hour:N,minute:V,period:U};const j=C.match(/^(\d{1,2}):(\d{2})$/);if(j){let G=parseInt(j[1]);const Q=j[2];return U=G>=12?"PM":"AM",G=G%12||12,N=G.toString(),V=Q,{hour:N,minute:V,period:U}}const W=C.match(/^(\d{1,2}):(\d{2})\s*(.*)$/);if(W){N=W[1],V=W[2];const G=W[3].trim();return U=G===""||G==="PM"||G===""?"PM":"AM",{hour:N,minute:V,period:U}}return{hour:N,minute:V,period:U}},{hour:s,minute:r,period:a}=n(t),[u,d]=ve.useState(s),[h,m]=ve.useState(r),[v,T]=ve.useState(a);ve.useEffect(()=>{const{hour:C,minute:N,period:V}=n(t);d(C),m(N),T(V)},[t]);const b=(C,N,V)=>{d(C),m(N),T(V),e(`${C}:${N} ${V==="AM"?"":""}`)};return E.jsxs("div",{className:"flex items-center gap-1",dir:"ltr",children:[E.jsxs("select",{value:v,onChange:C=>b(u,h,C.target.value),className:"bg-gray-50 border border-gray-200 rounded-lg p-1 text-sm font-bold outline-none focus:border-[#0a192f] w-16 text-center",children:[E.jsx("option",{value:"AM",children:""}),E.jsx("option",{value:"PM",children:""})]}),E.jsx("select",{value:h,onChange:C=>b(u,C.target.value,v),className:"bg-gray-50 border border-gray-200 rounded-lg p-1 text-sm font-bold outline-none focus:border-[#0a192f] w-14 text-center",children:["00","05","10","15","20","25","30","35","40","45","50","55"].map(C=>E.jsx("option",{value:C,children:C},C))}),E.jsx("span",{className:"font-bold",children:":"}),E.jsx("select",{value:u,onChange:C=>b(C.target.value,h,v),className:"bg-gray-50 border border-gray-200 rounded-lg p-1 text-sm font-bold outline-none focus:border-[#0a192f] w-14 text-center",children:Array.from({length:12},(C,N)=>N+1).map(C=>E.jsx("option",{value:C,children:C},C))})]})},vO=({grades:t,setGrades:e,teachers:n,setTeachers:s,courses:r,setCourses:a,onLogout:u,apiKey:d,setApiKey:h,anthropicApiKey:m,setAnthropicApiKey:v})=>{var ks;const[T,b]=ve.useState(()=>localStorage.getItem("admin_active_tab")||"ai-schedule");ve.useEffect(()=>{localStorage.setItem("admin_active_tab",T)},[T]);const[C,N]=ve.useState("list"),[V,U]=ve.useState("list"),[j,W]=ve.useState(null),[G,Q]=ve.useState(null),[q,oe]=ve.useState(null),[D,R]=ve.useState(()=>{const k=localStorage.getItem("academy_stage_subjects");return k?JSON.parse(k):gC}),[M,L]=ve.useState(""),[B,z]=ve.useState(""),[P,we]=ve.useState("gemini"),[Ie,Z]=ve.useState("ai"),[ce,Ee]=ve.useState(""),[Pe,He]=ve.useState([]),[F,ne]=ve.useState(!1),[he,Te]=ve.useState("gemini"),[Ne,Ue]=ve.useState(0),[Fe,Ht]=ve.useState(""),[lt,mn]=ve.useState([]);ve.useEffect(()=>{if(ce){const k=t.find(le=>le.id===ce);k&&He(JSON.parse(JSON.stringify(k.schedule||[])))}},[ce,t]),ve.useEffect(()=>{if(Fe){const k=t.find(le=>le.id===Fe);k&&mn(JSON.parse(JSON.stringify(k.ramadanSchedule||[])))}},[Fe,t]);const[Pn,es]=ve.useState(""),[Ui,Un]=ve.useState(""),[Ds,Po]=ve.useState(((ks=t[0])==null?void 0:ks.id)||""),[Jt,xt]=ve.useState(!1),[ki,Vi]=ve.useState(!1),[oi,Va]=ve.useState(localStorage.getItem("google_sheet_webhook_url")||""),[Ze,Tt]=ve.useState({name:"",subject:"",teachingHours:"",availability:"",bio:"",imageUrl:"",grades:[],stages:[]}),[ts,Rt]=ve.useState(null),[Dt,ri]=ve.useState(null),[Uo,ns]=ve.useState(!1),[Sr,Li]=ve.useState(""),[et,At]=ve.useState({title:"",description:"",videoUrl:"",thumbnailUrl:"",gradeId:""}),[sn,Qt]=ve.useState(null),[yu,br]=ve.useState(!1),[La,Ps]=ve.useState("info"),xn=Array.from(new Set(D.flatMap(k=>k.subjects))).sort();ve.useEffect(()=>{t.length>0||n.length>0||r.length>0?(console.log(" Auto-saving data to Firebase..."),vi.saveGrades(t),vi.saveTeachers(n),vi.saveCourses(r),localStorage.setItem("academy_stage_subjects",JSON.stringify(D))):console.log(" Skipping auto-save: data not loaded yet")},[t,n,r,D]),ve.useEffect(()=>{localStorage.setItem("google_sheet_webhook_url",oi)},[oi]);const Si=async k=>{const le=typeof k=="string"?k:Ui;if(le.trim()){xt(!0);try{const me=(await UD(le,d)).map(ae=>{const pe=t.filter(ye=>{var Re;return(Re=ae.grades)==null?void 0:Re.some(tt=>ye.name.includes(tt)||tt.includes(ye.name)||ye.stage==="primary"&&tt.includes("")||ye.stage==="preparatory"&&tt.includes("")||ye.stage==="secondary"&&tt.includes(""))}).map(ye=>ye.id);return{...ae,id:ae.id||`t-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,whatsapp:Jl.phone,imageUrl:ae.imageUrl||`https://picsum.photos/seed/${Math.random()}/400`,grades:pe.length>0?pe:[]}});s(ae=>{const pe=[...ae];return me.forEach(ye=>{pe.find(Re=>Re.name===ye.name)||pe.push(ye)}),pe}),e(ae=>ae.map(pe=>{const ye=me.filter(Re=>{var tt;return(tt=Re.grades)==null?void 0:tt.includes(pe.id)}).map(Re=>Re.id);return ye.length>0?{...pe,teachers:Array.from(new Set([...pe.teachers,...ye]))}:pe})),alert(`   ${me.length}    !`),Un(""),N("list")}catch(de){console.error(de),d?alert("    ."):console.warn("AI Teacher parsing failed (likely due to missing key), falling back to offline regex.")}finally{xt(!1)}}},jn=async k=>{k.preventDefault();const le=Uo?Sr:Ze.subject;if(!Ze.name||!le)return alert("   ");if(!Ze.stages||Ze.stages.length===0)return alert("     ");xt(!0);try{let de=Ze.imageUrl||`https://picsum.photos/seed/${Date.now()}/400`;ts&&(de=await vi.uploadFile(ts,"teachers",pe=>Ue(pe)));const me=`t-${Date.now()}`,ae={id:me,name:Ze.name,subject:le,imageUrl:de,whatsapp:Jl.phone,teachingHours:Ze.teachingHours||"",availability:Ze.availability||"",bio:Ze.bio||"",grades:Ze.grades||[],stages:Ze.stages||[]};s(pe=>[...pe,ae]),Ze.grades&&Ze.grades.length>0&&e(pe=>pe.map(ye=>{var Re;return(Re=Ze.grades)!=null&&Re.includes(ye.id)?{...ye,teachers:Array.from(new Set([...ye.teachers,me]))}:ye})),alert("      !"),N("list"),kn()}catch(de){console.error(de),alert("    ")}finally{xt(!1),Ue(0)}},kn=()=>{Tt({name:"",subject:"",bio:"",availability:"",teachingHours:"",imageUrl:"",grades:[],stages:[]}),Rt(null),ns(!1),Li("")},Oi=async()=>{var k,le,de,me;if(!et.title)return alert("    ");d||console.warn("Attempting 4K image generation without API Key. This will likely fail."),Vi(!0);try{const ye=(de=(le=(k=(await new gp({apiKey:d||""}).models.generateContent({model:"gemini-3-pro-image-preview",contents:{parts:[{text:`High-end 4K cinematic educational course thumbnail for a subject titled "${et.title}". 
            Atmosphere: Professional, prestigious, elite academic. 
            Visuals: Dramatic studio lighting, shallow depth of field, sharp textures of books and polished wood, 
            luxurious gold and deep navy blue color palette. 
            Style: Inspirational and modern, suitable for Educators Academy.`}]},config:{imageConfig:{aspectRatio:"16:9",imageSize:"4K"}}})).candidates)==null?void 0:k[0])==null?void 0:le.content)==null?void 0:de.parts.find(Re=>Re.inlineData);if(ye!=null&&ye.inlineData){const Re=ye.inlineData.data;At(tt=>({...tt,thumbnailUrl:`data:image/png;base64,${Re}`}))}else alert("          .")}catch(ae){console.error(ae),alert("   (   API )."),(me=ae.message)!=null&&me.includes("Requested entity was not found")}finally{Vi(!1)}},Us=async k=>{if(k.preventDefault(),!et.title||!et.gradeId)return alert("    ");xt(!0);try{let le=et.thumbnailUrl||"";sn&&(le=await vi.uploadFile(sn,"courses/thumbs",pe=>Ue(pe)));const de=t.find(pe=>pe.id===et.gradeId),me=`c-${Date.now()}`,ae={id:me,title:et.title,description:et.description||"     ",thumbnailUrl:le||`https://picsum.photos/seed/${me}/800/400`,stage:de?de.stage:"primary",grade:de?de.name:"",gradeId:et.gradeId,media:et.videoUrl?[{id:`m-${Date.now()}`,title:" ",url:et.videoUrl,type:"video"}]:[]};a(pe=>[...pe,ae]),e(pe=>pe.map(ye=>ye.id===et.gradeId?{...ye,courses:Array.from(new Set([...ye.courses,me]))}:ye)),alert("   !"),U("list"),At({title:"",description:"",videoUrl:"",thumbnailUrl:"",gradeId:""}),Qt(null)}catch(le){console.error(le)}finally{xt(!1),Ue(0)}},ko=k=>{Tt(le=>{const de=le.stages||[],me=de.includes(k)?de.filter(ye=>ye!==k):[...de,k],ae=t.filter(ye=>me.includes(ye.stage)).map(ye=>ye.id),pe=(le.grades||[]).filter(ye=>ae.includes(ye));return{...le,stages:me,grades:pe}})},bi=k=>{Tt(le=>{const de=le.grades||[],me=de.includes(k)?de.filter(ae=>ae!==k):[...de,k];return{...le,grades:me}})},Bi=async k=>{xt(!0);try{let le=k.imageUrl;Dt&&(le=await vi.uploadFile(Dt,"teachers",me=>Ue(me)));const de={...k,imageUrl:le};s(me=>me.map(ae=>ae.id===de.id?de:ae)),alert("    !"),W(null),ri(null)}catch(le){console.error(le),alert("    ")}finally{xt(!1),Ue(0)}},zt=async()=>{if(!B.trim()||!Pn){alert("     ");return}if(!(P==="gemini"?d:m)){Te(P),ne(!0);return}xt(!0);try{const le=t.find(pe=>pe.id===Pn),de=le?`[: ${le.name}]`:"",me=P==="gemini"?d:m,ae=await dE(`${de} ${B}`,me,P);e(pe=>pe.map(ye=>{if(ye.id===Pn){const tt=[...ye.schedule||[]];return ae.forEach($n=>{const xi=$n.day.trim();let pn=tt.find(Fi=>Fi.day.trim()===xi);pn||(pn={day:xi,slots:[]},tt.push(pn)),$n.slots.forEach(Fi=>{pn.slots.some(ai=>ai.subject.trim()===Fi.subject.trim()&&ai.time.trim()===Fi.time.trim())||pn.slots.push(Fi)})}),{...ye,schedule:tt}}return ye})),alert("   !       "),z("")}catch(le){console.error("AI Update Error:",le),alert("        API  .")}finally{xt(!1)}};return E.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-10",dir:"rtl",children:[Ne>0&&E.jsx("div",{className:"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm flex items-center justify-center animate-in fade-in duration-300",children:E.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-2xl text-center max-w-sm w-full mx-4 border border-gray-100 transform scale-100 hover:scale-105 transition-transform",children:[E.jsx("div",{className:"mb-6 text-7xl animate-bounce filter drop-shadow-lg",children:""}),E.jsx("h3",{className:"text-3xl font-black text-[#0a192f] mb-2",children:" ..."}),E.jsx("p",{className:"text-gray-400 font-bold text-sm mb-6",children:"  "}),E.jsx("div",{className:"relative w-full bg-gray-100 rounded-full h-6 mb-4 overflow-hidden inner-shadow",children:E.jsx("div",{className:"bg-gradient-to-r from-[#10b981] to-[#34d399] h-full transition-all duration-300 ease-out shadow-[0_0_15px_rgba(16,185,129,0.5)]",style:{width:`${Ne}%`},children:E.jsx("div",{className:"absolute top-0 right-0 bottom-0 left-0 bg-white/20 animate-[shimmer_1s_infinite] skew-x-12"})})}),E.jsxs("p",{className:"text-[#10b981] font-black text-2xl",children:[Math.round(Ne),"%"]})]})}),E.jsx(PS,{grades:t,apiKey:d,onUpdateSchedule:async(k,le)=>{const de=t.find(pe=>pe.id===k),me=de?` ${de.name} (${de.stage})`:"",ae=await dE(`${me} ${le}`,d);e(pe=>pe.map(ye=>ye.id===k?{...ye,schedule:ae}:ye))},onAddTeacher:Si,onNavigate:()=>{}}),E.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-10 gap-6 text-right",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("img",{src:ad,alt:"Logo",className:"w-16 h-auto"}),E.jsx("h1",{className:"text-4xl font-black text-[#0a192f]",children:"  "})]}),E.jsxs("div",{className:"flex bg-white rounded-2xl p-1 shadow-lg border overflow-x-auto max-w-full",children:[[{id:"ai-schedule",label:" "},{id:"teachers",label:" "},{id:"subjects",label:" "},{id:"courses",label:" "},{id:"settings",label:" "}].map(k=>E.jsx("button",{onClick:()=>b(k.id),className:`px-5 py-2.5 rounded-xl font-bold transition-all whitespace-nowrap ${T===k.id?"bg-[#0a192f] text-white":"text-gray-500 hover:bg-gray-50"}`,children:k.label},k.id)),E.jsx("button",{onClick:u,className:"px-5 py-2.5 rounded-xl font-bold text-red-500 hover:bg-red-50",children:""})]})]}),T==="ai-schedule"&&E.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl p-10 animate-in fade-in border border-gray-100",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[E.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),E.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[E.jsx("button",{onClick:()=>Z("ai"),className:`px-6 py-3 rounded-2xl font-black transition-all ${Ie==="ai"?"bg-[#10b981] text-white shadow-lg":"bg-white text-gray-500 hover:bg-gray-100"}`,children:"   (AI)"}),E.jsx("button",{onClick:()=>Z("manual"),className:`px-6 py-3 rounded-2xl font-black transition-all ${Ie==="manual"?"bg-[#0a192f] text-white shadow-lg":"bg-white text-gray-500 hover:bg-gray-100"}`,children:"  "}),E.jsx("button",{onClick:()=>Z("ramadan"),className:`px-6 py-3 rounded-2xl font-black transition-all ${Ie==="ramadan"?"bg-[#f97316] text-white shadow-lg":"bg-white text-gray-500 hover:bg-gray-100"}`,children:"  "})]})]}),Ie==="ai"&&E.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4",children:[E.jsx("div",{className:"flex gap-4 mb-8 overflow-x-auto pb-2",children:[{id:"gemini",name:"Gemini 1.5 Pro",icon:"",premium:!0,provider:"gemini"},{id:"claude",name:"Claude 3.5 Sonnet",icon:"",premium:!0,provider:"claude"},{id:"offline",name:"Local Intelligence",icon:"",premium:!1,provider:"offline"}].map(k=>E.jsxs("button",{onClick:()=>{k.id!=="offline"&&(we(k.provider),(k.provider==="gemini"?d:m)||(Te(k.provider),ne(!0)))},className:`flex items-center gap-3 px-6 py-4 rounded-2xl border-2 transition-all min-w-[200px] ${P===k.provider&&k.id!=="offline"?"border-[#10b981] bg-[#0a192f] text-white shadow-lg scale-105":"border-[#0a192f] bg-white text-[#0a192f] hover:bg-gray-50"}`,children:[E.jsx("span",{className:"text-2xl",children:k.icon}),E.jsxs("div",{className:"text-right",children:[E.jsx("p",{className:"font-black text-sm",children:k.name}),E.jsx("p",{className:"text-xs opacity-75 font-bold",children:k.premium?d?"  ":" API ":"   "})]})]},k.id))}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[E.jsxs("div",{className:"md:col-span-1",children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-3",children:"  :"}),E.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2 custom-scrollbar",children:t.map(k=>E.jsx("button",{onClick:()=>es(k.id),className:`w-full text-right p-4 rounded-2xl font-bold transition-all border-2 ${Pn===k.id?"bg-[#0a192f] text-white border-[#0a192f]":"bg-gray-50 text-gray-500 border-transparent hover:border-gray-200"}`,children:k.name},k.id))})]}),E.jsxs("div",{className:"md:col-span-2 space-y-6",children:[E.jsx("textarea",{value:B,onChange:k=>z(k.target.value),className:"w-full border-2 rounded-[2rem] p-8 h-64 outline-none font-bold text-xl leading-relaxed shadow-inner bg-gray-50 focus:border-[#10b981] transition-all",placeholder:"    .. :  4     6  ..."}),E.jsx("button",{onClick:zt,disabled:Jt,className:"w-full bg-[#0a192f] text-white py-6 rounded-[2.5rem] font-black text-2xl shadow-2xl hover:bg-[#10b981] transition-all active:scale-95 flex items-center justify-center gap-4",children:Jt?E.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"}):"   "})]})]})]}),Ie==="manual"&&E.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 space-y-8",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-3",children:"   :"}),E.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:t.map(k=>E.jsx("button",{onClick:()=>Ee(k.id),className:`px-6 py-3 rounded-xl font-bold transition-all border-2 min-w-fit ${ce===k.id?"bg-[#0a192f] text-white border-[#0a192f] shadow-lg scale-105":"bg-white text-gray-500 border-gray-100 hover:border-gray-200"}`,children:k.name},k.id))})]}),ce?E.jsxs("div",{className:"bg-gray-50 rounded-[2.5rem] p-6 border border-gray-200",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsx("h3",{className:"text-xl font-black text-[#0a192f]",children:"   "}),E.jsxs("button",{onClick:()=>{e(k=>k.map(le=>le.id===ce?{...le,schedule:Pe}:le)),alert("   ! ")},className:"bg-[#10b981] text-white px-8 py-3 rounded-xl font-black shadow-lg hover:bg-emerald-600 transition-all active:scale-95 flex items-center gap-2",children:[E.jsx("span",{children:""}),"  "]})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["","","","","",""].map(k=>{const le=Pe.find(de=>de.day===k)||{slots:[]};return E.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-gray-100 hover:border-[#0a192f]/20 transition-all",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[E.jsx("h4",{className:"font-black text-lg text-[#0a192f]",children:k}),E.jsx("button",{onClick:()=>{const de={id:`s-${Date.now()}-${Math.random()}`,subject:"",time:"",color:"bg-blue-500",teacherId:""},me=[...Pe],ae=me.findIndex(pe=>pe.day===k);ae>=0?me[ae].slots.push(de):me.push({day:k,slots:[de]}),He(me)},className:"w-8 h-8 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center font-black hover:bg-blue-100 transition-all",title:" ",children:"+"})]}),E.jsxs("div",{className:"space-y-3",children:[le.slots.map((de,me)=>E.jsxs("div",{className:"bg-gray-50 p-3 rounded-2xl border border-gray-200 group relative",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsxs("select",{value:de.subject,onChange:ae=>{const pe=[...Pe],ye=pe.findIndex(Re=>Re.day===k);pe[ye].slots[me].subject=ae.target.value,He(pe)},className:"w-full bg-white border border-gray-200 rounded-lg p-2 text-sm font-bold outline-none focus:border-[#0a192f]",children:[E.jsx("option",{value:"",children:" ..."}),xn.map(ae=>E.jsx("option",{value:ae,children:ae},ae))]}),E.jsx(DT,{value:de.time,onChange:ae=>{const pe=[...Pe],ye=pe.findIndex(Re=>Re.day===k);pe[ye].slots[me].time=ae,He(pe)}})]}),E.jsx("button",{onClick:()=>{const ae=[...Pe],pe=ae.findIndex(ye=>ye.day===k);ae[pe].slots=ae[pe].slots.filter(ye=>ye.id!==de.id),He(ae)},className:"absolute -top-2 -left-2 w-6 h-6 bg-red-100 text-red-500 rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-all font-black shadow-sm hover:bg-red-500 hover:text-white",children:""})]},de.id)),le.slots.length===0&&E.jsx("p",{className:"text-center text-gray-300 text-xs font-bold py-4",children:"  "})]})]},k)})})]}):E.jsx("div",{className:"text-center py-20 bg-gray-50 rounded-[2.5rem] border-2 border-dashed border-gray-200",children:E.jsx("p",{className:"text-gray-400 font-bold text-xl",children:"       "})})]}),Ie==="ramadan"&&E.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 space-y-8",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-3",children:"    :"}),E.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:t.map(k=>E.jsx("button",{onClick:()=>Ht(k.id),className:`px-6 py-3 rounded-xl font-bold transition-all border-2 min-w-fit ${Fe===k.id?"bg-[#f97316] text-white border-[#f97316] shadow-lg scale-105":"bg-white text-gray-500 border-gray-100 hover:border-gray-200"}`,children:k.name},k.id))})]}),Fe?E.jsxs("div",{className:"bg-orange-50/50 rounded-[2.5rem] p-6 border border-orange-100",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsx("h3",{className:"text-xl font-black text-[#f97316]",children:"   "}),E.jsxs("button",{onClick:()=>{e(k=>k.map(le=>le.id===Fe?{...le,ramadanSchedule:lt}:le)),alert("    ! ")},className:"bg-[#f97316] text-white px-8 py-3 rounded-xl font-black shadow-lg hover:bg-orange-600 transition-all active:scale-95 flex items-center gap-2",children:[E.jsx("span",{children:""}),"   "]})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["","","","","",""].map(k=>{const le=lt.find(de=>de.day===k)||{slots:[]};return E.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-100 pb-2",children:[E.jsxs("h4",{className:"font-black text-lg text-[#0a192f] flex items-center gap-2",children:[E.jsx("span",{className:"text-[#f97316]",children:""})," ",k]}),E.jsx("button",{onClick:()=>{const de={id:`s-${Date.now()}`,subject:" ",time:"09:00 ",color:"bg-orange-100 text-orange-800",icon:""},me=[...lt],ae=me.findIndex(pe=>pe.day===k);ae>=0?me[ae].slots.push(de):me.push({day:k,slots:[de]}),mn(me)},className:"bg-gray-50 text-[#f97316] px-4 py-2 rounded-lg text-sm font-bold hover:bg-orange-50 transition-colors",children:"+  "})]}),E.jsx("div",{className:"space-y-3",children:le.slots.length===0?E.jsx("p",{className:"text-gray-300 text-sm text-center py-4 italic",children:"     "}):le.slots.map((de,me)=>E.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-gray-50 p-3 rounded-xl border border-gray-100 group hover:border-[#f97316]/30 transition-colors",children:[E.jsx("div",{className:"flex-1 min-w-[150px]",children:E.jsxs("select",{value:de.subject,onChange:ae=>{const pe=[...lt],ye=pe.findIndex(Re=>Re.day===k);pe[ye].slots[me].subject=ae.target.value,mn(pe)},className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm font-bold focus:border-[#f97316] outline-none",children:[E.jsx("option",{value:" ",children:" "}),xn.map(ae=>E.jsx("option",{value:ae,children:ae},ae))]})}),E.jsx("div",{className:"w-32",children:E.jsx(DT,{value:de.time,onChange:ae=>{const pe=[...lt],ye=pe.findIndex(Re=>Re.day===k);pe[ye].slots[me].time=ae,mn(pe)}})}),E.jsx("button",{onClick:()=>{const ae=[...lt],pe=ae.findIndex(ye=>ye.day===k);ae[pe].slots.splice(me,1),mn(ae)},className:"text-red-400 hover:text-red-600 p-2 opacity-50 group-hover:opacity-100 transition-opacity",title:" ",children:""})]},de.id))})]},k)})})]}):E.jsx("div",{className:"text-center py-20 bg-orange-50/30 rounded-[2.5rem] border-2 border-dashed border-orange-100/50",children:E.jsx("p",{className:"text-gray-400 font-bold text-xl",children:"      "})})]})]}),T==="teachers"&&E.jsxs("div",{className:"animate-in fade-in text-right",children:[E.jsxs("div",{className:"flex justify-between items-center mb-8 border-b pb-4",children:[E.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"  "}),E.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[E.jsx("button",{onClick:()=>N("list"),className:`px-4 py-2 rounded-lg font-bold ${C==="list"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:""}),E.jsx("button",{onClick:()=>N("add"),className:`px-4 py-2 rounded-lg font-bold ${C==="add"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:" "}),E.jsx("button",{onClick:()=>N("ai-add"),className:`px-4 py-2 rounded-lg font-bold ${C==="ai-add"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:"  "})]})]}),C==="ai-add"&&E.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-xl space-y-8 max-w-2xl mx-auto border-t-8 border-[#10b981]",children:[E.jsx("h3",{className:"text-2xl font-black text-[#0a192f] text-center",children:"    "}),E.jsx("textarea",{value:Ui,onChange:k=>Un(k.target.value),className:"w-full border-2 rounded-2xl p-6 h-64 focus:border-[#10b981] outline-none font-bold text-lg shadow-inner bg-gray-50",placeholder:"    (:     1  2 )..."}),E.jsx("button",{onClick:()=>Si(),disabled:Jt||!Ui.trim(),className:"w-full bg-[#0a192f] text-white py-5 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all active:scale-95",children:Jt?"  ...":"   "})]}),C==="add"&&E.jsxs("form",{onSubmit:jn,className:"bg-white p-8 rounded-[2.5rem] shadow-xl space-y-8 max-w-3xl mx-auto border-t-8 border-[#10b981]",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),E.jsx("input",{required:!0,placeholder:"",value:Ze.name,onChange:k=>Tt({...Ze,name:k.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold outline-none focus:border-[#10b981]"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),Uo?E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{autoFocus:!0,required:!0,placeholder:" ",value:Sr,onChange:k=>Li(k.target.value),className:"flex-1 border-2 rounded-xl p-4 font-bold outline-none border-orange-500"}),E.jsx("button",{type:"button",onClick:()=>ns(!1),className:"bg-gray-100 px-4 rounded-xl text-gray-400 font-bold",children:""})]}):E.jsxs("select",{required:!0,value:Ze.subject,onChange:k=>k.target.value==="ADD_NEW"?ns(!0):Tt({...Ze,subject:k.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white",children:[E.jsx("option",{value:"",children:" ..."}),xn.map(k=>E.jsx("option",{value:k,children:k},k)),E.jsx("option",{value:"ADD_NEW",className:"text-orange-500 font-black",children:"+  ..."})]})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-500 mb-4",children:"   :"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Eo.map(k=>{var le,de,me,ae,pe;return E.jsxs("div",{className:`p-4 rounded-2xl border-2 transition-all cursor-pointer ${(le=Ze.stages)!=null&&le.includes(k.id)?"bg-[#10b981]/5 border-[#10b981]":"bg-gray-50 border-gray-100"}`,onClick:()=>ko(k.id),children:[E.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[E.jsx("span",{className:"text-xl",children:k.icon}),E.jsx("span",{className:`font-black ${(de=Ze.stages)!=null&&de.includes(k.id)?"text-[#10b981]":"text-gray-400"}`,children:k.name}),E.jsx("div",{className:`mr-auto w-5 h-5 rounded-full border-2 flex items-center justify-center ${(me=Ze.stages)!=null&&me.includes(k.id)?"border-[#10b981] bg-[#10b981]":"border-gray-300"}`,children:((ae=Ze.stages)==null?void 0:ae.includes(k.id))&&E.jsx("span",{className:"text-white text-[10px]",children:""})})]}),((pe=Ze.stages)==null?void 0:pe.includes(k.id))&&E.jsx("div",{className:"space-y-1 mt-2 animate-in fade-in zoom-in-95",onClick:ye=>ye.stopPropagation(),children:t.filter(ye=>ye.stage===k.id).map(ye=>{var Re;return E.jsx("div",{onClick:()=>bi(ye.id),className:`flex items-center gap-2 p-2 rounded-lg text-xs font-bold transition-all ${(Re=Ze.grades)!=null&&Re.includes(ye.id)?"bg-[#10b981] text-white":"bg-white border text-gray-400"}`,children:ye.name},ye.id)})})]},k.id)})})]}),E.jsxs("div",{className:"border-2 border-dashed rounded-2xl p-8 text-center bg-gray-50 hover:bg-gray-100 transition-all cursor-pointer relative group",children:[E.jsx("input",{type:"file",accept:"image/*",onChange:k=>{var le;return Rt(((le=k.target.files)==null?void 0:le[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("span",{className:"text-4xl mb-2",children:""}),E.jsx("p",{className:"text-gray-400 font-bold",children:ts?`  : ${ts.name}`:"    "})]})]}),E.jsx("textarea",{placeholder:" ...",value:Ze.bio,onChange:k=>Tt({...Ze,bio:k.target.value}),className:"w-full border-2 rounded-xl p-4 h-32 font-bold focus:border-[#10b981] outline-none"}),E.jsx("button",{disabled:Jt,className:"w-full bg-[#10b981] text-white py-5 rounded-2xl font-black text-xl shadow-xl shadow-emerald-500/20 active:scale-95 transition-all",children:Jt?" ...":"  "})]}),C==="list"&&E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(k=>{var le;return E.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] shadow-md border border-gray-100 group hover:border-[#10b981] transition-all flex flex-col",children:[E.jsx("img",{src:k.imageUrl,className:"w-32 h-32 rounded-[2rem] object-cover mx-auto mb-4 border-4 border-gray-50 shadow-sm"}),E.jsx("h3",{className:"text-2xl font-black text-center text-[#0a192f]",children:k.name}),E.jsx("p",{className:"text-[#10b981] font-bold text-center mb-6",children:k.subject}),E.jsx("div",{className:"flex flex-wrap gap-1 justify-center mb-4",children:(le=k.grades)==null?void 0:le.map(de=>{const me=t.find(ae=>ae.id===de);return me?E.jsx("span",{className:"bg-gray-100 text-gray-600 text-[10px] px-2 py-1 rounded-full font-bold border border-gray-200",children:me.name},de):null})}),E.jsxs("div",{className:"flex gap-2 mt-auto",children:[E.jsx("button",{onClick:()=>W(k),className:"flex-1 bg-gray-50 text-gray-600 py-3 rounded-xl font-bold hover:bg-[#10b981] hover:text-white transition-all",children:" "}),E.jsx("button",{onClick:()=>oe(k),className:"bg-red-50 p-3 rounded-xl text-red-500 hover:bg-red-500 hover:text-white transition-all",children:""})]})]},k.id)})})]}),T==="courses"&&E.jsxs("div",{className:"animate-in fade-in text-right",children:[E.jsxs("div",{className:"flex justify-between items-center mb-8 border-b pb-4",children:[E.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"   "}),E.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[E.jsx("button",{onClick:()=>U("list"),className:`px-4 py-2 rounded-lg font-bold ${V==="list"?"bg-white shadow text-[#f97316]":"text-gray-400"}`,children:""}),E.jsx("button",{onClick:()=>U("add"),className:`px-4 py-2 rounded-lg font-bold ${V==="add"?"bg-white shadow text-[#f97316]":"text-gray-400"}`,children:"  "})]})]}),V==="add"&&E.jsxs("form",{onSubmit:Us,className:"bg-white p-10 rounded-[2.5rem] shadow-xl space-y-8 max-w-2xl mx-auto border-t-8 border-[#f97316]",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),E.jsx("input",{required:!0,placeholder:" ",value:et.title,onChange:k=>At({...et,title:k.target.value}),className:"w-full border-2 rounded-2xl p-5 font-black text-2xl focus:border-[#f97316] outline-none"})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("button",{type:"button",onClick:Oi,disabled:ki||!et.title,className:"bg-[#0a192f] text-white p-5 rounded-2xl font-black flex items-center justify-center gap-3 hover:bg-black group transition-all active:scale-95 shadow-xl",children:[ki?E.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):E.jsx("span",{className:"text-2xl group-hover:rotate-12 transition-transform",children:""}),ki?"  4K...":"  4K"]}),E.jsxs("div",{className:"relative h-full",children:[E.jsx("input",{type:"file",accept:"image/*",onChange:k=>{var le;return Qt(((le=k.target.files)==null?void 0:le[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),E.jsx("div",{className:"bg-orange-50 border-2 border-dashed border-orange-200 rounded-2xl p-5 text-center font-bold text-orange-600 h-full flex items-center justify-center",children:sn?` ${sn.name}`:"   "})]})]}),E.jsx("input",{type:"text",placeholder:"     ...",value:et.thumbnailUrl,onChange:k=>At({...et,thumbnailUrl:k.target.value}),className:"w-full bg-gray-50 border-2 border-gray-100 rounded-xl p-3 font-bold text-sm focus:border-[#f97316] outline-none text-left",dir:"ltr"}),et.thumbnailUrl&&E.jsx("img",{src:et.thumbnailUrl,className:"w-full h-56 object-cover rounded-[2rem] border-4 border-white shadow-xl animate-in zoom-in"})]}),E.jsxs("select",{required:!0,value:et.gradeId,onChange:k=>At({...et,gradeId:k.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white focus:border-[#f97316] outline-none",children:[E.jsx("option",{value:"",children:"  ..."}),t.map(k=>E.jsx("option",{value:k.id,children:k.name},k.id))]}),E.jsx("textarea",{placeholder:"  ...",value:et.description,onChange:k=>At({...et,description:k.target.value}),className:"w-full border-2 rounded-2xl p-4 h-32 font-bold focus:border-[#f97316] outline-none"}),E.jsx("button",{disabled:Jt,className:"w-full bg-[#f97316] text-white py-6 rounded-[2rem] font-black text-2xl shadow-2xl hover:bg-orange-600 transition-all active:scale-95 shadow-orange-500/20",children:Jt?" ...":"    "})]}),V==="list"&&E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(k=>E.jsxs("div",{className:"bg-white rounded-[3rem] shadow-xl border border-gray-100 overflow-hidden group flex flex-col hover:-translate-y-2 transition-all duration-500",children:[E.jsx("img",{src:k.thumbnailUrl,className:"w-full h-56 object-cover group-hover:scale-105 transition-transform duration-1000"}),E.jsxs("div",{className:"p-8 flex-1 flex flex-col",children:[E.jsx("h3",{className:"text-2xl font-black mb-2 text-[#0a192f]",children:k.title}),E.jsx("p",{className:"text-gray-400 font-bold text-sm mb-6",children:k.grade}),E.jsxs("div",{className:"flex gap-2 mt-auto",children:[E.jsx("button",{onClick:()=>Q(k),className:"flex-1 bg-gray-50 text-[#0a192f] py-4 rounded-2xl font-black hover:bg-[#0a192f] hover:text-white transition-all shadow-sm",children:"  "}),E.jsx("button",{onClick:async()=>{if(confirm("    "))try{const le=k.id;console.log(" Deleting course from Firebase:",le),await vi.deleteCourse(le),console.log(" Course deleted from Firebase"),a(de=>de.filter(me=>me.id!==le)),e(de=>de.map(me=>({...me,courses:me.courses.filter(ae=>ae!==le)})))}catch(le){console.error(le),alert("    ")}},className:"bg-red-50 p-4 rounded-2xl text-red-500 hover:bg-red-500 hover:text-white transition-all",children:""})]})]})]},k.id))})]}),j&&E.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:E.jsxs("form",{onSubmit:k=>{k.preventDefault(),Bi(j)},className:"bg-white w-full max-w-4xl rounded-[2.5rem] p-8 md:p-12 shadow-2xl overflow-y-auto max-h-[90vh] animate-in zoom-in-95 border-t-8 border-[#10b981]",children:[E.jsxs("div",{className:"flex justify-between items-center mb-8",children:[E.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),E.jsx("button",{type:"button",onClick:()=>W(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 hover:bg-red-100 hover:text-red-500 transition-all font-black",children:""})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsxs("div",{className:"relative inline-block group cursor-pointer",children:[E.jsx("img",{src:j.imageUrl,alt:j.name,className:"w-40 h-40 rounded-[2.5rem] object-cover border-4 border-[#10b981] shadow-xl group-hover:brightness-75 transition-all"}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:E.jsx("span",{className:"text-white text-3xl",children:""})}),E.jsx("input",{type:"file",accept:"image/*",onChange:k=>{var le;return ri(((le=k.target.files)==null?void 0:le[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer"})]}),E.jsx("p",{className:"text-sm font-bold text-gray-400 mt-2",children:"  "}),E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2 mt-4 text-right",children:"  ():"}),E.jsx("input",{type:"text",placeholder:"https://i.ibb.co/.../image.jpg",value:j.imageUrl||"",onChange:k=>W({...j,imageUrl:k.target.value}),className:"w-full bg-gray-50 border-2 border-gray-100 rounded-xl p-3 font-bold text-sm focus:border-[#10b981] outline-none text-left",dir:"ltr"}),E.jsx("p",{className:"text-xs text-gray-400 mt-1 text-right",children:"   (Direct Link)  ImgBB  ."})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:":"}),E.jsx("input",{required:!0,value:j.name,onChange:k=>W({...j,name:k.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold outline-none focus:border-[#10b981]"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:":"}),E.jsx("select",{required:!0,value:j.subject,onChange:k=>W({...j,subject:k.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white",children:xn.map(k=>E.jsx("option",{value:k,children:k},k))})]})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:"  (Bio):"}),E.jsxs("div",{className:"relative",children:[E.jsx("textarea",{value:j.bio,onChange:k=>W({...j,bio:k.target.value}),className:"w-full border-2 rounded-xl p-4 h-40 font-bold focus:border-[#10b981] outline-none resize-none"}),E.jsx("button",{type:"button",onClick:async()=>{if(!j.bio)return alert("       .");xt(!0);try{await new Promise(k=>setTimeout(k,1500)),W({...j,bio:"   : "+j.bio})}catch(k){console.error(k),alert("      .    API.")}finally{xt(!1)}},className:"absolute bottom-4 left-4 bg-[#0a192f] text-white text-xs px-3 py-1.5 rounded-lg font-bold flex items-center gap-1 hover:bg-[#10b981] transition-all",disabled:Jt,children:Jt?"...":"  "})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),E.jsx("div",{className:"flex flex-wrap gap-2",children:Eo.map(k=>{var le;return E.jsx("button",{type:"button",onClick:()=>{const de=j.stages||[],me=de.includes(k.id)?de.filter(ae=>ae!==k.id):[...de,k.id];W({...j,stages:me})},className:`px-3 py-1.5 rounded-lg text-sm font-bold border-2 transition-all ${(le=j.stages)!=null&&le.includes(k.id)?"bg-[#10b981] text-white border-[#10b981]":"bg-gray-50 text-gray-400 border-gray-100"}`,children:k.name},k.id)})})]})]})]}),E.jsxs("div",{className:"mb-8 border-t pt-8",children:[E.jsx("h3",{className:"text-xl font-black text-[#0a192f] mb-6",children:"  (/) "}),E.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:[t.filter(k=>{var le;return(le=j.stages)==null?void 0:le.includes(k.stage)}).map(k=>{var de,me;const le=(de=j.grades)==null?void 0:de.includes(k.id);return E.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all ${le?"border-[#10b981] bg-[#10b981]/5":"border-gray-100 bg-gray-50"}`,children:[E.jsx("div",{className:"flex items-center justify-between gap-2 mb-3",children:E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[E.jsx("input",{type:"checkbox",checked:le,onChange:()=>{const ae=j.grades||[],pe=le?ae.filter(ye=>ye!==k.id):[...ae,k.id];W({...j,grades:pe})},className:"w-5 h-5 accent-[#10b981] rounded-md"}),E.jsx("span",{className:`font-bold text-sm ${le?"text-[#0a192f]":"text-gray-400"}`,children:k.name})]})}),le&&E.jsx("div",{className:"animate-in slide-in-from-top-2",children:E.jsx("input",{type:"number",placeholder:" ",value:((me=j.hourlyRates)==null?void 0:me[k.id])||"",onChange:ae=>{const pe={...j.hourlyRates||{}};pe[k.id]=parseFloat(ae.target.value),W({...j,hourlyRates:pe})},className:"w-full border rounded-lg p-2 text-sm font-bold focus:border-[#10b981] outline-none"})})]},k.id)}),t.filter(k=>{var le;return(le=j.stages)==null?void 0:le.includes(k.stage)}).length===0&&E.jsx("p",{className:"text-gray-400 font-bold col-span-full text-center py-4",children:"      ."})]})]}),E.jsx("button",{type:"submit",disabled:Jt,className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all shadow-xl active:scale-95 flex items-center justify-center gap-2",children:Jt?E.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):E.jsx("span",{children:"  "})})]})}),G&&E.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:E.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-[2.5rem] p-8 md:p-12 shadow-2xl overflow-y-auto max-h-[90vh] animate-in zoom-in-95 border-t-8 border-[#f97316]",children:[E.jsxs("div",{className:"flex justify-between items-center mb-8",children:[E.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),E.jsx("button",{onClick:()=>Q(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 hover:bg-red-100 hover:text-red-500 transition-all font-black",children:""})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full overflow-hidden",children:[E.jsxs("div",{className:"lg:col-span-8 flex flex-col h-full overflow-hidden bg-gray-50 rounded-[2.5rem] p-8 border border-gray-100 shadow-inner",children:[E.jsxs("div",{className:"flex items-center justify-between mb-8",children:[E.jsx("h3",{className:"font-black text-2xl text-[#0a192f]",children:"   "}),E.jsxs("div",{className:"flex gap-3",children:[E.jsxs("button",{onClick:()=>{const k={id:`m-${Date.now()}`,title:" ",url:"",type:"video"};Q({...G,media:[...G.media,k]})},className:"bg-blue-100 text-blue-600 px-6 py-3 rounded-2xl font-black hover:bg-blue-500 hover:text-white transition-all flex items-center gap-2",children:[E.jsx("span",{children:"+"})," "]}),E.jsxs("button",{onClick:()=>{const k={id:`m-${Date.now()}`,title:" PDF ",url:"",type:"pdf"};Q({...G,media:[...G.media,k]})},className:"bg-red-100 text-red-500 px-6 py-3 rounded-2xl font-black hover:bg-red-500 hover:text-white transition-all flex items-center gap-2",children:[E.jsx("span",{children:"+"}),"  PDF"]}),E.jsxs("button",{onClick:()=>{const k={id:`m-${Date.now()}`,title:" ",url:"",type:"image"};Q({...G,media:[...G.media,k]})},className:"bg-green-100 text-green-600 px-6 py-3 rounded-2xl font-black hover:bg-green-500 hover:text-white transition-all flex items-center gap-2",children:[E.jsx("span",{children:"+"})," "]})]})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-4 pr-2",children:[G.media.map((k,le)=>E.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 flex items-start gap-4 group hover:border-[#f97316] transition-all",children:[E.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gray-50 flex items-center justify-center text-3xl shrink-0",children:k.type==="video"?"":k.type==="pdf"?"":""}),E.jsxs("div",{className:"flex-1 space-y-3",children:[E.jsx("input",{placeholder:"  (:  )",value:k.title,onChange:de=>{const me=G.media.map(ae=>ae.id===k.id?{...ae,title:de.target.value}:ae);Q({...G,media:me})},className:"w-full bg-[#334155] text-white placeholder-gray-400 p-3 rounded-xl font-bold text-sm outline-none border border-transparent focus:border-orange-500 transition-all"}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{placeholder:k.type==="video"?"  (YouTube/)":" ",value:k.url,onChange:de=>{const me=G.media.map(ae=>ae.id===k.id?{...ae,url:de.target.value}:ae);Q({...G,media:me})},className:"flex-1 bg-[#334155] text-white placeholder-gray-400 p-3 rounded-xl font-bold text-xs outline-none border border-transparent focus:border-orange-500 transition-all text-left",dir:"ltr"}),E.jsxs("div",{className:"relative overflow-hidden",children:[E.jsx("button",{className:"bg-gray-200 text-gray-600 px-4 py-3 rounded-xl font-bold text-xs hover:bg-gray-300 transition-all whitespace-nowrap",children:"  "}),E.jsx("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:async de=>{var ae;const me=(ae=de.target.files)==null?void 0:ae[0];if(me){xt(!0);try{const pe=await vi.uploadFile(me,`courses/media/${G.id}`),ye=G.media.map(Re=>Re.id===k.id?{...Re,url:pe}:Re);Q({...G,media:ye})}catch(pe){console.error(pe)}finally{xt(!1)}}}})]})]})]}),E.jsx("button",{onClick:()=>{if(confirm("  ")){const de=G.media.filter(me=>me.id!==k.id);Q({...G,media:de})}},className:"w-10 h-10 bg-red-50 text-red-500 rounded-xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all self-center",children:""})]},k.id)),G.media.length===0&&E.jsx("div",{className:"text-center py-20 opacity-50",children:E.jsx("p",{className:"font-bold text-xl",children:"     "})})]})]}),E.jsxs("div",{className:"lg:col-span-4 space-y-6 overflow-y-auto custom-scrollbar",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),E.jsx("input",{value:G.title,onChange:k=>Q({...G,title:k.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 font-black text-lg focus:ring-2 focus:ring-[#f97316] outline-none"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),E.jsx("textarea",{value:G.description,onChange:k=>Q({...G,description:k.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 h-32 font-bold focus:ring-2 focus:ring-[#f97316] outline-none resize-none"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),E.jsx("select",{value:G.gradeId,onChange:k=>Q({...G,gradeId:k.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 font-bold focus:ring-2 focus:ring-[#f97316] outline-none",children:t.map(k=>E.jsx("option",{value:k.id,children:k.name},k.id))})]}),E.jsxs("div",{className:"relative group cursor-pointer rounded-[2rem] overflow-hidden border-4 border-[#334155] hover:border-[#f97316] transition-all shadow-xl h-48",children:[E.jsx("img",{src:G.thumbnailUrl,className:"w-full h-full object-cover"}),E.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-all",children:E.jsx("span",{className:"text-white font-black",children:"  "})}),E.jsx("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:async k=>{var de;const le=(de=k.target.files)==null?void 0:de[0];if(le){xt(!0);try{const me=await vi.uploadFile(le,"course-thumbnails");Q({...G,thumbnailUrl:me})}catch{alert("    ")}finally{xt(!1)}}}})]}),E.jsx("input",{type:"text",placeholder:"     ...",value:G.thumbnailUrl,onChange:k=>Q({...G,thumbnailUrl:k.target.value}),className:"w-full bg-[#334155] text-white border-2 border-[#1e293b] rounded-xl p-3 font-bold text-sm focus:border-[#f97316] outline-none text-left",dir:"ltr"}),E.jsx("button",{onClick:async()=>{xt(!0);try{const k=r.map(de=>de.id===G.id?G:de),le=r.find(de=>de.id===G.id);le&&le.gradeId!==G.gradeId&&e(de=>de.map(me=>me.id===le.gradeId?{...me,courses:me.courses.filter(ae=>ae!==G.id)}:me.id===G.gradeId?{...me,courses:Array.from(new Set([...me.courses,G.id]))}:me)),a(k),alert("  ! "),Q(null)}catch(k){console.error(k)}finally{xt(!1)}},disabled:Jt,className:"w-full bg-[#f97316] text-white py-4 rounded-2xl font-black text-xl hover:bg-orange-600 transition-all shadow-xl active:scale-95",children:Jt?" ...":"  "})]})]})]})}),q&&E.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:E.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 text-center shadow-2xl border-t-8 border-red-500 animate-in zoom-in-95",children:[E.jsx("div",{className:"text-6xl mb-6",children:""}),E.jsx("h3",{className:"text-3xl font-black text-[#0a192f] mb-4",children:" "}),E.jsxs("p",{className:"text-gray-500 text-lg mb-4 font-bold",children:["     ",E.jsxs("span",{className:"text-red-500",children:['"',q.name,'"']})," ."]}),E.jsx("div",{className:"bg-red-50 p-4 rounded-2xl mb-8 border border-red-100",children:E.jsx("p",{className:"text-red-600 font-black text-sm",children:"        ."})}),E.jsxs("div",{className:"flex flex-col gap-3",children:[E.jsx("button",{onClick:async()=>{try{const k=q.id,le=q.name;console.log(" Starting cascading delete for teacher:",k);const de=r.filter(me=>me.teacherId===k);de.length>0&&(console.log(" Deleting",de.length,"courses..."),await Promise.all(de.map(me=>vi.deleteCourse(me.id))),console.log(" Courses deleted from Firebase")),console.log(" Deleting teacher from Firebase..."),await vi.deleteTeacher(k),console.log(" Teacher deleted from Firebase"),s(me=>me.filter(ae=>ae.id!==k)),a(me=>me.filter(ae=>ae.teacherId!==k)),e(me=>me.map(ae=>({...ae,teachers:ae.teachers.filter(pe=>pe!==k)}))),oe(null),alert(`   "${le}" .`)}catch(k){console.error(k),alert("       .")}},className:"w-full bg-red-500 text-white py-5 rounded-2xl font-black text-xl hover:bg-red-600 transition-all active:scale-95 shadow-xl shadow-red-500/20",children:"   "}),E.jsx("button",{onClick:()=>oe(null),className:"w-full bg-gray-100 text-gray-500 py-4 rounded-2xl font-black text-lg hover:bg-gray-200 transition-all",children:" "})]})]})}),T==="subjects"&&E.jsxs("div",{className:"animate-in fade-in space-y-8",children:[E.jsxs("div",{className:"flex justify-between items-center border-b pb-6",children:[E.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),E.jsxs("div",{className:"bg-orange-50 text-orange-600 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2",children:[E.jsx("span",{children:""}),"        "]})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:D.map((k,le)=>{var de,me;return E.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 shadow-xl border border-gray-100 hover:border-[#10b981] transition-all group",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[E.jsx("div",{className:"w-16 h-16 rounded-2xl bg-[#0a192f] text-white flex items-center justify-center text-3xl shadow-lg group-hover:scale-110 transition-transform",children:(de=Eo.find(ae=>ae.id===k.stage))==null?void 0:de.icon}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-2xl font-black text-[#0a192f]",children:(me=Eo.find(ae=>ae.id===k.stage))==null?void 0:me.name}),E.jsxs("p",{className:"text-gray-400 font-bold text-sm",children:[k.subjects.length,"  "]})]})]}),E.jsxs("div",{className:"flex flex-wrap gap-3",children:[k.subjects.map((ae,pe)=>E.jsx("span",{className:"bg-gray-50 text-gray-600 px-4 py-2 rounded-xl font-bold border hover:bg-[#10b981] hover:text-white hover:border-[#10b981] transition-colors cursor-default",children:ae},pe)),E.jsx("button",{onClick:()=>{const ae=prompt("   :");if(ae){const pe=[...D];pe[le].subjects.push(ae),R(pe)}},className:"bg-gray-100 text-gray-400 px-4 py-2 rounded-xl font-bold border-2 border-dashed border-gray-200 hover:border-[#10b981] hover:text-[#10b981] transition-all",children:"+ "})]})]},le)})})]}),T==="settings"&&E.jsx("div",{className:"animate-in fade-in max-w-2xl mx-auto space-y-8",children:E.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-xl border border-gray-100",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[E.jsx("span",{className:"text-4xl",children:""}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"  "}),E.jsx("p",{className:"text-gray-400 font-bold text-sm",children:"   Google Sheets"})]})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2",children:" Webhook (Google Apps Script):"}),E.jsx("input",{type:"url",value:oi,onChange:k=>Va(k.target.value),placeholder:"https://script.google.com/macros/s/...",className:"w-full border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#10b981] transition-colors",dir:"ltr"}),E.jsxs("p",{className:"text-xs text-gray-400 mt-2 font-bold leading-relaxed",children:['*   Google Apps Script    Web App  "Anyone".',E.jsx("br",{}),"*     (     )       ."]})]}),E.jsxs("div",{className:"bg-blue-50 p-6 rounded-2xl border border-blue-100",children:[E.jsx("h4",{className:"font-black text-blue-800 mb-2 text-sm",children:" :"}),E.jsxs("ol",{className:"list-decimal list-inside text-sm text-blue-700 space-y-1 font-bold",children:[E.jsx("li",{children:"   ."}),E.jsxs("li",{children:["  Extensions ",">"," Apps Script."]}),E.jsxs("li",{children:["     ",E.jsx("code",{children:"sheetService.ts"}),"."]}),E.jsxs("li",{children:[" Deploy ",">"," New Deployment."]}),E.jsx("li",{children:" Web app   Access: Anyone."}),E.jsx("li",{children:"    ."})]})]}),E.jsx("div",{className:"flex gap-4 pt-4",children:E.jsx("button",{onClick:()=>{if(!oi)return alert("   ");localStorage.setItem("google_sheet_webhook_url",oi),alert("   !     .")},className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black hover:bg-[#10b981] transition-all shadow-xl active:scale-95",children:"  "})})]}),E.jsxs("div",{className:"mt-8 border-t pt-8",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[E.jsx("span",{className:"text-4xl",children:""}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"   (API Key)"}),E.jsx("p",{className:"text-gray-400 font-bold text-sm",children:" Gemini AI"})]})]}),E.jsx("div",{className:"space-y-4",children:E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2",children:"Gemini API Key:"}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"password",value:d,onChange:k=>{h(k.target.value),localStorage.setItem("gemini_api_key",k.target.value)},placeholder:"AIzaSy...",className:"flex-1 border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#10b981] transition-colors",dir:"ltr"}),d&&E.jsx("button",{onClick:()=>{h(""),localStorage.removeItem("gemini_api_key")},className:"bg-red-50 text-red-500 px-4 rounded-xl font-bold hover:bg-red-100 transition-all",children:""})]}),E.jsxs("p",{className:"text-xs text-gray-400 mt-2 font-bold",children:["*        .",E.jsx("br",{}),"*       ."]})]})})]}),E.jsxs("div",{className:"mt-8 border-t pt-8",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[E.jsx("span",{className:"text-4xl",children:""}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"Claude API Key"}),E.jsx("p",{className:"text-gray-400 font-bold text-sm",children:" Anthropic Claude 3.5 Sonnet"})]})]}),E.jsx("div",{className:"space-y-4",children:E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2",children:"Anthropic API Key (sk-ant...):"}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"password",value:m,onChange:k=>{v(k.target.value),localStorage.setItem("anthropic_api_key",k.target.value)},placeholder:"sk-ant-api...",className:"flex-1 border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#f97316] transition-colors",dir:"ltr"}),m&&E.jsx("button",{onClick:()=>{v(""),localStorage.removeItem("anthropic_api_key")},className:"bg-red-50 text-red-500 px-4 rounded-xl font-bold hover:bg-red-100 transition-all",children:""})]})]})})]})]})}),F&&E.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white rounded-[2rem] p-8 max-w-md w-full shadow-2xl animate-in fade-in zoom-in-95",dir:"rtl",children:[E.jsxs("h3",{className:"text-2xl font-black text-[#0a192f] mb-4",children:[he==="gemini"?"  Gemini":"  Claude"," "]}),E.jsxs("p",{className:"text-gray-500 mb-6 font-bold",children:["      API   ",he==="gemini"?"Google Gemini":"Anthropic Claude","."]}),E.jsx("input",{type:"password",placeholder:he==="gemini"?"AIzaSy...":"sk-ant-api...",className:"w-full border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#10b981] mb-6",autoFocus:!0,dir:"ltr",onChange:k=>{he==="gemini"?(h(k.target.value),localStorage.setItem("gemini_api_key",k.target.value)):(v(k.target.value),localStorage.setItem("anthropic_api_key",k.target.value))}}),E.jsxs("div",{className:"flex gap-3",children:[E.jsx("button",{onClick:()=>ne(!1),className:"flex-1 bg-[#0a192f] text-white py-3 rounded-xl font-black hover:bg-[#10b981] transition-all",children:" "}),E.jsx("button",{onClick:()=>ne(!1),className:"px-6 py-3 rounded-xl font-bold text-gray-500 hover:bg-gray-100",children:""})]})]})})]})},_O=({teachers:t,onBack:e})=>{const[n,s]=ve.useState("all"),[r,a]=ve.useState(""),[u,d]=ve.useState(null),h=t.filter(m=>{var b;const v=n==="all"||((b=m.stages)==null?void 0:b.includes(n)),T=m.name.toLowerCase().includes(r.toLowerCase())||m.subject.toLowerCase().includes(r.toLowerCase());return v&&T});return E.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[u&&E.jsx(UT,{targetName:u,type:"",onClose:()=>d(null)}),E.jsxs("button",{onClick:e,className:"mb-8 text-gray-400 hover:text-[#0a192f] flex items-center gap-3 font-black text-lg transition-colors group",children:[E.jsx("span",{className:"bg-white p-3 rounded-2xl shadow-sm group-hover:-translate-x-2 transition-transform",children:""}),"  "]}),E.jsxs("div",{className:"text-center mb-16",children:[E.jsx("h1",{className:"text-5xl font-black text-[#0a192f] mb-4",children:"  "}),E.jsx("p",{className:"text-gray-500 text-xl font-medium",children:"      "})]}),E.jsxs("div",{className:"flex flex-col items-center gap-8 mb-16",children:[E.jsxs("div",{className:"relative w-full max-w-2xl group",children:[E.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-2xl group-focus-within:scale-110 transition-transform",children:""}),E.jsx("input",{type:"text",value:r,onChange:m=>a(m.target.value),placeholder:"     ...",className:"w-full bg-white border-2 border-gray-100 rounded-[2rem] py-6 pr-16 pl-8 text-xl font-bold shadow-xl shadow-gray-200/20 focus:border-[#10b981] focus:ring-4 focus:ring-[#10b981]/5 outline-none transition-all placeholder:text-gray-300"})]}),E.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[E.jsx("button",{onClick:()=>s("all"),className:`px-8 py-3 rounded-2xl font-black transition-all ${n==="all"?"bg-[#0a192f] text-white shadow-xl scale-105":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100"}`,children:""}),Eo.map(m=>E.jsxs("button",{onClick:()=>s(m.id),className:`px-8 py-3 rounded-2xl font-black transition-all flex items-center gap-2 ${n===m.id?"bg-[#10b981] text-white shadow-xl scale-105":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100"}`,children:[E.jsx("span",{children:m.icon})," ",m.name]},m.id))]})]}),E.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:[h.map(m=>E.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 shadow-xl border border-gray-100 hover:border-[#10b981] hover:-translate-y-2 transition-all group flex flex-col h-full",children:[E.jsxs("div",{className:"relative mb-6",children:[E.jsx("img",{src:m.imageUrl,className:"w-32 h-32 rounded-[2rem] mx-auto border-4 border-gray-50 shadow-md group-hover:scale-105 transition-transform object-cover",alt:m.name}),E.jsx("div",{className:"absolute -bottom-2 right-1/2 translate-x-1/2 bg-[#10b981] text-white px-4 py-1 rounded-full text-xs font-black shadow-lg whitespace-nowrap",children:m.subject})]}),E.jsxs("div",{className:"text-center flex-1 flex flex-col",children:[E.jsx("h3",{className:"text-2xl font-black text-[#0a192f] mb-2",children:m.name}),E.jsx("p",{className:"text-gray-400 text-sm font-medium mb-6 line-clamp-3 flex-1",children:m.bio||"   ."}),E.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl text-right space-y-2 mb-6",children:[E.jsx("div",{className:"text-xs font-black text-gray-400",children:" :"}),E.jsx("div",{className:"text-sm font-bold text-[#0a192f]",children:m.availability})]}),E.jsx("button",{onClick:()=>d(m.name),className:"block w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black hover:bg-[#10b981] transition-all shadow-lg active:scale-95",children:" "})]})]},m.id)),h.length===0&&E.jsxs("div",{className:"col-span-full py-20 text-center",children:[E.jsx("div",{className:"text-6xl mb-4",children:""}),E.jsx("h3",{className:"text-2xl font-black text-gray-400",children:"      "}),E.jsx("button",{onClick:()=>{a(""),s("all")},className:"mt-4 text-[#10b981] font-black hover:underline",children:"  "})]})]})]})},ar={getItem:t=>{try{return localStorage.getItem(t)}catch(e){return console.warn(`Error reading from localStorage key "${t}":`,e),null}},setItem:(t,e)=>{try{localStorage.setItem(t,e)}catch(n){console.warn(`Error writing to localStorage key "${t}":`,n)}},removeItem:t=>{try{localStorage.removeItem(t)}catch(e){console.warn(`Error removing from localStorage key "${t}":`,e)}},getSession:t=>{try{return sessionStorage.getItem(t)}catch(e){return console.warn(`Error reading from sessionStorage key "${t}":`,e),null}},setSession:(t,e)=>{try{sessionStorage.setItem(t,e)}catch(n){console.warn(`Error writing to sessionStorage key "${t}":`,n)}}},EO=()=>{var D;const[t,e]=ve.useState(()=>{const R=ar.getItem("app_view");return R&&["home","stages","grade","admin","teachers"].includes(R)?R:"home"}),[n,s]=ve.useState(()=>ar.getSession("admin_auth")==="true"),[r,a]=ve.useState(""),[u,d]=ve.useState(ar.getItem("gemini_api_key")||""),[h,m]=ve.useState(ar.getItem("anthropic_api_key")||""),[v,T]=ve.useState(null),[b,C]=ve.useState(null),[N,V]=ve.useState([]),[U,j]=ve.useState([]),[W,G]=ve.useState([]);ve.useEffect(()=>{(async()=>{try{console.log(" Loading data from Firebase/cache...");const M=await vi.loadData(),L=M.grades&&M.grades.length>0?M.grades:M_,B=M.teachers&&M.teachers.length>0?M.teachers:I_,z=M.courses&&M.courses.length>0?M.courses:N_;V(L.filter(P=>P&&P.id)),j(B.filter(P=>P&&P.id)),G(z.filter(P=>P&&P.id)),console.log(" Data loaded:",{grades:L.length,teachers:B.length,courses:z.length})}catch(M){console.error("Critical: Failed to load data",M),V(M_),j(I_),G(N_)}if(window.aistudio){const M=await window.aistudio.getKey();M&&(d(M),ar.setItem("gemini_api_key",M))}})()},[]),ve.useEffect(()=>{ar.setItem("app_view",t)},[t]),ve.useEffect(()=>{ar.setSession("admin_auth",n.toString())},[n]);const Q=R=>{R.preventDefault(),r==="55"?s(!0):alert("   !")},q=R=>{T(R),e("stages")},oe=R=>{const M=N.find(L=>L.id===R);M&&(C(M),e("grade"))};return E.jsxs("div",{className:"min-h-screen pb-20 bg-gray-50 selection:bg-[#10b981] selection:text-white",children:[E.jsx(yC,{onNavigate:R=>{e(R),T(null)},isAdmin:n}),n&&E.jsx(PS,{grades:N,teachers:U,courses:W,setGrades:V,setTeachers:j,setCourses:G,onNavigate:R=>{e(R),T(null)},apiKey:u}),t==="home"&&E.jsxs("main",{children:[E.jsxs("section",{className:"relative bg-[#0a192f] text-white py-24 md:py-32 overflow-hidden",children:[E.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 flex flex-col items-center text-center",children:[E.jsx("div",{className:"mb-10 animate-in fade-in zoom-in duration-1000",children:E.jsx("img",{src:ad,alt:"Logo",className:"w-48 md:w-64 h-auto drop-shadow-[0_0_30px_rgba(16,185,129,0.3)] mx-auto"})}),E.jsx("div",{className:"inline-block bg-[#10b981]/20 border border-[#10b981]/30 text-[#10b981] px-6 py-2 rounded-full font-black text-sm mb-8 animate-bounce",children:"     2025"}),E.jsxs("h1",{className:"text-5xl md:text-8xl font-black mb-8 leading-tight",children:["Educators Academy",E.jsx("br",{}),E.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#10b981] to-[#34d399]",children:"  "})]}),E.jsx("p",{className:"text-xl md:text-2xl text-gray-300 max-w-3xl mb-12 leading-relaxed font-bold",children:"              ."}),E.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[E.jsx("button",{onClick:()=>e("stages"),className:"bg-[#10b981] px-12 py-5 rounded-2xl font-black text-xl hover:bg-emerald-600 transition-all shadow-2xl shadow-emerald-500/20 active:scale-95",children:"  "}),E.jsx("a",{href:`https://wa.me/20${Jl.phone}`,target:"_blank",className:"bg-white/5 backdrop-blur-xl border border-white/10 px-12 py-5 rounded-2xl font-black text-xl hover:bg-white/10 transition-all active:scale-95",children:" "})]})]}),E.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[#10b981] rounded-full blur-[180px] opacity-20 -mr-64 -mt-64"}),E.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-[#f97316] rounded-full blur-[180px] opacity-10 -ml-64 -mb-64"})]}),E.jsxs("section",{className:"py-24 max-w-7xl mx-auto px-4",children:[E.jsxs("div",{className:"text-right mb-16",children:[E.jsx("h2",{className:"text-5xl font-black mb-4 text-[#0a192f]",children:" "}),E.jsx("div",{className:"h-2 w-32 bg-gradient-to-r from-[#10b981] to-transparent rounded-full"})]}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:Eo.map(R=>E.jsxs("div",{onClick:()=>q(R.id),className:"group bg-white p-12 rounded-[3rem] shadow-xl border-2 border-transparent hover:border-[#10b981] hover:-translate-y-3 transition-all cursor-pointer text-center relative overflow-hidden active:scale-95",children:[E.jsx("div",{className:"text-7xl mb-8 relative z-10 group-hover:scale-110 transition-transform duration-500",children:R.icon}),E.jsx("h3",{className:"text-3xl font-black text-[#0a192f] relative z-10",children:R.name})]},R.id))})]})]}),t==="stages"&&E.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-20 animate-in fade-in slide-in-from-bottom-6",children:[E.jsxs("button",{onClick:()=>e("home"),className:"mb-10 text-gray-400 hover:text-[#0a192f] flex items-center gap-3 font-black text-lg transition-colors group",children:[E.jsx("span",{className:"bg-white p-3 rounded-2xl shadow-sm group-hover:-translate-x-2 transition-transform",children:""}),"  "]}),v?E.jsxs("div",{children:[E.jsxs("div",{className:"flex justify-between items-center mb-12",children:[E.jsx("button",{onClick:()=>T(null),className:"text-[#10b981] font-black hover:underline text-xl",children:"  "}),E.jsxs("h2",{className:"text-4xl font-black text-[#0a192f]",children:[" ",(D=Eo.find(R=>R.id===v))==null?void 0:D.name]})]}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:N.filter(R=>R.stage===v).map(R=>E.jsx("div",{onClick:()=>oe(R.id),className:"bg-white p-10 rounded-[2.5rem] shadow-xl hover:shadow-2xl hover:border-[#10b981] border-2 border-transparent transition-all cursor-pointer text-center group active:scale-95",children:E.jsx("h3",{className:"text-2xl font-black text-[#0a192f] leading-tight",children:R.name})},R.id))})]}):E.jsxs("div",{children:[E.jsx("h2",{className:"text-4xl font-black text-[#0a192f] mb-12 text-right",children:"  "}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:Eo.map(R=>E.jsxs("div",{onClick:()=>T(R.id),className:"group bg-white p-12 rounded-[3rem] shadow-xl border-2 border-transparent hover:border-[#10b981] hover:-translate-y-3 transition-all cursor-pointer text-center active:scale-95",children:[E.jsx("div",{className:"text-7xl mb-8",children:R.icon}),E.jsx("h3",{className:"text-3xl font-black text-[#0a192f]",children:R.name})]},R.id))})]})]}),t==="grade"&&b&&E.jsx(_C,{grade:b,teachers:U,courses:W,onBack:()=>e("stages")}),t==="teachers"&&E.jsx(_O,{teachers:U,onBack:()=>e("home")}),t==="admin"&&(n?E.jsx(vO,{grades:N,setGrades:V,teachers:U,setTeachers:j,courses:W,setCourses:G,onLogout:()=>s(!1),apiKey:u,setApiKey:d,anthropicApiKey:h,setAnthropicApiKey:m}):E.jsx("div",{className:"min-h-[80vh] flex items-center justify-center p-4",children:E.jsxs("form",{onSubmit:Q,className:"bg-white p-12 rounded-[3rem] shadow-2xl w-full max-w-md text-center border-t-8 border-[#0a192f]",children:[E.jsx("img",{src:ad,alt:"Logo",className:"w-24 h-auto mx-auto mb-6"}),E.jsx("h2",{className:"text-4xl font-black text-[#0a192f] mb-8",children:"  "}),E.jsx("input",{type:"password",value:r,onChange:R=>a(R.target.value),placeholder:" ",className:"w-full border-2 rounded-2xl p-4 mb-6 font-bold text-center text-lg focus:border-[#10b981] outline-none transition-all"}),E.jsx("button",{type:"submit",className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all shadow-lg active:scale-95",children:"  "})]})}))]})};class TO extends ve.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleReset=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){var e;return this.state.hasError?E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a192f] p-4 text-center font-sans",dir:"rtl",children:E.jsxs("div",{className:"bg-white rounded-[2.5rem] p-10 max-w-lg w-full shadow-2xl animate-in zoom-in duration-300",children:[E.jsx("div",{className:"text-6xl mb-6",children:""}),E.jsx("h1",{className:"text-3xl font-black text-[#0a192f] mb-4",children:"    "}),E.jsx("p",{className:"text-gray-500 font-bold mb-8 text-lg",children:"       ."}),E.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100 mb-8 text-right",children:[E.jsx("p",{className:"text-red-500 font-bold text-sm mb-2",children:"  ():"}),E.jsx("code",{className:"block bg-white p-3 rounded-lg text-xs font-mono text-red-600 overflow-auto max-h-32 border border-red-200",children:(e=this.state.error)==null?void 0:e.toString()})]}),E.jsx("button",{onClick:this.handleReset,className:"w-full bg-[#10b981] text-white py-5 rounded-2xl font-black text-xl hover:bg-emerald-600 transition-all shadow-xl shadow-emerald-500/20 active:scale-95",children:"   (Reset App) "}),E.jsx("p",{className:"mt-4 text-xs text-gray-400 font-bold",children:"*         "})]})}):this.props.children}}const sp=document.getElementById("root");if(!sp)throw new Error("Could not find root element to mount to");try{pC.createRoot(sp).render(E.jsx(aC.StrictMode,{children:E.jsx(TO,{children:E.jsx(EO,{})})}))}catch(t){console.error("CRITICAL MOUNT ERROR:",t),sp.innerHTML=`
    <div style="padding: 2rem; color: #ef4444; text-align: center;">
      <h1>Critical Error</h1>
      <p>The application failed to start.</p>
      <pre style="background: #fef2f2; padding: 1rem; border-radius: 0.5rem; overflow: auto;">${t instanceof Error?t.message:String(t)}</pre>
      <button onclick="localStorage.clear();window.location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #ef4444; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">
        Emergency Reset
      </button>
    </div>
  `}
