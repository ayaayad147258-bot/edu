(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function GT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ch={exports:{}},El={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function ox(){if(Qv)return El;Qv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:t,type:o,key:u,ref:r!==void 0?r:null,props:l}}return El.Fragment=e,El.jsx=n,El.jsxs=n,El}var Xv;function sx(){return Xv||(Xv=1,Ch.exports=ox()),Ch.exports}var T=sx(),wh={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function rx(){if(Wv)return Pe;Wv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),b=Symbol.iterator;function C(H){return H===null||typeof H!="object"?null:(H=b&&H[b]||H["@@iterator"],typeof H=="function"?H:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,k={};function Y(H,ie,fe){this.props=H,this.context=ie,this.refs=k,this.updater=fe||I}Y.prototype.isReactComponent={},Y.prototype.setState=function(H,ie){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ie,"setState")},Y.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function W(){}W.prototype=Y.prototype;function z(H,ie,fe){this.props=H,this.context=ie,this.refs=k,this.updater=fe||I}var X=z.prototype=new W;X.constructor=z,L(X,Y.prototype),X.isPureReactComponent=!0;var q=Array.isArray;function se(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function M(H,ie,fe){var Te=fe.ref;return{$$typeof:t,type:H,key:ie,ref:Te!==void 0?Te:null,props:fe}}function U(H,ie){return M(H.type,ie,H.props)}function O(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function G(H){var ie={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(fe){return ie[fe]})}var V=/\/+/g;function Ne(H,ie){return typeof H=="object"&&H!==null&&H.key!=null?G(""+H.key):ie.toString(36)}function ot(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(se,se):(H.status="pending",H.then(function(ie){H.status==="pending"&&(H.status="fulfilled",H.value=ie)},function(ie){H.status==="pending"&&(H.status="rejected",H.reason=ie)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function te(H,ie,fe,Te,Ce){var Be=typeof H;(Be==="undefined"||Be==="boolean")&&(H=null);var Le=!1;if(H===null)Le=!0;else switch(Be){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(H.$$typeof){case t:case e:Le=!0;break;case _:return Le=H._init,te(Le(H._payload),ie,fe,Te,Ce)}}if(Le)return Ce=Ce(H),Le=Te===""?"."+Ne(H,0):Te,q(Ce)?(fe="",Le!=null&&(fe=Le.replace(V,"$&/")+"/"),te(Ce,ie,fe,"",function(oi){return oi})):Ce!=null&&(O(Ce)&&(Ce=U(Ce,fe+(Ce.key==null||H&&H.key===Ce.key?"":(""+Ce.key).replace(V,"$&/")+"/")+Le)),ie.push(Ce)),1;Le=0;var At=Te===""?".":Te+":";if(q(H))for(var ct=0;ct<H.length;ct++)Te=H[ct],Be=At+Ne(Te,ct),Le+=te(Te,ie,fe,Be,Ce);else if(ct=C(H),typeof ct=="function")for(H=ct.call(H),ct=0;!(Te=H.next()).done;)Te=Te.value,Be=At+Ne(Te,ct++),Le+=te(Te,ie,fe,Be,Ce);else if(Be==="object"){if(typeof H.then=="function")return te(ot(H),ie,fe,Te,Ce);throw ie=String(H),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Le}function he(H,ie,fe){if(H==null)return H;var Te=[],Ce=0;return te(H,Te,"","",function(Be){return ie.call(fe,Be,Ce++)}),Te}function Ee(H){if(H._status===-1){var ie=H._result;ie=ie(),ie.then(function(fe){(H._status===0||H._status===-1)&&(H._status=1,H._result=fe)},function(fe){(H._status===0||H._status===-1)&&(H._status=2,H._result=fe)}),H._status===-1&&(H._status=0,H._result=ie)}if(H._status===1)return H._result.default;throw H._result}var ke=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},ze={map:he,forEach:function(H,ie,fe){he(H,function(){ie.apply(this,arguments)},fe)},count:function(H){var ie=0;return he(H,function(){ie++}),ie},toArray:function(H){return he(H,function(ie){return ie})||[]},only:function(H){if(!O(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Pe.Activity=S,Pe.Children=ze,Pe.Component=Y,Pe.Fragment=n,Pe.Profiler=r,Pe.PureComponent=z,Pe.StrictMode=o,Pe.Suspense=g,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(H){return D.H.useMemoCache(H)}},Pe.cache=function(H){return function(){return H.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(H,ie,fe){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Te=L({},H.props),Ce=H.key;if(ie!=null)for(Be in ie.key!==void 0&&(Ce=""+ie.key),ie)!N.call(ie,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ie.ref===void 0||(Te[Be]=ie[Be]);var Be=arguments.length-2;if(Be===1)Te.children=fe;else if(1<Be){for(var Le=Array(Be),At=0;At<Be;At++)Le[At]=arguments[At+2];Te.children=Le}return M(H.type,Ce,Te)},Pe.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},Pe.createElement=function(H,ie,fe){var Te,Ce={},Be=null;if(ie!=null)for(Te in ie.key!==void 0&&(Be=""+ie.key),ie)N.call(ie,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Ce[Te]=ie[Te]);var Le=arguments.length-2;if(Le===1)Ce.children=fe;else if(1<Le){for(var At=Array(Le),ct=0;ct<Le;ct++)At[ct]=arguments[ct+2];Ce.children=At}if(H&&H.defaultProps)for(Te in Le=H.defaultProps,Le)Ce[Te]===void 0&&(Ce[Te]=Le[Te]);return M(H,Be,Ce)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(H){return{$$typeof:f,render:H}},Pe.isValidElement=O,Pe.lazy=function(H){return{$$typeof:_,_payload:{_status:-1,_result:H},_init:Ee}},Pe.memo=function(H,ie){return{$$typeof:p,type:H,compare:ie===void 0?null:ie}},Pe.startTransition=function(H){var ie=D.T,fe={};D.T=fe;try{var Te=H(),Ce=D.S;Ce!==null&&Ce(fe,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(se,ke)}catch(Be){ke(Be)}finally{ie!==null&&fe.types!==null&&(ie.types=fe.types),D.T=ie}},Pe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Pe.use=function(H){return D.H.use(H)},Pe.useActionState=function(H,ie,fe){return D.H.useActionState(H,ie,fe)},Pe.useCallback=function(H,ie){return D.H.useCallback(H,ie)},Pe.useContext=function(H){return D.H.useContext(H)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(H,ie){return D.H.useDeferredValue(H,ie)},Pe.useEffect=function(H,ie){return D.H.useEffect(H,ie)},Pe.useEffectEvent=function(H){return D.H.useEffectEvent(H)},Pe.useId=function(){return D.H.useId()},Pe.useImperativeHandle=function(H,ie,fe){return D.H.useImperativeHandle(H,ie,fe)},Pe.useInsertionEffect=function(H,ie){return D.H.useInsertionEffect(H,ie)},Pe.useLayoutEffect=function(H,ie){return D.H.useLayoutEffect(H,ie)},Pe.useMemo=function(H,ie){return D.H.useMemo(H,ie)},Pe.useOptimistic=function(H,ie){return D.H.useOptimistic(H,ie)},Pe.useReducer=function(H,ie,fe){return D.H.useReducer(H,ie,fe)},Pe.useRef=function(H){return D.H.useRef(H)},Pe.useState=function(H){return D.H.useState(H)},Pe.useSyncExternalStore=function(H,ie,fe){return D.H.useSyncExternalStore(H,ie,fe)},Pe.useTransition=function(){return D.H.useTransition()},Pe.version="19.2.4",Pe}var Zv;function Vp(){return Zv||(Zv=1,wh.exports=rx()),wh.exports}var _e=Vp();const ax=GT(_e);var Rh={exports:{}},Sl={},Ih={exports:{}},Nh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function lx(){return e_||(e_=1,(function(t){function e(te,he){var Ee=te.length;te.push(he);e:for(;0<Ee;){var ke=Ee-1>>>1,ze=te[ke];if(0<r(ze,he))te[ke]=he,te[Ee]=ze,Ee=ke;else break e}}function n(te){return te.length===0?null:te[0]}function o(te){if(te.length===0)return null;var he=te[0],Ee=te.pop();if(Ee!==he){te[0]=Ee;e:for(var ke=0,ze=te.length,H=ze>>>1;ke<H;){var ie=2*(ke+1)-1,fe=te[ie],Te=ie+1,Ce=te[Te];if(0>r(fe,Ee))Te<ze&&0>r(Ce,fe)?(te[ke]=Ce,te[Te]=Ee,ke=Te):(te[ke]=fe,te[ie]=Ee,ke=ie);else if(Te<ze&&0>r(Ce,Ee))te[ke]=Ce,te[Te]=Ee,ke=Te;else break e}}return he}function r(te,he){var Ee=te.sortIndex-he.sortIndex;return Ee!==0?Ee:te.id-he.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var g=[],p=[],_=1,S=null,b=3,C=!1,I=!1,L=!1,k=!1,Y=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function X(te){for(var he=n(p);he!==null;){if(he.callback===null)o(p);else if(he.startTime<=te)o(p),he.sortIndex=he.expirationTime,e(g,he);else break;he=n(p)}}function q(te){if(L=!1,X(te),!I)if(n(g)!==null)I=!0,se||(se=!0,G());else{var he=n(p);he!==null&&ot(q,he.startTime-te)}}var se=!1,D=-1,N=5,M=-1;function U(){return k?!0:!(t.unstable_now()-M<N)}function O(){if(k=!1,se){var te=t.unstable_now();M=te;var he=!0;try{e:{I=!1,L&&(L=!1,W(D),D=-1),C=!0;var Ee=b;try{t:{for(X(te),S=n(g);S!==null&&!(S.expirationTime>te&&U());){var ke=S.callback;if(typeof ke=="function"){S.callback=null,b=S.priorityLevel;var ze=ke(S.expirationTime<=te);if(te=t.unstable_now(),typeof ze=="function"){S.callback=ze,X(te),he=!0;break t}S===n(g)&&o(g),X(te)}else o(g);S=n(g)}if(S!==null)he=!0;else{var H=n(p);H!==null&&ot(q,H.startTime-te),he=!1}}break e}finally{S=null,b=Ee,C=!1}he=void 0}}finally{he?G():se=!1}}}var G;if(typeof z=="function")G=function(){z(O)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Ne=V.port2;V.port1.onmessage=O,G=function(){Ne.postMessage(null)}}else G=function(){Y(O,0)};function ot(te,he){D=Y(function(){te(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(te){switch(b){case 1:case 2:case 3:var he=3;break;default:he=b}var Ee=b;b=he;try{return te()}finally{b=Ee}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ee=b;b=te;try{return he()}finally{b=Ee}},t.unstable_scheduleCallback=function(te,he,Ee){var ke=t.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?ke+Ee:ke):Ee=ke,te){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=Ee+ze,te={id:_++,callback:he,priorityLevel:te,startTime:Ee,expirationTime:ze,sortIndex:-1},Ee>ke?(te.sortIndex=Ee,e(p,te),n(g)===null&&te===n(p)&&(L?(W(D),D=-1):L=!0,ot(q,Ee-ke))):(te.sortIndex=ze,e(g,te),I||C||(I=!0,se||(se=!0,G()))),te},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(te){var he=b;return function(){var Ee=b;b=he;try{return te.apply(this,arguments)}finally{b=Ee}}}})(Nh)),Nh}var t_;function ux(){return t_||(t_=1,Ih.exports=lx()),Ih.exports}var Mh={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function cx(){if(n_)return mn;n_=1;var t=Vp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,p,_){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:S==null?null:""+S,children:g,containerInfo:p,implementation:_}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,mn.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,_)},mn.flushSync=function(g){var p=u.T,_=o.p;try{if(u.T=null,o.p=2,g)return g()}finally{u.T=p,o.p=_,o.d.f()}},mn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(g,p))},mn.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},mn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,S=f(_,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?o.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:S,integrity:b,fetchPriority:C}):_==="script"&&o.d.X(g,{crossOrigin:S,integrity:b,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},mn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=f(p.as,p.crossOrigin);o.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(g)},mn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,S=f(_,p.crossOrigin);o.d.L(g,_,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},mn.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=f(p.as,p.crossOrigin);o.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(g)},mn.requestFormReset=function(g){o.d.r(g)},mn.unstable_batchedUpdates=function(g,p){return g(p)},mn.useFormState=function(g,p,_){return u.H.useFormState(g,p,_)},mn.useFormStatus=function(){return u.H.useHostTransitionStatus()},mn.version="19.2.4",mn}var i_;function dx(){if(i_)return Mh.exports;i_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mh.exports=cx(),Mh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function fx(){if(o_)return Sl;o_=1;var t=ux(),e=Vp(),n=dx();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(o(188))}function p(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(o(188));return s!==i?null:i}for(var a=i,c=s;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),i;if(v===c)return g(y),s;v=v.sibling}throw Error(o(188))}if(a.return!==c.return)a=y,c=v;else{for(var A=!1,w=y.child;w;){if(w===a){A=!0,a=y,c=v;break}if(w===c){A=!0,c=y,a=v;break}w=w.sibling}if(!A){for(w=v.child;w;){if(w===a){A=!0,a=v,c=y;break}if(w===c){A=!0,c=v,a=y;break}w=w.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:s}function _(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=_(i),s!==null)return s;i=i.sibling}return null}var S=Object.assign,b=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),z=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function Ne(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case L:return"Fragment";case Y:return"Profiler";case k:return"StrictMode";case q:return"Suspense";case se:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case z:return i.displayName||"Context";case W:return(i._context.displayName||"Context")+".Consumer";case X:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:Ne(i.type)||"Memo";case N:s=i._payload,i=i._init;try{return Ne(i(s))}catch{}}return null}var ot=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},ke=[],ze=-1;function H(i){return{current:i}}function ie(i){0>ze||(i.current=ke[ze],ke[ze]=null,ze--)}function fe(i,s){ze++,ke[ze]=i.current,i.current=s}var Te=H(null),Ce=H(null),Be=H(null),Le=H(null);function At(i,s){switch(fe(Be,s),fe(Ce,i),fe(Te,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?_v(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=_v(s),i=Tv(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ie(Te),fe(Te,i)}function ct(){ie(Te),ie(Ce),ie(Be)}function oi(i){i.memoizedState!==null&&fe(Le,i);var s=Te.current,a=Tv(s,i.type);s!==a&&(fe(Ce,i),fe(Te,a))}function Gn(i){Ce.current===i&&(ie(Te),ie(Ce)),Le.current===i&&(ie(Le),yl._currentValue=Ee)}var Ui,Rs;function si(i){if(Ui===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Ui=s&&s[1]||"",Rs=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ui+i+Rs}var Ct=!1;function gt(i,s){if(!i||Ct)return"";Ct=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Z){var Q=Z}Reflect.construct(i,[],re)}else{try{re.call()}catch(Z){Q=Z}i.call(re.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(re=i())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],w=v[1];if(A&&w){var B=A.split(`
`),$=w.split(`
`);for(y=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;if(c===B.length||y===$.length)for(c=B.length-1,y=$.length-1;1<=c&&0<=y&&B[c]!==$[y];)y--;for(;1<=c&&0<=y;c--,y--)if(B[c]!==$[y]){if(c!==1||y!==1)do if(c--,y--,0>y||B[c]!==$[y]){var ne=`
`+B[c].replace(" at new "," at ");return i.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",i.displayName)),ne}while(1<=c&&0<=y);break}}}finally{Ct=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?si(a):""}function Is(i,s){switch(i.tag){case 26:case 27:case 5:return si(i.type);case 16:return si("Lazy");case 13:return i.child!==s&&s!==null?si("Suspense Fallback"):si("Suspense");case 19:return si("SuspenseList");case 0:case 15:return gt(i.type,!1);case 11:return gt(i.type.render,!1);case 1:return gt(i.type,!0);case 31:return si("Activity");default:return""}}function Ns(i){try{var s="",a=null;do s+=Is(i,a),a=i,i=i.return;while(i);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ri=Object.prototype.hasOwnProperty,eo=t.unstable_scheduleCallback,Xe=t.unstable_cancelCallback,Vi=t.unstable_shouldYield,ki=t.unstable_requestPaint,Ot=t.unstable_now,Ms=t.unstable_getCurrentPriorityLevel,wt=t.unstable_ImmediatePriority,Pt=t.unstable_UserBlockingPriority,Fn=t.unstable_NormalPriority,Ds=t.unstable_LowPriority,Do=t.unstable_IdlePriority,pt=t.log,In=t.unstable_setDisableYieldValue,qn=null,Jt=null;function Hn(i){if(typeof pt=="function"&&In(i),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(qn,i)}catch{}}var fn=Math.clz32?Math.clz32:to,Wl=Math.log,_r=Math.LN2;function to(i){return i>>>=0,i===0?32:31-(Wl(i)/_r|0)|0}var Li=256,ai=262144,Oi=4194304;function zn(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Nn(i,s,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,v=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var w=c&134217727;return w!==0?(c=w&~v,c!==0?y=zn(c):(A&=w,A!==0?y=zn(A):a||(a=w&~i,a!==0&&(y=zn(a))))):(w=c&~v,w!==0?y=zn(w):A!==0?y=zn(A):a||(a=c&~i,a!==0&&(y=zn(a)))),y===0?0:s!==0&&s!==y&&(s&v)===0&&(v=y&-y,a=s&-s,v>=a||v===32&&(a&4194048)!==0)?s:y}function Bi(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Po(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ps(){var i=Oi;return Oi<<=1,(Oi&62914560)===0&&(Oi=4194304),i}function Ti(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function Ei(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function P(i,s,a,c,y,v){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var w=i.entanglements,B=i.expirationTimes,$=i.hiddenUpdates;for(a=A&~a;0<a;){var ne=31-fn(a),re=1<<ne;w[ne]=0,B[ne]=-1;var Q=$[ne];if(Q!==null)for($[ne]=null,ne=0;ne<Q.length;ne++){var Z=Q[ne];Z!==null&&(Z.lane&=-536870913)}a&=~re}c!==0&&ae(i,c,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(A&~s))}function ae(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-fn(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function le(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var c=31-fn(a),y=1<<c;y&s|i[c]&s&&(i[c]|=s),a&=~y}}function pe(i,s){var a=s&-s;return a=(a&42)!==0?1:de(a),(a&(i.suspendedLanes|s))!==0?0:a}function de(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ye(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ge(){var i=he.p;return i!==0?i:(i=window.event,i===void 0?32:Hv(i.type))}function Ye(i,s){var a=he.p;try{return he.p=i,s()}finally{he.p=a}}var yt=Math.random().toString(36).slice(2),vt="__reactFiber$"+yt,Bt="__reactProps$"+yt,hn="__reactContainer$"+yt,Mn="__reactEvents$"+yt,Si="__reactListeners$"+yt,Us="__reactHandles$"+yt,wa="__reactResources$"+yt,no="__reactMarker$"+yt;function Vs(i){delete i[vt],delete i[Bt],delete i[Mn],delete i[Si],delete i[Us]}function io(i){var s=i[vt];if(s)return s;for(var a=i.parentNode;a;){if(s=a[hn]||a[vt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=wv(i);i!==null;){if(a=i[vt])return a;i=wv(i)}return s}i=a,a=i.parentNode}return null}function oo(i){if(i=i[vt]||i[hn]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function ks(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function bi(i){var s=i[wa];return s||(s=i[wa]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ut(i){i[no]=!0}var Tr=new Set,Uo={};function En(i,s){Gi(i,s),Gi(i+"Capture",s)}function Gi(i,s){for(Uo[i]=s,i=0;i<s.length;i++)Tr.add(s[i])}var Cd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ra={},Ia={};function Zl(i){return ri.call(Ia,i)?!0:ri.call(Ra,i)?!1:Cd.test(i)?Ia[i]=!0:(Ra[i]=!0,!1)}function Vo(i,s,a){if(Zl(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function ko(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function li(i,s,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+c)}}function Sn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function eu(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wd(i,s,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(i,s,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Er(i){if(!i._valueTracker){var s=eu(i)?"checked":"value";i._valueTracker=wd(i,s,""+i[s])}}function Na(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return i&&(c=eu(i)?i.checked?"true":"false":i.value),i=c,i!==a?(s.setValue(i),!0):!1}function Sr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var so=/[\n"\\]/g;function Rt(i){return i.replace(so,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Lo(i,s,a,c,y,v,A,w){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Sn(s)):i.value!==""+Sn(s)&&(i.value=""+Sn(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?br(i,A,Sn(s)):a!=null?br(i,A,Sn(a)):c!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+Sn(w):i.removeAttribute("name")}function Ls(i,s,a,c,y,v,A,w){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){Er(i);return}a=a!=null?""+Sn(a):"",s=s!=null?""+Sn(s):a,w||s===i.value||(i.value=s),i.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=w?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Er(i)}function br(i,s,a){s==="number"&&Sr(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Ze(i,s,a,c){if(i=i.options,s){s={};for(var y=0;y<a.length;y++)s["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=s.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Sn(a),s=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}s!==null||i[y].disabled||(s=i[y])}s!==null&&(s.selected=!0)}}function Os(i,s,a){if(s!=null&&(s=""+Sn(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+Sn(a):""}function Oo(i,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(o(92));if(ot(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=Sn(s),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),Er(i)}function ui(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var Rd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ma(i,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,a):typeof a!="number"||a===0||Rd.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function tu(i,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&a[y]!==c&&Ma(i,y,c)}else for(var v in s)s.hasOwnProperty(v)&&Ma(i,v,s[v])}function Da(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fi(i){return Nd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Xt(){}var Ar=null;function xr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ro=null,Yn=null;function nu(i){var s=oo(i);if(s&&(i=s.stateNode)){var a=i[Bt]||null;e:switch(i=s.stateNode,s.type){case"input":if(Lo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==i&&c.form===i.form){var y=c[Bt]||null;if(!y)throw Error(o(90));Lo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===i.form&&Na(c)}break e;case"textarea":Os(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Ze(i,!!a.multiple,s,!1)}}}var Pa=!1;function iu(i,s,a){if(Pa)return i(s,a);Pa=!0;try{var c=i(s);return c}finally{if(Pa=!1,(ro!==null||Yn!==null)&&(Zu(),ro&&(s=ro,i=Yn,Yn=ro=null,nu(s),i)))for(s=0;s<i.length;s++)nu(i[s])}}function Dn(i,s){var a=i.stateNode;if(a===null)return null;var c=a[Bt]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ua=!1;if(Ai)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{Ua=!1}var Jn=null,Cr=null,Hi=null;function Bo(){if(Hi)return Hi;var i,s=Cr,a=s.length,c,y="value"in Jn?Jn.value:Jn.textContent,v=y.length;for(i=0;i<a&&s[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&s[a-c]===y[v-c];c++);return Hi=y.slice(i,1<c?1-c:void 0)}function Bs(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Go(){return!0}function _t(){return!1}function pn(i){function s(a,c,y,v,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(a=i[w],this[w]=a?a(v):v[w]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Go:_t,this.isPropagationStopped=_t,this}return S(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),s}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gs=pn(ao),Fo=S({},ao,{view:0,detail:0}),ou=pn(Fo),qo,wr,bn,Fs=S({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==bn&&(bn&&i.type==="mousemove"?(qo=i.screenX-bn.screenX,wr=i.screenY-bn.screenY):wr=qo=0,bn=i),qo)},movementY:function(i){return"movementY"in i?i.movementY:wr}}),su=pn(Fs),qs=S({},Fs,{dataTransfer:0}),ru=pn(qs),Va=S({},Fo,{relatedTarget:0}),Ho=pn(Va),au=S({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),Rr=pn(au),Md=S({},ao,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),lu=pn(Md),Hs=S({},ao,{data:0}),ka=pn(Hs),uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},La={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Oa[i])?!!s[i]:!1}function zo(){return cu}var du=S({},Fo,{key:function(i){if(i.key){var s=uu[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Bs(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?La[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zo,charCode:function(i){return i.type==="keypress"?Bs(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Bs(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),fu=pn(du),lo=S({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ba=pn(lo),hu=S({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zo}),pu=pn(hu),mu=S({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ir=pn(mu),An=S({},Fs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),gu=pn(An),yu=S({},ao,{newState:0,oldState:0}),Yo=pn(yu),m=[9,13,27,32],E=Ai&&"CompositionEvent"in window,x=null;Ai&&"documentMode"in document&&(x=document.documentMode);var R=Ai&&"TextEvent"in window&&!x,K=Ai&&(!E||x&&8<x&&11>=x),ee=" ",me=!1;function rt(i,s){switch(i){case"keyup":return m.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fe=!1;function Wt(i,s){switch(i){case"compositionend":return Gt(s);case"keypress":return s.which!==32?null:(me=!0,ee);case"textInput":return i=s.data,i===ee&&me?null:i;default:return null}}function Zt(i,s){if(Fe)return i==="compositionend"||!E&&rt(i,s)?(i=Bo(),Hi=Cr=Jn=null,Fe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return K&&s.locale!=="ko"?null:s.data;default:return null}}var Jo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Jo[i.type]:s==="textarea"}function zs(i,s,a,c){ro?Yn?Yn.push(c):Yn=[c]:ro=c,s=rc(s,"onChange"),0<s.length&&(a=new Gs("onChange","change",null,a,c),i.push({event:a,listeners:s}))}var uo=null,Ga=null;function Mb(i){hv(i,0)}function vu(i){var s=ks(i);if(Na(s))return i}function Dm(i,s){if(i==="change")return s}var Pm=!1;if(Ai){var Dd;if(Ai){var Pd="oninput"in document;if(!Pd){var Um=document.createElement("div");Um.setAttribute("oninput","return;"),Pd=typeof Um.oninput=="function"}Dd=Pd}else Dd=!1;Pm=Dd&&(!document.documentMode||9<document.documentMode)}function Vm(){uo&&(uo.detachEvent("onpropertychange",km),Ga=uo=null)}function km(i){if(i.propertyName==="value"&&vu(Ga)){var s=[];zs(s,Ga,i,xr(i)),iu(Mb,s)}}function Db(i,s,a){i==="focusin"?(Vm(),uo=s,Ga=a,uo.attachEvent("onpropertychange",km)):i==="focusout"&&Vm()}function Pb(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return vu(Ga)}function Ub(i,s){if(i==="click")return vu(s)}function Vb(i,s){if(i==="input"||i==="change")return vu(s)}function kb(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Kn=typeof Object.is=="function"?Object.is:kb;function Fa(i,s){if(Kn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!ri.call(s,y)||!Kn(i[y],s[y]))return!1}return!0}function Lm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Om(i,s){var a=Lm(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=s&&c>=s)return{node:a,offset:s-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lm(a)}}function Bm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Bm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Gm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Sr(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=Sr(i.document)}return s}function Ud(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var Lb=Ai&&"documentMode"in document&&11>=document.documentMode,Nr=null,Vd=null,qa=null,kd=!1;function Fm(i,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kd||Nr==null||Nr!==Sr(c)||(c=Nr,"selectionStart"in c&&Ud(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),qa&&Fa(qa,c)||(qa=c,c=rc(Vd,"onSelect"),0<c.length&&(s=new Gs("onSelect","select",null,s,a),i.push({event:s,listeners:c}),s.target=Nr)))}function Ys(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var Mr={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},Ld={},qm={};Ai&&(qm=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function Js(i){if(Ld[i])return Ld[i];if(!Mr[i])return i;var s=Mr[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in qm)return Ld[i]=s[a];return i}var Hm=Js("animationend"),zm=Js("animationiteration"),Ym=Js("animationstart"),Ob=Js("transitionrun"),Bb=Js("transitionstart"),Gb=Js("transitioncancel"),Jm=Js("transitionend"),Km=new Map,Od="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Od.push("scrollEnd");function xi(i,s){Km.set(i,s),En(s,[i])}var _u=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ci=[],Dr=0,Bd=0;function Tu(){for(var i=Dr,s=Bd=Dr=0;s<i;){var a=ci[s];ci[s++]=null;var c=ci[s];ci[s++]=null;var y=ci[s];ci[s++]=null;var v=ci[s];if(ci[s++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&jm(a,y,v)}}function Eu(i,s,a,c){ci[Dr++]=i,ci[Dr++]=s,ci[Dr++]=a,ci[Dr++]=c,Bd|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Gd(i,s,a,c){return Eu(i,s,a,c),Su(i)}function Ks(i,s){return Eu(i,null,null,s),Su(i)}function jm(i,s,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&s!==null&&(y=31-fn(a),i=v.hiddenUpdates,c=i[y],c===null?i[y]=[s]:c.push(s),s.lane=a|536870912),v):null}function Su(i){if(50<cl)throw cl=0,Qf=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Pr={};function Fb(i,s,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(i,s,a,c){return new Fb(i,s,a,c)}function Fd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function co(i,s){var a=i.alternate;return a===null?(a=jn(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function $m(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function bu(i,s,a,c,y,v){var A=0;if(c=i,typeof i=="function")Fd(i)&&(A=1);else if(typeof i=="string")A=JA(i,a,Te.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=jn(31,a,s,y),i.elementType=M,i.lanes=v,i;case L:return js(a.children,y,v,s);case k:A=8,y|=24;break;case Y:return i=jn(12,a,s,y|2),i.elementType=Y,i.lanes=v,i;case q:return i=jn(13,a,s,y),i.elementType=q,i.lanes=v,i;case se:return i=jn(19,a,s,y),i.elementType=se,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case z:A=10;break e;case W:A=9;break e;case X:A=11;break e;case D:A=14;break e;case N:A=16,c=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),c=null}return s=jn(A,a,s,y),s.elementType=i,s.type=c,s.lanes=v,s}function js(i,s,a,c){return i=jn(7,i,c,s),i.lanes=a,i}function qd(i,s,a){return i=jn(6,i,null,s),i.lanes=a,i}function Qm(i){var s=jn(18,null,null,0);return s.stateNode=i,s}function Hd(i,s,a){return s=jn(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Xm=new WeakMap;function di(i,s){if(typeof i=="object"&&i!==null){var a=Xm.get(i);return a!==void 0?a:(s={value:i,source:s,stack:Ns(s)},Xm.set(i,s),s)}return{value:i,source:s,stack:Ns(s)}}var Ur=[],Vr=0,Au=null,Ha=0,fi=[],hi=0,Ko=null,zi=1,Yi="";function fo(i,s){Ur[Vr++]=Ha,Ur[Vr++]=Au,Au=i,Ha=s}function Wm(i,s,a){fi[hi++]=zi,fi[hi++]=Yi,fi[hi++]=Ko,Ko=i;var c=zi;i=Yi;var y=32-fn(c)-1;c&=~(1<<y),a+=1;var v=32-fn(s)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,zi=1<<32-fn(s)+y|a<<y|c,Yi=v+i}else zi=1<<v|a<<y|c,Yi=i}function zd(i){i.return!==null&&(fo(i,1),Wm(i,1,0))}function Yd(i){for(;i===Au;)Au=Ur[--Vr],Ur[Vr]=null,Ha=Ur[--Vr],Ur[Vr]=null;for(;i===Ko;)Ko=fi[--hi],fi[hi]=null,Yi=fi[--hi],fi[hi]=null,zi=fi[--hi],fi[hi]=null}function Zm(i,s){fi[hi++]=zi,fi[hi++]=Yi,fi[hi++]=Ko,zi=s.id,Yi=s.overflow,Ko=i}var on=null,Tt=null,$e=!1,jo=null,pi=!1,Jd=Error(o(519));function $o(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw za(di(s,i)),Jd}function eg(i){var s=i.stateNode,a=i.type,c=i.memoizedProps;switch(s[vt]=i,s[Bt]=c,a){case"dialog":He("cancel",s),He("close",s);break;case"iframe":case"object":case"embed":He("load",s);break;case"video":case"audio":for(a=0;a<fl.length;a++)He(fl[a],s);break;case"source":He("error",s);break;case"img":case"image":case"link":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"input":He("invalid",s),Ls(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":He("invalid",s);break;case"textarea":He("invalid",s),Oo(s,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||yv(s.textContent,a)?(c.popover!=null&&(He("beforetoggle",s),He("toggle",s)),c.onScroll!=null&&He("scroll",s),c.onScrollEnd!=null&&He("scrollend",s),c.onClick!=null&&(s.onclick=Xt),s=!0):s=!1,s||$o(i,!0)}function tg(i){for(on=i.return;on;)switch(on.tag){case 5:case 31:case 13:pi=!1;return;case 27:case 3:pi=!0;return;default:on=on.return}}function kr(i){if(i!==on)return!1;if(!$e)return tg(i),$e=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||dh(i.type,i.memoizedProps)),a=!a),a&&Tt&&$o(i),tg(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));Tt=Cv(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));Tt=Cv(i)}else s===27?(s=Tt,us(i.type)?(i=gh,gh=null,Tt=i):Tt=s):Tt=on?gi(i.stateNode.nextSibling):null;return!0}function $s(){Tt=on=null,$e=!1}function Kd(){var i=jo;return i!==null&&(Ln===null?Ln=i:Ln.push.apply(Ln,i),jo=null),i}function za(i){jo===null?jo=[i]:jo.push(i)}var jd=H(null),Qs=null,ho=null;function Qo(i,s,a){fe(jd,s._currentValue),s._currentValue=a}function po(i){i._currentValue=jd.current,ie(jd)}function $d(i,s,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===a)break;i=i.return}}function Qd(i,s,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var w=v;v=y;for(var B=0;B<s.length;B++)if(w.context===s[B]){v.lanes|=a,w=v.alternate,w!==null&&(w.lanes|=a),$d(v.return,a,i),c||(A=null);break e}v=w.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(o(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),$d(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Lr(i,s,a,c){i=null;for(var y=s,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var w=y.type;Kn(y.pendingProps.value,A.value)||(i!==null?i.push(w):i=[w])}}else if(y===Le.current){if(A=y.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(yl):i=[yl])}y=y.return}i!==null&&Qd(s,i,a,c),s.flags|=262144}function xu(i){for(i=i.firstContext;i!==null;){if(!Kn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Xs(i){Qs=i,ho=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function sn(i){return ng(Qs,i)}function Cu(i,s){return Qs===null&&Xs(i),ng(i,s)}function ng(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ho===null){if(i===null)throw Error(o(308));ho=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ho=ho.next=s;return a}var qb=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},Hb=t.unstable_scheduleCallback,zb=t.unstable_NormalPriority,Ft={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xd(){return{controller:new qb,data:new Map,refCount:0}}function Ya(i){i.refCount--,i.refCount===0&&Hb(zb,function(){i.controller.abort()})}var Ja=null,Wd=0,Or=0,Br=null;function Yb(i,s){if(Ja===null){var a=Ja=[];Wd=0,Or=nh(),Br={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Wd++,s.then(ig,ig),s}function ig(){if(--Wd===0&&Ja!==null){Br!==null&&(Br.status="fulfilled");var i=Ja;Ja=null,Or=0,Br=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function Jb(i,s){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<a.length;y++)(0,a[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var og=te.S;te.S=function(i,s){Fy=Ot(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Yb(i,s),og!==null&&og(i,s)};var Ws=H(null);function Zd(){var i=Ws.current;return i!==null?i:mt.pooledCache}function wu(i,s){s===null?fe(Ws,Ws.current):fe(Ws,s.pool)}function sg(){var i=Zd();return i===null?null:{parent:Ft._currentValue,pool:i}}var Gr=Error(o(460)),ef=Error(o(474)),Ru=Error(o(542)),Iu={then:function(){}};function rg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function ag(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Xt,Xt),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,ug(i),i;default:if(typeof s.status=="string")s.then(Xt,Xt);else{if(i=mt,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,ug(i),i}throw er=s,Gr}}function Zs(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(er=a,Gr):a}}var er=null;function lg(){if(er===null)throw Error(o(459));var i=er;return er=null,i}function ug(i){if(i===Gr||i===Ru)throw Error(o(483))}var Fr=null,Ka=0;function Nu(i){var s=Ka;return Ka+=1,Fr===null&&(Fr=[]),ag(Fr,i,s)}function ja(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Mu(i,s){throw s.$$typeof===b?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function cg(i){function s(J,F){if(i){var j=J.deletions;j===null?(J.deletions=[F],J.flags|=16):j.push(F)}}function a(J,F){if(!i)return null;for(;F!==null;)s(J,F),F=F.sibling;return null}function c(J){for(var F=new Map;J!==null;)J.key!==null?F.set(J.key,J):F.set(J.index,J),J=J.sibling;return F}function y(J,F){return J=co(J,F),J.index=0,J.sibling=null,J}function v(J,F,j){return J.index=j,i?(j=J.alternate,j!==null?(j=j.index,j<F?(J.flags|=67108866,F):j):(J.flags|=67108866,F)):(J.flags|=1048576,F)}function A(J){return i&&J.alternate===null&&(J.flags|=67108866),J}function w(J,F,j,oe){return F===null||F.tag!==6?(F=qd(j,J.mode,oe),F.return=J,F):(F=y(F,j),F.return=J,F)}function B(J,F,j,oe){var we=j.type;return we===L?ne(J,F,j.props.children,oe,j.key):F!==null&&(F.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&Zs(we)===F.type)?(F=y(F,j.props),ja(F,j),F.return=J,F):(F=bu(j.type,j.key,j.props,null,J.mode,oe),ja(F,j),F.return=J,F)}function $(J,F,j,oe){return F===null||F.tag!==4||F.stateNode.containerInfo!==j.containerInfo||F.stateNode.implementation!==j.implementation?(F=Hd(j,J.mode,oe),F.return=J,F):(F=y(F,j.children||[]),F.return=J,F)}function ne(J,F,j,oe,we){return F===null||F.tag!==7?(F=js(j,J.mode,oe,we),F.return=J,F):(F=y(F,j),F.return=J,F)}function re(J,F,j){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=qd(""+F,J.mode,j),F.return=J,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case C:return j=bu(F.type,F.key,F.props,null,J.mode,j),ja(j,F),j.return=J,j;case I:return F=Hd(F,J.mode,j),F.return=J,F;case N:return F=Zs(F),re(J,F,j)}if(ot(F)||G(F))return F=js(F,J.mode,j,null),F.return=J,F;if(typeof F.then=="function")return re(J,Nu(F),j);if(F.$$typeof===z)return re(J,Cu(J,F),j);Mu(J,F)}return null}function Q(J,F,j,oe){var we=F!==null?F.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return we!==null?null:w(J,F,""+j,oe);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case C:return j.key===we?B(J,F,j,oe):null;case I:return j.key===we?$(J,F,j,oe):null;case N:return j=Zs(j),Q(J,F,j,oe)}if(ot(j)||G(j))return we!==null?null:ne(J,F,j,oe,null);if(typeof j.then=="function")return Q(J,F,Nu(j),oe);if(j.$$typeof===z)return Q(J,F,Cu(J,j),oe);Mu(J,j)}return null}function Z(J,F,j,oe,we){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return J=J.get(j)||null,w(F,J,""+oe,we);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case C:return J=J.get(oe.key===null?j:oe.key)||null,B(F,J,oe,we);case I:return J=J.get(oe.key===null?j:oe.key)||null,$(F,J,oe,we);case N:return oe=Zs(oe),Z(J,F,j,oe,we)}if(ot(oe)||G(oe))return J=J.get(j)||null,ne(F,J,oe,we,null);if(typeof oe.then=="function")return Z(J,F,j,Nu(oe),we);if(oe.$$typeof===z)return Z(J,F,j,Cu(F,oe),we);Mu(F,oe)}return null}function Se(J,F,j,oe){for(var we=null,et=null,Ae=F,Ge=F=0,Ke=null;Ae!==null&&Ge<j.length;Ge++){Ae.index>Ge?(Ke=Ae,Ae=null):Ke=Ae.sibling;var tt=Q(J,Ae,j[Ge],oe);if(tt===null){Ae===null&&(Ae=Ke);break}i&&Ae&&tt.alternate===null&&s(J,Ae),F=v(tt,F,Ge),et===null?we=tt:et.sibling=tt,et=tt,Ae=Ke}if(Ge===j.length)return a(J,Ae),$e&&fo(J,Ge),we;if(Ae===null){for(;Ge<j.length;Ge++)Ae=re(J,j[Ge],oe),Ae!==null&&(F=v(Ae,F,Ge),et===null?we=Ae:et.sibling=Ae,et=Ae);return $e&&fo(J,Ge),we}for(Ae=c(Ae);Ge<j.length;Ge++)Ke=Z(Ae,J,Ge,j[Ge],oe),Ke!==null&&(i&&Ke.alternate!==null&&Ae.delete(Ke.key===null?Ge:Ke.key),F=v(Ke,F,Ge),et===null?we=Ke:et.sibling=Ke,et=Ke);return i&&Ae.forEach(function(ps){return s(J,ps)}),$e&&fo(J,Ge),we}function Ie(J,F,j,oe){if(j==null)throw Error(o(151));for(var we=null,et=null,Ae=F,Ge=F=0,Ke=null,tt=j.next();Ae!==null&&!tt.done;Ge++,tt=j.next()){Ae.index>Ge?(Ke=Ae,Ae=null):Ke=Ae.sibling;var ps=Q(J,Ae,tt.value,oe);if(ps===null){Ae===null&&(Ae=Ke);break}i&&Ae&&ps.alternate===null&&s(J,Ae),F=v(ps,F,Ge),et===null?we=ps:et.sibling=ps,et=ps,Ae=Ke}if(tt.done)return a(J,Ae),$e&&fo(J,Ge),we;if(Ae===null){for(;!tt.done;Ge++,tt=j.next())tt=re(J,tt.value,oe),tt!==null&&(F=v(tt,F,Ge),et===null?we=tt:et.sibling=tt,et=tt);return $e&&fo(J,Ge),we}for(Ae=c(Ae);!tt.done;Ge++,tt=j.next())tt=Z(Ae,J,Ge,tt.value,oe),tt!==null&&(i&&tt.alternate!==null&&Ae.delete(tt.key===null?Ge:tt.key),F=v(tt,F,Ge),et===null?we=tt:et.sibling=tt,et=tt);return i&&Ae.forEach(function(ix){return s(J,ix)}),$e&&fo(J,Ge),we}function ht(J,F,j,oe){if(typeof j=="object"&&j!==null&&j.type===L&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case C:e:{for(var we=j.key;F!==null;){if(F.key===we){if(we=j.type,we===L){if(F.tag===7){a(J,F.sibling),oe=y(F,j.props.children),oe.return=J,J=oe;break e}}else if(F.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&Zs(we)===F.type){a(J,F.sibling),oe=y(F,j.props),ja(oe,j),oe.return=J,J=oe;break e}a(J,F);break}else s(J,F);F=F.sibling}j.type===L?(oe=js(j.props.children,J.mode,oe,j.key),oe.return=J,J=oe):(oe=bu(j.type,j.key,j.props,null,J.mode,oe),ja(oe,j),oe.return=J,J=oe)}return A(J);case I:e:{for(we=j.key;F!==null;){if(F.key===we)if(F.tag===4&&F.stateNode.containerInfo===j.containerInfo&&F.stateNode.implementation===j.implementation){a(J,F.sibling),oe=y(F,j.children||[]),oe.return=J,J=oe;break e}else{a(J,F);break}else s(J,F);F=F.sibling}oe=Hd(j,J.mode,oe),oe.return=J,J=oe}return A(J);case N:return j=Zs(j),ht(J,F,j,oe)}if(ot(j))return Se(J,F,j,oe);if(G(j)){if(we=G(j),typeof we!="function")throw Error(o(150));return j=we.call(j),Ie(J,F,j,oe)}if(typeof j.then=="function")return ht(J,F,Nu(j),oe);if(j.$$typeof===z)return ht(J,F,Cu(J,j),oe);Mu(J,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,F!==null&&F.tag===6?(a(J,F.sibling),oe=y(F,j),oe.return=J,J=oe):(a(J,F),oe=qd(j,J.mode,oe),oe.return=J,J=oe),A(J)):a(J,F)}return function(J,F,j,oe){try{Ka=0;var we=ht(J,F,j,oe);return Fr=null,we}catch(Ae){if(Ae===Gr||Ae===Ru)throw Ae;var et=jn(29,Ae,null,J.mode);return et.lanes=oe,et.return=J,et}finally{}}}var tr=cg(!0),dg=cg(!1),Xo=!1;function tf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nf(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Wo(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Zo(i,s,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(st&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=Su(i),jm(i,null,a),s}return Eu(i,c,s,a),Su(i)}function $a(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,le(i,a)}}function of(i,s){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=s:v=v.next=s}else y=v=s;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var sf=!1;function Qa(){if(sf){var i=Br;if(i!==null)throw i}}function Xa(i,s,a,c){sf=!1;var y=i.updateQueue;Xo=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var B=w,$=B.next;B.next=null,A===null?v=$:A.next=$,A=B;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,w=ne.lastBaseUpdate,w!==A&&(w===null?ne.firstBaseUpdate=$:w.next=$,ne.lastBaseUpdate=B))}if(v!==null){var re=y.baseState;A=0,ne=$=B=null,w=v;do{var Q=w.lane&-536870913,Z=Q!==w.lane;if(Z?(Je&Q)===Q:(c&Q)===Q){Q!==0&&Q===Or&&(sf=!0),ne!==null&&(ne=ne.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Se=i,Ie=w;Q=s;var ht=a;switch(Ie.tag){case 1:if(Se=Ie.payload,typeof Se=="function"){re=Se.call(ht,re,Q);break e}re=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ie.payload,Q=typeof Se=="function"?Se.call(ht,re,Q):Se,Q==null)break e;re=S({},re,Q);break e;case 2:Xo=!0}}Q=w.callback,Q!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ne===null?($=ne=Z,B=re):ne=ne.next=Z,A|=Q;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;Z=w,w=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);ne===null&&(B=re),y.baseState=B,y.firstBaseUpdate=$,y.lastBaseUpdate=ne,v===null&&(y.shared.lanes=0),os|=A,i.lanes=A,i.memoizedState=re}}function fg(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function hg(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)fg(a[i],s)}var qr=H(null),Du=H(0);function pg(i,s){i=bo,fe(Du,i),fe(qr,s),bo=i|s.baseLanes}function rf(){fe(Du,bo),fe(qr,qr.current)}function af(){bo=Du.current,ie(qr),ie(Du)}var $n=H(null),mi=null;function es(i){var s=i.alternate;fe(Vt,Vt.current&1),fe($n,i),mi===null&&(s===null||qr.current!==null||s.memoizedState!==null)&&(mi=i)}function lf(i){fe(Vt,Vt.current),fe($n,i),mi===null&&(mi=i)}function mg(i){i.tag===22?(fe(Vt,Vt.current),fe($n,i),mi===null&&(mi=i)):ts()}function ts(){fe(Vt,Vt.current),fe($n,$n.current)}function Qn(i){ie($n),mi===i&&(mi=null),ie(Vt)}var Vt=H(0);function Pu(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ph(a)||mh(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var mo=0,Oe=null,dt=null,qt=null,Uu=!1,Hr=!1,nr=!1,Vu=0,Wa=0,zr=null,Kb=0;function It(){throw Error(o(321))}function uf(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Kn(i[a],s[a]))return!1;return!0}function cf(i,s,a,c,y,v){return mo=v,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,te.H=i===null||i.memoizedState===null?Wg:xf,nr=!1,v=a(c,y),nr=!1,Hr&&(v=yg(s,a,c,y)),gg(i),v}function gg(i){te.H=tl;var s=dt!==null&&dt.next!==null;if(mo=0,qt=dt=Oe=null,Uu=!1,Wa=0,zr=null,s)throw Error(o(300));i===null||Ht||(i=i.dependencies,i!==null&&xu(i)&&(Ht=!0))}function yg(i,s,a,c){Oe=i;var y=0;do{if(Hr&&(zr=null),Wa=0,Hr=!1,25<=y)throw Error(o(301));if(y+=1,qt=dt=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}te.H=Zg,v=s(a,c)}while(Hr);return v}function jb(){var i=te.H,s=i.useState()[0];return s=typeof s.then=="function"?Za(s):s,i=i.useState()[0],(dt!==null?dt.memoizedState:null)!==i&&(Oe.flags|=1024),s}function df(){var i=Vu!==0;return Vu=0,i}function ff(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function hf(i){if(Uu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Uu=!1}mo=0,qt=dt=Oe=null,Hr=!1,Wa=Vu=0,zr=null}function xn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Oe.memoizedState=qt=i:qt=qt.next=i,qt}function kt(){if(dt===null){var i=Oe.alternate;i=i!==null?i.memoizedState:null}else i=dt.next;var s=qt===null?Oe.memoizedState:qt.next;if(s!==null)qt=s,dt=i;else{if(i===null)throw Oe.alternate===null?Error(o(467)):Error(o(310));dt=i,i={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},qt===null?Oe.memoizedState=qt=i:qt=qt.next=i}return qt}function ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Za(i){var s=Wa;return Wa+=1,zr===null&&(zr=[]),i=ag(zr,i,s),s=Oe,(qt===null?s.memoizedState:qt.next)===null&&(s=s.alternate,te.H=s===null||s.memoizedState===null?Wg:xf),i}function Lu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Za(i);if(i.$$typeof===z)return sn(i)}throw Error(o(438,String(i)))}function pf(i){var s=null,a=Oe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=Oe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=ku(),Oe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),c=0;c<i;c++)a[c]=U;return s.index++,a}function go(i,s){return typeof s=="function"?s(i):s}function Ou(i){var s=kt();return mf(s,dt,i)}function mf(i,s,a){var c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var y=i.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}s.baseQueue=y=v,c.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{s=y.next;var w=A=null,B=null,$=s,ne=!1;do{var re=$.lane&-536870913;if(re!==$.lane?(Je&re)===re:(mo&re)===re){var Q=$.revertLane;if(Q===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),re===Or&&(ne=!0);else if((mo&Q)===Q){$=$.next,Q===Or&&(ne=!0);continue}else re={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},B===null?(w=B=re,A=v):B=B.next=re,Oe.lanes|=Q,os|=Q;re=$.action,nr&&a(v,re),v=$.hasEagerState?$.eagerState:a(v,re)}else Q={lane:re,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},B===null?(w=B=Q,A=v):B=B.next=Q,Oe.lanes|=re,os|=re;$=$.next}while($!==null&&$!==s);if(B===null?A=v:B.next=w,!Kn(v,i.memoizedState)&&(Ht=!0,ne&&(a=Br,a!==null)))throw a;i.memoizedState=v,i.baseState=A,i.baseQueue=B,c.lastRenderedState=v}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function gf(i){var s=kt(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,v=s.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=i(v,A.action),A=A.next;while(A!==y);Kn(v,s.memoizedState)||(Ht=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,c]}function vg(i,s,a){var c=Oe,y=kt(),v=$e;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=s();var A=!Kn((dt||y).memoizedState,a);if(A&&(y.memoizedState=a,Ht=!0),y=y.queue,_f(Eg.bind(null,c,y,i),[i]),y.getSnapshot!==s||A||qt!==null&&qt.memoizedState.tag&1){if(c.flags|=2048,Yr(9,{destroy:void 0},Tg.bind(null,c,y,a,s),null),mt===null)throw Error(o(349));v||(mo&127)!==0||_g(c,s,a)}return a}function _g(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=Oe.updateQueue,s===null?(s=ku(),Oe.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function Tg(i,s,a,c){s.value=a,s.getSnapshot=c,Sg(s)&&bg(i)}function Eg(i,s,a){return a(function(){Sg(s)&&bg(i)})}function Sg(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Kn(i,a)}catch{return!0}}function bg(i){var s=Ks(i,2);s!==null&&On(s,i,2)}function yf(i){var s=xn();if(typeof i=="function"){var a=i;if(i=a(),nr){Hn(!0);try{a()}finally{Hn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:i},s}function Ag(i,s,a,c){return i.baseState=a,mf(i,dt,typeof c=="function"?c:go)}function $b(i,s,a,c,y){if(Fu(i))throw Error(o(485));if(i=s.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};te.T!==null?a(!0):v.isTransition=!1,c(v),a=s.pending,a===null?(v.next=s.pending=v,xg(s,v)):(v.next=a.next,s.pending=a.next=v)}}function xg(i,s){var a=s.action,c=s.payload,y=i.state;if(s.isTransition){var v=te.T,A={};te.T=A;try{var w=a(y,c),B=te.S;B!==null&&B(A,w),Cg(i,s,w)}catch($){vf(i,s,$)}finally{v!==null&&A.types!==null&&(v.types=A.types),te.T=v}}else try{v=a(y,c),Cg(i,s,v)}catch($){vf(i,s,$)}}function Cg(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){wg(i,s,c)},function(c){return vf(i,s,c)}):wg(i,s,a)}function wg(i,s,a){s.status="fulfilled",s.value=a,Rg(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,xg(i,a)))}function vf(i,s,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,Rg(s),s=s.next;while(s!==c)}i.action=null}function Rg(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Ig(i,s){return s}function Ng(i,s){if($e){var a=mt.formState;if(a!==null){e:{var c=Oe;if($e){if(Tt){t:{for(var y=Tt,v=pi;y.nodeType!==8;){if(!v){y=null;break t}if(y=gi(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){Tt=gi(y.nextSibling),c=y.data==="F!";break e}}$o(c)}c=!1}c&&(s=a[0])}}return a=xn(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ig,lastRenderedState:s},a.queue=c,a=$g.bind(null,Oe,c),c.dispatch=a,c=yf(!1),v=Af.bind(null,Oe,!1,c.queue),c=xn(),y={state:s,dispatch:null,action:i,pending:null},c.queue=y,a=$b.bind(null,Oe,y,v,a),y.dispatch=a,c.memoizedState=i,[s,a,!1]}function Mg(i){var s=kt();return Dg(s,dt,i)}function Dg(i,s,a){if(s=mf(i,s,Ig)[0],i=Ou(go)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Za(s)}catch(A){throw A===Gr?Ru:A}else c=s;s=kt();var y=s.queue,v=y.dispatch;return a!==s.memoizedState&&(Oe.flags|=2048,Yr(9,{destroy:void 0},Qb.bind(null,y,a),null)),[c,v,i]}function Qb(i,s){i.action=s}function Pg(i){var s=kt(),a=dt;if(a!==null)return Dg(s,a,i);kt(),s=s.memoizedState,a=kt();var c=a.queue.dispatch;return a.memoizedState=i,[s,c,!1]}function Yr(i,s,a,c){return i={tag:i,create:a,deps:c,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=ku(),Oe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,s.lastEffect=i),i}function Ug(){return kt().memoizedState}function Bu(i,s,a,c){var y=xn();Oe.flags|=i,y.memoizedState=Yr(1|s,{destroy:void 0},a,c===void 0?null:c)}function Gu(i,s,a,c){var y=kt();c=c===void 0?null:c;var v=y.memoizedState.inst;dt!==null&&c!==null&&uf(c,dt.memoizedState.deps)?y.memoizedState=Yr(s,v,a,c):(Oe.flags|=i,y.memoizedState=Yr(1|s,v,a,c))}function Vg(i,s){Bu(8390656,8,i,s)}function _f(i,s){Gu(2048,8,i,s)}function Xb(i){Oe.flags|=4;var s=Oe.updateQueue;if(s===null)s=ku(),Oe.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function kg(i){var s=kt().memoizedState;return Xb({ref:s,nextImpl:i}),function(){if((st&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Lg(i,s){return Gu(4,2,i,s)}function Og(i,s){return Gu(4,4,i,s)}function Bg(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Gg(i,s,a){a=a!=null?a.concat([i]):null,Gu(4,4,Bg.bind(null,s,i),a)}function Tf(){}function Fg(i,s){var a=kt();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&uf(s,c[1])?c[0]:(a.memoizedState=[i,s],i)}function qg(i,s){var a=kt();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&uf(s,c[1]))return c[0];if(c=i(),nr){Hn(!0);try{i()}finally{Hn(!1)}}return a.memoizedState=[c,s],c}function Ef(i,s,a){return a===void 0||(mo&1073741824)!==0&&(Je&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=Hy(),Oe.lanes|=i,os|=i,a)}function Hg(i,s,a,c){return Kn(a,s)?a:qr.current!==null?(i=Ef(i,a,c),Kn(i,s)||(Ht=!0),i):(mo&42)===0||(mo&1073741824)!==0&&(Je&261930)===0?(Ht=!0,i.memoizedState=a):(i=Hy(),Oe.lanes|=i,os|=i,s)}function zg(i,s,a,c,y){var v=he.p;he.p=v!==0&&8>v?v:8;var A=te.T,w={};te.T=w,Af(i,!1,s,a);try{var B=y(),$=te.S;if($!==null&&$(w,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ne=Jb(B,c);el(i,s,ne,Zn(i))}else el(i,s,c,Zn(i))}catch(re){el(i,s,{then:function(){},status:"rejected",reason:re},Zn())}finally{he.p=v,A!==null&&w.types!==null&&(A.types=w.types),te.T=A}}function Wb(){}function Sf(i,s,a,c){if(i.tag!==5)throw Error(o(476));var y=Yg(i).queue;zg(i,y,s,Ee,a===null?Wb:function(){return Jg(i),a(c)})}function Yg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:Ee},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Jg(i){var s=Yg(i);s.next===null&&(s=i.alternate.memoizedState),el(i,s.next.queue,{},Zn())}function bf(){return sn(yl)}function Kg(){return kt().memoizedState}function jg(){return kt().memoizedState}function Zb(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=Zn();i=Wo(a);var c=Zo(s,i,a);c!==null&&(On(c,s,a),$a(c,s,a)),s={cache:Xd()},i.payload=s;return}s=s.return}}function eA(i,s,a){var c=Zn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Fu(i)?Qg(s,a):(a=Gd(i,s,a,c),a!==null&&(On(a,i,c),Xg(a,s,c)))}function $g(i,s,a){var c=Zn();el(i,s,a,c)}function el(i,s,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fu(i))Qg(s,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var A=s.lastRenderedState,w=v(A,a);if(y.hasEagerState=!0,y.eagerState=w,Kn(w,A))return Eu(i,s,y,0),mt===null&&Tu(),!1}catch{}finally{}if(a=Gd(i,s,y,c),a!==null)return On(a,i,c),Xg(a,s,c),!0}return!1}function Af(i,s,a,c){if(c={lane:2,revertLane:nh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Fu(i)){if(s)throw Error(o(479))}else s=Gd(i,a,c,2),s!==null&&On(s,i,2)}function Fu(i){var s=i.alternate;return i===Oe||s!==null&&s===Oe}function Qg(i,s){Hr=Uu=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function Xg(i,s,a){if((a&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,le(i,a)}}var tl={readContext:sn,use:Lu,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};tl.useEffectEvent=It;var Wg={readContext:sn,use:Lu,useCallback:function(i,s){return xn().memoizedState=[i,s===void 0?null:s],i},useContext:sn,useEffect:Vg,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Bu(4194308,4,Bg.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Bu(4194308,4,i,s)},useInsertionEffect:function(i,s){Bu(4,2,i,s)},useMemo:function(i,s){var a=xn();s=s===void 0?null:s;var c=i();if(nr){Hn(!0);try{i()}finally{Hn(!1)}}return a.memoizedState=[c,s],c},useReducer:function(i,s,a){var c=xn();if(a!==void 0){var y=a(s);if(nr){Hn(!0);try{a(s)}finally{Hn(!1)}}}else y=s;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=eA.bind(null,Oe,i),[c.memoizedState,i]},useRef:function(i){var s=xn();return i={current:i},s.memoizedState=i},useState:function(i){i=yf(i);var s=i.queue,a=$g.bind(null,Oe,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Tf,useDeferredValue:function(i,s){var a=xn();return Ef(a,i,s)},useTransition:function(){var i=yf(!1);return i=zg.bind(null,Oe,i.queue,!0,!1),xn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var c=Oe,y=xn();if($e){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),mt===null)throw Error(o(349));(Je&127)!==0||_g(c,s,a)}y.memoizedState=a;var v={value:a,getSnapshot:s};return y.queue=v,Vg(Eg.bind(null,c,v,i),[i]),c.flags|=2048,Yr(9,{destroy:void 0},Tg.bind(null,c,v,a,s),null),a},useId:function(){var i=xn(),s=mt.identifierPrefix;if($e){var a=Yi,c=zi;a=(c&~(1<<32-fn(c)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Vu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Kb++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:bf,useFormState:Ng,useActionState:Ng,useOptimistic:function(i){var s=xn();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Af.bind(null,Oe,!0,a),a.dispatch=s,[i,s]},useMemoCache:pf,useCacheRefresh:function(){return xn().memoizedState=Zb.bind(null,Oe)},useEffectEvent:function(i){var s=xn(),a={impl:i};return s.memoizedState=a,function(){if((st&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},xf={readContext:sn,use:Lu,useCallback:Fg,useContext:sn,useEffect:_f,useImperativeHandle:Gg,useInsertionEffect:Lg,useLayoutEffect:Og,useMemo:qg,useReducer:Ou,useRef:Ug,useState:function(){return Ou(go)},useDebugValue:Tf,useDeferredValue:function(i,s){var a=kt();return Hg(a,dt.memoizedState,i,s)},useTransition:function(){var i=Ou(go)[0],s=kt().memoizedState;return[typeof i=="boolean"?i:Za(i),s]},useSyncExternalStore:vg,useId:Kg,useHostTransitionStatus:bf,useFormState:Mg,useActionState:Mg,useOptimistic:function(i,s){var a=kt();return Ag(a,dt,i,s)},useMemoCache:pf,useCacheRefresh:jg};xf.useEffectEvent=kg;var Zg={readContext:sn,use:Lu,useCallback:Fg,useContext:sn,useEffect:_f,useImperativeHandle:Gg,useInsertionEffect:Lg,useLayoutEffect:Og,useMemo:qg,useReducer:gf,useRef:Ug,useState:function(){return gf(go)},useDebugValue:Tf,useDeferredValue:function(i,s){var a=kt();return dt===null?Ef(a,i,s):Hg(a,dt.memoizedState,i,s)},useTransition:function(){var i=gf(go)[0],s=kt().memoizedState;return[typeof i=="boolean"?i:Za(i),s]},useSyncExternalStore:vg,useId:Kg,useHostTransitionStatus:bf,useFormState:Pg,useActionState:Pg,useOptimistic:function(i,s){var a=kt();return dt!==null?Ag(a,dt,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:pf,useCacheRefresh:jg};Zg.useEffectEvent=kg;function Cf(i,s,a,c){s=i.memoizedState,a=a(c,s),a=a==null?s:S({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var wf={enqueueSetState:function(i,s,a){i=i._reactInternals;var c=Zn(),y=Wo(c);y.payload=s,a!=null&&(y.callback=a),s=Zo(i,y,c),s!==null&&(On(s,i,c),$a(s,i,c))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var c=Zn(),y=Wo(c);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=Zo(i,y,c),s!==null&&(On(s,i,c),$a(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Zn(),c=Wo(a);c.tag=2,s!=null&&(c.callback=s),s=Zo(i,c,a),s!==null&&(On(s,i,a),$a(s,i,a))}};function ey(i,s,a,c,y,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,A):s.prototype&&s.prototype.isPureReactComponent?!Fa(a,c)||!Fa(y,v):!0}function ty(i,s,a,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==i&&wf.enqueueReplaceState(s,s.state,null)}function ir(i,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(i=i.defaultProps){a===s&&(a=S({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function ny(i){_u(i)}function iy(i){console.error(i)}function oy(i){_u(i)}function qu(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function sy(i,s,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Rf(i,s,a){return a=Wo(a),a.tag=3,a.payload={element:null},a.callback=function(){qu(i,s)},a}function ry(i){return i=Wo(i),i.tag=3,i}function ay(i,s,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;i.payload=function(){return y(v)},i.callback=function(){sy(s,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){sy(s,a,c),typeof y!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function tA(i,s,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&Lr(s,a,y,!0),a=$n.current,a!==null){switch(a.tag){case 31:case 13:return mi===null?ec():a.alternate===null&&Nt===0&&(Nt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===Iu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),Zf(i,c,y)),!1;case 22:return a.flags|=65536,c===Iu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),Zf(i,c,y)),!1}throw Error(o(435,a.tag))}return Zf(i,c,y),ec(),!1}if($e)return s=$n.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==Jd&&(i=Error(o(422),{cause:c}),za(di(i,a)))):(c!==Jd&&(s=Error(o(423),{cause:c}),za(di(s,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=di(c,a),y=Rf(i.stateNode,c,y),of(i,y),Nt!==4&&(Nt=2)),!1;var v=Error(o(520),{cause:c});if(v=di(v,a),ul===null?ul=[v]:ul.push(v),Nt!==4&&(Nt=2),s===null)return!0;c=di(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Rf(a.stateNode,c,i),of(a,i),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ss===null||!ss.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=ry(y),ay(y,i,a,c),of(a,y),!1}a=a.return}while(a!==null);return!1}var If=Error(o(461)),Ht=!1;function rn(i,s,a,c){s.child=i===null?dg(s,null,a,c):tr(s,i.child,a,c)}function ly(i,s,a,c,y){a=a.render;var v=s.ref;if("ref"in c){var A={};for(var w in c)w!=="ref"&&(A[w]=c[w])}else A=c;return Xs(s),c=cf(i,s,a,A,v,y),w=df(),i!==null&&!Ht?(ff(i,s,y),yo(i,s,y)):($e&&w&&zd(s),s.flags|=1,rn(i,s,c,y),s.child)}function uy(i,s,a,c,y){if(i===null){var v=a.type;return typeof v=="function"&&!Fd(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,cy(i,s,v,c,y)):(i=bu(a.type,null,c,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(v=i.child,!Lf(i,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:Fa,a(A,c)&&i.ref===s.ref)return yo(i,s,y)}return s.flags|=1,i=co(v,c),i.ref=s.ref,i.return=s,s.child=i}function cy(i,s,a,c,y){if(i!==null){var v=i.memoizedProps;if(Fa(v,c)&&i.ref===s.ref)if(Ht=!1,s.pendingProps=c=v,Lf(i,y))(i.flags&131072)!==0&&(Ht=!0);else return s.lanes=i.lanes,yo(i,s,y)}return Nf(i,s,a,c,y)}function dy(i,s,a,c){var y=c.children,v=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=s.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,s.child=null;return fy(i,s,v,a,c)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&wu(s,v!==null?v.cachePool:null),v!==null?pg(s,v):rf(),mg(s);else return c=s.lanes=536870912,fy(i,s,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(wu(s,v.cachePool),pg(s,v),ts(),s.memoizedState=null):(i!==null&&wu(s,null),rf(),ts());return rn(i,s,y,a),s.child}function nl(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function fy(i,s,a,c,y){var v=Zd();return v=v===null?null:{parent:Ft._currentValue,pool:v},s.memoizedState={baseLanes:a,cachePool:v},i!==null&&wu(s,null),rf(),mg(s),i!==null&&Lr(i,s,c,!0),s.childLanes=y,null}function Hu(i,s){return s=Yu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function hy(i,s,a){return tr(s,i.child,null,a),i=Hu(s,s.pendingProps),i.flags|=2,Qn(s),s.memoizedState=null,i}function nA(i,s,a){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,i===null){if($e){if(c.mode==="hidden")return i=Hu(s,c),s.lanes=536870912,nl(null,i);if(lf(s),(i=Tt)?(i=xv(i,pi),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Ko!==null?{id:zi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},a=Qm(i),a.return=s,s.child=a,on=s,Tt=null)):i=null,i===null)throw $o(s);return s.lanes=536870912,null}return Hu(s,c)}var v=i.memoizedState;if(v!==null){var A=v.dehydrated;if(lf(s),y)if(s.flags&256)s.flags&=-257,s=hy(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(Ht||Lr(i,s,a,!1),y=(a&i.childLanes)!==0,Ht||y){if(c=mt,c!==null&&(A=pe(c,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,Ks(i,A),On(c,i,A),If;ec(),s=hy(i,s,a)}else i=v.treeContext,Tt=gi(A.nextSibling),on=s,$e=!0,jo=null,pi=!1,i!==null&&Zm(s,i),s=Hu(s,c),s.flags|=4096;return s}return i=co(i.child,{mode:c.mode,children:c.children}),i.ref=s.ref,s.child=i,i.return=s,i}function zu(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function Nf(i,s,a,c,y){return Xs(s),a=cf(i,s,a,c,void 0,y),c=df(),i!==null&&!Ht?(ff(i,s,y),yo(i,s,y)):($e&&c&&zd(s),s.flags|=1,rn(i,s,a,y),s.child)}function py(i,s,a,c,y,v){return Xs(s),s.updateQueue=null,a=yg(s,c,a,y),gg(i),c=df(),i!==null&&!Ht?(ff(i,s,v),yo(i,s,v)):($e&&c&&zd(s),s.flags|=1,rn(i,s,a,v),s.child)}function my(i,s,a,c,y){if(Xs(s),s.stateNode===null){var v=Pr,A=a.contextType;typeof A=="object"&&A!==null&&(v=sn(A)),v=new a(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=wf,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},tf(s),A=a.contextType,v.context=typeof A=="object"&&A!==null?sn(A):Pr,v.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Cf(s,a,A,c),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&wf.enqueueReplaceState(v,v.state,null),Xa(s,c,v,y),Qa(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){v=s.stateNode;var w=s.memoizedProps,B=ir(a,w);v.props=B;var $=v.context,ne=a.contextType;A=Pr,typeof ne=="object"&&ne!==null&&(A=sn(ne));var re=a.getDerivedStateFromProps;ne=typeof re=="function"||typeof v.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,ne||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w||$!==A)&&ty(s,v,c,A),Xo=!1;var Q=s.memoizedState;v.state=Q,Xa(s,c,v,y),Qa(),$=s.memoizedState,w||Q!==$||Xo?(typeof re=="function"&&(Cf(s,a,re,c),$=s.memoizedState),(B=Xo||ey(s,a,B,c,Q,$,A))?(ne||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=$),v.props=c,v.state=$,v.context=A,c=B):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,nf(i,s),A=s.memoizedProps,ne=ir(a,A),v.props=ne,re=s.pendingProps,Q=v.context,$=a.contextType,B=Pr,typeof $=="object"&&$!==null&&(B=sn($)),w=a.getDerivedStateFromProps,($=typeof w=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==re||Q!==B)&&ty(s,v,c,B),Xo=!1,Q=s.memoizedState,v.state=Q,Xa(s,c,v,y),Qa();var Z=s.memoizedState;A!==re||Q!==Z||Xo||i!==null&&i.dependencies!==null&&xu(i.dependencies)?(typeof w=="function"&&(Cf(s,a,w,c),Z=s.memoizedState),(ne=Xo||ey(s,a,ne,c,Q,Z,B)||i!==null&&i.dependencies!==null&&xu(i.dependencies))?($||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Z,B),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Z,B)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Z),v.props=c,v.state=Z,v.context=B,c=ne):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),c=!1)}return v=c,zu(i,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,i!==null&&c?(s.child=tr(s,i.child,null,y),s.child=tr(s,null,a,y)):rn(i,s,a,y),s.memoizedState=v.state,i=s.child):i=yo(i,s,y),i}function gy(i,s,a,c){return $s(),s.flags|=256,rn(i,s,a,c),s.child}var Mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Df(i){return{baseLanes:i,cachePool:sg()}}function Pf(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=Wn),i}function yy(i,s,a){var c=s.pendingProps,y=!1,v=(s.flags&128)!==0,A;if((A=v)||(A=i!==null&&i.memoizedState===null?!1:(Vt.current&2)!==0),A&&(y=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if($e){if(y?es(s):ts(),(i=Tt)?(i=xv(i,pi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Ko!==null?{id:zi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},a=Qm(i),a.return=s,s.child=a,on=s,Tt=null)):i=null,i===null)throw $o(s);return mh(i)?s.lanes=32:s.lanes=536870912,null}var w=c.children;return c=c.fallback,y?(ts(),y=s.mode,w=Yu({mode:"hidden",children:w},y),c=js(c,y,a,null),w.return=s,c.return=s,w.sibling=c,s.child=w,c=s.child,c.memoizedState=Df(a),c.childLanes=Pf(i,A,a),s.memoizedState=Mf,nl(null,c)):(es(s),Uf(s,w))}var B=i.memoizedState;if(B!==null&&(w=B.dehydrated,w!==null)){if(v)s.flags&256?(es(s),s.flags&=-257,s=Vf(i,s,a)):s.memoizedState!==null?(ts(),s.child=i.child,s.flags|=128,s=null):(ts(),w=c.fallback,y=s.mode,c=Yu({mode:"visible",children:c.children},y),w=js(w,y,a,null),w.flags|=2,c.return=s,w.return=s,c.sibling=w,s.child=c,tr(s,i.child,null,a),c=s.child,c.memoizedState=Df(a),c.childLanes=Pf(i,A,a),s.memoizedState=Mf,s=nl(null,c));else if(es(s),mh(w)){if(A=w.nextSibling&&w.nextSibling.dataset,A)var $=A.dgst;A=$,c=Error(o(419)),c.stack="",c.digest=A,za({value:c,source:null,stack:null}),s=Vf(i,s,a)}else if(Ht||Lr(i,s,a,!1),A=(a&i.childLanes)!==0,Ht||A){if(A=mt,A!==null&&(c=pe(A,a),c!==0&&c!==B.retryLane))throw B.retryLane=c,Ks(i,c),On(A,i,c),If;ph(w)||ec(),s=Vf(i,s,a)}else ph(w)?(s.flags|=192,s.child=i.child,s=null):(i=B.treeContext,Tt=gi(w.nextSibling),on=s,$e=!0,jo=null,pi=!1,i!==null&&Zm(s,i),s=Uf(s,c.children),s.flags|=4096);return s}return y?(ts(),w=c.fallback,y=s.mode,B=i.child,$=B.sibling,c=co(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,$!==null?w=co($,w):(w=js(w,y,a,null),w.flags|=2),w.return=s,c.return=s,c.sibling=w,s.child=c,nl(null,c),c=s.child,w=i.child.memoizedState,w===null?w=Df(a):(y=w.cachePool,y!==null?(B=Ft._currentValue,y=y.parent!==B?{parent:B,pool:B}:y):y=sg(),w={baseLanes:w.baseLanes|a,cachePool:y}),c.memoizedState=w,c.childLanes=Pf(i,A,a),s.memoizedState=Mf,nl(i.child,c)):(es(s),a=i.child,i=a.sibling,a=co(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=a,s.memoizedState=null,a)}function Uf(i,s){return s=Yu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Yu(i,s){return i=jn(22,i,null,s),i.lanes=0,i}function Vf(i,s,a){return tr(s,i.child,null,a),i=Uf(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function vy(i,s,a){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),$d(i.return,s,a)}function kf(i,s,a,c,y,v){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function _y(i,s,a){var c=s.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Vt.current,w=(A&2)!==0;if(w?(A=A&1|2,s.flags|=128):A&=1,fe(Vt,A),rn(i,s,c,a),c=$e?Ha:0,!w&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vy(i,a,s);else if(i.tag===19)vy(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=s.child,y=null;a!==null;)i=a.alternate,i!==null&&Pu(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=s.child,s.child=null):(y=a.sibling,a.sibling=null),kf(s,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&Pu(i)===null){s.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}kf(s,!0,a,null,v,c);break;case"together":kf(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function yo(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),os|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(Lr(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,a=co(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=co(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function Lf(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&xu(i)))}function iA(i,s,a){switch(s.tag){case 3:At(s,s.stateNode.containerInfo),Qo(s,Ft,i.memoizedState.cache),$s();break;case 27:case 5:oi(s);break;case 4:At(s,s.stateNode.containerInfo);break;case 10:Qo(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,lf(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(es(s),s.flags|=128,null):(a&s.child.childLanes)!==0?yy(i,s,a):(es(s),i=yo(i,s,a),i!==null?i.sibling:null);es(s);break;case 19:var y=(i.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(Lr(i,s,a,!1),c=(a&s.childLanes)!==0),y){if(c)return _y(i,s,a);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),fe(Vt,Vt.current),c)break;return null;case 22:return s.lanes=0,dy(i,s,a,s.pendingProps);case 24:Qo(s,Ft,i.memoizedState.cache)}return yo(i,s,a)}function Ty(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)Ht=!0;else{if(!Lf(i,a)&&(s.flags&128)===0)return Ht=!1,iA(i,s,a);Ht=(i.flags&131072)!==0}else Ht=!1,$e&&(s.flags&1048576)!==0&&Wm(s,Ha,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(i=Zs(s.elementType),s.type=i,typeof i=="function")Fd(i)?(c=ir(i,c),s.tag=1,s=my(null,s,i,c,a)):(s.tag=0,s=Nf(null,s,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===X){s.tag=11,s=ly(null,s,i,c,a);break e}else if(y===D){s.tag=14,s=uy(null,s,i,c,a);break e}}throw s=Ne(i)||i,Error(o(306,s,""))}}return s;case 0:return Nf(i,s,s.type,s.pendingProps,a);case 1:return c=s.type,y=ir(c,s.pendingProps),my(i,s,c,y,a);case 3:e:{if(At(s,s.stateNode.containerInfo),i===null)throw Error(o(387));c=s.pendingProps;var v=s.memoizedState;y=v.element,nf(i,s),Xa(s,c,null,a);var A=s.memoizedState;if(c=A.cache,Qo(s,Ft,c),c!==v.cache&&Qd(s,[Ft],a,!0),Qa(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=gy(i,s,c,a);break e}else if(c!==y){y=di(Error(o(424)),s),za(y),s=gy(i,s,c,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Tt=gi(i.firstChild),on=s,$e=!0,jo=null,pi=!0,a=dg(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if($s(),c===y){s=yo(i,s,a);break e}rn(i,s,c,a)}s=s.child}return s;case 26:return zu(i,s),i===null?(a=Mv(s.type,null,s.pendingProps,null))?s.memoizedState=a:$e||(a=s.type,i=s.pendingProps,c=ac(Be.current).createElement(a),c[vt]=s,c[Bt]=i,an(c,a,i),Ut(c),s.stateNode=c):s.memoizedState=Mv(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return oi(s),i===null&&$e&&(c=s.stateNode=Rv(s.type,s.pendingProps,Be.current),on=s,pi=!0,y=Tt,us(s.type)?(gh=y,Tt=gi(c.firstChild)):Tt=y),rn(i,s,s.pendingProps.children,a),zu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&$e&&((y=c=Tt)&&(c=PA(c,s.type,s.pendingProps,pi),c!==null?(s.stateNode=c,on=s,Tt=gi(c.firstChild),pi=!1,y=!0):y=!1),y||$o(s)),oi(s),y=s.type,v=s.pendingProps,A=i!==null?i.memoizedProps:null,c=v.children,dh(y,v)?c=null:A!==null&&dh(y,A)&&(s.flags|=32),s.memoizedState!==null&&(y=cf(i,s,jb,null,null,a),yl._currentValue=y),zu(i,s),rn(i,s,c,a),s.child;case 6:return i===null&&$e&&((i=a=Tt)&&(a=UA(a,s.pendingProps,pi),a!==null?(s.stateNode=a,on=s,Tt=null,i=!0):i=!1),i||$o(s)),null;case 13:return yy(i,s,a);case 4:return At(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=tr(s,null,c,a):rn(i,s,c,a),s.child;case 11:return ly(i,s,s.type,s.pendingProps,a);case 7:return rn(i,s,s.pendingProps,a),s.child;case 8:return rn(i,s,s.pendingProps.children,a),s.child;case 12:return rn(i,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Qo(s,s.type,c.value),rn(i,s,c.children,a),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,Xs(s),y=sn(y),c=c(y),s.flags|=1,rn(i,s,c,a),s.child;case 14:return uy(i,s,s.type,s.pendingProps,a);case 15:return cy(i,s,s.type,s.pendingProps,a);case 19:return _y(i,s,a);case 31:return nA(i,s,a);case 22:return dy(i,s,a,s.pendingProps);case 24:return Xs(s),c=sn(Ft),i===null?(y=Zd(),y===null&&(y=mt,v=Xd(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),s.memoizedState={parent:c,cache:y},tf(s),Qo(s,Ft,y)):((i.lanes&a)!==0&&(nf(i,s),Xa(s,null,null,a),Qa()),y=i.memoizedState,v=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Qo(s,Ft,c)):(c=v.cache,Qo(s,Ft,c),c!==y.cache&&Qd(s,[Ft],a,!0))),rn(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function vo(i){i.flags|=4}function Of(i,s,a,c,y){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(Ky())i.flags|=8192;else throw er=Iu,ef}else i.flags&=-16777217}function Ey(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!kv(s))if(Ky())i.flags|=8192;else throw er=Iu,ef}function Ju(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Ps():536870912,i.lanes|=s,$r|=s)}function il(i,s){if(!$e)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Et(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(s)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,s}function oA(i,s,a){var c=s.pendingProps;switch(Yd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(s),null;case 1:return Et(s),null;case 3:return a=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),po(Ft),ct(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(kr(s)?vo(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Kd())),Et(s),null;case 26:var y=s.type,v=s.memoizedState;return i===null?(vo(s),v!==null?(Et(s),Ey(s,v)):(Et(s),Of(s,y,null,c,a))):v?v!==i.memoizedState?(vo(s),Et(s),Ey(s,v)):(Et(s),s.flags&=-16777217):(i=i.memoizedProps,i!==c&&vo(s),Et(s),Of(s,y,i,c,a)),null;case 27:if(Gn(s),a=Be.current,y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&vo(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return Et(s),null}i=Te.current,kr(s)?eg(s):(i=Rv(y,c,a),s.stateNode=i,vo(s))}return Et(s),null;case 5:if(Gn(s),y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&vo(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return Et(s),null}if(v=Te.current,kr(s))eg(s);else{var A=ac(Be.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[vt]=s,v[Bt]=c;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=v;e:switch(an(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&vo(s)}}return Et(s),Of(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&vo(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(o(166));if(i=Be.current,kr(s)){if(i=s.stateNode,a=s.memoizedProps,c=null,y=on,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[vt]=s,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||yv(i.nodeValue,a)),i||$o(s,!0)}else i=ac(i).createTextNode(c),i[vt]=s,s.stateNode=i}return Et(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(c=kr(s),a!==null){if(i===null){if(!c)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[vt]=s}else $s(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),i=!1}else a=Kd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(Qn(s),s):(Qn(s),null);if((s.flags&128)!==0)throw Error(o(558))}return Et(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=kr(s),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(o(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[vt]=s}else $s(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),y=!1}else y=Kd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Qn(s),s):(Qn(s),null)}return Qn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),Ju(s,s.updateQueue),Et(s),null);case 4:return ct(),i===null&&rh(s.stateNode.containerInfo),Et(s),null;case 10:return po(s.type),Et(s),null;case 19:if(ie(Vt),c=s.memoizedState,c===null)return Et(s),null;if(y=(s.flags&128)!==0,v=c.rendering,v===null)if(y)il(c,!1);else{if(Nt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(v=Pu(i),v!==null){for(s.flags|=128,il(c,!1),i=v.updateQueue,s.updateQueue=i,Ju(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)$m(a,i),a=a.sibling;return fe(Vt,Vt.current&1|2),$e&&fo(s,c.treeForkCount),s.child}i=i.sibling}c.tail!==null&&Ot()>Xu&&(s.flags|=128,y=!0,il(c,!1),s.lanes=4194304)}else{if(!y)if(i=Pu(v),i!==null){if(s.flags|=128,y=!0,i=i.updateQueue,s.updateQueue=i,Ju(s,i),il(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!$e)return Et(s),null}else 2*Ot()-c.renderingStartTime>Xu&&a!==536870912&&(s.flags|=128,y=!0,il(c,!1),s.lanes=4194304);c.isBackwards?(v.sibling=s.child,s.child=v):(i=c.last,i!==null?i.sibling=v:s.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=Ot(),i.sibling=null,a=Vt.current,fe(Vt,y?a&1|2:a&1),$e&&fo(s,c.treeForkCount),i):(Et(s),null);case 22:case 23:return Qn(s),af(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(Et(s),s.subtreeFlags&6&&(s.flags|=8192)):Et(s),a=s.updateQueue,a!==null&&Ju(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),i!==null&&ie(Ws),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),po(Ft),Et(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function sA(i,s){switch(Yd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return po(Ft),ct(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Gn(s),null;case 31:if(s.memoizedState!==null){if(Qn(s),s.alternate===null)throw Error(o(340));$s()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Qn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));$s()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ie(Vt),null;case 4:return ct(),null;case 10:return po(s.type),null;case 22:case 23:return Qn(s),af(),i!==null&&ie(Ws),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return po(Ft),null;case 25:return null;default:return null}}function Sy(i,s){switch(Yd(s),s.tag){case 3:po(Ft),ct();break;case 26:case 27:case 5:Gn(s);break;case 4:ct();break;case 31:s.memoizedState!==null&&Qn(s);break;case 13:Qn(s);break;case 19:ie(Vt);break;case 10:po(s.type);break;case 22:case 23:Qn(s),af(),i!==null&&ie(Ws);break;case 24:po(Ft)}}function ol(i,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var v=a.create,A=a.inst;c=v(),A.destroy=c}a=a.next}while(a!==y)}}catch(w){lt(s,s.return,w)}}function ns(i,s,a){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&i)===i){var A=c.inst,w=A.destroy;if(w!==void 0){A.destroy=void 0,y=s;var B=a,$=w;try{$()}catch(ne){lt(y,B,ne)}}}c=c.next}while(c!==v)}}catch(ne){lt(s,s.return,ne)}}function by(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{hg(s,a)}catch(c){lt(i,i.return,c)}}}function Ay(i,s,a){a.props=ir(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){lt(i,s,c)}}function sl(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){lt(i,s,y)}}function Ji(i,s){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){lt(i,s,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){lt(i,s,y)}else a.current=null}function xy(i){var s=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){lt(i,i.return,y)}}function Bf(i,s,a){try{var c=i.stateNode;wA(c,i.type,a,s),c[Bt]=s}catch(y){lt(i,i.return,y)}}function Cy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&us(i.type)||i.tag===4}function Gf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Cy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&us(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ff(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Xt));else if(c!==4&&(c===27&&us(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(Ff(i,s,a),i=i.sibling;i!==null;)Ff(i,s,a),i=i.sibling}function Ku(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(c!==4&&(c===27&&us(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Ku(i,s,a),i=i.sibling;i!==null;)Ku(i,s,a),i=i.sibling}function wy(i){var s=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);an(s,c,a),s[vt]=i,s[Bt]=a}catch(v){lt(i,i.return,v)}}var _o=!1,zt=!1,qf=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,en=null;function rA(i,s){if(i=i.containerInfo,uh=pc,i=Gm(i),Ud(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,w=-1,B=-1,$=0,ne=0,re=i,Q=null;t:for(;;){for(var Z;re!==a||y!==0&&re.nodeType!==3||(w=A+y),re!==v||c!==0&&re.nodeType!==3||(B=A+c),re.nodeType===3&&(A+=re.nodeValue.length),(Z=re.firstChild)!==null;)Q=re,re=Z;for(;;){if(re===i)break t;if(Q===a&&++$===y&&(w=A),Q===v&&++ne===c&&(B=A),(Z=re.nextSibling)!==null)break;re=Q,Q=re.parentNode}re=Z}a=w===-1||B===-1?null:{start:w,end:B}}else a=null}a=a||{start:0,end:0}}else a=null;for(ch={focusedElem:i,selectionRange:a},pc=!1,en=s;en!==null;)if(s=en,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,en=i;else for(;en!==null;){switch(s=en,v=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=s,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var Se=ir(a.type,y);i=c.getSnapshotBeforeUpdate(Se,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(Ie){lt(a,a.return,Ie)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)hh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":hh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,en=i;break}en=s.return}}function Iy(i,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Eo(i,a),c&4&&ol(5,a);break;case 1:if(Eo(i,a),c&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(A){lt(a,a.return,A)}else{var y=ir(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(y,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){lt(a,a.return,A)}}c&64&&by(a),c&512&&sl(a,a.return);break;case 3:if(Eo(i,a),c&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{hg(i,s)}catch(A){lt(a,a.return,A)}}break;case 27:s===null&&c&4&&wy(a);case 26:case 5:Eo(i,a),s===null&&c&4&&xy(a),c&512&&sl(a,a.return);break;case 12:Eo(i,a);break;case 31:Eo(i,a),c&4&&Dy(i,a);break;case 13:Eo(i,a),c&4&&Py(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=mA.bind(null,a),VA(i,a))));break;case 22:if(c=a.memoizedState!==null||_o,!c){s=s!==null&&s.memoizedState!==null||zt,y=_o;var v=zt;_o=c,(zt=s)&&!v?So(i,a,(a.subtreeFlags&8772)!==0):Eo(i,a),_o=y,zt=v}break;case 30:break;default:Eo(i,a)}}function Ny(i){var s=i.alternate;s!==null&&(i.alternate=null,Ny(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Vs(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var St=null,Un=!1;function To(i,s,a){for(a=a.child;a!==null;)My(i,s,a),a=a.sibling}function My(i,s,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(qn,a)}catch{}switch(a.tag){case 26:zt||Ji(a,s),To(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:zt||Ji(a,s);var c=St,y=Un;us(a.type)&&(St=a.stateNode,Un=!1),To(i,s,a),pl(a.stateNode),St=c,Un=y;break;case 5:zt||Ji(a,s);case 6:if(c=St,y=Un,St=null,To(i,s,a),St=c,Un=y,St!==null)if(Un)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(a.stateNode)}catch(v){lt(a,s,v)}else try{St.removeChild(a.stateNode)}catch(v){lt(a,s,v)}break;case 18:St!==null&&(Un?(i=St,bv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),ia(i)):bv(St,a.stateNode));break;case 4:c=St,y=Un,St=a.stateNode.containerInfo,Un=!0,To(i,s,a),St=c,Un=y;break;case 0:case 11:case 14:case 15:ns(2,a,s),zt||ns(4,a,s),To(i,s,a);break;case 1:zt||(Ji(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Ay(a,s,c)),To(i,s,a);break;case 21:To(i,s,a);break;case 22:zt=(c=zt)||a.memoizedState!==null,To(i,s,a),zt=c;break;default:To(i,s,a)}}function Dy(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ia(i)}catch(a){lt(s,s.return,a)}}}function Py(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ia(i)}catch(a){lt(s,s.return,a)}}function aA(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Ry),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Ry),s;default:throw Error(o(435,i.tag))}}function ju(i,s){var a=aA(i);s.forEach(function(c){if(!a.has(c)){a.add(c);var y=gA.bind(null,i,c);c.then(y,y)}})}function Vn(i,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=i,A=s,w=A;e:for(;w!==null;){switch(w.tag){case 27:if(us(w.type)){St=w.stateNode,Un=!1;break e}break;case 5:St=w.stateNode,Un=!1;break e;case 3:case 4:St=w.stateNode.containerInfo,Un=!0;break e}w=w.return}if(St===null)throw Error(o(160));My(v,A,y),St=null,Un=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Uy(s,i),s=s.sibling}var Ci=null;function Uy(i,s){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Vn(s,i),kn(i),c&4&&(ns(3,i,i.return),ol(3,i),ns(5,i,i.return));break;case 1:Vn(s,i),kn(i),c&512&&(zt||a===null||Ji(a,a.return)),c&64&&_o&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=Ci;if(Vn(s,i),kn(i),c&512&&(zt||a===null||Ji(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[no]||v[vt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),an(v,c,a),v[vt]=i,Ut(v),c=v;break e;case"link":var A=Uv("link","href",y).get(c+(a.href||""));if(A){for(var w=0;w<A.length;w++)if(v=A[w],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(w,1);break t}}v=y.createElement(c),an(v,c,a),y.head.appendChild(v);break;case"meta":if(A=Uv("meta","content",y).get(c+(a.content||""))){for(w=0;w<A.length;w++)if(v=A[w],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(w,1);break t}}v=y.createElement(c),an(v,c,a),y.head.appendChild(v);break;default:throw Error(o(468,c))}v[vt]=i,Ut(v),c=v}i.stateNode=c}else Vv(y,i.type,i.stateNode);else i.stateNode=Pv(y,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?Vv(y,i.type,i.stateNode):Pv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Bf(i,i.memoizedProps,a.memoizedProps)}break;case 27:Vn(s,i),kn(i),c&512&&(zt||a===null||Ji(a,a.return)),a!==null&&c&4&&Bf(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Vn(s,i),kn(i),c&512&&(zt||a===null||Ji(a,a.return)),i.flags&32){y=i.stateNode;try{ui(y,"")}catch(Se){lt(i,i.return,Se)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Bf(i,y,a!==null?a.memoizedProps:y)),c&1024&&(qf=!0);break;case 6:if(Vn(s,i),kn(i),c&4){if(i.stateNode===null)throw Error(o(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(Se){lt(i,i.return,Se)}}break;case 3:if(cc=null,y=Ci,Ci=lc(s.containerInfo),Vn(s,i),Ci=y,kn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ia(s.containerInfo)}catch(Se){lt(i,i.return,Se)}qf&&(qf=!1,Vy(i));break;case 4:c=Ci,Ci=lc(i.stateNode.containerInfo),Vn(s,i),kn(i),Ci=c;break;case 12:Vn(s,i),kn(i);break;case 31:Vn(s,i),kn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ju(i,c)));break;case 13:Vn(s,i),kn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qu=Ot()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ju(i,c)));break;case 22:y=i.memoizedState!==null;var B=a!==null&&a.memoizedState!==null,$=_o,ne=zt;if(_o=$||y,zt=ne||B,Vn(s,i),zt=ne,_o=$,kn(i),c&8192)e:for(s=i.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(a===null||B||_o||zt||or(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){B=a=s;try{if(v=B.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{w=B.stateNode;var re=B.memoizedProps.style,Q=re!=null&&re.hasOwnProperty("display")?re.display:null;w.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Se){lt(B,B.return,Se)}}}else if(s.tag===6){if(a===null){B=s;try{B.stateNode.nodeValue=y?"":B.memoizedProps}catch(Se){lt(B,B.return,Se)}}}else if(s.tag===18){if(a===null){B=s;try{var Z=B.stateNode;y?Av(Z,!0):Av(B.stateNode,!1)}catch(Se){lt(B,B.return,Se)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,ju(i,a))));break;case 19:Vn(s,i),kn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ju(i,c)));break;case 30:break;case 21:break;default:Vn(s,i),kn(i)}}function kn(i){var s=i.flags;if(s&2){try{for(var a,c=i.return;c!==null;){if(Cy(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var y=a.stateNode,v=Gf(i);Ku(i,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(ui(A,""),a.flags&=-33);var w=Gf(i);Ku(i,w,A);break;case 3:case 4:var B=a.stateNode.containerInfo,$=Gf(i);Ff(i,$,B);break;default:throw Error(o(161))}}catch(ne){lt(i,i.return,ne)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Vy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Vy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Eo(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Iy(i,s.alternate,s),s=s.sibling}function or(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ns(4,s,s.return),or(s);break;case 1:Ji(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Ay(s,s.return,a),or(s);break;case 27:pl(s.stateNode);case 26:case 5:Ji(s,s.return),or(s);break;case 22:s.memoizedState===null&&or(s);break;case 30:or(s);break;default:or(s)}i=i.sibling}}function So(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=i,v=s,A=v.flags;switch(v.tag){case 0:case 11:case 15:So(y,v,a),ol(4,v);break;case 1:if(So(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch($){lt(c,c.return,$)}if(c=v,y=c.updateQueue,y!==null){var w=c.stateNode;try{var B=y.shared.hiddenCallbacks;if(B!==null)for(y.shared.hiddenCallbacks=null,y=0;y<B.length;y++)fg(B[y],w)}catch($){lt(c,c.return,$)}}a&&A&64&&by(v),sl(v,v.return);break;case 27:wy(v);case 26:case 5:So(y,v,a),a&&c===null&&A&4&&xy(v),sl(v,v.return);break;case 12:So(y,v,a);break;case 31:So(y,v,a),a&&A&4&&Dy(y,v);break;case 13:So(y,v,a),a&&A&4&&Py(y,v);break;case 22:v.memoizedState===null&&So(y,v,a),sl(v,v.return);break;case 30:break;default:So(y,v,a)}s=s.sibling}}function Hf(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Ya(a))}function zf(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ya(i))}function wi(i,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ky(i,s,a,c),s=s.sibling}function ky(i,s,a,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:wi(i,s,a,c),y&2048&&ol(9,s);break;case 1:wi(i,s,a,c);break;case 3:wi(i,s,a,c),y&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ya(i)));break;case 12:if(y&2048){wi(i,s,a,c),i=s.stateNode;try{var v=s.memoizedProps,A=v.id,w=v.onPostCommit;typeof w=="function"&&w(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(B){lt(s,s.return,B)}}else wi(i,s,a,c);break;case 31:wi(i,s,a,c);break;case 13:wi(i,s,a,c);break;case 23:break;case 22:v=s.stateNode,A=s.alternate,s.memoizedState!==null?v._visibility&2?wi(i,s,a,c):rl(i,s):v._visibility&2?wi(i,s,a,c):(v._visibility|=2,Jr(i,s,a,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&Hf(A,s);break;case 24:wi(i,s,a,c),y&2048&&zf(s.alternate,s);break;default:wi(i,s,a,c)}}function Jr(i,s,a,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=i,A=s,w=a,B=c,$=A.flags;switch(A.tag){case 0:case 11:case 15:Jr(v,A,w,B,y),ol(8,A);break;case 23:break;case 22:var ne=A.stateNode;A.memoizedState!==null?ne._visibility&2?Jr(v,A,w,B,y):rl(v,A):(ne._visibility|=2,Jr(v,A,w,B,y)),y&&$&2048&&Hf(A.alternate,A);break;case 24:Jr(v,A,w,B,y),y&&$&2048&&zf(A.alternate,A);break;default:Jr(v,A,w,B,y)}s=s.sibling}}function rl(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,c=s,y=c.flags;switch(c.tag){case 22:rl(a,c),y&2048&&Hf(c.alternate,c);break;case 24:rl(a,c),y&2048&&zf(c.alternate,c);break;default:rl(a,c)}s=s.sibling}}var al=8192;function Kr(i,s,a){if(i.subtreeFlags&al)for(i=i.child;i!==null;)Ly(i,s,a),i=i.sibling}function Ly(i,s,a){switch(i.tag){case 26:Kr(i,s,a),i.flags&al&&i.memoizedState!==null&&KA(a,Ci,i.memoizedState,i.memoizedProps);break;case 5:Kr(i,s,a);break;case 3:case 4:var c=Ci;Ci=lc(i.stateNode.containerInfo),Kr(i,s,a),Ci=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=al,al=16777216,Kr(i,s,a),al=c):Kr(i,s,a));break;default:Kr(i,s,a)}}function Oy(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function ll(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];en=c,Gy(c,i)}Oy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)By(i),i=i.sibling}function By(i){switch(i.tag){case 0:case 11:case 15:ll(i),i.flags&2048&&ns(9,i,i.return);break;case 3:ll(i);break;case 12:ll(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,$u(i)):ll(i);break;default:ll(i)}}function $u(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];en=c,Gy(c,i)}Oy(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ns(8,s,s.return),$u(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,$u(s));break;default:$u(s)}i=i.sibling}}function Gy(i,s){for(;en!==null;){var a=en;switch(a.tag){case 0:case 11:case 15:ns(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ya(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,en=c;else e:for(a=i;en!==null;){c=en;var y=c.sibling,v=c.return;if(Ny(c),c===a){en=null;break e}if(y!==null){y.return=v,en=y;break e}en=v}}}var lA={getCacheForType:function(i){var s=sn(Ft),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return sn(Ft).controller.signal}},uA=typeof WeakMap=="function"?WeakMap:Map,st=0,mt=null,qe=null,Je=0,at=0,Xn=null,is=!1,jr=!1,Yf=!1,bo=0,Nt=0,os=0,sr=0,Jf=0,Wn=0,$r=0,ul=null,Ln=null,Kf=!1,Qu=0,Fy=0,Xu=1/0,Wu=null,ss=null,Kt=0,rs=null,Qr=null,Ao=0,jf=0,$f=null,qy=null,cl=0,Qf=null;function Zn(){return(st&2)!==0&&Je!==0?Je&-Je:te.T!==null?nh():ge()}function Hy(){if(Wn===0)if((Je&536870912)===0||$e){var i=ai;ai<<=1,(ai&3932160)===0&&(ai=262144),Wn=i}else Wn=536870912;return i=$n.current,i!==null&&(i.flags|=32),Wn}function On(i,s,a){(i===mt&&(at===2||at===9)||i.cancelPendingCommit!==null)&&(Xr(i,0),as(i,Je,Wn,!1)),Ei(i,a),((st&2)===0||i!==mt)&&(i===mt&&((st&2)===0&&(sr|=a),Nt===4&&as(i,Je,Wn,!1)),Ki(i))}function zy(i,s,a){if((st&6)!==0)throw Error(o(327));var c=!a&&(s&127)===0&&(s&i.expiredLanes)===0||Bi(i,s),y=c?fA(i,s):Wf(i,s,!0),v=c;do{if(y===0){jr&&!c&&as(i,s,0,!1);break}else{if(a=i.current.alternate,v&&!cA(a)){y=Wf(i,s,!1),v=!1;continue}if(y===2){if(v=s,i.errorRecoveryDisabledLanes&v)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var w=i;y=ul;var B=w.current.memoizedState.isDehydrated;if(B&&(Xr(w,A).flags|=256),A=Wf(w,A,!1),A!==2){if(Yf&&!B){w.errorRecoveryDisabledLanes|=v,sr|=v,y=4;break e}v=Ln,Ln=y,v!==null&&(Ln===null?Ln=v:Ln.push.apply(Ln,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){Xr(i,0),as(i,s,0,!0);break}e:{switch(c=i,v=y,v){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:as(c,s,Wn,!is);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(y=Qu+300-Ot(),10<y)){if(as(c,s,Wn,!is),Nn(c,0,!0)!==0)break e;Ao=s,c.timeoutHandle=Ev(Yy.bind(null,c,a,Ln,Wu,Kf,s,Wn,sr,$r,is,v,"Throttled",-0,0),y);break e}Yy(c,a,Ln,Wu,Kf,s,Wn,sr,$r,is,v,null,-0,0)}}break}while(!0);Ki(i)}function Yy(i,s,a,c,y,v,A,w,B,$,ne,re,Q,Z){if(i.timeoutHandle=-1,re=s.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xt},Ly(s,v,re);var Se=(v&62914560)===v?Qu-Ot():(v&4194048)===v?Fy-Ot():0;if(Se=jA(re,Se),Se!==null){Ao=v,i.cancelPendingCommit=Se(Zy.bind(null,i,s,v,a,c,y,A,w,B,ne,re,null,Q,Z)),as(i,v,A,!$);return}}Zy(i,s,v,a,c,y,A,w,B)}function cA(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!Kn(v(),y))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function as(i,s,a,c){s&=~Jf,s&=~sr,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var y=s;0<y;){var v=31-fn(y),A=1<<v;c[v]=-1,y&=~A}a!==0&&ae(i,a,s)}function Zu(){return(st&6)===0?(dl(0),!1):!0}function Xf(){if(qe!==null){if(at===0)var i=qe.return;else i=qe,ho=Qs=null,hf(i),Fr=null,Ka=0,i=qe;for(;i!==null;)Sy(i.alternate,i),i=i.return;qe=null}}function Xr(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,NA(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Ao=0,Xf(),mt=i,qe=a=co(i.current,null),Je=s,at=0,Xn=null,is=!1,jr=Bi(i,s),Yf=!1,$r=Wn=Jf=sr=os=Nt=0,Ln=ul=null,Kf=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var y=31-fn(c),v=1<<y;s|=i[y],c&=~v}return bo=s,Tu(),a}function Jy(i,s){Oe=null,te.H=tl,s===Gr||s===Ru?(s=lg(),at=3):s===ef?(s=lg(),at=4):at=s===If?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Xn=s,qe===null&&(Nt=1,qu(i,di(s,i.current)))}function Ky(){var i=$n.current;return i===null?!0:(Je&4194048)===Je?mi===null:(Je&62914560)===Je||(Je&536870912)!==0?i===mi:!1}function jy(){var i=te.H;return te.H=tl,i===null?tl:i}function $y(){var i=te.A;return te.A=lA,i}function ec(){Nt=4,is||(Je&4194048)!==Je&&$n.current!==null||(jr=!0),(os&134217727)===0&&(sr&134217727)===0||mt===null||as(mt,Je,Wn,!1)}function Wf(i,s,a){var c=st;st|=2;var y=jy(),v=$y();(mt!==i||Je!==s)&&(Wu=null,Xr(i,s)),s=!1;var A=Nt;e:do try{if(at!==0&&qe!==null){var w=qe,B=Xn;switch(at){case 8:Xf(),A=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(s=!0);var $=at;if(at=0,Xn=null,Wr(i,w,B,$),a&&jr){A=0;break e}break;default:$=at,at=0,Xn=null,Wr(i,w,B,$)}}dA(),A=Nt;break}catch(ne){Jy(i,ne)}while(!0);return s&&i.shellSuspendCounter++,ho=Qs=null,st=c,te.H=y,te.A=v,qe===null&&(mt=null,Je=0,Tu()),A}function dA(){for(;qe!==null;)Qy(qe)}function fA(i,s){var a=st;st|=2;var c=jy(),y=$y();mt!==i||Je!==s?(Wu=null,Xu=Ot()+500,Xr(i,s)):jr=Bi(i,s);e:do try{if(at!==0&&qe!==null){s=qe;var v=Xn;t:switch(at){case 1:at=0,Xn=null,Wr(i,s,v,1);break;case 2:case 9:if(rg(v)){at=0,Xn=null,Xy(s);break}s=function(){at!==2&&at!==9||mt!==i||(at=7),Ki(i)},v.then(s,s);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:rg(v)?(at=0,Xn=null,Xy(s)):(at=0,Xn=null,Wr(i,s,v,7));break;case 5:var A=null;switch(qe.tag){case 26:A=qe.memoizedState;case 5:case 27:var w=qe;if(A?kv(A):w.stateNode.complete){at=0,Xn=null;var B=w.sibling;if(B!==null)qe=B;else{var $=w.return;$!==null?(qe=$,tc($)):qe=null}break t}}at=0,Xn=null,Wr(i,s,v,5);break;case 6:at=0,Xn=null,Wr(i,s,v,6);break;case 8:Xf(),Nt=6;break e;default:throw Error(o(462))}}hA();break}catch(ne){Jy(i,ne)}while(!0);return ho=Qs=null,te.H=c,te.A=y,st=a,qe!==null?0:(mt=null,Je=0,Tu(),Nt)}function hA(){for(;qe!==null&&!Vi();)Qy(qe)}function Qy(i){var s=Ty(i.alternate,i,bo);i.memoizedProps=i.pendingProps,s===null?tc(i):qe=s}function Xy(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=py(a,s,s.pendingProps,s.type,void 0,Je);break;case 11:s=py(a,s,s.pendingProps,s.type.render,s.ref,Je);break;case 5:hf(s);default:Sy(a,s),s=qe=$m(s,bo),s=Ty(a,s,bo)}i.memoizedProps=i.pendingProps,s===null?tc(i):qe=s}function Wr(i,s,a,c){ho=Qs=null,hf(s),Fr=null,Ka=0;var y=s.return;try{if(tA(i,y,s,a,Je)){Nt=1,qu(i,di(a,i.current)),qe=null;return}}catch(v){if(y!==null)throw qe=y,v;Nt=1,qu(i,di(a,i.current)),qe=null;return}s.flags&32768?($e||c===1?i=!0:jr||(Je&536870912)!==0?i=!1:(is=i=!0,(c===2||c===9||c===3||c===6)&&(c=$n.current,c!==null&&c.tag===13&&(c.flags|=16384))),Wy(s,i)):tc(s)}function tc(i){var s=i;do{if((s.flags&32768)!==0){Wy(s,is);return}i=s.return;var a=oA(s.alternate,s,bo);if(a!==null){qe=a;return}if(s=s.sibling,s!==null){qe=s;return}qe=s=i}while(s!==null);Nt===0&&(Nt=5)}function Wy(i,s){do{var a=sA(i.alternate,i);if(a!==null){a.flags&=32767,qe=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){qe=i;return}qe=i=a}while(i!==null);Nt=6,qe=null}function Zy(i,s,a,c,y,v,A,w,B){i.cancelPendingCommit=null;do nc();while(Kt!==0);if((st&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(v=s.lanes|s.childLanes,v|=Bd,P(i,a,v,A,w,B),i===mt&&(qe=mt=null,Je=0),Qr=s,rs=i,Ao=a,jf=v,$f=y,qy=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,yA(Fn,function(){return ov(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=te.T,te.T=null,y=he.p,he.p=2,A=st,st|=4;try{rA(i,s,a)}finally{st=A,he.p=y,te.T=c}}Kt=1,ev(),tv(),nv()}}function ev(){if(Kt===1){Kt=0;var i=rs,s=Qr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var c=he.p;he.p=2;var y=st;st|=4;try{Uy(s,i);var v=ch,A=Gm(i.containerInfo),w=v.focusedElem,B=v.selectionRange;if(A!==w&&w&&w.ownerDocument&&Bm(w.ownerDocument.documentElement,w)){if(B!==null&&Ud(w)){var $=B.start,ne=B.end;if(ne===void 0&&(ne=$),"selectionStart"in w)w.selectionStart=$,w.selectionEnd=Math.min(ne,w.value.length);else{var re=w.ownerDocument||document,Q=re&&re.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Se=w.textContent.length,Ie=Math.min(B.start,Se),ht=B.end===void 0?Ie:Math.min(B.end,Se);!Z.extend&&Ie>ht&&(A=ht,ht=Ie,Ie=A);var J=Om(w,Ie),F=Om(w,ht);if(J&&F&&(Z.rangeCount!==1||Z.anchorNode!==J.node||Z.anchorOffset!==J.offset||Z.focusNode!==F.node||Z.focusOffset!==F.offset)){var j=re.createRange();j.setStart(J.node,J.offset),Z.removeAllRanges(),Ie>ht?(Z.addRange(j),Z.extend(F.node,F.offset)):(j.setEnd(F.node,F.offset),Z.addRange(j))}}}}for(re=[],Z=w;Z=Z.parentNode;)Z.nodeType===1&&re.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<re.length;w++){var oe=re[w];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}pc=!!uh,ch=uh=null}finally{st=y,he.p=c,te.T=a}}i.current=s,Kt=2}}function tv(){if(Kt===2){Kt=0;var i=rs,s=Qr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var c=he.p;he.p=2;var y=st;st|=4;try{Iy(i,s.alternate,s)}finally{st=y,he.p=c,te.T=a}}Kt=3}}function nv(){if(Kt===4||Kt===3){Kt=0,ki();var i=rs,s=Qr,a=Ao,c=qy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Kt=5:(Kt=0,Qr=rs=null,iv(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(ss=null),ye(a),s=s.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(qn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=te.T,y=he.p,he.p=2,te.T=null;try{for(var v=i.onRecoverableError,A=0;A<c.length;A++){var w=c[A];v(w.value,{componentStack:w.stack})}}finally{te.T=s,he.p=y}}(Ao&3)!==0&&nc(),Ki(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Qf?cl++:(cl=0,Qf=i):cl=0,dl(0)}}function iv(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Ya(s)))}function nc(){return ev(),tv(),nv(),ov()}function ov(){if(Kt!==5)return!1;var i=rs,s=jf;jf=0;var a=ye(Ao),c=te.T,y=he.p;try{he.p=32>a?32:a,te.T=null,a=$f,$f=null;var v=rs,A=Ao;if(Kt=0,Qr=rs=null,Ao=0,(st&6)!==0)throw Error(o(331));var w=st;if(st|=4,By(v.current),ky(v,v.current,A,a),st=w,dl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(qn,v)}catch{}return!0}finally{he.p=y,te.T=c,iv(i,s)}}function sv(i,s,a){s=di(a,s),s=Rf(i.stateNode,s,2),i=Zo(i,s,2),i!==null&&(Ei(i,2),Ki(i))}function lt(i,s,a){if(i.tag===3)sv(i,i,a);else for(;s!==null;){if(s.tag===3){sv(s,i,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ss===null||!ss.has(c))){i=di(a,i),a=ry(2),c=Zo(s,a,2),c!==null&&(ay(a,c,s,i),Ei(c,2),Ki(c));break}}s=s.return}}function Zf(i,s,a){var c=i.pingCache;if(c===null){c=i.pingCache=new uA;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(a)||(Yf=!0,y.add(a),i=pA.bind(null,i,s,a),s.then(i,i))}function pA(i,s,a){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,mt===i&&(Je&a)===a&&(Nt===4||Nt===3&&(Je&62914560)===Je&&300>Ot()-Qu?(st&2)===0&&Xr(i,0):Jf|=a,$r===Je&&($r=0)),Ki(i)}function rv(i,s){s===0&&(s=Ps()),i=Ks(i,s),i!==null&&(Ei(i,s),Ki(i))}function mA(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),rv(i,a)}function gA(i,s){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(s),rv(i,a)}function yA(i,s){return eo(i,s)}var ic=null,Zr=null,eh=!1,oc=!1,th=!1,ls=0;function Ki(i){i!==Zr&&i.next===null&&(Zr===null?ic=Zr=i:Zr=Zr.next=i),oc=!0,eh||(eh=!0,_A())}function dl(i,s){if(!th&&oc){th=!0;do for(var a=!1,c=ic;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,w=c.pingedLanes;v=(1<<31-fn(42|i)+1)-1,v&=y&~(A&~w),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,cv(c,v))}else v=Je,v=Nn(c,c===mt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Bi(c,v)||(a=!0,cv(c,v));c=c.next}while(a);th=!1}}function vA(){av()}function av(){oc=eh=!1;var i=0;ls!==0&&IA()&&(i=ls);for(var s=Ot(),a=null,c=ic;c!==null;){var y=c.next,v=lv(c,s);v===0?(c.next=null,a===null?ic=y:a.next=y,y===null&&(Zr=a)):(a=c,(i!==0||(v&3)!==0)&&(oc=!0)),c=y}Kt!==0&&Kt!==5||dl(i),ls!==0&&(ls=0)}function lv(i,s){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var A=31-fn(v),w=1<<A,B=y[A];B===-1?((w&a)===0||(w&c)!==0)&&(y[A]=Po(w,s)):B<=s&&(i.expiredLanes|=w),v&=~w}if(s=mt,a=Je,a=Nn(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===s&&(at===2||at===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Xe(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Bi(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(c!==null&&Xe(c),ye(a)){case 2:case 8:a=Pt;break;case 32:a=Fn;break;case 268435456:a=Do;break;default:a=Fn}return c=uv.bind(null,i),a=eo(a,c),i.callbackPriority=s,i.callbackNode=a,s}return c!==null&&c!==null&&Xe(c),i.callbackPriority=2,i.callbackNode=null,2}function uv(i,s){if(Kt!==0&&Kt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(nc()&&i.callbackNode!==a)return null;var c=Je;return c=Nn(i,i===mt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(zy(i,c,s),lv(i,Ot()),i.callbackNode!=null&&i.callbackNode===a?uv.bind(null,i):null)}function cv(i,s){if(nc())return null;zy(i,s,!0)}function _A(){MA(function(){(st&6)!==0?eo(wt,vA):av()})}function nh(){if(ls===0){var i=Or;i===0&&(i=Li,Li<<=1,(Li&261888)===0&&(Li=256)),ls=i}return ls}function dv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Fi(""+i)}function fv(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function TA(i,s,a,c,y){if(s==="submit"&&a&&a.stateNode===y){var v=dv((y[Bt]||null).action),A=c.submitter;A&&(s=(s=A[Bt]||null)?dv(s.formAction):A.getAttribute("formAction"),s!==null&&(v=s,A=null));var w=new Gs("action","action",null,c,y);i.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ls!==0){var B=A?fv(y,A):new FormData(y);Sf(a,{pending:!0,data:B,method:y.method,action:v},null,B)}}else typeof v=="function"&&(w.preventDefault(),B=A?fv(y,A):new FormData(y),Sf(a,{pending:!0,data:B,method:y.method,action:v},v,B))},currentTarget:y}]})}}for(var ih=0;ih<Od.length;ih++){var oh=Od[ih],EA=oh.toLowerCase(),SA=oh[0].toUpperCase()+oh.slice(1);xi(EA,"on"+SA)}xi(Hm,"onAnimationEnd"),xi(zm,"onAnimationIteration"),xi(Ym,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(Ob,"onTransitionRun"),xi(Bb,"onTransitionStart"),xi(Gb,"onTransitionCancel"),xi(Jm,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),En("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),En("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),En("onBeforeInput",["compositionend","keypress","textInput","paste"]),En("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fl));function hv(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var v=void 0;if(s)for(var A=c.length-1;0<=A;A--){var w=c[A],B=w.instance,$=w.currentTarget;if(w=w.listener,B!==v&&y.isPropagationStopped())break e;v=w,y.currentTarget=$;try{v(y)}catch(ne){_u(ne)}y.currentTarget=null,v=B}else for(A=0;A<c.length;A++){if(w=c[A],B=w.instance,$=w.currentTarget,w=w.listener,B!==v&&y.isPropagationStopped())break e;v=w,y.currentTarget=$;try{v(y)}catch(ne){_u(ne)}y.currentTarget=null,v=B}}}}function He(i,s){var a=s[Mn];a===void 0&&(a=s[Mn]=new Set);var c=i+"__bubble";a.has(c)||(pv(s,i,2,!1),a.add(c))}function sh(i,s,a){var c=0;s&&(c|=4),pv(a,i,c,s)}var sc="_reactListening"+Math.random().toString(36).slice(2);function rh(i){if(!i[sc]){i[sc]=!0,Tr.forEach(function(a){a!=="selectionchange"&&(bA.has(a)||sh(a,!1,i),sh(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[sc]||(s[sc]=!0,sh("selectionchange",!1,s))}}function pv(i,s,a,c){switch(Hv(s)){case 2:var y=XA;break;case 8:y=WA;break;default:y=Eh}a=y.bind(null,s,a,i),y=void 0,!Ua||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(s,a,{capture:!0,passive:y}):i.addEventListener(s,a,!0):y!==void 0?i.addEventListener(s,a,{passive:y}):i.addEventListener(s,a,!1)}function ah(i,s,a,c,y){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var w=c.stateNode.containerInfo;if(w===y)break;if(A===4)for(A=c.return;A!==null;){var B=A.tag;if((B===3||B===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;w!==null;){if(A=io(w),A===null)return;if(B=A.tag,B===5||B===6||B===26||B===27){c=v=A;continue e}w=w.parentNode}}c=c.return}iu(function(){var $=v,ne=xr(a),re=[];e:{var Q=Km.get(i);if(Q!==void 0){var Z=Gs,Se=i;switch(i){case"keypress":if(Bs(a)===0)break e;case"keydown":case"keyup":Z=fu;break;case"focusin":Se="focus",Z=Ho;break;case"focusout":Se="blur",Z=Ho;break;case"beforeblur":case"afterblur":Z=Ho;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=su;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=pu;break;case Hm:case zm:case Ym:Z=Rr;break;case Jm:Z=Ir;break;case"scroll":case"scrollend":Z=ou;break;case"wheel":Z=gu;break;case"copy":case"cut":case"paste":Z=lu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Ba;break;case"toggle":case"beforetoggle":Z=Yo}var Ie=(s&4)!==0,ht=!Ie&&(i==="scroll"||i==="scrollend"),J=Ie?Q!==null?Q+"Capture":null:Q;Ie=[];for(var F=$,j;F!==null;){var oe=F;if(j=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||j===null||J===null||(oe=Dn(F,J),oe!=null&&Ie.push(hl(F,oe,j))),ht)break;F=F.return}0<Ie.length&&(Q=new Z(Q,Se,null,a,ne),re.push({event:Q,listeners:Ie}))}}if((s&7)===0){e:{if(Q=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",Q&&a!==Ar&&(Se=a.relatedTarget||a.fromElement)&&(io(Se)||Se[hn]))break e;if((Z||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Se=a.relatedTarget||a.toElement,Z=$,Se=Se?io(Se):null,Se!==null&&(ht=l(Se),Ie=Se.tag,Se!==ht||Ie!==5&&Ie!==27&&Ie!==6)&&(Se=null)):(Z=null,Se=$),Z!==Se)){if(Ie=su,oe="onMouseLeave",J="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=Ba,oe="onPointerLeave",J="onPointerEnter",F="pointer"),ht=Z==null?Q:ks(Z),j=Se==null?Q:ks(Se),Q=new Ie(oe,F+"leave",Z,a,ne),Q.target=ht,Q.relatedTarget=j,oe=null,io(ne)===$&&(Ie=new Ie(J,F+"enter",Se,a,ne),Ie.target=j,Ie.relatedTarget=ht,oe=Ie),ht=oe,Z&&Se)t:{for(Ie=AA,J=Z,F=Se,j=0,oe=J;oe;oe=Ie(oe))j++;oe=0;for(var we=F;we;we=Ie(we))oe++;for(;0<j-oe;)J=Ie(J),j--;for(;0<oe-j;)F=Ie(F),oe--;for(;j--;){if(J===F||F!==null&&J===F.alternate){Ie=J;break t}J=Ie(J),F=Ie(F)}Ie=null}else Ie=null;Z!==null&&mv(re,Q,Z,Ie,!1),Se!==null&&ht!==null&&mv(re,ht,Se,Ie,!0)}}e:{if(Q=$?ks($):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var et=Dm;else if(Pn(Q))if(Pm)et=Vb;else{et=Pb;var Ae=Db}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?$&&Da($.elementType)&&(et=Dm):et=Ub;if(et&&(et=et(i,$))){zs(re,et,a,ne);break e}Ae&&Ae(i,Q,$),i==="focusout"&&$&&Q.type==="number"&&$.memoizedProps.value!=null&&br(Q,"number",Q.value)}switch(Ae=$?ks($):window,i){case"focusin":(Pn(Ae)||Ae.contentEditable==="true")&&(Nr=Ae,Vd=$,qa=null);break;case"focusout":qa=Vd=Nr=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Fm(re,a,ne);break;case"selectionchange":if(Lb)break;case"keydown":case"keyup":Fm(re,a,ne)}var Ge;if(E)e:{switch(i){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Fe?rt(i,a)&&(Ke="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ke="onCompositionStart");Ke&&(K&&a.locale!=="ko"&&(Fe||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Fe&&(Ge=Bo()):(Jn=ne,Cr="value"in Jn?Jn.value:Jn.textContent,Fe=!0)),Ae=rc($,Ke),0<Ae.length&&(Ke=new ka(Ke,i,null,a,ne),re.push({event:Ke,listeners:Ae}),Ge?Ke.data=Ge:(Ge=Gt(a),Ge!==null&&(Ke.data=Ge)))),(Ge=R?Wt(i,a):Zt(i,a))&&(Ke=rc($,"onBeforeInput"),0<Ke.length&&(Ae=new ka("onBeforeInput","beforeinput",null,a,ne),re.push({event:Ae,listeners:Ke}),Ae.data=Ge)),TA(re,i,$,a,ne)}hv(re,s)})}function hl(i,s,a){return{instance:i,listener:s,currentTarget:a}}function rc(i,s){for(var a=s+"Capture",c=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Dn(i,a),y!=null&&c.unshift(hl(i,y,v)),y=Dn(i,s),y!=null&&c.push(hl(i,y,v))),i.tag===3)return c;i=i.return}return[]}function AA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function mv(i,s,a,c,y){for(var v=s._reactName,A=[];a!==null&&a!==c;){var w=a,B=w.alternate,$=w.stateNode;if(w=w.tag,B!==null&&B===c)break;w!==5&&w!==26&&w!==27||$===null||(B=$,y?($=Dn(a,v),$!=null&&A.unshift(hl(a,$,B))):y||($=Dn(a,v),$!=null&&A.push(hl(a,$,B)))),a=a.return}A.length!==0&&i.push({event:s,listeners:A})}var xA=/\r\n?/g,CA=/\u0000|\uFFFD/g;function gv(i){return(typeof i=="string"?i:""+i).replace(xA,`
`).replace(CA,"")}function yv(i,s){return s=gv(s),gv(i)===s}function ft(i,s,a,c,y,v){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||ui(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&ui(i,""+c);break;case"className":ko(i,"class",c);break;case"tabIndex":ko(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ko(i,a,c);break;case"style":tu(i,c,v);break;case"data":if(s!=="object"){ko(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Fi(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&ft(i,s,"name",y.name,y,null),ft(i,s,"formEncType",y.formEncType,y,null),ft(i,s,"formMethod",y.formMethod,y,null),ft(i,s,"formTarget",y.formTarget,y,null)):(ft(i,s,"encType",y.encType,y,null),ft(i,s,"method",y.method,y,null),ft(i,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Fi(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Xt);break;case"onScroll":c!=null&&He("scroll",i);break;case"onScrollEnd":c!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Fi(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":He("beforetoggle",i),He("toggle",i),Vo(i,"popover",c);break;case"xlinkActuate":li(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":li(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":li(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":li(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":li(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":li(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":li(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":li(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":li(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Vo(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Id.get(a)||a,Vo(i,a,c))}}function lh(i,s,a,c,y,v){switch(a){case"style":tu(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof c=="string"?ui(i,c):(typeof c=="number"||typeof c=="bigint")&&ui(i,""+c);break;case"onScroll":c!=null&&He("scroll",i);break;case"onScrollEnd":c!=null&&He("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Xt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),s=a.slice(2,y?a.length-7:void 0),v=i[Bt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(s,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Vo(i,a,c)}}}function an(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ft(i,s,v,A,a,null)}}y&&ft(i,s,"srcSet",a.srcSet,a,null),c&&ft(i,s,"src",a.src,a,null);return;case"input":He("invalid",i);var w=v=A=y=null,B=null,$=null;for(c in a)if(a.hasOwnProperty(c)){var ne=a[c];if(ne!=null)switch(c){case"name":y=ne;break;case"type":A=ne;break;case"checked":B=ne;break;case"defaultChecked":$=ne;break;case"value":v=ne;break;case"defaultValue":w=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,s));break;default:ft(i,s,c,ne,a,null)}}Ls(i,v,w,B,$,A,y,!1);return;case"select":He("invalid",i),c=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(w=a[y],w!=null))switch(y){case"value":v=w;break;case"defaultValue":A=w;break;case"multiple":c=w;default:ft(i,s,y,w,a,null)}s=v,a=A,i.multiple=!!c,s!=null?Ze(i,!!c,s,!1):a!=null&&Ze(i,!!c,a,!0);return;case"textarea":He("invalid",i),v=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(w=a[A],w!=null))switch(A){case"value":c=w;break;case"defaultValue":y=w;break;case"children":v=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(o(91));break;default:ft(i,s,A,w,a,null)}Oo(i,c,y,v);return;case"option":for(B in a)if(a.hasOwnProperty(B)&&(c=a[B],c!=null))switch(B){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ft(i,s,B,c,a,null)}return;case"dialog":He("beforetoggle",i),He("toggle",i),He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(c=0;c<fl.length;c++)He(fl[c],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(c=a[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ft(i,s,$,c,a,null)}return;default:if(Da(s)){for(ne in a)a.hasOwnProperty(ne)&&(c=a[ne],c!==void 0&&lh(i,s,ne,c,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(c=a[w],c!=null&&ft(i,s,w,c,a,null))}function wA(i,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,w=null,B=null,$=null,ne=null;for(Z in a){var re=a[Z];if(a.hasOwnProperty(Z)&&re!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":B=re;default:c.hasOwnProperty(Z)||ft(i,s,Z,null,c,re)}}for(var Q in c){var Z=c[Q];if(re=a[Q],c.hasOwnProperty(Q)&&(Z!=null||re!=null))switch(Q){case"type":v=Z;break;case"name":y=Z;break;case"checked":$=Z;break;case"defaultChecked":ne=Z;break;case"value":A=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,s));break;default:Z!==re&&ft(i,s,Q,Z,c,re)}}Lo(i,A,w,B,$,ne,v,y);return;case"select":Z=A=w=Q=null;for(v in a)if(B=a[v],a.hasOwnProperty(v)&&B!=null)switch(v){case"value":break;case"multiple":Z=B;default:c.hasOwnProperty(v)||ft(i,s,v,null,c,B)}for(y in c)if(v=c[y],B=a[y],c.hasOwnProperty(y)&&(v!=null||B!=null))switch(y){case"value":Q=v;break;case"defaultValue":w=v;break;case"multiple":A=v;default:v!==B&&ft(i,s,y,v,c,B)}s=w,a=A,c=Z,Q!=null?Ze(i,!!a,Q,!1):!!c!=!!a&&(s!=null?Ze(i,!!a,s,!0):Ze(i,!!a,a?[]:"",!1));return;case"textarea":Z=Q=null;for(w in a)if(y=a[w],a.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ft(i,s,w,null,c,y)}for(A in c)if(y=c[A],v=a[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":Q=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==v&&ft(i,s,A,y,c,v)}Os(i,Q,Z);return;case"option":for(var Se in a)if(Q=a[Se],a.hasOwnProperty(Se)&&Q!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":i.selected=!1;break;default:ft(i,s,Se,null,c,Q)}for(B in c)if(Q=c[B],Z=a[B],c.hasOwnProperty(B)&&Q!==Z&&(Q!=null||Z!=null))switch(B){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ft(i,s,B,Q,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)Q=a[Ie],a.hasOwnProperty(Ie)&&Q!=null&&!c.hasOwnProperty(Ie)&&ft(i,s,Ie,null,c,Q);for($ in c)if(Q=c[$],Z=a[$],c.hasOwnProperty($)&&Q!==Z&&(Q!=null||Z!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,s));break;default:ft(i,s,$,Q,c,Z)}return;default:if(Da(s)){for(var ht in a)Q=a[ht],a.hasOwnProperty(ht)&&Q!==void 0&&!c.hasOwnProperty(ht)&&lh(i,s,ht,void 0,c,Q);for(ne in c)Q=c[ne],Z=a[ne],!c.hasOwnProperty(ne)||Q===Z||Q===void 0&&Z===void 0||lh(i,s,ne,Q,c,Z);return}}for(var J in a)Q=a[J],a.hasOwnProperty(J)&&Q!=null&&!c.hasOwnProperty(J)&&ft(i,s,J,null,c,Q);for(re in c)Q=c[re],Z=a[re],!c.hasOwnProperty(re)||Q===Z||Q==null&&Z==null||ft(i,s,re,Q,c,Z)}function vv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,A=y.initiatorType,w=y.duration;if(v&&w&&vv(A)){for(A=0,w=y.responseEnd,c+=1;c<a.length;c++){var B=a[c],$=B.startTime;if($>w)break;var ne=B.transferSize,re=B.initiatorType;ne&&vv(re)&&(B=B.responseEnd,A+=ne*(B<w?1:(w-$)/(B-$)))}if(--c,s+=8*(v+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var uh=null,ch=null;function ac(i){return i.nodeType===9?i:i.ownerDocument}function _v(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tv(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function dh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var fh=null;function IA(){var i=window.event;return i&&i.type==="popstate"?i===fh?!1:(fh=i,!0):(fh=null,!1)}var Ev=typeof setTimeout=="function"?setTimeout:void 0,NA=typeof clearTimeout=="function"?clearTimeout:void 0,Sv=typeof Promise=="function"?Promise:void 0,MA=typeof queueMicrotask=="function"?queueMicrotask:typeof Sv<"u"?function(i){return Sv.resolve(null).then(i).catch(DA)}:Ev;function DA(i){setTimeout(function(){throw i})}function us(i){return i==="head"}function bv(i,s){var a=s,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),ia(s);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")pl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,pl(a);for(var v=a.firstChild;v;){var A=v.nextSibling,w=v.nodeName;v[no]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&pl(i.ownerDocument.body);a=y}while(a);ia(s)}function Av(i,s){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function hh(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":hh(a),Vs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function PA(i,s,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[no])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=gi(i.nextSibling),i===null)break}return null}function UA(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=gi(i.nextSibling),i===null))return null;return i}function xv(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=gi(i.nextSibling),i===null))return null;return i}function ph(i){return i.data==="$?"||i.data==="$~"}function mh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function VA(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function gi(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var gh=null;function Cv(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return gi(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function wv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function Rv(i,s,a){switch(s=ac(a),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function pl(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Vs(i)}var yi=new Map,Iv=new Set;function lc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var xo=he.d;he.d={f:kA,r:LA,D:OA,C:BA,L:GA,m:FA,X:HA,S:qA,M:zA};function kA(){var i=xo.f(),s=Zu();return i||s}function LA(i){var s=oo(i);s!==null&&s.tag===5&&s.type==="form"?Jg(s):xo.r(i)}var ea=typeof document>"u"?null:document;function Nv(i,s,a){var c=ea;if(c&&typeof s=="string"&&s){var y=Rt(s);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),Iv.has(y)||(Iv.add(y),i={rel:i,crossOrigin:a,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),an(s,"link",i),Ut(s),c.head.appendChild(s)))}}function OA(i){xo.D(i),Nv("dns-prefetch",i,null)}function BA(i,s){xo.C(i,s),Nv("preconnect",i,s)}function GA(i,s,a){xo.L(i,s,a);var c=ea;if(c&&i&&s){var y='link[rel="preload"][as="'+Rt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+Rt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+Rt(a.imageSizes)+'"]')):y+='[href="'+Rt(i)+'"]';var v=y;switch(s){case"style":v=ta(i);break;case"script":v=na(i)}yi.has(v)||(i=S({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),yi.set(v,i),c.querySelector(y)!==null||s==="style"&&c.querySelector(ml(v))||s==="script"&&c.querySelector(gl(v))||(s=c.createElement("link"),an(s,"link",i),Ut(s),c.head.appendChild(s)))}}function FA(i,s){xo.m(i,s);var a=ea;if(a&&i){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+Rt(c)+'"][href="'+Rt(i)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=na(i)}if(!yi.has(v)&&(i=S({rel:"modulepreload",href:i},s),yi.set(v,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(gl(v)))return}c=a.createElement("link"),an(c,"link",i),Ut(c),a.head.appendChild(c)}}}function qA(i,s,a){xo.S(i,s,a);var c=ea;if(c&&i){var y=bi(c).hoistableStyles,v=ta(i);s=s||"default";var A=y.get(v);if(!A){var w={loading:0,preload:null};if(A=c.querySelector(ml(v)))w.loading=5;else{i=S({rel:"stylesheet",href:i,"data-precedence":s},a),(a=yi.get(v))&&yh(i,a);var B=A=c.createElement("link");Ut(B),an(B,"link",i),B._p=new Promise(function($,ne){B.onload=$,B.onerror=ne}),B.addEventListener("load",function(){w.loading|=1}),B.addEventListener("error",function(){w.loading|=2}),w.loading|=4,uc(A,s,c)}A={type:"stylesheet",instance:A,count:1,state:w},y.set(v,A)}}}function HA(i,s){xo.X(i,s);var a=ea;if(a&&i){var c=bi(a).hoistableScripts,y=na(i),v=c.get(y);v||(v=a.querySelector(gl(y)),v||(i=S({src:i,async:!0},s),(s=yi.get(y))&&vh(i,s),v=a.createElement("script"),Ut(v),an(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function zA(i,s){xo.M(i,s);var a=ea;if(a&&i){var c=bi(a).hoistableScripts,y=na(i),v=c.get(y);v||(v=a.querySelector(gl(y)),v||(i=S({src:i,async:!0,type:"module"},s),(s=yi.get(y))&&vh(i,s),v=a.createElement("script"),Ut(v),an(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function Mv(i,s,a,c){var y=(y=Be.current)?lc(y):null;if(!y)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=ta(a.href),a=bi(y).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=ta(a.href);var v=bi(y).hoistableStyles,A=v.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,A),(v=y.querySelector(ml(i)))&&!v._p&&(A.instance=v,A.state.loading=5),yi.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},yi.set(i,a),v||YA(y,i,a,A.state))),s&&c===null)throw Error(o(528,""));return A}if(s&&c!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=na(a),a=bi(y).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function ta(i){return'href="'+Rt(i)+'"'}function ml(i){return'link[rel="stylesheet"]['+i+"]"}function Dv(i){return S({},i,{"data-precedence":i.precedence,precedence:null})}function YA(i,s,a,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),an(s,"link",a),Ut(s),i.head.appendChild(s))}function na(i){return'[src="'+Rt(i)+'"]'}function gl(i){return"script[async]"+i}function Pv(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+Rt(a.href)+'"]');if(c)return s.instance=c,Ut(c),c;var y=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Ut(c),an(c,"style",y),uc(c,a.precedence,i),s.instance=c;case"stylesheet":y=ta(a.href);var v=i.querySelector(ml(y));if(v)return s.state.loading|=4,s.instance=v,Ut(v),v;c=Dv(a),(y=yi.get(y))&&yh(c,y),v=(i.ownerDocument||i).createElement("link"),Ut(v);var A=v;return A._p=new Promise(function(w,B){A.onload=w,A.onerror=B}),an(v,"link",c),s.state.loading|=4,uc(v,a.precedence,i),s.instance=v;case"script":return v=na(a.src),(y=i.querySelector(gl(v)))?(s.instance=y,Ut(y),y):(c=a,(y=yi.get(v))&&(c=S({},a),vh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Ut(y),an(y,"link",c),i.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,uc(c,a.precedence,i));return s.instance}function uc(i,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var w=c[A];if(w.dataset.precedence===s)v=w;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function yh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function vh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var cc=null;function Uv(i,s,a){if(cc===null){var c=new Map,y=cc=new Map;y.set(a,c)}else y=cc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[no]||v[vt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(s)||"";A=i+A;var w=c.get(A);w?w.push(v):c.set(A,[v])}}return c}function Vv(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function JA(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function kv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function KA(i,s,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=ta(c.href),v=s.querySelector(ml(y));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=dc.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=v,Ut(v);return}v=s.ownerDocument||s,c=Dv(c),(y=yi.get(y))&&yh(c,y),v=v.createElement("link"),Ut(v);var A=v;A._p=new Promise(function(w,B){A.onload=w,A.onerror=B}),an(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=dc.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var _h=0;function jA(i,s){return i.stylesheets&&i.count===0&&hc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&hc(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+s);0<i.imgBytes&&_h===0&&(_h=62500*RA());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&hc(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>_h?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function dc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var fc=null;function hc(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,fc=new Map,s.forEach($A,i),fc=null,dc.call(i))}function $A(i,s){if(!(s.state.loading&4)){var a=fc.get(i);if(a)var c=a.get(null);else{a=new Map,fc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=s.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||c,v===c&&a.set(null,y),a.set(A,y),this.count++,c=dc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),s.state.loading|=4}}var yl={$$typeof:z,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function QA(i,s,a,c,y,v,A,w,B){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Lv(i,s,a,c,y,v,A,w,B,$,ne,re){return i=new QA(i,s,a,A,B,$,ne,re,w),s=1,v===!0&&(s|=24),v=jn(3,null,null,s),i.current=v,v.stateNode=i,s=Xd(),s.refCount++,i.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:s},tf(v),i}function Ov(i){return i?(i=Pr,i):Pr}function Bv(i,s,a,c,y,v){y=Ov(y),c.context===null?c.context=y:c.pendingContext=y,c=Wo(s),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=Zo(i,c,s),a!==null&&(On(a,i,s),$a(a,i,s))}function Gv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Th(i,s){Gv(i,s),(i=i.alternate)&&Gv(i,s)}function Fv(i){if(i.tag===13||i.tag===31){var s=Ks(i,67108864);s!==null&&On(s,i,67108864),Th(i,67108864)}}function qv(i){if(i.tag===13||i.tag===31){var s=Zn();s=de(s);var a=Ks(i,s);a!==null&&On(a,i,s),Th(i,s)}}var pc=!0;function XA(i,s,a,c){var y=te.T;te.T=null;var v=he.p;try{he.p=2,Eh(i,s,a,c)}finally{he.p=v,te.T=y}}function WA(i,s,a,c){var y=te.T;te.T=null;var v=he.p;try{he.p=8,Eh(i,s,a,c)}finally{he.p=v,te.T=y}}function Eh(i,s,a,c){if(pc){var y=Sh(c);if(y===null)ah(i,s,c,mc,a),zv(i,c);else if(ex(y,i,s,a,c))c.stopPropagation();else if(zv(i,c),s&4&&-1<ZA.indexOf(i)){for(;y!==null;){var v=oo(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=zn(v.pendingLanes);if(A!==0){var w=v;for(w.pendingLanes|=2,w.entangledLanes|=2;A;){var B=1<<31-fn(A);w.entanglements[1]|=B,A&=~B}Ki(v),(st&6)===0&&(Xu=Ot()+500,dl(0))}}break;case 31:case 13:w=Ks(v,2),w!==null&&On(w,v,2),Zu(),Th(v,2)}if(v=Sh(c),v===null&&ah(i,s,c,mc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else ah(i,s,c,null,a)}}function Sh(i){return i=xr(i),bh(i)}var mc=null;function bh(i){if(mc=null,i=io(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=u(s),i!==null)return i;i=null}else if(a===31){if(i=f(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return mc=i,null}function Hv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ms()){case wt:return 2;case Pt:return 8;case Fn:case Ds:return 32;case Do:return 268435456;default:return 32}default:return 32}}var Ah=!1,cs=null,ds=null,fs=null,vl=new Map,_l=new Map,hs=[],ZA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zv(i,s){switch(i){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":vl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(s.pointerId)}}function Tl(i,s,a,c,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},s!==null&&(s=oo(s),s!==null&&Fv(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),i)}function ex(i,s,a,c,y){switch(s){case"focusin":return cs=Tl(cs,i,s,a,c,y),!0;case"dragenter":return ds=Tl(ds,i,s,a,c,y),!0;case"mouseover":return fs=Tl(fs,i,s,a,c,y),!0;case"pointerover":var v=y.pointerId;return vl.set(v,Tl(vl.get(v)||null,i,s,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,_l.set(v,Tl(_l.get(v)||null,i,s,a,c,y)),!0}return!1}function Yv(i){var s=io(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){i.blockedOn=s,Ye(i.priority,function(){qv(a)});return}}else if(s===31){if(s=f(a),s!==null){i.blockedOn=s,Ye(i.priority,function(){qv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function gc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Sh(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Ar=c,a.target.dispatchEvent(c),Ar=null}else return s=oo(a),s!==null&&Fv(s),i.blockedOn=a,!1;s.shift()}return!0}function Jv(i,s,a){gc(i)&&a.delete(s)}function tx(){Ah=!1,cs!==null&&gc(cs)&&(cs=null),ds!==null&&gc(ds)&&(ds=null),fs!==null&&gc(fs)&&(fs=null),vl.forEach(Jv),_l.forEach(Jv)}function yc(i,s){i.blockedOn===s&&(i.blockedOn=null,Ah||(Ah=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tx)))}var vc=null;function Kv(i){vc!==i&&(vc=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){vc===i&&(vc=null);for(var s=0;s<i.length;s+=3){var a=i[s],c=i[s+1],y=i[s+2];if(typeof c!="function"){if(bh(c||a)===null)continue;break}var v=oo(a);v!==null&&(i.splice(s,3),s-=3,Sf(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function ia(i){function s(B){return yc(B,i)}cs!==null&&yc(cs,i),ds!==null&&yc(ds,i),fs!==null&&yc(fs,i),vl.forEach(s),_l.forEach(s);for(var a=0;a<hs.length;a++){var c=hs[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<hs.length&&(a=hs[0],a.blockedOn===null);)Yv(a),a.blockedOn===null&&hs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],A=y[Bt]||null;if(typeof v=="function")A||Kv(a);else if(A){var w=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[Bt]||null)w=A.formAction;else if(bh(y)!==null)continue}else w=A.action;typeof w=="function"?a[c+1]=w:(a.splice(c,3),c-=3),Kv(a)}}}function jv(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function xh(i){this._internalRoot=i}_c.prototype.render=xh.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,c=Zn();Bv(a,c,i,s,null,null)},_c.prototype.unmount=xh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Bv(i.current,2,null,i,null,null),Zu(),s[hn]=null}};function _c(i){this._internalRoot=i}_c.prototype.unstable_scheduleHydration=function(i){if(i){var s=ge();i={blockedOn:null,target:i,priority:s};for(var a=0;a<hs.length&&s!==0&&s<hs[a].priority;a++);hs.splice(a,0,i),a===0&&Yv(i)}};var $v=e.version;if($v!=="19.2.4")throw Error(o(527,$v,"19.2.4"));he.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=p(s),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var nx={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{qn=Tc.inject(nx),Jt=Tc}catch{}}return Sl.createRoot=function(i,s){if(!r(i))throw Error(o(299));var a=!1,c="",y=ny,v=iy,A=oy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=Lv(i,1,!1,null,null,a,c,null,y,v,A,jv),i[hn]=s.current,rh(i),new xh(s)},Sl.hydrateRoot=function(i,s,a){if(!r(i))throw Error(o(299));var c=!1,y="",v=ny,A=iy,w=oy,B=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(B=a.formState)),s=Lv(i,1,!0,s,a??null,c,y,B,v,A,w,jv),s.context=Ov(null),a=s.current,c=Zn(),c=de(c),y=Wo(c),y.callback=null,Zo(a,y,c),a=c,s.current.lanes=a,Ei(s,a),Ki(s),i[hn]=s.current,rh(i),new _c(s)},Sl.version="19.2.4",Sl}var s_;function hx(){if(s_)return Rh.exports;s_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rh.exports=fx(),Rh.exports}var px=hx();const mx=GT(px),Gc="/edu/assets/logo-C-dOhpPe.png",kl={phone:"01011828609",googleSheet:"https://docs.google.com/spreadsheets/d/1vVjXx-RvBcK45bfo-5LY5W0t2amk4rt_KN80he7wAE4/edit?usp=sharing"},gs=[{id:"primary",name:" ",icon:""},{id:"preparatory",name:" ",icon:""},{id:"secondary",name:" ",icon:""},{id:"languages",name:" ",icon:""}],gx=[{stage:"primary",subjects:[" ",""," ",""," "]},{stage:"preparatory",subjects:[" ",""," ",""," ","",""]},{stage:"secondary",subjects:[" ","","",""," "," "," "," ","",""]},{stage:"languages",subjects:["English (Main)","Mathematics (Lang)","Science (Lang)","Arabic","Social Studies"]}],yx=[{id:"t1",name:".  ",subject:" ",imageUrl:"https://picsum.photos/seed/t1/400",whatsapp:"01011828609",availability:"  ",teachingHours:"4:00 - 8:00 ",bio:"       .",grades:[" "," "],stages:["primary"]}],vx=[{id:"c1",title:"  ",description:"        .",stage:"primary",grade:" ",gradeId:"p4",teacherId:"t1",media:[{id:"m1",title:" ",url:"https://www.w3schools.com/html/mov_bbb.mp4",type:"video"},{id:"m2",title:"  ",url:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",type:"pdf"}]}],gn=()=>[{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]}],_x=[{id:"p1",name:"  ",stage:"primary",schedule:gn(),teachers:[],courses:[]},{id:"p2",name:"  ",stage:"primary",schedule:gn(),teachers:[],courses:[]},{id:"p3",name:"  ",stage:"primary",schedule:gn(),teachers:[],courses:[]},{id:"p4",name:"  ",stage:"primary",schedule:gn(),teachers:["t1"],courses:["c1"]},{id:"p5",name:"  ",stage:"primary",schedule:gn(),teachers:["t1"],courses:[]},{id:"p6",name:"  ",stage:"primary",schedule:gn(),teachers:[],courses:[]},{id:"pr1",name:"  ",stage:"preparatory",schedule:gn(),teachers:[],courses:[]},{id:"pr2",name:"  ",stage:"preparatory",schedule:gn(),teachers:[],courses:[]},{id:"pr3",name:"  ",stage:"preparatory",schedule:gn(),teachers:[],courses:[]},{id:"s1",name:"  ",stage:"secondary",schedule:gn(),teachers:[],courses:[]},{id:"s2",name:"  ",stage:"secondary",schedule:gn(),teachers:[],courses:[]},{id:"s3",name:"  ",stage:"secondary",schedule:gn(),teachers:[],courses:[]},{id:"l1",name:"Primary 1 (Languages)",stage:"languages",schedule:gn(),teachers:[],courses:[]},{id:"l2",name:"Primary 2 (Languages)",stage:"languages",schedule:gn(),teachers:[],courses:[]},{id:"l3",name:"Prep 1 (Languages)",stage:"languages",schedule:gn(),teachers:[],courses:[]},{id:"l4",name:"Secondary 1 (Languages)",stage:"languages",schedule:gn(),teachers:[],courses:[]}],Tx=({onNavigate:t,isAdmin:e})=>T.jsx("nav",{className:"bg-white border-b sticky top-0 z-50 shadow-sm",children:T.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:T.jsxs("div",{className:"flex justify-between h-20 items-center",children:[T.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("home"),children:[T.jsx("img",{src:Gc,alt:"Educators Academy Logo",className:"h-14 w-auto object-contain"}),T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-[#0a192f] font-black text-xl leading-none hidden md:block",children:"Educators Academy"}),T.jsx("span",{className:"text-[#10b981] font-bold text-xs hidden md:block tracking-widest",children:"CENTER OF EXCELLENCE"})]})]}),T.jsxs("div",{className:"hidden md:flex items-center space-x-8 space-x-reverse text-gray-600 font-medium",children:[T.jsx("button",{onClick:()=>t("home"),className:"hover:text-[#10b981] transition font-bold",children:""}),T.jsx("button",{onClick:()=>t("stages"),className:"hover:text-[#10b981] transition font-bold",children:""}),T.jsx("button",{onClick:()=>t("teachers"),className:"hover:text-[#10b981] transition font-bold",children:""}),T.jsx("button",{onClick:()=>t("admin"),className:`px-4 py-2 rounded-xl font-bold transition-all ${e?"bg-[#0a192f] text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e?"  ":"  "})]}),T.jsx("a",{href:`https://wa.me/20${kl.phone}`,target:"_blank",className:"bg-[#f97316] text-white px-6 py-2.5 rounded-full font-black hover:bg-orange-600 transition shadow-xl shadow-orange-500/20 active:scale-95",children:" "})]})})}),Ex=async t=>{const e=localStorage.getItem("google_sheet_webhook_url");if(!e)return console.warn("       ."),!1;try{const n=new URLSearchParams;return n.append("studentName",t.studentName),n.append("parentPhone",t.parentPhone),n.append("teacherName",t.teacherName),n.append("timestamp",t.timestamp),await fetch(e,{method:"POST",mode:"no-cors",body:n}),!0}catch(n){return console.error("  :",n),!1}},FT=({targetName:t,type:e,onClose:n})=>{const[o,r]=_e.useState(""),[l,u]=_e.useState(""),[f,g]=_e.useState(!1),[p,_]=_e.useState(!1),[S,b]=_e.useState(""),C=async I=>{if(I.preventDefault(),!o||!l)return;g(!0);const k=new Date().toLocaleString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0});await Ex({studentName:o,parentPhone:l,teacherName:t,timestamp:k});const W=kl.phone,z=W.startsWith("0")?`2${W}`:`20${W}`,X=`       : ${o}  /: ${t}`,q=`https://wa.me/${z}?text=${encodeURIComponent(X)}`;b(q),_(!0);const se=window.open(q,"_blank");setTimeout(()=>{(!se||se.closed||typeof se.closed>"u")&&console.warn("Popup blocked or failed to redirect automatically."),g(!1)},1200)};return p?T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/80 backdrop-blur-md animate-in fade-in duration-300",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 text-center shadow-2xl animate-in zoom-in-95",children:[T.jsx("div",{className:"text-7xl mb-6",children:""}),T.jsx("h3",{className:"text-3xl font-black text-[#0a192f] mb-3",children:"  !"}),T.jsx("p",{className:"text-gray-500 font-bold mb-8 text-lg leading-relaxed",children:"   .."}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-[#25d366] text-white py-5 rounded-2xl font-black text-xl hover:bg-[#1ebe57] transition-all shadow-xl shadow-green-500/20",children:"      "}),T.jsx("button",{onClick:n,className:"block w-full text-gray-400 font-bold hover:text-[#0a192f] transition-colors",children:"  "})]})]})}):T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/60 backdrop-blur-sm animate-in fade-in duration-300 text-right",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 border-t-8 border-[#2d5a4c]",children:[T.jsxs("div",{className:"p-8 text-center",children:[T.jsx("h3",{className:"text-3xl font-black text-[#2d5a4c] mb-2",children:"  "}),T.jsxs("p",{className:"text-gray-400 font-bold text-lg",children:[" : ",t]})]}),T.jsxs("form",{onSubmit:C,className:"px-8 pb-10 space-y-5",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2 mr-1",children:"  :"}),T.jsx("input",{required:!0,type:"text",value:o,onChange:I=>r(I.target.value),className:"w-full border border-gray-200 rounded-xl p-4 bg-gray-50 focus:border-[#10b981] outline-none font-black text-right text-lg",placeholder:":   "})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2 mr-1",children:"  :"}),T.jsx("input",{required:!0,type:"tel",value:l,onChange:I=>u(I.target.value),className:"w-full border border-gray-200 rounded-xl p-4 bg-gray-50 focus:border-[#10b981] outline-none font-black text-left text-lg",dir:"ltr",placeholder:"010xxxxxxxx"})]}),T.jsxs("div",{className:"pt-4",children:[T.jsx("button",{type:"submit",disabled:f,className:"w-full bg-[#25d366] text-white py-5 rounded-xl font-black text-xl hover:bg-[#1ebe57] transition-all shadow-xl shadow-green-500/10 disabled:opacity-50",children:f?"  ...":"  "}),T.jsx("button",{type:"button",onClick:n,className:"w-full text-gray-400 font-bold mt-4 hover:text-red-500 transition-colors",children:" "})]})]})]})})},Sx=({grade:t,teachers:e,courses:n,onBack:o})=>{const r=q=>{if(!q)return"";if(q.match(/AM|PM||/))return q;const se=q.match(/^(\d{1,2}):(\d{2})$/);if(se){let D=parseInt(se[1]);const N=se[2],M=D>=12?"":"";return D=D%12||12,`${D}:${N} ${M}`}return q},[l,u]=_e.useState("schedule"),[f,g]=_e.useState(null),[p,_]=_e.useState(null),[S,b]=_e.useState(null),[C,I]=_e.useState(!1),L=C&&t.ramadanSchedule&&t.ramadanSchedule.length>0?t.ramadanSchedule:t.schedule,k=e.filter(q=>t.teachers.includes(q.id)),Y=n.filter(q=>t.courses.includes(q.id)),W=q=>{const se=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,D=q.match(se);return D&&D[2].length===11?`https://www.youtube.com/embed/${D[2]}`:null},z=q=>q.includes("firebasestorage")||q.endsWith(".mp4")||q.endsWith(".webm")||q.endsWith(".mov"),X=q=>q.includes("drive.google.com")&&!q.includes("/preview")?q.replace("/view","/preview").replace("/edit","/preview"):q.includes("docs.google.com/presentation")||q.includes("docs.google.com/document")?q.replace("/edit","/preview").replace("/view","/preview"):`https://docs.google.com/gview?url=${encodeURIComponent(q)}&embedded=true`;return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[S&&T.jsx(FT,{targetName:S.name,type:S.type,onClose:()=>b(null)}),T.jsxs("button",{onClick:o,className:"mb-8 text-gray-400 flex items-center gap-3 hover:text-[#0a192f] transition-all group font-black",children:[T.jsx("span",{className:"bg-white p-2 rounded-xl shadow-sm group-hover:-translate-x-1 transition-transform",children:""}),"   "]}),T.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl overflow-hidden mb-12 border border-gray-100 animate-in fade-in zoom-in-95 duration-700",children:[T.jsxs("div",{className:"bg-[#0a192f] p-12 text-white relative overflow-hidden text-right",children:[T.jsxs("div",{className:"relative z-10",children:[T.jsx("h1",{className:"text-5xl font-black mb-4",children:t.name}),T.jsx("p",{className:"text-blue-200/80 text-xl font-medium max-w-2xl",children:"         "})]}),T.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-[#10b981] rounded-full blur-[140px] opacity-20 -mr-40 -mt-40"}),T.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-[#f97316] rounded-full blur-[120px] opacity-10 -ml-32 -mb-32"})]}),T.jsxs("div",{className:"flex border-b bg-gray-50/50 overflow-x-auto whitespace-nowrap scrollbar-hide",children:[T.jsxs("button",{onClick:()=>u("schedule"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${l==="schedule"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[T.jsx("span",{children:""}),"  "]}),T.jsxs("button",{onClick:()=>u("teachers"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${l==="teachers"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[T.jsx("span",{children:""}),"  "]}),T.jsxs("button",{onClick:()=>u("courses"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${l==="courses"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[T.jsx("span",{children:""}),"  "]})]}),T.jsxs("div",{className:"p-8 md:p-14 text-right",children:[l==="schedule"&&T.jsxs("div",{children:[t.ramadanSchedule&&t.ramadanSchedule.length>0&&T.jsx("div",{className:"flex justify-center mb-8",children:T.jsxs("button",{onClick:()=>I(!C),className:`relative px-8 py-3 rounded-full font-black text-lg transition-all flex items-center gap-3 shadow-lg ${C?"bg-[#f97316] text-white":"bg-[#0a192f] text-white hover:bg-[#10b981]"}`,children:[T.jsx("span",{children:C?"   ":"   "}),C&&T.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[T.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),T.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-white"})]})]})}),C&&T.jsxs("div",{className:"text-center mb-6 animate-in fade-in zoom-in",children:[T.jsx("h2",{className:"text-3xl font-black text-[#f97316]",children:"    "}),T.jsx("p",{className:"text-gray-500 font-bold mt-2",children:"    -  "})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-6 animate-in slide-in-from-bottom-8 duration-500",children:L.map((q,se)=>T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsx("div",{className:"bg-[#0a192f] text-white py-4 rounded-3xl text-center font-black shadow-xl",children:q.day}),T.jsxs("div",{className:"space-y-4",children:[(()=>{const D=new Set;return q.slots.map(N=>{const M=(q.day||"").trim(),U=(N.subject||"").trim(),O=(N.time||"").trim(),G=`${M}-${U}-${O}`;if(D.has(G))return null;D.add(G);const V=e.find(Ne=>Ne.id===N.teacherId);return T.jsxs("div",{onClick:()=>V&&g(V),className:`${N.color} p-6 rounded-[2rem] shadow-sm border border-black/5 flex flex-col gap-3 transform hover:scale-[1.05] hover:shadow-xl transition-all cursor-pointer`,children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("span",{className:"text-3xl",children:N.icon||""}),V&&T.jsxs("span",{className:"text-[10px] bg-white/40 backdrop-blur-md px-3 py-1 rounded-full font-black uppercase text-gray-900",children:["/ ",V.name.split(" ")[1]||V.name]})]}),T.jsxs("div",{children:[T.jsx("div",{className:"font-black text-2xl text-gray-900 leading-tight",children:N.subject}),T.jsx("div",{className:"text-sm font-bold opacity-70 mt-1",children:r(N.time)})]})]},N.id)})})(),q.slots.length===0&&T.jsx("div",{className:"text-gray-200 text-center py-10 italic text-sm border-2 border-dashed border-gray-100 rounded-3xl",children:" "})]})]},se))})]}),l==="teachers"&&T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 animate-in slide-in-from-right-8 duration-500",children:[k.map(q=>T.jsxs("div",{onClick:()=>g(q),className:"group bg-white rounded-[3rem] border border-gray-100 shadow-lg hover:shadow-2xl hover:border-[#10b981]/30 transition-all cursor-pointer overflow-hidden flex flex-col h-full active:scale-95",children:[T.jsxs("div",{className:"h-48 overflow-hidden relative",children:[T.jsx("img",{src:q.imageUrl,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000",alt:q.name}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent"}),T.jsx("div",{className:"absolute bottom-4 right-6 bg-white/20 backdrop-blur-md text-white px-5 py-1.5 rounded-full text-xs font-black",children:" "})]}),T.jsxs("div",{className:"p-8 text-center flex-1 flex flex-col items-center",children:[T.jsx("h3",{className:"text-3xl font-black mb-1 text-[#0a192f]",children:q.name}),T.jsx("p",{className:"text-[#10b981] font-black text-xl mb-6",children:q.subject}),T.jsx("div",{className:"w-full h-px bg-gray-50 mb-6"}),T.jsx("button",{onClick:se=>{se.stopPropagation(),b({name:q.name,type:""})},className:"mt-auto w-full bg-[#10b981] text-white py-5 rounded-2xl font-black text-xl hover:bg-emerald-600 transition-all shadow-xl shadow-emerald-500/10",children:"  "})]})]},q.id)),k.length===0&&T.jsx("div",{className:"col-span-full py-32 text-center",children:T.jsx("p",{className:"text-gray-300 font-black text-2xl",children:"     "})})]}),l==="courses"&&T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 animate-in slide-in-from-left-8 duration-500",children:[Y.map(q=>(e.find(se=>se.id===q.teacherId),T.jsxs("div",{className:"bg-white border-2 border-gray-100 rounded-[3.5rem] flex flex-col hover:border-[#f97316] transition-all group overflow-hidden shadow-sm hover:shadow-2xl active:scale-[0.98]",children:[T.jsxs("div",{className:"h-64 overflow-hidden relative",children:[T.jsx("img",{src:q.thumbnailUrl,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000",alt:q.title}),T.jsx("div",{className:"absolute top-6 right-6 bg-[#f97316] text-white px-5 py-2 rounded-full text-xs font-black shadow-2xl animate-pulse",children:"  (4K Content)"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"})]}),T.jsxs("div",{className:"p-10 flex-1 flex flex-col",children:[T.jsx("h3",{className:"text-3xl font-black text-[#0a192f] group-hover:text-[#f97316] transition-colors mb-4",children:q.title}),T.jsx("p",{className:"text-gray-500 text-xl leading-relaxed mb-8 flex-1 line-clamp-3",children:q.description}),T.jsxs("div",{className:"space-y-4 mb-10",children:[T.jsxs("h4",{className:"font-black text-sm text-gray-300 uppercase tracking-widest flex items-center gap-2",children:[T.jsx("span",{className:"w-4 h-0.5 bg-gray-200"}),"  "]}),q.media.map(se=>T.jsxs("div",{onClick:()=>_(se),className:"flex items-center justify-between bg-gray-50 hover:bg-orange-50 p-5 rounded-3xl border border-gray-100 hover:border-orange-200 transition-all cursor-pointer group/item",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("span",{className:"text-3xl bg-white w-12 h-12 rounded-2xl shadow-sm flex items-center justify-center",children:se.type==="video"?"":se.type==="pdf"?"":""}),T.jsx("span",{className:"font-black text-xl text-[#0a192f]",children:se.title})]}),T.jsx("span",{className:"text-[#f97316] font-black text-sm opacity-0 group-hover/item:opacity-100 transition-all",children:"  "})]},se.id))]}),T.jsx("button",{onClick:()=>b({name:q.title,type:""}),className:"w-full bg-[#f97316] text-white py-6 rounded-3xl font-black text-2xl hover:bg-orange-600 transition-all shadow-2xl shadow-orange-500/30",children:"    "})]})]},q.id))),Y.length===0&&T.jsx("div",{className:"col-span-full py-32 text-center",children:T.jsx("p",{className:"text-gray-300 font-black text-2xl",children:"    "})})]})]})]}),p&&T.jsxs("div",{className:"fixed inset-0 z-[120] bg-[#0a192f]/98 flex flex-col p-4 sm:p-10 animate-in fade-in duration-500",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8 text-right",children:[T.jsxs("div",{className:"flex items-center gap-6",children:[T.jsx("button",{onClick:()=>_(null),className:"text-white bg-white/10 w-16 h-16 rounded-3xl flex items-center justify-center hover:bg-red-500 transition-all text-2xl shadow-2xl",children:""}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-white text-3xl font-black",children:p.title}),T.jsx("p",{className:"text-blue-400 font-bold text-sm",children:"    "})]})]}),T.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"text-white font-black bg-[#10b981] px-10 py-4 rounded-2xl shadow-xl hover:bg-emerald-600 transition-all hidden sm:flex items-center gap-2",children:[T.jsx("span",{children:" / "})," "]})]}),T.jsxs("div",{className:"flex-1 bg-black rounded-[3rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.5)] relative flex items-center justify-center border border-white/10 group",children:[p.type==="video"?W(p.url)?T.jsx("iframe",{src:`${W(p.url)}?autoplay=1&rel=0&modestbranding=1`,className:"w-full h-full border-none shadow-inner",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}):z(p.url)?T.jsx("video",{src:p.url,controls:!0,className:"max-h-full max-w-full rounded-2xl",autoPlay:!0,playsInline:!0,controlsList:"nodownload"}):T.jsxs("div",{className:"text-center p-10",children:[T.jsx("p",{className:"text-white text-2xl font-bold mb-6",children:"     "}),T.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"bg-[#f97316] text-white px-8 py-4 rounded-2xl font-black text-xl hover:bg-orange-600 transition-all shadow-lg inline-flex items-center gap-2",children:[T.jsx("span",{children:"    "})," "]})]}):p.type==="pdf"?T.jsx("iframe",{src:X(p.url),className:"w-full h-full border-none bg-white rounded-2xl",title:"PDF Viewer"}):T.jsx("img",{src:p.url,className:"max-h-full max-w-full object-contain group-hover:scale-105 transition-transform duration-1000"}),T.jsx("div",{className:"absolute top-10 left-10 pointer-events-none opacity-20 hidden sm:block",children:T.jsx("span",{className:"text-white text-9xl font-black select-none",children:"EDUCATORS"})})]})]}),f&&T.jsx("div",{className:"fixed inset-0 z-[110] flex justify-end items-center bg-[#0a192f]/90 backdrop-blur-2xl animate-in fade-in p-0 sm:p-6 duration-500 cursor-pointer",onClick:()=>g(null),children:T.jsxs("div",{className:"bg-white h-full sm:h-auto w-full max-w-2xl sm:rounded-[3.5rem] overflow-hidden shadow-[0_0_80px_rgba(0,0,0,0.4)] animate-in slide-in-from-left duration-700 text-right flex flex-col cursor-default relative",onClick:q=>q.stopPropagation(),children:[T.jsx("button",{onClick:()=>g(null),className:"fixed top-6 left-6 z-[120] bg-red-500 hover:bg-red-600 text-white w-16 h-16 rounded-full flex items-center justify-center shadow-2xl border-4 border-white/20 hover:scale-110 transition-all animate-pulse",title:"",children:T.jsx("span",{className:"text-4xl font-black mb-1",children:""})}),T.jsxs("div",{className:"relative h-80 bg-[#0a192f]",children:[T.jsx("img",{src:f.imageUrl,className:"w-full h-full object-cover opacity-70"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a192f] via-[#0a192f]/40 to-transparent"}),T.jsxs("div",{className:"absolute bottom-10 right-12",children:[T.jsx("h2",{className:"text-5xl font-black text-white mb-2",children:f.name}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("div",{className:"bg-[#10b981] text-white px-6 py-2 rounded-full inline-block font-black text-lg shadow-xl",children:f.subject}),f.whatsapp&&T.jsxs("a",{href:`https://wa.me/20${f.whatsapp}`,target:"_blank",rel:"noopener noreferrer",className:"bg-[#25D366] text-white px-6 py-2 rounded-full inline-flex items-center gap-2 font-black text-lg shadow-xl hover:bg-[#128C7E] transition-colors",children:[T.jsx("span",{children:""})," "]})]})]})]}),T.jsxs("div",{className:"p-12 flex-1 space-y-10 overflow-y-auto",children:[T.jsxs("div",{className:"animate-in slide-in-from-bottom-4 duration-500",children:[T.jsxs("h3",{className:"text-2xl font-black text-[#0a192f] mb-6 flex items-center gap-3",children:[T.jsx("span",{className:"w-1.5 h-6 bg-[#10b981] rounded-full"}),"  "]}),T.jsx("p",{className:"text-gray-600 text-2xl leading-relaxed bg-gray-50/50 p-10 rounded-[2.5rem] border-2 border-dashed border-gray-100 font-medium italic",children:f.bio||"           ."})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 animate-in slide-in-from-bottom-8 duration-700",children:[T.jsxs("div",{className:"bg-emerald-50/50 p-8 rounded-[2rem] border-2 border-emerald-100 flex flex-col items-center text-center",children:[T.jsx("span",{className:"text-4xl mb-3",children:""}),T.jsx("p",{className:"text-gray-400 text-xs font-black mb-1 uppercase tracking-tighter",children:"  "}),T.jsx("p",{className:"text-[#0a192f] font-black text-2xl",children:f.availability||"  "})]}),T.jsxs("div",{className:"bg-blue-50/50 p-8 rounded-[2rem] border-2 border-blue-100 flex flex-col items-center text-center",children:[T.jsx("span",{className:"text-4xl mb-3",children:""}),T.jsx("p",{className:"text-gray-400 text-xs font-black mb-1 uppercase tracking-tighter",children:" "}),T.jsx("p",{className:"text-[#0a192f] font-black text-2xl",children:f.teachingHours||" "})]})]}),f.hourlyRates&&T.jsxs("div",{className:"animate-in slide-in-from-bottom-8 duration-700 delay-100",children:[T.jsxs("h3",{className:"text-2xl font-black text-[#0a192f] mb-6 flex items-center gap-3",children:[T.jsx("span",{className:"w-1.5 h-6 bg-[#f97316] rounded-full"}),"  "]}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries(f.hourlyRates).map(([q,se])=>T.jsxs("div",{className:"flex justify-between items-center bg-orange-50/50 p-6 rounded-2xl border border-orange-100",children:[T.jsx("span",{className:"font-bold text-[#0a192f] text-lg",children:q}),T.jsxs("span",{className:"font-black text-[#f97316] text-xl",children:[se," ."]})]},q))})]}),T.jsxs("div",{className:"flex flex-col gap-4 mt-auto",children:[T.jsx("button",{onClick:()=>b({name:f.name,type:""}),className:"w-full bg-[#10b981] text-white py-6 rounded-3xl font-black text-2xl shadow-2xl shadow-emerald-500/30 hover:bg-emerald-600 transition-all active:scale-95 animate-in slide-in-from-bottom-12 duration-1000",children:"     "}),T.jsx("button",{onClick:()=>g(null),className:"w-full bg-gray-100 text-gray-500 py-4 rounded-3xl font-bold text-xl hover:bg-gray-200 transition-all active:scale-95",children:"  "})]})]})]})})]})};var bx={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ax,xx;function Cx(){return{geminiUrl:Ax,vertexUrl:xx}}function wx(t,e,n,o){var r,l;if(!(t!=null&&t.baseUrl)){const u=Cx();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:n:(l=u.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class No{}function ve(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(t,e,n){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in t))if(Array.isArray(n))t[f]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[f])){const g=t[f];if(Array.isArray(n))for(let p=0;p<g.length;p++){const _=g[p];h(_,e.slice(l+1),n[p])}else for(const p of g)h(p,e.slice(l+1),n)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in t||(t[f]=[{}]);const g=t[f];h(g[0],e.slice(l+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(f=>d(f,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function Rx(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),l=o.split("."),u=new Set;let f=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){f=g;break}if(f!==-1&&l.length>f)for(let g=f;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}Xh(t,r,l,0,u)}}function Xh(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2),f=t;if(u in f&&Array.isArray(f[u]))for(const g of f[u])Xh(g,e,n,o+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,f=Object.keys(u).filter(p=>!p.startsWith("_")&&!r.has(p)),g={};for(const p of f)g[p]=u[p];for(const[p,_]of Object.entries(g)){const S=[];for(const b of n.slice(o))b==="*"?S.push(p):S.push(b);h(u,S,_)}for(const p of f)delete u[p]}}else{const u=t;l in u&&Xh(u[l],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ix(t){const e={},n=d(t,["operationName"]);n!=null&&h(e,["operationName"],n);const o=d(t,["resourceName"]);return o!=null&&h(e,["_url","resourceName"],o),e}function Nx(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const o=d(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],Dx(u)),e}function Mx(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const o=d(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["response"]);return u!=null&&h(e,["response"],Px(u)),e}function Dx(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Ux(u))),h(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function Px(t){const e={},n=d(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Vx(u))),h(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function Ux(t){const e={},n=d(t,["video"]);return n!=null&&h(e,["video"],Fx(n)),e}function Vx(t){const e={},n=d(t,["_self"]);return n!=null&&h(e,["video"],qx(n)),e}function kx(t){const e={},n=d(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function Lx(t){const e={},n=d(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function Ox(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const o=d(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["response"]);return u!=null&&h(e,["response"],Bx(u)),e}function Bx(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&h(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function qT(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const o=d(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["response"]);return u!=null&&h(e,["response"],Gx(u)),e}function Gx(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&h(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function Fx(t){const e={},n=d(t,["uri"]);n!=null&&h(e,["uri"],n);const o=d(t,["encodedVideo"]);o!=null&&h(e,["videoBytes"],kp(o));const r=d(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function qx(t){const e={},n=d(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const o=d(t,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],kp(o));const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var r_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(r_||(r_={}));var a_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(a_||(a_={}));var l_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(l_||(l_={}));var jt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(jt||(jt={}));var u_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(u_||(u_={}));var c_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(c_||(c_={}));var d_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(d_||(d_={}));var f_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(f_||(f_={}));var h_;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(h_||(h_={}));var p_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(p_||(p_={}));var m_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(m_||(m_={}));var g_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(g_||(g_={}));var y_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(y_||(y_={}));var v_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(v_||(v_={}));var __;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(__||(__={}));var T_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(T_||(T_={}));var E_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(E_||(E_={}));var S_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(S_||(S_={}));var b_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(b_||(b_={}));var A_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(A_||(A_={}));var x_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(x_||(x_={}));var Fc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Fc||(Fc={}));var C_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(C_||(C_={}));var w_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(w_||(w_={}));var R_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(R_||(R_={}));var Wh;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Wh||(Wh={}));var I_;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(I_||(I_={}));var N_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(N_||(N_={}));var Zh;(function(t){t.COLLECTION="COLLECTION"})(Zh||(Zh={}));var M_;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(M_||(M_={}));var D_;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(D_||(D_={}));var P_;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(P_||(P_={}));var U_;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(U_||(U_={}));var V_;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(V_||(V_={}));var k_;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(k_||(k_={}));var L_;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(L_||(L_={}));var O_;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(O_||(O_={}));var B_;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(B_||(B_={}));var G_;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(G_||(G_={}));var F_;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(F_||(F_={}));var q_;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(q_||(q_={}));var H_;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(H_||(H_={}));var z_;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(z_||(z_={}));var Y_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Y_||(Y_={}));var J_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(J_||(J_={}));var K_;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(K_||(K_={}));var j_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(j_||(j_={}));var $_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})($_||($_={}));var Q_;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Q_||(Q_={}));var X_;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(X_||(X_={}));var W_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(W_||(W_={}));var Z_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Z_||(Z_={}));var e0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(e0||(e0={}));var t0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(t0||(t0={}));var n0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(n0||(n0={}));var i0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(i0||(i0={}));var la;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(la||(la={}));class ep{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class bl{get text(){var e,n,o,r,l,u,f,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",_=!1;const S=[];for(const b of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[C,I]of Object.entries(b))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(I!==null||I!==void 0)&&S.push(C);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;_=!0,p+=b.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?p:void 0}get data(){var e,n,o,r,l,u,f,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const _=[];for(const S of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[b,C]of Object.entries(S))b!=="inlineData"&&(C!==null||C!==void 0)&&_.push(b);S.inlineData&&typeof S.inlineData.data=="string"&&(p+=atob(S.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,o,r,l,u,f,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,o,r,l,u,f,g,p;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,o,r,l,u,f,g,p;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.output}}class o0{}class s0{}class Hx{}class zx{}class Yx{}class Jx{}class r0{}class a0{}class l0{}class Kx{}class qc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new qc;let r;const l=e;return n?r=Mx(l):r=Nx(l),Object.assign(o,r),o}}class u0{}class c0{}class d0{}class f0{}class jx{}class $x{}class Qx{}class Lp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Lp,l=Ox(e);return Object.assign(o,l),o}}class Xx{}class Wx{}class Zx{}class eC{}class h0{}class tC{get text(){var e,n,o;let r="",l=!1;const u=[];for(const f of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[g,p]of Object.entries(f))g!=="text"&&g!=="thought"&&p!==null&&u.push(g);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,o;let r="";const l=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[f,g]of Object.entries(u))f!=="inlineData"&&g!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class nC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Op{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Op,l=qT(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function it(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function HT(t,e){const n=it(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function zT(t){return Array.isArray(t)?t.map(e=>Hc(e)):[Hc(t)]}function Hc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function YT(t){const e=Hc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JT(t){const e=Hc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function p0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function KT(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>p0(e)):[p0(t)]}function tp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function m0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function g0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Tn(t){if(t==null)throw new Error("ContentUnion is required");return tp(t)?t:{role:"user",parts:KT(t)}}function Bp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=Tn(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=Tn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Tn(n)):[Tn(e)]}function vi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(m0(t)||g0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Tn(t)]}const e=[],n=[],o=tp(t[0]);for(const r of t){const l=tp(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(m0(r)||g0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:KT(n)}),e}function iC(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(jt).includes(n[0].toUpperCase())?n[0].toUpperCase():jt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(jt).includes(o.toUpperCase())?o.toUpperCase():jt.TYPE_UNSPECIFIED})}}function ca(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&iC(t.type,e);for(const[u,f]of Object.entries(t))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(jt).includes(f.toUpperCase())?f.toUpperCase():jt.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=ca(f);else if(o.includes(u)){const g=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}g.push(ca(p))}e[u]=g}else if(r.includes(u)){const g={};for(const[p,_]of Object.entries(f))g[p]=ca(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Gp(t){return ca(t)}function Fp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function qp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ea(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ca(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ca(e.response));return t}function Sa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function oC(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Mo(t,e){if(typeof e!="string")throw new Error("name must be a string");return oC(t,e,"cachedContents")}function jT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Cs(t){return kp(t)}function sC(t){return t!=null&&typeof t=="object"&&"name"in t}function rC(t){return t!=null&&typeof t=="object"&&"video"in t}function aC(t){return t!=null&&typeof t=="object"&&"uri"in t}function $T(t){var e;let n;if(sC(t)&&(n=t.name),!(aC(t)&&(n=t.uri,n===void 0))&&!(rC(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function QT(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function XT(t){for(const e of["models","tunedModels","publisherModels"])if(lC(t,e))return t[e];return[]}function lC(t,e){return t!==null&&typeof t=="object"&&e in t}function uC(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function cC(t,e={}){const n=[],o=new Set;for(const r of t){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const u=uC(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function WT(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function dC(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ZT(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ba(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function eE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fC(t){const e={},n=d(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const o=d(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>JC(u))),h(e,["inlinedResponses"],l)}const r=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function hC(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const o=d(t,["gcsDestination","outputUriPrefix"]);o!=null&&h(e,["gcsUri"],o);const r=d(t,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function pC(t){const e={},n=d(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const o=d(t,["gcsUri"]);o!=null&&h(e,["gcsDestination","outputUriPrefix"],o);const r=d(t,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Pc(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const o=d(t,["metadata","displayName"]);o!=null&&h(e,["displayName"],o);const r=d(t,["metadata","state"]);r!=null&&h(e,["state"],eE(r));const l=d(t,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=d(t,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const f=d(t,["metadata","updateTime"]);f!=null&&h(e,["updateTime"],f);const g=d(t,["metadata","model"]);g!=null&&h(e,["model"],g);const p=d(t,["metadata","output"]);return p!=null&&h(e,["dest"],fC(ZT(p))),e}function np(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const o=d(t,["displayName"]);o!=null&&h(e,["displayName"],o);const r=d(t,["state"]);r!=null&&h(e,["state"],eE(r));const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["createTime"]);u!=null&&h(e,["createTime"],u);const f=d(t,["startTime"]);f!=null&&h(e,["startTime"],f);const g=d(t,["endTime"]);g!=null&&h(e,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&h(e,["updateTime"],p);const _=d(t,["model"]);_!=null&&h(e,["model"],_);const S=d(t,["inputConfig"]);S!=null&&h(e,["src"],mC(S));const b=d(t,["outputConfig"]);b!=null&&h(e,["dest"],hC(ZT(b)));const C=d(t,["completionStats"]);return C!=null&&h(e,["completionStats"],C),e}function mC(t){const e={},n=d(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const o=d(t,["gcsSource","uris"]);o!=null&&h(e,["gcsUri"],o);const r=d(t,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function gC(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=d(e,["fileName"]);o!=null&&h(n,["fileName"],o);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>YC(t,u))),h(n,["requests","requests"],l)}return n}function yC(t){const e={},n=d(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const o=d(t,["gcsUri"]);o!=null&&h(e,["gcsSource","uris"],o);const r=d(t,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function vC(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function _C(t,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ba(t,o)),n}function TC(t,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ba(t,o)),n}function EC(t){const e={},n=d(t,["content"]);n!=null&&h(e,["content"],n);const o=d(t,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],SC(o));const r=d(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=d(t,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=d(t,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const f=d(t,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const g=d(t,["index"]);g!=null&&h(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const _=d(t,["safetyRatings"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(C=>C)),h(e,["safetyRatings"],b)}const S=d(t,["urlContextMetadata"]);return S!=null&&h(e,["urlContextMetadata"],S),e}function SC(t){const e={},n=d(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["citations"],o)}return e}function tE(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>ZC(l))),h(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&h(e,["role"],o),e}function bC(t,e){const n={},o=d(t,["displayName"]);if(e!==void 0&&o!=null&&h(e,["batch","displayName"],o),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function AC(t,e){const n={},o=d(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const r=d(t,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],pC(dC(r))),n}function y0(t,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],it(t,o));const r=d(e,["src"]);r!=null&&h(n,["batch","inputConfig"],gC(t,WT(t,r)));const l=d(e,["config"]);return l!=null&&bC(l,n),n}function xC(t,e){const n={},o=d(e,["model"]);o!=null&&h(n,["model"],it(t,o));const r=d(e,["src"]);r!=null&&h(n,["inputConfig"],yC(WT(t,r)));const l=d(e,["config"]);return l!=null&&AC(l,n),n}function CC(t,e){const n={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&h(e,["batch","displayName"],o),n}function wC(t,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],it(t,o));const r=d(e,["src"]);r!=null&&h(n,["batch","inputConfig"],UC(t,r));const l=d(e,["config"]);return l!=null&&CC(l,n),n}function RC(t,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ba(t,o)),n}function IC(t,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ba(t,o)),n}function NC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["name"]);o!=null&&h(e,["name"],o);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);return l!=null&&h(e,["error"],l),e}function MC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["name"]);o!=null&&h(e,["name"],o);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);return l!=null&&h(e,["error"],l),e}function DC(t,e){const n={},o=d(e,["contents"]);if(o!=null){let l=Bp(t,o);Array.isArray(l)&&(l=l.map(u=>u)),h(n,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(h(n,["_self"],PC(r,n)),Rx(n,{"requests[].*":"requests[].request.*"})),n}function PC(t,e){const n={},o=d(t,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const r=d(t,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function UC(t,e){const n={},o=d(e,["fileName"]);o!=null&&h(n,["file_name"],o);const r=d(e,["inlinedRequests"]);return r!=null&&h(n,["requests"],DC(t,r)),n}function VC(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function kC(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const o=d(t,["args"]);o!=null&&h(e,["args"],o);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LC(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const o=d(t,["mode"]);if(o!=null&&h(e,["mode"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function OC(t,e,n){const o={},r=d(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],tE(Tn(r)));const l=d(e,["temperature"]);l!=null&&h(o,["temperature"],l);const u=d(e,["topP"]);u!=null&&h(o,["topP"],u);const f=d(e,["topK"]);f!=null&&h(o,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&h(o,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&h(o,["maxOutputTokens"],p);const _=d(e,["stopSequences"]);_!=null&&h(o,["stopSequences"],_);const S=d(e,["responseLogprobs"]);S!=null&&h(o,["responseLogprobs"],S);const b=d(e,["logprobs"]);b!=null&&h(o,["logprobs"],b);const C=d(e,["presencePenalty"]);C!=null&&h(o,["presencePenalty"],C);const I=d(e,["frequencyPenalty"]);I!=null&&h(o,["frequencyPenalty"],I);const L=d(e,["seed"]);L!=null&&h(o,["seed"],L);const k=d(e,["responseMimeType"]);k!=null&&h(o,["responseMimeType"],k);const Y=d(e,["responseSchema"]);Y!=null&&h(o,["responseSchema"],Gp(Y));const W=d(e,["responseJsonSchema"]);if(W!=null&&h(o,["responseJsonSchema"],W),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=d(e,["safetySettings"]);if(n!==void 0&&z!=null){let V=z;Array.isArray(V)&&(V=V.map(Ne=>ew(Ne))),h(n,["safetySettings"],V)}const X=d(e,["tools"]);if(n!==void 0&&X!=null){let V=Sa(X);Array.isArray(V)&&(V=V.map(Ne=>nw(Ea(Ne)))),h(n,["tools"],V)}const q=d(e,["toolConfig"]);if(n!==void 0&&q!=null&&h(n,["toolConfig"],tw(q)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=d(e,["cachedContent"]);n!==void 0&&se!=null&&h(n,["cachedContent"],Mo(t,se));const D=d(e,["responseModalities"]);D!=null&&h(o,["responseModalities"],D);const N=d(e,["mediaResolution"]);N!=null&&h(o,["mediaResolution"],N);const M=d(e,["speechConfig"]);if(M!=null&&h(o,["speechConfig"],Fp(M)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=d(e,["thinkingConfig"]);U!=null&&h(o,["thinkingConfig"],U);const O=d(e,["imageConfig"]);O!=null&&h(o,["imageConfig"],zC(O));const G=d(e,["enableEnhancedCivicAnswers"]);if(G!=null&&h(o,["enableEnhancedCivicAnswers"],G),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function BC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>EC(p))),h(e,["candidates"],g)}const r=d(t,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=d(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=d(t,["responseId"]);u!=null&&h(e,["responseId"],u);const f=d(t,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function GC(t,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ba(t,o)),n}function FC(t,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ba(t,o)),n}function qC(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function HC(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function zC(t){const e={},n=d(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const o=d(t,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function YC(t,e){const n={},o=d(e,["model"]);o!=null&&h(n,["request","model"],it(t,o));const r=d(e,["contents"]);if(r!=null){let f=vi(r);Array.isArray(f)&&(f=f.map(g=>tE(g))),h(n,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&h(n,["metadata"],l);const u=d(e,["config"]);return u!=null&&h(n,["request","generationConfig"],OC(t,u,d(n,["request"],{}))),n}function JC(t){const e={},n=d(t,["response"]);n!=null&&h(e,["response"],BC(n));const o=d(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=d(t,["error"]);return r!=null&&h(e,["error"],r),e}function KC(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function jC(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=d(t,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),n}function $C(t){const e={},n=d(t,["config"]);return n!=null&&KC(n,e),e}function QC(t){const e={},n=d(t,["config"]);return n!=null&&jC(n,e),e}function XC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=d(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Pc(u))),h(e,["batchJobs"],l)}return e}function WC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=d(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>np(u))),h(e,["batchJobs"],l)}return e}function ZC(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],VC(l));const u=d(t,["functionCall"]);u!=null&&h(e,["functionCall"],kC(u));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const g=d(t,["inlineData"]);g!=null&&h(e,["inlineData"],vC(g));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const _=d(t,["thought"]);_!=null&&h(e,["thought"],_);const S=d(t,["thoughtSignature"]);S!=null&&h(e,["thoughtSignature"],S);const b=d(t,["videoMetadata"]);return b!=null&&h(e,["videoMetadata"],b),e}function ew(t){const e={},n=d(t,["category"]);if(n!=null&&h(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function tw(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const o=d(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],LC(o)),e}function nw(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(S=>S)),h(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],qC(u));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],HC(f));const g=d(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Co;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Co||(Co={}));class mr{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iw extends No{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mr(Co.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=y0(this.apiClient,e),o=n._url,r=ve("{model}:batchGenerateContent",o),f=n.batch.inputConfig.requests,g=f.requests,p=[];for(const _ of g){const S=Object.assign({},_);if(S.systemInstruction){const b=S.systemInstruction;delete S.systemInstruction;const C=S.request;C.systemInstruction=b,S.request=C}p.push(S)}return f.requests=p,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(u)o.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=xC(this.apiClient,e);return f=ve("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>np(_))}else{const p=y0(this.apiClient,e);return f=ve("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Pc(_))}}async createEmbeddingsInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wC(this.apiClient,e);return l=ve("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>Pc(g))}}async get(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=FC(this.apiClient,e);return f=ve("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>np(_))}else{const p=GC(this.apiClient,e);return f=ve("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Pc(_))}}async cancel(e){var n,o,r,l;let u="",f={};if(this.apiClient.isVertexAI()){const g=TC(this.apiClient,e);u=ve("batchPredictionJobs/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=_C(this.apiClient,e);u=ve("batches/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=QC(e);return f=ve("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=WC(_),b=new h0;return Object.assign(b,S),b})}else{const p=$C(e);return f=ve("batches",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=XC(_),b=new h0;return Object.assign(b,S),b})}}async delete(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=IC(this.apiClient,e);return f=ve("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>MC(_))}else{const p=RC(this.apiClient,e);return f=ve("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>NC(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ow(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function v0(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>ww(l))),h(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&h(e,["role"],o),e}function sw(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let _=vi(u);Array.isArray(_)&&(_=_.map(S=>v0(S))),h(e,["contents"],_)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],v0(Tn(f)));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(S=>Iw(S))),h(e,["tools"],_)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],Rw(p)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function rw(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let S=vi(u);Array.isArray(S)&&(S=S.map(b=>b)),h(e,["contents"],S)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],Tn(f));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let S=g;Array.isArray(S)&&(S=S.map(b=>Nw(b))),h(e,["tools"],S)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const _=d(t,["kmsKeyName"]);return e!==void 0&&_!=null&&h(e,["encryption_spec","kmsKeyName"],_),n}function aw(t,e){const n={},o=d(e,["model"]);o!=null&&h(n,["model"],HT(t,o));const r=d(e,["config"]);return r!=null&&sw(r,n),n}function lw(t,e){const n={},o=d(e,["model"]);o!=null&&h(n,["model"],HT(t,o));const r=d(e,["config"]);return r!=null&&rw(r,n),n}function uw(t,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],Mo(t,o)),n}function cw(t,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],Mo(t,o)),n}function dw(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function fw(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function hw(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function pw(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const o=d(t,["args"]);o!=null&&h(e,["args"],o);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mw(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const o=d(t,["mode"]);if(o!=null&&h(e,["mode"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function gw(t){const e={},n=d(t,["description"]);n!=null&&h(e,["description"],n);const o=d(t,["name"]);o!=null&&h(e,["name"],o);const r=d(t,["parameters"]);r!=null&&h(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(t,["response"]);u!=null&&h(e,["response"],u);const f=d(t,["responseJsonSchema"]);if(f!=null&&h(e,["responseJsonSchema"],f),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function yw(t,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],Mo(t,o)),n}function vw(t,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],Mo(t,o)),n}function _w(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function Tw(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function Ew(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function Sw(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function bw(t){const e={},n=d(t,["config"]);return n!=null&&Ew(n,e),e}function Aw(t){const e={},n=d(t,["config"]);return n!=null&&Sw(n,e),e}function xw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function Cw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function ww(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],hw(l));const u=d(t,["functionCall"]);u!=null&&h(e,["functionCall"],pw(u));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const g=d(t,["inlineData"]);g!=null&&h(e,["inlineData"],ow(g));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const _=d(t,["thought"]);_!=null&&h(e,["thought"],_);const S=d(t,["thoughtSignature"]);S!=null&&h(e,["thoughtSignature"],S);const b=d(t,["videoMetadata"]);return b!=null&&h(e,["videoMetadata"],b),e}function Rw(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const o=d(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],mw(o)),e}function Iw(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(S=>S)),h(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],_w(u));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],Tw(f));const g=d(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function Nw(t){const e={},n=d(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const o=d(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=d(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=d(t,["functionDeclarations"]);if(u!=null){let S=u;Array.isArray(S)&&(S=S.map(b=>gw(b))),h(e,["functionDeclarations"],S)}const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],f);const g=d(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const _=d(t,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function Mw(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function Dw(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function Pw(t,e){const n={},o=d(e,["name"]);o!=null&&h(n,["_url","name"],Mo(t,o));const r=d(e,["config"]);return r!=null&&Mw(r,n),n}function Uw(t,e){const n={},o=d(e,["name"]);o!=null&&h(n,["_url","name"],Mo(t,o));const r=d(e,["config"]);return r!=null&&Dw(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vw extends No{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mr(Co.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=lw(this.apiClient,e);return f=ve("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=aw(this.apiClient,e);return f=ve("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=vw(this.apiClient,e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=yw(this.apiClient,e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=cw(this.apiClient,e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=fw(_),b=new d0;return Object.assign(b,S),b})}else{const p=uw(this.apiClient,e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=dw(_),b=new d0;return Object.assign(b,S),b})}}async update(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=Uw(this.apiClient,e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=Pw(this.apiClient,e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=Aw(e);return f=ve("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=Cw(_),b=new f0;return Object.assign(b,S),b})}else{const p=bw(e);return f=ve("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=xw(_),b=new f0;return Object.assign(b,S),b})}}}function zc(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function _0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function De(t){return this instanceof De?(this.v=t,this):new De(t)}function Ii(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(C){return function(I){return Promise.resolve(I).then(C,S)}}function f(C,I){o[C]&&(r[C]=function(L){return new Promise(function(k,Y){l.push([C,L,k,Y])>1||g(C,L)})},I&&(r[C]=I(r[C])))}function g(C,I){try{p(o[C](I))}catch(L){b(l[0][3],L)}}function p(C){C.value instanceof De?Promise.resolve(C.value.v).then(_,S):b(l[0][2],C)}function _(C){g("next",C)}function S(C){g("throw",C)}function b(C,I){C(I),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Ni(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof _0=="function"?_0(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(u){return new Promise(function(f,g){u=t[l](u),r(f,g,u.done,u.value)})}}function r(l,u,f,g){Promise.resolve(g).then(function(p){l({value:p,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:nE(n)}function nE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Lw(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function T0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let l=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),l&&!nE(t[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Ow{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Bw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Bw{constructor(e,n,o,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Lw(l)}async sendMessage(e){var n;await this.sendPromise;const o=Tn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,u,f;const g=await r,p=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,S=this.getHistory(!0).length;let b=[];_!=null&&(b=(f=_.slice(S))!==null&&f!==void 0?f:[]);const C=p?[p]:[];this.recordHistory(o,C,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=Tn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?T0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Ii(this,arguments,function*(){var r,l,u,f,g,p;const _=[];try{for(var S=!0,b=Ni(e),C;C=yield De(b.next()),r=C.done,!r;S=!0){f=C.value,S=!1;const I=f;if(kw(I)){const L=(p=(g=I.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;L!==void 0&&_.push(L)}yield yield De(I)}}catch(I){l={error:I}}finally{try{!S&&!r&&(u=b.return)&&(yield De(u.call(b)))}finally{if(l)throw l.error}}this.recordHistory(n,_)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...T0(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ll extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ll.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gw(t){const e={},n=d(t,["file"]);return n!=null&&h(e,["file"],n),e}function Fw(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function qw(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","file"],$T(n)),e}function Hw(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function zw(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","file"],$T(n)),e}function Yw(t){const e={},n=d(t,["uris"]);return n!=null&&h(e,["uris"],n),e}function Jw(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function Kw(t){const e={},n=d(t,["config"]);return n!=null&&Jw(n,e),e}function jw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=d(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}function $w(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qw extends No{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mr(Co.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Kw(e);return l=ve("files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=jw(g),_=new Xx;return Object.assign(_,p),_})}}async createInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Gw(e);return l=ve("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=Fw(g),_=new Wx;return Object.assign(_,p),_})}}async get(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=zw(e);return l=ve("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=qw(e);return l=ve("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=Hw(g),_=new Zx;return Object.assign(_,p),_})}}async registerFilesInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Yw(e);return l=ve("files:register",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=$w(g),_=new eC;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uc(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Xw(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>hR(l))),h(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&h(e,["role"],o),e}function Ww(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Zw(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const o=d(t,["args"]);o!=null&&h(e,["args"],o);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eR(t){const e={},n=d(t,["description"]);n!=null&&h(e,["description"],n);const o=d(t,["name"]);o!=null&&h(e,["name"],o);const r=d(t,["parameters"]);r!=null&&h(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(t,["response"]);u!=null&&h(e,["response"],u);const f=d(t,["responseJsonSchema"]);if(f!=null&&h(e,["responseJsonSchema"],f),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function tR(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const o=d(t,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const r=d(t,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=d(t,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=d(t,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const f=d(t,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const g=d(t,["logprobs"]);g!=null&&h(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const _=d(t,["mediaResolution"]);_!=null&&h(e,["mediaResolution"],_);const S=d(t,["presencePenalty"]);S!=null&&h(e,["presencePenalty"],S);const b=d(t,["responseLogprobs"]);b!=null&&h(e,["responseLogprobs"],b);const C=d(t,["responseMimeType"]);C!=null&&h(e,["responseMimeType"],C);const I=d(t,["responseModalities"]);I!=null&&h(e,["responseModalities"],I);const L=d(t,["responseSchema"]);L!=null&&h(e,["responseSchema"],L);const k=d(t,["routingConfig"]);k!=null&&h(e,["routingConfig"],k);const Y=d(t,["seed"]);Y!=null&&h(e,["seed"],Y);const W=d(t,["speechConfig"]);W!=null&&h(e,["speechConfig"],W);const z=d(t,["stopSequences"]);z!=null&&h(e,["stopSequences"],z);const X=d(t,["temperature"]);X!=null&&h(e,["temperature"],X);const q=d(t,["thinkingConfig"]);q!=null&&h(e,["thinkingConfig"],q);const se=d(t,["topK"]);se!=null&&h(e,["topK"],se);const D=d(t,["topP"]);if(D!=null&&h(e,["topP"],D),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function nR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function iR(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function oR(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=d(t,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const S=d(t,["speechConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","speechConfig"],qp(S));const b=d(t,["thinkingConfig"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","thinkingConfig"],b);const C=d(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],C);const I=d(t,["systemInstruction"]);e!==void 0&&I!=null&&h(e,["setup","systemInstruction"],Xw(Tn(I)));const L=d(t,["tools"]);if(e!==void 0&&L!=null){let se=Sa(L);Array.isArray(se)&&(se=se.map(D=>mR(Ea(D)))),h(e,["setup","tools"],se)}const k=d(t,["sessionResumption"]);e!==void 0&&k!=null&&h(e,["setup","sessionResumption"],pR(k));const Y=d(t,["inputAudioTranscription"]);e!==void 0&&Y!=null&&h(e,["setup","inputAudioTranscription"],Y);const W=d(t,["outputAudioTranscription"]);e!==void 0&&W!=null&&h(e,["setup","outputAudioTranscription"],W);const z=d(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&h(e,["setup","realtimeInputConfig"],z);const X=d(t,["contextWindowCompression"]);e!==void 0&&X!=null&&h(e,["setup","contextWindowCompression"],X);const q=d(t,["proactivity"]);if(e!==void 0&&q!=null&&h(e,["setup","proactivity"],q),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function sR(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],tR(o));const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=d(t,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const S=d(t,["speechConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","speechConfig"],qp(S));const b=d(t,["thinkingConfig"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","thinkingConfig"],b);const C=d(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],C);const I=d(t,["systemInstruction"]);e!==void 0&&I!=null&&h(e,["setup","systemInstruction"],Tn(I));const L=d(t,["tools"]);if(e!==void 0&&L!=null){let D=Sa(L);Array.isArray(D)&&(D=D.map(N=>gR(Ea(N)))),h(e,["setup","tools"],D)}const k=d(t,["sessionResumption"]);e!==void 0&&k!=null&&h(e,["setup","sessionResumption"],k);const Y=d(t,["inputAudioTranscription"]);e!==void 0&&Y!=null&&h(e,["setup","inputAudioTranscription"],Y);const W=d(t,["outputAudioTranscription"]);e!==void 0&&W!=null&&h(e,["setup","outputAudioTranscription"],W);const z=d(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&h(e,["setup","realtimeInputConfig"],z);const X=d(t,["contextWindowCompression"]);e!==void 0&&X!=null&&h(e,["setup","contextWindowCompression"],X);const q=d(t,["proactivity"]);e!==void 0&&q!=null&&h(e,["setup","proactivity"],q);const se=d(t,["explicitVadSignal"]);return e!==void 0&&se!=null&&h(e,["setup","explicitVadSignal"],se),n}function rR(t,e){const n={},o=d(e,["model"]);o!=null&&h(n,["setup","model"],it(t,o));const r=d(e,["config"]);return r!=null&&h(n,["config"],oR(r,n)),n}function aR(t,e){const n={},o=d(e,["model"]);o!=null&&h(n,["setup","model"],it(t,o));const r=d(e,["config"]);return r!=null&&h(n,["config"],sR(r,n)),n}function lR(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function uR(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["weightedPrompts"],o)}return e}function cR(t){const e={},n=d(t,["media"]);if(n!=null){let p=zT(n);Array.isArray(p)&&(p=p.map(_=>Uc(_))),h(e,["mediaChunks"],p)}const o=d(t,["audio"]);o!=null&&h(e,["audio"],Uc(JT(o)));const r=d(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&h(e,["video"],Uc(YT(l)));const u=d(t,["text"]);u!=null&&h(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&h(e,["activityStart"],f);const g=d(t,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function dR(t){const e={},n=d(t,["media"]);if(n!=null){let p=zT(n);Array.isArray(p)&&(p=p.map(_=>_)),h(e,["mediaChunks"],p)}const o=d(t,["audio"]);o!=null&&h(e,["audio"],JT(o));const r=d(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&h(e,["video"],YT(l));const u=d(t,["text"]);u!=null&&h(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&h(e,["activityStart"],f);const g=d(t,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function fR(t){const e={},n=d(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const o=d(t,["serverContent"]);o!=null&&h(e,["serverContent"],o);const r=d(t,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=d(t,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=d(t,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],yR(u));const f=d(t,["goAway"]);f!=null&&h(e,["goAway"],f);const g=d(t,["sessionResumptionUpdate"]);g!=null&&h(e,["sessionResumptionUpdate"],g);const p=d(t,["voiceActivityDetectionSignal"]);p!=null&&h(e,["voiceActivityDetectionSignal"],p);const _=d(t,["voiceActivity"]);return _!=null&&h(e,["voiceActivity"],vR(_)),e}function hR(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],Ww(l));const u=d(t,["functionCall"]);u!=null&&h(e,["functionCall"],Zw(u));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const g=d(t,["inlineData"]);g!=null&&h(e,["inlineData"],Uc(g));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const _=d(t,["thought"]);_!=null&&h(e,["thought"],_);const S=d(t,["thoughtSignature"]);S!=null&&h(e,["thoughtSignature"],S);const b=d(t,["videoMetadata"]);return b!=null&&h(e,["videoMetadata"],b),e}function pR(t){const e={},n=d(t,["handle"]);if(n!=null&&h(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function mR(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(S=>S)),h(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],nR(u));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],iR(f));const g=d(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function gR(t){const e={},n=d(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const o=d(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=d(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=d(t,["functionDeclarations"]);if(u!=null){let S=u;Array.isArray(S)&&(S=S.map(b=>eR(b))),h(e,["functionDeclarations"],S)}const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],f);const g=d(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const _=d(t,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function yR(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const o=d(t,["cachedContentTokenCount"]);o!=null&&h(e,["cachedContentTokenCount"],o);const r=d(t,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=d(t,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const f=d(t,["totalTokenCount"]);f!=null&&h(e,["totalTokenCount"],f);const g=d(t,["promptTokensDetails"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(I=>I)),h(e,["promptTokensDetails"],C)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(I=>I)),h(e,["cacheTokensDetails"],C)}const _=d(t,["candidatesTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(I=>I)),h(e,["responseTokensDetails"],C)}const S=d(t,["toolUsePromptTokensDetails"]);if(S!=null){let C=S;Array.isArray(C)&&(C=C.map(I=>I)),h(e,["toolUsePromptTokensDetails"],C)}const b=d(t,["trafficType"]);return b!=null&&h(e,["trafficType"],b),e}function vR(t){const e={},n=d(t,["type"]);return n!=null&&h(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _R(t,e){const n={},o=d(t,["data"]);if(o!=null&&h(n,["data"],o),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function TR(t,e){const n={},o=d(t,["content"]);o!=null&&h(n,["content"],o);const r=d(t,["citationMetadata"]);r!=null&&h(n,["citationMetadata"],ER(r));const l=d(t,["tokenCount"]);l!=null&&h(n,["tokenCount"],l);const u=d(t,["finishReason"]);u!=null&&h(n,["finishReason"],u);const f=d(t,["avgLogprobs"]);f!=null&&h(n,["avgLogprobs"],f);const g=d(t,["groundingMetadata"]);g!=null&&h(n,["groundingMetadata"],g);const p=d(t,["index"]);p!=null&&h(n,["index"],p);const _=d(t,["logprobsResult"]);_!=null&&h(n,["logprobsResult"],_);const S=d(t,["safetyRatings"]);if(S!=null){let C=S;Array.isArray(C)&&(C=C.map(I=>I)),h(n,["safetyRatings"],C)}const b=d(t,["urlContextMetadata"]);return b!=null&&h(n,["urlContextMetadata"],b),n}function ER(t,e){const n={},o=d(t,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(n,["citations"],r)}return n}function SR(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["contents"]);if(l!=null){let u=vi(l);Array.isArray(u)&&(u=u.map(f=>f)),h(o,["contents"],u)}return o}function bR(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["tokensInfo"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(n,["tokensInfo"],l)}return n}function AR(t,e){const n={},o=d(t,["values"]);o!=null&&h(n,["values"],o);const r=d(t,["statistics"]);return r!=null&&h(n,["statistics"],xR(r)),n}function xR(t,e){const n={},o=d(t,["truncated"]);o!=null&&h(n,["truncated"],o);const r=d(t,["token_count"]);return r!=null&&h(n,["tokenCount"],r),n}function sd(t,e){const n={},o=d(t,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>UI(u))),h(n,["parts"],l)}const r=d(t,["role"]);return r!=null&&h(n,["role"],r),n}function CR(t,e){const n={},o=d(t,["controlType"]);o!=null&&h(n,["controlType"],o);const r=d(t,["enableControlImageComputation"]);return r!=null&&h(n,["computeControl"],r),n}function wR(t,e){const n={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function RR(t,e,n){const o={},r=d(t,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],Tn(r));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>rE(g))),h(e,["tools"],f)}const u=d(t,["generationConfig"]);return e!==void 0&&u!=null&&h(e,["generationConfig"],_I(u)),o}function IR(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["contents"]);if(l!=null){let f=vi(l);Array.isArray(f)&&(f=f.map(g=>sd(g))),h(o,["contents"],f)}const u=d(e,["config"]);return u!=null&&wR(u),o}function NR(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["contents"]);if(l!=null){let f=vi(l);Array.isArray(f)&&(f=f.map(g=>g)),h(o,["contents"],f)}const u=d(e,["config"]);return u!=null&&RR(u,o),o}function MR(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["totalTokens"]);r!=null&&h(n,["totalTokens"],r);const l=d(t,["cachedContentTokenCount"]);return l!=null&&h(n,["cachedContentTokenCount"],l),n}function DR(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["totalTokens"]);return r!=null&&h(n,["totalTokens"],r),n}function PR(t,e,n){const o={},r=d(e,["model"]);return r!=null&&h(o,["_url","name"],it(t,r)),o}function UR(t,e,n){const o={},r=d(e,["model"]);return r!=null&&h(o,["_url","name"],it(t,r)),o}function VR(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function kR(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function LR(t,e,n){const o={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=d(t,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const f=d(t,["aspectRatio"]);e!==void 0&&f!=null&&h(e,["parameters","aspectRatio"],f);const g=d(t,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const p=d(t,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const _=d(t,["safetyFilterLevel"]);e!==void 0&&_!=null&&h(e,["parameters","safetySetting"],_);const S=d(t,["personGeneration"]);e!==void 0&&S!=null&&h(e,["parameters","personGeneration"],S);const b=d(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&h(e,["parameters","includeSafetyAttributes"],b);const C=d(t,["includeRaiReason"]);e!==void 0&&C!=null&&h(e,["parameters","includeRaiReason"],C);const I=d(t,["language"]);e!==void 0&&I!=null&&h(e,["parameters","language"],I);const L=d(t,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const k=d(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&h(e,["parameters","outputOptions","compressionQuality"],k);const Y=d(t,["addWatermark"]);e!==void 0&&Y!=null&&h(e,["parameters","addWatermark"],Y);const W=d(t,["labels"]);e!==void 0&&W!=null&&h(e,["labels"],W);const z=d(t,["editMode"]);e!==void 0&&z!=null&&h(e,["parameters","editMode"],z);const X=d(t,["baseSteps"]);return e!==void 0&&X!=null&&h(e,["parameters","editConfig","baseSteps"],X),o}function OR(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=d(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(p=>GI(p))),h(o,["instances[0]","referenceImages"],g)}const f=d(e,["config"]);return f!=null&&LR(f,o),o}function BR(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>rd(u))),h(n,["generatedImages"],l)}return n}function GR(t,e,n){const o={},r=d(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const l=d(t,["title"]);e!==void 0&&l!=null&&h(e,["requests[]","title"],l);const u=d(t,["outputDimensionality"]);if(e!==void 0&&u!=null&&h(e,["requests[]","outputDimensionality"],u),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function FR(t,e,n){const o={},r=d(t,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const l=d(t,["title"]);e!==void 0&&l!=null&&h(e,["instances[]","title"],l);const u=d(t,["outputDimensionality"]);e!==void 0&&u!=null&&h(e,["parameters","outputDimensionality"],u);const f=d(t,["mimeType"]);e!==void 0&&f!=null&&h(e,["instances[]","mimeType"],f);const g=d(t,["autoTruncate"]);return e!==void 0&&g!=null&&h(e,["parameters","autoTruncate"],g),o}function qR(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["contents"]);if(l!=null){let g=Bp(t,l);Array.isArray(g)&&(g=g.map(p=>p)),h(o,["requests[]","content"],g)}const u=d(e,["config"]);u!=null&&GR(u,o);const f=d(e,["model"]);return f!==void 0&&h(o,["requests[]","model"],it(t,f)),o}function HR(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["contents"]);if(l!=null){let f=Bp(t,l);Array.isArray(f)&&(f=f.map(g=>g)),h(o,["instances[]","content"],f)}const u=d(e,["config"]);return u!=null&&FR(u,o),o}function zR(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),h(n,["embeddings"],u)}const l=d(t,["metadata"]);return l!=null&&h(n,["metadata"],l),n}function YR(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>AR(f))),h(n,["embeddings"],u)}const l=d(t,["metadata"]);return l!=null&&h(n,["metadata"],l),n}function JR(t,e){const n={},o=d(t,["endpoint"]);o!=null&&h(n,["name"],o);const r=d(t,["deployedModelId"]);return r!=null&&h(n,["deployedModelId"],r),n}function KR(t,e){const n={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["fileUri"]);o!=null&&h(n,["fileUri"],o);const r=d(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function jR(t,e){const n={},o=d(t,["id"]);o!=null&&h(n,["id"],o);const r=d(t,["args"]);r!=null&&h(n,["args"],r);const l=d(t,["name"]);if(l!=null&&h(n,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function $R(t,e){const n={},o=d(t,["allowedFunctionNames"]);o!=null&&h(n,["allowedFunctionNames"],o);const r=d(t,["mode"]);if(r!=null&&h(n,["mode"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function QR(t,e){const n={},o=d(t,["description"]);o!=null&&h(n,["description"],o);const r=d(t,["name"]);r!=null&&h(n,["name"],r);const l=d(t,["parameters"]);l!=null&&h(n,["parameters"],l);const u=d(t,["parametersJsonSchema"]);u!=null&&h(n,["parametersJsonSchema"],u);const f=d(t,["response"]);f!=null&&h(n,["response"],f);const g=d(t,["responseJsonSchema"]);if(g!=null&&h(n,["responseJsonSchema"],g),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function XR(t,e,n,o){const r={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&h(n,["systemInstruction"],sd(Tn(l)));const u=d(e,["temperature"]);u!=null&&h(r,["temperature"],u);const f=d(e,["topP"]);f!=null&&h(r,["topP"],f);const g=d(e,["topK"]);g!=null&&h(r,["topK"],g);const p=d(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const _=d(e,["maxOutputTokens"]);_!=null&&h(r,["maxOutputTokens"],_);const S=d(e,["stopSequences"]);S!=null&&h(r,["stopSequences"],S);const b=d(e,["responseLogprobs"]);b!=null&&h(r,["responseLogprobs"],b);const C=d(e,["logprobs"]);C!=null&&h(r,["logprobs"],C);const I=d(e,["presencePenalty"]);I!=null&&h(r,["presencePenalty"],I);const L=d(e,["frequencyPenalty"]);L!=null&&h(r,["frequencyPenalty"],L);const k=d(e,["seed"]);k!=null&&h(r,["seed"],k);const Y=d(e,["responseMimeType"]);Y!=null&&h(r,["responseMimeType"],Y);const W=d(e,["responseSchema"]);W!=null&&h(r,["responseSchema"],Gp(W));const z=d(e,["responseJsonSchema"]);if(z!=null&&h(r,["responseJsonSchema"],z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=d(e,["safetySettings"]);if(n!==void 0&&X!=null){let Ne=X;Array.isArray(Ne)&&(Ne=Ne.map(ot=>FI(ot))),h(n,["safetySettings"],Ne)}const q=d(e,["tools"]);if(n!==void 0&&q!=null){let Ne=Sa(q);Array.isArray(Ne)&&(Ne=Ne.map(ot=>jI(Ea(ot)))),h(n,["tools"],Ne)}const se=d(e,["toolConfig"]);if(n!==void 0&&se!=null&&h(n,["toolConfig"],KI(se)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=d(e,["cachedContent"]);n!==void 0&&D!=null&&h(n,["cachedContent"],Mo(t,D));const N=d(e,["responseModalities"]);N!=null&&h(r,["responseModalities"],N);const M=d(e,["mediaResolution"]);M!=null&&h(r,["mediaResolution"],M);const U=d(e,["speechConfig"]);if(U!=null&&h(r,["speechConfig"],Fp(U)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=d(e,["thinkingConfig"]);O!=null&&h(r,["thinkingConfig"],O);const G=d(e,["imageConfig"]);G!=null&&h(r,["imageConfig"],AI(G));const V=d(e,["enableEnhancedCivicAnswers"]);if(V!=null&&h(r,["enableEnhancedCivicAnswers"],V),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function WR(t,e,n,o){const r={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&h(n,["systemInstruction"],Tn(l));const u=d(e,["temperature"]);u!=null&&h(r,["temperature"],u);const f=d(e,["topP"]);f!=null&&h(r,["topP"],f);const g=d(e,["topK"]);g!=null&&h(r,["topK"],g);const p=d(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const _=d(e,["maxOutputTokens"]);_!=null&&h(r,["maxOutputTokens"],_);const S=d(e,["stopSequences"]);S!=null&&h(r,["stopSequences"],S);const b=d(e,["responseLogprobs"]);b!=null&&h(r,["responseLogprobs"],b);const C=d(e,["logprobs"]);C!=null&&h(r,["logprobs"],C);const I=d(e,["presencePenalty"]);I!=null&&h(r,["presencePenalty"],I);const L=d(e,["frequencyPenalty"]);L!=null&&h(r,["frequencyPenalty"],L);const k=d(e,["seed"]);k!=null&&h(r,["seed"],k);const Y=d(e,["responseMimeType"]);Y!=null&&h(r,["responseMimeType"],Y);const W=d(e,["responseSchema"]);W!=null&&h(r,["responseSchema"],Gp(W));const z=d(e,["responseJsonSchema"]);z!=null&&h(r,["responseJsonSchema"],z);const X=d(e,["routingConfig"]);X!=null&&h(r,["routingConfig"],X);const q=d(e,["modelSelectionConfig"]);q!=null&&h(r,["modelConfig"],q);const se=d(e,["safetySettings"]);if(n!==void 0&&se!=null){let Ee=se;Array.isArray(Ee)&&(Ee=Ee.map(ke=>ke)),h(n,["safetySettings"],Ee)}const D=d(e,["tools"]);if(n!==void 0&&D!=null){let Ee=Sa(D);Array.isArray(Ee)&&(Ee=Ee.map(ke=>rE(Ea(ke)))),h(n,["tools"],Ee)}const N=d(e,["toolConfig"]);n!==void 0&&N!=null&&h(n,["toolConfig"],N);const M=d(e,["labels"]);n!==void 0&&M!=null&&h(n,["labels"],M);const U=d(e,["cachedContent"]);n!==void 0&&U!=null&&h(n,["cachedContent"],Mo(t,U));const O=d(e,["responseModalities"]);O!=null&&h(r,["responseModalities"],O);const G=d(e,["mediaResolution"]);G!=null&&h(r,["mediaResolution"],G);const V=d(e,["speechConfig"]);V!=null&&h(r,["speechConfig"],Fp(V));const Ne=d(e,["audioTimestamp"]);Ne!=null&&h(r,["audioTimestamp"],Ne);const ot=d(e,["thinkingConfig"]);ot!=null&&h(r,["thinkingConfig"],ot);const te=d(e,["imageConfig"]);if(te!=null&&h(r,["imageConfig"],xI(te)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const he=d(e,["modelArmorConfig"]);return n!==void 0&&he!=null&&h(n,["modelArmorConfig"],he),r}function E0(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["contents"]);if(l!=null){let f=vi(l);Array.isArray(f)&&(f=f.map(g=>sd(g))),h(o,["contents"],f)}const u=d(e,["config"]);return u!=null&&h(o,["generationConfig"],XR(t,u,o)),o}function S0(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["contents"]);if(l!=null){let f=vi(l);Array.isArray(f)&&(f=f.map(g=>g)),h(o,["contents"],f)}const u=d(e,["config"]);return u!=null&&h(o,["generationConfig"],WR(t,u,o)),o}function b0(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(_=>TR(_))),h(n,["candidates"],p)}const l=d(t,["modelVersion"]);l!=null&&h(n,["modelVersion"],l);const u=d(t,["promptFeedback"]);u!=null&&h(n,["promptFeedback"],u);const f=d(t,["responseId"]);f!=null&&h(n,["responseId"],f);const g=d(t,["usageMetadata"]);return g!=null&&h(n,["usageMetadata"],g),n}function A0(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["candidates"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(S=>S)),h(n,["candidates"],_)}const l=d(t,["createTime"]);l!=null&&h(n,["createTime"],l);const u=d(t,["modelVersion"]);u!=null&&h(n,["modelVersion"],u);const f=d(t,["promptFeedback"]);f!=null&&h(n,["promptFeedback"],f);const g=d(t,["responseId"]);g!=null&&h(n,["responseId"],g);const p=d(t,["usageMetadata"]);return p!=null&&h(n,["usageMetadata"],p),n}function ZR(t,e,n){const o={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=d(t,["guidanceScale"]);if(e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const g=d(t,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const _=d(t,["includeRaiReason"]);e!==void 0&&_!=null&&h(e,["parameters","includeRaiReason"],_);const S=d(t,["language"]);e!==void 0&&S!=null&&h(e,["parameters","language"],S);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","mimeType"],b);const C=d(t,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&h(e,["parameters","outputOptions","compressionQuality"],C),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=d(t,["imageSize"]);if(e!==void 0&&I!=null&&h(e,["parameters","sampleImageSize"],I),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function eI(t,e,n){const o={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=d(t,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const f=d(t,["aspectRatio"]);e!==void 0&&f!=null&&h(e,["parameters","aspectRatio"],f);const g=d(t,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const p=d(t,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const _=d(t,["safetyFilterLevel"]);e!==void 0&&_!=null&&h(e,["parameters","safetySetting"],_);const S=d(t,["personGeneration"]);e!==void 0&&S!=null&&h(e,["parameters","personGeneration"],S);const b=d(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&h(e,["parameters","includeSafetyAttributes"],b);const C=d(t,["includeRaiReason"]);e!==void 0&&C!=null&&h(e,["parameters","includeRaiReason"],C);const I=d(t,["language"]);e!==void 0&&I!=null&&h(e,["parameters","language"],I);const L=d(t,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const k=d(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&h(e,["parameters","outputOptions","compressionQuality"],k);const Y=d(t,["addWatermark"]);e!==void 0&&Y!=null&&h(e,["parameters","addWatermark"],Y);const W=d(t,["labels"]);e!==void 0&&W!=null&&h(e,["labels"],W);const z=d(t,["imageSize"]);e!==void 0&&z!=null&&h(e,["parameters","sampleImageSize"],z);const X=d(t,["enhancePrompt"]);return e!==void 0&&X!=null&&h(e,["parameters","enhancePrompt"],X),o}function tI(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=d(e,["config"]);return u!=null&&ZR(u,o),o}function nI(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=d(e,["config"]);return u!=null&&eI(u,o),o}function iI(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>mI(f))),h(n,["generatedImages"],u)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&h(n,["positivePromptSafetyAttributes"],oE(l)),n}function oI(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>rd(f))),h(n,["generatedImages"],u)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&h(n,["positivePromptSafetyAttributes"],sE(l)),n}function sI(t,e,n){const o={},r=d(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=d(t,["durationSeconds"]);if(e!==void 0&&l!=null&&h(e,["parameters","durationSeconds"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const f=d(t,["resolution"]);e!==void 0&&f!=null&&h(e,["parameters","resolution"],f);const g=d(t,["personGeneration"]);if(e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(t,["negativePrompt"]);e!==void 0&&p!=null&&h(e,["parameters","negativePrompt"],p);const _=d(t,["enhancePrompt"]);if(e!==void 0&&_!=null&&h(e,["parameters","enhancePrompt"],_),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const S=d(t,["lastFrame"]);e!==void 0&&S!=null&&h(e,["instances[0]","lastFrame"],ad(S));const b=d(t,["referenceImages"]);if(e!==void 0&&b!=null){let C=b;Array.isArray(C)&&(C=C.map(I=>aN(I))),h(e,["instances[0]","referenceImages"],C)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function rI(t,e,n){const o={},r=d(t,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=d(t,["fps"]);e!==void 0&&u!=null&&h(e,["parameters","fps"],u);const f=d(t,["durationSeconds"]);e!==void 0&&f!=null&&h(e,["parameters","durationSeconds"],f);const g=d(t,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const p=d(t,["aspectRatio"]);e!==void 0&&p!=null&&h(e,["parameters","aspectRatio"],p);const _=d(t,["resolution"]);e!==void 0&&_!=null&&h(e,["parameters","resolution"],_);const S=d(t,["personGeneration"]);e!==void 0&&S!=null&&h(e,["parameters","personGeneration"],S);const b=d(t,["pubsubTopic"]);e!==void 0&&b!=null&&h(e,["parameters","pubsubTopic"],b);const C=d(t,["negativePrompt"]);e!==void 0&&C!=null&&h(e,["parameters","negativePrompt"],C);const I=d(t,["enhancePrompt"]);e!==void 0&&I!=null&&h(e,["parameters","enhancePrompt"],I);const L=d(t,["generateAudio"]);e!==void 0&&L!=null&&h(e,["parameters","generateAudio"],L);const k=d(t,["lastFrame"]);e!==void 0&&k!=null&&h(e,["instances[0]","lastFrame"],Pi(k));const Y=d(t,["referenceImages"]);if(e!==void 0&&Y!=null){let X=Y;Array.isArray(X)&&(X=X.map(q=>lN(q))),h(e,["instances[0]","referenceImages"],X)}const W=d(t,["mask"]);e!==void 0&&W!=null&&h(e,["instances[0]","mask"],rN(W));const z=d(t,["compressionQuality"]);return e!==void 0&&z!=null&&h(e,["parameters","compressionQuality"],z),o}function aI(t,e){const n={},o=d(t,["name"]);o!=null&&h(n,["name"],o);const r=d(t,["metadata"]);r!=null&&h(n,["metadata"],r);const l=d(t,["done"]);l!=null&&h(n,["done"],l);const u=d(t,["error"]);u!=null&&h(n,["error"],u);const f=d(t,["response","generateVideoResponse"]);return f!=null&&h(n,["response"],dI(f)),n}function lI(t,e){const n={},o=d(t,["name"]);o!=null&&h(n,["name"],o);const r=d(t,["metadata"]);r!=null&&h(n,["metadata"],r);const l=d(t,["done"]);l!=null&&h(n,["done"],l);const u=d(t,["error"]);u!=null&&h(n,["error"],u);const f=d(t,["response"]);return f!=null&&h(n,["response"],fI(f)),n}function uI(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=d(e,["image"]);u!=null&&h(o,["instances[0]","image"],ad(u));const f=d(e,["video"]);f!=null&&h(o,["instances[0]","video"],aE(f));const g=d(e,["source"]);g!=null&&hI(g,o);const p=d(e,["config"]);return p!=null&&sI(p,o),o}function cI(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=d(e,["image"]);u!=null&&h(o,["instances[0]","image"],Pi(u));const f=d(e,["video"]);f!=null&&h(o,["instances[0]","video"],lE(f));const g=d(e,["source"]);g!=null&&pI(g,o);const p=d(e,["config"]);return p!=null&&rI(p,o),o}function dI(t,e){const n={},o=d(t,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>yI(f))),h(n,["generatedVideos"],u)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&h(n,["raiMediaFilteredCount"],r);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&h(n,["raiMediaFilteredReasons"],l),n}function fI(t,e){const n={},o=d(t,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>vI(f))),h(n,["generatedVideos"],u)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&h(n,["raiMediaFilteredCount"],r);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&h(n,["raiMediaFilteredReasons"],l),n}function hI(t,e,n){const o={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],ad(l));const u=d(t,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],aE(u)),o}function pI(t,e,n){const o={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],Pi(l));const u=d(t,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],lE(u)),o}function mI(t,e){const n={},o=d(t,["_self"]);o!=null&&h(n,["image"],CI(o));const r=d(t,["raiFilteredReason"]);r!=null&&h(n,["raiFilteredReason"],r);const l=d(t,["_self"]);return l!=null&&h(n,["safetyAttributes"],oE(l)),n}function rd(t,e){const n={},o=d(t,["_self"]);o!=null&&h(n,["image"],iE(o));const r=d(t,["raiFilteredReason"]);r!=null&&h(n,["raiFilteredReason"],r);const l=d(t,["_self"]);l!=null&&h(n,["safetyAttributes"],sE(l));const u=d(t,["prompt"]);return u!=null&&h(n,["enhancedPrompt"],u),n}function gI(t,e){const n={},o=d(t,["_self"]);o!=null&&h(n,["mask"],iE(o));const r=d(t,["labels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(n,["labels"],l)}return n}function yI(t,e){const n={},o=d(t,["video"]);return o!=null&&h(n,["video"],oN(o)),n}function vI(t,e){const n={},o=d(t,["_self"]);return o!=null&&h(n,["video"],sN(o)),n}function _I(t,e){const n={},o=d(t,["modelSelectionConfig"]);o!=null&&h(n,["modelConfig"],o);const r=d(t,["responseJsonSchema"]);r!=null&&h(n,["responseJsonSchema"],r);const l=d(t,["audioTimestamp"]);l!=null&&h(n,["audioTimestamp"],l);const u=d(t,["candidateCount"]);u!=null&&h(n,["candidateCount"],u);const f=d(t,["enableAffectiveDialog"]);f!=null&&h(n,["enableAffectiveDialog"],f);const g=d(t,["frequencyPenalty"]);g!=null&&h(n,["frequencyPenalty"],g);const p=d(t,["logprobs"]);p!=null&&h(n,["logprobs"],p);const _=d(t,["maxOutputTokens"]);_!=null&&h(n,["maxOutputTokens"],_);const S=d(t,["mediaResolution"]);S!=null&&h(n,["mediaResolution"],S);const b=d(t,["presencePenalty"]);b!=null&&h(n,["presencePenalty"],b);const C=d(t,["responseLogprobs"]);C!=null&&h(n,["responseLogprobs"],C);const I=d(t,["responseMimeType"]);I!=null&&h(n,["responseMimeType"],I);const L=d(t,["responseModalities"]);L!=null&&h(n,["responseModalities"],L);const k=d(t,["responseSchema"]);k!=null&&h(n,["responseSchema"],k);const Y=d(t,["routingConfig"]);Y!=null&&h(n,["routingConfig"],Y);const W=d(t,["seed"]);W!=null&&h(n,["seed"],W);const z=d(t,["speechConfig"]);z!=null&&h(n,["speechConfig"],z);const X=d(t,["stopSequences"]);X!=null&&h(n,["stopSequences"],X);const q=d(t,["temperature"]);q!=null&&h(n,["temperature"],q);const se=d(t,["thinkingConfig"]);se!=null&&h(n,["thinkingConfig"],se);const D=d(t,["topK"]);D!=null&&h(n,["topK"],D);const N=d(t,["topP"]);if(N!=null&&h(n,["topP"],N),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function TI(t,e,n){const o={},r=d(e,["model"]);return r!=null&&h(o,["_url","name"],it(t,r)),o}function EI(t,e,n){const o={},r=d(e,["model"]);return r!=null&&h(o,["_url","name"],it(t,r)),o}function SI(t,e){const n={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=d(t,["enableWidget"]);return o!=null&&h(n,["enableWidget"],o),n}function bI(t,e){const n={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=d(t,["timeRangeFilter"]);return o!=null&&h(n,["timeRangeFilter"],o),n}function AI(t,e){const n={},o=d(t,["aspectRatio"]);o!=null&&h(n,["aspectRatio"],o);const r=d(t,["imageSize"]);if(r!=null&&h(n,["imageSize"],r),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function xI(t,e){const n={},o=d(t,["aspectRatio"]);o!=null&&h(n,["aspectRatio"],o);const r=d(t,["imageSize"]);r!=null&&h(n,["imageSize"],r);const l=d(t,["personGeneration"]);l!=null&&h(n,["personGeneration"],l);const u=d(t,["outputMimeType"]);u!=null&&h(n,["imageOutputOptions","mimeType"],u);const f=d(t,["outputCompressionQuality"]);return f!=null&&h(n,["imageOutputOptions","compressionQuality"],f),n}function CI(t,e){const n={},o=d(t,["bytesBase64Encoded"]);o!=null&&h(n,["imageBytes"],Cs(o));const r=d(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function iE(t,e){const n={},o=d(t,["gcsUri"]);o!=null&&h(n,["gcsUri"],o);const r=d(t,["bytesBase64Encoded"]);r!=null&&h(n,["imageBytes"],Cs(r));const l=d(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function ad(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=d(t,["imageBytes"]);o!=null&&h(n,["bytesBase64Encoded"],Cs(o));const r=d(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function Pi(t,e){const n={},o=d(t,["gcsUri"]);o!=null&&h(n,["gcsUri"],o);const r=d(t,["imageBytes"]);r!=null&&h(n,["bytesBase64Encoded"],Cs(r));const l=d(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function wI(t,e,n,o){const r={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&h(n,["_query","pageSize"],l);const u=d(e,["pageToken"]);n!==void 0&&u!=null&&h(n,["_query","pageToken"],u);const f=d(e,["filter"]);n!==void 0&&f!=null&&h(n,["_query","filter"],f);const g=d(e,["queryBase"]);return n!==void 0&&g!=null&&h(n,["_url","models_url"],QT(t,g)),r}function RI(t,e,n,o){const r={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&h(n,["_query","pageSize"],l);const u=d(e,["pageToken"]);n!==void 0&&u!=null&&h(n,["_query","pageToken"],u);const f=d(e,["filter"]);n!==void 0&&f!=null&&h(n,["_query","filter"],f);const g=d(e,["queryBase"]);return n!==void 0&&g!=null&&h(n,["_url","models_url"],QT(t,g)),r}function II(t,e,n){const o={},r=d(e,["config"]);return r!=null&&wI(t,r,o),o}function NI(t,e,n){const o={},r=d(e,["config"]);return r!=null&&RI(t,r,o),o}function MI(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=d(t,["_self"]);if(l!=null){let u=XT(l);Array.isArray(u)&&(u=u.map(f=>ip(f))),h(n,["models"],u)}return n}function DI(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=d(t,["_self"]);if(l!=null){let u=XT(l);Array.isArray(u)&&(u=u.map(f=>op(f))),h(n,["models"],u)}return n}function PI(t,e){const n={},o=d(t,["maskMode"]);o!=null&&h(n,["maskMode"],o);const r=d(t,["segmentationClasses"]);r!=null&&h(n,["maskClasses"],r);const l=d(t,["maskDilation"]);return l!=null&&h(n,["dilation"],l),n}function ip(t,e){const n={},o=d(t,["name"]);o!=null&&h(n,["name"],o);const r=d(t,["displayName"]);r!=null&&h(n,["displayName"],r);const l=d(t,["description"]);l!=null&&h(n,["description"],l);const u=d(t,["version"]);u!=null&&h(n,["version"],u);const f=d(t,["_self"]);f!=null&&h(n,["tunedModelInfo"],$I(f));const g=d(t,["inputTokenLimit"]);g!=null&&h(n,["inputTokenLimit"],g);const p=d(t,["outputTokenLimit"]);p!=null&&h(n,["outputTokenLimit"],p);const _=d(t,["supportedGenerationMethods"]);_!=null&&h(n,["supportedActions"],_);const S=d(t,["temperature"]);S!=null&&h(n,["temperature"],S);const b=d(t,["maxTemperature"]);b!=null&&h(n,["maxTemperature"],b);const C=d(t,["topP"]);C!=null&&h(n,["topP"],C);const I=d(t,["topK"]);I!=null&&h(n,["topK"],I);const L=d(t,["thinking"]);return L!=null&&h(n,["thinking"],L),n}function op(t,e){const n={},o=d(t,["name"]);o!=null&&h(n,["name"],o);const r=d(t,["displayName"]);r!=null&&h(n,["displayName"],r);const l=d(t,["description"]);l!=null&&h(n,["description"],l);const u=d(t,["versionId"]);u!=null&&h(n,["version"],u);const f=d(t,["deployedModels"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(C=>JR(C))),h(n,["endpoints"],b)}const g=d(t,["labels"]);g!=null&&h(n,["labels"],g);const p=d(t,["_self"]);p!=null&&h(n,["tunedModelInfo"],QI(p));const _=d(t,["defaultCheckpointId"]);_!=null&&h(n,["defaultCheckpointId"],_);const S=d(t,["checkpoints"]);if(S!=null){let b=S;Array.isArray(b)&&(b=b.map(C=>C)),h(n,["checkpoints"],b)}return n}function UI(t,e){const n={},o=d(t,["mediaResolution"]);o!=null&&h(n,["mediaResolution"],o);const r=d(t,["codeExecutionResult"]);r!=null&&h(n,["codeExecutionResult"],r);const l=d(t,["executableCode"]);l!=null&&h(n,["executableCode"],l);const u=d(t,["fileData"]);u!=null&&h(n,["fileData"],KR(u));const f=d(t,["functionCall"]);f!=null&&h(n,["functionCall"],jR(f));const g=d(t,["functionResponse"]);g!=null&&h(n,["functionResponse"],g);const p=d(t,["inlineData"]);p!=null&&h(n,["inlineData"],_R(p));const _=d(t,["text"]);_!=null&&h(n,["text"],_);const S=d(t,["thought"]);S!=null&&h(n,["thought"],S);const b=d(t,["thoughtSignature"]);b!=null&&h(n,["thoughtSignature"],b);const C=d(t,["videoMetadata"]);return C!=null&&h(n,["videoMetadata"],C),n}function VI(t,e){const n={},o=d(t,["productImage"]);return o!=null&&h(n,["image"],Pi(o)),n}function kI(t,e,n){const o={},r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=d(t,["baseSteps"]);e!==void 0&&l!=null&&h(e,["parameters","baseSteps"],l);const u=d(t,["outputGcsUri"]);e!==void 0&&u!=null&&h(e,["parameters","storageUri"],u);const f=d(t,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const g=d(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const p=d(t,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const _=d(t,["addWatermark"]);e!==void 0&&_!=null&&h(e,["parameters","addWatermark"],_);const S=d(t,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const b=d(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","compressionQuality"],b);const C=d(t,["enhancePrompt"]);e!==void 0&&C!=null&&h(e,["parameters","enhancePrompt"],C);const I=d(t,["labels"]);return e!==void 0&&I!=null&&h(e,["labels"],I),o}function LI(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["source"]);l!=null&&BI(l,o);const u=d(e,["config"]);return u!=null&&kI(u,o),o}function OI(t,e){const n={},o=d(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>rd(l))),h(n,["generatedImages"],r)}return n}function BI(t,e,n){const o={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["personImage"]);e!==void 0&&l!=null&&h(e,["instances[0]","personImage","image"],Pi(l));const u=d(t,["productImages"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(g=>VI(g))),h(e,["instances[0]","productImages"],f)}return o}function GI(t,e){const n={},o=d(t,["referenceImage"]);o!=null&&h(n,["referenceImage"],Pi(o));const r=d(t,["referenceId"]);r!=null&&h(n,["referenceId"],r);const l=d(t,["referenceType"]);l!=null&&h(n,["referenceType"],l);const u=d(t,["maskImageConfig"]);u!=null&&h(n,["maskImageConfig"],PI(u));const f=d(t,["controlImageConfig"]);f!=null&&h(n,["controlImageConfig"],CR(f));const g=d(t,["styleImageConfig"]);g!=null&&h(n,["styleImageConfig"],g);const p=d(t,["subjectImageConfig"]);return p!=null&&h(n,["subjectImageConfig"],p),n}function oE(t,e){const n={},o=d(t,["safetyAttributes","categories"]);o!=null&&h(n,["categories"],o);const r=d(t,["safetyAttributes","scores"]);r!=null&&h(n,["scores"],r);const l=d(t,["contentType"]);return l!=null&&h(n,["contentType"],l),n}function sE(t,e){const n={},o=d(t,["safetyAttributes","categories"]);o!=null&&h(n,["categories"],o);const r=d(t,["safetyAttributes","scores"]);r!=null&&h(n,["scores"],r);const l=d(t,["contentType"]);return l!=null&&h(n,["contentType"],l),n}function FI(t,e){const n={},o=d(t,["category"]);if(o!=null&&h(n,["category"],o),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(t,["threshold"]);return r!=null&&h(n,["threshold"],r),n}function qI(t,e){const n={},o=d(t,["image"]);return o!=null&&h(n,["image"],Pi(o)),n}function HI(t,e,n){const o={},r=d(t,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const l=d(t,["maxPredictions"]);e!==void 0&&l!=null&&h(e,["parameters","maxPredictions"],l);const u=d(t,["confidenceThreshold"]);e!==void 0&&u!=null&&h(e,["parameters","confidenceThreshold"],u);const f=d(t,["maskDilation"]);e!==void 0&&f!=null&&h(e,["parameters","maskDilation"],f);const g=d(t,["binaryColorThreshold"]);e!==void 0&&g!=null&&h(e,["parameters","binaryColorThreshold"],g);const p=d(t,["labels"]);return e!==void 0&&p!=null&&h(e,["labels"],p),o}function zI(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["source"]);l!=null&&JI(l,o);const u=d(e,["config"]);return u!=null&&HI(u,o),o}function YI(t,e){const n={},o=d(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>gI(l))),h(n,["generatedMasks"],r)}return n}function JI(t,e,n){const o={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],Pi(l));const u=d(t,["scribbleImage"]);return e!==void 0&&u!=null&&h(e,["instances[0]","scribble"],qI(u)),o}function KI(t,e){const n={},o=d(t,["retrievalConfig"]);o!=null&&h(n,["retrievalConfig"],o);const r=d(t,["functionCallingConfig"]);return r!=null&&h(n,["functionCallingConfig"],$R(r)),n}function jI(t,e){const n={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["computerUse"]);o!=null&&h(n,["computerUse"],o);const r=d(t,["fileSearch"]);r!=null&&h(n,["fileSearch"],r);const l=d(t,["codeExecution"]);if(l!=null&&h(n,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=d(t,["functionDeclarations"]);if(u!=null){let S=u;Array.isArray(S)&&(S=S.map(b=>b)),h(n,["functionDeclarations"],S)}const f=d(t,["googleMaps"]);f!=null&&h(n,["googleMaps"],SI(f));const g=d(t,["googleSearch"]);g!=null&&h(n,["googleSearch"],bI(g));const p=d(t,["googleSearchRetrieval"]);p!=null&&h(n,["googleSearchRetrieval"],p);const _=d(t,["urlContext"]);return _!=null&&h(n,["urlContext"],_),n}function rE(t,e){const n={},o=d(t,["retrieval"]);o!=null&&h(n,["retrieval"],o);const r=d(t,["computerUse"]);if(r!=null&&h(n,["computerUse"],r),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&h(n,["codeExecution"],l);const u=d(t,["enterpriseWebSearch"]);u!=null&&h(n,["enterpriseWebSearch"],u);const f=d(t,["functionDeclarations"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(C=>QR(C))),h(n,["functionDeclarations"],b)}const g=d(t,["googleMaps"]);g!=null&&h(n,["googleMaps"],g);const p=d(t,["googleSearch"]);p!=null&&h(n,["googleSearch"],p);const _=d(t,["googleSearchRetrieval"]);_!=null&&h(n,["googleSearchRetrieval"],_);const S=d(t,["urlContext"]);return S!=null&&h(n,["urlContext"],S),n}function $I(t,e){const n={},o=d(t,["baseModel"]);o!=null&&h(n,["baseModel"],o);const r=d(t,["createTime"]);r!=null&&h(n,["createTime"],r);const l=d(t,["updateTime"]);return l!=null&&h(n,["updateTime"],l),n}function QI(t,e){const n={},o=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&h(n,["baseModel"],o);const r=d(t,["createTime"]);r!=null&&h(n,["createTime"],r);const l=d(t,["updateTime"]);return l!=null&&h(n,["updateTime"],l),n}function XI(t,e,n){const o={},r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=d(t,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=d(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function WI(t,e,n){const o={},r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=d(t,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=d(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function ZI(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","name"],it(t,r));const l=d(e,["config"]);return l!=null&&XI(l,o),o}function eN(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["config"]);return l!=null&&WI(l,o),o}function tN(t,e,n){const o={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const u=d(t,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const f=d(t,["includeRaiReason"]);e!==void 0&&f!=null&&h(e,["parameters","includeRaiReason"],f);const g=d(t,["outputMimeType"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","mimeType"],g);const p=d(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const _=d(t,["enhanceInputImage"]);e!==void 0&&_!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],_);const S=d(t,["imagePreservationFactor"]);e!==void 0&&S!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],S);const b=d(t,["labels"]);e!==void 0&&b!=null&&h(e,["labels"],b);const C=d(t,["numberOfImages"]);e!==void 0&&C!=null&&h(e,["parameters","sampleCount"],C);const I=d(t,["mode"]);return e!==void 0&&I!=null&&h(e,["parameters","mode"],I),o}function nN(t,e,n){const o={},r=d(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=d(e,["image"]);l!=null&&h(o,["instances[0]","image"],Pi(l));const u=d(e,["upscaleFactor"]);u!=null&&h(o,["parameters","upscaleConfig","upscaleFactor"],u);const f=d(e,["config"]);return f!=null&&tN(f,o),o}function iN(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>rd(u))),h(n,["generatedImages"],l)}return n}function oN(t,e){const n={},o=d(t,["uri"]);o!=null&&h(n,["uri"],o);const r=d(t,["encodedVideo"]);r!=null&&h(n,["videoBytes"],Cs(r));const l=d(t,["encoding"]);return l!=null&&h(n,["mimeType"],l),n}function sN(t,e){const n={},o=d(t,["gcsUri"]);o!=null&&h(n,["uri"],o);const r=d(t,["bytesBase64Encoded"]);r!=null&&h(n,["videoBytes"],Cs(r));const l=d(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function rN(t,e){const n={},o=d(t,["image"]);o!=null&&h(n,["_self"],Pi(o));const r=d(t,["maskMode"]);return r!=null&&h(n,["maskMode"],r),n}function aN(t,e){const n={},o=d(t,["image"]);o!=null&&h(n,["image"],ad(o));const r=d(t,["referenceType"]);return r!=null&&h(n,["referenceType"],r),n}function lN(t,e){const n={},o=d(t,["image"]);o!=null&&h(n,["image"],Pi(o));const r=d(t,["referenceType"]);return r!=null&&h(n,["referenceType"],r),n}function aE(t,e){const n={},o=d(t,["uri"]);o!=null&&h(n,["uri"],o);const r=d(t,["videoBytes"]);r!=null&&h(n,["encodedVideo"],Cs(r));const l=d(t,["mimeType"]);return l!=null&&h(n,["encoding"],l),n}function lE(t,e){const n={},o=d(t,["uri"]);o!=null&&h(n,["gcsUri"],o);const r=d(t,["videoBytes"]);r!=null&&h(n,["bytesBase64Encoded"],Cs(r));const l=d(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uN(t,e){const n={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&h(e,["displayName"],o),n}function cN(t){const e={},n=d(t,["config"]);return n!=null&&uN(n,e),e}function dN(t,e){const n={},o=d(t,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),n}function fN(t){const e={},n=d(t,["name"]);n!=null&&h(e,["_url","name"],n);const o=d(t,["config"]);return o!=null&&dN(o,e),e}function hN(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function pN(t,e){const n={},o=d(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const r=d(t,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),n}function mN(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const o=d(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["response"]);return u!=null&&h(e,["response"],yN(u)),e}function gN(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const o=d(t,["fileName"]);o!=null&&h(e,["fileName"],o);const r=d(t,["config"]);return r!=null&&pN(r,e),e}function yN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&h(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function vN(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function _N(t){const e={},n=d(t,["config"]);return n!=null&&vN(n,e),e}function TN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=d(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function uE(t,e){const n={},o=d(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["mimeType"],o);const r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>g)),h(e,["customMetadata"],f)}const u=d(t,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),n}function EN(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const o=d(t,["config"]);return o!=null&&uE(o,e),e}function SN(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bN="Content-Type",AN="X-Server-Timeout",xN="User-Agent",sp="x-goog-api-client",CN="1.40.0",wN=`google-genai-sdk/${CN}`,RN="v1beta1",IN="v1beta";class NN{constructor(e){var n,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const f=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!f?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:RN}else{if(!this.clientOptions.apiKey)throw new Ll({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:IN,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Zh.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))r.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const l=new AbortController,u=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const f=setTimeout(()=>l.abort(),n.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return n&&n.extraBody!==null&&MN(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await x0(r),new ep(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await x0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Ii(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const f="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:_}=yield De(r.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const S=l.decode(_,{stream:!0});try{const I=JSON.parse(S);if("error"in I){const L=JSON.parse(JSON.stringify(I.error)),k=L.status,Y=L.code,W=`got status: ${k}. ${JSON.stringify(I)}`;if(Y>=400&&Y<600)throw new Ll({message:W,status:Y})}}catch(I){if(I.name==="ApiError")throw I}u+=S;let b=-1,C=0;for(;;){b=-1,C=0;for(const k of g){const Y=u.indexOf(k);Y!==-1&&(b===-1||Y<b)&&(b=Y,C=k.length)}if(b===-1)break;const I=u.substring(0,b);u=u.substring(b+C);const L=I.trim();if(L.startsWith(f)){const k=L.substring(f.length).trim();try{const Y=new Response(k,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield De(new ep(Y))}catch(Y){throw new Error(`exception parsing stream chunk ${k}. ${Y}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=wN+" "+this.clientOptions.userAgentExtra;return e[xN]=n,e[sp]=n,e[bN]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(AN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const f=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const g={file:r},p=this.getFileName(e),_=ve("upload/v1beta/files",g._url),S=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,p,g,n==null?void 0:n.httpOptions);return l.upload(e,S,this)}async uploadFileToFileSearchStore(e,n,o){var r;const l=this.clientOptions.uploader,u=await l.stat(n),f=String(u.size),g=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),S={};o!=null&&uE(o,S);const b=await this.fetchUploadUrl(p,f,g,_,S,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(n,b,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,l,u){var f;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=p==null?void 0:p.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function x0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Ll({message:r,status:n}):new Error(r)}}function MN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,u){const f=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const p=u[g],_=f[g];p&&typeof p=="object"&&!Array.isArray(p)&&_&&typeof _=="object"&&!Array.isArray(_)?f[g]=o(_,p):(_&&p&&typeof _!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof p}. Overwriting.`),f[g]=p)}return f}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DN="mcp_used/unknown";let PN=!1;function cE(t){for(const e of t)if(UN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return PN}function dE(t){var e;const n=(e=t[sp])!==null&&e!==void 0?e:"";t[sp]=(n+` ${DN}`).trimStart()}function UN(t){return t!==null&&typeof t=="object"&&t instanceof Hp}function VN(t){return Ii(this,arguments,function*(n,o=100){let r,l=0;for(;l<o;){const u=yield De(n.listTools({cursor:r}));for(const f of u.tools)yield yield De(f),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class Hp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Hp(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,g=(n=void 0,Ni(VN(_))),p;p=await g.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const S=r;u.push(S);const b=S.name;if(l[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);l[b]=_}}catch(S){n={error:S}}finally{try{!f&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),cC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kN(t,e,n){const o=new nC;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class LN{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=GN(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const _=new Promise(z=>{p=z}),S=e.callbacks,b=function(){p({})},C=this.apiClient,I={onopen:b,onmessage:z=>{kN(C,S.onmessage,z)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(z){},onclose:(o=S==null?void 0:S.onclose)!==null&&o!==void 0?o:function(z){}},L=this.webSocketFactory.create(g,BN(u),I);L.connect(),await _;const W={setup:{model:it(this.apiClient,e.model)}};return L.send(JSON.stringify(W)),new ON(L,this.apiClient)}}class ON{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=uR(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=lR(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(la.PLAY)}pause(){this.sendPlaybackControl(la.PAUSE)}stop(){this.sendPlaybackControl(la.STOP)}resetContext(){this.sendPlaybackControl(la.RESET_CONTEXT)}close(){this.conn.close()}}function BN(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function GN(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function qN(t,e,n){const o=new tC;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const l=JSON.parse(r);if(t.isVertexAI()){const u=fR(l);Object.assign(o,u)}else Object.assign(o,l);e(o)}class HN{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new LN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let _;const S=this.apiClient.getHeaders();e.config&&e.config.tools&&cE(e.config.tools)&&dE(S);const b=KN(S);if(this.apiClient.isVertexAI()){const M=this.apiClient.getProject(),U=this.apiClient.getLocation(),O=this.apiClient.getApiKey(),G=!!M&&!!U||!!O;this.apiClient.getCustomBaseUrl()&&!G?_=g:(_=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b,_))}else{const M=this.apiClient.getApiKey();let U="BidiGenerateContent",O="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",O="access_token"),_=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${U}?${O}=${M}`}let C=()=>{};const I=new Promise(M=>{C=M}),L=e.callbacks,k=function(){var M;(M=L==null?void 0:L.onopen)===null||M===void 0||M.call(L),C({})},Y=this.apiClient,W={onopen:k,onmessage:M=>{qN(Y,L.onmessage,M)},onerror:(n=L==null?void 0:L.onerror)!==null&&n!==void 0?n:function(M){},onclose:(o=L==null?void 0:L.onclose)!==null&&o!==void 0?o:function(M){}},z=this.webSocketFactory.create(_,JN(b),W);z.connect(),await I;let X=it(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&X.startsWith("publishers/")){const M=this.apiClient.getProject(),U=this.apiClient.getLocation();M&&U&&(X=`projects/${M}/locations/${U}/`+X)}let q={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Fc.AUDIO]}:e.config.responseModalities=[Fc.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const se=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],D=[];for(const M of se)if(this.isCallableTool(M)){const U=M;D.push(await U.tool())}else D.push(M);D.length>0&&(e.config.tools=D);const N={model:X,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=aR(this.apiClient,N):q=rR(this.apiClient,N),delete q.config,z.send(JSON.stringify(q)),new YN(z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const zN={turnComplete:!0};class YN{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=vi(n.turns),e.isVertexAI()||(o=o.map(r=>sd(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(FN)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},zN),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:dR(e)}:n={realtimeInput:cR(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function JN(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function KN(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C0=10;function w0(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(da(u)){r=!0;break}if(!r)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function da(t){return"callTool"in t&&typeof t.callTool=="function"}function jN(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>da(r)))!==null&&o!==void 0?o:!1}function R0(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(da(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(r)}),n}function I0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $N extends No{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,l,u,f;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!jN(n)||w0(n.config))return await this.generateContentInternal(g);const p=R0(n);if(p.length>0){const L=p.map(k=>`tools[${k}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${L}.`)}let _,S;const b=vi(g.contents),C=(l=(r=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:C0;let I=0;for(;I<C&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const L=_.candidates[0].content,k=[];for(const Y of(f=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(da(Y)){const z=await Y.callTool(_.functionCalls);k.push(...z)}I++,S={role:"user",parts:k},g.contents=vi(g.contents),g.contents.push(L),g.contents.push(S),I0(g.config)&&(b.push(L),b.push(S))}return I0(g.config)&&(_.automaticFunctionCallingHistory=b),_},this.generateContentStream=async n=>{var o,r,l,u,f;if(this.maybeMoveToResponseJsonSchem(n),w0(n.config)){const S=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(S)}const g=R0(n);if(g.length>0){const S=g.map(b=>`tools[${b}]`).join(", ");throw new Error(`Incompatible tools found at ${S}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(f=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(p&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let l;const u=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},f}),this.list=async n=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new mr(Co.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,l,u,f,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(f=n.source)===null||f===void 0?void 0:f.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>da(g)?await g.tool():g)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&cE(e.config.tools)){const g=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),dE(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var n,o,r;const l=new Map;for(const u of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(da(u)){const f=u,g=await f.tool();for(const p of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,f)}}return l}async processAfcStream(e){var n,o,r;const l=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:C0;let u=!1,f=0;const g=await this.initAfcToolsMap(e);return(function(p,_,S){return Ii(this,arguments,function*(){for(var b,C,I,L,k,Y;f<l;){u&&(f++,u=!1);const q=yield De(p.processParamsMaybeAddMcpUsage(S)),se=yield De(p.generateContentStreamInternal(q)),D=[],N=[];try{for(var W=!0,z=(C=void 0,Ni(se)),X;X=yield De(z.next()),b=X.done,!b;W=!0){L=X.value,W=!1;const M=L;if(yield yield De(M),M.candidates&&(!((k=M.candidates[0])===null||k===void 0)&&k.content)){N.push(M.candidates[0].content);for(const U of(Y=M.candidates[0].content.parts)!==null&&Y!==void 0?Y:[])if(f<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(U.functionCall.name)){const O=yield De(_.get(U.functionCall.name).callTool([U.functionCall]));D.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(M){C={error:M}}finally{try{!W&&!b&&(I=z.return)&&(yield De(I.call(z)))}finally{if(C)throw C.error}}if(D.length>0){u=!0;const M=new bl;M.candidates=[{content:{role:"user",parts:D}}],yield yield De(M);const U=[];U.push(...N),U.push({role:"user",parts:D});const O=vi(S.contents).concat(U);S.contents=O}else break}})})(this,g,e)}async generateContentInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=S0(this.apiClient,e);return f=ve("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=A0(_),b=new bl;return Object.assign(b,S),b})}else{const p=E0(this.apiClient,e);return f=ve("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=b0(_),b=new bl;return Object.assign(b,S),b})}}async generateContentStreamInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=S0(this.apiClient,e);return f=ve("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(S){return Ii(this,arguments,function*(){var b,C,I,L;try{for(var k=!0,Y=Ni(S),W;W=yield De(Y.next()),b=W.done,!b;k=!0){L=W.value,k=!1;const z=L,X=A0(yield De(z.json()),e);X.sdkHttpResponse={headers:z.headers};const q=new bl;Object.assign(q,X),yield yield De(q)}}catch(z){C={error:z}}finally{try{!k&&!b&&(I=Y.return)&&(yield De(I.call(Y)))}finally{if(C)throw C.error}}})})}else{const p=E0(this.apiClient,e);return f=ve("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(S){return Ii(this,arguments,function*(){var b,C,I,L;try{for(var k=!0,Y=Ni(S),W;W=yield De(Y.next()),b=W.done,!b;k=!0){L=W.value,k=!1;const z=L,X=b0(yield De(z.json()),e);X.sdkHttpResponse={headers:z.headers};const q=new bl;Object.assign(q,X),yield yield De(q)}}catch(z){C={error:z}}finally{try{!k&&!b&&(I=Y.return)&&(yield De(I.call(Y)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=HR(this.apiClient,e);return f=ve("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=YR(_),b=new o0;return Object.assign(b,S),b})}else{const p=qR(this.apiClient,e);return f=ve("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=zR(_),b=new o0;return Object.assign(b,S),b})}}async generateImagesInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=nI(this.apiClient,e);return f=ve("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=oI(_),b=new s0;return Object.assign(b,S),b})}else{const p=tI(this.apiClient,e);return f=ve("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=iI(_),b=new s0;return Object.assign(b,S),b})}}async editImageInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=OR(this.apiClient,e);return l=ve("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=BR(g),_=new Hx;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=nN(this.apiClient,e);return l=ve("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=iN(g),_=new zx;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=LI(this.apiClient,e);return l=ve("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=OI(g),_=new Yx;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=zI(this.apiClient,e);return l=ve("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=YI(g),_=new Jx;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=EI(this.apiClient,e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>op(_))}else{const p=TI(this.apiClient,e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>ip(_))}}async listInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=NI(this.apiClient,e);return f=ve("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=DI(_),b=new r0;return Object.assign(b,S),b})}else{const p=II(this.apiClient,e);return f=ve("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=MI(_),b=new r0;return Object.assign(b,S),b})}}async update(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=eN(this.apiClient,e);return f=ve("{model}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>op(_))}else{const p=ZI(this.apiClient,e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>ip(_))}}async delete(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=UR(this.apiClient,e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=kR(_),b=new a0;return Object.assign(b,S),b})}else{const p=PR(this.apiClient,e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=VR(_),b=new a0;return Object.assign(b,S),b})}}async countTokens(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=NR(this.apiClient,e);return f=ve("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=DR(_),b=new l0;return Object.assign(b,S),b})}else{const p=IR(this.apiClient,e);return f=ve("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=MR(_),b=new l0;return Object.assign(b,S),b})}}async computeTokens(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=SR(this.apiClient,e);return l=ve("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=bR(g),_=new Kx;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=cI(this.apiClient,e);return f=ve("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>{const S=lI(_),b=new qc;return Object.assign(b,S),b})}else{const p=uI(this.apiClient,e);return f=ve("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const S=aI(_),b=new qc;return Object.assign(b,S),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QN extends No{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=Lx(e);return f=ve("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u}else{const p=kx(e);return f=ve("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=Ix(e);return l=ve("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XN(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function WN(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>a1(l))),h(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&h(e,["role"],o),e}function ZN(t,e,n){const o={},r=d(e,["expireTime"]);n!==void 0&&r!=null&&h(n,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&h(n,["newSessionExpireTime"],l);const u=d(e,["uses"]);n!==void 0&&u!=null&&h(n,["uses"],u);const f=d(e,["liveConnectConstraints"]);n!==void 0&&f!=null&&h(n,["bidiGenerateContentSetup"],r1(t,f));const g=d(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&h(n,["fieldMask"],g),o}function e1(t,e){const n={},o=d(e,["config"]);return o!=null&&h(n,["config"],ZN(t,o,n)),n}function t1(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function n1(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const o=d(t,["args"]);o!=null&&h(e,["args"],o);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function i1(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function o1(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function s1(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=d(t,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const S=d(t,["speechConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","speechConfig"],qp(S));const b=d(t,["thinkingConfig"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","thinkingConfig"],b);const C=d(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],C);const I=d(t,["systemInstruction"]);e!==void 0&&I!=null&&h(e,["setup","systemInstruction"],WN(Tn(I)));const L=d(t,["tools"]);if(e!==void 0&&L!=null){let se=Sa(L);Array.isArray(se)&&(se=se.map(D=>u1(Ea(D)))),h(e,["setup","tools"],se)}const k=d(t,["sessionResumption"]);e!==void 0&&k!=null&&h(e,["setup","sessionResumption"],l1(k));const Y=d(t,["inputAudioTranscription"]);e!==void 0&&Y!=null&&h(e,["setup","inputAudioTranscription"],Y);const W=d(t,["outputAudioTranscription"]);e!==void 0&&W!=null&&h(e,["setup","outputAudioTranscription"],W);const z=d(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&h(e,["setup","realtimeInputConfig"],z);const X=d(t,["contextWindowCompression"]);e!==void 0&&X!=null&&h(e,["setup","contextWindowCompression"],X);const q=d(t,["proactivity"]);if(e!==void 0&&q!=null&&h(e,["setup","proactivity"],q),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function r1(t,e){const n={},o=d(e,["model"]);o!=null&&h(n,["setup","model"],it(t,o));const r=d(e,["config"]);return r!=null&&h(n,["config"],s1(r,n)),n}function a1(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],t1(l));const u=d(t,["functionCall"]);u!=null&&h(e,["functionCall"],n1(u));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const g=d(t,["inlineData"]);g!=null&&h(e,["inlineData"],XN(g));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const _=d(t,["thought"]);_!=null&&h(e,["thought"],_);const S=d(t,["thoughtSignature"]);S!=null&&h(e,["thoughtSignature"],S);const b=d(t,["videoMetadata"]);return b!=null&&h(e,["videoMetadata"],b),e}function l1(t){const e={},n=d(t,["handle"]);if(n!=null&&h(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function u1(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(S=>S)),h(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],i1(u));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],o1(f));const g=d(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c1(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function d1(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=c1(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(p=>u.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),f.length>0&&g.push(...f),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class f1 extends No{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=e1(this.apiClient,e);l=ve("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const g=d1(f,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h1(t,e){const n={},o=d(t,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),n}function p1(t){const e={},n=d(t,["name"]);n!=null&&h(e,["_url","name"],n);const o=d(t,["config"]);return o!=null&&h1(o,e),e}function m1(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function g1(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function y1(t){const e={},n=d(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const o=d(t,["config"]);return o!=null&&g1(o,e),e}function v1(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=d(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _1 extends No{constructor(e){super(),this.apiClient=e,this.list=async n=>new mr(Co.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=m1(e);return l=ve("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=p1(e);r=ve("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=y1(e);return l=ve("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=v1(g),_=new jx;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T1 extends No{constructor(e,n=new _1(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new mr(Co.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cN(e);return l=ve("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hN(e);return l=ve("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fN(e);r=ve("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_N(e);return l=ve("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=TN(g),_=new $x;return Object.assign(_,p),_})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=EN(e);return l=ve("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=SN(g),_=new Qx;return Object.assign(_,p),_})}}async importFile(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=gN(e);return l=ve("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=mN(g),_=new Lp;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fE=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return fE=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const E1=()=>fE();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ap=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _i extends Error{}class Rn extends _i{constructor(e,n,o,r){super(`${Rn.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new ld({message:o,cause:ap(n)});const l=n;return e===400?new pE(e,l,o,r):e===401?new mE(e,l,o,r):e===403?new gE(e,l,o,r):e===404?new yE(e,l,o,r):e===409?new vE(e,l,o,r):e===422?new _E(e,l,o,r):e===429?new TE(e,l,o,r):e>=500?new EE(e,l,o,r):new Rn(e,l,o,r)}}class lp extends Rn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ld extends Rn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class hE extends ld{constructor({message:e}={}){super({message:e??"Request timed out."})}}class pE extends Rn{}class mE extends Rn{}class gE extends Rn{}class yE extends Rn{}class vE extends Rn{}class _E extends Rn{}class TE extends Rn{}class EE extends Rn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S1=/^[a-z][a-z0-9+.-]*:/i,b1=t=>S1.test(t);let up=t=>(up=Array.isArray,up(t));const A1=up;let x1=A1;const N0=x1;function C1(t){if(!t)return!0;for(const e in t)return!1;return!0}function w1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const R1=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _i(`${t} must be an integer`);if(e<0)throw new _i(`${t} must be a positive integer`);return e},I1=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N1=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M1(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const D1=()=>{var t,e,n,o,r;const l=M1();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":D0(Deno.build.os),"X-Stainless-Arch":M0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":D0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":M0((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=P1();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function P1(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,l=o[2]||0,u=o[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const M0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",D0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ec;const U1=()=>Ec??(Ec=D1());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V1(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function SE(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function k1(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return SE({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function bE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function L1(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O1=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AE=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Dh(t,e,n){return AE(),new File(t,e??"unknown_file",n)}function B1(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const G1=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xE=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",F1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&xE(t),q1=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function H1(t,e,n){if(AE(),t=await t,F1(t))return t instanceof File?t:Dh([await t.arrayBuffer()],t.name);if(q1(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Dh(await cp(r),e,n)}const o=await cp(t);if(e||(e=B1(t)),!(n!=null&&n.type)){const r=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Dh(o,e,n)}async function cp(t){var e,n,o,r,l;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(xE(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(G1(t))try{for(var f=!0,g=Ni(t),p;p=await g.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const _=r;u.push(...await cp(_))}}catch(_){n={error:_}}finally{try{!f&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}else{const _=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${_?`; constructor: ${_}`:""}${z1(t)}`)}return u}function z1(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CE{constructor(e){this._client=e}}CE._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wE(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const P0=Object.freeze(Object.create(null)),Y1=(t=wE)=>(function(n,...o){if(n.length===1)return n[0];let r=!1;const l=[],u=n.reduce((_,S,b)=>{var C,I,L;/[?#]/.test(S)&&(r=!0);const k=o[b];let Y=(r?encodeURIComponent:t)(""+k);return b!==o.length&&(k==null||typeof k=="object"&&k.toString===((L=Object.getPrototypeOf((I=Object.getPrototypeOf((C=k.hasOwnProperty)!==null&&C!==void 0?C:P0))!==null&&I!==void 0?I:P0))===null||L===void 0?void 0:L.toString))&&(Y=k+"",l.push({start:_.length+S.length,length:Y.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),_+S+(b===o.length?"":Y)},""),f=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(f))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((_,S)=>_.start-S.start),l.length>0){let _=0;const S=l.reduce((b,C)=>{const I=" ".repeat(C.start-_),L="^".repeat(C.length);return _=C.start+C.length,b+I+L},"");throw new _i(`Path parameters result in path with invalid segments:
${l.map(b=>b.error).join(`
`)}
${u}
${S}`)}return u}),Sc=Y1(wE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RE extends CE{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,l=zc(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new _i("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new _i("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Sc`/${r}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Sc`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Sc`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const l=n??{},{api_version:u=this._client.apiVersion}=l,f=zc(l,["api_version"]);return this._client.get(Sc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}RE._key=Object.freeze(["interactions"]);class IE extends RE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J1(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let bc;function zp(t){let e;return(bc??(e=new globalThis.TextEncoder,bc=e.encode.bind(e)))(t)}let Ac;function U0(t){let e;return(Ac??(e=new globalThis.TextDecoder,Ac=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ud{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?zp(e):e;this.buffer=J1([this.buffer,n]);const o=[];let r;for(;(r=K1(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(U0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=U0(this.buffer.subarray(0,l));o.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}ud.NEWLINE_CHARS=new Set([`
`,"\r"]);ud.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function K1(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function j1(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yc={off:0,error:200,warn:300,info:400,debug:500},V0=(t,e,n)=>{if(t){if(w1(Yc,t))return t;wn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Yc))}`)}};function wl(){}function xc(t,e,n){return!e||Yc[t]>Yc[n]?wl:e[t].bind(e)}const $1={error:wl,warn:wl,info:wl,debug:wl};let k0=new WeakMap;function wn(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return $1;const r=k0.get(n);if(r&&r[0]===o)return r[1];const l={error:xc("error",n,o),warn:xc("warn",n,o),info:xc("info",n,o),debug:xc("debug",n,o)};return k0.set(n,[o,l]),l}const rr=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ua{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const l=o?wn(o):console;function u(){return Ii(this,arguments,function*(){var g,p,_,S;if(r)throw new _i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let b=!1;try{try{for(var C=!0,I=Ni(Q1(e,n)),L;L=yield De(I.next()),g=L.done,!g;C=!0){S=L.value,C=!1;const k=S;if(!b)if(k.data.startsWith("[DONE]")){b=!0;continue}else try{yield yield De(JSON.parse(k.data))}catch(Y){throw l.error("Could not parse message into JSON:",k.data),l.error("From chunk:",k.raw),Y}}}catch(k){p={error:k}}finally{try{!C&&!g&&(_=I.return)&&(yield De(_.call(I)))}finally{if(p)throw p.error}}b=!0}catch(k){if(rp(k))return yield De(void 0);throw k}finally{b||n.abort()}})}return new ua(u,n,o)}static fromReadableStream(e,n,o){let r=!1;function l(){return Ii(this,arguments,function*(){var g,p,_,S;const b=new ud,C=bE(e);try{for(var I=!0,L=Ni(C),k;k=yield De(L.next()),g=k.done,!g;I=!0){S=k.value,I=!1;const Y=S;for(const W of b.decode(Y))yield yield De(W)}}catch(Y){p={error:Y}}finally{try{!I&&!g&&(_=L.return)&&(yield De(_.call(L)))}finally{if(p)throw p.error}}for(const Y of b.flush())yield yield De(Y)})}function u(){return Ii(this,arguments,function*(){var g,p,_,S;if(r)throw new _i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let b=!1;try{try{for(var C=!0,I=Ni(l()),L;L=yield De(I.next()),g=L.done,!g;C=!0){S=L.value,C=!1;const k=S;b||k&&(yield yield De(JSON.parse(k)))}}catch(k){p={error:k}}finally{try{!C&&!g&&(_=I.return)&&(yield De(_.call(I)))}finally{if(p)throw p.error}}b=!0}catch(k){if(rp(k))return yield De(void 0);throw k}finally{b||n.abort()}})}return new ua(u,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=o.next();e.push(u),n.push(u)}return l.shift()}});return[new ua(()=>r(e),this.controller,this.client),new ua(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return SE({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:l}=await n.next();if(l)return o.close();const u=zp(JSON.stringify(r)+`
`);o.enqueue(u)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function Q1(t,e){return Ii(this,arguments,function*(){var o,r,l,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _i("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _i("Attempted to iterate over a response with no body");const f=new W1,g=new ud,p=bE(t.body);try{for(var _=!0,S=Ni(X1(p)),b;b=yield De(S.next()),o=b.done,!o;_=!0){u=b.value,_=!1;const C=u;for(const I of g.decode(C)){const L=f.decode(I);L&&(yield yield De(L))}}}catch(C){r={error:C}}finally{try{!_&&!o&&(l=S.return)&&(yield De(l.call(S)))}finally{if(r)throw r.error}}for(const C of g.flush()){const I=f.decode(C);I&&(yield yield De(I))}})}function X1(t){return Ii(this,arguments,function*(){var n,o,r,l;let u=new Uint8Array;try{for(var f=!0,g=Ni(t),p;p=yield De(g.next()),n=p.done,!n;f=!0){l=p.value,f=!1;const _=l;if(_==null)continue;const S=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?zp(_):_;let b=new Uint8Array(u.length+S.length);b.set(u),b.set(S,u.length),u=b;let C;for(;(C=j1(u))!==-1;)yield yield De(u.slice(0,C)),u=u.slice(C)}}catch(_){o={error:_}}finally{try{!f&&!n&&(r=g.return)&&(yield De(r.call(g)))}finally{if(o)throw o.error}}u.length>0&&(yield yield De(u))})}class W1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=Z1(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function Z1(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function eM(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var f;if(e.options.stream)return wn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ua.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),p=(f=g==null?void 0:g.split(";")[0])===null||f===void 0?void 0:f.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return wn(t).debug(`[${o}] response parsed`,rr({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yp extends Promise{constructor(e,n,o=eM){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Yp(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NE=Symbol("brand.privateNullableHeaders");function*tM(t){if(!t)return;if(NE in t){const{values:o,nulls:r}=t;yield*o.entries();for(const l of r)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():N0(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=N0(o[1])?o[1]:[o[1]];let u=!1;for(const f of l)f!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,f])}}const Al=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[l,u]of tM(o)){const f=l.toLowerCase();r.has(f)||(e.delete(l),r.add(f)),u===null?(e.delete(l),n.add(f)):(e.append(l,u),n.delete(f))}}return{[NE]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ph=t=>{var e,n,o,r,l,u;if(typeof globalThis.process<"u")return(o=(n=(e=bx)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ME;class cd{constructor(e){var n,o,r,l,u,f,g,{baseURL:p=Ph("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(n=Ph("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:S="v1beta"}=e,b=zc(e,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:_,apiVersion:S},b),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(o=C.timeout)!==null&&o!==void 0?o:cd.DEFAULT_TIMEOUT,this.logger=(r=C.logger)!==null&&r!==void 0?r:console;const I="warn";this.logLevel=I,this.logLevel=(u=(l=V0(C.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:V0(Ph("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:I,this.fetchOptions=C.fetchOptions,this.maxRetries=(f=C.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(g=C.fetch)!==null&&g!==void 0?g:V1(),this.encoder=O1,this._options=C,this.apiKey=_,this.apiVersion=S,this.clientAdapter=C.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Al([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Al([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Al([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new _i(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${oa}`}defaultIdempotencyKey(){return`stainless-node-retry-${E1()}`}makeStatusError(e,n,o,r){return Rn.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,l=b1(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return C1(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Yp(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,l,u;const f=await e,g=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=g),await this.prepareOptions(f);const{req:p,url:_,timeout:S}=await this.buildRequest(f,{retryCount:g-n});await this.prepareRequest(p,{url:_,options:f});const b="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=o===void 0?"":`, retryOf: ${o}`,I=Date.now();if(wn(this).debug(`[${b}] sending request`,rr({retryOfRequestLogID:o,method:f.method,url:_,options:f,headers:p.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new lp;const L=new AbortController,k=await this.fetchWithTimeout(_,p,S,L).catch(ap),Y=Date.now();if(k instanceof globalThis.Error){const z=`retrying, ${n} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new lp;const X=rp(k)||/timed? ?out/i.test(String(k)+("cause"in k?String(k.cause):""));if(n)return wn(this).info(`[${b}] connection ${X?"timed out":"failed"} - ${z}`),wn(this).debug(`[${b}] connection ${X?"timed out":"failed"} (${z})`,rr({retryOfRequestLogID:o,url:_,durationMs:Y-I,message:k.message})),this.retryRequest(f,n,o??b);throw wn(this).info(`[${b}] connection ${X?"timed out":"failed"} - error; no more retries left`),wn(this).debug(`[${b}] connection ${X?"timed out":"failed"} (error; no more retries left)`,rr({retryOfRequestLogID:o,url:_,durationMs:Y-I,message:k.message})),X?new hE:new ld({cause:k})}const W=`[${b}${C}] ${p.method} ${_} ${k.ok?"succeeded":"failed"} with status ${k.status} in ${Y-I}ms`;if(!k.ok){const z=await this.shouldRetry(k);if(n&&z){const M=`retrying, ${n} attempts remaining`;return await L1(k.body),wn(this).info(`${W} - ${M}`),wn(this).debug(`[${b}] response error (${M})`,rr({retryOfRequestLogID:o,url:k.url,status:k.status,headers:k.headers,durationMs:Y-I})),this.retryRequest(f,n,o??b,k.headers)}const X=z?"error; no more retries left":"error; not retryable";wn(this).info(`${W} - ${X}`);const q=await k.text().catch(M=>ap(M).message),se=I1(q),D=se?void 0:q;throw wn(this).debug(`[${b}] response error (${X})`,rr({retryOfRequestLogID:o,url:k.url,status:k.status,headers:k.headers,message:D,durationMs:Date.now()-I})),this.makeStatusError(k.status,se,D,k.headers)}return wn(this).info(W),wn(this).debug(`[${b}] response start`,rr({retryOfRequestLogID:o,url:k.url,status:k.status,headers:k.headers,durationMs:Y-I})),{response:k,options:f,controller:L,requestLogID:b,retryOfRequestLogID:o,startTime:I}}async fetchWithTimeout(e,n,o,r){const l=n||{},{signal:u,method:f}=l,g=zc(l,["signal","method"]),p=r.abort.bind(r);u&&u.addEventListener("abort",p,{once:!0});const _=setTimeout(p,o),S=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},S?{duplex:"half"}:{}),{method:"GET"}),g);f&&(b.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(_)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var l;let u;const f=r==null?void 0:r.get("retry-after-ms");if(f){const p=parseFloat(f);Number.isNaN(p)||(u=p)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const p=parseFloat(g);Number.isNaN(p)?u=Date.parse(g)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,p)}return await N1(u),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,u=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,l;const u=Object.assign({},e),{method:f,path:g,query:p,defaultBaseURL:_}=u,S=this.buildURL(g,p,_);"timeout"in u&&R1("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:b,body:C}=this.buildBody({options:u}),I=await this.buildHeaders({options:e,method:f,bodyHeaders:b,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:I},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:S,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=Al([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),U1()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Al([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:k1(e)}:this.encoder({body:e,headers:o})}}cd.DEFAULT_TIMEOUT=6e4;class nn extends cd{constructor(){super(...arguments),this.interactions=new IE(this)}}ME=nn;nn.GeminiNextGenAPIClient=ME;nn.GeminiNextGenAPIClientError=_i;nn.APIError=Rn;nn.APIConnectionError=ld;nn.APIConnectionTimeoutError=hE;nn.APIUserAbortError=lp;nn.NotFoundError=yE;nn.ConflictError=vE;nn.RateLimitError=TE;nn.BadRequestError=pE;nn.AuthenticationError=mE;nn.InternalServerError=EE;nn.PermissionDeniedError=gE;nn.UnprocessableEntityError=_E;nn.toFile=H1;nn.Interactions=IE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nM(t,e){const n={},o=d(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function iM(t,e){const n={},o=d(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function oM(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function sM(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function rM(t,e,n){const o={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=d(t,["learningRateMultiplier"]);if(u!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(d(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(d(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&h(e,["tuningTask","hyperparameters","batchSize"],f);const g=d(t,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(d(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(d(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(d(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(d(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function aM(t,e,n){const o={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const q=d(t,["validationDataset"]);e!==void 0&&q!=null&&h(e,["supervisedTuningSpec"],Uh(q))}else if(r==="PREFERENCE_TUNING"){const q=d(t,["validationDataset"]);e!==void 0&&q!=null&&h(e,["preferenceOptimizationSpec"],Uh(q))}else if(r==="DISTILLATION"){const q=d(t,["validationDataset"]);e!==void 0&&q!=null&&h(e,["distillationSpec"],Uh(q))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=d(t,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let f=d(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const q=d(t,["epochCount"]);e!==void 0&&q!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],q)}else if(f==="PREFERENCE_TUNING"){const q=d(t,["epochCount"]);e!==void 0&&q!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],q)}else if(f==="DISTILLATION"){const q=d(t,["epochCount"]);e!==void 0&&q!=null&&h(e,["distillationSpec","hyperParameters","epochCount"],q)}let g=d(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const q=d(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],q)}else if(g==="PREFERENCE_TUNING"){const q=d(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],q)}else if(g==="DISTILLATION"){const q=d(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&h(e,["distillationSpec","hyperParameters","learningRateMultiplier"],q)}let p=d(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const q=d(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],q)}else if(p==="PREFERENCE_TUNING"){const q=d(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],q)}else if(p==="DISTILLATION"){const q=d(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&h(e,["distillationSpec","exportLastCheckpointOnly"],q)}let _=d(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const q=d(t,["adapterSize"]);e!==void 0&&q!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],q)}else if(_==="PREFERENCE_TUNING"){const q=d(t,["adapterSize"]);e!==void 0&&q!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],q)}else if(_==="DISTILLATION"){const q=d(t,["adapterSize"]);e!==void 0&&q!=null&&h(e,["distillationSpec","hyperParameters","adapterSize"],q)}let S=d(n,["config","method"]);if(S===void 0&&(S="SUPERVISED_FINE_TUNING"),S==="SUPERVISED_FINE_TUNING"){const q=d(t,["tuningMode"]);e!==void 0&&q!=null&&h(e,["supervisedTuningSpec","tuningMode"],q)}const b=d(t,["customBaseModel"]);e!==void 0&&b!=null&&h(e,["customBaseModel"],b);let C=d(n,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const q=d(t,["batchSize"]);e!==void 0&&q!=null&&h(e,["supervisedTuningSpec","hyperParameters","batchSize"],q)}let I=d(n,["config","method"]);if(I===void 0&&(I="SUPERVISED_FINE_TUNING"),I==="SUPERVISED_FINE_TUNING"){const q=d(t,["learningRate"]);e!==void 0&&q!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRate"],q)}const L=d(t,["labels"]);e!==void 0&&L!=null&&h(e,["labels"],L);const k=d(t,["beta"]);e!==void 0&&k!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],k);const Y=d(t,["baseTeacherModel"]);e!==void 0&&Y!=null&&h(e,["distillationSpec","baseTeacherModel"],Y);const W=d(t,["tunedTeacherModelSource"]);e!==void 0&&W!=null&&h(e,["distillationSpec","tunedTeacherModelSource"],W);const z=d(t,["sftLossWeightMultiplier"]);e!==void 0&&z!=null&&h(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],z);const X=d(t,["outputUri"]);return e!==void 0&&X!=null&&h(e,["outputUri"],X),o}function lM(t,e){const n={},o=d(t,["baseModel"]);o!=null&&h(n,["baseModel"],o);const r=d(t,["preTunedModel"]);r!=null&&h(n,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&_M(l);const u=d(t,["config"]);return u!=null&&rM(u,n),n}function uM(t,e){const n={},o=d(t,["baseModel"]);o!=null&&h(n,["baseModel"],o);const r=d(t,["preTunedModel"]);r!=null&&h(n,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&TM(l,n,e);const u=d(t,["config"]);return u!=null&&aM(u,n,e),n}function cM(t,e){const n={},o=d(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function dM(t,e){const n={},o=d(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function fM(t,e,n){const o={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=d(t,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function hM(t,e,n){const o={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=d(t,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function pM(t,e){const n={},o=d(t,["config"]);return o!=null&&fM(o,n),n}function mM(t,e){const n={},o=d(t,["config"]);return o!=null&&hM(o,n),n}function gM(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=d(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>DE(f))),h(n,["tuningJobs"],u)}return n}function yM(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=d(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>dp(f))),h(n,["tuningJobs"],u)}return n}function vM(t,e){const n={},o=d(t,["name"]);o!=null&&h(n,["model"],o);const r=d(t,["name"]);return r!=null&&h(n,["endpoint"],r),n}function _M(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=d(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(n,["examples","examples"],r)}return n}function TM(t,e,n){const o={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function DE(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&h(n,["name"],r);const l=d(t,["state"]);l!=null&&h(n,["state"],jT(l));const u=d(t,["createTime"]);u!=null&&h(n,["createTime"],u);const f=d(t,["tuningTask","startTime"]);f!=null&&h(n,["startTime"],f);const g=d(t,["tuningTask","completeTime"]);g!=null&&h(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&h(n,["updateTime"],p);const _=d(t,["description"]);_!=null&&h(n,["description"],_);const S=d(t,["baseModel"]);S!=null&&h(n,["baseModel"],S);const b=d(t,["_self"]);return b!=null&&h(n,["tunedModel"],vM(b)),n}function dp(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&h(n,["name"],r);const l=d(t,["state"]);l!=null&&h(n,["state"],jT(l));const u=d(t,["createTime"]);u!=null&&h(n,["createTime"],u);const f=d(t,["startTime"]);f!=null&&h(n,["startTime"],f);const g=d(t,["endTime"]);g!=null&&h(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&h(n,["updateTime"],p);const _=d(t,["error"]);_!=null&&h(n,["error"],_);const S=d(t,["description"]);S!=null&&h(n,["description"],S);const b=d(t,["baseModel"]);b!=null&&h(n,["baseModel"],b);const C=d(t,["tunedModel"]);C!=null&&h(n,["tunedModel"],C);const I=d(t,["preTunedModel"]);I!=null&&h(n,["preTunedModel"],I);const L=d(t,["supervisedTuningSpec"]);L!=null&&h(n,["supervisedTuningSpec"],L);const k=d(t,["preferenceOptimizationSpec"]);k!=null&&h(n,["preferenceOptimizationSpec"],k);const Y=d(t,["distillationSpec"]);Y!=null&&h(n,["distillationSpec"],Y);const W=d(t,["tuningDataStats"]);W!=null&&h(n,["tuningDataStats"],W);const z=d(t,["encryptionSpec"]);z!=null&&h(n,["encryptionSpec"],z);const X=d(t,["partnerModelTuningSpec"]);X!=null&&h(n,["partnerModelTuningSpec"],X);const q=d(t,["customBaseModel"]);q!=null&&h(n,["customBaseModel"],q);const se=d(t,["experiment"]);se!=null&&h(n,["experiment"],se);const D=d(t,["labels"]);D!=null&&h(n,["labels"],D);const N=d(t,["outputUri"]);N!=null&&h(n,["outputUri"],N);const M=d(t,["pipelineJob"]);M!=null&&h(n,["pipelineJob"],M);const U=d(t,["serviceAccount"]);U!=null&&h(n,["serviceAccount"],U);const O=d(t,["tunedModelDisplayName"]);O!=null&&h(n,["tunedModelDisplayName"],O);const G=d(t,["veoTuningSpec"]);return G!=null&&h(n,["veoTuningSpec"],G),n}function EM(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&h(n,["name"],r);const l=d(t,["metadata"]);l!=null&&h(n,["metadata"],l);const u=d(t,["done"]);u!=null&&h(n,["done"],u);const f=d(t,["error"]);return f!=null&&h(n,["error"],f),n}function Uh(t,e){const n={},o=d(t,["gcsUri"]);o!=null&&h(n,["validationDatasetUri"],o);const r=d(t,["vertexDatasetResource"]);return r!=null&&h(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SM extends No{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mr(Co.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Wh.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=dM(e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>dp(_))}else{const p=cM(e);return f=ve("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>DE(_))}}async listInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=mM(e);return f=ve("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=yM(_),b=new u0;return Object.assign(b,S),b})}else{const p=pM(e);return f=ve("tunedModels",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=gM(_),b=new u0;return Object.assign(b,S),b})}}async cancel(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const p=iM(e);return f=ve("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=sM(_),b=new c0;return Object.assign(b,S),b})}else{const p=nM(e);return f=ve("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(S=>{const b=S;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const S=oM(_),b=new c0;return Object.assign(b,S),b})}}async tuneInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=uM(e,e);return l=ve("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>dp(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=lM(e);return l=ve("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>EM(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bM{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const AM=1024*1024*8,xM=3,CM=1e3,wM=2,Jc="x-goog-upload-status";async function RM(t,e,n){var o;const r=await PE(t,e,n),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Jc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function IM(t,e,n){var o;const r=await PE(t,e,n),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Jc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=qT(l),f=new Op;return Object.assign(f,u),f}async function PE(t,e,n){var o,r;let l=0,u=0,f=new ep(new Response),g="upload";for(l=t.size;u<l;){const p=Math.min(AM,l-u),_=t.slice(u,u+p);u+p>=l&&(g+=", finalize");let S=0,b=CM;for(;S<xM&&(f=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((o=f==null?void 0:f.headers)===null||o===void 0)&&o[Jc]));)S++,await MM(b),b=b*wM;if(u+=p,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[Jc])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function NM(t){return{size:t.size,type:t.type}}function MM(t){return new Promise(e=>setTimeout(e,t))}class DM{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RM(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IM(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PM{create(e,n,o){return new UM(e,n,o)}}class UM{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L0="x-goog-api-key";class VM{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(L0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(L0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kM="gl-node/";class Jp{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new nn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=wx(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new VM(this.apiKey);this.apiClient=new NN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:kM+"web",uploader:new DM,downloader:new bM}),this.models=new $N(this.apiClient),this.live=new HN(this.apiClient,r,new PM),this.batches=new iw(this.apiClient),this.chats=new Ow(this.models,this.apiClient),this.caches=new Vw(this.apiClient),this.files=new Qw(this.apiClient),this.operations=new QN(this.apiClient),this.authTokens=new f1(this.apiClient),this.tunings=new SM(this.apiClient),this.fileSearchStores=new T1(this.apiClient)}}const O0=t=>{const e={:"",:"",sunday:"",sun:"",:"",:"",:"",monday:"",mon:"",:"",:"",thursday:"",tue:"",tues:"",:"",:"",:"",wed:"",:"",:"",thu:"",thurs:"",:"",fri:"",:"",sat:""},n={Math:{name:"",color:"bg-blue-100 text-blue-800",icon:"",keywords:["","","","","math",""]},Science:{name:"",color:"bg-green-100 text-green-800",icon:"",keywords:["","","kimya","science","physics","chemistry","biology","","",""]},Arabic:{name:" ",color:"bg-emerald-100 text-emerald-800",icon:"",keywords:[""," ","arabic","",""," "," "]},English:{name:" ",color:"bg-red-100 text-red-800",icon:"",keywords:["","","english",""]},Social:{name:" ",color:"bg-yellow-100 text-yellow-800",icon:"",keywords:["","","","social","history"]},Religion:{name:" ",color:"bg-purple-100 text-purple-800",icon:"",keywords:[""," ","islamic","quran",""]},Art:{name:" ",color:"bg-pink-100 text-pink-800",icon:"",keywords:["","art",""]},Sport:{name:" ",color:"bg-orange-100 text-orange-800",icon:"",keywords:["","","sport","pe"]}},o=[],r=g=>{let p=o.find(_=>_.day===g);return p||(p={day:g,slots:[]},o.push(p)),p};t.replace(//g," ").replace(/-/g," ").replace(/_/g," ").replace(/ /g,"  ").replace(/\s+/g," ");const l=t.split(/\n|\.|/).map(g=>g.trim()).filter(g=>g.length>2);let u=" ",f={color:"bg-gray-100 text-gray-800",icon:""};for(const g of l){let p="",_=null;for(const[C,I]of Object.entries(n))if(I.keywords.some(L=>g.toLowerCase().includes(L))){p=I.name,_=I;break}const S=/\d/.test(g),b=Object.keys(e).some(C=>g.includes(C));if(p&&!S&&!b){u=p,f=_;continue}if(b){let C=u,I=f;p&&(C=p,I=_);const L=[];for(const[z,X]of Object.entries(e)){const q=new RegExp(z,"gi");let se;for(;(se=q.exec(g))!==null;)L.some(D=>D.index===se.index)||L.push({day:X,index:se.index})}L.sort((z,X)=>z.index-X.index);const k=[],Y=/(\d{1,2})(:\d{2})?\s*(||pm|am||)?|\s*(\d{1,2})/gi;let W;for(;(W=Y.exec(g))!==null;){let z=W[0],X=W[1]||W[4],q=parseInt(X);if(q){let se="";z.match(/|pm||PM/i)||q>=12&&q<=6||q>=1&&q<=6?se="":q>=7&&q<=11&&(se="");let D=`${q}:00 ${se}`;k.push({time:D,index:W.index,raw:z})}}L.length>0&&(k.length===1?L.forEach(z=>{r(z.day).slots.push({id:`s-${Math.random()}`,subject:C,time:k[0].time,color:I.color,icon:I.icon})}):k.length>1&&L.forEach((z,X)=>{var N;const q=((N=L[X+1])==null?void 0:N.index)??1/0,D=k.find(M=>M.index>z.index&&M.index<q)||k[k.length-1];D&&r(z.day).slots.push({id:`s-${Math.random()}`,subject:C,time:D.time,color:I.color,icon:I.icon})}))}}return o.length===0&&t.trim()&&o.push({day:"",slots:[{id:`s-${Math.random()}`,subject:t.trim().substring(0,30),time:"09:00 ",color:"bg-blue-100 text-blue-800",icon:""}]}),o},UE=async(t,e)=>{try{const n=await fetch("/api/anthropic/v1/messages",{method:"POST",headers:{"x-api-key":e,"anthropic-version":"2023-06-01","content-type":"application/json"},body:JSON.stringify({model:"claude-3-5-sonnet-20240620",max_tokens:4096,messages:[{role:"user",content:t}]})});if(!n.ok){const r=await n.text();throw new Error(`Claude API Error: ${r}`)}return(await n.json()).content[0].text}catch(n){throw console.error("Claude API Request Failed:",n),n}},fp=async(t,e,n="gemini")=>{try{const o=e||void 0;if(!o)return console.warn("API Key missing, using Smart Context Regex parser."),O0(t);const r={Math:{name:"",color:"bg-blue-100 text-blue-800",icon:"",keywords:["","","","","math",""]},Science:{name:"",color:"bg-green-100 text-green-800",icon:"",keywords:["","","kimya","science","physics","chemistry","biology","","",""]},Arabic:{name:" ",color:"bg-emerald-100 text-emerald-800",icon:"",keywords:[""," ","arabic","",""," "," "]},English:{name:" ",color:"bg-red-100 text-red-800",icon:"",keywords:["","","english",""]},Social:{name:" ",color:"bg-yellow-100 text-yellow-800",icon:"",keywords:["","","","social","history"]},Religion:{name:" ",color:"bg-purple-100 text-purple-800",icon:"",keywords:[""," ","islamic","quran",""]},Art:{name:" ",color:"bg-pink-100 text-pink-800",icon:"",keywords:["","art",""]},Sport:{name:" ",color:"bg-orange-100 text-orange-800",icon:"",keywords:["","","sport","pe"]}},l="gemini-1.5-flash",u=`
           .     " "   JSON  .
      
       :
      1. :  (day)  (subject)  (time).
      2.   :   (      )  .
      3.  :            .
      4.  :    (: "" -> "").
      5. :      JSON    .
      
        :
      [{"day": "", "subject": " ", "time": "04:00 "}, ...]

       :
      "${t}"
    `;let f="";if(n==="claude"?f=await UE(u,o):f=(await new Jp({apiKey:o}).models.generateContent({model:l,contents:[{role:"user",parts:[{text:u}]}],config:{responseMimeType:"application/json"}})).text||"",!f)throw new Error("Empty response from AI");const g=JSON.parse(f),p=[],_={};return g.forEach(S=>{_[S.day]||(_[S.day]={day:S.day,slots:[]},p.push(_[S.day]));let b={color:"bg-gray-100 text-gray-800",icon:""};for(const C of Object.values(r))if(C.keywords.some(I=>S.subject.includes(I)||C.name.includes(S.subject))){b=C,!S.subject.includes(C.name)&&C.name.includes(S.subject)&&(S.subject=C.name);break}_[S.day].slots.push({id:`s-${Math.random().toString(36).substr(2,9)}`,subject:S.subject,time:S.time,color:b.color,icon:b.icon})}),p}catch(o){return console.error("AI Schedule Parsing Error:",o),O0(t)}},B0=t=>{const e=[],n=t.split(/\n|,|/).map(r=>r.trim()).filter(r=>r.length>5),o={:" "," ":" ",:"",:"",:"",:"",:" ",english:" ",:" ",:" "};return n.forEach(r=>{const l=r.match(/(|||\/)\s*([\u0600-\u06FF\s]+)/)||[null,"",r.split(" ").slice(0,2).join(" ")];let u=l[2]||l[0]||" ",f=" ";for(const[_,S]of Object.entries(o))if(r.includes(_)){f=S;break}const p=["","","","","","",""].filter(_=>r.includes(_)).join(" ");u.length>3&&e.push({id:`t-${Math.random()}`,name:u.trim(),subject:f,availability:p||"  ",bio:"     ( )",imageUrl:`https://picsum.photos/seed/${Math.random()}/400`,grades:[]})}),e},VE=async(t,e,n="gemini")=>{try{const o=e||void 0;if(!o)return console.warn("API Key is missing, using Offline Regex Parser."),B0(t);const r=`         JSON.
      : "${t}"
      
        ( ):
      - name:  .
      - subject:  ().
      - bio:   ().
      - availability:   ().
      - teachingHours:   ().
      - grades:   ().
      - imageUrl:   .
      - id:  .
      
      Output ONLY JSON array.`;let l="";return n==="claude"?l=await UE(r,o):l=(await new Jp({apiKey:o}).models.generateContent({model:"gemini-1.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:jt.ARRAY,items:{type:jt.OBJECT,properties:{id:{type:jt.STRING},name:{type:jt.STRING},subject:{type:jt.STRING},bio:{type:jt.STRING},availability:{type:jt.STRING},teachingHours:{type:jt.STRING},grades:{type:jt.ARRAY,items:{type:jt.STRING}},imageUrl:{type:jt.STRING}},required:["id","name","subject","bio","availability","teachingHours","grades","imageUrl"]}}}})).text||"[]",JSON.parse(l.trim())}catch(o){return console.error("AI Teacher Parsing Error:",o),B0(t)}};class LM{constructor(e="ar-EG"){this.supported=!1,this.lang=e;const n=window.SpeechRecognition||window.webkitSpeechRecognition;this.synth=window.speechSynthesis,n?(this.recognition=new n,this.recognition.lang=e,this.recognition.interimResults=!1,this.recognition.continuous=!1,this.supported=!0):(console.error("Speech Recognition not supported in this browser."),this.supported=!1)}listen(){return new Promise((e,n)=>{if(!this.supported)return n("Browser not supported");try{this.recognition.stop()}catch{}this.recognition.start(),this.recognition.onresult=o=>{const r=o.results[0][0].transcript;e(r)},this.recognition.onerror=o=>{o.error==="no-speech"?n("no-speech"):n(o.error)},this.recognition.onend=()=>{}})}say(e){return new Promise((n,o)=>{if(!this.synth)return n();this.synth.cancel();const r=new SpeechSynthesisUtterance(e);r.lang=this.lang,r.pitch=1,r.rate=1,r.onend=()=>n(),r.onerror=l=>{console.error("Speech Synthesis Error",l),n()},this.synth.speak(r)})}}const ji=new LM,kE=({onUpdateSchedule:t,onAddTeacher:e,onNavigate:n,grades:o,apiKey:r})=>{const[l,u]=_e.useState(!1),[f,g]=_e.useState(!1),[p,_]=_e.useState(" ");_e.useEffect(()=>{let b=!0;const C=async()=>{if(!(!l||!b)){g(!0),_(" ... | Listening");try{const I=await ji.listen();if(!b||!l)return;g(!1),_(`: "${I}"`),console.log("Voice Command:",I);const L=I.toLowerCase();if(L.includes("")||L.includes(""))await ji.say("      ."),n("stages");else if(L.includes("")||L.includes(""))await ji.say("    ."),n("home");else if(L.includes("")||L.includes(""))await ji.say("    ."),n("teachers");else if(L.includes("")||L.includes(""))await ji.say("         "),console.log("Processing El-Moasser request...");else if(L.includes("")||L.includes(""))await ji.say("  ..."),await e(I),await ji.say(" .");else if(L.includes("")||L.includes("")){const k=o.find(Y=>I.includes(Y.name));k?(await ji.say(`   ${k.name}`),await t(k.id,I)):await ji.say("    .  .")}else await ji.say("   .  :     .")}catch{b&&l&&_("  ...")}b&&l&&(await new Promise(I=>setTimeout(I,1e3)),C())}};return l?C():(g(!1),_(" "),window.speechSynthesis.cancel()),()=>{b=!1}},[l,n,e,t,o]);const S=()=>{u(!l)};return T.jsxs("div",{className:"fixed bottom-8 left-8 z-[100] flex flex-col items-end gap-4",children:[l&&T.jsxs("div",{className:"rounded-3xl shadow-2xl p-6 w-72 border bg-white border-emerald-100 animate-in slide-in-from-bottom-4",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx("div",{className:`w-3 h-3 rounded-full ${f?"bg-red-500 animate-pulse":"bg-gray-300"}`}),T.jsx("span",{className:"font-black text-emerald-600",children:"  (Offline)"})]}),T.jsx("p",{className:"text-gray-600 text-sm font-bold leading-relaxed",children:p})]}),T.jsx("button",{onClick:S,className:`w-20 h-20 rounded-full flex items-center justify-center shadow-2xl transition-all active:scale-90 ${l?"bg-red-500 text-white animate-pulse":"bg-[#10b981] text-white hover:bg-emerald-600"}`,children:l?T.jsx("span",{className:"text-3xl",children:""}):T.jsx("span",{className:"text-4xl",children:""})})]})};var G0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let r=t.charCodeAt(o);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++o)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},OM=function(t){const e=[];let n=0,o=0;for(;n<t.length;){const r=t[n++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=t[n++];e[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=t[n++],u=t[n++],f=t[n++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const l=t[n++],u=t[n++];e[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},OE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<t.length;r+=3){const l=t[r],u=r+1<t.length,f=u?t[r+1]:0,g=r+2<t.length,p=g?t[r+2]:0,_=l>>2,S=(l&3)<<4|f>>4;let b=(f&15)<<2|p>>6,C=p&63;g||(C=64,u||(b=64)),o.push(n[_],n[S],n[b],n[C])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<t.length;){const l=n[t.charAt(r++)],f=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const S=r<t.length?n[t.charAt(r)]:64;if(++r,l==null||f==null||p==null||S==null)throw new BM;const b=l<<2|f>>4;if(o.push(b),p!==64){const C=f<<4&240|p>>2;if(o.push(C),S!==64){const I=p<<6&192|S;o.push(I)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GM=function(t){const e=LE(t);return OE.encodeByteArray(e,!0)},Kc=function(t){return GM(t).replace(/\./g,"")},FM=function(t){try{return OE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=()=>qM().__FIREBASE_DEFAULTS__,zM=()=>{if(typeof process>"u"||typeof G0>"u")return;const t=G0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&FM(t[1]);return e&&JSON.parse(e)},Kp=()=>{try{return HM()||zM()||YM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JM=t=>{var e,n;return(n=(e=Kp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},BE=t=>{const e=JM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},GE=()=>{var t;return(t=Kp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",r=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Kc(JSON.stringify(n)),Kc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $M(){var t;const e=(t=Kp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QM(){return!$M()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XM(){try{return typeof indexedDB=="object"}catch{return!1}}function WM(){return new Promise((t,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(o),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var l;e(((l=r.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="FirebaseError";class gr extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=ZM,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qE.prototype.create)}}class qE{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?eD(l,o):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new gr(r,f,o)}}function eD(t,e){return t.replace(tD,(n,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const tD=/\{\$([^}]+)}/g;function hp(t,e){if(t===e)return!0;const n=Object.keys(t),o=Object.keys(e);for(const r of n){if(!o.includes(r))return!1;const l=t[r],u=e[r];if(F0(l)&&F0(u)){if(!hp(l,u))return!1}else if(l!==u)return!1}for(const r of o)if(!n.includes(r))return!1;return!0}function F0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t){return t&&t._delegate?t._delegate:t}class ha{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new KM;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oD(e))try{this.getOrInitializeService({instanceIdentifier:ar})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(e=ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ar){return this.instances.has(e)}getOptions(e=ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);o===f&&u.resolve(r)}return r}onInit(e,n){var o;const r=this.normalizeInstanceIdentifier(n),l=(o=this.onInitCallbacks.get(r))!==null&&o!==void 0?o:new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const r of o)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:iD(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=ar){return this.component?this.component.multipleInstances?e:ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iD(t){return t===ar?void 0:t}function oD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const rD={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},aD=We.INFO,lD={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},uD=(t,e,...n)=>{if(e<t.logLevel)return;const o=new Date().toISOString(),r=lD[e];if(r)console[r](`[${o}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class HE{constructor(e){this.name=e,this._logLevel=aD,this._logHandler=uD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const cD=(t,e)=>e.some(n=>t instanceof n);let q0,H0;function dD(){return q0||(q0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fD(){return H0||(H0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zE=new WeakMap,pp=new WeakMap,YE=new WeakMap,Vh=new WeakMap,jp=new WeakMap;function hD(t){const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(vs(t.result)),r()},u=()=>{o(t.error),r()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&zE.set(n,t)}).catch(()=>{}),jp.set(e,t),e}function pD(t){if(pp.has(t))return;const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),r()},u=()=>{o(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});pp.set(t,e)}let mp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||YE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mD(t){mp=t(mp)}function gD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(kh(this),e,...n);return YE.set(o,e.sort?e.sort():[e]),vs(o)}:fD().includes(t)?function(...e){return t.apply(kh(this),e),vs(zE.get(this))}:function(...e){return vs(t.apply(kh(this),e))}}function yD(t){return typeof t=="function"?gD(t):(t instanceof IDBTransaction&&pD(t),cD(t,dD())?new Proxy(t,mp):t)}function vs(t){if(t instanceof IDBRequest)return hD(t);if(Vh.has(t))return Vh.get(t);const e=yD(t);return e!==t&&(Vh.set(t,e),jp.set(e,t)),e}const kh=t=>jp.get(t);function vD(t,e,{blocked:n,upgrade:o,blocking:r,terminated:l}={}){const u=indexedDB.open(t,e),f=vs(u);return o&&u.addEventListener("upgradeneeded",g=>{o(vs(u.result),g.oldVersion,g.newVersion,vs(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const _D=["get","getKey","getAll","getAllKeys","count"],TD=["put","add","delete","clear"],Lh=new Map;function z0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lh.get(e))return Lh.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,r=TD.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(r||_D.includes(n)))return;const l=async function(u,...f){const g=this.transaction(u,r?"readwrite":"readonly");let p=g.store;return o&&(p=p.index(f.shift())),(await Promise.all([p[n](...f),r&&g.done]))[0]};return Lh.set(e,l),l}mD(t=>({...t,get:(e,n,o)=>z0(e,n)||t.get(e,n,o),has:(e,n)=>!!z0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SD(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function SD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gp="@firebase/app",Y0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=new HE("@firebase/app"),bD="@firebase/app-compat",AD="@firebase/analytics-compat",xD="@firebase/analytics",CD="@firebase/app-check-compat",wD="@firebase/app-check",RD="@firebase/auth",ID="@firebase/auth-compat",ND="@firebase/database",MD="@firebase/data-connect",DD="@firebase/database-compat",PD="@firebase/functions",UD="@firebase/functions-compat",VD="@firebase/installations",kD="@firebase/installations-compat",LD="@firebase/messaging",OD="@firebase/messaging-compat",BD="@firebase/performance",GD="@firebase/performance-compat",FD="@firebase/remote-config",qD="@firebase/remote-config-compat",HD="@firebase/storage",zD="@firebase/storage-compat",YD="@firebase/firestore",JD="@firebase/vertexai-preview",KD="@firebase/firestore-compat",jD="firebase",$D="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="[DEFAULT]",QD={[gp]:"fire-core",[bD]:"fire-core-compat",[xD]:"fire-analytics",[AD]:"fire-analytics-compat",[wD]:"fire-app-check",[CD]:"fire-app-check-compat",[RD]:"fire-auth",[ID]:"fire-auth-compat",[ND]:"fire-rtdb",[MD]:"fire-data-connect",[DD]:"fire-rtdb-compat",[PD]:"fire-fn",[UD]:"fire-fn-compat",[VD]:"fire-iid",[kD]:"fire-iid-compat",[LD]:"fire-fcm",[OD]:"fire-fcm-compat",[BD]:"fire-perf",[GD]:"fire-perf-compat",[FD]:"fire-rc",[qD]:"fire-rc-compat",[HD]:"fire-gcs",[zD]:"fire-gcs-compat",[YD]:"fire-fst",[KD]:"fire-fst-compat",[JD]:"fire-vertex","fire-js":"fire-js",[jD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Map,XD=new Map,vp=new Map;function J0(t,e){try{t.container.addComponent(e)}catch(n){wo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ol(t){const e=t.name;if(vp.has(e))return wo.debug(`There were multiple attempts to register component ${e}.`),!1;vp.set(e,t);for(const n of jc.values())J0(n,t);for(const n of XD.values())J0(n,t);return!0}function JE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new qE("app","Firebase",WD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=$D;function jE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const o=Object.assign({name:yp,automaticDataCollectionEnabled:!1},e),r=o.name;if(typeof r!="string"||!r)throw _s.create("bad-app-name",{appName:String(r)});if(n||(n=GE()),!n)throw _s.create("no-options");const l=jc.get(r);if(l){if(hp(n,l.options)&&hp(o,l.config))return l;throw _s.create("duplicate-app",{appName:r})}const u=new sD(r);for(const g of vp.values())u.addComponent(g);const f=new ZD(n,o,u);return jc.set(r,f),f}function $E(t=yp){const e=jc.get(t);if(!e&&t===yp&&GE())return jE();if(!e)throw _s.create("no-app",{appName:t});return e}function Ts(t,e,n){var o;let r=(o=QD[t])!==null&&o!==void 0?o:t;n&&(r+=`-${n}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wo.warn(f.join(" "));return}Ol(new ha(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="firebase-heartbeat-database",t2=1,Bl="firebase-heartbeat-store";let Oh=null;function QE(){return Oh||(Oh=vD(e2,t2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bl)}catch(n){console.warn(n)}}}}).catch(t=>{throw _s.create("idb-open",{originalErrorMessage:t.message})})),Oh}async function n2(t){try{const n=(await QE()).transaction(Bl),o=await n.objectStore(Bl).get(XE(t));return await n.done,o}catch(e){if(e instanceof gr)wo.warn(e.message);else{const n=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wo.warn(n.message)}}}async function K0(t,e){try{const o=(await QE()).transaction(Bl,"readwrite");await o.objectStore(Bl).put(e,XE(t)),await o.done}catch(n){if(n instanceof gr)wo.warn(n.message);else{const o=_s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wo.warn(o.message)}}}function XE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=1024,o2=720*60*60*1e3;class s2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a2(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=j0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const f=new Date(u.date).valueOf();return Date.now()-f<=o2}),this._storage.overwrite(this._heartbeatsCache))}catch(o){wo.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=j0(),{heartbeatsToSend:o,unsentEntries:r}=r2(this._heartbeatsCache.heartbeats),l=Kc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return wo.warn(n),""}}}function j0(){return new Date().toISOString().substring(0,10)}function r2(t,e=i2){const n=[];let o=t.slice();for(const r of t){const l=n.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),$0(n)>e){l.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),$0(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class a2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XM()?WM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await n2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return K0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return K0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $0(t){return Kc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){Ol(new ha("platform-logger",e=>new ED(e),"PRIVATE")),Ol(new ha("heartbeat",e=>new s2(e),"PRIVATE")),Ts(gp,Y0,t),Ts(gp,Y0,"esm2017"),Ts("fire-js","")}l2("");var u2="firebase",c2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ts(u2,c2,"app");var Q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,WE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function M(){}M.prototype=N.prototype,D.D=N.prototype,D.prototype=new M,D.prototype.constructor=D,D.C=function(U,O,G){for(var V=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)V[Ne-2]=arguments[Ne];return N.prototype[O].apply(U,V)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,n),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,N,M){M||(M=0);var U=Array(16);if(typeof N=="string")for(var O=0;16>O;++O)U[O]=N.charCodeAt(M++)|N.charCodeAt(M++)<<8|N.charCodeAt(M++)<<16|N.charCodeAt(M++)<<24;else for(O=0;16>O;++O)U[O]=N[M++]|N[M++]<<8|N[M++]<<16|N[M++]<<24;N=D.g[0],M=D.g[1],O=D.g[2];var G=D.g[3],V=N+(G^M&(O^G))+U[0]+3614090360&4294967295;N=M+(V<<7&4294967295|V>>>25),V=G+(O^N&(M^O))+U[1]+3905402710&4294967295,G=N+(V<<12&4294967295|V>>>20),V=O+(M^G&(N^M))+U[2]+606105819&4294967295,O=G+(V<<17&4294967295|V>>>15),V=M+(N^O&(G^N))+U[3]+3250441966&4294967295,M=O+(V<<22&4294967295|V>>>10),V=N+(G^M&(O^G))+U[4]+4118548399&4294967295,N=M+(V<<7&4294967295|V>>>25),V=G+(O^N&(M^O))+U[5]+1200080426&4294967295,G=N+(V<<12&4294967295|V>>>20),V=O+(M^G&(N^M))+U[6]+2821735955&4294967295,O=G+(V<<17&4294967295|V>>>15),V=M+(N^O&(G^N))+U[7]+4249261313&4294967295,M=O+(V<<22&4294967295|V>>>10),V=N+(G^M&(O^G))+U[8]+1770035416&4294967295,N=M+(V<<7&4294967295|V>>>25),V=G+(O^N&(M^O))+U[9]+2336552879&4294967295,G=N+(V<<12&4294967295|V>>>20),V=O+(M^G&(N^M))+U[10]+4294925233&4294967295,O=G+(V<<17&4294967295|V>>>15),V=M+(N^O&(G^N))+U[11]+2304563134&4294967295,M=O+(V<<22&4294967295|V>>>10),V=N+(G^M&(O^G))+U[12]+1804603682&4294967295,N=M+(V<<7&4294967295|V>>>25),V=G+(O^N&(M^O))+U[13]+4254626195&4294967295,G=N+(V<<12&4294967295|V>>>20),V=O+(M^G&(N^M))+U[14]+2792965006&4294967295,O=G+(V<<17&4294967295|V>>>15),V=M+(N^O&(G^N))+U[15]+1236535329&4294967295,M=O+(V<<22&4294967295|V>>>10),V=N+(O^G&(M^O))+U[1]+4129170786&4294967295,N=M+(V<<5&4294967295|V>>>27),V=G+(M^O&(N^M))+U[6]+3225465664&4294967295,G=N+(V<<9&4294967295|V>>>23),V=O+(N^M&(G^N))+U[11]+643717713&4294967295,O=G+(V<<14&4294967295|V>>>18),V=M+(G^N&(O^G))+U[0]+3921069994&4294967295,M=O+(V<<20&4294967295|V>>>12),V=N+(O^G&(M^O))+U[5]+3593408605&4294967295,N=M+(V<<5&4294967295|V>>>27),V=G+(M^O&(N^M))+U[10]+38016083&4294967295,G=N+(V<<9&4294967295|V>>>23),V=O+(N^M&(G^N))+U[15]+3634488961&4294967295,O=G+(V<<14&4294967295|V>>>18),V=M+(G^N&(O^G))+U[4]+3889429448&4294967295,M=O+(V<<20&4294967295|V>>>12),V=N+(O^G&(M^O))+U[9]+568446438&4294967295,N=M+(V<<5&4294967295|V>>>27),V=G+(M^O&(N^M))+U[14]+3275163606&4294967295,G=N+(V<<9&4294967295|V>>>23),V=O+(N^M&(G^N))+U[3]+4107603335&4294967295,O=G+(V<<14&4294967295|V>>>18),V=M+(G^N&(O^G))+U[8]+1163531501&4294967295,M=O+(V<<20&4294967295|V>>>12),V=N+(O^G&(M^O))+U[13]+2850285829&4294967295,N=M+(V<<5&4294967295|V>>>27),V=G+(M^O&(N^M))+U[2]+4243563512&4294967295,G=N+(V<<9&4294967295|V>>>23),V=O+(N^M&(G^N))+U[7]+1735328473&4294967295,O=G+(V<<14&4294967295|V>>>18),V=M+(G^N&(O^G))+U[12]+2368359562&4294967295,M=O+(V<<20&4294967295|V>>>12),V=N+(M^O^G)+U[5]+4294588738&4294967295,N=M+(V<<4&4294967295|V>>>28),V=G+(N^M^O)+U[8]+2272392833&4294967295,G=N+(V<<11&4294967295|V>>>21),V=O+(G^N^M)+U[11]+1839030562&4294967295,O=G+(V<<16&4294967295|V>>>16),V=M+(O^G^N)+U[14]+4259657740&4294967295,M=O+(V<<23&4294967295|V>>>9),V=N+(M^O^G)+U[1]+2763975236&4294967295,N=M+(V<<4&4294967295|V>>>28),V=G+(N^M^O)+U[4]+1272893353&4294967295,G=N+(V<<11&4294967295|V>>>21),V=O+(G^N^M)+U[7]+4139469664&4294967295,O=G+(V<<16&4294967295|V>>>16),V=M+(O^G^N)+U[10]+3200236656&4294967295,M=O+(V<<23&4294967295|V>>>9),V=N+(M^O^G)+U[13]+681279174&4294967295,N=M+(V<<4&4294967295|V>>>28),V=G+(N^M^O)+U[0]+3936430074&4294967295,G=N+(V<<11&4294967295|V>>>21),V=O+(G^N^M)+U[3]+3572445317&4294967295,O=G+(V<<16&4294967295|V>>>16),V=M+(O^G^N)+U[6]+76029189&4294967295,M=O+(V<<23&4294967295|V>>>9),V=N+(M^O^G)+U[9]+3654602809&4294967295,N=M+(V<<4&4294967295|V>>>28),V=G+(N^M^O)+U[12]+3873151461&4294967295,G=N+(V<<11&4294967295|V>>>21),V=O+(G^N^M)+U[15]+530742520&4294967295,O=G+(V<<16&4294967295|V>>>16),V=M+(O^G^N)+U[2]+3299628645&4294967295,M=O+(V<<23&4294967295|V>>>9),V=N+(O^(M|~G))+U[0]+4096336452&4294967295,N=M+(V<<6&4294967295|V>>>26),V=G+(M^(N|~O))+U[7]+1126891415&4294967295,G=N+(V<<10&4294967295|V>>>22),V=O+(N^(G|~M))+U[14]+2878612391&4294967295,O=G+(V<<15&4294967295|V>>>17),V=M+(G^(O|~N))+U[5]+4237533241&4294967295,M=O+(V<<21&4294967295|V>>>11),V=N+(O^(M|~G))+U[12]+1700485571&4294967295,N=M+(V<<6&4294967295|V>>>26),V=G+(M^(N|~O))+U[3]+2399980690&4294967295,G=N+(V<<10&4294967295|V>>>22),V=O+(N^(G|~M))+U[10]+4293915773&4294967295,O=G+(V<<15&4294967295|V>>>17),V=M+(G^(O|~N))+U[1]+2240044497&4294967295,M=O+(V<<21&4294967295|V>>>11),V=N+(O^(M|~G))+U[8]+1873313359&4294967295,N=M+(V<<6&4294967295|V>>>26),V=G+(M^(N|~O))+U[15]+4264355552&4294967295,G=N+(V<<10&4294967295|V>>>22),V=O+(N^(G|~M))+U[6]+2734768916&4294967295,O=G+(V<<15&4294967295|V>>>17),V=M+(G^(O|~N))+U[13]+1309151649&4294967295,M=O+(V<<21&4294967295|V>>>11),V=N+(O^(M|~G))+U[4]+4149444226&4294967295,N=M+(V<<6&4294967295|V>>>26),V=G+(M^(N|~O))+U[11]+3174756917&4294967295,G=N+(V<<10&4294967295|V>>>22),V=O+(N^(G|~M))+U[2]+718787259&4294967295,O=G+(V<<15&4294967295|V>>>17),V=M+(G^(O|~N))+U[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(O+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+G&4294967295}o.prototype.u=function(D,N){N===void 0&&(N=D.length);for(var M=N-this.blockSize,U=this.B,O=this.h,G=0;G<N;){if(O==0)for(;G<=M;)r(this,D,G),G+=this.blockSize;if(typeof D=="string"){for(;G<N;)if(U[O++]=D.charCodeAt(G++),O==this.blockSize){r(this,U),O=0;break}}else for(;G<N;)if(U[O++]=D[G++],O==this.blockSize){r(this,U),O=0;break}}this.h=O,this.o+=N},o.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;var M=8*this.o;for(N=D.length-8;N<D.length;++N)D[N]=M&255,M/=256;for(this.u(D),D=Array(16),N=M=0;4>N;++N)for(var U=0;32>U;U+=8)D[M++]=this.g[N]>>>U&255;return D};function l(D,N){var M=f;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=N(D)}function u(D,N){this.h=N;for(var M=[],U=!0,O=D.length-1;0<=O;O--){var G=D[O]|0;U&&G==N||(M[O]=G,U=!1)}this.g=M}var f={};function g(D){return-128<=D&&128>D?l(D,function(N){return new u([N|0],0>N?-1:0)}):new u([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return S;if(0>D)return k(p(-D));for(var N=[],M=1,U=0;D>=M;U++)N[U]=D/M|0,M*=4294967296;return new u(N,0)}function _(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return k(_(D.substring(1),N));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=p(Math.pow(N,8)),U=S,O=0;O<D.length;O+=8){var G=Math.min(8,D.length-O),V=parseInt(D.substring(O,O+G),N);8>G?(G=p(Math.pow(N,G)),U=U.j(G).add(p(V))):(U=U.j(M),U=U.add(p(V)))}return U}var S=g(0),b=g(1),C=g(16777216);t=u.prototype,t.m=function(){if(L(this))return-k(this).m();for(var D=0,N=1,M=0;M<this.g.length;M++){var U=this.i(M);D+=(0<=U?U:4294967296+U)*N,N*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(L(this))return"-"+k(this).toString(D);for(var N=p(Math.pow(D,6)),M=this,U="";;){var O=X(M,N).g;M=Y(M,O.j(N));var G=((0<M.g.length?M.g[0]:M.h)>>>0).toString(D);if(M=O,I(M))return G+U;for(;6>G.length;)G="0"+G;U=G+U}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(var N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function L(D){return D.h==-1}t.l=function(D){return D=Y(this,D),L(D)?-1:I(D)?0:1};function k(D){for(var N=D.g.length,M=[],U=0;U<N;U++)M[U]=~D.g[U];return new u(M,~D.h).add(b)}t.abs=function(){return L(this)?k(this):this},t.add=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],U=0,O=0;O<=N;O++){var G=U+(this.i(O)&65535)+(D.i(O)&65535),V=(G>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);U=V>>>16,G&=65535,V&=65535,M[O]=V<<16|G}return new u(M,M[M.length-1]&-2147483648?-1:0)};function Y(D,N){return D.add(k(N))}t.j=function(D){if(I(this)||I(D))return S;if(L(this))return L(D)?k(this).j(k(D)):k(k(this).j(D));if(L(D))return k(this.j(k(D)));if(0>this.l(C)&&0>D.l(C))return p(this.m()*D.m());for(var N=this.g.length+D.g.length,M=[],U=0;U<2*N;U++)M[U]=0;for(U=0;U<this.g.length;U++)for(var O=0;O<D.g.length;O++){var G=this.i(U)>>>16,V=this.i(U)&65535,Ne=D.i(O)>>>16,ot=D.i(O)&65535;M[2*U+2*O]+=V*ot,W(M,2*U+2*O),M[2*U+2*O+1]+=G*ot,W(M,2*U+2*O+1),M[2*U+2*O+1]+=V*Ne,W(M,2*U+2*O+1),M[2*U+2*O+2]+=G*Ne,W(M,2*U+2*O+2)}for(U=0;U<N;U++)M[U]=M[2*U+1]<<16|M[2*U];for(U=N;U<2*N;U++)M[U]=0;return new u(M,0)};function W(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function z(D,N){this.g=D,this.h=N}function X(D,N){if(I(N))throw Error("division by zero");if(I(D))return new z(S,S);if(L(D))return N=X(k(D),N),new z(k(N.g),k(N.h));if(L(N))return N=X(D,k(N)),new z(k(N.g),N.h);if(30<D.g.length){if(L(D)||L(N))throw Error("slowDivide_ only works with positive integers.");for(var M=b,U=N;0>=U.l(D);)M=q(M),U=q(U);var O=se(M,1),G=se(U,1);for(U=se(U,2),M=se(M,2);!I(U);){var V=G.add(U);0>=V.l(D)&&(O=O.add(M),G=V),U=se(U,1),M=se(M,1)}return N=Y(D,O.j(N)),new z(O,N)}for(O=S;0<=D.l(N);){for(M=Math.max(1,Math.floor(D.m()/N.m())),U=Math.ceil(Math.log(M)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),G=p(M),V=G.j(N);L(V)||0<V.l(D);)M-=U,G=p(M),V=G.j(N);I(G)&&(G=b),O=O.add(G),D=Y(D,V)}return new z(O,D)}t.A=function(D){return X(this,D).h},t.and=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],U=0;U<N;U++)M[U]=this.i(U)&D.i(U);return new u(M,this.h&D.h)},t.or=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],U=0;U<N;U++)M[U]=this.i(U)|D.i(U);return new u(M,this.h|D.h)},t.xor=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],U=0;U<N;U++)M[U]=this.i(U)^D.i(U);return new u(M,this.h^D.h)};function q(D){for(var N=D.g.length+1,M=[],U=0;U<N;U++)M[U]=D.i(U)<<1|D.i(U-1)>>>31;return new u(M,D.h)}function se(D,N){var M=N>>5;N%=32;for(var U=D.g.length-M,O=[],G=0;G<U;G++)O[G]=0<N?D.i(G+M)>>>N|D.i(G+M+1)<<32-N:D.i(G+M);return new u(O,D.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,WE=o,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=_,ur=u}).apply(typeof Q0<"u"?Q0:typeof self<"u"?self:typeof window<"u"?window:{});var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZE,Rl,eS,Vc,_p,tS,nS,iS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,E,x){return m==Array.prototype||m==Object.prototype||(m[E]=x.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cc=="object"&&Cc];for(var E=0;E<m.length;++E){var x=m[E];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var o=n(this);function r(m,E){if(E)e:{var x=o;m=m.split(".");for(var R=0;R<m.length-1;R++){var K=m[R];if(!(K in x))break e;x=x[K]}m=m[m.length-1],R=x[m],E=E(R),E!=R&&E!=null&&e(x,m,{configurable:!0,writable:!0,value:E})}}function l(m,E){m instanceof String&&(m+="");var x=0,R=!1,K={next:function(){if(!R&&x<m.length){var ee=x++;return{value:E(ee,m[ee]),done:!1}}return R=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}r("Array.prototype.values",function(m){return m||function(){return l(this,function(E,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function g(m){var E=typeof m;return E=E!="object"?E:m?Array.isArray(m)?"array":E:"null",E=="array"||E=="object"&&typeof m.length=="number"}function p(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function _(m,E,x){return m.call.apply(m.bind,arguments)}function S(m,E,x){if(!m)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,R),m.apply(E,K)}}return function(){return m.apply(E,arguments)}}function b(m,E,x){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:S,b.apply(null,arguments)}function C(m,E){var x=Array.prototype.slice.call(arguments,1);return function(){var R=x.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function I(m,E){function x(){}x.prototype=E.prototype,m.aa=E.prototype,m.prototype=new x,m.prototype.constructor=m,m.Qb=function(R,K,ee){for(var me=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)me[rt-2]=arguments[rt];return E.prototype[K].apply(R,me)}}function L(m){const E=m.length;if(0<E){const x=Array(E);for(let R=0;R<E;R++)x[R]=m[R];return x}return[]}function k(m,E){for(let x=1;x<arguments.length;x++){const R=arguments[x];if(g(R)){const K=m.length||0,ee=R.length||0;m.length=K+ee;for(let me=0;me<ee;me++)m[K+me]=R[me]}else m.push(R)}}class Y{constructor(E,x){this.i=E,this.j=x,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function W(m){return/^[\s\xa0]*$/.test(m)}function z(){var m=f.navigator;return m&&(m=m.userAgent)?m:""}function X(m){return X[" "](m),m}X[" "]=function(){};var q=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function se(m,E,x){for(const R in m)E.call(x,m[R],R,m)}function D(m,E){for(const x in m)E.call(void 0,m[x],x,m)}function N(m){const E={};for(const x in m)E[x]=m[x];return E}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(m,E){let x,R;for(let K=1;K<arguments.length;K++){R=arguments[K];for(x in R)m[x]=R[x];for(let ee=0;ee<M.length;ee++)x=M[ee],Object.prototype.hasOwnProperty.call(R,x)&&(m[x]=R[x])}}function O(m){var E=1;m=m.split(":");const x=[];for(;0<E&&m.length;)x.push(m.shift()),E--;return m.length&&x.push(m.join(":")),x}function G(m){f.setTimeout(()=>{throw m},0)}function V(){var m=ke;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class Ne{constructor(){this.h=this.g=null}add(E,x){const R=ot.get();R.set(E,x),this.h?this.h.next=R:this.g=R,this.h=R}}var ot=new Y(()=>new te,m=>m.reset());class te{constructor(){this.next=this.g=this.h=null}set(E,x){this.h=E,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let he,Ee=!1,ke=new Ne,ze=()=>{const m=f.Promise.resolve(void 0);he=()=>{m.then(H)}};var H=()=>{for(var m;m=V();){try{m.h.call(m.g)}catch(x){G(x)}var E=ot;E.j(m),100>E.h&&(E.h++,m.next=E.g,E.g=m)}Ee=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Te=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const x=()=>{};f.addEventListener("test",x,E),f.removeEventListener("test",x,E)}catch{}return m})();function Ce(m,E){if(fe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var x=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget){if(q){e:{try{X(E.nodeName);var K=!0;break e}catch{}K=!1}K||(E=null)}}else x=="mouseover"?E=m.fromElement:x=="mouseout"&&(E=m.toElement);this.relatedTarget=E,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Be[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ce.aa.h.call(this)}}I(Ce,fe);var Be={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),At=0;function ct(m,E,x,R,K){this.listener=m,this.proxy=null,this.src=E,this.type=x,this.capture=!!R,this.ha=K,this.key=++At,this.da=this.fa=!1}function oi(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Gn(m){this.src=m,this.g={},this.h=0}Gn.prototype.add=function(m,E,x,R,K){var ee=m.toString();m=this.g[ee],m||(m=this.g[ee]=[],this.h++);var me=Rs(m,E,R,K);return-1<me?(E=m[me],x||(E.fa=!1)):(E=new ct(E,this.src,ee,!!R,K),E.fa=x,m.push(E)),E};function Ui(m,E){var x=E.type;if(x in m.g){var R=m.g[x],K=Array.prototype.indexOf.call(R,E,void 0),ee;(ee=0<=K)&&Array.prototype.splice.call(R,K,1),ee&&(oi(E),m.g[x].length==0&&(delete m.g[x],m.h--))}}function Rs(m,E,x,R){for(var K=0;K<m.length;++K){var ee=m[K];if(!ee.da&&ee.listener==E&&ee.capture==!!x&&ee.ha==R)return K}return-1}var si="closure_lm_"+(1e6*Math.random()|0),Ct={};function gt(m,E,x,R,K){if(Array.isArray(E)){for(var ee=0;ee<E.length;ee++)gt(m,E[ee],x,R,K);return null}return x=Ms(x),m&&m[Le]?m.K(E,x,p(R)?!!R.capture:!1,K):Is(m,E,x,!1,R,K)}function Is(m,E,x,R,K,ee){if(!E)throw Error("Invalid event type");var me=p(K)?!!K.capture:!!K,rt=ki(m);if(rt||(m[si]=rt=new Gn(m)),x=rt.add(E,x,R,me,ee),x.proxy)return x;if(R=Ns(),x.proxy=R,R.src=m,R.listener=x,m.addEventListener)Te||(K=me),K===void 0&&(K=!1),m.addEventListener(E.toString(),R,K);else if(m.attachEvent)m.attachEvent(Xe(E.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ns(){function m(x){return E.call(m.src,m.listener,x)}const E=Vi;return m}function ri(m,E,x,R,K){if(Array.isArray(E))for(var ee=0;ee<E.length;ee++)ri(m,E[ee],x,R,K);else R=p(R)?!!R.capture:!!R,x=Ms(x),m&&m[Le]?(m=m.i,E=String(E).toString(),E in m.g&&(ee=m.g[E],x=Rs(ee,x,R,K),-1<x&&(oi(ee[x]),Array.prototype.splice.call(ee,x,1),ee.length==0&&(delete m.g[E],m.h--)))):m&&(m=ki(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Rs(E,x,R,K)),(x=-1<m?E[m]:null)&&eo(x))}function eo(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[Le])Ui(E.i,m);else{var x=m.type,R=m.proxy;E.removeEventListener?E.removeEventListener(x,R,m.capture):E.detachEvent?E.detachEvent(Xe(x),R):E.addListener&&E.removeListener&&E.removeListener(R),(x=ki(E))?(Ui(x,m),x.h==0&&(x.src=null,E[si]=null)):oi(m)}}}function Xe(m){return m in Ct?Ct[m]:Ct[m]="on"+m}function Vi(m,E){if(m.da)m=!0;else{E=new Ce(E,this);var x=m.listener,R=m.ha||m.src;m.fa&&eo(m),m=x.call(R,E)}return m}function ki(m){return m=m[si],m instanceof Gn?m:null}var Ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ms(m){return typeof m=="function"?m:(m[Ot]||(m[Ot]=function(E){return m.handleEvent(E)}),m[Ot])}function wt(){ie.call(this),this.i=new Gn(this),this.M=this,this.F=null}I(wt,ie),wt.prototype[Le]=!0,wt.prototype.removeEventListener=function(m,E,x,R){ri(this,m,E,x,R)};function Pt(m,E){var x,R=m.F;if(R)for(x=[];R;R=R.F)x.push(R);if(m=m.M,R=E.type||E,typeof E=="string")E=new fe(E,m);else if(E instanceof fe)E.target=E.target||m;else{var K=E;E=new fe(R,m),U(E,K)}if(K=!0,x)for(var ee=x.length-1;0<=ee;ee--){var me=E.g=x[ee];K=Fn(me,R,!0,E)&&K}if(me=E.g=m,K=Fn(me,R,!0,E)&&K,K=Fn(me,R,!1,E)&&K,x)for(ee=0;ee<x.length;ee++)me=E.g=x[ee],K=Fn(me,R,!1,E)&&K}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var m=this.i,E;for(E in m.g){for(var x=m.g[E],R=0;R<x.length;R++)oi(x[R]);delete m.g[E],m.h--}}this.F=null},wt.prototype.K=function(m,E,x,R){return this.i.add(String(m),E,!1,x,R)},wt.prototype.L=function(m,E,x,R){return this.i.add(String(m),E,!0,x,R)};function Fn(m,E,x,R){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();for(var K=!0,ee=0;ee<E.length;++ee){var me=E[ee];if(me&&!me.da&&me.capture==x){var rt=me.listener,Gt=me.ha||me.src;me.fa&&Ui(m.i,me),K=rt.call(Gt,R)!==!1&&K}}return K&&!R.defaultPrevented}function Ds(m,E,x){if(typeof m=="function")x&&(m=b(m,x));else if(m&&typeof m.handleEvent=="function")m=b(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:f.setTimeout(m,E||0)}function Do(m){m.g=Ds(()=>{m.g=null,m.i&&(m.i=!1,Do(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class pt extends ie{constructor(E,x){super(),this.m=E,this.l=x,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Do(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function In(m){ie.call(this),this.h=m,this.g={}}I(In,ie);var qn=[];function Jt(m){se(m.g,function(E,x){this.g.hasOwnProperty(x)&&eo(E)},m),m.g={}}In.prototype.N=function(){In.aa.N.call(this),Jt(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hn=f.JSON.stringify,fn=f.JSON.parse,Wl=class{stringify(m){return f.JSON.stringify(m,void 0)}parse(m){return f.JSON.parse(m,void 0)}};function _r(){}_r.prototype.h=null;function to(m){return m.h||(m.h=m.i())}function Li(){}var ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oi(){fe.call(this,"d")}I(Oi,fe);function zn(){fe.call(this,"c")}I(zn,fe);var Nn={},Bi=null;function Po(){return Bi=Bi||new wt}Nn.La="serverreachability";function Ps(m){fe.call(this,Nn.La,m)}I(Ps,fe);function Ti(m){const E=Po();Pt(E,new Ps(E))}Nn.STAT_EVENT="statevent";function Ei(m,E){fe.call(this,Nn.STAT_EVENT,m),this.stat=E}I(Ei,fe);function P(m){const E=Po();Pt(E,new Ei(E,m))}Nn.Ma="timingevent";function ae(m,E){fe.call(this,Nn.Ma,m),this.size=E}I(ae,fe);function le(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){m()},E)}function pe(){this.g=!0}pe.prototype.xa=function(){this.g=!1};function de(m,E,x,R,K,ee){m.info(function(){if(m.g)if(ee)for(var me="",rt=ee.split("&"),Gt=0;Gt<rt.length;Gt++){var Fe=rt[Gt].split("=");if(1<Fe.length){var Wt=Fe[0];Fe=Fe[1];var Zt=Wt.split("_");me=2<=Zt.length&&Zt[1]=="type"?me+(Wt+"="+Fe+"&"):me+(Wt+"=redacted&")}}else me=null;else me=ee;return"XMLHTTP REQ ("+R+") [attempt "+K+"]: "+E+`
`+x+`
`+me})}function ye(m,E,x,R,K,ee,me){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+K+"]: "+E+`
`+x+`
`+ee+" "+me})}function ge(m,E,x,R){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+yt(m,x)+(R?" "+R:"")})}function Ye(m,E){m.info(function(){return"TIMEOUT: "+E})}pe.prototype.info=function(){};function yt(m,E){if(!m.g)return E;if(!E)return null;try{var x=JSON.parse(E);if(x){for(m=0;m<x.length;m++)if(Array.isArray(x[m])){var R=x[m];if(!(2>R.length)){var K=R[1];if(Array.isArray(K)&&!(1>K.length)){var ee=K[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var me=1;me<K.length;me++)K[me]=""}}}}return Hn(x)}catch{return E}}var vt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hn;function Mn(){}I(Mn,_r),Mn.prototype.g=function(){return new XMLHttpRequest},Mn.prototype.i=function(){return{}},hn=new Mn;function Si(m,E,x,R){this.j=m,this.i=E,this.l=x,this.R=R||1,this.U=new In(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Us}function Us(){this.i=null,this.g="",this.h=!1}var wa={},no={};function Vs(m,E,x){m.L=1,m.v=Os(Rt(E)),m.m=x,m.P=!0,io(m,null)}function io(m,E){m.F=Date.now(),bi(m),m.A=Rt(m.v);var x=m.A,R=m.R;Array.isArray(R)||(R=[String(R)]),ro(x.i,"t",R),m.C=0,x=m.j.J,m.h=new Us,m.g=pu(m.j,x?E:null,!m.m),0<m.O&&(m.M=new pt(b(m.Y,m,m.g),m.O)),E=m.U,x=m.g,R=m.ca;var K="readystatechange";Array.isArray(K)||(K&&(qn[0]=K.toString()),K=qn);for(var ee=0;ee<K.length;ee++){var me=gt(x,K[ee],R||E.handleEvent,!1,E.h||E);if(!me)break;E.g[me.key]=me}E=m.H?N(m.H):{},m.m?(m.u||(m.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,E)):(m.u="GET",m.g.ea(m.A,m.u,null,E)),Ti(),de(m.i,m.u,m.A,m.l,m.R,m.m)}Si.prototype.ca=function(m){m=m.target;const E=this.M;E&&bn(m)==3?E.j():this.Y(m)},Si.prototype.Y=function(m){try{if(m==this.g)e:{const Zt=bn(this.g);var E=this.g.Ba();const Jo=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||Fs(this.g)))){this.J||Zt!=4||E==7||(E==8||0>=Jo?Ti(3):Ti(2)),Tr(this);var x=this.g.Z();this.X=x;t:if(oo(this)){var R=Fs(this.g);m="";var K=R.length,ee=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),Uo(this);var me="";break t}this.h.i=new f.TextDecoder}for(E=0;E<K;E++)this.h.h=!0,m+=this.h.i.decode(R[E],{stream:!(ee&&E==K-1)});R.length=0,this.h.g+=m,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=x==200,ye(this.i,this.u,this.A,this.l,this.R,Zt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,Gt=this.g;if((rt=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(rt)){var Fe=rt;break t}}Fe=null}if(x=Fe)ge(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gi(this,x);else{this.o=!1,this.s=3,P(12),En(this),Uo(this);break e}}if(this.P){x=!0;let Pn;for(;!this.J&&this.C<me.length;)if(Pn=ks(this,me),Pn==no){Zt==4&&(this.s=4,P(14),x=!1),ge(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==wa){this.s=4,P(15),ge(this.i,this.l,me,"[Invalid Chunk]"),x=!1;break}else ge(this.i,this.l,Pn,null),Gi(this,Pn);if(oo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||me.length!=0||this.h.h||(this.s=1,P(16),x=!1),this.o=this.o&&x,!x)ge(this.i,this.l,me,"[Invalid Chunked Response]"),En(this),Uo(this);else if(0<me.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),Oa(Wt),Wt.M=!0,P(11))}}else ge(this.i,this.l,me,null),Gi(this,me);Zt==4&&En(this),this.o&&!this.J&&(Zt==4?du(this.j,this):(this.o=!1,bi(this)))}else su(this.g),x==400&&0<me.indexOf("Unknown SID")?(this.s=3,P(12)):(this.s=0,P(13)),En(this),Uo(this)}}}catch{}finally{}};function oo(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function ks(m,E){var x=m.C,R=E.indexOf(`
`,x);return R==-1?no:(x=Number(E.substring(x,R)),isNaN(x)?wa:(R+=1,R+x>E.length?no:(E=E.slice(R,R+x),m.C=R+x,E)))}Si.prototype.cancel=function(){this.J=!0,En(this)};function bi(m){m.S=Date.now()+m.I,Ut(m,m.I)}function Ut(m,E){if(m.B!=null)throw Error("WatchDog timer not null");m.B=le(b(m.ba,m),E)}function Tr(m){m.B&&(f.clearTimeout(m.B),m.B=null)}Si.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Ye(this.i,this.A),this.L!=2&&(Ti(),P(17)),En(this),this.s=2,Uo(this)):Ut(this,this.S-m)};function Uo(m){m.j.G==0||m.J||du(m.j,m)}function En(m){Tr(m);var E=m.M;E&&typeof E.ma=="function"&&E.ma(),m.M=null,Jt(m.U),m.g&&(E=m.g,m.g=null,E.abort(),E.ma())}function Gi(m,E){try{var x=m.j;if(x.G!=0&&(x.g==m||Vo(x.h,m))){if(!m.K&&Vo(x.h,m)&&x.G==3){try{var R=x.Da.g.parse(E)}catch{R=null}if(Array.isArray(R)&&R.length==3){var K=R;if(K[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<m.F)zo(x),Ho(x);else break e;La(x),P(18)}}else x.za=K[1],0<x.za-x.T&&37500>K[2]&&x.F&&x.v==0&&!x.C&&(x.C=le(b(x.Za,x),6e3));if(1>=Zl(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else lo(x,11)}else if((m.K||x.g==m)&&zo(x),!W(E))for(K=x.Da.g.parse(E),E=0;E<K.length;E++){let Fe=K[E];if(x.T=Fe[0],Fe=Fe[1],x.G==2)if(Fe[0]=="c"){x.K=Fe[1],x.ia=Fe[2];const Wt=Fe[3];Wt!=null&&(x.la=Wt,x.j.info("VER="+x.la));const Zt=Fe[4];Zt!=null&&(x.Aa=Zt,x.j.info("SVER="+x.Aa));const Jo=Fe[5];Jo!=null&&typeof Jo=="number"&&0<Jo&&(R=1.5*Jo,x.L=R,x.j.info("backChannelRequestTimeoutMs_="+R)),R=x;const Pn=m.g;if(Pn){const zs=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var ee=R.h;ee.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(ko(ee,ee.h),ee.h=null))}if(R.D){const uo=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(R.ya=uo,Ze(R.I,R.D,uo))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-m.F,x.j.info("Handshake RTT: "+x.R+"ms")),R=x;var me=m;if(R.qa=hu(R,R.J?R.ia:null,R.W),me.K){li(R.h,me);var rt=me,Gt=R.L;Gt&&(rt.I=Gt),rt.B&&(Tr(rt),bi(rt)),R.g=me}else uu(R);0<x.i.length&&Rr(x)}else Fe[0]!="stop"&&Fe[0]!="close"||lo(x,7);else x.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?lo(x,7):Va(x):Fe[0]!="noop"&&x.l&&x.l.ta(Fe),x.v=0)}}Ti(4)}catch{}}var Cd=class{constructor(m,E){this.g=m,this.map=E}};function Ra(m){this.l=m||10,f.PerformanceNavigationTiming?(m=f.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ia(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Zl(m){return m.h?1:m.g?m.g.size:0}function Vo(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function ko(m,E){m.g?m.g.add(E):m.h=E}function li(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Ra.prototype.cancel=function(){if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Sn(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const x of m.g.values())E=E.concat(x.D);return E}return L(m.i)}function eu(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(g(m)){for(var E=[],x=m.length,R=0;R<x;R++)E.push(m[R]);return E}E=[],x=0;for(R in m)E[x++]=m[R];return E}function wd(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(g(m)||typeof m=="string"){var E=[];m=m.length;for(var x=0;x<m;x++)E.push(x);return E}E=[],x=0;for(const R in m)E[x++]=R;return E}}}function Er(m,E){if(m.forEach&&typeof m.forEach=="function")m.forEach(E,void 0);else if(g(m)||typeof m=="string")Array.prototype.forEach.call(m,E,void 0);else for(var x=wd(m),R=eu(m),K=R.length,ee=0;ee<K;ee++)E.call(void 0,R[ee],x&&x[ee],m)}var Na=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sr(m,E){if(m){m=m.split("&");for(var x=0;x<m.length;x++){var R=m[x].indexOf("="),K=null;if(0<=R){var ee=m[x].substring(0,R);K=m[x].substring(R+1)}else ee=m[x];E(ee,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function so(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof so){this.h=m.h,Lo(this,m.j),this.o=m.o,this.g=m.g,Ls(this,m.s),this.l=m.l;var E=m.i,x=new Fi;x.i=E.i,E.g&&(x.g=new Map(E.g),x.h=E.h),br(this,x),this.m=m.m}else m&&(E=String(m).match(Na))?(this.h=!1,Lo(this,E[1]||"",!0),this.o=Oo(E[2]||""),this.g=Oo(E[3]||"",!0),Ls(this,E[4]),this.l=Oo(E[5]||"",!0),br(this,E[6]||"",!0),this.m=Oo(E[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}so.prototype.toString=function(){var m=[],E=this.j;E&&m.push(ui(E,Ma,!0),":");var x=this.g;return(x||E=="file")&&(m.push("//"),(E=this.o)&&m.push(ui(E,Ma,!0),"@"),m.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&m.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&m.push("/"),m.push(ui(x,x.charAt(0)=="/"?Da:tu,!0))),(x=this.i.toString())&&m.push("?",x),(x=this.m)&&m.push("#",ui(x,Nd)),m.join("")};function Rt(m){return new so(m)}function Lo(m,E,x){m.j=x?Oo(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Ls(m,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);m.s=E}else m.s=null}function br(m,E,x){E instanceof Fi?(m.i=E,nu(m.i,m.h)):(x||(E=ui(E,Id)),m.i=new Fi(E,m.h))}function Ze(m,E,x){m.i.set(E,x)}function Os(m){return Ze(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Oo(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ui(m,E,x){return typeof m=="string"?(m=encodeURI(m).replace(E,Rd),x&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Rd(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ma=/[#\/\?@]/g,tu=/[#\?:]/g,Da=/[#\?]/g,Id=/[#\?@]/g,Nd=/#/g;function Fi(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function Xt(m){m.g||(m.g=new Map,m.h=0,m.i&&Sr(m.i,function(E,x){m.add(decodeURIComponent(E.replace(/\+/g," ")),x)}))}t=Fi.prototype,t.add=function(m,E){Xt(this),this.i=null,m=Yn(this,m);var x=this.g.get(m);return x||this.g.set(m,x=[]),x.push(E),this.h+=1,this};function Ar(m,E){Xt(m),E=Yn(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function xr(m,E){return Xt(m),E=Yn(m,E),m.g.has(E)}t.forEach=function(m,E){Xt(this),this.g.forEach(function(x,R){x.forEach(function(K){m.call(E,K,R,this)},this)},this)},t.na=function(){Xt(this);const m=Array.from(this.g.values()),E=Array.from(this.g.keys()),x=[];for(let R=0;R<E.length;R++){const K=m[R];for(let ee=0;ee<K.length;ee++)x.push(E[R])}return x},t.V=function(m){Xt(this);let E=[];if(typeof m=="string")xr(this,m)&&(E=E.concat(this.g.get(Yn(this,m))));else{m=Array.from(this.g.values());for(let x=0;x<m.length;x++)E=E.concat(m[x])}return E},t.set=function(m,E){return Xt(this),this.i=null,m=Yn(this,m),xr(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},t.get=function(m,E){return m?(m=this.V(m),0<m.length?String(m[0]):E):E};function ro(m,E,x){Ar(m,E),0<x.length&&(m.i=null,m.g.set(Yn(m,E),L(x)),m.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(var x=0;x<E.length;x++){var R=E[x];const ee=encodeURIComponent(String(R)),me=this.V(R);for(R=0;R<me.length;R++){var K=ee;me[R]!==""&&(K+="="+encodeURIComponent(String(me[R]))),m.push(K)}}return this.i=m.join("&")};function Yn(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function nu(m,E){E&&!m.j&&(Xt(m),m.i=null,m.g.forEach(function(x,R){var K=R.toLowerCase();R!=K&&(Ar(this,R),ro(this,K,x))},m)),m.j=E}function Pa(m,E){const x=new pe;if(f.Image){const R=new Image;R.onload=C(Dn,x,"TestLoadImage: loaded",!0,E,R),R.onerror=C(Dn,x,"TestLoadImage: error",!1,E,R),R.onabort=C(Dn,x,"TestLoadImage: abort",!1,E,R),R.ontimeout=C(Dn,x,"TestLoadImage: timeout",!1,E,R),f.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else E(!1)}function iu(m,E){const x=new pe,R=new AbortController,K=setTimeout(()=>{R.abort(),Dn(x,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:R.signal}).then(ee=>{clearTimeout(K),ee.ok?Dn(x,"TestPingServer: ok",!0,E):Dn(x,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(K),Dn(x,"TestPingServer: error",!1,E)})}function Dn(m,E,x,R,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),R(x)}catch{}}function Ai(){this.g=new Wl}function Ua(m,E,x){const R=x||"";try{Er(m,function(K,ee){let me=K;p(K)&&(me=Hn(K)),E.push(R+ee+"="+encodeURIComponent(me))})}catch(K){throw E.push(R+"type="+encodeURIComponent("_badmap")),K}}function qi(m){this.l=m.Ub||null,this.j=m.eb||!1}I(qi,_r),qi.prototype.g=function(){return new Jn(this.l,this.j)},qi.prototype.i=(function(m){return function(){return m}})({});function Jn(m,E){wt.call(this),this.D=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Jn,wt),t=Jn.prototype,t.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=E,this.readyState=1,Bo(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(E.body=m),(this.D||f).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hi(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Bo(this)),this.g&&(this.readyState=3,Bo(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cr(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cr(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Hi(this):Bo(this),this.readyState==3&&Cr(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Hi(this))},t.Qa=function(m){this.g&&(this.response=m,Hi(this))},t.ga=function(){this.g&&Hi(this)};function Hi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Bo(m)}t.setRequestHeader=function(m,E){this.u.append(m,E)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var x=E.next();!x.done;)x=x.value,m.push(x[0]+": "+x[1]),x=E.next();return m.join(`\r
`)};function Bo(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Bs(m){let E="";return se(m,function(x,R){E+=R,E+=":",E+=x,E+=`\r
`}),E}function Go(m,E,x){e:{for(R in x){var R=!1;break e}R=!0}R||(x=Bs(x),typeof m=="string"?x!=null&&encodeURIComponent(String(x)):Ze(m,E,x))}function _t(m){wt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(_t,wt);var pn=/^https?$/i,ao=["POST","PUT"];t=_t.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,E,x,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hn.g(),this.v=this.o?to(this.o):to(hn),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(ee){Gs(this,ee);return}if(m=x||"",x=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var K in R)x.set(K,R[K]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ee of R.keys())x.set(ee,R.get(ee));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(x.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=f.FormData&&m instanceof f.FormData,!(0<=Array.prototype.indexOf.call(ao,E,void 0))||R||K||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,me]of x)this.g.setRequestHeader(ee,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wr(this),this.u=!0,this.g.send(m),this.u=!1}catch(ee){Gs(this,ee)}};function Gs(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.m=5,Fo(m),qo(m)}function Fo(m){m.A||(m.A=!0,Pt(m,"complete"),Pt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Pt(this,"complete"),Pt(this,"abort"),qo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qo(this,!0)),_t.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ou(this):this.bb())},t.bb=function(){ou(this)};function ou(m){if(m.h&&typeof u<"u"&&(!m.v[1]||bn(m)!=4||m.Z()!=2)){if(m.u&&bn(m)==4)Ds(m.Ea,0,m);else if(Pt(m,"readystatechange"),bn(m)==4){m.h=!1;try{const me=m.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var x;if(!(x=E)){var R;if(R=me===0){var K=String(m.D).match(Na)[1]||null;!K&&f.self&&f.self.location&&(K=f.self.location.protocol.slice(0,-1)),R=!pn.test(K?K.toLowerCase():"")}x=R}if(x)Pt(m,"complete"),Pt(m,"success");else{m.m=6;try{var ee=2<bn(m)?m.g.statusText:""}catch{ee=""}m.l=ee+" ["+m.Z()+"]",Fo(m)}}finally{qo(m)}}}}function qo(m,E){if(m.g){wr(m);const x=m.g,R=m.v[0]?()=>{}:null;m.g=null,m.v=null,E||Pt(m,"ready");try{x.onreadystatechange=R}catch{}}}function wr(m){m.I&&(f.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function bn(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),fn(E)}};function Fs(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function su(m){const E={};m=(m.g&&2<=bn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(W(m[R]))continue;var x=O(m[R]);const K=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ee=E[K]||[];E[K]=ee,ee.push(x)}D(E,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(m,E,x){return x&&x.internalChannelParams&&x.internalChannelParams[m]||E}function ru(m){this.Aa=0,this.i=[],this.j=new pe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qs("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qs("baseRetryDelayMs",5e3,m),this.cb=qs("retryDelaySeedMs",1e4,m),this.Wa=qs("forwardChannelMaxRetries",2,m),this.wa=qs("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Ra(m&&m.concurrentRequestLimit),this.Da=new Ai,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ru.prototype,t.la=8,t.G=1,t.connect=function(m,E,x,R){P(0),this.W=m,this.H=E||{},x&&R!==void 0&&(this.H.OSID=x,this.H.OAID=R),this.F=this.X,this.I=hu(this,null,this.W),Rr(this)};function Va(m){if(au(m),m.G==3){var E=m.U++,x=Rt(m.I);if(Ze(x,"SID",m.K),Ze(x,"RID",E),Ze(x,"TYPE","terminate"),Hs(m,x),E=new Si(m,m.j,E),E.L=2,E.v=Os(Rt(x)),x=!1,f.navigator&&f.navigator.sendBeacon)try{x=f.navigator.sendBeacon(E.v.toString(),"")}catch{}!x&&f.Image&&(new Image().src=E.v,x=!0),x||(E.g=pu(E.j,null),E.g.ea(E.v)),E.F=Date.now(),bi(E)}Ba(m)}function Ho(m){m.g&&(Oa(m),m.g.cancel(),m.g=null)}function au(m){Ho(m),m.u&&(f.clearTimeout(m.u),m.u=null),zo(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&f.clearTimeout(m.s),m.s=null)}function Rr(m){if(!Ia(m.h)&&!m.s){m.s=!0;var E=m.Ga;he||ze(),Ee||(he(),Ee=!0),ke.add(E,m),m.B=0}}function Md(m,E){return Zl(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=E.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=le(b(m.Ga,m,E),fu(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const K=new Si(this,this.j,m);let ee=this.o;if(this.S&&(ee?(ee=N(ee),U(ee,this.S)):ee=this.S),this.m!==null||this.O||(K.H=ee,ee=null),this.P)e:{for(var E=0,x=0;x<this.i.length;x++){t:{var R=this.i[x];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(E+=R,4096<E){E=x;break e}if(E===4096||x===this.i.length-1){E=x+1;break e}}E=1e3}else E=1e3;E=ka(this,K,E),x=Rt(this.I),Ze(x,"RID",m),Ze(x,"CVER",22),this.D&&Ze(x,"X-HTTP-Session-Id",this.D),Hs(this,x),ee&&(this.O?E="headers="+encodeURIComponent(String(Bs(ee)))+"&"+E:this.m&&Go(x,this.m,ee)),ko(this.h,K),this.Ua&&Ze(x,"TYPE","init"),this.P?(Ze(x,"$req",E),Ze(x,"SID","null"),K.T=!0,Vs(K,x,null)):Vs(K,x,E),this.G=2}}else this.G==3&&(m?lu(this,m):this.i.length==0||Ia(this.h)||lu(this))};function lu(m,E){var x;E?x=E.l:x=m.U++;const R=Rt(m.I);Ze(R,"SID",m.K),Ze(R,"RID",x),Ze(R,"AID",m.T),Hs(m,R),m.m&&m.o&&Go(R,m.m,m.o),x=new Si(m,m.j,x,m.B+1),m.m===null&&(x.H=m.o),E&&(m.i=E.D.concat(m.i)),E=ka(m,x,1e3),x.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),ko(m.h,x),Vs(x,R,E)}function Hs(m,E){m.H&&se(m.H,function(x,R){Ze(E,R,x)}),m.l&&Er({},function(x,R){Ze(E,R,x)})}function ka(m,E,x){x=Math.min(m.i.length,x);var R=m.l?b(m.l.Na,m.l,m):null;e:{var K=m.i;let ee=-1;for(;;){const me=["count="+x];ee==-1?0<x?(ee=K[0].g,me.push("ofs="+ee)):ee=0:me.push("ofs="+ee);let rt=!0;for(let Gt=0;Gt<x;Gt++){let Fe=K[Gt].g;const Wt=K[Gt].map;if(Fe-=ee,0>Fe)ee=Math.max(0,K[Gt].g-100),rt=!1;else try{Ua(Wt,me,"req"+Fe+"_")}catch{R&&R(Wt)}}if(rt){R=me.join("&");break e}}}return m=m.i.splice(0,x),E.D=m,R}function uu(m){if(!m.g&&!m.u){m.Y=1;var E=m.Fa;he||ze(),Ee||(he(),Ee=!0),ke.add(E,m),m.v=0}}function La(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=le(b(m.Fa,m),fu(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,cu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=le(b(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,P(10),Ho(this),cu(this))};function Oa(m){m.A!=null&&(f.clearTimeout(m.A),m.A=null)}function cu(m){m.g=new Si(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var E=Rt(m.qa);Ze(E,"RID","rpc"),Ze(E,"SID",m.K),Ze(E,"AID",m.T),Ze(E,"CI",m.F?"0":"1"),!m.F&&m.ja&&Ze(E,"TO",m.ja),Ze(E,"TYPE","xmlhttp"),Hs(m,E),m.m&&m.o&&Go(E,m.m,m.o),m.L&&(m.g.I=m.L);var x=m.g;m=m.ia,x.L=1,x.v=Os(Rt(E)),x.m=null,x.P=!0,io(x,m)}t.Za=function(){this.C!=null&&(this.C=null,Ho(this),La(this),P(19))};function zo(m){m.C!=null&&(f.clearTimeout(m.C),m.C=null)}function du(m,E){var x=null;if(m.g==E){zo(m),Oa(m),m.g=null;var R=2}else if(Vo(m.h,E))x=E.D,li(m.h,E),R=1;else return;if(m.G!=0){if(E.o)if(R==1){x=E.m?E.m.length:0,E=Date.now()-E.F;var K=m.B;R=Po(),Pt(R,new ae(R,x)),Rr(m)}else uu(m);else if(K=E.s,K==3||K==0&&0<E.X||!(R==1&&Md(m,E)||R==2&&La(m)))switch(x&&0<x.length&&(E=m.h,E.i=E.i.concat(x)),K){case 1:lo(m,5);break;case 4:lo(m,10);break;case 3:lo(m,6);break;default:lo(m,2)}}}function fu(m,E){let x=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(x*=2),x*E}function lo(m,E){if(m.j.info("Error code "+E),E==2){var x=b(m.fb,m),R=m.Xa;const K=!R;R=new so(R||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Lo(R,"https"),Os(R),K?Pa(R.toString(),x):iu(R.toString(),x)}else P(2);m.G=0,m.l&&m.l.sa(E),Ba(m),au(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),P(2)):(this.j.info("Failed to ping google.com"),P(1))};function Ba(m){if(m.G=0,m.ka=[],m.l){const E=Sn(m.h);(E.length!=0||m.i.length!=0)&&(k(m.ka,E),k(m.ka,m.i),m.h.i.length=0,L(m.i),m.i.length=0),m.l.ra()}}function hu(m,E,x){var R=x instanceof so?Rt(x):new so(x);if(R.g!="")E&&(R.g=E+"."+R.g),Ls(R,R.s);else{var K=f.location;R=K.protocol,E=E?E+"."+K.hostname:K.hostname,K=+K.port;var ee=new so(null);R&&Lo(ee,R),E&&(ee.g=E),K&&Ls(ee,K),x&&(ee.l=x),R=ee}return x=m.D,E=m.ya,x&&E&&Ze(R,x,E),Ze(R,"VER",m.la),Hs(m,R),R}function pu(m,E,x){if(E&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Ca&&!m.pa?new _t(new qi({eb:x})):new _t(m.pa),E.Ha(m.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mu(){}t=mu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ir(){}Ir.prototype.g=function(m,E){return new An(m,E)};function An(m,E){wt.call(this),this.g=new ru(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(m?m["X-WebChannel-Client-Profile"]=E.va:m={"X-WebChannel-Client-Profile":E.va}),this.g.S=m,(m=E&&E.Sb)&&!W(m)&&(this.g.m=m),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!W(E)&&(this.g.D=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Yo(this)}I(An,wt),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Va(this.g)},An.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var x={};x.__data__=m,m=x}else this.u&&(x={},x.__data__=Hn(m),m=x);E.i.push(new Cd(E.Ya++,m)),E.G==3&&Rr(E)},An.prototype.N=function(){this.g.l=null,delete this.j,Va(this.g),delete this.g,An.aa.N.call(this)};function gu(m){Oi.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const x in E){m=x;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}I(gu,Oi);function yu(){zn.call(this),this.status=1}I(yu,zn);function Yo(m){this.g=m}I(Yo,mu),Yo.prototype.ua=function(){Pt(this.g,"a")},Yo.prototype.ta=function(m){Pt(this.g,new gu(m))},Yo.prototype.sa=function(m){Pt(this.g,new yu)},Yo.prototype.ra=function(){Pt(this.g,"b")},Ir.prototype.createWebChannel=Ir.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,iS=function(){return new Ir},nS=function(){return Po()},tS=Nn,_p={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vt.NO_ERROR=0,vt.TIMEOUT=8,vt.HTTP_ERROR=6,Vc=vt,Bt.COMPLETE="complete",eS=Bt,Li.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Rl=Li,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,ZE=_t}).apply(typeof Cc<"u"?Cc:typeof self<"u"?self:typeof window<"u"?window:{});const X0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new HE("@firebase/firestore");function xl(){return dr.logLevel}function be(t,...e){if(dr.logLevel<=We.DEBUG){const n=e.map($p);dr.debug(`Firestore (${Aa}): ${t}`,...n)}}function Ro(t,...e){if(dr.logLevel<=We.ERROR){const n=e.map($p);dr.error(`Firestore (${Aa}): ${t}`,...n)}}function pa(t,...e){if(dr.logLevel<=We.WARN){const n=e.map($p);dr.warn(`Firestore (${Aa}): ${t}`,...n)}}function $p(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t="Unexpected state"){const e=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: `+t;throw Ro(e),new Error(e)}function ut(t,e){t||Me()}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(vn.UNAUTHENTICATED)))}shutdown(){}}class f2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class h2{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ut(this.o===void 0);let o=this.i;const r=g=>this.i!==o?(o=this.i,n(g)):Promise.resolve();let l=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Es,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},f=g=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Es)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ut(typeof o.accessToken=="string"),new oS(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string"),new vn(e)}}class p2{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class m2{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new p2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class g2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ut(this.o===void 0);const o=l=>{l.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const r=l=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?r(l):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ut(typeof n.token=="string"),this.R=n.token,new g2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<t;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const r=v2(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<n&&(o+=e.charAt(r[l]%e.length))}return o}}function nt(t,e){return t<e?-1:t>e?1:0}function ma(t,e,n){return t.length===e.length&&t.every(((o,r)=>n(o,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qt.fromMillis(Date.now())}static fromDate(e){return Qt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Qt(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Qt(0,0))}static max(){return new Ue(new Qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,o){n===void 0?n=0:n>e.length&&Me(),o===void 0?o=e.length-n:o>e.length-n&&Me(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Gl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gl?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let r=0;r<o;r++){const l=e.get(r),u=n.get(r);if(l<u)return-1;if(l>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class bt extends Gl{construct(e,n,o){return new bt(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new xe(ue.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((r=>r.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const _2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Gl{construct(e,n,o){return new un(e,n,o)}static isValidIdentifier(e){return _2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new un(["__name__"])}static fromServerFormat(e){const n=[];let o="",r=0;const l=()=>{if(o.length===0)throw new xe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let u=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new xe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new xe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=g,r+=2}else f==="`"?(u=!u,r++):f!=="."||u?(o+=f,r++):(l(),r++)}if(l(),u)throw new xe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(n)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(bt.fromString(e))}static fromName(e){return new Re(bt.fromString(e).popFirst(5))}static empty(){return new Re(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new bt(e.slice()))}}function T2(t,e){const n=t.toTimestamp().seconds,o=t.toTimestamp().nanoseconds+1,r=Ue.fromTimestamp(o===1e9?new Qt(n+1,0):new Qt(n,o));return new bs(r,Re.empty(),e)}function E2(t){return new bs(t.readTime,t.key,-1)}class bs{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new bs(Ue.min(),Re.empty(),-1)}static max(){return new bs(Ue.max(),Re.empty(),-1)}}function S2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(t.documentKey,e.documentKey),n!==0?n:nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==b2)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(n,l).next(o,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.reject(n)}static resolve(e){return new ce(((n,o)=>{n(e)}))}static reject(e){return new ce(((n,o)=>{o(e)}))}static waitFor(e){return new ce(((n,o)=>{let r=0,l=0,u=!1;e.forEach((f=>{++r,f.next((()=>{++l,u&&l===r&&n()}),(g=>o(g)))})),u=!0,l===r&&n()}))}static or(e){let n=ce.resolve(!1);for(const o of e)n=n.next((r=>r?ce.resolve(r):o()));return n}static forEach(e,n){const o=[];return e.forEach(((r,l)=>{o.push(n.call(this,r,l))})),this.waitFor(o)}static mapArray(e,n){return new ce(((o,r)=>{const l=e.length,u=new Array(l);let f=0;for(let g=0;g<l;g++){const p=g;n(e[p]).next((_=>{u[p]=_,++f,f===l&&o(u)}),(_=>r(_)))}}))}static doWhile(e,n){return new ce(((o,r)=>{const l=()=>{e()===!0?n().next((()=>{l()}),r):o()};l()}))}}function x2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ie(o),this.se=o=>n.writeSequenceNumber(o))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qp.oe=-1;function dd(t){return t==null}function $c(t){return t===0&&1/t==-1/0}function C2(t){return typeof t=="number"&&Number.isInteger(t)&&!$c(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(e,o.key);if(r===0)return n+o.left.size;r<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}}class wc{constructor(e,n,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?o(e.key,n):1,n&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,o,r,l){this.key=e,this.value=n,this.color=o??ln.RED,this.left=r??ln.EMPTY,this.right=l??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,r,l){return new ln(e??this.key,n??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let r=this;const l=o(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,n,o),null):l===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ln.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Me();const e=this.left.check();if(e!==this.right.check())throw Me();return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Me()}get value(){throw Me()}get color(){throw Me()}get left(){throw Me()}get right(){throw Me()}copy(e,n,o,r,l){return this}insert(e,n,o){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z0(this.data.getIterator())}getIteratorFrom(e){return new Z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new cn(this.comparator);return n.data=e,n}}class Z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new ti([])}unionWith(e){let n=new cn(un.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new ti(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ma(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new aS("Invalid base64 string: "+l):l}})(e);return new dn(n)}static fromUint8Array(e){const n=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const w2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(t){if(ut(!!t),typeof t=="string"){let e=0;const n=w2.exec(t);if(ut(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const o=new Date(t);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Lt(t.seconds),nanos:Lt(t.nanos)}}function Lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fr(t){return typeof t=="string"?dn.fromBase64String(t):dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wp(t){const e=t.mapValue.fields.__previous_value__;return Xp(e)?Wp(e):e}function Fl(t){const e=As(t.mapValue.fields.__local_write_time__.timestampValue);return new Qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,o,r,l,u,f,g,p){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=p}}class ql{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ql("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc={mapValue:{}};function hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xp(t)?4:N2(t)?9007199254740991:I2(t)?10:11:Me()}function Wi(t,e){if(t===e)return!0;const n=hr(t);if(n!==hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fl(t).isEqual(Fl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=As(r.timestampValue),f=As(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,l){return fr(r.bytesValue).isEqual(fr(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,l){return Lt(r.geoPointValue.latitude)===Lt(l.geoPointValue.latitude)&&Lt(r.geoPointValue.longitude)===Lt(l.geoPointValue.longitude)})(t,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return Lt(r.integerValue)===Lt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=Lt(r.doubleValue),f=Lt(l.doubleValue);return u===f?$c(u)===$c(f):isNaN(u)&&isNaN(f)}return!1})(t,e);case 9:return ma(t.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},f=l.mapValue.fields||{};if(W0(u)!==W0(f))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(f[g]===void 0||!Wi(u[g],f[g])))return!1;return!0})(t,e);default:return Me()}}function Hl(t,e){return(t.values||[]).find((n=>Wi(n,e)))!==void 0}function ga(t,e){if(t===e)return 0;const n=hr(t),o=hr(e);if(n!==o)return nt(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return nt(t.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=Lt(l.integerValue||l.doubleValue),g=Lt(u.integerValue||u.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(t,e);case 3:return eT(t.timestampValue,e.timestampValue);case 4:return eT(Fl(t),Fl(e));case 5:return nt(t.stringValue,e.stringValue);case 6:return(function(l,u){const f=fr(l),g=fr(u);return f.compareTo(g)})(t.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),g=u.split("/");for(let p=0;p<f.length&&p<g.length;p++){const _=nt(f[p],g[p]);if(_!==0)return _}return nt(f.length,g.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=nt(Lt(l.latitude),Lt(u.latitude));return f!==0?f:nt(Lt(l.longitude),Lt(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return tT(t.arrayValue,e.arrayValue);case 10:return(function(l,u){var f,g,p,_;const S=l.fields||{},b=u.fields||{},C=(f=S.value)===null||f===void 0?void 0:f.arrayValue,I=(g=b.value)===null||g===void 0?void 0:g.arrayValue,L=nt(((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0,((_=I==null?void 0:I.values)===null||_===void 0?void 0:_.length)||0);return L!==0?L:tT(C,I)})(t.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Rc.mapValue&&u===Rc.mapValue)return 0;if(l===Rc.mapValue)return 1;if(u===Rc.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),p=u.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let S=0;S<g.length&&S<_.length;++S){const b=nt(g[S],_[S]);if(b!==0)return b;const C=ga(f[g[S]],p[_[S]]);if(C!==0)return C}return nt(g.length,_.length)})(t.mapValue,e.mapValue);default:throw Me()}}function eT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nt(t,e);const n=As(t),o=As(e),r=nt(n.seconds,o.seconds);return r!==0?r:nt(n.nanos,o.nanos)}function tT(t,e){const n=t.values||[],o=e.values||[];for(let r=0;r<n.length&&r<o.length;++r){const l=ga(n[r],o[r]);if(l)return l}return nt(n.length,o.length)}function ya(t){return Tp(t)}function Tp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const o=As(n);return`time(${o.seconds},${o.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return fr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Re.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let o="[",r=!0;for(const l of n.values||[])r?r=!1:o+=",",o+=Tp(l);return o+"]"})(t.arrayValue):"mapValue"in t?(function(n){const o=Object.keys(n.fields||{}).sort();let r="{",l=!0;for(const u of o)l?l=!1:r+=",",r+=`${u}:${Tp(n.fields[u])}`;return r+"}"})(t.mapValue):Me()}function Ep(t){return!!t&&"integerValue"in t}function Zp(t){return!!t&&"arrayValue"in t}function nT(t){return!!t&&"nullValue"in t}function iT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kc(t){return!!t&&"mapValue"in t}function I2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ml(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return yr(t.mapValue.fields,((n,o)=>e.mapValue.fields[n]=Ml(o))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ml(t.arrayValue.values[n]);return e}return Object.assign({},t)}function N2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!kc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ml(n)}setAll(e){let n=un.emptyPath(),o={},r=[];e.forEach(((u,f)=>{if(!n.isImmediateParentOf(f)){const g=this.getFieldsMap(n);this.applyChanges(g,o,r),o={},r=[],n=f.popLast()}u?o[f.lastSegment()]=Ml(u):r.push(f.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,o,r)}delete(e){const n=this.field(e.popLast());kc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let r=n.mapValue.fields[e.get(o)];kc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,o){yr(n,((r,l)=>e[r]=l));for(const r of o)delete e[r]}clone(){return new Bn(Ml(this.value))}}function lS(t){const e=[];return yr(t.fields,((n,o)=>{const r=new un([n]);if(kc(o)){const l=lS(o.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new ti(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n,o,r,l,u,f){this.key=e,this.documentType=n,this.version=o,this.readTime=r,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new _n(e,0,Ue.min(),Ue.min(),Ue.min(),Bn.empty(),0)}static newFoundDocument(e,n,o,r){return new _n(e,1,n,Ue.min(),o,r,0)}static newNoDocument(e,n){return new _n(e,2,n,Ue.min(),Ue.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new _n(e,3,n,Ue.min(),Ue.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n){this.position=e,this.inclusive=n}}function oT(t,e,n){let o=0;for(let r=0;r<t.position.length;r++){const l=e[r],u=t.position[r];if(l.field.isKeyField()?o=Re.comparator(Re.fromName(u.referenceValue),n.key):o=ga(u,n.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function sT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function M2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{}class $t extends uS{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new P2(e,n,o):n==="array-contains"?new k2(e,o):n==="in"?new L2(e,o):n==="not-in"?new O2(e,o):n==="array-contains-any"?new B2(e,o):new $t(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new U2(e,o):new V2(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ga(n,this.value)):n!==null&&hr(this.value)===hr(n)&&this.matchesComparison(ga(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zi extends uS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zi(e,n)}matches(e){return cS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cS(t){return t.op==="and"}function dS(t){return D2(t)&&cS(t)}function D2(t){for(const e of t.filters)if(e instanceof Zi)return!1;return!0}function Sp(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+ya(t.value);if(dS(t))return t.filters.map((e=>Sp(e))).join(",");{const e=t.filters.map((n=>Sp(n))).join(",");return`${t.op}(${e})`}}function fS(t,e){return t instanceof $t?(function(o,r){return r instanceof $t&&o.op===r.op&&o.field.isEqual(r.field)&&Wi(o.value,r.value)})(t,e):t instanceof Zi?(function(o,r){return r instanceof Zi&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,u,f)=>l&&fS(u,r.filters[f])),!0):!1})(t,e):void Me()}function hS(t){return t instanceof $t?(function(n){return`${n.field.canonicalString()} ${n.op} ${ya(n.value)}`})(t):t instanceof Zi?(function(n){return n.op.toString()+" {"+n.getFilters().map(hS).join(" ,")+"}"})(t):"Filter"}class P2 extends $t{constructor(e,n,o){super(e,n,o),this.key=Re.fromName(o.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class U2 extends $t{constructor(e,n){super(e,"in",n),this.keys=pS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class V2 extends $t{constructor(e,n){super(e,"not-in",n),this.keys=pS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((o=>Re.fromName(o.referenceValue)))}class k2 extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zp(n)&&Hl(n.arrayValue,this.value)}}class L2 extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hl(this.value.arrayValue,n)}}class O2 extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hl(this.value.arrayValue,n)}}class B2 extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>Hl(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n=null,o=[],r=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=u,this.endAt=f,this.ue=null}}function rT(t,e=null,n=[],o=[],r=null,l=null,u=null){return new G2(t,e,n,o,r,l,u)}function em(t){const e=Ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>Sp(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>ya(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>ya(o))).join(",")),e.ue=n}return e.ue}function tm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!M2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sT(t.startAt,e.startAt)&&sT(t.endAt,e.endAt)}function bp(t){return Re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n=null,o=[],r=[],l=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function F2(t,e,n,o,r,l,u,f){return new fd(t,e,n,o,r,l,u,f)}function mS(t){return new fd(t)}function aT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function q2(t){return t.collectionGroup!==null}function Dl(t){const e=Ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),n.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new cn(un.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Xc(l,o))})),n.has(un.keyField().canonicalString())||e.ce.push(new Xc(un.keyField(),o))}return e.ce}function Qi(t){const e=Ve(t);return e.le||(e.le=H2(e,Dl(t))),e.le}function H2(t,e){if(t.limitType==="F")return rT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Xc(r.field,l)}));const n=t.endAt?new Qc(t.endAt.position,t.endAt.inclusive):null,o=t.startAt?new Qc(t.startAt.position,t.startAt.inclusive):null;return rT(t.path,t.collectionGroup,e,t.filters,t.limit,n,o)}}function Ap(t,e,n){return new fd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hd(t,e){return tm(Qi(t),Qi(e))&&t.limitType===e.limitType}function gS(t){return`${em(Qi(t))}|lt:${t.limitType}`}function sa(t){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((r=>hS(r))).join(", ")}]`),dd(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((r=>ya(r))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((r=>ya(r))).join(",")),`Target(${o})`})(Qi(t))}; limitType=${t.limitType})`}function pd(t,e){return e.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):Re.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(t,e)&&(function(o,r){for(const l of Dl(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(t,e)&&(function(o,r){return!(o.startAt&&!(function(u,f,g){const p=oT(u,f,g);return u.inclusive?p<=0:p<0})(o.startAt,Dl(o),r)||o.endAt&&!(function(u,f,g){const p=oT(u,f,g);return u.inclusive?p>=0:p>0})(o.endAt,Dl(o),r))})(t,e)}function z2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yS(t){return(e,n)=>{let o=!1;for(const r of Dl(t)){const l=Y2(r,e,n);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function Y2(t,e,n){const o=t.field.isKeyField()?Re.comparator(e.key,n.key):(function(l,u,f){const g=u.data.field(l),p=f.data.field(l);return g!==null&&p!==null?ga(g,p):Me()})(t.field,e,n);switch(t.dir){case"asc":return o;case"desc":return-1*o;default:return Me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),r=this.inner[o];if(r===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],e))return o.length===1?delete this.inner[n]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(e){yr(this.inner,((n,o)=>{for(const[r,l]of o)e(r,l)}))}isEmpty(){return rS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new xt(Re.comparator);function Io(){return J2}const vS=new xt(Re.comparator);function Il(...t){let e=vS;for(const n of t)e=e.insert(n.key,n);return e}function _S(t){let e=vS;return t.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function lr(){return Pl()}function TS(){return Pl()}function Pl(){return new xa((t=>t.toString()),((t,e)=>t.isEqual(e)))}const K2=new xt(Re.comparator),j2=new cn(Re.comparator);function je(...t){let e=j2;for(const n of t)e=e.add(n);return e}const $2=new cn(nt);function Q2(){return $2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function ES(t){return{integerValue:""+t}}function X2(t,e){return C2(e)?ES(e):nm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this._=void 0}}function W2(t,e,n){return t instanceof Wc?(function(r,l){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Xp(l)&&(l=Wp(l)),l&&(u.fields.__previous_value__=l),{mapValue:u}})(n,e):t instanceof zl?bS(t,e):t instanceof Yl?AS(t,e):(function(r,l){const u=SS(r,l),f=lT(u)+lT(r.Pe);return Ep(u)&&Ep(r.Pe)?ES(f):nm(r.serializer,f)})(t,e)}function Z2(t,e,n){return t instanceof zl?bS(t,e):t instanceof Yl?AS(t,e):n}function SS(t,e){return t instanceof Zc?(function(o){return Ep(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class Wc extends md{}class zl extends md{constructor(e){super(),this.elements=e}}function bS(t,e){const n=xS(e);for(const o of t.elements)n.some((r=>Wi(r,o)))||n.push(o);return{arrayValue:{values:n}}}class Yl extends md{constructor(e){super(),this.elements=e}}function AS(t,e){let n=xS(e);for(const o of t.elements)n=n.filter((r=>!Wi(r,o)));return{arrayValue:{values:n}}}class Zc extends md{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function lT(t){return Lt(t.integerValue||t.doubleValue)}function xS(t){return Zp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function eP(t,e){return t.field.isEqual(e.field)&&(function(o,r){return o instanceof zl&&r instanceof zl||o instanceof Yl&&r instanceof Yl?ma(o.elements,r.elements,Wi):o instanceof Zc&&r instanceof Zc?Wi(o.Pe,r.Pe):o instanceof Wc&&r instanceof Wc})(t.transform,e.transform)}class tP{constructor(e,n){this.version=e,this.transformResults=n}}class Mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class gd{}function CS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new im(t.key,Mi.none()):new jl(t.key,t.data,Mi.none());{const n=t.data,o=Bn.empty();let r=new cn(un.comparator);for(let l of e.fields)if(!r.has(l)){let u=n.field(l);u===null&&l.length>1&&(l=l.popLast(),u=n.field(l)),u===null?o.delete(l):o.set(l,u),r=r.add(l)}return new ws(t.key,o,new ti(r.toArray()),Mi.none())}}function nP(t,e,n){t instanceof jl?(function(r,l,u){const f=r.value.clone(),g=cT(r.fieldTransforms,l,u.transformResults);f.setAll(g),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):t instanceof ws?(function(r,l,u){if(!Lc(r.precondition,l))return void l.convertToUnknownDocument(u.version);const f=cT(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(wS(r)),g.setAll(f),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(t,e,n):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Ul(t,e,n,o){return t instanceof jl?(function(l,u,f,g){if(!Lc(l.precondition,u))return f;const p=l.value.clone(),_=dT(l.fieldTransforms,g,u);return p.setAll(_),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(t,e,n,o):t instanceof ws?(function(l,u,f,g){if(!Lc(l.precondition,u))return f;const p=dT(l.fieldTransforms,g,u),_=u.data;return _.setAll(wS(l)),_.setAll(p),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((S=>S.field)))})(t,e,n,o):(function(l,u,f){return Lc(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(t,e,n)}function iP(t,e){let n=null;for(const o of t.fieldTransforms){const r=e.data.field(o.field),l=SS(o.transform,r||null);l!=null&&(n===null&&(n=Bn.empty()),n.set(o.field,l))}return n||null}function uT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&ma(o,r,((l,u)=>eP(l,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jl extends gd{constructor(e,n,o,r=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ws extends gd{constructor(e,n,o,r,l=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function wS(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=t.data.field(n);e.set(n,o)}})),e}function cT(t,e,n){const o=new Map;ut(t.length===n.length);for(let r=0;r<n.length;r++){const l=t[r],u=l.transform,f=e.data.field(l.field);o.set(l.field,Z2(u,f,n[r]))}return o}function dT(t,e,n){const o=new Map;for(const r of t){const l=r.transform,u=n.data.field(r.field);o.set(r.field,W2(l,u,e))}return o}class im extends gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oP extends gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n,o,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&nP(l,e,o[r])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Ul(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Ul(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=TS();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=n.has(r.key)?null:f;const g=CS(u,f);g!==null&&o.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(Ue.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),je())}isEqual(e){return this.batchId===e.batchId&&ma(this.mutations,e.mutations,((n,o)=>uT(n,o)))&&ma(this.baseMutations,e.baseMutations,((n,o)=>uT(n,o)))}}class om{constructor(e,n,o,r){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=r}static from(e,n,o){ut(e.mutations.length===o.length);let r=(function(){return K2})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,o[u].version);return new om(e,n,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,Qe;function lP(t){switch(t){default:return Me();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function RS(t){if(t===void 0)return Ro("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Yt.OK:return ue.OK;case Yt.CANCELLED:return ue.CANCELLED;case Yt.UNKNOWN:return ue.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return ue.INTERNAL;case Yt.UNAVAILABLE:return ue.UNAVAILABLE;case Yt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Yt.NOT_FOUND:return ue.NOT_FOUND;case Yt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Yt.ABORTED:return ue.ABORTED;case Yt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Yt.DATA_LOSS:return ue.DATA_LOSS;default:return Me()}}(Qe=Yt||(Yt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new ur([4294967295,4294967295],0);function fT(t){const e=uP().encode(t),n=new WE;return n.update(e),new Uint8Array(n.digest())}function hT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ur([n,o],0),new ur([r,l],0)]}class sm{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Nl(`Invalid padding: ${n}`);if(o<0)throw new Nl(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ur.fromNumber(this.Ie)}Ee(e,n,o){let r=e.add(n.multiply(ur.fromNumber(o)));return r.compare(cP)===1&&(r=new ur([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=fT(e),[o,r]=hT(n);for(let l=0;l<this.hashCount;l++){const u=this.Ee(o,r,l);if(!this.de(u))return!1}return!0}static create(e,n,o){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new sm(l,r,n);return o.forEach((f=>u.insert(f))),u}insert(e){if(this.Ie===0)return;const n=fT(e),[o,r]=hT(n);for(let l=0;l<this.hashCount;l++){const u=this.Ee(o,r,l);this.Ae(u)}}Ae(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,o,r,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const r=new Map;return r.set(e,$l.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new yd(Ue.min(),r,new xt(nt),Io(),je())}}class $l{constructor(e,n,o,r,l){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new $l(o,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n,o,r){this.Re=e,this.removedTargetIds=n,this.key=o,this.Ve=r}}class IS{constructor(e,n){this.targetId=e,this.me=n}}class NS{constructor(e,n,o=dn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=r}}class pT{constructor(){this.fe=0,this.ge=gT(),this.pe=dn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=je(),n=je(),o=je();return this.ge.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:o=o.add(r);break;default:Me()}})),new $l(this.pe,this.ye,e,n,o)}Ce(){this.we=!1,this.ge=gT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ut(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Io(),this.qe=mT(),this.Qe=new xt(nt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const o=this.Ge(n);switch(e.state){case 0:this.ze(n)&&o.De(e.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(e.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(o.Ne(),o.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),o.De(e.resumeToken));break;default:Me()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((o,r)=>{this.ze(r)&&n(r)}))}He(e){const n=e.targetId,o=e.me.count,r=this.Je(n);if(r){const l=r.target;if(bp(l))if(o===0){const u=new Re(l.path);this.Ue(n,u,_n.newNoDocument(u,Ue.min()))}else ut(o===1);else{const u=this.Ye(n);if(u!==o){const f=this.Ze(e),g=f?this.Xe(f,e,u):1;if(g!==0){this.je(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=n;let u,f;try{u=fr(o).toUint8Array()}catch(g){if(g instanceof aS)return pa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new sm(u,r,l)}catch(g){return pa(g instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.Ie===0?null:f}Xe(e,n,o){return n.me.count===o-this.nt(e,n.targetId)?0:2}nt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let r=0;return o.forEach((l=>{const u=this.Le.tt(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Ue(n,l,null),r++)})),r}rt(e){const n=new Map;this.Be.forEach(((l,u)=>{const f=this.Je(u);if(f){if(l.current&&bp(f.target)){const g=new Re(f.target.path);this.ke.get(g)!==null||this.it(u,g)||this.Ue(u,g,_n.newNoDocument(g,e))}l.be&&(n.set(u,l.ve()),l.Ce())}}));let o=je();this.qe.forEach(((l,u)=>{let f=!0;u.forEachWhile((g=>{const p=this.Je(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(o=o.add(l))})),this.ke.forEach(((l,u)=>u.setReadTime(e)));const r=new yd(e,n,this.Qe,this.ke,o);return this.ke=Io(),this.qe=mT(),this.Qe=new xt(nt),r}$e(e,n){if(!this.ze(e))return;const o=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,o),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,o){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),o&&(this.ke=this.ke.insert(n,o))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new pT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new cn(nt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new pT),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function mT(){return new xt(Re.comparator)}function gT(){return new xt(Re.comparator)}const fP={asc:"ASCENDING",desc:"DESCENDING"},hP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pP={and:"AND",or:"OR"};class mP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xp(t,e){return t.useProto3Json||dd(e)?e:{value:e}}function ed(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gP(t,e){return ed(t,e.toTimestamp())}function Xi(t){return ut(!!t),Ue.fromTimestamp((function(n){const o=As(n);return new Qt(o.seconds,o.nanos)})(t))}function rm(t,e){return Cp(t,e).canonicalString()}function Cp(t,e){const n=(function(r){return new bt(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function DS(t){const e=bt.fromString(t);return ut(LS(e)),e}function wp(t,e){return rm(t.databaseId,e.path)}function Bh(t,e){const n=DS(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Re(US(n))}function PS(t,e){return rm(t.databaseId,e)}function yP(t){const e=DS(t);return e.length===4?bt.emptyPath():US(e)}function Rp(t){return new bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function US(t){return ut(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function yT(t,e,n){return{name:wp(t,e),fields:n.value.mapValue.fields}}function vP(t,e){let n;if("targetChange"in e){e.targetChange;const o=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Me()})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(ut(_===void 0||typeof _=="string"),dn.fromBase64String(_||"")):(ut(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),dn.fromUint8Array(_||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(p){const _=p.code===void 0?ue.UNKNOWN:RS(p.code);return new xe(_,p.message||"")})(u);n=new NS(o,r,l,f||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const r=Bh(t,o.document.name),l=Xi(o.document.updateTime),u=o.document.createTime?Xi(o.document.createTime):Ue.min(),f=new Bn({mapValue:{fields:o.document.fields}}),g=_n.newFoundDocument(r,l,u,f),p=o.targetIds||[],_=o.removedTargetIds||[];n=new Oc(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const r=Bh(t,o.document),l=o.readTime?Xi(o.readTime):Ue.min(),u=_n.newNoDocument(r,l),f=o.removedTargetIds||[];n=new Oc([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const r=Bh(t,o.document),l=o.removedTargetIds||[];n=new Oc([],l,r,null)}else{if(!("filter"in e))return Me();{e.filter;const o=e.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,u=new aP(r,l),f=o.targetId;n=new IS(f,u)}}return n}function _P(t,e){let n;if(e instanceof jl)n={update:yT(t,e.key,e.value)};else if(e instanceof im)n={delete:wp(t,e.key)};else if(e instanceof ws)n={update:yT(t,e.key,e.data),updateMask:RP(e.fieldMask)};else{if(!(e instanceof oP))return Me();n={verify:wp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(l,u){const f=u.transform;if(f instanceof Wc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof zl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Yl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Zc)return{fieldPath:u.field.canonicalString(),increment:f.Pe};throw Me()})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:gP(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me()})(t,e.precondition)),n}function TP(t,e){return t&&t.length>0?(ut(e!==void 0),t.map((n=>(function(r,l){let u=r.updateTime?Xi(r.updateTime):Xi(l);return u.isEqual(Ue.min())&&(u=Xi(l)),new tP(u,r.transformResults||[])})(n,e)))):[]}function EP(t,e){return{documents:[PS(t,e.path)]}}function SP(t,e){const n={structuredQuery:{}},o=e.path;let r;e.collectionGroup!==null?(r=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=PS(t,r);const l=(function(p){if(p.length!==0)return kS(Zi.create(p,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((_=>(function(b){return{field:ra(b.field),direction:xP(b.dir)}})(_)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const f=xp(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{_t:n,parent:r}}function bP(t){let e=yP(t.parent);const n=t.structuredQuery,o=n.from?n.from.length:0;let r=null;if(o>0){ut(o===1);const _=n.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];n.where&&(l=(function(S){const b=VS(S);return b instanceof Zi&&dS(b)?b.getFilters():[b]})(n.where));let u=[];n.orderBy&&(u=(function(S){return S.map((b=>(function(I){return new Xc(aa(I.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(b)))})(n.orderBy));let f=null;n.limit&&(f=(function(S){let b;return b=typeof S=="object"?S.value:S,dd(b)?null:b})(n.limit));let g=null;n.startAt&&(g=(function(S){const b=!!S.before,C=S.values||[];return new Qc(C,b)})(n.startAt));let p=null;return n.endAt&&(p=(function(S){const b=!S.before,C=S.values||[];return new Qc(C,b)})(n.endAt)),F2(e,r,u,l,f,"F",g,p)}function AP(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=aa(n.unaryFilter.field);return $t.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=aa(n.unaryFilter.field);return $t.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=aa(n.unaryFilter.field);return $t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=aa(n.unaryFilter.field);return $t.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Me()}})(t):t.fieldFilter!==void 0?(function(n){return $t.create(aa(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Me()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Zi.create(n.compositeFilter.filters.map((o=>VS(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Me()}})(n.compositeFilter.op))})(t):Me()}function xP(t){return fP[t]}function CP(t){return hP[t]}function wP(t){return pP[t]}function ra(t){return{fieldPath:t.canonicalString()}}function aa(t){return un.fromServerFormat(t.fieldPath)}function kS(t){return t instanceof $t?(function(n){if(n.op==="=="){if(iT(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NAN"}};if(nT(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iT(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NOT_NAN"}};if(nT(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ra(n.field),op:CP(n.op),value:n.value}}})(t):t instanceof Zi?(function(n){const o=n.getFilters().map((r=>kS(r)));return o.length===1?o[0]:{compositeFilter:{op:wP(n.op),filters:o}}})(t):Me()}function RP(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function LS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n,o,r,l=Ue.min(),u=Ue.min(),f=dn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.ct=e}}function NP(t){const e=bP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ap(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.un=new DP}addToCollectionParentIndex(e,n){return this.un.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(bs.min())}updateCollectionGroup(e,n,o){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class DP{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),r=this.index[n]||new cn(bt.comparator),l=!r.has(o);return this.index[n]=r.add(o),l}has(e){const n=e.lastSegment(),o=e.popLast(),r=this.index[n];return r&&r.has(o)}getEntries(e){return(this.index[e]||new cn(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new va(0)}static kn(){return new va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.changes=new xa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?ce.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,o,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=r}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(o=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(o!==null&&Ul(o.mutation,r,ti.empty(),Qt.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,je()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=je()){const r=lr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,o).next((l=>{let u=Il();return l.forEach(((f,g)=>{u=u.insert(f,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const o=lr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,je())))}populateOverlays(e,n,o){const r=[];return o.forEach((l=>{n.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,f)=>{n.set(u,f)}))}))}computeViews(e,n,o,r){let l=Io();const u=Pl(),f=(function(){return Pl()})();return n.forEach(((g,p)=>{const _=o.get(p.key);r.has(p.key)&&(_===void 0||_.mutation instanceof ws)?l=l.insert(p.key,p):_!==void 0?(u.set(p.key,_.mutation.getFieldMask()),Ul(_.mutation,p,_.mutation.getFieldMask(),Qt.now())):u.set(p.key,ti.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,_)=>u.set(p,_))),n.forEach(((p,_)=>{var S;return f.set(p,new UP(_,(S=u.get(p))!==null&&S!==void 0?S:null))})),f)))}recalculateAndSaveOverlays(e,n){const o=Pl();let r=new xt(((u,f)=>u-f)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const f of u)f.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let _=o.get(g)||ti.empty();_=f.applyToLocalView(p,_),o.set(g,_);const S=(r.get(f.batchId)||je()).add(g);r=r.insert(f.batchId,S)}))})).next((()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),p=g.key,_=g.value,S=TS();_.forEach((b=>{if(!l.has(b)){const C=CS(n.get(b),o.get(b));C!==null&&S.set(b,C),l=l.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,S))}return ce.waitFor(u)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,r){return(function(u){return Re.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):q2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,r):this.getDocumentsMatchingCollectionQuery(e,n,o,r)}getNextDocuments(e,n,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,r-l.size):ce.resolve(lr());let f=-1,g=l;return u.next((p=>ce.forEach(p,((_,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),l.get(_)?ce.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{g=g.insert(_,b)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,je()))).next((_=>({batchId:f,changes:_S(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next((o=>{let r=Il();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,r){const l=n.collectionGroup;let u=Il();return this.indexManager.getCollectionParents(e,l).next((f=>ce.forEach(f,(g=>{const p=(function(S,b){return new fd(b,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,o,r).next((_=>{_.forEach(((S,b)=>{u=u.insert(S,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,l,r)))).next((u=>{l.forEach(((g,p)=>{const _=p.getKey();u.get(_)===null&&(u=u.insert(_,_n.newInvalidDocument(_)))}));let f=Il();return u.forEach(((g,p)=>{const _=l.get(g);_!==void 0&&Ul(_.mutation,p,ti.empty(),Qt.now()),pd(n,p)&&(f=f.insert(g,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ce.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Xi(r.createTime)}})(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(r){return{name:r.name,query:NP(r.bundledQuery),readTime:Xi(r.readTime)}})(n)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.overlays=new xt(Re.comparator),this.Ir=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const o=lr();return ce.forEach(n,(r=>this.getOverlay(e,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((r,l)=>{this.ht(e,n,l)})),ce.resolve()}removeOverlaysForBatchId(e,n,o){const r=this.Ir.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(o)),ce.resolve()}getOverlaysForCollection(e,n,o){const r=lr(),l=n.length+1,u=new Re(n.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>o&&r.set(g.getKey(),g)}return ce.resolve(r)}getOverlaysForCollectionGroup(e,n,o,r){let l=new xt(((p,_)=>p-_));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>o){let _=l.get(p.largestBatchId);_===null&&(_=lr(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const f=lr(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>f.set(p,_))),!(f.size()>=r)););return ce.resolve(f)}ht(e,n,o){const r=this.overlays.get(o.key);if(r!==null){const u=this.Ir.get(r.largestBatchId).delete(o.key);this.Ir.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new rP(n,o));let l=this.Ir.get(n);l===void 0&&(l=je(),this.Ir.set(n,l)),this.Ir.set(n,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this.Tr=new cn(tn.Er),this.dr=new cn(tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const o=new tn(e,n);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Vr(new tn(e,n))}mr(e,n){e.forEach((o=>this.removeReference(o,n)))}gr(e){const n=new Re(new bt([])),o=new tn(n,e),r=new tn(n,e+1),l=[];return this.dr.forEachInRange([o,r],(u=>{this.Vr(u),l.push(u.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Re(new bt([])),o=new tn(n,e),r=new tn(n,e+1);let l=je();return this.dr.forEachInRange([o,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const n=new tn(e,0),o=this.Tr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class tn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Re.comparator(e.key,n.key)||nt(e.wr,n.wr)}static Ar(e,n){return nt(e.wr,n.wr)||Re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new cn(tn.Er)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,r){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new sP(l,n,o,r);this.mutationQueue.push(u);for(const f of r)this.br=this.br.add(new tn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ce.resolve(u)}lookupMutationBatch(e,n){return ce.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,r=this.vr(o),l=r<0?0:r;return ce.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new tn(n,0),r=new tn(n,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([o,r],(u=>{const f=this.Dr(u.wr);l.push(f)})),ce.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new cn(nt);return n.forEach((r=>{const l=new tn(r,0),u=new tn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,u],(f=>{o=o.add(f.wr)}))})),ce.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,r=o.length+1;let l=o;Re.isDocumentKey(l)||(l=l.child(""));const u=new tn(new Re(l),0);let f=new cn(nt);return this.br.forEachWhile((g=>{const p=g.key.path;return!!o.isPrefixOf(p)&&(p.length===r&&(f=f.add(g.wr)),!0)}),u),ce.resolve(this.Cr(f))}Cr(e){const n=[];return e.forEach((o=>{const r=this.Dr(o);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){ut(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let o=this.br;return ce.forEach(n.mutations,(r=>{const l=new tn(r.key,n.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=o}))}On(e){}containsKey(e,n){const o=new tn(n,0),r=this.br.firstAfterOrEqual(o);return ce.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.Mr=e,this.docs=(function(){return new xt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,r=this.docs.get(o),l=r?r.size:0,u=this.Mr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return ce.resolve(o?o.document.mutableCopy():_n.newInvalidDocument(n))}getEntries(e,n){let o=Io();return n.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():_n.newInvalidDocument(r))})),ce.resolve(o)}getDocumentsMatchingQuery(e,n,o,r){let l=Io();const u=n.path,f=new Re(u.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||S2(E2(_),o)<=0||(r.has(_.key)||pd(n,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ce.resolve(l)}getAllFromCollectionGroup(e,n,o,r){Me()}Or(e,n){return ce.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new FP(this)}getSize(e){return ce.resolve(this.size)}}class FP extends PP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(o)})),ce.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.persistence=e,this.Nr=new xa((n=>em(n)),tm),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new am,this.targetCount=0,this.kr=va.Bn()}forEachTarget(e,n){return this.Nr.forEach(((o,r)=>n(r))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Lr&&(this.Lr=n),ce.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new va(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Kn(n),ce.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,o){let r=0;const l=[];return this.Nr.forEach(((u,f)=>{f.sequenceNumber<=n&&o.get(f.targetId)===null&&(this.Nr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),ce.waitFor(l).next((()=>r))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const o=this.Nr.get(n)||null;return ce.resolve(o)}addMatchingKeys(e,n,o){return this.Br.Rr(n,o),ce.resolve()}removeMatchingKeys(e,n,o){this.Br.mr(n,o);const r=this.persistence.referenceDelegate,l=[];return r&&n.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),ce.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Br.yr(n);return ce.resolve(o)}containsKey(e,n){return ce.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Qp(0),this.Kr=!1,this.Kr=!0,this.$r=new OP,this.referenceDelegate=e(this),this.Ur=new qP(this),this.indexManager=new MP,this.remoteDocumentCache=(function(r){return new GP(r)})((o=>this.referenceDelegate.Wr(o))),this.serializer=new IP(n),this.Gr=new kP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.qr[e.toKey()];return o||(o=new BP(n,this.referenceDelegate),this.qr[e.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,o){be("MemoryPersistence","Starting transaction:",e);const r=new zP(this.Qr.next());return this.referenceDelegate.zr(),o(r).next((l=>this.referenceDelegate.jr(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Hr(e,n){return ce.or(Object.values(this.qr).map((o=>()=>o.containsKey(e,n))))}}class zP extends A2{constructor(e){super(),this.currentSequenceNumber=e}}class lm{constructor(e){this.persistence=e,this.Jr=new am,this.Yr=null}static Zr(e){return new lm(e)}get Xr(){if(this.Yr)return this.Yr;throw Me()}addReference(e,n,o){return this.Jr.addReference(o,n),this.Xr.delete(o.toString()),ce.resolve()}removeReference(e,n,o){return this.Jr.removeReference(o,n),this.Xr.add(o.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((r=>this.Xr.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((l=>this.Xr.add(l.toString())))})).next((()=>o.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Xr,(o=>{const r=Re.fromPath(o);return this.ei(e,r).next((l=>{l||n.removeEntry(r,Ue.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((o=>{o?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return ce.or([()=>ce.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,o,r){this.targetId=e,this.fromCache=n,this.$i=o,this.Ui=r}static Wi(e,n){let o=je(),r=je();for(const l of n.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new um(e,n.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return QM()?8:x2(jM())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,o,r){const l={result:null};return this.Yi(e,n).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.Zi(e,n,r,o).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new YP;return this.Xi(e,n,u).next((f=>{if(l.result=f,this.zi)return this.es(e,n,u,f.size)}))})).next((()=>l.result))}es(e,n,o,r){return o.documentReadCount<this.ji?(xl()<=We.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",sa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ce.resolve()):(xl()<=We.DEBUG&&be("QueryEngine","Query:",sa(n),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.Hi*r?(xl()<=We.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",sa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(n))):ce.resolve())}Yi(e,n){if(aT(n))return ce.resolve(null);let o=Qi(n);return this.indexManager.getIndexType(e,o).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Ap(n,null,"F"),o=Qi(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const u=je(...l);return this.Ji.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,o).next((g=>{const p=this.ts(n,f);return this.ns(n,p,u,g.readTime)?this.Yi(e,Ap(n,null,"F")):this.rs(e,p,n,g)}))))})))))}Zi(e,n,o,r){return aT(n)||r.isEqual(Ue.min())?ce.resolve(null):this.Ji.getDocuments(e,o).next((l=>{const u=this.ts(n,l);return this.ns(n,u,o,r)?ce.resolve(null):(xl()<=We.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sa(n)),this.rs(e,u,n,T2(r,-1)).next((f=>f)))}))}ts(e,n){let o=new cn(yS(e));return n.forEach(((r,l)=>{pd(e,l)&&(o=o.add(l))})),o}ns(e,n,o,r){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Xi(e,n,o){return xl()<=We.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",sa(n)),this.Ji.getDocumentsMatchingQuery(e,n,bs.min(),o)}rs(e,n,o,r){return this.Ji.getDocumentsMatchingQuery(e,o,r).next((l=>(n.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n,o,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new xt(nt),this._s=new xa((l=>em(l)),tm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(o)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function jP(t,e,n,o){return new KP(t,e,n,o)}async function OS(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return n.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,n.ls(e),n.mutationQueue.getAllMutationBatches(o)))).next((l=>{const u=[],f=[];let g=je();for(const p of r){u.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of l){f.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(o,g).next((p=>({hs:p,removedBatchIds:u,addedBatchIds:f})))}))}))}function $P(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=e.batch.keys(),l=n.cs.newChangeBuffer({trackRemovals:!0});return(function(f,g,p,_){const S=p.batch,b=S.keys();let C=ce.resolve();return b.forEach((I=>{C=C.next((()=>_.getEntry(g,I))).next((L=>{const k=p.docVersions.get(I);ut(k!==null),L.version.compareTo(k)<0&&(S.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),_.addEntry(L)))}))})),C.next((()=>f.mutationQueue.removeMutationBatch(g,S)))})(n,o,e,l).next((()=>l.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(f){let g=je();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(g=g.add(f.batch.mutations[p].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(o,r)))}))}function BS(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function QP(t,e){const n=Ve(t),o=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const f=[];e.targetChanges.forEach(((_,S)=>{const b=r.get(S);if(!b)return;f.push(n.Ur.removeMatchingKeys(l,_.removedDocuments,S).next((()=>n.Ur.addMatchingKeys(l,_.addedDocuments,S))));let C=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?C=C.withResumeToken(dn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,o)),r=r.insert(S,C),(function(L,k,Y){return L.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(b,C,_)&&f.push(n.Ur.updateTargetData(l,C))}));let g=Io(),p=je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(XP(l,u,e.documentUpdates).next((_=>{g=_.Ps,p=_.Is}))),!o.isEqual(Ue.min())){const _=n.Ur.getLastRemoteSnapshotVersion(l).next((S=>n.Ur.setTargetsMetadata(l,l.currentSequenceNumber,o)));f.push(_)}return ce.waitFor(f).next((()=>u.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(n.os=r,l)))}function XP(t,e,n){let o=je(),r=je();return n.forEach((l=>o=o.add(l))),e.getEntries(t,o).next((l=>{let u=Io();return n.forEach(((f,g)=>{const p=l.get(f);g.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(f)),g.isNoDocument()&&g.version.isEqual(Ue.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):be("LocalStore","Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",g.version)})),{Ps:u,Is:r}}))}function WP(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function ZP(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return n.Ur.getTargetData(o,e).next((l=>l?(r=l,ce.resolve(r)):n.Ur.allocateTargetId(o).next((u=>(r=new ys(e,u,"TargetPurposeListen",o.currentSequenceNumber),n.Ur.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=n.os.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(o.targetId,o),n._s.set(e,o.targetId)),o}))}async function Ip(t,e,n){const o=Ve(t),r=o.os.get(e),l=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",l,(u=>o.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Kl(u))throw u;be("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}o.os=o.os.remove(e),o._s.delete(r.target)}function vT(t,e,n){const o=Ve(t);let r=Ue.min(),l=je();return o.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,p,_){const S=Ve(g),b=S._s.get(_);return b!==void 0?ce.resolve(S.os.get(b)):S.Ur.getTargetData(p,_)})(o,u,Qi(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(u,f.targetId).next((g=>{l=g}))})).next((()=>o.ss.getDocumentsMatchingQuery(u,e,n?r:Ue.min(),n?l:je()))).next((f=>(eU(o,z2(e),f),{documents:f,Ts:l})))))}function eU(t,e,n){let o=t.us.get(e)||Ue.min();n.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),t.us.set(e,o)}class _T{constructor(){this.activeTargetIds=Q2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tU{constructor(){this.so=new _T,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,o){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new _T,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic=null;function Gh(){return Ic===null?Ic=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ic++,"0x"+Ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class sU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+n.host,this.vo=`projects/${r}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${l}`}get Fo(){return!1}Mo(n,o,r,l,u){const f=Gh(),g=this.xo(n,o.toUriEncodedString());be("RestConnection",`Sending RPC '${n}' ${f}:`,g,r);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,l,u),this.No(n,g,p,r).then((_=>(be("RestConnection",`Received RPC '${n}' ${f}: `,_),_)),(_=>{throw pa("RestConnection",`RPC '${n}' ${f} failed with error: `,_,"url: ",g,"request:",r),_}))}Lo(n,o,r,l,u,f){return this.Mo(n,o,r,l,u)}Oo(n,o,r){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Aa})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach(((l,u)=>n[u]=l)),r&&r.headers.forEach(((l,u)=>n[u]=l))}xo(n,o){const r=iU[n];return`${this.Do}/v1/${o}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,o,r){const l=Gh();return new Promise(((u,f)=>{const g=new ZE;g.setWithCredentials(!0),g.listenOnce(eS.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Vc.NO_ERROR:const _=g.getResponseJson();be(yn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),u(_);break;case Vc.TIMEOUT:be(yn,`RPC '${e}' ${l} timed out`),f(new xe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:const S=g.getStatus();if(be(yn,`RPC '${e}' ${l} failed with status:`,S,"response text:",g.getResponseText()),S>0){let b=g.getResponseJson();Array.isArray(b)&&(b=b[0]);const C=b==null?void 0:b.error;if(C&&C.status&&C.message){const I=(function(k){const Y=k.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(Y)>=0?Y:ue.UNKNOWN})(C.status);f(new xe(I,C.message))}else f(new xe(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new xe(ue.UNAVAILABLE,"Connection failed."));break;default:Me()}}finally{be(yn,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(r);be(yn,`RPC '${e}' ${l} sending request:`,r),g.send(n,"POST",p,o,15)}))}Bo(e,n,o){const r=Gh(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=iS(),f=nS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,n,o),g.encodeInitMessageHeaders=!0;const _=l.join("");be(yn,`Creating RPC '${e}' stream ${r}: ${_}`,g);const S=u.createWebChannel(_,g);let b=!1,C=!1;const I=new oU({Io:k=>{C?be(yn,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(b||(be(yn,`Opening RPC '${e}' stream ${r} transport.`),S.open(),b=!0),be(yn,`RPC '${e}' stream ${r} sending:`,k),S.send(k))},To:()=>S.close()}),L=(k,Y,W)=>{k.listen(Y,(z=>{try{W(z)}catch(X){setTimeout((()=>{throw X}),0)}}))};return L(S,Rl.EventType.OPEN,(()=>{C||(be(yn,`RPC '${e}' stream ${r} transport opened.`),I.yo())})),L(S,Rl.EventType.CLOSE,(()=>{C||(C=!0,be(yn,`RPC '${e}' stream ${r} transport closed`),I.So())})),L(S,Rl.EventType.ERROR,(k=>{C||(C=!0,pa(yn,`RPC '${e}' stream ${r} transport errored:`,k),I.So(new xe(ue.UNAVAILABLE,"The operation could not be completed")))})),L(S,Rl.EventType.MESSAGE,(k=>{var Y;if(!C){const W=k.data[0];ut(!!W);const z=W,X=z.error||((Y=z[0])===null||Y===void 0?void 0:Y.error);if(X){be(yn,`RPC '${e}' stream ${r} received error:`,X);const q=X.status;let se=(function(M){const U=Yt[M];if(U!==void 0)return RS(U)})(q),D=X.message;se===void 0&&(se=ue.INTERNAL,D="Unknown error status: "+q+" with message "+X.message),C=!0,I.So(new xe(se,D)),S.close()}else be(yn,`RPC '${e}' stream ${r} received:`,W),I.bo(W)}})),L(f,tS.STAT_EVENT,(k=>{k.stat===_p.PROXY?be(yn,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===_p.NOPROXY&&be(yn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{I.wo()}),0),I}}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t){return new mP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n,o=1e3,r=1.5,l=6e4){this.ui=e,this.timerId=n,this.ko=o,this.qo=r,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-o);r>0&&be("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n,o,r,l,u,f,g){this.ui=e,this.Ho=o,this.Jo=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new GS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(Ro(n.toString()),Ro("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.Yo===n&&this.P_(o,r)}),(o=>{e((()=>{const r=new xe(ue.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(r)}))}))}P_(e,n){const o=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{o((()=>this.listener.Eo()))})),this.stream.Ro((()=>{o((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((r=>{o((()=>this.I_(r)))})),this.stream.onMessage((r=>{o((()=>++this.e_==1?this.E_(r):this.onNext(r)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rU extends FS{constructor(e,n,o,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,r,u),this.serializer=l}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=vP(this.serializer,e),o=(function(l){if(!("targetChange"in l))return Ue.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ue.min():u.readTime?Xi(u.readTime):Ue.min()})(e);return this.listener.d_(n,o)}A_(e){const n={};n.database=Rp(this.serializer),n.addTarget=(function(l,u){let f;const g=u.target;if(f=bp(g)?{documents:EP(l,g)}:{query:SP(l,g)._t},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=MS(l,u.resumeToken);const p=xp(l,u.expectedCount);p!==null&&(f.expectedCount=p)}else if(u.snapshotVersion.compareTo(Ue.min())>0){f.readTime=ed(l,u.snapshotVersion.toTimestamp());const p=xp(l,u.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const o=AP(this.serializer,e);o&&(n.labels=o),this.a_(n)}R_(e){const n={};n.database=Rp(this.serializer),n.removeTarget=e,this.a_(n)}}class aU extends FS{constructor(e,n,o,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,r,u),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ut(!!e.streamToken),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=TP(e.writeResults,e.commitTime),o=Xi(e.commitTime);return this.listener.g_(o,n)}p_(){const e={};e.database=Rp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>_P(this.serializer,o)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU extends class{}{constructor(e,n,o,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,o,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Mo(e,Cp(n,o),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(ue.UNKNOWN,l.toString())}))}Lo(e,n,o,r,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Lo(e,Cp(n,o),r,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ue.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class uU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ro(n),this.D_=!1):be("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n,o,r,l){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((u=>{o.enqueueAndForget((async()=>{vr(this)&&(be("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const p=Ve(g);p.L_.add(4),await Ql(p),p.q_.set("Unknown"),p.L_.delete(4),await _d(p)})(this))}))})),this.q_=new uU(o,r)}}async function _d(t){if(vr(t))for(const e of t.B_)await e(!0)}async function Ql(t){for(const e of t.B_)await e(!1)}function qS(t,e){const n=Ve(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),hm(n)?fm(n):Ca(n).r_()&&dm(n,e))}function cm(t,e){const n=Ve(t),o=Ca(n);n.N_.delete(e),o.r_()&&HS(n,e),n.N_.size===0&&(o.r_()?o.o_():vr(n)&&n.q_.set("Unknown"))}function dm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ca(t).A_(e)}function HS(t,e){t.Q_.xe(e),Ca(t).R_(e)}function fm(t){t.Q_=new dP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ca(t).start(),t.q_.v_()}function hm(t){return vr(t)&&!Ca(t).n_()&&t.N_.size>0}function vr(t){return Ve(t).L_.size===0}function zS(t){t.Q_=void 0}async function dU(t){t.q_.set("Online")}async function fU(t){t.N_.forEach(((e,n)=>{dm(t,e)}))}async function hU(t,e){zS(t),hm(t)?(t.q_.M_(e),fm(t)):t.q_.set("Unknown")}async function pU(t,e,n){if(t.q_.set("Online"),e instanceof NS&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const f of l.targetIds)r.N_.has(f)&&(await r.remoteSyncer.rejectListen(f,u),r.N_.delete(f),r.Q_.removeTarget(f))})(t,e)}catch(o){be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),await td(t,o)}else if(e instanceof Oc?t.Q_.Ke(e):e instanceof IS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ue.min()))try{const o=await BS(t.localStore);n.compareTo(o)>=0&&await(function(l,u){const f=l.Q_.rt(u);return f.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.N_.get(p);_&&l.N_.set(p,_.withResumeToken(g.resumeToken,u))}})),f.targetMismatches.forEach(((g,p)=>{const _=l.N_.get(g);if(!_)return;l.N_.set(g,_.withResumeToken(dn.EMPTY_BYTE_STRING,_.snapshotVersion)),HS(l,g);const S=new ys(_.target,g,p,_.sequenceNumber);dm(l,S)})),l.remoteSyncer.applyRemoteEvent(f)})(t,n)}catch(o){be("RemoteStore","Failed to raise snapshot:",o),await td(t,o)}}async function td(t,e,n){if(!Kl(e))throw e;t.L_.add(1),await Ql(t),t.q_.set("Offline"),n||(n=()=>BS(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{be("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await _d(t)}))}function YS(t,e){return e().catch((n=>td(t,n,e)))}async function Td(t){const e=Ve(t),n=xs(e);let o=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;mU(e);)try{const r=await WP(e.localStore,o);if(r===null){e.O_.length===0&&n.o_();break}o=r.batchId,gU(e,r)}catch(r){await td(e,r)}JS(e)&&KS(e)}function mU(t){return vr(t)&&t.O_.length<10}function gU(t,e){t.O_.push(e);const n=xs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function JS(t){return vr(t)&&!xs(t).n_()&&t.O_.length>0}function KS(t){xs(t).start()}async function yU(t){xs(t).p_()}async function vU(t){const e=xs(t);for(const n of t.O_)e.m_(n.mutations)}async function _U(t,e,n){const o=t.O_.shift(),r=om.from(o,e,n);await YS(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Td(t)}async function TU(t,e){e&&xs(t).V_&&await(async function(o,r){if((function(u){return lP(u)&&u!==ue.ABORTED})(r.code)){const l=o.O_.shift();xs(o).s_(),await YS(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Td(o)}})(t,e),JS(t)&&KS(t)}async function ET(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),be("RemoteStore","RemoteStore received new credentials");const o=vr(n);n.L_.add(3),await Ql(n),o&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await _d(n)}async function EU(t,e){const n=Ve(t);e?(n.L_.delete(2),await _d(n)):e||(n.L_.add(2),await Ql(n),n.q_.set("Unknown"))}function Ca(t){return t.K_||(t.K_=(function(n,o,r){const l=Ve(n);return l.w_(),new rU(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(t.datastore,t.asyncQueue,{Eo:dU.bind(null,t),Ro:fU.bind(null,t),mo:hU.bind(null,t),d_:pU.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),hm(t)?fm(t):t.q_.set("Unknown")):(await t.K_.stop(),zS(t))}))),t.K_}function xs(t){return t.U_||(t.U_=(function(n,o,r){const l=Ve(n);return l.w_(),new aU(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:yU.bind(null,t),mo:TU.bind(null,t),f_:vU.bind(null,t),g_:_U.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Td(t)):(await t.U_.stop(),t.O_.length>0&&(be("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,o,r,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,r,l){const u=Date.now()+o,f=new pm(e,n,u,r,l);return f.start(o),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mm(t,e){if(Ro("AsyncQueue",`${e}: ${t}`),Kl(t))return new xe(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Re.comparator(n.key,o.key):(n,o)=>Re.comparator(n.key,o.key),this.keyedMap=Il(),this.sortedSet=new xt(this.comparator)}static emptySet(e){return new fa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new fa;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.W_=new xt(Re.comparator)}track(e){const n=e.doc.key,o=this.W_.get(n);o?e.type!==0&&o.type===3?this.W_=this.W_.insert(n,e):e.type===3&&o.type!==1?this.W_=this.W_.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.W_=this.W_.remove(n):e.type===1&&o.type===2?this.W_=this.W_.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Me():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,o)=>{e.push(o)})),e}}class _a{constructor(e,n,o,r,l,u,f,g,p){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,n,o,r,l){const u=[];return n.forEach((f=>{u.push({type:0,doc:f})})),new _a(e,n,fa.emptySet(n),u,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==o[r].type||!n[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class bU{constructor(){this.queries=bT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,o){const r=Ve(n),l=r.queries;r.queries=bT(),l.forEach(((u,f)=>{for(const g of f.j_)g.onError(o)}))})(this,new xe(ue.ABORTED,"Firestore shutting down"))}}function bT(){return new xa((t=>gS(t)),hd)}async function AU(t,e){const n=Ve(t);let o=3;const r=e.query;let l=n.queries.get(r);l?!l.H_()&&e.J_()&&(o=2):(l=new SU,o=e.J_()?0:1);try{switch(o){case 0:l.z_=await n.onListen(r,!0);break;case 1:l.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(u){const f=mm(u,`Initialization of query '${sa(e.query)}' failed`);return void e.onError(f)}n.queries.set(r,l),l.j_.push(e),e.Z_(n.onlineState),l.z_&&e.X_(l.z_)&&gm(n)}async function xU(t,e){const n=Ve(t),o=e.query;let r=3;const l=n.queries.get(o);if(l){const u=l.j_.indexOf(e);u>=0&&(l.j_.splice(u,1),l.j_.length===0?r=e.J_()?0:1:!l.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function CU(t,e){const n=Ve(t);let o=!1;for(const r of e){const l=r.query,u=n.queries.get(l);if(u){for(const f of u.j_)f.X_(r)&&(o=!0);u.z_=r}}o&&gm(n)}function wU(t,e,n){const o=Ve(t),r=o.queries.get(e);if(r)for(const l of r.j_)l.onError(n);o.queries.delete(e)}function gm(t){t.Y_.forEach((e=>{e.next()}))}var Np,AT;(AT=Np||(Np={})).ea="default",AT.Cache="cache";class RU{constructor(e,n,o){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(e){if(!this.options.includeMetadataChanges){const o=[];for(const r of e.docChanges)r.type!==3&&o.push(r);e=new _a(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const o=n!=="Offline";return(!this.options._a||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Np.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.key=e}}class $S{constructor(e){this.key=e}}class IU{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=je(),this.mutatedKeys=je(),this.Aa=yS(e),this.Ra=new fa(this.Aa)}get Va(){return this.Ta}ma(e,n){const o=n?n.fa:new ST,r=n?n.Ra:this.Ra;let l=n?n.mutatedKeys:this.mutatedKeys,u=r,f=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,S)=>{const b=r.get(_),C=pd(this.query,S)?S:null,I=!!b&&this.mutatedKeys.has(b.key),L=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let k=!1;b&&C?b.data.isEqual(C.data)?I!==L&&(o.track({type:3,doc:C}),k=!0):this.ga(b,C)||(o.track({type:2,doc:C}),k=!0,(g&&this.Aa(C,g)>0||p&&this.Aa(C,p)<0)&&(f=!0)):!b&&C?(o.track({type:0,doc:C}),k=!0):b&&!C&&(o.track({type:1,doc:b}),k=!0,(g||p)&&(f=!0)),k&&(C?(u=u.add(C),l=L?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),o.track({type:1,doc:_})}return{Ra:u,fa:o,ns:f,mutatedKeys:l}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,r){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,S)=>(function(C,I){const L=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me()}};return L(C)-L(I)})(_.type,S.type)||this.Aa(_.doc,S.doc))),this.pa(o),r=r!=null&&r;const f=n&&!r?this.ya():[],g=this.da.size===0&&this.current&&!r?1:0,p=g!==this.Ea;return this.Ea=g,u.length!==0||p?{snapshot:new _a(this.query,e.Ra,l,u,e.mutatedKeys,g===0,p,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ST,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=je(),this.Ra.forEach((o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))}));const n=[];return e.forEach((o=>{this.da.has(o)||n.push(new $S(o))})),this.da.forEach((o=>{e.has(o)||n.push(new jS(o))})),n}ba(e){this.Ta=e.Ts,this.da=je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _a.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class NU{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class MU{constructor(e){this.key=e,this.va=!1}}class DU{constructor(e,n,o,r,l,u){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new xa((f=>gS(f)),hd),this.Ma=new Map,this.xa=new Set,this.Oa=new xt(Re.comparator),this.Na=new Map,this.La=new am,this.Ba={},this.ka=new Map,this.qa=va.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function PU(t,e,n=!0){const o=tb(t);let r;const l=o.Fa.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.Da()):r=await QS(o,e,n,!0),r}async function UU(t,e){const n=tb(t);await QS(n,e,!0,!1)}async function QS(t,e,n,o){const r=await ZP(t.localStore,Qi(e)),l=r.targetId,u=t.sharedClientState.addLocalQueryTarget(l,n);let f;return o&&(f=await VU(t,e,l,u==="current",r.resumeToken)),t.isPrimaryClient&&n&&qS(t.remoteStore,r),f}async function VU(t,e,n,o,r){t.Ka=(S,b,C)=>(async function(L,k,Y,W){let z=k.view.ma(Y);z.ns&&(z=await vT(L.localStore,k.query,!1).then((({documents:D})=>k.view.ma(D,z))));const X=W&&W.targetChanges.get(k.targetId),q=W&&W.targetMismatches.get(k.targetId)!=null,se=k.view.applyChanges(z,L.isPrimaryClient,X,q);return CT(L,k.targetId,se.wa),se.snapshot})(t,S,b,C);const l=await vT(t.localStore,e,!0),u=new IU(e,l.Ts),f=u.ma(l.documents),g=$l.createSynthesizedTargetChangeForCurrentChange(n,o&&t.onlineState!=="Offline",r),p=u.applyChanges(f,t.isPrimaryClient,g);CT(t,n,p.wa);const _=new NU(e,n,u);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function kU(t,e,n){const o=Ve(t),r=o.Fa.get(e),l=o.Ma.get(r.targetId);if(l.length>1)return o.Ma.set(r.targetId,l.filter((u=>!hd(u,e)))),void o.Fa.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await Ip(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),n&&cm(o.remoteStore,r.targetId),Mp(o,r.targetId)})).catch(Jl)):(Mp(o,r.targetId),await Ip(o.localStore,r.targetId,!0))}async function LU(t,e){const n=Ve(t),o=n.Fa.get(e),r=n.Ma.get(o.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),cm(n.remoteStore,o.targetId))}async function OU(t,e,n){const o=YU(t);try{const r=await(function(u,f){const g=Ve(u),p=Qt.now(),_=f.reduce(((C,I)=>C.add(I.key)),je());let S,b;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let I=Io(),L=je();return g.cs.getEntries(C,_).next((k=>{I=k,I.forEach(((Y,W)=>{W.isValidDocument()||(L=L.add(Y))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,I))).next((k=>{S=k;const Y=[];for(const W of f){const z=iP(W,S.get(W.key).overlayedDocument);z!=null&&Y.push(new ws(W.key,z,lS(z.value.mapValue),Mi.exists(!0)))}return g.mutationQueue.addMutationBatch(C,p,Y,f)})).next((k=>{b=k;const Y=k.applyToLocalDocumentSet(S,L);return g.documentOverlayCache.saveOverlays(C,k.batchId,Y)}))})).then((()=>({batchId:b.batchId,changes:_S(S)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(r.batchId),(function(u,f,g){let p=u.Ba[u.currentUser.toKey()];p||(p=new xt(nt)),p=p.insert(f,g),u.Ba[u.currentUser.toKey()]=p})(o,r.batchId,n),await Xl(o,r.changes),await Td(o.remoteStore)}catch(r){const l=mm(r,"Failed to persist write");n.reject(l)}}async function XS(t,e){const n=Ve(t);try{const o=await QP(n.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=n.Na.get(l);u&&(ut(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.va=!0:r.modifiedDocuments.size>0?ut(u.va):r.removedDocuments.size>0&&(ut(u.va),u.va=!1))})),await Xl(n,o,e)}catch(o){await Jl(o)}}function xT(t,e,n){const o=Ve(t);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const r=[];o.Fa.forEach(((l,u)=>{const f=u.view.Z_(e);f.snapshot&&r.push(f.snapshot)})),(function(u,f){const g=Ve(u);g.onlineState=f;let p=!1;g.queries.forEach(((_,S)=>{for(const b of S.j_)b.Z_(f)&&(p=!0)})),p&&gm(g)})(o.eventManager,e),r.length&&o.Ca.d_(r),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function BU(t,e,n){const o=Ve(t);o.sharedClientState.updateQueryState(e,"rejected",n);const r=o.Na.get(e),l=r&&r.key;if(l){let u=new xt(Re.comparator);u=u.insert(l,_n.newNoDocument(l,Ue.min()));const f=je().add(l),g=new yd(Ue.min(),new Map,new xt(nt),u,f);await XS(o,g),o.Oa=o.Oa.remove(l),o.Na.delete(e),ym(o)}else await Ip(o.localStore,e,!1).then((()=>Mp(o,e,n))).catch(Jl)}async function GU(t,e){const n=Ve(t),o=e.batch.batchId;try{const r=await $P(n.localStore,e);ZS(n,o,null),WS(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await Xl(n,r)}catch(r){await Jl(r)}}async function FU(t,e,n){const o=Ve(t);try{const r=await(function(u,f){const g=Ve(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,f).next((S=>(ut(S!==null),_=S.keys(),g.mutationQueue.removeMutationBatch(p,S)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(o.localStore,e);ZS(o,e,n),WS(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await Xl(o,r)}catch(r){await Jl(r)}}function WS(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function ZS(t,e,n){const o=Ve(t);let r=o.Ba[o.currentUser.toKey()];if(r){const l=r.get(e);l&&(n?l.reject(n):l.resolve(),r=r.remove(e)),o.Ba[o.currentUser.toKey()]=r}}function Mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const o of t.Ma.get(e))t.Fa.delete(o),n&&t.Ca.$a(o,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((o=>{t.La.containsKey(o)||eb(t,o)}))}function eb(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(cm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ym(t))}function CT(t,e,n){for(const o of n)o instanceof jS?(t.La.addReference(o.key,e),qU(t,o)):o instanceof $S?(be("SyncEngine","Document no longer in limbo: "+o.key),t.La.removeReference(o.key,e),t.La.containsKey(o.key)||eb(t,o.key)):Me()}function qU(t,e){const n=e.key,o=n.path.canonicalString();t.Oa.get(n)||t.xa.has(o)||(be("SyncEngine","New document in limbo: "+n),t.xa.add(o),ym(t))}function ym(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Re(bt.fromString(e)),o=t.qa.next();t.Na.set(o,new MU(n)),t.Oa=t.Oa.insert(n,o),qS(t.remoteStore,new ys(Qi(mS(n.path)),o,"TargetPurposeLimboResolution",Qp.oe))}}async function Xl(t,e,n){const o=Ve(t),r=[],l=[],u=[];o.Fa.isEmpty()||(o.Fa.forEach(((f,g)=>{u.push(o.Ka(g,e,n).then((p=>{var _;if((p||n)&&o.isPrimaryClient){const S=p?!p.fromCache:(_=n==null?void 0:n.targetChanges.get(g.targetId))===null||_===void 0?void 0:_.current;o.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(p){r.push(p);const S=um.Wi(g.targetId,p);l.push(S)}})))})),await Promise.all(u),o.Ca.d_(r),await(async function(g,p){const _=Ve(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ce.forEach(p,(b=>ce.forEach(b.$i,(C=>_.persistence.referenceDelegate.addReference(S,b.targetId,C))).next((()=>ce.forEach(b.Ui,(C=>_.persistence.referenceDelegate.removeReference(S,b.targetId,C)))))))))}catch(S){if(!Kl(S))throw S;be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of p){const b=S.targetId;if(!S.fromCache){const C=_.os.get(b),I=C.snapshotVersion,L=C.withLastLimboFreeSnapshotVersion(I);_.os=_.os.insert(b,L)}}})(o.localStore,l))}async function HU(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){be("SyncEngine","User change. New user:",e.toKey());const o=await OS(n.localStore,e);n.currentUser=e,(function(l,u){l.ka.forEach((f=>{f.forEach((g=>{g.reject(new xe(ue.CANCELLED,u))}))})),l.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Xl(n,o.hs)}}function zU(t,e){const n=Ve(t),o=n.Na.get(e);if(o&&o.va)return je().add(o.key);{let r=je();const l=n.Ma.get(e);if(!l)return r;for(const u of l){const f=n.Fa.get(u);r=r.unionWith(f.view.Va)}return r}}function tb(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=XS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BU.bind(null,e),e.Ca.d_=CU.bind(null,e.eventManager),e.Ca.$a=wU.bind(null,e.eventManager),e}function YU(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FU.bind(null,e),e}class nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return jP(this.persistence,new JP,e.initialUser,this.serializer)}Ga(e){return new HP(lm.Zr,this.serializer)}Wa(e){return new tU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nd.provider={build:()=>new nd};class Dp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>xT(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=HU.bind(null,this.syncEngine),await EU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bU})()}createDatastore(e){const n=vd(e.databaseInfo.databaseId),o=(function(l){return new sU(l)})(e.databaseInfo);return(function(l,u,f,g){return new lU(l,u,f,g)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,r,l,u,f){return new cU(o,r,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>xT(this.syncEngine,n,0)),(function(){return TT.D()?new TT:new nU})())}createSyncEngine(e,n){return(function(r,l,u,f,g,p,_){const S=new DU(r,l,u,f,g,p);return _&&(S.Qa=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const l=Ve(r);be("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await Ql(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dp.provider={build:()=>new Dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ro("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,n,o,r,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=r,this.user=vn.UNAUTHENTICATED,this.clientId=sS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async u=>{be("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(o,(u=>(be("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=mm(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function qh(t,e){t.asyncQueue.verifyOperationInProgress(),be("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let o=n.initialUser;t.setCredentialChangeListener((async r=>{o.isEqual(r)||(await OS(e.localStore,r),o=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function wT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jU(t);be("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((o=>ET(e.remoteStore,o))),t.setAppCheckTokenChangeListener(((o,r)=>ET(e.remoteStore,r))),t._onlineComponents=e}async function jU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be("FirestoreClient","Using user provided OfflineComponentProvider");try{await qh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ue.FAILED_PRECONDITION||r.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;pa("Error using user provided cache. Falling back to memory cache: "+n),await qh(t,new nd)}}else be("FirestoreClient","Using default OfflineComponentProvider"),await qh(t,new nd);return t._offlineComponents}async function nb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be("FirestoreClient","Using user provided OnlineComponentProvider"),await wT(t,t._uninitializedComponentsProvider._online)):(be("FirestoreClient","Using default OnlineComponentProvider"),await wT(t,new Dp))),t._onlineComponents}function $U(t){return nb(t).then((e=>e.syncEngine))}async function QU(t){const e=await nb(t),n=e.eventManager;return n.onListen=PU.bind(null,e.syncEngine),n.onUnlisten=kU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LU.bind(null,e.syncEngine),n}function XU(t,e,n={}){const o=new Es;return t.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,g,p){const _=new JU({next:b=>{_.Za(),u.enqueueAndForget((()=>xU(l,S))),b.fromCache&&g.source==="server"?p.reject(new xe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),S=new RU(f,_,{includeMetadataChanges:!0,_a:!0});return AU(l,S)})(await QU(t),t.asyncQueue,e,n,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t,e,n){if(!n)throw new xe(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WU(t,e,n,o){if(e===!0&&o===!0)throw new xe(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function IT(t){if(!Re.isDocumentKey(t))throw new xe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function NT(t){if(Re.isDocumentKey(t))throw new xe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me()}function id(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vm(t);throw new xe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){var n,o;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new xe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ib((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ed{constructor(e,n,o,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MT(e),e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new d2;switch(o.type){case"firstParty":return new m2(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new xe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=RT.get(n);o&&(be("ComponentProvider","Removing Datastore"),RT.delete(n),o.terminate())})(this),Promise.resolve()}}function ZU(t,e,n,o={}){var r;const l=(t=id(t,Ed))._getSettings(),u=`${e}:${n}`;if(l.host!=="firestore.googleapis.com"&&l.host!==u&&pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:u,ssl:!1})),o.mockUserToken){let f,g;if(typeof o.mockUserToken=="string")f=o.mockUserToken,g=vn.MOCK_USER;else{f=FE(o.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=o.mockUserToken.sub||o.mockUserToken.user_id;if(!p)throw new xe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new vn(p)}t._authCredentials=new f2(new oS(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Sd(this.firestore,e,this._query)}}class Di{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Di(this.firestore,e,this._key)}}class Ss extends Sd{constructor(e,n,o){super(e,n,mS(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Di(this.firestore,null,new Re(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function Hh(t,e,...n){if(t=ii(t),ob("collection","path",e),t instanceof Ed){const o=bt.fromString(e,...n);return NT(o),new Ss(t,null,o)}{if(!(t instanceof Di||t instanceof Ss))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(bt.fromString(e,...n));return NT(o),new Ss(t.firestore,null,o)}}function zh(t,e,...n){if(t=ii(t),arguments.length===1&&(e=sS.newId()),ob("doc","path",e),t instanceof Ed){const o=bt.fromString(e,...n);return IT(o),new Di(t,null,new Re(o))}{if(!(t instanceof Di||t instanceof Ss))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(bt.fromString(e,...n));return IT(o),new Di(t.firestore,t instanceof Ss?t.converter:null,new Re(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new GS(this,"async_queue_retry"),this.Vu=()=>{const o=Fh();o&&be("AsyncQueue","Visibility state changed to "+o.visibilityState),this.t_.jo()},this.mu=e;const n=Fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new Es;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Kl(e))throw e;be("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((o=>{this.Eu=o,this.du=!1;const r=(function(u){let f=u.message||"";return u.stack&&(f=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),f})(o);throw Ro("INTERNAL UNHANDLED ERROR: ",r),o})).then((o=>(this.du=!1,o))))));return this.mu=n,n}enqueueAfterDelay(e,n,o){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=pm.createAndSchedule(this,e,n,o,(l=>this.yu(l)));return this.Tu.push(r),r}fu(){this.Eu&&Me()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class _m extends Ed{constructor(e,n,o,r){super(e,n,o,r),this.type="firestore",this._queue=new DT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DT(e),this._firestoreClient=void 0,await e}}}function eV(t,e){const n=typeof t=="object"?t:$E(),o=typeof t=="string"?t:"(default)",r=JE(n,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=BE("firestore");l&&ZU(r,...l)}return r}function Tm(t){if(t._terminated)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tV(t),t._firestoreClient}function tV(t){var e,n,o;const r=t._freezeSettings(),l=(function(f,g,p,_){return new R2(f,g,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,ib(_.experimentalLongPollingOptions),_.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((o=r.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new KU(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ta(dn.fromBase64String(e))}catch(n){throw new xe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ta(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=/^__.*__$/;class iV{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,n,this.fieldTransforms):new jl(e,this.data,n,this.fieldTransforms)}}class sb{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new ws(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me()}}class Am{constructor(e,n,o,r,l,u){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Am(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const o=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:o,xu:!1});return r.Ou(e),r}Nu(e){var n;const o=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:o,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return od(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(rb(this.Cu)&&nV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class oV{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||vd(e)}Qu(e,n,o,r=!1){return new Am({Cu:e,methodName:n,qu:o,path:un.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sV(t){const e=t._freezeSettings(),n=vd(t._databaseId);return new oV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rV(t,e,n,o,r,l={}){const u=t.Qu(l.merge||l.mergeFields?2:0,e,n,r);xm("Data must be an object, but it was:",u,o);const f=ab(o,u);let g,p;if(l.merge)g=new ti(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const S of l.mergeFields){const b=Pp(e,S,n);if(!u.contains(b))throw new xe(ue.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);ub(_,b)||_.push(b)}g=new ti(_),p=u.fieldTransforms.filter((S=>g.covers(S.field)))}else g=null,p=u.fieldTransforms;return new iV(new Bn(f),g,p)}class Ad extends Em{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ad}}function aV(t,e,n,o){const r=t.Qu(1,e,n);xm("Data must be an object, but it was:",r,o);const l=[],u=Bn.empty();yr(o,((g,p)=>{const _=Cm(e,g,n);p=ii(p);const S=r.Nu(_);if(p instanceof Ad)l.push(_);else{const b=xd(p,S);b!=null&&(l.push(_),u.set(_,b))}}));const f=new ti(l);return new sb(u,f,r.fieldTransforms)}function lV(t,e,n,o,r,l){const u=t.Qu(1,e,n),f=[Pp(e,o,n)],g=[r];if(l.length%2!=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)f.push(Pp(e,l[b])),g.push(l[b+1]);const p=[],_=Bn.empty();for(let b=f.length-1;b>=0;--b)if(!ub(p,f[b])){const C=f[b];let I=g[b];I=ii(I);const L=u.Nu(C);if(I instanceof Ad)p.push(C);else{const k=xd(I,L);k!=null&&(p.push(C),_.set(C,k))}}const S=new ti(p);return new sb(_,S,u.fieldTransforms)}function xd(t,e){if(lb(t=ii(t)))return xm("Unsupported field value:",e,t),ab(t,e);if(t instanceof Em)return(function(o,r){if(!rb(r.Cu))throw r.Bu(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(o,r){const l=[];let u=0;for(const f of o){let g=xd(f,r.Lu(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(t,e)}return(function(o,r){if((o=ii(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return X2(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=Qt.fromDate(o);return{timestampValue:ed(r.serializer,l)}}if(o instanceof Qt){const l=new Qt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ed(r.serializer,l)}}if(o instanceof Sm)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Ta)return{bytesValue:MS(r.serializer,o._byteString)};if(o instanceof Di){const l=r.databaseId,u=o.firestore._databaseId;if(!u.isEqual(l))throw r.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:rm(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof bm)return(function(u,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw f.Bu("VectorValues must only contain numeric values.");return nm(f.serializer,g)}))}}}}}})(o,r);throw r.Bu(`Unsupported field value: ${vm(o)}`)})(t,e)}function ab(t,e){const n={};return rS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yr(t,((o,r)=>{const l=xd(r,e.Mu(o));l!=null&&(n[o]=l)})),{mapValue:{fields:n}}}function lb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qt||t instanceof Sm||t instanceof Ta||t instanceof Di||t instanceof Em||t instanceof bm)}function xm(t,e,n){if(!lb(n)||!(function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)})(n)){const o=vm(n);throw o==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+o)}}function Pp(t,e,n){if((e=ii(e))instanceof bd)return e._internalPath;if(typeof e=="string")return Cm(t,e);throw od("Field path arguments must be of type string or ",t,!1,void 0,n)}const uV=new RegExp("[~\\*/\\[\\]]");function Cm(t,e,n){if(e.search(uV)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bd(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function od(t,e,n,o,r){const l=o&&!o.isEmpty(),u=r!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${o}`),u&&(g+=` in document ${r}`),g+=")"),new xe(ue.INVALID_ARGUMENT,f+t+g)}function ub(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n,o,r,l){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Di(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(db("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cV extends cb{data(){return super.data()}}function db(t,e){return typeof e=="string"?Cm(t,e):e instanceof bd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fV{convertValue(e,n="none"){switch(hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return yr(e,((r,l)=>{o[r]=this.convertValue(l,n)})),o}convertVectorValue(e){var n,o,r;const l=(r=(o=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||o===void 0?void 0:o.values)===null||r===void 0?void 0:r.map((u=>Lt(u.doubleValue)));return new bm(l)}convertGeoPoint(e){return new Sm(Lt(e.latitude),Lt(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Wp(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const n=As(e);return new Qt(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=bt.fromString(e);ut(LS(o));const r=new ql(o.get(1),o.get(3)),l=new Re(o.popFirst(5));return r.isEqual(n)||Ro(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t,e,n){let o;return o=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pV extends cb{constructor(e,n,o,r,l,u){super(e,n,o,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(db("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Bc extends pV{data(e={}){return super.data(e)}}class mV{constructor(e,n,o,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Nc(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new Bc(this._firestore,this._userDataWriter,o.key,o,new Nc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((f=>{const g=new Bc(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Nc(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Bc(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Nc(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return f.type!==0&&(p=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:gV(f.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function gV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me()}}class yV extends fV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ta(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Di(this.firestore,null,n)}}function Yh(t){t=id(t,Sd);const e=id(t.firestore,_m),n=Tm(e),o=new yV(e);return dV(t._query),XU(n,t._query).then((r=>new mV(e,o,t,r)))}function vV(t,e){return(function(o,r){const l=new Es;return o.asyncQueue.enqueueAndForget((async()=>OU(await $U(o),r,l))),l.promise})(Tm(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=sV(e)}set(e,n,o){this._verifyNotCommitted();const r=Jh(e,this._firestore),l=hV(r.converter,n,o),u=rV(this._dataReader,"WriteBatch.set",r._key,l,r.converter!==null,o);return this._mutations.push(u.toMutation(r._key,Mi.none())),this}update(e,n,o,...r){this._verifyNotCommitted();const l=Jh(e,this._firestore);let u;return u=typeof(n=ii(n))=="string"||n instanceof bd?lV(this._dataReader,"WriteBatch.update",l._key,n,o,r):aV(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(u.toMutation(l._key,Mi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Jh(e,this._firestore);return this._mutations=this._mutations.concat(new im(n._key,Mi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jh(t,e){if((t=ii(t)).firestore!==e)throw new xe(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t){return Tm(t=id(t,_m)),new _V(t,(e=>vV(t,e)))}(function(e,n=!0){(function(r){Aa=r})(KE),Ol(new ha("firestore",((o,{instanceIdentifier:r,options:l})=>{const u=o.getProvider("app").getImmediate(),f=new _m(new h2(o.getProvider("auth-internal")),new y2(o.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new xe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ql(p.options.projectId,_)})(u,r),u);return l=Object.assign({useFetchStreams:n},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ts(X0,"4.7.3",e),Ts(X0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="firebasestorage.googleapis.com",hb="storageBucket",TV=120*1e3,EV=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt extends gr{constructor(e,n,o=0){super(jh(e),`Firebase Storage: ${n} (${jh(e)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mt||(Mt={}));function jh(t){return"storage/"+t}function wm(){const t="An unknown error occurred, please check the error payload for server response.";return new Dt(Mt.UNKNOWN,t)}function SV(t){return new Dt(Mt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function bV(t){return new Dt(Mt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Dt(Mt.UNAUTHENTICATED,t)}function xV(){return new Dt(Mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CV(t){return new Dt(Mt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function wV(){return new Dt(Mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RV(){return new Dt(Mt.CANCELED,"User canceled the upload/download.")}function IV(t){return new Dt(Mt.INVALID_URL,"Invalid URL '"+t+"'.")}function NV(t){return new Dt(Mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function MV(){return new Dt(Mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hb+"' property when initializing the app?")}function DV(){return new Dt(Mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function PV(){return new Dt(Mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function UV(t){return new Dt(Mt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Up(t){return new Dt(Mt.INVALID_ARGUMENT,t)}function pb(){return new Dt(Mt.APP_DELETED,"The Firebase app was deleted.")}function VV(t){return new Dt(Mt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vl(t,e){return new Dt(Mt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Cl(t){throw new Dt(Mt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let o;try{o=ni.makeFromUrl(e,n)}catch{return new ni(e,"")}if(o.path==="")return o;throw NV(e)}static makeFromUrl(e,n){let o=null;const r="([A-Za-z0-9.\\-_]+)";function l(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+r+u,"i"),g={bucket:1,path:3};function p(X){X.path_=decodeURIComponent(X.path)}const _="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",C=new RegExp(`^https?://${S}/${_}/b/${r}/o${b}`,"i"),I={bucket:1,path:3},L=n===fb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",Y=new RegExp(`^https?://${L}/${r}/${k}`,"i"),z=[{regex:f,indices:g,postModify:l},{regex:C,indices:I,postModify:p},{regex:Y,indices:{bucket:1,path:2},postModify:p}];for(let X=0;X<z.length;X++){const q=z[X],se=q.regex.exec(e);if(se){const D=se[q.indices.bucket];let N=se[q.indices.path];N||(N=""),o=new ni(D,N),q.postModify(o);break}}if(o==null)throw IV(e);return o}}class kV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t,e,n){let o=1,r=null,l=null,u=!1,f=0;function g(){return f===2}let p=!1;function _(...k){p||(p=!0,e.apply(null,k))}function S(k){r=setTimeout(()=>{r=null,t(C,g())},k)}function b(){l&&clearTimeout(l)}function C(k,...Y){if(p){b();return}if(k){b(),_.call(null,k,...Y);return}if(g()||u){b(),_.call(null,k,...Y);return}o<64&&(o*=2);let z;f===1?(f=2,z=0):z=(o+Math.random())*1e3,S(z)}let I=!1;function L(k){I||(I=!0,b(),!p&&(r!==null?(k||(f=2),clearTimeout(r),S(0)):k||(f=1)))}return S(0),l=setTimeout(()=>{u=!0,L(!0)},n),L}function OV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(t){return t!==void 0}function GV(t){return typeof t=="object"&&!Array.isArray(t)}function Rm(t){return typeof t=="string"||t instanceof String}function PT(t){return Im()&&t instanceof Blob}function Im(){return typeof Blob<"u"}function UT(t,e,n,o){if(o<e)throw Up(`Invalid value for '${t}'. Expected ${e} or greater.`);if(o>n)throw Up(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t,e,n){let o=e;return n==null&&(o=`https://${e}`),`${n}://${o}/v0${t}`}function mb(t){const e=encodeURIComponent;let n="?";for(const o in t)if(t.hasOwnProperty(o)){const r=e(o)+"="+e(t[o]);n=n+r+"&"}return n=n.slice(0,-1),n}var cr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(cr||(cr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||r||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n,o,r,l,u,f,g,p,_,S,b=!0){this.url_=e,this.method_=n,this.headers_=o,this.body_=r,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=g,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=S,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,I)=>{this.resolve_=C,this.reject_=I,this.start_()})}start_(){const e=(o,r)=>{if(r){o(!1,new Mc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=f=>{const g=f.loaded,p=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,p)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const f=l.getErrorCode()===cr.NO_ERROR,g=l.getStatus();if(!f||FV(g,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===cr.ABORT;o(!1,new Mc(!1,null,_));return}const p=this.successCodes_.indexOf(g)!==-1;o(!0,new Mc(p,l))})},n=(o,r)=>{const l=this.resolve_,u=this.reject_,f=r.connection;if(r.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());BV(g)?l(g):l()}catch(g){u(g)}else if(f!==null){const g=wm();g.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,g)):u(g)}else if(r.canceled){const g=this.appDelete_?pb():RV();u(g)}else{const g=wV();u(g)}};this.canceled_?n(!1,new Mc(!1,null,!0)):this.backoffId_=LV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mc{constructor(e,n,o){this.wasSuccessCode=e,this.connection=n,this.canceled=!!o}}function HV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function JV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function KV(t,e,n,o,r,l,u=!0){const f=mb(t.urlParams),g=t.url+f,p=Object.assign({},t.headers);return YV(p,e),HV(p,n),zV(p,l),JV(p,o),new qV(g,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $V(...t){const e=jV();if(e!==void 0){const n=new e;for(let o=0;o<t.length;o++)n.append(t[o]);return n.getBlob()}else{if(Im())return new Blob(t);throw new Dt(Mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t){if(typeof atob>"u")throw UV("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $h{constructor(e,n){this.data=e,this.contentType=n||null}}function WV(t,e){switch(t){case $i.RAW:return new $h(gb(e));case $i.BASE64:case $i.BASE64URL:return new $h(yb(t,e));case $i.DATA_URL:return new $h(ek(e),tk(e))}throw wm()}function gb(t){const e=[];for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);if(o<=127)e.push(o);else if(o<=2047)e.push(192|o>>6,128|o&63);else if((o&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const l=o,u=t.charCodeAt(++n);o=65536|(l&1023)<<10|u&1023,e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|o&63)}else(o&64512)===56320?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|o&63)}return new Uint8Array(e)}function ZV(t){let e;try{e=decodeURIComponent(t)}catch{throw Vl($i.DATA_URL,"Malformed data URL.")}return gb(e)}function yb(t,e){switch(t){case $i.BASE64:{const r=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(r||l)throw Vl(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case $i.BASE64URL:{const r=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(r||l)throw Vl(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XV(e)}catch(r){throw r.message.includes("polyfill")?r:Vl(t,"Invalid character found")}const o=new Uint8Array(n.length);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return o}class vb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Vl($i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=n[1]||null;o!=null&&(this.base64=nk(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=e.substring(e.indexOf(",")+1)}}function ek(t){const e=new vb(t);return e.base64?yb($i.BASE64,e.rest):ZV(e.rest)}function tk(t){return new vb(t).contentType}function nk(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){let o=0,r="";PT(e)?(this.data_=e,o=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),o=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),o=e.length),this.size_=o,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(PT(this.data_)){const o=this.data_,r=QV(o,e,n);return r===null?null:new ms(r)}else{const o=new Uint8Array(this.data_.buffer,e,n-e);return new ms(o,!0)}}static getBlob(...e){if(Im()){const n=e.map(o=>o instanceof ms?o.data_:o);return new ms($V.apply(null,n))}else{const n=e.map(u=>Rm(u)?WV($i.RAW,u).data:u.data_);let o=0;n.forEach(u=>{o+=u.byteLength});const r=new Uint8Array(o);let l=0;return n.forEach(u=>{for(let f=0;f<u.length;f++)r[l++]=u[f]}),new ms(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t){let e;try{e=JSON.parse(t)}catch{return null}return GV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ok(t,e){const n=e.split("/").filter(o=>o.length>0).join("/");return t.length===0?n:t+"/"+n}function Tb(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t,e){return e}class Cn{constructor(e,n,o,r){this.server=e,this.local=n||e,this.writable=!!o,this.xform=r||sk}}let Dc=null;function rk(t){return!Rm(t)||t.length<2?t:Tb(t)}function Eb(){if(Dc)return Dc;const t=[];t.push(new Cn("bucket")),t.push(new Cn("generation")),t.push(new Cn("metageneration")),t.push(new Cn("name","fullPath",!0));function e(l,u){return rk(u)}const n=new Cn("name");n.xform=e,t.push(n);function o(l,u){return u!==void 0?Number(u):u}const r=new Cn("size");return r.xform=o,t.push(r),t.push(new Cn("timeCreated")),t.push(new Cn("updated")),t.push(new Cn("md5Hash",null,!0)),t.push(new Cn("cacheControl",null,!0)),t.push(new Cn("contentDisposition",null,!0)),t.push(new Cn("contentEncoding",null,!0)),t.push(new Cn("contentLanguage",null,!0)),t.push(new Cn("contentType",null,!0)),t.push(new Cn("metadata","customMetadata",!0)),Dc=t,Dc}function ak(t,e){function n(){const o=t.bucket,r=t.fullPath,l=new ni(o,r);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:n})}function lk(t,e,n){const o={};o.type="file";const r=n.length;for(let l=0;l<r;l++){const u=n[l];o[u.local]=u.xform(o,e[u.server])}return ak(o,t),o}function Sb(t,e,n){const o=_b(e);return o===null?null:lk(t,o,n)}function uk(t,e,n,o){const r=_b(e);if(r===null||!Rm(r.downloadTokens))return null;const l=r.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(p=>{const _=t.bucket,S=t.fullPath,b="/b/"+u(_)+"/o/"+u(S),C=Nm(b,n,o),I=mb({alt:"media",token:p});return C+I})[0]}function ck(t,e){const n={},o=e.length;for(let r=0;r<o;r++){const l=e[r];l.writable&&(n[l.server]=t[l.local])}return JSON.stringify(n)}class bb{constructor(e,n,o,r){this.url=e,this.method=n,this.handler=o,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t){if(!t)throw wm()}function dk(t,e){function n(o,r){const l=Sb(t,r,e);return Ab(l!==null),l}return n}function fk(t,e){function n(o,r){const l=Sb(t,r,e);return Ab(l!==null),uk(l,r,t.host,t._protocol)}return n}function xb(t){function e(n,o){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=xV():r=AV():n.getStatus()===402?r=bV(t.bucket):n.getStatus()===403?r=CV(t.path):r=o,r.status=n.getStatus(),r.serverResponse=o.serverResponse,r}return e}function hk(t){const e=xb(t);function n(o,r){let l=e(o,r);return o.getStatus()===404&&(l=SV(t.path)),l.serverResponse=r.serverResponse,l}return n}function pk(t,e,n){const o=e.fullServerUrl(),r=Nm(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,f=new bb(r,l,fk(t,n),u);return f.errorHandler=hk(e),f}function mk(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function gk(t,e,n){const o=Object.assign({},n);return o.fullPath=t.path,o.size=e.size(),o.contentType||(o.contentType=mk(null,e)),o}function yk(t,e,n,o,r){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function f(){let z="";for(let X=0;X<2;X++)z=z+Math.random().toString().slice(2);return z}const g=f();u["Content-Type"]="multipart/related; boundary="+g;const p=gk(e,o,r),_=ck(p,n),S="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+g+`\r
Content-Type: `+p.contentType+`\r
\r
`,b=`\r
--`+g+"--",C=ms.getBlob(S,o,b);if(C===null)throw DV();const I={name:p.fullPath},L=Nm(l,t.host,t._protocol),k="POST",Y=t.maxUploadRetryTime,W=new bb(L,k,dk(t,n),Y);return W.urlParams=I,W.headers=u,W.body=C.uploadData(),W.errorHandler=xb(e),W}class vk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=cr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=cr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=cr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,o,r){if(this.sent_)throw Cl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const l in r)r.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,r[l].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _k extends vk{initXhr(){this.xhr_.responseType="text"}}function Cb(){return new _k}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){this._service=e,n instanceof ni?this._location=n:this._location=ni.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new pr(e,n)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Tb(this._location.path)}get storage(){return this._service}get parent(){const e=ik(this._location.path);if(e===null)return null;const n=new ni(this._location.bucket,e);return new pr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw VV(e)}}function Tk(t,e,n){t._throwIfRoot("uploadBytes");const o=yk(t.storage,t._location,Eb(),new ms(e,!0),n);return t.storage.makeRequestWithTokens(o,Cb).then(r=>({metadata:r,ref:t}))}function Ek(t){t._throwIfRoot("getDownloadURL");const e=pk(t.storage,t._location,Eb());return t.storage.makeRequestWithTokens(e,Cb).then(n=>{if(n===null)throw PV();return n})}function Sk(t,e){const n=ok(t._location.path,e),o=new ni(t._location.bucket,n);return new pr(t.storage,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){return/^[A-Za-z]+:\/\//.test(t)}function Ak(t,e){return new pr(t,e)}function wb(t,e){if(t instanceof Mm){const n=t;if(n._bucket==null)throw MV();const o=new pr(n,n._bucket);return e!=null?wb(o,e):o}else return e!==void 0?Sk(t,e):t}function xk(t,e){if(e&&bk(e)){if(t instanceof Mm)return Ak(t,e);throw Up("To use ref(service, url), the first argument must be a Storage instance.")}else return wb(t,e)}function VT(t,e){const n=e==null?void 0:e[hb];return n==null?null:ni.makeFromBucketSpec(n,t)}function Ck(t,e,n,o={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=o;r&&(t._overrideAuthToken=typeof r=="string"?r:FE(r,t.app.options.projectId))}class Mm{constructor(e,n,o,r,l){this.app=e,this._authProvider=n,this._appCheckProvider=o,this._url=r,this._firebaseVersion=l,this._bucket=null,this._host=fb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=TV,this._maxUploadRetryTime=EV,this._requests=new Set,r!=null?this._bucket=ni.makeFromBucketSpec(r,this._host):this._bucket=VT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,e):this._bucket=VT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pr(this,e)}_makeRequest(e,n,o,r,l=!0){if(this._deleted)return new kV(pb());{const u=KV(e,this._appId,o,r,n,this._firebaseVersion,l);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[o,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,o,r).getPromise()}}const kT="@firebase/storage",LT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="storage";function wk(t,e,n){return t=ii(t),Tk(t,e,n)}function Rk(t){return t=ii(t),Ek(t)}function Ik(t,e){return t=ii(t),xk(t,e)}function Nk(t=$E(),e){t=ii(t);const o=JE(t,Rb).getImmediate({identifier:e}),r=BE("storage");return r&&Mk(o,...r),o}function Mk(t,e,n,o={}){Ck(t,e,n,o)}function Dk(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Mm(n,o,r,e,KE)}function Pk(){Ol(new ha(Rb,Dk,"PUBLIC").setMultipleInstances(!0)),Ts(kT,LT,""),Ts(kT,LT,"esm2017")}Pk();const Uk={apiKey:"AIzaSyBvTHMQKOJ3wc3iz-MiOYCBG9j2o3oDOGc",authDomain:"educators-academy.firebaseapp.com",projectId:"educators-academy",storageBucket:"educators-academy.firebasestorage.app",messagingSenderId:"827874514960",appId:"1:827874514960:web:4ab3a29c04b447b413d295",measurementId:"G-TDZ7DD1HQL"},Ib=jE(Uk),ei=eV(Ib),OT=Nk(Ib),Qh=t=>JSON.parse(JSON.stringify(t,(e,n)=>n===void 0?null:n)),Ri={async uploadFile(t,e){if(!OT)throw new Error("Firebase Storage is not initialized properly.");const n=t.name.split(".").pop(),o=`${Date.now()}_${Math.random().toString(36).substr(2,5)}.${n}`,r=Ik(OT,`${e}/${o}`),l=await wk(r,t);return await Rk(l.ref)},async saveGrades(t){if(localStorage.setItem("academy_grades",JSON.stringify(t)),ei)try{const e=Kh(ei);t.forEach(n=>{const o=zh(ei,"grades",n.id);e.set(o,Qh(n))}),await e.commit()}catch(e){console.error("Firebase Save Grades Error:",e)}},async saveTeachers(t){if(localStorage.setItem("academy_teachers",JSON.stringify(t)),ei)try{const e=Kh(ei);t.forEach(n=>{const o=zh(ei,"teachers",n.id);e.set(o,Qh(n))}),await e.commit()}catch(e){console.error("Firebase Save Teachers Error:",e)}},async saveCourses(t){if(localStorage.setItem("academy_courses",JSON.stringify(t)),ei)try{const e=Kh(ei);t.forEach(n=>{const o=zh(ei,"courses",n.id);e.set(o,Qh(n))}),await e.commit()}catch(e){console.error("Firebase Save Courses Error:",e)}},async loadData(){const t={grades:JSON.parse(localStorage.getItem("academy_grades")||"null"),teachers:JSON.parse(localStorage.getItem("academy_teachers")||"null"),courses:JSON.parse(localStorage.getItem("academy_courses")||"null")};if(ei)try{const[e,n,o]=await Promise.all([Yh(Hh(ei,"grades")),Yh(Hh(ei,"teachers")),Yh(Hh(ei,"courses"))]),r={grades:e.docs.map(l=>l.data()),teachers:n.docs.map(l=>l.data()),courses:o.docs.map(l=>l.data())};if(r.grades.length>0||r.teachers.length>0||r.courses.length>0)return localStorage.setItem("academy_grades",JSON.stringify(r.grades)),localStorage.setItem("academy_teachers",JSON.stringify(r.teachers)),localStorage.setItem("academy_courses",JSON.stringify(r.courses)),r}catch(e){console.error("Firebase Load Error:",e)}return t}},BT=({value:t,onChange:e})=>{const n=C=>{let I="12",L="00",k="AM";if(!C)return{hour:I,minute:L,period:k};const Y=C.match(/^(\d{1,2}):(\d{2})$/);if(Y){let z=parseInt(Y[1]);const X=Y[2];return k=z>=12?"PM":"AM",z=z%12||12,I=z.toString(),L=X,{hour:I,minute:L,period:k}}const W=C.match(/^(\d{1,2}):(\d{2})\s*(.*)$/);if(W){I=W[1],L=W[2];const z=W[3].trim();return k=z===""||z==="PM"||z===""?"PM":"AM",{hour:I,minute:L,period:k}}return{hour:I,minute:L,period:k}},{hour:o,minute:r,period:l}=n(t),[u,f]=_e.useState(o),[g,p]=_e.useState(r),[_,S]=_e.useState(l);_e.useEffect(()=>{const{hour:C,minute:I,period:L}=n(t);f(C),p(I),S(L)},[t]);const b=(C,I,L)=>{f(C),p(I),S(L),e(`${C}:${I} ${L==="AM"?"":""}`)};return T.jsxs("div",{className:"flex items-center gap-1",dir:"ltr",children:[T.jsxs("select",{value:_,onChange:C=>b(u,g,C.target.value),className:"bg-gray-50 border border-gray-200 rounded-lg p-1 text-sm font-bold outline-none focus:border-[#0a192f] w-16 text-center",children:[T.jsx("option",{value:"AM",children:""}),T.jsx("option",{value:"PM",children:""})]}),T.jsx("select",{value:g,onChange:C=>b(u,C.target.value,_),className:"bg-gray-50 border border-gray-200 rounded-lg p-1 text-sm font-bold outline-none focus:border-[#0a192f] w-14 text-center",children:["00","05","10","15","20","25","30","35","40","45","50","55"].map(C=>T.jsx("option",{value:C,children:C},C))}),T.jsx("span",{className:"font-bold",children:":"}),T.jsx("select",{value:u,onChange:C=>b(C.target.value,g,_),className:"bg-gray-50 border border-gray-200 rounded-lg p-1 text-sm font-bold outline-none focus:border-[#0a192f] w-14 text-center",children:Array.from({length:12},(C,I)=>I+1).map(C=>T.jsx("option",{value:C,children:C},C))})]})},Vk=({grades:t,setGrades:e,teachers:n,setTeachers:o,courses:r,setCourses:l,onLogout:u,apiKey:f,setApiKey:g,anthropicApiKey:p,setAnthropicApiKey:_})=>{var Ei;const[S,b]=_e.useState("ai-schedule"),[C,I]=_e.useState("list"),[L,k]=_e.useState("list"),[Y,W]=_e.useState(null),[z,X]=_e.useState(null),[q,se]=_e.useState(null),[D,N]=_e.useState(()=>{const P=localStorage.getItem("academy_stage_subjects");return P?JSON.parse(P):gx}),[M,U]=_e.useState(""),[O,G]=_e.useState(""),[V,Ne]=_e.useState("gemini"),[ot,te]=_e.useState("ai"),[he,Ee]=_e.useState(""),[ke,ze]=_e.useState([]),[H,ie]=_e.useState(!1),[fe,Te]=_e.useState("gemini"),[Ce,Be]=_e.useState(""),[Le,At]=_e.useState([]);_e.useEffect(()=>{if(he){const P=t.find(ae=>ae.id===he);P&&ze(JSON.parse(JSON.stringify(P.schedule||[])))}},[he,t]),_e.useEffect(()=>{if(Ce){const P=t.find(ae=>ae.id===Ce);P&&At(JSON.parse(JSON.stringify(P.ramadanSchedule||[])))}},[Ce,t]);const[ct,oi]=_e.useState(""),[Gn,Ui]=_e.useState(""),[Rs,si]=_e.useState(((Ei=t[0])==null?void 0:Ei.id)||""),[Ct,gt]=_e.useState(!1),[Is,Ns]=_e.useState(!1),[ri,eo]=_e.useState(localStorage.getItem("google_sheet_webhook_url")||""),[Xe,Vi]=_e.useState({name:"",subject:"",teachingHours:"",availability:"",bio:"",imageUrl:"",grades:[],stages:[]}),[ki,Ot]=_e.useState(null),[Ms,wt]=_e.useState(null),[Pt,Fn]=_e.useState(!1),[Ds,Do]=_e.useState(""),[pt,In]=_e.useState({title:"",description:"",videoUrl:"",thumbnailUrl:"",gradeId:""}),[qn,Jt]=_e.useState(null),[Hn,fn]=_e.useState(!1),[Wl,_r]=_e.useState("info"),to=Array.from(new Set(D.flatMap(P=>P.subjects))).sort();_e.useEffect(()=>{Ri.saveGrades(t),Ri.saveTeachers(n),Ri.saveCourses(r),localStorage.setItem("academy_stage_subjects",JSON.stringify(D))},[t,n,r,D]),_e.useEffect(()=>{localStorage.setItem("google_sheet_webhook_url",ri)},[ri]);const Li=async P=>{const ae=typeof P=="string"?P:Gn;if(ae.trim()){gt(!0);try{const pe=(await VE(ae,f)).map(de=>{const ye=t.filter(ge=>{var Ye;return(Ye=de.grades)==null?void 0:Ye.some(yt=>ge.name.includes(yt)||yt.includes(ge.name)||ge.stage==="primary"&&yt.includes("")||ge.stage==="preparatory"&&yt.includes("")||ge.stage==="secondary"&&yt.includes(""))}).map(ge=>ge.id);return{...de,id:de.id||`t-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,whatsapp:kl.phone,imageUrl:de.imageUrl||`https://picsum.photos/seed/${Math.random()}/400`,grades:ye.length>0?ye:[]}});o(de=>{const ye=[...de];return pe.forEach(ge=>{ye.find(Ye=>Ye.name===ge.name)||ye.push(ge)}),ye}),e(de=>de.map(ye=>{const ge=pe.filter(Ye=>{var yt;return(yt=Ye.grades)==null?void 0:yt.includes(ye.id)}).map(Ye=>Ye.id);return ge.length>0?{...ye,teachers:Array.from(new Set([...ye.teachers,...ge]))}:ye})),alert(`   ${pe.length}    !`),Ui(""),I("list")}catch(le){console.error(le),f?alert("    ."):console.warn("AI Teacher parsing failed (likely due to missing key), falling back to offline regex.")}finally{gt(!1)}}},ai=async P=>{P.preventDefault();const ae=Pt?Ds:Xe.subject;if(!Xe.name||!ae)return alert("   ");if(!Xe.stages||Xe.stages.length===0)return alert("     ");gt(!0);try{let le=Xe.imageUrl||`https://picsum.photos/seed/${Date.now()}/400`;ki&&(le=await Ri.uploadFile(ki,"teachers"));const pe=`t-${Date.now()}`,de={id:pe,name:Xe.name,subject:ae,imageUrl:le,whatsapp:kl.phone,teachingHours:Xe.teachingHours||"",availability:Xe.availability||"",bio:Xe.bio||"",grades:Xe.grades||[],stages:Xe.stages||[]};o(ye=>[...ye,de]),Xe.grades&&Xe.grades.length>0&&e(ye=>ye.map(ge=>{var Ye;return(Ye=Xe.grades)!=null&&Ye.includes(ge.id)?{...ge,teachers:Array.from(new Set([...ge.teachers,pe]))}:ge})),alert("      !"),I("list"),Oi()}catch(le){console.error(le),alert("    ")}finally{gt(!1)}},Oi=()=>{Vi({name:"",subject:"",bio:"",availability:"",teachingHours:"",imageUrl:"",grades:[],stages:[]}),Ot(null),Fn(!1),Do("")},zn=async()=>{var P,ae,le,pe;if(!pt.title)return alert("    ");f||console.warn("Attempting 4K image generation without API Key. This will likely fail."),Ns(!0);try{const ge=(le=(ae=(P=(await new Jp({apiKey:f||""}).models.generateContent({model:"gemini-3-pro-image-preview",contents:{parts:[{text:`High-end 4K cinematic educational course thumbnail for a subject titled "${pt.title}". 
            Atmosphere: Professional, prestigious, elite academic. 
            Visuals: Dramatic studio lighting, shallow depth of field, sharp textures of books and polished wood, 
            luxurious gold and deep navy blue color palette. 
            Style: Inspirational and modern, suitable for Educators Academy.`}]},config:{imageConfig:{aspectRatio:"16:9",imageSize:"4K"}}})).candidates)==null?void 0:P[0])==null?void 0:ae.content)==null?void 0:le.parts.find(Ye=>Ye.inlineData);if(ge!=null&&ge.inlineData){const Ye=ge.inlineData.data;In(yt=>({...yt,thumbnailUrl:`data:image/png;base64,${Ye}`}))}else alert("          .")}catch(de){console.error(de),alert("   (   API )."),(pe=de.message)!=null&&pe.includes("Requested entity was not found")}finally{Ns(!1)}},Nn=async P=>{if(P.preventDefault(),!pt.title||!pt.gradeId)return alert("    ");gt(!0);try{let ae=pt.thumbnailUrl||"";qn&&(ae=await Ri.uploadFile(qn,"courses/thumbs"));const le=t.find(ye=>ye.id===pt.gradeId),pe=`c-${Date.now()}`,de={id:pe,title:pt.title,description:pt.description||"     ",thumbnailUrl:ae||`https://picsum.photos/seed/${pe}/800/400`,stage:le?le.stage:"primary",grade:le?le.name:"",gradeId:pt.gradeId,media:pt.videoUrl?[{id:`m-${Date.now()}`,title:" ",url:pt.videoUrl,type:"video"}]:[]};l(ye=>[...ye,de]),e(ye=>ye.map(ge=>ge.id===pt.gradeId?{...ge,courses:Array.from(new Set([...ge.courses,pe]))}:ge)),alert("   !"),k("list"),In({title:"",description:"",videoUrl:"",thumbnailUrl:"",gradeId:""}),Jt(null)}catch(ae){console.error(ae)}finally{gt(!1)}},Bi=P=>{Vi(ae=>{const le=ae.stages||[],pe=le.includes(P)?le.filter(ge=>ge!==P):[...le,P],de=t.filter(ge=>pe.includes(ge.stage)).map(ge=>ge.id),ye=(ae.grades||[]).filter(ge=>de.includes(ge));return{...ae,stages:pe,grades:ye}})},Po=P=>{Vi(ae=>{const le=ae.grades||[],pe=le.includes(P)?le.filter(de=>de!==P):[...le,P];return{...ae,grades:pe}})},Ps=async P=>{gt(!0);try{let ae=P.imageUrl;Ms&&(ae=await Ri.uploadFile(Ms,"teachers"));const le={...P,imageUrl:ae};o(pe=>pe.map(de=>de.id===le.id?le:de)),alert("    !"),W(null),wt(null)}catch(ae){console.error(ae),alert("    ")}finally{gt(!1)}},Ti=async()=>{if(!O.trim()||!ct){alert("     ");return}if(!(V==="gemini"?f:p)){Te(V),ie(!0);return}gt(!0);try{const ae=t.find(ye=>ye.id===ct),le=ae?`[: ${ae.name}]`:"",pe=V==="gemini"?f:p,de=await fp(`${le} ${O}`,pe,V);e(ye=>ye.map(ge=>{if(ge.id===ct){const yt=[...ge.schedule||[]];return de.forEach(vt=>{const Bt=vt.day.trim();let hn=yt.find(Mn=>Mn.day.trim()===Bt);hn||(hn={day:Bt,slots:[]},yt.push(hn)),vt.slots.forEach(Mn=>{hn.slots.some(Us=>Us.subject.trim()===Mn.subject.trim()&&Us.time.trim()===Mn.time.trim())||hn.slots.push(Mn)})}),{...ge,schedule:yt}}return ge})),alert("   !       "),G("")}catch(ae){console.error("AI Update Error:",ae),alert("        API  .")}finally{gt(!1)}};return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-10",dir:"rtl",children:[T.jsx(kE,{grades:t,apiKey:f,onUpdateSchedule:async(P,ae)=>{const le=t.find(ye=>ye.id===P),pe=le?` ${le.name} (${le.stage})`:"",de=await fp(`${pe} ${ae}`,f);e(ye=>ye.map(ge=>ge.id===P?{...ge,schedule:de}:ge))},onAddTeacher:Li,onNavigate:()=>{}}),T.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-10 gap-6 text-right",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("img",{src:Gc,alt:"Logo",className:"w-16 h-auto"}),T.jsx("h1",{className:"text-4xl font-black text-[#0a192f]",children:"  "})]}),T.jsxs("div",{className:"flex bg-white rounded-2xl p-1 shadow-lg border overflow-x-auto max-w-full",children:[[{id:"ai-schedule",label:" "},{id:"teachers",label:" "},{id:"subjects",label:" "},{id:"courses",label:" "},{id:"settings",label:" "}].map(P=>T.jsx("button",{onClick:()=>b(P.id),className:`px-5 py-2.5 rounded-xl font-bold transition-all whitespace-nowrap ${S===P.id?"bg-[#0a192f] text-white":"text-gray-500 hover:bg-gray-50"}`,children:P.label},P.id)),T.jsx("button",{onClick:u,className:"px-5 py-2.5 rounded-xl font-bold text-red-500 hover:bg-red-50",children:""})]})]}),S==="ai-schedule"&&T.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl p-10 animate-in fade-in border border-gray-100",children:[T.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[T.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),T.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[T.jsx("button",{onClick:()=>te("ai"),className:`px-6 py-3 rounded-2xl font-black transition-all ${ot==="ai"?"bg-[#10b981] text-white shadow-lg":"bg-white text-gray-500 hover:bg-gray-100"}`,children:"   (AI)"}),T.jsx("button",{onClick:()=>te("manual"),className:`px-6 py-3 rounded-2xl font-black transition-all ${ot==="manual"?"bg-[#0a192f] text-white shadow-lg":"bg-white text-gray-500 hover:bg-gray-100"}`,children:"  "}),T.jsx("button",{onClick:()=>te("ramadan"),className:`px-6 py-3 rounded-2xl font-black transition-all ${ot==="ramadan"?"bg-[#f97316] text-white shadow-lg":"bg-white text-gray-500 hover:bg-gray-100"}`,children:"  "})]})]}),ot==="ai"&&T.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4",children:[T.jsx("div",{className:"flex gap-4 mb-8 overflow-x-auto pb-2",children:[{id:"gemini",name:"Gemini 1.5 Pro",icon:"",premium:!0,provider:"gemini"},{id:"claude",name:"Claude 3.5 Sonnet",icon:"",premium:!0,provider:"claude"},{id:"offline",name:"Local Intelligence",icon:"",premium:!1,provider:"offline"}].map(P=>T.jsxs("button",{onClick:()=>{P.id!=="offline"&&(Ne(P.provider),(P.provider==="gemini"?f:p)||(Te(P.provider),ie(!0)))},className:`flex items-center gap-3 px-6 py-4 rounded-2xl border-2 transition-all min-w-[200px] ${V===P.provider&&P.id!=="offline"?"border-[#10b981] bg-[#0a192f] text-white shadow-lg scale-105":"border-[#0a192f] bg-white text-[#0a192f] hover:bg-gray-50"}`,children:[T.jsx("span",{className:"text-2xl",children:P.icon}),T.jsxs("div",{className:"text-right",children:[T.jsx("p",{className:"font-black text-sm",children:P.name}),T.jsx("p",{className:"text-xs opacity-75 font-bold",children:P.premium?f?"  ":" API ":"   "})]})]},P.id))}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[T.jsxs("div",{className:"md:col-span-1",children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-3",children:"  :"}),T.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2 custom-scrollbar",children:t.map(P=>T.jsx("button",{onClick:()=>oi(P.id),className:`w-full text-right p-4 rounded-2xl font-bold transition-all border-2 ${ct===P.id?"bg-[#0a192f] text-white border-[#0a192f]":"bg-gray-50 text-gray-500 border-transparent hover:border-gray-200"}`,children:P.name},P.id))})]}),T.jsxs("div",{className:"md:col-span-2 space-y-6",children:[T.jsx("textarea",{value:O,onChange:P=>G(P.target.value),className:"w-full border-2 rounded-[2rem] p-8 h-64 outline-none font-bold text-xl leading-relaxed shadow-inner bg-gray-50 focus:border-[#10b981] transition-all",placeholder:"    .. :  4     6  ..."}),T.jsx("button",{onClick:Ti,disabled:Ct,className:"w-full bg-[#0a192f] text-white py-6 rounded-[2.5rem] font-black text-2xl shadow-2xl hover:bg-[#10b981] transition-all active:scale-95 flex items-center justify-center gap-4",children:Ct?T.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"}):"   "})]})]})]}),ot==="manual"&&T.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 space-y-8",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-3",children:"   :"}),T.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:t.map(P=>T.jsx("button",{onClick:()=>Ee(P.id),className:`px-6 py-3 rounded-xl font-bold transition-all border-2 min-w-fit ${he===P.id?"bg-[#0a192f] text-white border-[#0a192f] shadow-lg scale-105":"bg-white text-gray-500 border-gray-100 hover:border-gray-200"}`,children:P.name},P.id))})]}),he?T.jsxs("div",{className:"bg-gray-50 rounded-[2.5rem] p-6 border border-gray-200",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-xl font-black text-[#0a192f]",children:"   "}),T.jsxs("button",{onClick:()=>{e(P=>P.map(ae=>ae.id===he?{...ae,schedule:ke}:ae)),alert("   ! ")},className:"bg-[#10b981] text-white px-8 py-3 rounded-xl font-black shadow-lg hover:bg-emerald-600 transition-all active:scale-95 flex items-center gap-2",children:[T.jsx("span",{children:""}),"  "]})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["","","","","",""].map(P=>{const ae=ke.find(le=>le.day===P)||{slots:[]};return T.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-gray-100 hover:border-[#0a192f]/20 transition-all",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[T.jsx("h4",{className:"font-black text-lg text-[#0a192f]",children:P}),T.jsx("button",{onClick:()=>{const le={id:`s-${Date.now()}-${Math.random()}`,subject:"",time:"",color:"bg-blue-500",teacherId:""},pe=[...ke],de=pe.findIndex(ye=>ye.day===P);de>=0?pe[de].slots.push(le):pe.push({day:P,slots:[le]}),ze(pe)},className:"w-8 h-8 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center font-black hover:bg-blue-100 transition-all",title:" ",children:"+"})]}),T.jsxs("div",{className:"space-y-3",children:[ae.slots.map((le,pe)=>T.jsxs("div",{className:"bg-gray-50 p-3 rounded-2xl border border-gray-200 group relative",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsxs("select",{value:le.subject,onChange:de=>{const ye=[...ke],ge=ye.findIndex(Ye=>Ye.day===P);ye[ge].slots[pe].subject=de.target.value,ze(ye)},className:"w-full bg-white border border-gray-200 rounded-lg p-2 text-sm font-bold outline-none focus:border-[#0a192f]",children:[T.jsx("option",{value:"",children:" ..."}),to.map(de=>T.jsx("option",{value:de,children:de},de))]}),T.jsx(BT,{value:le.time,onChange:de=>{const ye=[...ke],ge=ye.findIndex(Ye=>Ye.day===P);ye[ge].slots[pe].time=de,ze(ye)}})]}),T.jsx("button",{onClick:()=>{const de=[...ke],ye=de.findIndex(ge=>ge.day===P);de[ye].slots=de[ye].slots.filter(ge=>ge.id!==le.id),ze(de)},className:"absolute -top-2 -left-2 w-6 h-6 bg-red-100 text-red-500 rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-all font-black shadow-sm hover:bg-red-500 hover:text-white",children:""})]},le.id)),ae.slots.length===0&&T.jsx("p",{className:"text-center text-gray-300 text-xs font-bold py-4",children:"  "})]})]},P)})})]}):T.jsx("div",{className:"text-center py-20 bg-gray-50 rounded-[2.5rem] border-2 border-dashed border-gray-200",children:T.jsx("p",{className:"text-gray-400 font-bold text-xl",children:"       "})})]}),ot==="ramadan"&&T.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 space-y-8",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-3",children:"    :"}),T.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:t.map(P=>T.jsx("button",{onClick:()=>Be(P.id),className:`px-6 py-3 rounded-xl font-bold transition-all border-2 min-w-fit ${Ce===P.id?"bg-[#f97316] text-white border-[#f97316] shadow-lg scale-105":"bg-white text-gray-500 border-gray-100 hover:border-gray-200"}`,children:P.name},P.id))})]}),Ce?T.jsxs("div",{className:"bg-orange-50/50 rounded-[2.5rem] p-6 border border-orange-100",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-xl font-black text-[#f97316]",children:"   "}),T.jsxs("button",{onClick:()=>{e(P=>P.map(ae=>ae.id===Ce?{...ae,ramadanSchedule:Le}:ae)),alert("    ! ")},className:"bg-[#f97316] text-white px-8 py-3 rounded-xl font-black shadow-lg hover:bg-orange-600 transition-all active:scale-95 flex items-center gap-2",children:[T.jsx("span",{children:""}),"   "]})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["","","","","",""].map(P=>{const ae=Le.find(le=>le.day===P)||{slots:[]};return T.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-100 pb-2",children:[T.jsxs("h4",{className:"font-black text-lg text-[#0a192f] flex items-center gap-2",children:[T.jsx("span",{className:"text-[#f97316]",children:""})," ",P]}),T.jsx("button",{onClick:()=>{const le={id:`s-${Date.now()}`,subject:" ",time:"09:00 ",color:"bg-orange-100 text-orange-800",icon:""},pe=[...Le],de=pe.findIndex(ye=>ye.day===P);de>=0?pe[de].slots.push(le):pe.push({day:P,slots:[le]}),At(pe)},className:"bg-gray-50 text-[#f97316] px-4 py-2 rounded-lg text-sm font-bold hover:bg-orange-50 transition-colors",children:"+  "})]}),T.jsx("div",{className:"space-y-3",children:ae.slots.length===0?T.jsx("p",{className:"text-gray-300 text-sm text-center py-4 italic",children:"     "}):ae.slots.map((le,pe)=>T.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-gray-50 p-3 rounded-xl border border-gray-100 group hover:border-[#f97316]/30 transition-colors",children:[T.jsx("div",{className:"flex-1 min-w-[150px]",children:T.jsxs("select",{value:le.subject,onChange:de=>{const ye=[...Le],ge=ye.findIndex(Ye=>Ye.day===P);ye[ge].slots[pe].subject=de.target.value,At(ye)},className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm font-bold focus:border-[#f97316] outline-none",children:[T.jsx("option",{value:" ",children:" "}),to.map(de=>T.jsx("option",{value:de,children:de},de))]})}),T.jsx("div",{className:"w-32",children:T.jsx(BT,{value:le.time,onChange:de=>{const ye=[...Le],ge=ye.findIndex(Ye=>Ye.day===P);ye[ge].slots[pe].time=de,At(ye)}})}),T.jsx("button",{onClick:()=>{const de=[...Le],ye=de.findIndex(ge=>ge.day===P);de[ye].slots.splice(pe,1),At(de)},className:"text-red-400 hover:text-red-600 p-2 opacity-50 group-hover:opacity-100 transition-opacity",title:" ",children:""})]},le.id))})]},P)})})]}):T.jsx("div",{className:"text-center py-20 bg-orange-50/30 rounded-[2.5rem] border-2 border-dashed border-orange-100/50",children:T.jsx("p",{className:"text-gray-400 font-bold text-xl",children:"      "})})]})]}),S==="teachers"&&T.jsxs("div",{className:"animate-in fade-in text-right",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8 border-b pb-4",children:[T.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"  "}),T.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[T.jsx("button",{onClick:()=>I("list"),className:`px-4 py-2 rounded-lg font-bold ${C==="list"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:""}),T.jsx("button",{onClick:()=>I("add"),className:`px-4 py-2 rounded-lg font-bold ${C==="add"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:" "}),T.jsx("button",{onClick:()=>I("ai-add"),className:`px-4 py-2 rounded-lg font-bold ${C==="ai-add"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:"  "})]})]}),C==="ai-add"&&T.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-xl space-y-8 max-w-2xl mx-auto border-t-8 border-[#10b981]",children:[T.jsx("h3",{className:"text-2xl font-black text-[#0a192f] text-center",children:"    "}),T.jsx("textarea",{value:Gn,onChange:P=>Ui(P.target.value),className:"w-full border-2 rounded-2xl p-6 h-64 focus:border-[#10b981] outline-none font-bold text-lg shadow-inner bg-gray-50",placeholder:"    (:     1  2 )..."}),T.jsx("button",{onClick:()=>Li(),disabled:Ct||!Gn.trim(),className:"w-full bg-[#0a192f] text-white py-5 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all active:scale-95",children:Ct?"  ...":"   "})]}),C==="add"&&T.jsxs("form",{onSubmit:ai,className:"bg-white p-8 rounded-[2.5rem] shadow-xl space-y-8 max-w-3xl mx-auto border-t-8 border-[#10b981]",children:[T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("input",{required:!0,placeholder:"",value:Xe.name,onChange:P=>Vi({...Xe,name:P.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold outline-none focus:border-[#10b981]"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),Pt?T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{autoFocus:!0,required:!0,placeholder:" ",value:Ds,onChange:P=>Do(P.target.value),className:"flex-1 border-2 rounded-xl p-4 font-bold outline-none border-orange-500"}),T.jsx("button",{type:"button",onClick:()=>Fn(!1),className:"bg-gray-100 px-4 rounded-xl text-gray-400 font-bold",children:""})]}):T.jsxs("select",{required:!0,value:Xe.subject,onChange:P=>P.target.value==="ADD_NEW"?Fn(!0):Vi({...Xe,subject:P.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white",children:[T.jsx("option",{value:"",children:" ..."}),to.map(P=>T.jsx("option",{value:P,children:P},P)),T.jsx("option",{value:"ADD_NEW",className:"text-orange-500 font-black",children:"+  ..."})]})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-4",children:"   :"}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:gs.map(P=>{var ae,le,pe,de,ye;return T.jsxs("div",{className:`p-4 rounded-2xl border-2 transition-all cursor-pointer ${(ae=Xe.stages)!=null&&ae.includes(P.id)?"bg-[#10b981]/5 border-[#10b981]":"bg-gray-50 border-gray-100"}`,onClick:()=>Bi(P.id),children:[T.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[T.jsx("span",{className:"text-xl",children:P.icon}),T.jsx("span",{className:`font-black ${(le=Xe.stages)!=null&&le.includes(P.id)?"text-[#10b981]":"text-gray-400"}`,children:P.name}),T.jsx("div",{className:`mr-auto w-5 h-5 rounded-full border-2 flex items-center justify-center ${(pe=Xe.stages)!=null&&pe.includes(P.id)?"border-[#10b981] bg-[#10b981]":"border-gray-300"}`,children:((de=Xe.stages)==null?void 0:de.includes(P.id))&&T.jsx("span",{className:"text-white text-[10px]",children:""})})]}),((ye=Xe.stages)==null?void 0:ye.includes(P.id))&&T.jsx("div",{className:"space-y-1 mt-2 animate-in fade-in zoom-in-95",onClick:ge=>ge.stopPropagation(),children:t.filter(ge=>ge.stage===P.id).map(ge=>{var Ye;return T.jsx("div",{onClick:()=>Po(ge.id),className:`flex items-center gap-2 p-2 rounded-lg text-xs font-bold transition-all ${(Ye=Xe.grades)!=null&&Ye.includes(ge.id)?"bg-[#10b981] text-white":"bg-white border text-gray-400"}`,children:ge.name},ge.id)})})]},P.id)})})]}),T.jsxs("div",{className:"border-2 border-dashed rounded-2xl p-8 text-center bg-gray-50 hover:bg-gray-100 transition-all cursor-pointer relative group",children:[T.jsx("input",{type:"file",accept:"image/*",onChange:P=>{var ae;return Ot(((ae=P.target.files)==null?void 0:ae[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),T.jsxs("div",{className:"flex flex-col items-center",children:[T.jsx("span",{className:"text-4xl mb-2",children:""}),T.jsx("p",{className:"text-gray-400 font-bold",children:ki?`  : ${ki.name}`:"    "})]})]}),T.jsx("textarea",{placeholder:" ...",value:Xe.bio,onChange:P=>Vi({...Xe,bio:P.target.value}),className:"w-full border-2 rounded-xl p-4 h-32 font-bold focus:border-[#10b981] outline-none"}),T.jsx("button",{disabled:Ct,className:"w-full bg-[#10b981] text-white py-5 rounded-2xl font-black text-xl shadow-xl shadow-emerald-500/20 active:scale-95 transition-all",children:Ct?" ...":"  "})]}),C==="list"&&T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(P=>{var ae;return T.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] shadow-md border border-gray-100 group hover:border-[#10b981] transition-all flex flex-col",children:[T.jsx("img",{src:P.imageUrl,className:"w-32 h-32 rounded-[2rem] object-cover mx-auto mb-4 border-4 border-gray-50 shadow-sm"}),T.jsx("h3",{className:"text-2xl font-black text-center text-[#0a192f]",children:P.name}),T.jsx("p",{className:"text-[#10b981] font-bold text-center mb-6",children:P.subject}),T.jsx("div",{className:"flex flex-wrap gap-1 justify-center mb-4",children:(ae=P.grades)==null?void 0:ae.map(le=>{const pe=t.find(de=>de.id===le);return pe?T.jsx("span",{className:"bg-gray-100 text-gray-600 text-[10px] px-2 py-1 rounded-full font-bold border border-gray-200",children:pe.name},le):null})}),T.jsxs("div",{className:"flex gap-2 mt-auto",children:[T.jsx("button",{onClick:()=>W(P),className:"flex-1 bg-gray-50 text-gray-600 py-3 rounded-xl font-bold hover:bg-[#10b981] hover:text-white transition-all",children:" "}),T.jsx("button",{onClick:()=>se(P),className:"bg-red-50 p-3 rounded-xl text-red-500 hover:bg-red-500 hover:text-white transition-all",children:""})]})]},P.id)})})]}),S==="courses"&&T.jsxs("div",{className:"animate-in fade-in text-right",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8 border-b pb-4",children:[T.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"   "}),T.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[T.jsx("button",{onClick:()=>k("list"),className:`px-4 py-2 rounded-lg font-bold ${L==="list"?"bg-white shadow text-[#f97316]":"text-gray-400"}`,children:""}),T.jsx("button",{onClick:()=>k("add"),className:`px-4 py-2 rounded-lg font-bold ${L==="add"?"bg-white shadow text-[#f97316]":"text-gray-400"}`,children:"  "})]})]}),L==="add"&&T.jsxs("form",{onSubmit:Nn,className:"bg-white p-10 rounded-[2.5rem] shadow-xl space-y-8 max-w-2xl mx-auto border-t-8 border-[#f97316]",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("input",{required:!0,placeholder:" ",value:pt.title,onChange:P=>In({...pt,title:P.target.value}),className:"w-full border-2 rounded-2xl p-5 font-black text-2xl focus:border-[#f97316] outline-none"})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsxs("button",{type:"button",onClick:zn,disabled:Is||!pt.title,className:"bg-[#0a192f] text-white p-5 rounded-2xl font-black flex items-center justify-center gap-3 hover:bg-black group transition-all active:scale-95 shadow-xl",children:[Is?T.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):T.jsx("span",{className:"text-2xl group-hover:rotate-12 transition-transform",children:""}),Is?"  4K...":"  4K"]}),T.jsxs("div",{className:"relative h-full",children:[T.jsx("input",{type:"file",accept:"image/*",onChange:P=>{var ae;return Jt(((ae=P.target.files)==null?void 0:ae[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),T.jsx("div",{className:"bg-orange-50 border-2 border-dashed border-orange-200 rounded-2xl p-5 text-center font-bold text-orange-600 h-full flex items-center justify-center",children:qn?` ${qn.name}`:"   "})]})]}),T.jsx("input",{type:"text",placeholder:"     ...",value:pt.thumbnailUrl,onChange:P=>In({...pt,thumbnailUrl:P.target.value}),className:"w-full bg-gray-50 border-2 border-gray-100 rounded-xl p-3 font-bold text-sm focus:border-[#f97316] outline-none text-left",dir:"ltr"}),pt.thumbnailUrl&&T.jsx("img",{src:pt.thumbnailUrl,className:"w-full h-56 object-cover rounded-[2rem] border-4 border-white shadow-xl animate-in zoom-in"})]}),T.jsxs("select",{required:!0,value:pt.gradeId,onChange:P=>In({...pt,gradeId:P.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white focus:border-[#f97316] outline-none",children:[T.jsx("option",{value:"",children:"  ..."}),t.map(P=>T.jsx("option",{value:P.id,children:P.name},P.id))]}),T.jsx("textarea",{placeholder:"  ...",value:pt.description,onChange:P=>In({...pt,description:P.target.value}),className:"w-full border-2 rounded-2xl p-4 h-32 font-bold focus:border-[#f97316] outline-none"}),T.jsx("button",{disabled:Ct,className:"w-full bg-[#f97316] text-white py-6 rounded-[2rem] font-black text-2xl shadow-2xl hover:bg-orange-600 transition-all active:scale-95 shadow-orange-500/20",children:Ct?" ...":"    "})]}),L==="list"&&T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(P=>T.jsxs("div",{className:"bg-white rounded-[3rem] shadow-xl border border-gray-100 overflow-hidden group flex flex-col hover:-translate-y-2 transition-all duration-500",children:[T.jsx("img",{src:P.thumbnailUrl,className:"w-full h-56 object-cover group-hover:scale-105 transition-transform duration-1000"}),T.jsxs("div",{className:"p-8 flex-1 flex flex-col",children:[T.jsx("h3",{className:"text-2xl font-black mb-2 text-[#0a192f]",children:P.title}),T.jsx("p",{className:"text-gray-400 font-bold text-sm mb-6",children:P.grade}),T.jsxs("div",{className:"flex gap-2 mt-auto",children:[T.jsx("button",{onClick:()=>X(P),className:"flex-1 bg-gray-50 text-[#0a192f] py-4 rounded-2xl font-black hover:bg-[#0a192f] hover:text-white transition-all shadow-sm",children:"  "}),T.jsx("button",{onClick:()=>{confirm("    ")&&l(ae=>ae.filter(le=>le.id!==P.id))},className:"bg-red-50 p-4 rounded-2xl text-red-500 hover:bg-red-500 hover:text-white transition-all",children:""})]})]})]},P.id))})]}),Y&&T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:T.jsxs("form",{onSubmit:P=>{P.preventDefault(),Ps(Y)},className:"bg-white w-full max-w-4xl rounded-[2.5rem] p-8 md:p-12 shadow-2xl overflow-y-auto max-h-[90vh] animate-in zoom-in-95 border-t-8 border-[#10b981]",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8",children:[T.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),T.jsx("button",{type:"button",onClick:()=>W(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 hover:bg-red-100 hover:text-red-500 transition-all font-black",children:""})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"text-center",children:[T.jsxs("div",{className:"relative inline-block group cursor-pointer",children:[T.jsx("img",{src:Y.imageUrl,alt:Y.name,className:"w-40 h-40 rounded-[2.5rem] object-cover border-4 border-[#10b981] shadow-xl group-hover:brightness-75 transition-all"}),T.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:T.jsx("span",{className:"text-white text-3xl",children:""})}),T.jsx("input",{type:"file",accept:"image/*",onChange:P=>{var ae;return wt(((ae=P.target.files)==null?void 0:ae[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer"})]}),T.jsx("p",{className:"text-sm font-bold text-gray-400 mt-2",children:"  "}),T.jsx("input",{type:"text",placeholder:"    ...",value:Y.imageUrl,onChange:P=>W({...Y,imageUrl:P.target.value}),className:"w-full mt-4 bg-gray-50 border-2 border-gray-100 rounded-xl p-3 font-bold text-sm focus:border-[#10b981] outline-none text-center",dir:"ltr"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:":"}),T.jsx("input",{required:!0,value:Y.name,onChange:P=>W({...Y,name:P.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold outline-none focus:border-[#10b981]"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:":"}),T.jsx("select",{required:!0,value:Y.subject,onChange:P=>W({...Y,subject:P.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white",children:to.map(P=>T.jsx("option",{value:P,children:P},P))})]})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:"  (Bio):"}),T.jsxs("div",{className:"relative",children:[T.jsx("textarea",{value:Y.bio,onChange:P=>W({...Y,bio:P.target.value}),className:"w-full border-2 rounded-xl p-4 h-40 font-bold focus:border-[#10b981] outline-none resize-none"}),T.jsx("button",{type:"button",onClick:async()=>{if(!Y.bio)return alert("       .");gt(!0);try{await new Promise(P=>setTimeout(P,1500)),W({...Y,bio:"   : "+Y.bio})}catch(P){console.error(P),alert("      .    API.")}finally{gt(!1)}},className:"absolute bottom-4 left-4 bg-[#0a192f] text-white text-xs px-3 py-1.5 rounded-lg font-bold flex items-center gap-1 hover:bg-[#10b981] transition-all",disabled:Ct,children:Ct?"...":"  "})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:gs.map(P=>{var ae;return T.jsx("button",{type:"button",onClick:()=>{const le=Y.stages||[],pe=le.includes(P.id)?le.filter(de=>de!==P.id):[...le,P.id];W({...Y,stages:pe})},className:`px-3 py-1.5 rounded-lg text-sm font-bold border-2 transition-all ${(ae=Y.stages)!=null&&ae.includes(P.id)?"bg-[#10b981] text-white border-[#10b981]":"bg-gray-50 text-gray-400 border-gray-100"}`,children:P.name},P.id)})})]})]})]}),T.jsxs("div",{className:"mb-8 border-t pt-8",children:[T.jsx("h3",{className:"text-xl font-black text-[#0a192f] mb-6",children:"  (/) "}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:[t.filter(P=>{var ae;return(ae=Y.stages)==null?void 0:ae.includes(P.stage)}).map(P=>{var le,pe;const ae=(le=Y.grades)==null?void 0:le.includes(P.id);return T.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all ${ae?"border-[#10b981] bg-[#10b981]/5":"border-gray-100 bg-gray-50"}`,children:[T.jsx("div",{className:"flex items-center justify-between gap-2 mb-3",children:T.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[T.jsx("input",{type:"checkbox",checked:ae,onChange:()=>{const de=Y.grades||[],ye=ae?de.filter(ge=>ge!==P.id):[...de,P.id];W({...Y,grades:ye})},className:"w-5 h-5 accent-[#10b981] rounded-md"}),T.jsx("span",{className:`font-bold text-sm ${ae?"text-[#0a192f]":"text-gray-400"}`,children:P.name})]})}),ae&&T.jsx("div",{className:"animate-in slide-in-from-top-2",children:T.jsx("input",{type:"number",placeholder:" ",value:((pe=Y.hourlyRates)==null?void 0:pe[P.id])||"",onChange:de=>{const ye={...Y.hourlyRates||{}};ye[P.id]=parseFloat(de.target.value),W({...Y,hourlyRates:ye})},className:"w-full border rounded-lg p-2 text-sm font-bold focus:border-[#10b981] outline-none"})})]},P.id)}),t.filter(P=>{var ae;return(ae=Y.stages)==null?void 0:ae.includes(P.stage)}).length===0&&T.jsx("p",{className:"text-gray-400 font-bold col-span-full text-center py-4",children:"      ."})]})]}),T.jsx("button",{type:"submit",disabled:Ct,className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all shadow-xl active:scale-95 flex items-center justify-center gap-2",children:Ct?T.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):T.jsx("span",{children:"  "})})]})}),z&&T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:T.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-[2.5rem] p-8 md:p-12 shadow-2xl overflow-y-auto max-h-[90vh] animate-in zoom-in-95 border-t-8 border-[#f97316]",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8",children:[T.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),T.jsx("button",{onClick:()=>X(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 hover:bg-red-100 hover:text-red-500 transition-all font-black",children:""})]}),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full overflow-hidden",children:[T.jsxs("div",{className:"lg:col-span-8 flex flex-col h-full overflow-hidden bg-gray-50 rounded-[2.5rem] p-8 border border-gray-100 shadow-inner",children:[T.jsxs("div",{className:"flex items-center justify-between mb-8",children:[T.jsx("h3",{className:"font-black text-2xl text-[#0a192f]",children:"   "}),T.jsxs("div",{className:"flex gap-3",children:[T.jsxs("button",{onClick:()=>{const P={id:`m-${Date.now()}`,title:" ",url:"",type:"video"};X({...z,media:[...z.media,P]})},className:"bg-blue-100 text-blue-600 px-6 py-3 rounded-2xl font-black hover:bg-blue-500 hover:text-white transition-all flex items-center gap-2",children:[T.jsx("span",{children:"+"})," "]}),T.jsxs("button",{onClick:()=>{const P={id:`m-${Date.now()}`,title:" PDF ",url:"",type:"pdf"};X({...z,media:[...z.media,P]})},className:"bg-red-100 text-red-500 px-6 py-3 rounded-2xl font-black hover:bg-red-500 hover:text-white transition-all flex items-center gap-2",children:[T.jsx("span",{children:"+"}),"  PDF"]}),T.jsxs("button",{onClick:()=>{const P={id:`m-${Date.now()}`,title:" ",url:"",type:"image"};X({...z,media:[...z.media,P]})},className:"bg-green-100 text-green-600 px-6 py-3 rounded-2xl font-black hover:bg-green-500 hover:text-white transition-all flex items-center gap-2",children:[T.jsx("span",{children:"+"})," "]})]})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-4 pr-2",children:[z.media.map((P,ae)=>T.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 flex items-start gap-4 group hover:border-[#f97316] transition-all",children:[T.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gray-50 flex items-center justify-center text-3xl shrink-0",children:P.type==="video"?"":P.type==="pdf"?"":""}),T.jsxs("div",{className:"flex-1 space-y-3",children:[T.jsx("input",{placeholder:"  (:  )",value:P.title,onChange:le=>{const pe=z.media.map(de=>de.id===P.id?{...de,title:le.target.value}:de);X({...z,media:pe})},className:"w-full bg-[#334155] text-white placeholder-gray-400 p-3 rounded-xl font-bold text-sm outline-none border border-transparent focus:border-orange-500 transition-all"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{placeholder:P.type==="video"?"  (YouTube/)":" ",value:P.url,onChange:le=>{const pe=z.media.map(de=>de.id===P.id?{...de,url:le.target.value}:de);X({...z,media:pe})},className:"flex-1 bg-[#334155] text-white placeholder-gray-400 p-3 rounded-xl font-bold text-xs outline-none border border-transparent focus:border-orange-500 transition-all text-left",dir:"ltr"}),T.jsxs("div",{className:"relative overflow-hidden",children:[T.jsx("button",{className:"bg-gray-200 text-gray-600 px-4 py-3 rounded-xl font-bold text-xs hover:bg-gray-300 transition-all whitespace-nowrap",children:"  "}),T.jsx("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:async le=>{var de;const pe=(de=le.target.files)==null?void 0:de[0];if(pe){gt(!0);try{const ye=await Ri.uploadFile(pe,`courses/media/${z.id}`),ge=z.media.map(Ye=>Ye.id===P.id?{...Ye,url:ye}:Ye);X({...z,media:ge})}catch(ye){console.error(ye)}finally{gt(!1)}}}})]})]})]}),T.jsx("button",{onClick:()=>{confirm("  ")&&X({...z,media:z.media.filter(le=>le.id!==P.id)})},className:"w-10 h-10 bg-red-50 text-red-500 rounded-xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all self-center",children:""})]},P.id)),z.media.length===0&&T.jsx("div",{className:"text-center py-20 opacity-50",children:T.jsx("p",{className:"font-bold text-xl",children:"     "})})]})]}),T.jsxs("div",{className:"lg:col-span-4 space-y-6 overflow-y-auto custom-scrollbar",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("input",{value:z.title,onChange:P=>X({...z,title:P.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 font-black text-lg focus:ring-2 focus:ring-[#f97316] outline-none"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("textarea",{value:z.description,onChange:P=>X({...z,description:P.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 h-32 font-bold focus:ring-2 focus:ring-[#f97316] outline-none resize-none"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("select",{value:z.gradeId,onChange:P=>X({...z,gradeId:P.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 font-bold focus:ring-2 focus:ring-[#f97316] outline-none",children:t.map(P=>T.jsx("option",{value:P.id,children:P.name},P.id))})]}),T.jsxs("div",{className:"relative group cursor-pointer rounded-[2rem] overflow-hidden border-4 border-[#334155] hover:border-[#f97316] transition-all shadow-xl h-48",children:[T.jsx("img",{src:z.thumbnailUrl,className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-all",children:T.jsx("span",{className:"text-white font-black",children:"  "})}),T.jsx("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:async P=>{var le;const ae=(le=P.target.files)==null?void 0:le[0];if(ae){gt(!0);try{const pe=await Ri.uploadFile(ae,"course-thumbnails");X({...z,thumbnailUrl:pe})}catch{alert("    ")}finally{gt(!1)}}}})]}),T.jsx("input",{type:"text",placeholder:"     ...",value:z.thumbnailUrl,onChange:P=>X({...z,thumbnailUrl:P.target.value}),className:"w-full bg-[#334155] text-white border-2 border-[#1e293b] rounded-xl p-3 font-bold text-sm focus:border-[#f97316] outline-none text-left",dir:"ltr"}),T.jsx("button",{onClick:async()=>{gt(!0);try{const P=r.map(le=>le.id===z.id?z:le),ae=r.find(le=>le.id===z.id);ae&&ae.gradeId!==z.gradeId&&e(le=>le.map(pe=>pe.id===ae.gradeId?{...pe,courses:pe.courses.filter(de=>de!==z.id)}:pe.id===z.gradeId?{...pe,courses:Array.from(new Set([...pe.courses,z.id]))}:pe)),l(P),alert("  ! "),X(null)}catch(P){console.error(P)}finally{gt(!1)}},disabled:Ct,className:"w-full bg-[#f97316] text-white py-4 rounded-2xl font-black text-xl hover:bg-orange-600 transition-all shadow-xl active:scale-95",children:Ct?" ...":"  "})]})]})]})}),q&&T.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 text-center shadow-2xl border-t-8 border-red-500 animate-in zoom-in-95",children:[T.jsx("div",{className:"text-6xl mb-6",children:""}),T.jsx("h3",{className:"text-3xl font-black text-[#0a192f] mb-4",children:" "}),T.jsxs("p",{className:"text-gray-500 text-lg mb-4 font-bold",children:["     ",T.jsxs("span",{className:"text-red-500",children:['"',q.name,'"']})," ."]}),T.jsx("div",{className:"bg-red-50 p-4 rounded-2xl mb-8 border border-red-100",children:T.jsx("p",{className:"text-red-600 font-black text-sm",children:"        ."})}),T.jsxs("div",{className:"flex flex-col gap-3",children:[T.jsx("button",{onClick:()=>{const P=q.id;o(ae=>ae.filter(le=>le.id!==P)),l(ae=>ae.filter(le=>le.teacherId!==P)),e(ae=>ae.map(le=>({...le,teachers:le.teachers.filter(pe=>pe!==P)}))),se(null),alert(`   "${q.name}" .`)},className:"w-full bg-red-500 text-white py-5 rounded-2xl font-black text-xl hover:bg-red-600 transition-all active:scale-95 shadow-xl shadow-red-500/20",children:"   "}),T.jsx("button",{onClick:()=>se(null),className:"w-full bg-gray-100 text-gray-500 py-4 rounded-2xl font-black text-lg hover:bg-gray-200 transition-all",children:" "})]})]})}),S==="subjects"&&T.jsxs("div",{className:"animate-in fade-in space-y-8",children:[T.jsxs("div",{className:"flex justify-between items-center border-b pb-6",children:[T.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),T.jsxs("div",{className:"bg-orange-50 text-orange-600 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2",children:[T.jsx("span",{children:""}),"        "]})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:D.map((P,ae)=>{var le,pe;return T.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 shadow-xl border border-gray-100 hover:border-[#10b981] transition-all group",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[T.jsx("div",{className:"w-16 h-16 rounded-2xl bg-[#0a192f] text-white flex items-center justify-center text-3xl shadow-lg group-hover:scale-110 transition-transform",children:(le=gs.find(de=>de.id===P.stage))==null?void 0:le.icon}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-2xl font-black text-[#0a192f]",children:(pe=gs.find(de=>de.id===P.stage))==null?void 0:pe.name}),T.jsxs("p",{className:"text-gray-400 font-bold text-sm",children:[P.subjects.length,"  "]})]})]}),T.jsxs("div",{className:"flex flex-wrap gap-3",children:[P.subjects.map((de,ye)=>T.jsx("span",{className:"bg-gray-50 text-gray-600 px-4 py-2 rounded-xl font-bold border hover:bg-[#10b981] hover:text-white hover:border-[#10b981] transition-colors cursor-default",children:de},ye)),T.jsx("button",{onClick:()=>{const de=prompt("   :");if(de){const ye=[...D];ye[ae].subjects.push(de),N(ye)}},className:"bg-gray-100 text-gray-400 px-4 py-2 rounded-xl font-bold border-2 border-dashed border-gray-200 hover:border-[#10b981] hover:text-[#10b981] transition-all",children:"+ "})]})]},ae)})})]}),S==="settings"&&T.jsx("div",{className:"animate-in fade-in max-w-2xl mx-auto space-y-8",children:T.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-xl border border-gray-100",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[T.jsx("span",{className:"text-4xl",children:""}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"  "}),T.jsx("p",{className:"text-gray-400 font-bold text-sm",children:"   Google Sheets"})]})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2",children:" Webhook (Google Apps Script):"}),T.jsx("input",{type:"url",value:ri,onChange:P=>eo(P.target.value),placeholder:"https://script.google.com/macros/s/...",className:"w-full border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#10b981] transition-colors",dir:"ltr"}),T.jsxs("p",{className:"text-xs text-gray-400 mt-2 font-bold leading-relaxed",children:['*   Google Apps Script    Web App  "Anyone".',T.jsx("br",{}),"*     (     )       ."]})]}),T.jsxs("div",{className:"bg-blue-50 p-6 rounded-2xl border border-blue-100",children:[T.jsx("h4",{className:"font-black text-blue-800 mb-2 text-sm",children:" :"}),T.jsxs("ol",{className:"list-decimal list-inside text-sm text-blue-700 space-y-1 font-bold",children:[T.jsx("li",{children:"   ."}),T.jsxs("li",{children:["  Extensions ",">"," Apps Script."]}),T.jsxs("li",{children:["     ",T.jsx("code",{children:"sheetService.ts"}),"."]}),T.jsxs("li",{children:[" Deploy ",">"," New Deployment."]}),T.jsx("li",{children:" Web app   Access: Anyone."}),T.jsx("li",{children:"    ."})]})]}),T.jsx("div",{className:"flex gap-4 pt-4",children:T.jsx("button",{onClick:()=>{if(!ri)return alert("   ");localStorage.setItem("google_sheet_webhook_url",ri),alert("   !     .")},className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black hover:bg-[#10b981] transition-all shadow-xl active:scale-95",children:"  "})})]}),T.jsxs("div",{className:"mt-8 border-t pt-8",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[T.jsx("span",{className:"text-4xl",children:""}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"   (API Key)"}),T.jsx("p",{className:"text-gray-400 font-bold text-sm",children:" Gemini AI"})]})]}),T.jsx("div",{className:"space-y-4",children:T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2",children:"Gemini API Key:"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"password",value:f,onChange:P=>{g(P.target.value),localStorage.setItem("gemini_api_key",P.target.value)},placeholder:"AIzaSy...",className:"flex-1 border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#10b981] transition-colors",dir:"ltr"}),f&&T.jsx("button",{onClick:()=>{g(""),localStorage.removeItem("gemini_api_key")},className:"bg-red-50 text-red-500 px-4 rounded-xl font-bold hover:bg-red-100 transition-all",children:""})]}),T.jsxs("p",{className:"text-xs text-gray-400 mt-2 font-bold",children:["*        .",T.jsx("br",{}),"*       ."]})]})})]}),T.jsxs("div",{className:"mt-8 border-t pt-8",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[T.jsx("span",{className:"text-4xl",children:""}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"Claude API Key"}),T.jsx("p",{className:"text-gray-400 font-bold text-sm",children:" Anthropic Claude 3.5 Sonnet"})]})]}),T.jsx("div",{className:"space-y-4",children:T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2",children:"Anthropic API Key (sk-ant...):"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"password",value:p,onChange:P=>{_(P.target.value),localStorage.setItem("anthropic_api_key",P.target.value)},placeholder:"sk-ant-api...",className:"flex-1 border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#f97316] transition-colors",dir:"ltr"}),p&&T.jsx("button",{onClick:()=>{_(""),localStorage.removeItem("anthropic_api_key")},className:"bg-red-50 text-red-500 px-4 rounded-xl font-bold hover:bg-red-100 transition-all",children:""})]})]})})]})]})}),H&&T.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:T.jsxs("div",{className:"bg-white rounded-[2rem] p-8 max-w-md w-full shadow-2xl animate-in fade-in zoom-in-95",dir:"rtl",children:[T.jsxs("h3",{className:"text-2xl font-black text-[#0a192f] mb-4",children:[fe==="gemini"?"  Gemini":"  Claude"," "]}),T.jsxs("p",{className:"text-gray-500 mb-6 font-bold",children:["      API   ",fe==="gemini"?"Google Gemini":"Anthropic Claude","."]}),T.jsx("input",{type:"password",placeholder:fe==="gemini"?"AIzaSy...":"sk-ant-api...",className:"w-full border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#10b981] mb-6",autoFocus:!0,dir:"ltr",onChange:P=>{fe==="gemini"?(g(P.target.value),localStorage.setItem("gemini_api_key",P.target.value)):(_(P.target.value),localStorage.setItem("anthropic_api_key",P.target.value))}}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("button",{onClick:()=>ie(!1),className:"flex-1 bg-[#0a192f] text-white py-3 rounded-xl font-black hover:bg-[#10b981] transition-all",children:" "}),T.jsx("button",{onClick:()=>ie(!1),className:"px-6 py-3 rounded-xl font-bold text-gray-500 hover:bg-gray-100",children:""})]})]})})]})},kk=({teachers:t,onBack:e})=>{const[n,o]=_e.useState("all"),[r,l]=_e.useState(""),[u,f]=_e.useState(null),g=t.filter(p=>{var b;const _=n==="all"||((b=p.stages)==null?void 0:b.includes(n)),S=p.name.toLowerCase().includes(r.toLowerCase())||p.subject.toLowerCase().includes(r.toLowerCase());return _&&S});return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[u&&T.jsx(FT,{targetName:u,type:"",onClose:()=>f(null)}),T.jsxs("button",{onClick:e,className:"mb-8 text-gray-400 hover:text-[#0a192f] flex items-center gap-3 font-black text-lg transition-colors group",children:[T.jsx("span",{className:"bg-white p-3 rounded-2xl shadow-sm group-hover:-translate-x-2 transition-transform",children:""}),"  "]}),T.jsxs("div",{className:"text-center mb-16",children:[T.jsx("h1",{className:"text-5xl font-black text-[#0a192f] mb-4",children:"  "}),T.jsx("p",{className:"text-gray-500 text-xl font-medium",children:"      "})]}),T.jsxs("div",{className:"flex flex-col items-center gap-8 mb-16",children:[T.jsxs("div",{className:"relative w-full max-w-2xl group",children:[T.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-2xl group-focus-within:scale-110 transition-transform",children:""}),T.jsx("input",{type:"text",value:r,onChange:p=>l(p.target.value),placeholder:"     ...",className:"w-full bg-white border-2 border-gray-100 rounded-[2rem] py-6 pr-16 pl-8 text-xl font-bold shadow-xl shadow-gray-200/20 focus:border-[#10b981] focus:ring-4 focus:ring-[#10b981]/5 outline-none transition-all placeholder:text-gray-300"})]}),T.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[T.jsx("button",{onClick:()=>o("all"),className:`px-8 py-3 rounded-2xl font-black transition-all ${n==="all"?"bg-[#0a192f] text-white shadow-xl scale-105":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100"}`,children:""}),gs.map(p=>T.jsxs("button",{onClick:()=>o(p.id),className:`px-8 py-3 rounded-2xl font-black transition-all flex items-center gap-2 ${n===p.id?"bg-[#10b981] text-white shadow-xl scale-105":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100"}`,children:[T.jsx("span",{children:p.icon})," ",p.name]},p.id))]})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:[g.map(p=>T.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 shadow-xl border border-gray-100 hover:border-[#10b981] hover:-translate-y-2 transition-all group flex flex-col h-full",children:[T.jsxs("div",{className:"relative mb-6",children:[T.jsx("img",{src:p.imageUrl,className:"w-32 h-32 rounded-[2rem] mx-auto border-4 border-gray-50 shadow-md group-hover:scale-105 transition-transform object-cover",alt:p.name}),T.jsx("div",{className:"absolute -bottom-2 right-1/2 translate-x-1/2 bg-[#10b981] text-white px-4 py-1 rounded-full text-xs font-black shadow-lg whitespace-nowrap",children:p.subject})]}),T.jsxs("div",{className:"text-center flex-1 flex flex-col",children:[T.jsx("h3",{className:"text-2xl font-black text-[#0a192f] mb-2",children:p.name}),T.jsx("p",{className:"text-gray-400 text-sm font-medium mb-6 line-clamp-3 flex-1",children:p.bio||"   ."}),T.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl text-right space-y-2 mb-6",children:[T.jsx("div",{className:"text-xs font-black text-gray-400",children:" :"}),T.jsx("div",{className:"text-sm font-bold text-[#0a192f]",children:p.availability})]}),T.jsx("button",{onClick:()=>f(p.name),className:"block w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black hover:bg-[#10b981] transition-all shadow-lg active:scale-95",children:" "})]})]},p.id)),g.length===0&&T.jsxs("div",{className:"col-span-full py-20 text-center",children:[T.jsx("div",{className:"text-6xl mb-4",children:""}),T.jsx("h3",{className:"text-2xl font-black text-gray-400",children:"      "}),T.jsx("button",{onClick:()=>{l(""),o("all")},className:"mt-4 text-[#10b981] font-black hover:underline",children:"  "})]})]})]})},Lk=()=>{var M;const[t,e]=_e.useState("home"),[n,o]=_e.useState(!1),[r,l]=_e.useState(""),[u,f]=_e.useState(localStorage.getItem("gemini_api_key")||""),[g,p]=_e.useState(localStorage.getItem("anthropic_api_key")||""),[_,S]=_e.useState(null),[b,C]=_e.useState(null),[I,L]=_e.useState(_x),[k,Y]=_e.useState(yx),[W,z]=_e.useState(vx);_e.useEffect(()=>{(async()=>{const O=await Ri.loadData();if(O.grades&&O.grades.length>0&&L(O.grades),O.teachers&&O.teachers.length>0&&Y(O.teachers),O.courses&&O.courses.length>0&&z(O.courses),window.aistudio){const G=await window.aistudio.getKey();G&&(f(G),localStorage.setItem("gemini_api_key",G))}})()},[]);const X=U=>{U.preventDefault(),r==="55"?o(!0):alert("   !")},q=U=>{S(U),e("stages")},se=U=>{const O=I.find(G=>G.id===U);O&&(C(O),e("grade"))},D=async(U,O)=>{try{const G=await fp(O,u),V=I.map(Ne=>Ne.id===U?{...Ne,schedule:G}:Ne);L(V),await Ri.saveGrades(V)}catch(G){console.error("Voice Schedule Error:",G)}},N=async U=>{try{const O=await VE(U,u);if(O.length>0){const G=O.map(Ne=>({...Ne,id:Ne.id||`t-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,imageUrl:Ne.imageUrl||`https://ui-avatars.com/api/?name=${encodeURIComponent(Ne.name||"Teacher")}&background=random`})),V=[...k,...G];Y(V),await Ri.saveTeachers(V)}}catch(O){console.error("Voice Teacher Add Error:",O)}};return T.jsxs("div",{className:"min-h-screen pb-20 bg-gray-50 selection:bg-[#10b981] selection:text-white",children:[T.jsx(Tx,{onNavigate:U=>{e(U),S(null)},isAdmin:n}),n&&T.jsx(kE,{onUpdateSchedule:D,onAddTeacher:N,onNavigate:U=>{e(U),S(null)},grades:I,apiKey:u}),t==="home"&&T.jsxs("main",{children:[T.jsxs("section",{className:"relative bg-[#0a192f] text-white py-24 md:py-32 overflow-hidden",children:[T.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 flex flex-col items-center text-center",children:[T.jsx("div",{className:"mb-10 animate-in fade-in zoom-in duration-1000",children:T.jsx("img",{src:Gc,alt:"Logo",className:"w-48 md:w-64 h-auto drop-shadow-[0_0_30px_rgba(16,185,129,0.3)] mx-auto"})}),T.jsx("div",{className:"inline-block bg-[#10b981]/20 border border-[#10b981]/30 text-[#10b981] px-6 py-2 rounded-full font-black text-sm mb-8 animate-bounce",children:"     2025"}),T.jsxs("h1",{className:"text-5xl md:text-8xl font-black mb-8 leading-tight",children:["Educators Academy",T.jsx("br",{}),T.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#10b981] to-[#34d399]",children:"  "})]}),T.jsx("p",{className:"text-xl md:text-2xl text-gray-300 max-w-3xl mb-12 leading-relaxed font-bold",children:"              ."}),T.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[T.jsx("button",{onClick:()=>e("stages"),className:"bg-[#10b981] px-12 py-5 rounded-2xl font-black text-xl hover:bg-emerald-600 transition-all shadow-2xl shadow-emerald-500/20 active:scale-95",children:"  "}),T.jsx("a",{href:`https://wa.me/20${kl.phone}`,target:"_blank",className:"bg-white/5 backdrop-blur-xl border border-white/10 px-12 py-5 rounded-2xl font-black text-xl hover:bg-white/10 transition-all active:scale-95",children:" "})]})]}),T.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[#10b981] rounded-full blur-[180px] opacity-20 -mr-64 -mt-64"}),T.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-[#f97316] rounded-full blur-[180px] opacity-10 -ml-64 -mb-64"})]}),T.jsxs("section",{className:"py-24 max-w-7xl mx-auto px-4",children:[T.jsxs("div",{className:"text-right mb-16",children:[T.jsx("h2",{className:"text-5xl font-black mb-4 text-[#0a192f]",children:" "}),T.jsx("div",{className:"h-2 w-32 bg-gradient-to-r from-[#10b981] to-transparent rounded-full"})]}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:gs.map(U=>T.jsxs("div",{onClick:()=>q(U.id),className:"group bg-white p-12 rounded-[3rem] shadow-xl border-2 border-transparent hover:border-[#10b981] hover:-translate-y-3 transition-all cursor-pointer text-center relative overflow-hidden active:scale-95",children:[T.jsx("div",{className:"text-7xl mb-8 relative z-10 group-hover:scale-110 transition-transform duration-500",children:U.icon}),T.jsx("h3",{className:"text-3xl font-black text-[#0a192f] relative z-10",children:U.name})]},U.id))})]})]}),t==="stages"&&T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-20 animate-in fade-in slide-in-from-bottom-6",children:[T.jsxs("button",{onClick:()=>e("home"),className:"mb-10 text-gray-400 hover:text-[#0a192f] flex items-center gap-3 font-black text-lg transition-colors group",children:[T.jsx("span",{className:"bg-white p-3 rounded-2xl shadow-sm group-hover:-translate-x-2 transition-transform",children:""}),"  "]}),_?T.jsxs("div",{children:[T.jsxs("div",{className:"flex justify-between items-center mb-12",children:[T.jsx("button",{onClick:()=>S(null),className:"text-[#10b981] font-black hover:underline text-xl",children:"  "}),T.jsxs("h2",{className:"text-4xl font-black text-[#0a192f]",children:[" ",(M=gs.find(U=>U.id===_))==null?void 0:M.name]})]}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:I.filter(U=>U.stage===_).map(U=>T.jsx("div",{onClick:()=>se(U.id),className:"bg-white p-10 rounded-[2.5rem] shadow-xl hover:shadow-2xl hover:border-[#10b981] border-2 border-transparent transition-all cursor-pointer text-center group active:scale-95",children:T.jsx("h3",{className:"text-2xl font-black text-[#0a192f] leading-tight",children:U.name})},U.id))})]}):T.jsxs("div",{children:[T.jsx("h2",{className:"text-4xl font-black text-[#0a192f] mb-12 text-right",children:"  "}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:gs.map(U=>T.jsxs("div",{onClick:()=>S(U.id),className:"group bg-white p-12 rounded-[3rem] shadow-xl border-2 border-transparent hover:border-[#10b981] hover:-translate-y-3 transition-all cursor-pointer text-center active:scale-95",children:[T.jsx("div",{className:"text-7xl mb-8",children:U.icon}),T.jsx("h3",{className:"text-3xl font-black text-[#0a192f]",children:U.name})]},U.id))})]})]}),t==="grade"&&b&&T.jsx(Sx,{grade:b,teachers:k,courses:W,onBack:()=>e("stages")}),t==="teachers"&&T.jsx(kk,{teachers:k,onBack:()=>e("home")}),t==="admin"&&(n?T.jsx(Vk,{grades:I,setGrades:L,teachers:k,setTeachers:Y,courses:W,setCourses:z,onLogout:()=>o(!1),apiKey:u,setApiKey:f,anthropicApiKey:g,setAnthropicApiKey:p}):T.jsx("div",{className:"min-h-[80vh] flex items-center justify-center p-4",children:T.jsxs("form",{onSubmit:X,className:"bg-white p-12 rounded-[3rem] shadow-2xl w-full max-w-md text-center border-t-8 border-[#0a192f]",children:[T.jsx("img",{src:Gc,alt:"Logo",className:"w-24 h-auto mx-auto mb-6"}),T.jsx("h2",{className:"text-4xl font-black text-[#0a192f] mb-8",children:"  "}),T.jsx("input",{type:"password",value:r,onChange:U=>l(U.target.value),placeholder:" ",className:"w-full border-2 rounded-2xl p-4 mb-6 font-bold text-center text-lg focus:border-[#10b981] outline-none transition-all"}),T.jsx("button",{type:"submit",className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all shadow-lg active:scale-95",children:"  "})]})}))]})},Nb=document.getElementById("root");if(!Nb)throw new Error("Could not find root element to mount to");const Ok=mx.createRoot(Nb);Ok.render(T.jsx(ax.StrictMode,{children:T.jsx(Lk,{})}));
