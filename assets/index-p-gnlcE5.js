(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function WT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Oh={exports:{}},wl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function TA(){if(r_)return wl;r_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:t,type:o,key:u,ref:r!==void 0?r:null,props:l}}return wl.Fragment=e,wl.jsx=n,wl.jsxs=n,wl}var a_;function EA(){return a_||(a_=1,Oh.exports=TA()),Oh.exports}var T=EA(),Bh={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function SA(){if(l_)return ke;l_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=b&&H[b]||H["@@iterator"],typeof H=="function"?H:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,U={};function j(H,ie,fe){this.props=H,this.context=ie,this.refs=U,this.updater=fe||I}j.prototype.isReactComponent={},j.prototype.setState=function(H,ie){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ie,"setState")},j.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function W(){}W.prototype=j.prototype;function z(H,ie,fe){this.props=H,this.context=ie,this.refs=U,this.updater=fe||I}var X=z.prototype=new W;X.constructor=z,L(X,j.prototype),X.isPureReactComponent=!0;var G=Array.isArray;function se(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function M(H,ie,fe){var Te=fe.ref;return{$$typeof:t,type:H,key:ie,ref:Te!==void 0?Te:null,props:fe}}function P(H,ie){return M(H.type,ie,H.props)}function O(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function q(H){var ie={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(fe){return ie[fe]})}var k=/\/+/g;function Me(H,ie){return typeof H=="object"&&H!==null&&H.key!=null?q(""+H.key):ie.toString(36)}function rt(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(se,se):(H.status="pending",H.then(function(ie){H.status==="pending"&&(H.status="fulfilled",H.value=ie)},function(ie){H.status==="pending"&&(H.status="rejected",H.reason=ie)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function te(H,ie,fe,Te,Re){var De=typeof H;(De==="undefined"||De==="boolean")&&(H=null);var Be=!1;if(H===null)Be=!0;else switch(De){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(H.$$typeof){case t:case e:Be=!0;break;case _:return Be=H._init,te(Be(H._payload),ie,fe,Te,Re)}}if(Be)return Re=Re(H),Be=Te===""?"."+Me(H,0):Te,G(Re)?(fe="",Be!=null&&(fe=Be.replace(k,"$&/")+"/"),te(Re,ie,fe,"",function(mn){return mn})):Re!=null&&(O(Re)&&(Re=P(Re,fe+(Re.key==null||H&&H.key===Re.key?"":(""+Re.key).replace(k,"$&/")+"/")+Be)),ie.push(Re)),1;Be=0;var Ht=Te===""?".":Te+":";if(G(H))for(var lt=0;lt<H.length;lt++)Te=H[lt],De=Ht+Me(Te,lt),Be+=te(Te,ie,fe,De,Re);else if(lt=w(H),typeof lt=="function")for(H=lt.call(H),lt=0;!(Te=H.next()).done;)Te=Te.value,De=Ht+Me(Te,lt++),Be+=te(Te,ie,fe,De,Re);else if(De==="object"){if(typeof H.then=="function")return te(rt(H),ie,fe,Te,Re);throw ie=String(H),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Be}function me(H,ie,fe){if(H==null)return H;var Te=[],Re=0;return te(H,Te,"","",function(De){return ie.call(fe,De,Re++)}),Te}function Ee(H){if(H._status===-1){var ie=H._result;ie=ie(),ie.then(function(fe){(H._status===0||H._status===-1)&&(H._status=1,H._result=fe)},function(fe){(H._status===0||H._status===-1)&&(H._status=2,H._result=fe)}),H._status===-1&&(H._status=0,H._result=ie)}if(H._status===1)return H._result.default;throw H._result}var Oe=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},je={map:me,forEach:function(H,ie,fe){me(H,function(){ie.apply(this,arguments)},fe)},count:function(H){var ie=0;return me(H,function(){ie++}),ie},toArray:function(H){return me(H,function(ie){return ie})||[]},only:function(H){if(!O(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ke.Activity=E,ke.Children=je,ke.Component=j,ke.Fragment=n,ke.Profiler=r,ke.PureComponent=z,ke.StrictMode=o,ke.Suspense=g,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ke.__COMPILER_RUNTIME={__proto__:null,c:function(H){return D.H.useMemoCache(H)}},ke.cache=function(H){return function(){return H.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(H,ie,fe){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Te=L({},H.props),Re=H.key;if(ie!=null)for(De in ie.key!==void 0&&(Re=""+ie.key),ie)!N.call(ie,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ie.ref===void 0||(Te[De]=ie[De]);var De=arguments.length-2;if(De===1)Te.children=fe;else if(1<De){for(var Be=Array(De),Ht=0;Ht<De;Ht++)Be[Ht]=arguments[Ht+2];Te.children=Be}return M(H.type,Re,Te)},ke.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},ke.createElement=function(H,ie,fe){var Te,Re={},De=null;if(ie!=null)for(Te in ie.key!==void 0&&(De=""+ie.key),ie)N.call(ie,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Re[Te]=ie[Te]);var Be=arguments.length-2;if(Be===1)Re.children=fe;else if(1<Be){for(var Ht=Array(Be),lt=0;lt<Be;lt++)Ht[lt]=arguments[lt+2];Re.children=Ht}if(H&&H.defaultProps)for(Te in Be=H.defaultProps,Be)Re[Te]===void 0&&(Re[Te]=Be[Te]);return M(H,De,Re)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(H){return{$$typeof:f,render:H}},ke.isValidElement=O,ke.lazy=function(H){return{$$typeof:_,_payload:{_status:-1,_result:H},_init:Ee}},ke.memo=function(H,ie){return{$$typeof:h,type:H,compare:ie===void 0?null:ie}},ke.startTransition=function(H){var ie=D.T,fe={};D.T=fe;try{var Te=H(),Re=D.S;Re!==null&&Re(fe,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(se,Oe)}catch(De){Oe(De)}finally{ie!==null&&fe.types!==null&&(ie.types=fe.types),D.T=ie}},ke.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ke.use=function(H){return D.H.use(H)},ke.useActionState=function(H,ie,fe){return D.H.useActionState(H,ie,fe)},ke.useCallback=function(H,ie){return D.H.useCallback(H,ie)},ke.useContext=function(H){return D.H.useContext(H)},ke.useDebugValue=function(){},ke.useDeferredValue=function(H,ie){return D.H.useDeferredValue(H,ie)},ke.useEffect=function(H,ie){return D.H.useEffect(H,ie)},ke.useEffectEvent=function(H){return D.H.useEffectEvent(H)},ke.useId=function(){return D.H.useId()},ke.useImperativeHandle=function(H,ie,fe){return D.H.useImperativeHandle(H,ie,fe)},ke.useInsertionEffect=function(H,ie){return D.H.useInsertionEffect(H,ie)},ke.useLayoutEffect=function(H,ie){return D.H.useLayoutEffect(H,ie)},ke.useMemo=function(H,ie){return D.H.useMemo(H,ie)},ke.useOptimistic=function(H,ie){return D.H.useOptimistic(H,ie)},ke.useReducer=function(H,ie,fe){return D.H.useReducer(H,ie,fe)},ke.useRef=function(H){return D.H.useRef(H)},ke.useState=function(H){return D.H.useState(H)},ke.useSyncExternalStore=function(H,ie,fe){return D.H.useSyncExternalStore(H,ie,fe)},ke.useTransition=function(){return D.H.useTransition()},ke.version="19.2.4",ke}var u_;function Jm(){return u_||(u_=1,Bh.exports=SA()),Bh.exports}var ve=Jm();const bA=WT(ve);var qh={exports:{}},Cl={},Gh={exports:{}},Fh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function xA(){return c_||(c_=1,(function(t){function e(te,me){var Ee=te.length;te.push(me);e:for(;0<Ee;){var Oe=Ee-1>>>1,je=te[Oe];if(0<r(je,me))te[Oe]=me,te[Ee]=je,Ee=Oe;else break e}}function n(te){return te.length===0?null:te[0]}function o(te){if(te.length===0)return null;var me=te[0],Ee=te.pop();if(Ee!==me){te[0]=Ee;e:for(var Oe=0,je=te.length,H=je>>>1;Oe<H;){var ie=2*(Oe+1)-1,fe=te[ie],Te=ie+1,Re=te[Te];if(0>r(fe,Ee))Te<je&&0>r(Re,fe)?(te[Oe]=Re,te[Te]=Ee,Oe=Te):(te[Oe]=fe,te[ie]=Ee,Oe=ie);else if(Te<je&&0>r(Re,Ee))te[Oe]=Re,te[Te]=Ee,Oe=Te;else break e}}return me}function r(te,me){var Ee=te.sortIndex-me.sortIndex;return Ee!==0?Ee:te.id-me.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var g=[],h=[],_=1,E=null,b=3,w=!1,I=!1,L=!1,U=!1,j=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function X(te){for(var me=n(h);me!==null;){if(me.callback===null)o(h);else if(me.startTime<=te)o(h),me.sortIndex=me.expirationTime,e(g,me);else break;me=n(h)}}function G(te){if(L=!1,X(te),!I)if(n(g)!==null)I=!0,se||(se=!0,q());else{var me=n(h);me!==null&&rt(G,me.startTime-te)}}var se=!1,D=-1,N=5,M=-1;function P(){return U?!0:!(t.unstable_now()-M<N)}function O(){if(U=!1,se){var te=t.unstable_now();M=te;var me=!0;try{e:{I=!1,L&&(L=!1,W(D),D=-1),w=!0;var Ee=b;try{t:{for(X(te),E=n(g);E!==null&&!(E.expirationTime>te&&P());){var Oe=E.callback;if(typeof Oe=="function"){E.callback=null,b=E.priorityLevel;var je=Oe(E.expirationTime<=te);if(te=t.unstable_now(),typeof je=="function"){E.callback=je,X(te),me=!0;break t}E===n(g)&&o(g),X(te)}else o(g);E=n(g)}if(E!==null)me=!0;else{var H=n(h);H!==null&&rt(G,H.startTime-te),me=!1}}break e}finally{E=null,b=Ee,w=!1}me=void 0}}finally{me?q():se=!1}}}var q;if(typeof z=="function")q=function(){z(O)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,Me=k.port2;k.port1.onmessage=O,q=function(){Me.postMessage(null)}}else q=function(){j(O,0)};function rt(te,me){D=j(function(){te(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(te){switch(b){case 1:case 2:case 3:var me=3;break;default:me=b}var Ee=b;b=me;try{return te()}finally{b=Ee}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(te,me){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ee=b;b=te;try{return me()}finally{b=Ee}},t.unstable_scheduleCallback=function(te,me,Ee){var Oe=t.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Oe+Ee:Oe):Ee=Oe,te){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=Ee+je,te={id:_++,callback:me,priorityLevel:te,startTime:Ee,expirationTime:je,sortIndex:-1},Ee>Oe?(te.sortIndex=Ee,e(h,te),n(g)===null&&te===n(h)&&(L?(W(D),D=-1):L=!0,rt(G,Ee-Oe))):(te.sortIndex=je,e(g,te),I||w||(I=!0,se||(se=!0,q()))),te},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(te){var me=b;return function(){var Ee=b;b=me;try{return te.apply(this,arguments)}finally{b=Ee}}}})(Fh)),Fh}var d_;function AA(){return d_||(d_=1,Gh.exports=xA()),Gh.exports}var Hh={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function wA(){if(f_)return yn;f_=1;var t=Jm();function e(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,h,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:g,containerInfo:h,implementation:_}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,yn.createPortal=function(g,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(g,h,null,_)},yn.flushSync=function(g){var h=u.T,_=o.p;try{if(u.T=null,o.p=2,g)return g()}finally{u.T=h,o.p=_,o.d.f()}},yn.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,o.d.C(g,h))},yn.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},yn.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var _=h.as,E=f(_,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?o.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:w}):_==="script"&&o.d.X(g,{crossOrigin:E,integrity:b,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},yn.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=f(h.as,h.crossOrigin);o.d.M(g,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&o.d.M(g)},yn.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,E=f(_,h.crossOrigin);o.d.L(g,_,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},yn.preloadModule=function(g,h){if(typeof g=="string")if(h){var _=f(h.as,h.crossOrigin);o.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else o.d.m(g)},yn.requestFormReset=function(g){o.d.r(g)},yn.unstable_batchedUpdates=function(g,h){return g(h)},yn.useFormState=function(g,h,_){return u.H.useFormState(g,h,_)},yn.useFormStatus=function(){return u.H.useHostTransitionStatus()},yn.version="19.2.4",yn}var h_;function CA(){if(h_)return Hh.exports;h_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hh.exports=wA(),Hh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function RA(){if(m_)return Cl;m_=1;var t=AA(),e=Jm(),n=CA();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(o(188))}function h(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(o(188));return s!==i?null:i}for(var a=i,c=s;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),i;if(v===c)return g(y),s;v=v.sibling}throw Error(o(188))}if(a.return!==c.return)a=y,c=v;else{for(var x=!1,C=y.child;C;){if(C===a){x=!0,a=y,c=v;break}if(C===c){x=!0,c=y,a=v;break}C=C.sibling}if(!x){for(C=v.child;C;){if(C===a){x=!0,a=v,c=y;break}if(C===c){x=!0,c=v,a=y;break}C=C.sibling}if(!x)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:s}function _(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=_(i),s!==null)return s;i=i.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),z=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var k=Symbol.for("react.client.reference");function Me(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===k?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case L:return"Fragment";case j:return"Profiler";case U:return"StrictMode";case G:return"Suspense";case se:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case z:return i.displayName||"Context";case W:return(i._context.displayName||"Context")+".Consumer";case X:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:Me(i.type)||"Memo";case N:s=i._payload,i=i._init;try{return Me(i(s))}catch{}}return null}var rt=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Oe=[],je=-1;function H(i){return{current:i}}function ie(i){0>je||(i.current=Oe[je],Oe[je]=null,je--)}function fe(i,s){je++,Oe[je]=i.current,i.current=s}var Te=H(null),Re=H(null),De=H(null),Be=H(null);function Ht(i,s){switch(fe(De,s),fe(Re,i),fe(Te,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Iv(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Iv(s),i=Nv(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ie(Te),fe(Te,i)}function lt(){ie(Te),ie(Re),ie(De)}function mn(i){i.memoizedState!==null&&fe(Be,i);var s=Te.current,a=Nv(s,i.type);s!==a&&(fe(Re,i),fe(Te,a))}function Dn(i){Re.current===i&&(ie(Te),ie(Re)),Be.current===i&&(ie(Be),Sl._currentValue=Ee)}var eo,Pi;function Pn(i){if(eo===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);eo=s&&s[1]||"",Pi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+eo+i+Pi}var Po=!1;function Ms(i,s){if(!i||Po)return"";Po=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Z){var Q=Z}Reflect.construct(i,[],re)}else{try{re.call()}catch(Z){Q=Z}i.call(re.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(re=i())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),x=v[0],C=v[1];if(x&&C){var B=x.split(`
`),$=C.split(`
`);for(y=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;if(c===B.length||y===$.length)for(c=B.length-1,y=$.length-1;1<=c&&0<=y&&B[c]!==$[y];)y--;for(;1<=c&&0<=y;c--,y--)if(B[c]!==$[y]){if(c!==1||y!==1)do if(c--,y--,0>y||B[c]!==$[y]){var ne=`
`+B[c].replace(" at new "," at ");return i.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",i.displayName)),ne}while(1<=c&&0<=y);break}}}finally{Po=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Pn(a):""}function $t(i,s){switch(i.tag){case 26:case 27:case 5:return Pn(i.type);case 16:return Pn("Lazy");case 13:return i.child!==s&&s!==null?Pn("Suspense Fallback"):Pn("Suspense");case 19:return Pn("SuspenseList");case 0:case 15:return Ms(i.type,!1);case 11:return Ms(i.type.render,!1);case 1:return Ms(i.type,!0);case 31:return Pn("Activity");default:return""}}function xt(i){try{var s="",a=null;do s+=$t(i,a),a=i,i=i.return;while(i);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ui=Object.prototype.hasOwnProperty,ki=t.unstable_scheduleCallback,si=t.unstable_cancelCallback,Ma=t.unstable_shouldYield,We=t.unstable_requestPaint,Et=t.unstable_now,to=t.unstable_getCurrentPriorityLevel,Rt=t.unstable_ImmediatePriority,Dt=t.unstable_UserBlockingPriority,ri=t.unstable_NormalPriority,Ds=t.unstable_LowPriority,no=t.unstable_IdlePriority,vr=t.log,Vi=t.unstable_setDisableYieldValue,Ze=null,At=null;function on(i){if(typeof vr=="function"&&Vi(i),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Ze,i)}catch{}}var Qt=Math.clz32?Math.clz32:Da,au=Math.log,_r=Math.LN2;function Da(i){return i>>>=0,i===0?32:31-(au(i)/_r|0)|0}var Uo=256,bn=262144,Ei=4194304;function jn(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Un(i,s,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,v=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var C=c&134217727;return C!==0?(c=C&~v,c!==0?y=jn(c):(x&=C,x!==0?y=jn(x):a||(a=C&~i,a!==0&&(y=jn(a))))):(C=c&~v,C!==0?y=jn(C):x!==0?y=jn(x):a||(a=c&~i,a!==0&&(y=jn(a)))),y===0?0:s!==0&&s!==y&&(s&v)===0&&(v=y&-y,a=s&-s,v>=a||v===32&&(a&4194048)!==0)?s:y}function Li(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function ko(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ps(){var i=Ei;return Ei<<=1,(Ei&62914560)===0&&(Ei=4194304),i}function Si(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function Oi(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function zt(i,s,a,c,y,v){var x=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var C=i.entanglements,B=i.expirationTimes,$=i.hiddenUpdates;for(a=x&~a;0<a;){var ne=31-Qt(a),re=1<<ne;C[ne]=0,B[ne]=-1;var Q=$[ne];if(Q!==null)for($[ne]=null,ne=0;ne<Q.length;ne++){var Z=Q[ne];Z!==null&&(Z.lane&=-536870913)}a&=~re}c!==0&&Vo(i,c,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(x&~s))}function Vo(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-Qt(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function V(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var c=31-Qt(a),y=1<<c;y&s|i[c]&s&&(i[c]|=s),a&=~y}}function ae(i,s){var a=s&-s;return a=(a&42)!==0?1:le(a),(a&(i.suspendedLanes|s))!==0?0:a}function le(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function he(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ue(){var i=me.p;return i!==0?i:(i=window.event,i===void 0?32:Zv(i.type))}function ge(i,s){var a=me.p;try{return me.p=i,s()}finally{me.p=a}}var ye=Math.random().toString(36).slice(2),Ce="__reactFiber$"+ye,et="__reactProps$"+ye,Yn="__reactContainer$"+ye,bi="__reactEvents$"+ye,pn="__reactListeners$"+ye,Bi="__reactHandles$"+ye,Tr="__reactResources$"+ye,ai="__reactMarker$"+ye;function Us(i){delete i[Ce],delete i[et],delete i[bi],delete i[pn],delete i[Bi]}function io(i){var s=i[Ce];if(s)return s;for(var a=i.parentNode;a;){if(s=a[Yn]||a[Ce]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=Lv(i);i!==null;){if(a=i[Ce])return a;i=Lv(i)}return s}i=a,a=i.parentNode}return null}function oo(i){if(i=i[Ce]||i[Yn]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function ks(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function xi(i){var s=i[Tr];return s||(s=i[Tr]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Pt(i){i[ai]=!0}var Er=new Set,Lo={};function xn(i,s){qi(i,s),qi(i+"Capture",s)}function qi(i,s){for(Lo[i]=s,i=0;i<s.length;i++)Er.add(s[i])}var Od=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pa={},Ua={};function lu(i){return Ui.call(Ua,i)?!0:Ui.call(Pa,i)?!1:Od.test(i)?Ua[i]=!0:(Pa[i]=!0,!1)}function Oo(i,s,a){if(lu(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function Bo(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function li(i,s,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+c)}}function An(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function uu(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Bd(i,s,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return y.call(this)},set:function(x){a=""+x,v.call(this,x)}}),Object.defineProperty(i,s,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Sr(i){if(!i._valueTracker){var s=uu(i)?"checked":"value";i._valueTracker=Bd(i,s,""+i[s])}}function ka(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return i&&(c=uu(i)?i.checked?"true":"false":i.value),i=c,i!==a?(s.setValue(i),!0):!1}function br(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var so=/[\n"\\]/g;function It(i){return i.replace(so,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function qo(i,s,a,c,y,v,x,C){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),s!=null?x==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+An(s)):i.value!==""+An(s)&&(i.value=""+An(s)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),s!=null?xr(i,x,An(s)):a!=null?xr(i,x,An(a)):c!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+An(C):i.removeAttribute("name")}function Vs(i,s,a,c,y,v,x,C){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){Sr(i);return}a=a!=null?""+An(a):"",s=s!=null?""+An(s):a,C||s===i.value||(i.value=s),i.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=C?i.checked:!!c,i.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x),Sr(i)}function xr(i,s,a){s==="number"&&br(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function tt(i,s,a,c){if(i=i.options,s){s={};for(var y=0;y<a.length;y++)s["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=s.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+An(a),s=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}s!==null||i[y].disabled||(s=i[y])}s!==null&&(s.selected=!0)}}function Ls(i,s,a){if(s!=null&&(s=""+An(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+An(a):""}function Go(i,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(o(92));if(rt(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=An(s),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),Sr(i)}function ui(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var qd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Va(i,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,a):typeof a!="number"||a===0||qd.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function cu(i,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&a[y]!==c&&Va(i,y,c)}else for(var v in s)s.hasOwnProperty(v)&&Va(i,v,s[v])}function La(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gi(i){return Fd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Xt(){}var Ar=null;function wr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ro=null,Jn=null;function du(i){var s=oo(i);if(s&&(i=s.stateNode)){var a=i[et]||null;e:switch(i=s.stateNode,s.type){case"input":if(qo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+It(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==i&&c.form===i.form){var y=c[et]||null;if(!y)throw Error(o(90));qo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===i.form&&ka(c)}break e;case"textarea":Ls(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&tt(i,!!a.multiple,s,!1)}}}var Oa=!1;function fu(i,s,a){if(Oa)return i(s,a);Oa=!0;try{var c=i(s);return c}finally{if(Oa=!1,(ro!==null||Jn!==null)&&(lc(),ro&&(s=ro,i=Jn,Jn=ro=null,du(s),i)))for(s=0;s<i.length;s++)du(i[s])}}function kn(i,s){var a=i.stateNode;if(a===null)return null;var c=a[et]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=!1;if(Ai)try{var Fi={};Object.defineProperty(Fi,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch{Ba=!1}var Kn=null,Cr=null,Hi=null;function Fo(){if(Hi)return Hi;var i,s=Cr,a=s.length,c,y="value"in Kn?Kn.value:Kn.textContent,v=y.length;for(i=0;i<a&&s[i]===y[i];i++);var x=a-i;for(c=1;c<=x&&s[a-c]===y[v-c];c++);return Hi=y.slice(i,1<c?1-c:void 0)}function Os(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Ho(){return!0}function yt(){return!1}function gn(i){function s(a,c,y,v,x){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=x,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(a=i[C],this[C]=a?a(v):v[C]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ho:yt,this.isPropagationStopped=yt,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),s}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bs=gn(ao),zo=E({},ao,{view:0,detail:0}),hu=gn(zo),jo,Rr,wn,qs=E({},zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==wn&&(wn&&i.type==="mousemove"?(jo=i.screenX-wn.screenX,Rr=i.screenY-wn.screenY):Rr=jo=0,wn=i),jo)},movementY:function(i){return"movementY"in i?i.movementY:Rr}}),mu=gn(qs),Gs=E({},qs,{dataTransfer:0}),pu=gn(Gs),qa=E({},zo,{relatedTarget:0}),Yo=gn(qa),gu=E({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),Ir=gn(gu),Hd=E({},ao,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),yu=gn(Hd),Fs=E({},ao,{data:0}),Ga=gn(Fs),vu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ha={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _u(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Ha[i])?!!s[i]:!1}function Jo(){return _u}var Tu=E({},zo,{key:function(i){if(i.key){var s=vu[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Os(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Fa[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jo,charCode:function(i){return i.type==="keypress"?Os(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Os(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Eu=gn(Tu),lo=E({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),za=gn(lo),Su=E({},zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jo}),bu=gn(Su),xu=E({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nr=gn(xu),Cn=E({},qs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Au=gn(Cn),wu=E({},ao,{newState:0,oldState:0}),Ko=gn(wu),p=[9,13,27,32],S=Ai&&"CompositionEvent"in window,A=null;Ai&&"documentMode"in document&&(A=document.documentMode);var R=Ai&&"TextEvent"in window&&!A,J=Ai&&(!S||A&&8<A&&11>=A),ee=" ",pe=!1;function ut(i,s){switch(i){case"keyup":return p.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fe=!1;function Wt(i,s){switch(i){case"compositionend":return Lt(s);case"keypress":return s.which!==32?null:(pe=!0,ee);case"textInput":return i=s.data,i===ee&&pe?null:i;default:return null}}function Zt(i,s){if(Fe)return i==="compositionend"||!S&&ut(i,s)?(i=Fo(),Hi=Cr=Kn=null,Fe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return J&&s.locale!=="ko"?null:s.data;default:return null}}var $o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!$o[i.type]:s==="textarea"}function Hs(i,s,a,c){ro?Jn?Jn.push(c):Jn=[c]:ro=c,s=pc(s,"onChange"),0<s.length&&(a=new Bs("onChange","change",null,a,c),i.push({event:a,listeners:s}))}var uo=null,ja=null;function Jb(i){bv(i,0)}function Cu(i){var s=ks(i);if(ka(s))return i}function Fp(i,s){if(i==="change")return s}var Hp=!1;if(Ai){var zd;if(Ai){var jd="oninput"in document;if(!jd){var zp=document.createElement("div");zp.setAttribute("oninput","return;"),jd=typeof zp.oninput=="function"}zd=jd}else zd=!1;Hp=zd&&(!document.documentMode||9<document.documentMode)}function jp(){uo&&(uo.detachEvent("onpropertychange",Yp),ja=uo=null)}function Yp(i){if(i.propertyName==="value"&&Cu(ja)){var s=[];Hs(s,ja,i,wr(i)),fu(Jb,s)}}function Kb(i,s,a){i==="focusin"?(jp(),uo=s,ja=a,uo.attachEvent("onpropertychange",Yp)):i==="focusout"&&jp()}function $b(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Cu(ja)}function Qb(i,s){if(i==="click")return Cu(s)}function Xb(i,s){if(i==="input"||i==="change")return Cu(s)}function Wb(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var $n=typeof Object.is=="function"?Object.is:Wb;function Ya(i,s){if($n(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!Ui.call(s,y)||!$n(i[y],s[y]))return!1}return!0}function Jp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Kp(i,s){var a=Jp(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=s&&c>=s)return{node:a,offset:s-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Jp(a)}}function $p(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?$p(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Qp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=br(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=br(i.document)}return s}function Yd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var Zb=Ai&&"documentMode"in document&&11>=document.documentMode,Mr=null,Jd=null,Ja=null,Kd=!1;function Xp(i,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Kd||Mr==null||Mr!==br(c)||(c=Mr,"selectionStart"in c&&Yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ja&&Ya(Ja,c)||(Ja=c,c=pc(Jd,"onSelect"),0<c.length&&(s=new Bs("onSelect","select",null,s,a),i.push({event:s,listeners:c}),s.target=Mr)))}function zs(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var Dr={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionrun:zs("Transition","TransitionRun"),transitionstart:zs("Transition","TransitionStart"),transitioncancel:zs("Transition","TransitionCancel"),transitionend:zs("Transition","TransitionEnd")},$d={},Wp={};Ai&&(Wp=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function js(i){if($d[i])return $d[i];if(!Dr[i])return i;var s=Dr[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in Wp)return $d[i]=s[a];return i}var Zp=js("animationend"),eg=js("animationiteration"),tg=js("animationstart"),ex=js("transitionrun"),tx=js("transitionstart"),nx=js("transitioncancel"),ng=js("transitionend"),ig=new Map,Qd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qd.push("scrollEnd");function wi(i,s){ig.set(i,s),xn(s,[i])}var Ru=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ci=[],Pr=0,Xd=0;function Iu(){for(var i=Pr,s=Xd=Pr=0;s<i;){var a=ci[s];ci[s++]=null;var c=ci[s];ci[s++]=null;var y=ci[s];ci[s++]=null;var v=ci[s];if(ci[s++]=null,c!==null&&y!==null){var x=c.pending;x===null?y.next=y:(y.next=x.next,x.next=y),c.pending=y}v!==0&&og(a,y,v)}}function Nu(i,s,a,c){ci[Pr++]=i,ci[Pr++]=s,ci[Pr++]=a,ci[Pr++]=c,Xd|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Wd(i,s,a,c){return Nu(i,s,a,c),Mu(i)}function Ys(i,s){return Nu(i,null,null,s),Mu(i)}function og(i,s,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&s!==null&&(y=31-Qt(a),i=v.hiddenUpdates,c=i[y],c===null?i[y]=[s]:c.push(s),s.lane=a|536870912),v):null}function Mu(i){if(50<pl)throw pl=0,lh=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Ur={};function ix(i,s,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(i,s,a,c){return new ix(i,s,a,c)}function Zd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function co(i,s){var a=i.alternate;return a===null?(a=Qn(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function sg(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Du(i,s,a,c,y,v){var x=0;if(c=i,typeof i=="function")Zd(i)&&(x=1);else if(typeof i=="string")x=lA(i,a,Te.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=Qn(31,a,s,y),i.elementType=M,i.lanes=v,i;case L:return Js(a.children,y,v,s);case U:x=8,y|=24;break;case j:return i=Qn(12,a,s,y|2),i.elementType=j,i.lanes=v,i;case G:return i=Qn(13,a,s,y),i.elementType=G,i.lanes=v,i;case se:return i=Qn(19,a,s,y),i.elementType=se,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case z:x=10;break e;case W:x=9;break e;case X:x=11;break e;case D:x=14;break e;case N:x=16,c=null;break e}x=29,a=Error(o(130,i===null?"null":typeof i,"")),c=null}return s=Qn(x,a,s,y),s.elementType=i,s.type=c,s.lanes=v,s}function Js(i,s,a,c){return i=Qn(7,i,c,s),i.lanes=a,i}function ef(i,s,a){return i=Qn(6,i,null,s),i.lanes=a,i}function rg(i){var s=Qn(18,null,null,0);return s.stateNode=i,s}function tf(i,s,a){return s=Qn(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var ag=new WeakMap;function di(i,s){if(typeof i=="object"&&i!==null){var a=ag.get(i);return a!==void 0?a:(s={value:i,source:s,stack:xt(s)},ag.set(i,s),s)}return{value:i,source:s,stack:xt(s)}}var kr=[],Vr=0,Pu=null,Ka=0,fi=[],hi=0,Qo=null,zi=1,ji="";function fo(i,s){kr[Vr++]=Ka,kr[Vr++]=Pu,Pu=i,Ka=s}function lg(i,s,a){fi[hi++]=zi,fi[hi++]=ji,fi[hi++]=Qo,Qo=i;var c=zi;i=ji;var y=32-Qt(c)-1;c&=~(1<<y),a+=1;var v=32-Qt(s)+y;if(30<v){var x=y-y%5;v=(c&(1<<x)-1).toString(32),c>>=x,y-=x,zi=1<<32-Qt(s)+y|a<<y|c,ji=v+i}else zi=1<<v|a<<y|c,ji=i}function nf(i){i.return!==null&&(fo(i,1),lg(i,1,0))}function of(i){for(;i===Pu;)Pu=kr[--Vr],kr[Vr]=null,Ka=kr[--Vr],kr[Vr]=null;for(;i===Qo;)Qo=fi[--hi],fi[hi]=null,ji=fi[--hi],fi[hi]=null,zi=fi[--hi],fi[hi]=null}function ug(i,s){fi[hi++]=zi,fi[hi++]=ji,fi[hi++]=Qo,zi=s.id,ji=s.overflow,Qo=i}var sn=null,vt=null,$e=!1,Xo=null,mi=!1,sf=Error(o(519));function Wo(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $a(di(s,i)),sf}function cg(i){var s=i.stateNode,a=i.type,c=i.memoizedProps;switch(s[Ce]=i,s[et]=c,a){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(a=0;a<yl.length;a++)ze(yl[a],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":ze("invalid",s),Vs(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ze("invalid",s);break;case"textarea":ze("invalid",s),Go(s,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||Cv(s.textContent,a)?(c.popover!=null&&(ze("beforetoggle",s),ze("toggle",s)),c.onScroll!=null&&ze("scroll",s),c.onScrollEnd!=null&&ze("scrollend",s),c.onClick!=null&&(s.onclick=Xt),s=!0):s=!1,s||Wo(i,!0)}function dg(i){for(sn=i.return;sn;)switch(sn.tag){case 5:case 31:case 13:mi=!1;return;case 27:case 3:mi=!0;return;default:sn=sn.return}}function Lr(i){if(i!==sn)return!1;if(!$e)return dg(i),$e=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||bh(i.type,i.memoizedProps)),a=!a),a&&vt&&Wo(i),dg(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));vt=Vv(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));vt=Vv(i)}else s===27?(s=vt,fs(i.type)?(i=Rh,Rh=null,vt=i):vt=s):vt=sn?gi(i.stateNode.nextSibling):null;return!0}function Ks(){vt=sn=null,$e=!1}function rf(){var i=Xo;return i!==null&&(qn===null?qn=i:qn.push.apply(qn,i),Xo=null),i}function $a(i){Xo===null?Xo=[i]:Xo.push(i)}var af=H(null),$s=null,ho=null;function Zo(i,s,a){fe(af,s._currentValue),s._currentValue=a}function mo(i){i._currentValue=af.current,ie(af)}function lf(i,s,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===a)break;i=i.return}}function uf(i,s,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var x=y.child;v=v.firstContext;e:for(;v!==null;){var C=v;v=y;for(var B=0;B<s.length;B++)if(C.context===s[B]){v.lanes|=a,C=v.alternate,C!==null&&(C.lanes|=a),lf(v.return,a,i),c||(x=null);break e}v=C.next}}else if(y.tag===18){if(x=y.return,x===null)throw Error(o(341));x.lanes|=a,v=x.alternate,v!==null&&(v.lanes|=a),lf(x,a,i),x=null}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===i){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}}function Or(i,s,a,c){i=null;for(var y=s,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var x=y.alternate;if(x===null)throw Error(o(387));if(x=x.memoizedProps,x!==null){var C=y.type;$n(y.pendingProps.value,x.value)||(i!==null?i.push(C):i=[C])}}else if(y===Be.current){if(x=y.alternate,x===null)throw Error(o(387));x.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Sl):i=[Sl])}y=y.return}i!==null&&uf(s,i,a,c),s.flags|=262144}function Uu(i){for(i=i.firstContext;i!==null;){if(!$n(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Qs(i){$s=i,ho=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function rn(i){return fg($s,i)}function ku(i,s){return $s===null&&Qs(i),fg(i,s)}function fg(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ho===null){if(i===null)throw Error(o(308));ho=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ho=ho.next=s;return a}var ox=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},sx=t.unstable_scheduleCallback,rx=t.unstable_NormalPriority,Ot={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cf(){return{controller:new ox,data:new Map,refCount:0}}function Qa(i){i.refCount--,i.refCount===0&&sx(rx,function(){i.controller.abort()})}var Xa=null,df=0,Br=0,qr=null;function ax(i,s){if(Xa===null){var a=Xa=[];df=0,Br=mh(),qr={status:"pending",value:void 0,then:function(c){a.push(c)}}}return df++,s.then(hg,hg),s}function hg(){if(--df===0&&Xa!==null){qr!==null&&(qr.status="fulfilled");var i=Xa;Xa=null,Br=0,qr=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function lx(i,s){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<a.length;y++)(0,a[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var mg=te.S;te.S=function(i,s){Xy=Et(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&ax(i,s),mg!==null&&mg(i,s)};var Xs=H(null);function ff(){var i=Xs.current;return i!==null?i:gt.pooledCache}function Vu(i,s){s===null?fe(Xs,Xs.current):fe(Xs,s.pool)}function pg(){var i=ff();return i===null?null:{parent:Ot._currentValue,pool:i}}var Gr=Error(o(460)),hf=Error(o(474)),Lu=Error(o(542)),Ou={then:function(){}};function gg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function yg(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Xt,Xt),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,_g(i),i;default:if(typeof s.status=="string")s.then(Xt,Xt);else{if(i=gt,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,_g(i),i}throw Zs=s,Gr}}function Ws(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Zs=a,Gr):a}}var Zs=null;function vg(){if(Zs===null)throw Error(o(459));var i=Zs;return Zs=null,i}function _g(i){if(i===Gr||i===Lu)throw Error(o(483))}var Fr=null,Wa=0;function Bu(i){var s=Wa;return Wa+=1,Fr===null&&(Fr=[]),yg(Fr,i,s)}function Za(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function qu(i,s){throw s.$$typeof===b?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Tg(i){function s(Y,F){if(i){var K=Y.deletions;K===null?(Y.deletions=[F],Y.flags|=16):K.push(F)}}function a(Y,F){if(!i)return null;for(;F!==null;)s(Y,F),F=F.sibling;return null}function c(Y){for(var F=new Map;Y!==null;)Y.key!==null?F.set(Y.key,Y):F.set(Y.index,Y),Y=Y.sibling;return F}function y(Y,F){return Y=co(Y,F),Y.index=0,Y.sibling=null,Y}function v(Y,F,K){return Y.index=K,i?(K=Y.alternate,K!==null?(K=K.index,K<F?(Y.flags|=67108866,F):K):(Y.flags|=67108866,F)):(Y.flags|=1048576,F)}function x(Y){return i&&Y.alternate===null&&(Y.flags|=67108866),Y}function C(Y,F,K,oe){return F===null||F.tag!==6?(F=ef(K,Y.mode,oe),F.return=Y,F):(F=y(F,K),F.return=Y,F)}function B(Y,F,K,oe){var we=K.type;return we===L?ne(Y,F,K.props.children,oe,K.key):F!==null&&(F.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&Ws(we)===F.type)?(F=y(F,K.props),Za(F,K),F.return=Y,F):(F=Du(K.type,K.key,K.props,null,Y.mode,oe),Za(F,K),F.return=Y,F)}function $(Y,F,K,oe){return F===null||F.tag!==4||F.stateNode.containerInfo!==K.containerInfo||F.stateNode.implementation!==K.implementation?(F=tf(K,Y.mode,oe),F.return=Y,F):(F=y(F,K.children||[]),F.return=Y,F)}function ne(Y,F,K,oe,we){return F===null||F.tag!==7?(F=Js(K,Y.mode,oe,we),F.return=Y,F):(F=y(F,K),F.return=Y,F)}function re(Y,F,K){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=ef(""+F,Y.mode,K),F.return=Y,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return K=Du(F.type,F.key,F.props,null,Y.mode,K),Za(K,F),K.return=Y,K;case I:return F=tf(F,Y.mode,K),F.return=Y,F;case N:return F=Ws(F),re(Y,F,K)}if(rt(F)||q(F))return F=Js(F,Y.mode,K,null),F.return=Y,F;if(typeof F.then=="function")return re(Y,Bu(F),K);if(F.$$typeof===z)return re(Y,ku(Y,F),K);qu(Y,F)}return null}function Q(Y,F,K,oe){var we=F!==null?F.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return we!==null?null:C(Y,F,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return K.key===we?B(Y,F,K,oe):null;case I:return K.key===we?$(Y,F,K,oe):null;case N:return K=Ws(K),Q(Y,F,K,oe)}if(rt(K)||q(K))return we!==null?null:ne(Y,F,K,oe,null);if(typeof K.then=="function")return Q(Y,F,Bu(K),oe);if(K.$$typeof===z)return Q(Y,F,ku(Y,K),oe);qu(Y,K)}return null}function Z(Y,F,K,oe,we){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Y=Y.get(K)||null,C(F,Y,""+oe,we);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return Y=Y.get(oe.key===null?K:oe.key)||null,B(F,Y,oe,we);case I:return Y=Y.get(oe.key===null?K:oe.key)||null,$(F,Y,oe,we);case N:return oe=Ws(oe),Z(Y,F,K,oe,we)}if(rt(oe)||q(oe))return Y=Y.get(K)||null,ne(F,Y,oe,we,null);if(typeof oe.then=="function")return Z(Y,F,K,Bu(oe),we);if(oe.$$typeof===z)return Z(Y,F,K,ku(F,oe),we);qu(F,oe)}return null}function Se(Y,F,K,oe){for(var we=null,nt=null,xe=F,Ge=F=0,Je=null;xe!==null&&Ge<K.length;Ge++){xe.index>Ge?(Je=xe,xe=null):Je=xe.sibling;var it=Q(Y,xe,K[Ge],oe);if(it===null){xe===null&&(xe=Je);break}i&&xe&&it.alternate===null&&s(Y,xe),F=v(it,F,Ge),nt===null?we=it:nt.sibling=it,nt=it,xe=Je}if(Ge===K.length)return a(Y,xe),$e&&fo(Y,Ge),we;if(xe===null){for(;Ge<K.length;Ge++)xe=re(Y,K[Ge],oe),xe!==null&&(F=v(xe,F,Ge),nt===null?we=xe:nt.sibling=xe,nt=xe);return $e&&fo(Y,Ge),we}for(xe=c(xe);Ge<K.length;Ge++)Je=Z(xe,Y,Ge,K[Ge],oe),Je!==null&&(i&&Je.alternate!==null&&xe.delete(Je.key===null?Ge:Je.key),F=v(Je,F,Ge),nt===null?we=Je:nt.sibling=Je,nt=Je);return i&&xe.forEach(function(ys){return s(Y,ys)}),$e&&fo(Y,Ge),we}function Ne(Y,F,K,oe){if(K==null)throw Error(o(151));for(var we=null,nt=null,xe=F,Ge=F=0,Je=null,it=K.next();xe!==null&&!it.done;Ge++,it=K.next()){xe.index>Ge?(Je=xe,xe=null):Je=xe.sibling;var ys=Q(Y,xe,it.value,oe);if(ys===null){xe===null&&(xe=Je);break}i&&xe&&ys.alternate===null&&s(Y,xe),F=v(ys,F,Ge),nt===null?we=ys:nt.sibling=ys,nt=ys,xe=Je}if(it.done)return a(Y,xe),$e&&fo(Y,Ge),we;if(xe===null){for(;!it.done;Ge++,it=K.next())it=re(Y,it.value,oe),it!==null&&(F=v(it,F,Ge),nt===null?we=it:nt.sibling=it,nt=it);return $e&&fo(Y,Ge),we}for(xe=c(xe);!it.done;Ge++,it=K.next())it=Z(xe,Y,Ge,it.value,oe),it!==null&&(i&&it.alternate!==null&&xe.delete(it.key===null?Ge:it.key),F=v(it,F,Ge),nt===null?we=it:nt.sibling=it,nt=it);return i&&xe.forEach(function(_A){return s(Y,_A)}),$e&&fo(Y,Ge),we}function pt(Y,F,K,oe){if(typeof K=="object"&&K!==null&&K.type===L&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case w:e:{for(var we=K.key;F!==null;){if(F.key===we){if(we=K.type,we===L){if(F.tag===7){a(Y,F.sibling),oe=y(F,K.props.children),oe.return=Y,Y=oe;break e}}else if(F.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===N&&Ws(we)===F.type){a(Y,F.sibling),oe=y(F,K.props),Za(oe,K),oe.return=Y,Y=oe;break e}a(Y,F);break}else s(Y,F);F=F.sibling}K.type===L?(oe=Js(K.props.children,Y.mode,oe,K.key),oe.return=Y,Y=oe):(oe=Du(K.type,K.key,K.props,null,Y.mode,oe),Za(oe,K),oe.return=Y,Y=oe)}return x(Y);case I:e:{for(we=K.key;F!==null;){if(F.key===we)if(F.tag===4&&F.stateNode.containerInfo===K.containerInfo&&F.stateNode.implementation===K.implementation){a(Y,F.sibling),oe=y(F,K.children||[]),oe.return=Y,Y=oe;break e}else{a(Y,F);break}else s(Y,F);F=F.sibling}oe=tf(K,Y.mode,oe),oe.return=Y,Y=oe}return x(Y);case N:return K=Ws(K),pt(Y,F,K,oe)}if(rt(K))return Se(Y,F,K,oe);if(q(K)){if(we=q(K),typeof we!="function")throw Error(o(150));return K=we.call(K),Ne(Y,F,K,oe)}if(typeof K.then=="function")return pt(Y,F,Bu(K),oe);if(K.$$typeof===z)return pt(Y,F,ku(Y,K),oe);qu(Y,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,F!==null&&F.tag===6?(a(Y,F.sibling),oe=y(F,K),oe.return=Y,Y=oe):(a(Y,F),oe=ef(K,Y.mode,oe),oe.return=Y,Y=oe),x(Y)):a(Y,F)}return function(Y,F,K,oe){try{Wa=0;var we=pt(Y,F,K,oe);return Fr=null,we}catch(xe){if(xe===Gr||xe===Lu)throw xe;var nt=Qn(29,xe,null,Y.mode);return nt.lanes=oe,nt.return=Y,nt}finally{}}}var er=Tg(!0),Eg=Tg(!1),es=!1;function mf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pf(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ts(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ns(i,s,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(at&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=Mu(i),og(i,null,a),s}return Nu(i,c,s,a),Mu(i)}function el(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,V(i,a)}}function gf(i,s){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=x:v=v.next=x,a=a.next}while(a!==null);v===null?y=v=s:v=v.next=s}else y=v=s;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var yf=!1;function tl(){if(yf){var i=qr;if(i!==null)throw i}}function nl(i,s,a,c){yf=!1;var y=i.updateQueue;es=!1;var v=y.firstBaseUpdate,x=y.lastBaseUpdate,C=y.shared.pending;if(C!==null){y.shared.pending=null;var B=C,$=B.next;B.next=null,x===null?v=$:x.next=$,x=B;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,C=ne.lastBaseUpdate,C!==x&&(C===null?ne.firstBaseUpdate=$:C.next=$,ne.lastBaseUpdate=B))}if(v!==null){var re=y.baseState;x=0,ne=$=B=null,C=v;do{var Q=C.lane&-536870913,Z=Q!==C.lane;if(Z?(Ye&Q)===Q:(c&Q)===Q){Q!==0&&Q===Br&&(yf=!0),ne!==null&&(ne=ne.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Se=i,Ne=C;Q=s;var pt=a;switch(Ne.tag){case 1:if(Se=Ne.payload,typeof Se=="function"){re=Se.call(pt,re,Q);break e}re=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ne.payload,Q=typeof Se=="function"?Se.call(pt,re,Q):Se,Q==null)break e;re=E({},re,Q);break e;case 2:es=!0}}Q=C.callback,Q!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ne===null?($=ne=Z,B=re):ne=ne.next=Z,x|=Q;if(C=C.next,C===null){if(C=y.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);ne===null&&(B=re),y.baseState=B,y.firstBaseUpdate=$,y.lastBaseUpdate=ne,v===null&&(y.shared.lanes=0),as|=x,i.lanes=x,i.memoizedState=re}}function Sg(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function bg(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Sg(a[i],s)}var Hr=H(null),Gu=H(0);function xg(i,s){i=bo,fe(Gu,i),fe(Hr,s),bo=i|s.baseLanes}function vf(){fe(Gu,bo),fe(Hr,Hr.current)}function _f(){bo=Gu.current,ie(Hr),ie(Gu)}var Xn=H(null),pi=null;function is(i){var s=i.alternate;fe(Ut,Ut.current&1),fe(Xn,i),pi===null&&(s===null||Hr.current!==null||s.memoizedState!==null)&&(pi=i)}function Tf(i){fe(Ut,Ut.current),fe(Xn,i),pi===null&&(pi=i)}function Ag(i){i.tag===22?(fe(Ut,Ut.current),fe(Xn,i),pi===null&&(pi=i)):os()}function os(){fe(Ut,Ut.current),fe(Xn,Xn.current)}function Wn(i){ie(Xn),pi===i&&(pi=null),ie(Ut)}var Ut=H(0);function Fu(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||wh(a)||Ch(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var po=0,qe=null,ht=null,Bt=null,Hu=!1,zr=!1,tr=!1,zu=0,il=0,jr=null,ux=0;function Nt(){throw Error(o(321))}function Ef(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!$n(i[a],s[a]))return!1;return!0}function Sf(i,s,a,c,y,v){return po=v,qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,te.H=i===null||i.memoizedState===null?ly:Lf,tr=!1,v=a(c,y),tr=!1,zr&&(v=Cg(s,a,c,y)),wg(i),v}function wg(i){te.H=rl;var s=ht!==null&&ht.next!==null;if(po=0,Bt=ht=qe=null,Hu=!1,il=0,jr=null,s)throw Error(o(300));i===null||qt||(i=i.dependencies,i!==null&&Uu(i)&&(qt=!0))}function Cg(i,s,a,c){qe=i;var y=0;do{if(zr&&(jr=null),il=0,zr=!1,25<=y)throw Error(o(301));if(y+=1,Bt=ht=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}te.H=uy,v=s(a,c)}while(zr);return v}function cx(){var i=te.H,s=i.useState()[0];return s=typeof s.then=="function"?ol(s):s,i=i.useState()[0],(ht!==null?ht.memoizedState:null)!==i&&(qe.flags|=1024),s}function bf(){var i=zu!==0;return zu=0,i}function xf(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function Af(i){if(Hu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Hu=!1}po=0,Bt=ht=qe=null,zr=!1,il=zu=0,jr=null}function Rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?qe.memoizedState=Bt=i:Bt=Bt.next=i,Bt}function kt(){if(ht===null){var i=qe.alternate;i=i!==null?i.memoizedState:null}else i=ht.next;var s=Bt===null?qe.memoizedState:Bt.next;if(s!==null)Bt=s,ht=i;else{if(i===null)throw qe.alternate===null?Error(o(467)):Error(o(310));ht=i,i={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Bt===null?qe.memoizedState=Bt=i:Bt=Bt.next=i}return Bt}function ju(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(i){var s=il;return il+=1,jr===null&&(jr=[]),i=yg(jr,i,s),s=qe,(Bt===null?s.memoizedState:Bt.next)===null&&(s=s.alternate,te.H=s===null||s.memoizedState===null?ly:Lf),i}function Yu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ol(i);if(i.$$typeof===z)return rn(i)}throw Error(o(438,String(i)))}function wf(i){var s=null,a=qe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=qe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=ju(),qe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),c=0;c<i;c++)a[c]=P;return s.index++,a}function go(i,s){return typeof s=="function"?s(i):s}function Ju(i){var s=kt();return Cf(s,ht,i)}function Cf(i,s,a){var c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var y=i.baseQueue,v=c.pending;if(v!==null){if(y!==null){var x=y.next;y.next=v.next,v.next=x}s.baseQueue=y=v,c.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{s=y.next;var C=x=null,B=null,$=s,ne=!1;do{var re=$.lane&-536870913;if(re!==$.lane?(Ye&re)===re:(po&re)===re){var Q=$.revertLane;if(Q===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),re===Br&&(ne=!0);else if((po&Q)===Q){$=$.next,Q===Br&&(ne=!0);continue}else re={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},B===null?(C=B=re,x=v):B=B.next=re,qe.lanes|=Q,as|=Q;re=$.action,tr&&a(v,re),v=$.hasEagerState?$.eagerState:a(v,re)}else Q={lane:re,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},B===null?(C=B=Q,x=v):B=B.next=Q,qe.lanes|=re,as|=re;$=$.next}while($!==null&&$!==s);if(B===null?x=v:B.next=C,!$n(v,i.memoizedState)&&(qt=!0,ne&&(a=qr,a!==null)))throw a;i.memoizedState=v,i.baseState=x,i.baseQueue=B,c.lastRenderedState=v}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Rf(i){var s=kt(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,v=s.memoizedState;if(y!==null){a.pending=null;var x=y=y.next;do v=i(v,x.action),x=x.next;while(x!==y);$n(v,s.memoizedState)||(qt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,c]}function Rg(i,s,a){var c=qe,y=kt(),v=$e;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=s();var x=!$n((ht||y).memoizedState,a);if(x&&(y.memoizedState=a,qt=!0),y=y.queue,Mf(Mg.bind(null,c,y,i),[i]),y.getSnapshot!==s||x||Bt!==null&&Bt.memoizedState.tag&1){if(c.flags|=2048,Yr(9,{destroy:void 0},Ng.bind(null,c,y,a,s),null),gt===null)throw Error(o(349));v||(po&127)!==0||Ig(c,s,a)}return a}function Ig(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=qe.updateQueue,s===null?(s=ju(),qe.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function Ng(i,s,a,c){s.value=a,s.getSnapshot=c,Dg(s)&&Pg(i)}function Mg(i,s,a){return a(function(){Dg(s)&&Pg(i)})}function Dg(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!$n(i,a)}catch{return!0}}function Pg(i){var s=Ys(i,2);s!==null&&Gn(s,i,2)}function If(i){var s=Rn();if(typeof i=="function"){var a=i;if(i=a(),tr){on(!0);try{a()}finally{on(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:i},s}function Ug(i,s,a,c){return i.baseState=a,Cf(i,ht,typeof c=="function"?c:go)}function dx(i,s,a,c,y){if(Qu(i))throw Error(o(485));if(i=s.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){v.listeners.push(x)}};te.T!==null?a(!0):v.isTransition=!1,c(v),a=s.pending,a===null?(v.next=s.pending=v,kg(s,v)):(v.next=a.next,s.pending=a.next=v)}}function kg(i,s){var a=s.action,c=s.payload,y=i.state;if(s.isTransition){var v=te.T,x={};te.T=x;try{var C=a(y,c),B=te.S;B!==null&&B(x,C),Vg(i,s,C)}catch($){Nf(i,s,$)}finally{v!==null&&x.types!==null&&(v.types=x.types),te.T=v}}else try{v=a(y,c),Vg(i,s,v)}catch($){Nf(i,s,$)}}function Vg(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Lg(i,s,c)},function(c){return Nf(i,s,c)}):Lg(i,s,a)}function Lg(i,s,a){s.status="fulfilled",s.value=a,Og(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,kg(i,a)))}function Nf(i,s,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,Og(s),s=s.next;while(s!==c)}i.action=null}function Og(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Bg(i,s){return s}function qg(i,s){if($e){var a=gt.formState;if(a!==null){e:{var c=qe;if($e){if(vt){t:{for(var y=vt,v=mi;y.nodeType!==8;){if(!v){y=null;break t}if(y=gi(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){vt=gi(y.nextSibling),c=y.data==="F!";break e}}Wo(c)}c=!1}c&&(s=a[0])}}return a=Rn(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bg,lastRenderedState:s},a.queue=c,a=sy.bind(null,qe,c),c.dispatch=a,c=If(!1),v=Vf.bind(null,qe,!1,c.queue),c=Rn(),y={state:s,dispatch:null,action:i,pending:null},c.queue=y,a=dx.bind(null,qe,y,v,a),y.dispatch=a,c.memoizedState=i,[s,a,!1]}function Gg(i){var s=kt();return Fg(s,ht,i)}function Fg(i,s,a){if(s=Cf(i,s,Bg)[0],i=Ju(go)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ol(s)}catch(x){throw x===Gr?Lu:x}else c=s;s=kt();var y=s.queue,v=y.dispatch;return a!==s.memoizedState&&(qe.flags|=2048,Yr(9,{destroy:void 0},fx.bind(null,y,a),null)),[c,v,i]}function fx(i,s){i.action=s}function Hg(i){var s=kt(),a=ht;if(a!==null)return Fg(s,a,i);kt(),s=s.memoizedState,a=kt();var c=a.queue.dispatch;return a.memoizedState=i,[s,c,!1]}function Yr(i,s,a,c){return i={tag:i,create:a,deps:c,inst:s,next:null},s=qe.updateQueue,s===null&&(s=ju(),qe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,s.lastEffect=i),i}function zg(){return kt().memoizedState}function Ku(i,s,a,c){var y=Rn();qe.flags|=i,y.memoizedState=Yr(1|s,{destroy:void 0},a,c===void 0?null:c)}function $u(i,s,a,c){var y=kt();c=c===void 0?null:c;var v=y.memoizedState.inst;ht!==null&&c!==null&&Ef(c,ht.memoizedState.deps)?y.memoizedState=Yr(s,v,a,c):(qe.flags|=i,y.memoizedState=Yr(1|s,v,a,c))}function jg(i,s){Ku(8390656,8,i,s)}function Mf(i,s){$u(2048,8,i,s)}function hx(i){qe.flags|=4;var s=qe.updateQueue;if(s===null)s=ju(),qe.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function Yg(i){var s=kt().memoizedState;return hx({ref:s,nextImpl:i}),function(){if((at&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Jg(i,s){return $u(4,2,i,s)}function Kg(i,s){return $u(4,4,i,s)}function $g(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Qg(i,s,a){a=a!=null?a.concat([i]):null,$u(4,4,$g.bind(null,s,i),a)}function Df(){}function Xg(i,s){var a=kt();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&Ef(s,c[1])?c[0]:(a.memoizedState=[i,s],i)}function Wg(i,s){var a=kt();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&Ef(s,c[1]))return c[0];if(c=i(),tr){on(!0);try{i()}finally{on(!1)}}return a.memoizedState=[c,s],c}function Pf(i,s,a){return a===void 0||(po&1073741824)!==0&&(Ye&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=Zy(),qe.lanes|=i,as|=i,a)}function Zg(i,s,a,c){return $n(a,s)?a:Hr.current!==null?(i=Pf(i,a,c),$n(i,s)||(qt=!0),i):(po&42)===0||(po&1073741824)!==0&&(Ye&261930)===0?(qt=!0,i.memoizedState=a):(i=Zy(),qe.lanes|=i,as|=i,s)}function ey(i,s,a,c,y){var v=me.p;me.p=v!==0&&8>v?v:8;var x=te.T,C={};te.T=C,Vf(i,!1,s,a);try{var B=y(),$=te.S;if($!==null&&$(C,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ne=lx(B,c);sl(i,s,ne,ti(i))}else sl(i,s,c,ti(i))}catch(re){sl(i,s,{then:function(){},status:"rejected",reason:re},ti())}finally{me.p=v,x!==null&&C.types!==null&&(x.types=C.types),te.T=x}}function mx(){}function Uf(i,s,a,c){if(i.tag!==5)throw Error(o(476));var y=ty(i).queue;ey(i,y,s,Ee,a===null?mx:function(){return ny(i),a(c)})}function ty(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:Ee},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function ny(i){var s=ty(i);s.next===null&&(s=i.alternate.memoizedState),sl(i,s.next.queue,{},ti())}function kf(){return rn(Sl)}function iy(){return kt().memoizedState}function oy(){return kt().memoizedState}function px(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=ti();i=ts(a);var c=ns(s,i,a);c!==null&&(Gn(c,s,a),el(c,s,a)),s={cache:cf()},i.payload=s;return}s=s.return}}function gx(i,s,a){var c=ti();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Qu(i)?ry(s,a):(a=Wd(i,s,a,c),a!==null&&(Gn(a,i,c),ay(a,s,c)))}function sy(i,s,a){var c=ti();sl(i,s,a,c)}function sl(i,s,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Qu(i))ry(s,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var x=s.lastRenderedState,C=v(x,a);if(y.hasEagerState=!0,y.eagerState=C,$n(C,x))return Nu(i,s,y,0),gt===null&&Iu(),!1}catch{}finally{}if(a=Wd(i,s,y,c),a!==null)return Gn(a,i,c),ay(a,s,c),!0}return!1}function Vf(i,s,a,c){if(c={lane:2,revertLane:mh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Qu(i)){if(s)throw Error(o(479))}else s=Wd(i,a,c,2),s!==null&&Gn(s,i,2)}function Qu(i){var s=i.alternate;return i===qe||s!==null&&s===qe}function ry(i,s){zr=Hu=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function ay(i,s,a){if((a&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,V(i,a)}}var rl={readContext:rn,use:Yu,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};rl.useEffectEvent=Nt;var ly={readContext:rn,use:Yu,useCallback:function(i,s){return Rn().memoizedState=[i,s===void 0?null:s],i},useContext:rn,useEffect:jg,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Ku(4194308,4,$g.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Ku(4194308,4,i,s)},useInsertionEffect:function(i,s){Ku(4,2,i,s)},useMemo:function(i,s){var a=Rn();s=s===void 0?null:s;var c=i();if(tr){on(!0);try{i()}finally{on(!1)}}return a.memoizedState=[c,s],c},useReducer:function(i,s,a){var c=Rn();if(a!==void 0){var y=a(s);if(tr){on(!0);try{a(s)}finally{on(!1)}}}else y=s;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=gx.bind(null,qe,i),[c.memoizedState,i]},useRef:function(i){var s=Rn();return i={current:i},s.memoizedState=i},useState:function(i){i=If(i);var s=i.queue,a=sy.bind(null,qe,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Df,useDeferredValue:function(i,s){var a=Rn();return Pf(a,i,s)},useTransition:function(){var i=If(!1);return i=ey.bind(null,qe,i.queue,!0,!1),Rn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var c=qe,y=Rn();if($e){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),gt===null)throw Error(o(349));(Ye&127)!==0||Ig(c,s,a)}y.memoizedState=a;var v={value:a,getSnapshot:s};return y.queue=v,jg(Mg.bind(null,c,v,i),[i]),c.flags|=2048,Yr(9,{destroy:void 0},Ng.bind(null,c,v,a,s),null),a},useId:function(){var i=Rn(),s=gt.identifierPrefix;if($e){var a=ji,c=zi;a=(c&~(1<<32-Qt(c)-1)).toString(32)+a,s="_"+s+"R_"+a,a=zu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=ux++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:kf,useFormState:qg,useActionState:qg,useOptimistic:function(i){var s=Rn();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Vf.bind(null,qe,!0,a),a.dispatch=s,[i,s]},useMemoCache:wf,useCacheRefresh:function(){return Rn().memoizedState=px.bind(null,qe)},useEffectEvent:function(i){var s=Rn(),a={impl:i};return s.memoizedState=a,function(){if((at&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Lf={readContext:rn,use:Yu,useCallback:Xg,useContext:rn,useEffect:Mf,useImperativeHandle:Qg,useInsertionEffect:Jg,useLayoutEffect:Kg,useMemo:Wg,useReducer:Ju,useRef:zg,useState:function(){return Ju(go)},useDebugValue:Df,useDeferredValue:function(i,s){var a=kt();return Zg(a,ht.memoizedState,i,s)},useTransition:function(){var i=Ju(go)[0],s=kt().memoizedState;return[typeof i=="boolean"?i:ol(i),s]},useSyncExternalStore:Rg,useId:iy,useHostTransitionStatus:kf,useFormState:Gg,useActionState:Gg,useOptimistic:function(i,s){var a=kt();return Ug(a,ht,i,s)},useMemoCache:wf,useCacheRefresh:oy};Lf.useEffectEvent=Yg;var uy={readContext:rn,use:Yu,useCallback:Xg,useContext:rn,useEffect:Mf,useImperativeHandle:Qg,useInsertionEffect:Jg,useLayoutEffect:Kg,useMemo:Wg,useReducer:Rf,useRef:zg,useState:function(){return Rf(go)},useDebugValue:Df,useDeferredValue:function(i,s){var a=kt();return ht===null?Pf(a,i,s):Zg(a,ht.memoizedState,i,s)},useTransition:function(){var i=Rf(go)[0],s=kt().memoizedState;return[typeof i=="boolean"?i:ol(i),s]},useSyncExternalStore:Rg,useId:iy,useHostTransitionStatus:kf,useFormState:Hg,useActionState:Hg,useOptimistic:function(i,s){var a=kt();return ht!==null?Ug(a,ht,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:wf,useCacheRefresh:oy};uy.useEffectEvent=Yg;function Of(i,s,a,c){s=i.memoizedState,a=a(c,s),a=a==null?s:E({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Bf={enqueueSetState:function(i,s,a){i=i._reactInternals;var c=ti(),y=ts(c);y.payload=s,a!=null&&(y.callback=a),s=ns(i,y,c),s!==null&&(Gn(s,i,c),el(s,i,c))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var c=ti(),y=ts(c);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=ns(i,y,c),s!==null&&(Gn(s,i,c),el(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=ti(),c=ts(a);c.tag=2,s!=null&&(c.callback=s),s=ns(i,c,a),s!==null&&(Gn(s,i,a),el(s,i,a))}};function cy(i,s,a,c,y,v,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,x):s.prototype&&s.prototype.isPureReactComponent?!Ya(a,c)||!Ya(y,v):!0}function dy(i,s,a,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==i&&Bf.enqueueReplaceState(s,s.state,null)}function nr(i,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(i=i.defaultProps){a===s&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function fy(i){Ru(i)}function hy(i){console.error(i)}function my(i){Ru(i)}function Xu(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function py(i,s,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function qf(i,s,a){return a=ts(a),a.tag=3,a.payload={element:null},a.callback=function(){Xu(i,s)},a}function gy(i){return i=ts(i),i.tag=3,i}function yy(i,s,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;i.payload=function(){return y(v)},i.callback=function(){py(s,a,c)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){py(s,a,c),typeof y!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function yx(i,s,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&Or(s,a,y,!0),a=Xn.current,a!==null){switch(a.tag){case 31:case 13:return pi===null?uc():a.alternate===null&&Mt===0&&(Mt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===Ou?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),dh(i,c,y)),!1;case 22:return a.flags|=65536,c===Ou?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),dh(i,c,y)),!1}throw Error(o(435,a.tag))}return dh(i,c,y),uc(),!1}if($e)return s=Xn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==sf&&(i=Error(o(422),{cause:c}),$a(di(i,a)))):(c!==sf&&(s=Error(o(423),{cause:c}),$a(di(s,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=di(c,a),y=qf(i.stateNode,c,y),gf(i,y),Mt!==4&&(Mt=2)),!1;var v=Error(o(520),{cause:c});if(v=di(v,a),ml===null?ml=[v]:ml.push(v),Mt!==4&&(Mt=2),s===null)return!0;c=di(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=qf(a.stateNode,c,i),gf(a,i),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ls===null||!ls.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=gy(y),yy(y,i,a,c),gf(a,y),!1}a=a.return}while(a!==null);return!1}var Gf=Error(o(461)),qt=!1;function an(i,s,a,c){s.child=i===null?Eg(s,null,a,c):er(s,i.child,a,c)}function vy(i,s,a,c,y){a=a.render;var v=s.ref;if("ref"in c){var x={};for(var C in c)C!=="ref"&&(x[C]=c[C])}else x=c;return Qs(s),c=Sf(i,s,a,x,v,y),C=bf(),i!==null&&!qt?(xf(i,s,y),yo(i,s,y)):($e&&C&&nf(s),s.flags|=1,an(i,s,c,y),s.child)}function _y(i,s,a,c,y){if(i===null){var v=a.type;return typeof v=="function"&&!Zd(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,Ty(i,s,v,c,y)):(i=Du(a.type,null,c,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(v=i.child,!$f(i,y)){var x=v.memoizedProps;if(a=a.compare,a=a!==null?a:Ya,a(x,c)&&i.ref===s.ref)return yo(i,s,y)}return s.flags|=1,i=co(v,c),i.ref=s.ref,i.return=s,s.child=i}function Ty(i,s,a,c,y){if(i!==null){var v=i.memoizedProps;if(Ya(v,c)&&i.ref===s.ref)if(qt=!1,s.pendingProps=c=v,$f(i,y))(i.flags&131072)!==0&&(qt=!0);else return s.lanes=i.lanes,yo(i,s,y)}return Ff(i,s,a,c,y)}function Ey(i,s,a,c){var y=c.children,v=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=s.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,s.child=null;return Sy(i,s,v,a,c)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Vu(s,v!==null?v.cachePool:null),v!==null?xg(s,v):vf(),Ag(s);else return c=s.lanes=536870912,Sy(i,s,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(Vu(s,v.cachePool),xg(s,v),os(),s.memoizedState=null):(i!==null&&Vu(s,null),vf(),os());return an(i,s,y,a),s.child}function al(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Sy(i,s,a,c,y){var v=ff();return v=v===null?null:{parent:Ot._currentValue,pool:v},s.memoizedState={baseLanes:a,cachePool:v},i!==null&&Vu(s,null),vf(),Ag(s),i!==null&&Or(i,s,c,!0),s.childLanes=y,null}function Wu(i,s){return s=ec({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function by(i,s,a){return er(s,i.child,null,a),i=Wu(s,s.pendingProps),i.flags|=2,Wn(s),s.memoizedState=null,i}function vx(i,s,a){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,i===null){if($e){if(c.mode==="hidden")return i=Wu(s,c),s.lanes=536870912,al(null,i);if(Tf(s),(i=vt)?(i=kv(i,mi),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Qo!==null?{id:zi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},a=rg(i),a.return=s,s.child=a,sn=s,vt=null)):i=null,i===null)throw Wo(s);return s.lanes=536870912,null}return Wu(s,c)}var v=i.memoizedState;if(v!==null){var x=v.dehydrated;if(Tf(s),y)if(s.flags&256)s.flags&=-257,s=by(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(qt||Or(i,s,a,!1),y=(a&i.childLanes)!==0,qt||y){if(c=gt,c!==null&&(x=ae(c,a),x!==0&&x!==v.retryLane))throw v.retryLane=x,Ys(i,x),Gn(c,i,x),Gf;uc(),s=by(i,s,a)}else i=v.treeContext,vt=gi(x.nextSibling),sn=s,$e=!0,Xo=null,mi=!1,i!==null&&ug(s,i),s=Wu(s,c),s.flags|=4096;return s}return i=co(i.child,{mode:c.mode,children:c.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Zu(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function Ff(i,s,a,c,y){return Qs(s),a=Sf(i,s,a,c,void 0,y),c=bf(),i!==null&&!qt?(xf(i,s,y),yo(i,s,y)):($e&&c&&nf(s),s.flags|=1,an(i,s,a,y),s.child)}function xy(i,s,a,c,y,v){return Qs(s),s.updateQueue=null,a=Cg(s,c,a,y),wg(i),c=bf(),i!==null&&!qt?(xf(i,s,v),yo(i,s,v)):($e&&c&&nf(s),s.flags|=1,an(i,s,a,v),s.child)}function Ay(i,s,a,c,y){if(Qs(s),s.stateNode===null){var v=Ur,x=a.contextType;typeof x=="object"&&x!==null&&(v=rn(x)),v=new a(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Bf,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},mf(s),x=a.contextType,v.context=typeof x=="object"&&x!==null?rn(x):Ur,v.state=s.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(Of(s,a,x,c),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(x=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),x!==v.state&&Bf.enqueueReplaceState(v,v.state,null),nl(s,c,v,y),tl(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){v=s.stateNode;var C=s.memoizedProps,B=nr(a,C);v.props=B;var $=v.context,ne=a.contextType;x=Ur,typeof ne=="object"&&ne!==null&&(x=rn(ne));var re=a.getDerivedStateFromProps;ne=typeof re=="function"||typeof v.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,ne||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C||$!==x)&&dy(s,v,c,x),es=!1;var Q=s.memoizedState;v.state=Q,nl(s,c,v,y),tl(),$=s.memoizedState,C||Q!==$||es?(typeof re=="function"&&(Of(s,a,re,c),$=s.memoizedState),(B=es||cy(s,a,B,c,Q,$,x))?(ne||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=$),v.props=c,v.state=$,v.context=x,c=B):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,pf(i,s),x=s.memoizedProps,ne=nr(a,x),v.props=ne,re=s.pendingProps,Q=v.context,$=a.contextType,B=Ur,typeof $=="object"&&$!==null&&(B=rn($)),C=a.getDerivedStateFromProps,($=typeof C=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x!==re||Q!==B)&&dy(s,v,c,B),es=!1,Q=s.memoizedState,v.state=Q,nl(s,c,v,y),tl();var Z=s.memoizedState;x!==re||Q!==Z||es||i!==null&&i.dependencies!==null&&Uu(i.dependencies)?(typeof C=="function"&&(Of(s,a,C,c),Z=s.memoizedState),(ne=es||cy(s,a,ne,c,Q,Z,B)||i!==null&&i.dependencies!==null&&Uu(i.dependencies))?($||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Z,B),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Z,B)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||x===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Z),v.props=c,v.state=Z,v.context=B,c=ne):(typeof v.componentDidUpdate!="function"||x===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),c=!1)}return v=c,Zu(i,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,i!==null&&c?(s.child=er(s,i.child,null,y),s.child=er(s,null,a,y)):an(i,s,a,y),s.memoizedState=v.state,i=s.child):i=yo(i,s,y),i}function wy(i,s,a,c){return Ks(),s.flags|=256,an(i,s,a,c),s.child}var Hf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zf(i){return{baseLanes:i,cachePool:pg()}}function jf(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=ei),i}function Cy(i,s,a){var c=s.pendingProps,y=!1,v=(s.flags&128)!==0,x;if((x=v)||(x=i!==null&&i.memoizedState===null?!1:(Ut.current&2)!==0),x&&(y=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,i===null){if($e){if(y?is(s):os(),(i=vt)?(i=kv(i,mi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Qo!==null?{id:zi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},a=rg(i),a.return=s,s.child=a,sn=s,vt=null)):i=null,i===null)throw Wo(s);return Ch(i)?s.lanes=32:s.lanes=536870912,null}var C=c.children;return c=c.fallback,y?(os(),y=s.mode,C=ec({mode:"hidden",children:C},y),c=Js(c,y,a,null),C.return=s,c.return=s,C.sibling=c,s.child=C,c=s.child,c.memoizedState=zf(a),c.childLanes=jf(i,x,a),s.memoizedState=Hf,al(null,c)):(is(s),Yf(s,C))}var B=i.memoizedState;if(B!==null&&(C=B.dehydrated,C!==null)){if(v)s.flags&256?(is(s),s.flags&=-257,s=Jf(i,s,a)):s.memoizedState!==null?(os(),s.child=i.child,s.flags|=128,s=null):(os(),C=c.fallback,y=s.mode,c=ec({mode:"visible",children:c.children},y),C=Js(C,y,a,null),C.flags|=2,c.return=s,C.return=s,c.sibling=C,s.child=c,er(s,i.child,null,a),c=s.child,c.memoizedState=zf(a),c.childLanes=jf(i,x,a),s.memoizedState=Hf,s=al(null,c));else if(is(s),Ch(C)){if(x=C.nextSibling&&C.nextSibling.dataset,x)var $=x.dgst;x=$,c=Error(o(419)),c.stack="",c.digest=x,$a({value:c,source:null,stack:null}),s=Jf(i,s,a)}else if(qt||Or(i,s,a,!1),x=(a&i.childLanes)!==0,qt||x){if(x=gt,x!==null&&(c=ae(x,a),c!==0&&c!==B.retryLane))throw B.retryLane=c,Ys(i,c),Gn(x,i,c),Gf;wh(C)||uc(),s=Jf(i,s,a)}else wh(C)?(s.flags|=192,s.child=i.child,s=null):(i=B.treeContext,vt=gi(C.nextSibling),sn=s,$e=!0,Xo=null,mi=!1,i!==null&&ug(s,i),s=Yf(s,c.children),s.flags|=4096);return s}return y?(os(),C=c.fallback,y=s.mode,B=i.child,$=B.sibling,c=co(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,$!==null?C=co($,C):(C=Js(C,y,a,null),C.flags|=2),C.return=s,c.return=s,c.sibling=C,s.child=c,al(null,c),c=s.child,C=i.child.memoizedState,C===null?C=zf(a):(y=C.cachePool,y!==null?(B=Ot._currentValue,y=y.parent!==B?{parent:B,pool:B}:y):y=pg(),C={baseLanes:C.baseLanes|a,cachePool:y}),c.memoizedState=C,c.childLanes=jf(i,x,a),s.memoizedState=Hf,al(i.child,c)):(is(s),a=i.child,i=a.sibling,a=co(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,i!==null&&(x=s.deletions,x===null?(s.deletions=[i],s.flags|=16):x.push(i)),s.child=a,s.memoizedState=null,a)}function Yf(i,s){return s=ec({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function ec(i,s){return i=Qn(22,i,null,s),i.lanes=0,i}function Jf(i,s,a){return er(s,i.child,null,a),i=Yf(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Ry(i,s,a){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),lf(i.return,s,a)}function Kf(i,s,a,c,y,v){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(x.isBackwards=s,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=a,x.tailMode=y,x.treeForkCount=v)}function Iy(i,s,a){var c=s.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var x=Ut.current,C=(x&2)!==0;if(C?(x=x&1|2,s.flags|=128):x&=1,fe(Ut,x),an(i,s,c,a),c=$e?Ka:0,!C&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ry(i,a,s);else if(i.tag===19)Ry(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=s.child,y=null;a!==null;)i=a.alternate,i!==null&&Fu(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=s.child,s.child=null):(y=a.sibling,a.sibling=null),Kf(s,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&Fu(i)===null){s.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Kf(s,!0,a,null,v,c);break;case"together":Kf(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function yo(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),as|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(Or(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,a=co(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=co(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function $f(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Uu(i)))}function _x(i,s,a){switch(s.tag){case 3:Ht(s,s.stateNode.containerInfo),Zo(s,Ot,i.memoizedState.cache),Ks();break;case 27:case 5:mn(s);break;case 4:Ht(s,s.stateNode.containerInfo);break;case 10:Zo(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Tf(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(is(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Cy(i,s,a):(is(s),i=yo(i,s,a),i!==null?i.sibling:null);is(s);break;case 19:var y=(i.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(Or(i,s,a,!1),c=(a&s.childLanes)!==0),y){if(c)return Iy(i,s,a);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),fe(Ut,Ut.current),c)break;return null;case 22:return s.lanes=0,Ey(i,s,a,s.pendingProps);case 24:Zo(s,Ot,i.memoizedState.cache)}return yo(i,s,a)}function Ny(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)qt=!0;else{if(!$f(i,a)&&(s.flags&128)===0)return qt=!1,_x(i,s,a);qt=(i.flags&131072)!==0}else qt=!1,$e&&(s.flags&1048576)!==0&&lg(s,Ka,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(i=Ws(s.elementType),s.type=i,typeof i=="function")Zd(i)?(c=nr(i,c),s.tag=1,s=Ay(null,s,i,c,a)):(s.tag=0,s=Ff(null,s,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===X){s.tag=11,s=vy(null,s,i,c,a);break e}else if(y===D){s.tag=14,s=_y(null,s,i,c,a);break e}}throw s=Me(i)||i,Error(o(306,s,""))}}return s;case 0:return Ff(i,s,s.type,s.pendingProps,a);case 1:return c=s.type,y=nr(c,s.pendingProps),Ay(i,s,c,y,a);case 3:e:{if(Ht(s,s.stateNode.containerInfo),i===null)throw Error(o(387));c=s.pendingProps;var v=s.memoizedState;y=v.element,pf(i,s),nl(s,c,null,a);var x=s.memoizedState;if(c=x.cache,Zo(s,Ot,c),c!==v.cache&&uf(s,[Ot],a,!0),tl(),c=x.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=wy(i,s,c,a);break e}else if(c!==y){y=di(Error(o(424)),s),$a(y),s=wy(i,s,c,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(vt=gi(i.firstChild),sn=s,$e=!0,Xo=null,mi=!0,a=Eg(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ks(),c===y){s=yo(i,s,a);break e}an(i,s,c,a)}s=s.child}return s;case 26:return Zu(i,s),i===null?(a=Gv(s.type,null,s.pendingProps,null))?s.memoizedState=a:$e||(a=s.type,i=s.pendingProps,c=gc(De.current).createElement(a),c[Ce]=s,c[et]=i,ln(c,a,i),Pt(c),s.stateNode=c):s.memoizedState=Gv(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return mn(s),i===null&&$e&&(c=s.stateNode=Ov(s.type,s.pendingProps,De.current),sn=s,mi=!0,y=vt,fs(s.type)?(Rh=y,vt=gi(c.firstChild)):vt=y),an(i,s,s.pendingProps.children,a),Zu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&$e&&((y=c=vt)&&(c=$x(c,s.type,s.pendingProps,mi),c!==null?(s.stateNode=c,sn=s,vt=gi(c.firstChild),mi=!1,y=!0):y=!1),y||Wo(s)),mn(s),y=s.type,v=s.pendingProps,x=i!==null?i.memoizedProps:null,c=v.children,bh(y,v)?c=null:x!==null&&bh(y,x)&&(s.flags|=32),s.memoizedState!==null&&(y=Sf(i,s,cx,null,null,a),Sl._currentValue=y),Zu(i,s),an(i,s,c,a),s.child;case 6:return i===null&&$e&&((i=a=vt)&&(a=Qx(a,s.pendingProps,mi),a!==null?(s.stateNode=a,sn=s,vt=null,i=!0):i=!1),i||Wo(s)),null;case 13:return Cy(i,s,a);case 4:return Ht(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=er(s,null,c,a):an(i,s,c,a),s.child;case 11:return vy(i,s,s.type,s.pendingProps,a);case 7:return an(i,s,s.pendingProps,a),s.child;case 8:return an(i,s,s.pendingProps.children,a),s.child;case 12:return an(i,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Zo(s,s.type,c.value),an(i,s,c.children,a),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,Qs(s),y=rn(y),c=c(y),s.flags|=1,an(i,s,c,a),s.child;case 14:return _y(i,s,s.type,s.pendingProps,a);case 15:return Ty(i,s,s.type,s.pendingProps,a);case 19:return Iy(i,s,a);case 31:return vx(i,s,a);case 22:return Ey(i,s,a,s.pendingProps);case 24:return Qs(s),c=rn(Ot),i===null?(y=ff(),y===null&&(y=gt,v=cf(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),s.memoizedState={parent:c,cache:y},mf(s),Zo(s,Ot,y)):((i.lanes&a)!==0&&(pf(i,s),nl(s,null,null,a),tl()),y=i.memoizedState,v=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Zo(s,Ot,c)):(c=v.cache,Zo(s,Ot,c),c!==y.cache&&uf(s,[Ot],a,!0))),an(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function vo(i){i.flags|=4}function Qf(i,s,a,c,y){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(iv())i.flags|=8192;else throw Zs=Ou,hf}else i.flags&=-16777217}function My(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Yv(s))if(iv())i.flags|=8192;else throw Zs=Ou,hf}function tc(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Ps():536870912,i.lanes|=s,Qr|=s)}function ll(i,s){if(!$e)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function _t(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(s)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,s}function Tx(i,s,a){var c=s.pendingProps;switch(of(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(s),null;case 1:return _t(s),null;case 3:return a=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),mo(Ot),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Lr(s)?vo(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,rf())),_t(s),null;case 26:var y=s.type,v=s.memoizedState;return i===null?(vo(s),v!==null?(_t(s),My(s,v)):(_t(s),Qf(s,y,null,c,a))):v?v!==i.memoizedState?(vo(s),_t(s),My(s,v)):(_t(s),s.flags&=-16777217):(i=i.memoizedProps,i!==c&&vo(s),_t(s),Qf(s,y,i,c,a)),null;case 27:if(Dn(s),a=De.current,y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&vo(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return _t(s),null}i=Te.current,Lr(s)?cg(s):(i=Ov(y,c,a),s.stateNode=i,vo(s))}return _t(s),null;case 5:if(Dn(s),y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&vo(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return _t(s),null}if(v=Te.current,Lr(s))cg(s);else{var x=gc(De.current);switch(v){case 1:v=x.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=x.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=x.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=x.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=x.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?x.createElement(y,{is:c.is}):x.createElement(y)}}v[Ce]=s,v[et]=c;e:for(x=s.child;x!==null;){if(x.tag===5||x.tag===6)v.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===s)break e;for(;x.sibling===null;){if(x.return===null||x.return===s)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}s.stateNode=v;e:switch(ln(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&vo(s)}}return _t(s),Qf(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&vo(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(o(166));if(i=De.current,Lr(s)){if(i=s.stateNode,a=s.memoizedProps,c=null,y=sn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[Ce]=s,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Cv(i.nodeValue,a)),i||Wo(s,!0)}else i=gc(i).createTextNode(c),i[Ce]=s,s.stateNode=i}return _t(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(c=Lr(s),a!==null){if(i===null){if(!c)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[Ce]=s}else Ks(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_t(s),i=!1}else a=rf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(Wn(s),s):(Wn(s),null);if((s.flags&128)!==0)throw Error(o(558))}return _t(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Lr(s),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(o(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Ce]=s}else Ks(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_t(s),y=!1}else y=rf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Wn(s),s):(Wn(s),null)}return Wn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),tc(s,s.updateQueue),_t(s),null);case 4:return lt(),i===null&&vh(s.stateNode.containerInfo),_t(s),null;case 10:return mo(s.type),_t(s),null;case 19:if(ie(Ut),c=s.memoizedState,c===null)return _t(s),null;if(y=(s.flags&128)!==0,v=c.rendering,v===null)if(y)ll(c,!1);else{if(Mt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(v=Fu(i),v!==null){for(s.flags|=128,ll(c,!1),i=v.updateQueue,s.updateQueue=i,tc(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)sg(a,i),a=a.sibling;return fe(Ut,Ut.current&1|2),$e&&fo(s,c.treeForkCount),s.child}i=i.sibling}c.tail!==null&&Et()>rc&&(s.flags|=128,y=!0,ll(c,!1),s.lanes=4194304)}else{if(!y)if(i=Fu(v),i!==null){if(s.flags|=128,y=!0,i=i.updateQueue,s.updateQueue=i,tc(s,i),ll(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!$e)return _t(s),null}else 2*Et()-c.renderingStartTime>rc&&a!==536870912&&(s.flags|=128,y=!0,ll(c,!1),s.lanes=4194304);c.isBackwards?(v.sibling=s.child,s.child=v):(i=c.last,i!==null?i.sibling=v:s.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=Et(),i.sibling=null,a=Ut.current,fe(Ut,y?a&1|2:a&1),$e&&fo(s,c.treeForkCount),i):(_t(s),null);case 22:case 23:return Wn(s),_f(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(_t(s),s.subtreeFlags&6&&(s.flags|=8192)):_t(s),a=s.updateQueue,a!==null&&tc(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),i!==null&&ie(Xs),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),mo(Ot),_t(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function Ex(i,s){switch(of(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return mo(Ot),lt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Dn(s),null;case 31:if(s.memoizedState!==null){if(Wn(s),s.alternate===null)throw Error(o(340));Ks()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Wn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Ks()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ie(Ut),null;case 4:return lt(),null;case 10:return mo(s.type),null;case 22:case 23:return Wn(s),_f(),i!==null&&ie(Xs),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return mo(Ot),null;case 25:return null;default:return null}}function Dy(i,s){switch(of(s),s.tag){case 3:mo(Ot),lt();break;case 26:case 27:case 5:Dn(s);break;case 4:lt();break;case 31:s.memoizedState!==null&&Wn(s);break;case 13:Wn(s);break;case 19:ie(Ut);break;case 10:mo(s.type);break;case 22:case 23:Wn(s),_f(),i!==null&&ie(Xs);break;case 24:mo(Ot)}}function ul(i,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var v=a.create,x=a.inst;c=v(),x.destroy=c}a=a.next}while(a!==y)}}catch(C){dt(s,s.return,C)}}function ss(i,s,a){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&i)===i){var x=c.inst,C=x.destroy;if(C!==void 0){x.destroy=void 0,y=s;var B=a,$=C;try{$()}catch(ne){dt(y,B,ne)}}}c=c.next}while(c!==v)}}catch(ne){dt(s,s.return,ne)}}function Py(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{bg(s,a)}catch(c){dt(i,i.return,c)}}}function Uy(i,s,a){a.props=nr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){dt(i,s,c)}}function cl(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){dt(i,s,y)}}function Yi(i,s){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){dt(i,s,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){dt(i,s,y)}else a.current=null}function ky(i){var s=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){dt(i,i.return,y)}}function Xf(i,s,a){try{var c=i.stateNode;Hx(c,i.type,a,s),c[et]=s}catch(y){dt(i,i.return,y)}}function Vy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&fs(i.type)||i.tag===4}function Wf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Vy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&fs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Zf(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Xt));else if(c!==4&&(c===27&&fs(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(Zf(i,s,a),i=i.sibling;i!==null;)Zf(i,s,a),i=i.sibling}function nc(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(c!==4&&(c===27&&fs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(nc(i,s,a),i=i.sibling;i!==null;)nc(i,s,a),i=i.sibling}function Ly(i){var s=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);ln(s,c,a),s[Ce]=i,s[et]=a}catch(v){dt(i,i.return,v)}}var _o=!1,Gt=!1,eh=!1,Oy=typeof WeakSet=="function"?WeakSet:Set,en=null;function Sx(i,s){if(i=i.containerInfo,Eh=bc,i=Qp(i),Yd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var x=0,C=-1,B=-1,$=0,ne=0,re=i,Q=null;t:for(;;){for(var Z;re!==a||y!==0&&re.nodeType!==3||(C=x+y),re!==v||c!==0&&re.nodeType!==3||(B=x+c),re.nodeType===3&&(x+=re.nodeValue.length),(Z=re.firstChild)!==null;)Q=re,re=Z;for(;;){if(re===i)break t;if(Q===a&&++$===y&&(C=x),Q===v&&++ne===c&&(B=x),(Z=re.nextSibling)!==null)break;re=Q,Q=re.parentNode}re=Z}a=C===-1||B===-1?null:{start:C,end:B}}else a=null}a=a||{start:0,end:0}}else a=null;for(Sh={focusedElem:i,selectionRange:a},bc=!1,en=s;en!==null;)if(s=en,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,en=i;else for(;en!==null;){switch(s=en,v=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=s,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var Se=nr(a.type,y);i=c.getSnapshotBeforeUpdate(Se,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(Ne){dt(a,a.return,Ne)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)Ah(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ah(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,en=i;break}en=s.return}}function By(i,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Eo(i,a),c&4&&ul(5,a);break;case 1:if(Eo(i,a),c&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(x){dt(a,a.return,x)}else{var y=nr(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(y,s,i.__reactInternalSnapshotBeforeUpdate)}catch(x){dt(a,a.return,x)}}c&64&&Py(a),c&512&&cl(a,a.return);break;case 3:if(Eo(i,a),c&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{bg(i,s)}catch(x){dt(a,a.return,x)}}break;case 27:s===null&&c&4&&Ly(a);case 26:case 5:Eo(i,a),s===null&&c&4&&ky(a),c&512&&cl(a,a.return);break;case 12:Eo(i,a);break;case 31:Eo(i,a),c&4&&Fy(i,a);break;case 13:Eo(i,a),c&4&&Hy(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=Mx.bind(null,a),Xx(i,a))));break;case 22:if(c=a.memoizedState!==null||_o,!c){s=s!==null&&s.memoizedState!==null||Gt,y=_o;var v=Gt;_o=c,(Gt=s)&&!v?So(i,a,(a.subtreeFlags&8772)!==0):Eo(i,a),_o=y,Gt=v}break;case 30:break;default:Eo(i,a)}}function qy(i){var s=i.alternate;s!==null&&(i.alternate=null,qy(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Us(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var St=null,Ln=!1;function To(i,s,a){for(a=a.child;a!==null;)Gy(i,s,a),a=a.sibling}function Gy(i,s,a){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Ze,a)}catch{}switch(a.tag){case 26:Gt||Yi(a,s),To(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Gt||Yi(a,s);var c=St,y=Ln;fs(a.type)&&(St=a.stateNode,Ln=!1),To(i,s,a),_l(a.stateNode),St=c,Ln=y;break;case 5:Gt||Yi(a,s);case 6:if(c=St,y=Ln,St=null,To(i,s,a),St=c,Ln=y,St!==null)if(Ln)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(a.stateNode)}catch(v){dt(a,s,v)}else try{St.removeChild(a.stateNode)}catch(v){dt(a,s,v)}break;case 18:St!==null&&(Ln?(i=St,Pv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),oa(i)):Pv(St,a.stateNode));break;case 4:c=St,y=Ln,St=a.stateNode.containerInfo,Ln=!0,To(i,s,a),St=c,Ln=y;break;case 0:case 11:case 14:case 15:ss(2,a,s),Gt||ss(4,a,s),To(i,s,a);break;case 1:Gt||(Yi(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Uy(a,s,c)),To(i,s,a);break;case 21:To(i,s,a);break;case 22:Gt=(c=Gt)||a.memoizedState!==null,To(i,s,a),Gt=c;break;default:To(i,s,a)}}function Fy(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{oa(i)}catch(a){dt(s,s.return,a)}}}function Hy(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{oa(i)}catch(a){dt(s,s.return,a)}}function bx(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Oy),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Oy),s;default:throw Error(o(435,i.tag))}}function ic(i,s){var a=bx(i);s.forEach(function(c){if(!a.has(c)){a.add(c);var y=Dx.bind(null,i,c);c.then(y,y)}})}function On(i,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=i,x=s,C=x;e:for(;C!==null;){switch(C.tag){case 27:if(fs(C.type)){St=C.stateNode,Ln=!1;break e}break;case 5:St=C.stateNode,Ln=!1;break e;case 3:case 4:St=C.stateNode.containerInfo,Ln=!0;break e}C=C.return}if(St===null)throw Error(o(160));Gy(v,x,y),St=null,Ln=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)zy(s,i),s=s.sibling}var Ci=null;function zy(i,s){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:On(s,i),Bn(i),c&4&&(ss(3,i,i.return),ul(3,i),ss(5,i,i.return));break;case 1:On(s,i),Bn(i),c&512&&(Gt||a===null||Yi(a,a.return)),c&64&&_o&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=Ci;if(On(s,i),Bn(i),c&512&&(Gt||a===null||Yi(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[ai]||v[Ce]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),ln(v,c,a),v[Ce]=i,Pt(v),c=v;break e;case"link":var x=zv("link","href",y).get(c+(a.href||""));if(x){for(var C=0;C<x.length;C++)if(v=x[C],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(C,1);break t}}v=y.createElement(c),ln(v,c,a),y.head.appendChild(v);break;case"meta":if(x=zv("meta","content",y).get(c+(a.content||""))){for(C=0;C<x.length;C++)if(v=x[C],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(C,1);break t}}v=y.createElement(c),ln(v,c,a),y.head.appendChild(v);break;default:throw Error(o(468,c))}v[Ce]=i,Pt(v),c=v}i.stateNode=c}else jv(y,i.type,i.stateNode);else i.stateNode=Hv(y,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?jv(y,i.type,i.stateNode):Hv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Xf(i,i.memoizedProps,a.memoizedProps)}break;case 27:On(s,i),Bn(i),c&512&&(Gt||a===null||Yi(a,a.return)),a!==null&&c&4&&Xf(i,i.memoizedProps,a.memoizedProps);break;case 5:if(On(s,i),Bn(i),c&512&&(Gt||a===null||Yi(a,a.return)),i.flags&32){y=i.stateNode;try{ui(y,"")}catch(Se){dt(i,i.return,Se)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Xf(i,y,a!==null?a.memoizedProps:y)),c&1024&&(eh=!0);break;case 6:if(On(s,i),Bn(i),c&4){if(i.stateNode===null)throw Error(o(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(Se){dt(i,i.return,Se)}}break;case 3:if(_c=null,y=Ci,Ci=yc(s.containerInfo),On(s,i),Ci=y,Bn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{oa(s.containerInfo)}catch(Se){dt(i,i.return,Se)}eh&&(eh=!1,jy(i));break;case 4:c=Ci,Ci=yc(i.stateNode.containerInfo),On(s,i),Bn(i),Ci=c;break;case 12:On(s,i),Bn(i);break;case 31:On(s,i),Bn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ic(i,c)));break;case 13:On(s,i),Bn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(sc=Et()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ic(i,c)));break;case 22:y=i.memoizedState!==null;var B=a!==null&&a.memoizedState!==null,$=_o,ne=Gt;if(_o=$||y,Gt=ne||B,On(s,i),Gt=ne,_o=$,Bn(i),c&8192)e:for(s=i.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(a===null||B||_o||Gt||ir(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){B=a=s;try{if(v=B.stateNode,y)x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{C=B.stateNode;var re=B.memoizedProps.style,Q=re!=null&&re.hasOwnProperty("display")?re.display:null;C.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Se){dt(B,B.return,Se)}}}else if(s.tag===6){if(a===null){B=s;try{B.stateNode.nodeValue=y?"":B.memoizedProps}catch(Se){dt(B,B.return,Se)}}}else if(s.tag===18){if(a===null){B=s;try{var Z=B.stateNode;y?Uv(Z,!0):Uv(B.stateNode,!1)}catch(Se){dt(B,B.return,Se)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,ic(i,a))));break;case 19:On(s,i),Bn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ic(i,c)));break;case 30:break;case 21:break;default:On(s,i),Bn(i)}}function Bn(i){var s=i.flags;if(s&2){try{for(var a,c=i.return;c!==null;){if(Vy(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var y=a.stateNode,v=Wf(i);nc(i,v,y);break;case 5:var x=a.stateNode;a.flags&32&&(ui(x,""),a.flags&=-33);var C=Wf(i);nc(i,C,x);break;case 3:case 4:var B=a.stateNode.containerInfo,$=Wf(i);Zf(i,$,B);break;default:throw Error(o(161))}}catch(ne){dt(i,i.return,ne)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function jy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;jy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Eo(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)By(i,s.alternate,s),s=s.sibling}function ir(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ss(4,s,s.return),ir(s);break;case 1:Yi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Uy(s,s.return,a),ir(s);break;case 27:_l(s.stateNode);case 26:case 5:Yi(s,s.return),ir(s);break;case 22:s.memoizedState===null&&ir(s);break;case 30:ir(s);break;default:ir(s)}i=i.sibling}}function So(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=i,v=s,x=v.flags;switch(v.tag){case 0:case 11:case 15:So(y,v,a),ul(4,v);break;case 1:if(So(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch($){dt(c,c.return,$)}if(c=v,y=c.updateQueue,y!==null){var C=c.stateNode;try{var B=y.shared.hiddenCallbacks;if(B!==null)for(y.shared.hiddenCallbacks=null,y=0;y<B.length;y++)Sg(B[y],C)}catch($){dt(c,c.return,$)}}a&&x&64&&Py(v),cl(v,v.return);break;case 27:Ly(v);case 26:case 5:So(y,v,a),a&&c===null&&x&4&&ky(v),cl(v,v.return);break;case 12:So(y,v,a);break;case 31:So(y,v,a),a&&x&4&&Fy(y,v);break;case 13:So(y,v,a),a&&x&4&&Hy(y,v);break;case 22:v.memoizedState===null&&So(y,v,a),cl(v,v.return);break;case 30:break;default:So(y,v,a)}s=s.sibling}}function th(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Qa(a))}function nh(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Qa(i))}function Ri(i,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Yy(i,s,a,c),s=s.sibling}function Yy(i,s,a,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:Ri(i,s,a,c),y&2048&&ul(9,s);break;case 1:Ri(i,s,a,c);break;case 3:Ri(i,s,a,c),y&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Qa(i)));break;case 12:if(y&2048){Ri(i,s,a,c),i=s.stateNode;try{var v=s.memoizedProps,x=v.id,C=v.onPostCommit;typeof C=="function"&&C(x,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(B){dt(s,s.return,B)}}else Ri(i,s,a,c);break;case 31:Ri(i,s,a,c);break;case 13:Ri(i,s,a,c);break;case 23:break;case 22:v=s.stateNode,x=s.alternate,s.memoizedState!==null?v._visibility&2?Ri(i,s,a,c):dl(i,s):v._visibility&2?Ri(i,s,a,c):(v._visibility|=2,Jr(i,s,a,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&th(x,s);break;case 24:Ri(i,s,a,c),y&2048&&nh(s.alternate,s);break;default:Ri(i,s,a,c)}}function Jr(i,s,a,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=i,x=s,C=a,B=c,$=x.flags;switch(x.tag){case 0:case 11:case 15:Jr(v,x,C,B,y),ul(8,x);break;case 23:break;case 22:var ne=x.stateNode;x.memoizedState!==null?ne._visibility&2?Jr(v,x,C,B,y):dl(v,x):(ne._visibility|=2,Jr(v,x,C,B,y)),y&&$&2048&&th(x.alternate,x);break;case 24:Jr(v,x,C,B,y),y&&$&2048&&nh(x.alternate,x);break;default:Jr(v,x,C,B,y)}s=s.sibling}}function dl(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,c=s,y=c.flags;switch(c.tag){case 22:dl(a,c),y&2048&&th(c.alternate,c);break;case 24:dl(a,c),y&2048&&nh(c.alternate,c);break;default:dl(a,c)}s=s.sibling}}var fl=8192;function Kr(i,s,a){if(i.subtreeFlags&fl)for(i=i.child;i!==null;)Jy(i,s,a),i=i.sibling}function Jy(i,s,a){switch(i.tag){case 26:Kr(i,s,a),i.flags&fl&&i.memoizedState!==null&&uA(a,Ci,i.memoizedState,i.memoizedProps);break;case 5:Kr(i,s,a);break;case 3:case 4:var c=Ci;Ci=yc(i.stateNode.containerInfo),Kr(i,s,a),Ci=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=fl,fl=16777216,Kr(i,s,a),fl=c):Kr(i,s,a));break;default:Kr(i,s,a)}}function Ky(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function hl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];en=c,Qy(c,i)}Ky(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$y(i),i=i.sibling}function $y(i){switch(i.tag){case 0:case 11:case 15:hl(i),i.flags&2048&&ss(9,i,i.return);break;case 3:hl(i);break;case 12:hl(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,oc(i)):hl(i);break;default:hl(i)}}function oc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];en=c,Qy(c,i)}Ky(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ss(8,s,s.return),oc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,oc(s));break;default:oc(s)}i=i.sibling}}function Qy(i,s){for(;en!==null;){var a=en;switch(a.tag){case 0:case 11:case 15:ss(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Qa(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,en=c;else e:for(a=i;en!==null;){c=en;var y=c.sibling,v=c.return;if(qy(c),c===a){en=null;break e}if(y!==null){y.return=v,en=y;break e}en=v}}}var xx={getCacheForType:function(i){var s=rn(Ot),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return rn(Ot).controller.signal}},Ax=typeof WeakMap=="function"?WeakMap:Map,at=0,gt=null,He=null,Ye=0,ct=0,Zn=null,rs=!1,$r=!1,ih=!1,bo=0,Mt=0,as=0,or=0,oh=0,ei=0,Qr=0,ml=null,qn=null,sh=!1,sc=0,Xy=0,rc=1/0,ac=null,ls=null,jt=0,us=null,Xr=null,xo=0,rh=0,ah=null,Wy=null,pl=0,lh=null;function ti(){return(at&2)!==0&&Ye!==0?Ye&-Ye:te.T!==null?mh():ue()}function Zy(){if(ei===0)if((Ye&536870912)===0||$e){var i=bn;bn<<=1,(bn&3932160)===0&&(bn=262144),ei=i}else ei=536870912;return i=Xn.current,i!==null&&(i.flags|=32),ei}function Gn(i,s,a){(i===gt&&(ct===2||ct===9)||i.cancelPendingCommit!==null)&&(Wr(i,0),cs(i,Ye,ei,!1)),Oi(i,a),((at&2)===0||i!==gt)&&(i===gt&&((at&2)===0&&(or|=a),Mt===4&&cs(i,Ye,ei,!1)),Ji(i))}function ev(i,s,a){if((at&6)!==0)throw Error(o(327));var c=!a&&(s&127)===0&&(s&i.expiredLanes)===0||Li(i,s),y=c?Rx(i,s):ch(i,s,!0),v=c;do{if(y===0){$r&&!c&&cs(i,s,0,!1);break}else{if(a=i.current.alternate,v&&!wx(a)){y=ch(i,s,!1),v=!1;continue}if(y===2){if(v=s,i.errorRecoveryDisabledLanes&v)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var C=i;y=ml;var B=C.current.memoizedState.isDehydrated;if(B&&(Wr(C,x).flags|=256),x=ch(C,x,!1),x!==2){if(ih&&!B){C.errorRecoveryDisabledLanes|=v,or|=v,y=4;break e}v=qn,qn=y,v!==null&&(qn===null?qn=v:qn.push.apply(qn,v))}y=x}if(v=!1,y!==2)continue}}if(y===1){Wr(i,0),cs(i,s,0,!0);break}e:{switch(c=i,v=y,v){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:cs(c,s,ei,!rs);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(y=sc+300-Et(),10<y)){if(cs(c,s,ei,!rs),Un(c,0,!0)!==0)break e;xo=s,c.timeoutHandle=Mv(tv.bind(null,c,a,qn,ac,sh,s,ei,or,Qr,rs,v,"Throttled",-0,0),y);break e}tv(c,a,qn,ac,sh,s,ei,or,Qr,rs,v,null,-0,0)}}break}while(!0);Ji(i)}function tv(i,s,a,c,y,v,x,C,B,$,ne,re,Q,Z){if(i.timeoutHandle=-1,re=s.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xt},Jy(s,v,re);var Se=(v&62914560)===v?sc-Et():(v&4194048)===v?Xy-Et():0;if(Se=cA(re,Se),Se!==null){xo=v,i.cancelPendingCommit=Se(uv.bind(null,i,s,v,a,c,y,x,C,B,ne,re,null,Q,Z)),cs(i,v,x,!$);return}}uv(i,s,v,a,c,y,x,C,B)}function wx(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!$n(v(),y))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function cs(i,s,a,c){s&=~oh,s&=~or,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var y=s;0<y;){var v=31-Qt(y),x=1<<v;c[v]=-1,y&=~x}a!==0&&Vo(i,a,s)}function lc(){return(at&6)===0?(gl(0),!1):!0}function uh(){if(He!==null){if(ct===0)var i=He.return;else i=He,ho=$s=null,Af(i),Fr=null,Wa=0,i=He;for(;i!==null;)Dy(i.alternate,i),i=i.return;He=null}}function Wr(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,Yx(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),xo=0,uh(),gt=i,He=a=co(i.current,null),Ye=s,ct=0,Zn=null,rs=!1,$r=Li(i,s),ih=!1,Qr=ei=oh=or=as=Mt=0,qn=ml=null,sh=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var y=31-Qt(c),v=1<<y;s|=i[y],c&=~v}return bo=s,Iu(),a}function nv(i,s){qe=null,te.H=rl,s===Gr||s===Lu?(s=vg(),ct=3):s===hf?(s=vg(),ct=4):ct=s===Gf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Zn=s,He===null&&(Mt=1,Xu(i,di(s,i.current)))}function iv(){var i=Xn.current;return i===null?!0:(Ye&4194048)===Ye?pi===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?i===pi:!1}function ov(){var i=te.H;return te.H=rl,i===null?rl:i}function sv(){var i=te.A;return te.A=xx,i}function uc(){Mt=4,rs||(Ye&4194048)!==Ye&&Xn.current!==null||($r=!0),(as&134217727)===0&&(or&134217727)===0||gt===null||cs(gt,Ye,ei,!1)}function ch(i,s,a){var c=at;at|=2;var y=ov(),v=sv();(gt!==i||Ye!==s)&&(ac=null,Wr(i,s)),s=!1;var x=Mt;e:do try{if(ct!==0&&He!==null){var C=He,B=Zn;switch(ct){case 8:uh(),x=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(s=!0);var $=ct;if(ct=0,Zn=null,Zr(i,C,B,$),a&&$r){x=0;break e}break;default:$=ct,ct=0,Zn=null,Zr(i,C,B,$)}}Cx(),x=Mt;break}catch(ne){nv(i,ne)}while(!0);return s&&i.shellSuspendCounter++,ho=$s=null,at=c,te.H=y,te.A=v,He===null&&(gt=null,Ye=0,Iu()),x}function Cx(){for(;He!==null;)rv(He)}function Rx(i,s){var a=at;at|=2;var c=ov(),y=sv();gt!==i||Ye!==s?(ac=null,rc=Et()+500,Wr(i,s)):$r=Li(i,s);e:do try{if(ct!==0&&He!==null){s=He;var v=Zn;t:switch(ct){case 1:ct=0,Zn=null,Zr(i,s,v,1);break;case 2:case 9:if(gg(v)){ct=0,Zn=null,av(s);break}s=function(){ct!==2&&ct!==9||gt!==i||(ct=7),Ji(i)},v.then(s,s);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:gg(v)?(ct=0,Zn=null,av(s)):(ct=0,Zn=null,Zr(i,s,v,7));break;case 5:var x=null;switch(He.tag){case 26:x=He.memoizedState;case 5:case 27:var C=He;if(x?Yv(x):C.stateNode.complete){ct=0,Zn=null;var B=C.sibling;if(B!==null)He=B;else{var $=C.return;$!==null?(He=$,cc($)):He=null}break t}}ct=0,Zn=null,Zr(i,s,v,5);break;case 6:ct=0,Zn=null,Zr(i,s,v,6);break;case 8:uh(),Mt=6;break e;default:throw Error(o(462))}}Ix();break}catch(ne){nv(i,ne)}while(!0);return ho=$s=null,te.H=c,te.A=y,at=a,He!==null?0:(gt=null,Ye=0,Iu(),Mt)}function Ix(){for(;He!==null&&!Ma();)rv(He)}function rv(i){var s=Ny(i.alternate,i,bo);i.memoizedProps=i.pendingProps,s===null?cc(i):He=s}function av(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=xy(a,s,s.pendingProps,s.type,void 0,Ye);break;case 11:s=xy(a,s,s.pendingProps,s.type.render,s.ref,Ye);break;case 5:Af(s);default:Dy(a,s),s=He=sg(s,bo),s=Ny(a,s,bo)}i.memoizedProps=i.pendingProps,s===null?cc(i):He=s}function Zr(i,s,a,c){ho=$s=null,Af(s),Fr=null,Wa=0;var y=s.return;try{if(yx(i,y,s,a,Ye)){Mt=1,Xu(i,di(a,i.current)),He=null;return}}catch(v){if(y!==null)throw He=y,v;Mt=1,Xu(i,di(a,i.current)),He=null;return}s.flags&32768?($e||c===1?i=!0:$r||(Ye&536870912)!==0?i=!1:(rs=i=!0,(c===2||c===9||c===3||c===6)&&(c=Xn.current,c!==null&&c.tag===13&&(c.flags|=16384))),lv(s,i)):cc(s)}function cc(i){var s=i;do{if((s.flags&32768)!==0){lv(s,rs);return}i=s.return;var a=Tx(s.alternate,s,bo);if(a!==null){He=a;return}if(s=s.sibling,s!==null){He=s;return}He=s=i}while(s!==null);Mt===0&&(Mt=5)}function lv(i,s){do{var a=Ex(i.alternate,i);if(a!==null){a.flags&=32767,He=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){He=i;return}He=i=a}while(i!==null);Mt=6,He=null}function uv(i,s,a,c,y,v,x,C,B){i.cancelPendingCommit=null;do dc();while(jt!==0);if((at&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(v=s.lanes|s.childLanes,v|=Xd,zt(i,a,v,x,C,B),i===gt&&(He=gt=null,Ye=0),Xr=s,us=i,xo=a,rh=v,ah=y,Wy=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Px(ri,function(){return mv(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=te.T,te.T=null,y=me.p,me.p=2,x=at,at|=4;try{Sx(i,s,a)}finally{at=x,me.p=y,te.T=c}}jt=1,cv(),dv(),fv()}}function cv(){if(jt===1){jt=0;var i=us,s=Xr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var c=me.p;me.p=2;var y=at;at|=4;try{zy(s,i);var v=Sh,x=Qp(i.containerInfo),C=v.focusedElem,B=v.selectionRange;if(x!==C&&C&&C.ownerDocument&&$p(C.ownerDocument.documentElement,C)){if(B!==null&&Yd(C)){var $=B.start,ne=B.end;if(ne===void 0&&(ne=$),"selectionStart"in C)C.selectionStart=$,C.selectionEnd=Math.min(ne,C.value.length);else{var re=C.ownerDocument||document,Q=re&&re.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Se=C.textContent.length,Ne=Math.min(B.start,Se),pt=B.end===void 0?Ne:Math.min(B.end,Se);!Z.extend&&Ne>pt&&(x=pt,pt=Ne,Ne=x);var Y=Kp(C,Ne),F=Kp(C,pt);if(Y&&F&&(Z.rangeCount!==1||Z.anchorNode!==Y.node||Z.anchorOffset!==Y.offset||Z.focusNode!==F.node||Z.focusOffset!==F.offset)){var K=re.createRange();K.setStart(Y.node,Y.offset),Z.removeAllRanges(),Ne>pt?(Z.addRange(K),Z.extend(F.node,F.offset)):(K.setEnd(F.node,F.offset),Z.addRange(K))}}}}for(re=[],Z=C;Z=Z.parentNode;)Z.nodeType===1&&re.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<re.length;C++){var oe=re[C];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}bc=!!Eh,Sh=Eh=null}finally{at=y,me.p=c,te.T=a}}i.current=s,jt=2}}function dv(){if(jt===2){jt=0;var i=us,s=Xr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var c=me.p;me.p=2;var y=at;at|=4;try{By(i,s.alternate,s)}finally{at=y,me.p=c,te.T=a}}jt=3}}function fv(){if(jt===4||jt===3){jt=0,We();var i=us,s=Xr,a=xo,c=Wy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?jt=5:(jt=0,Xr=us=null,hv(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(ls=null),he(a),s=s.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Ze,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=te.T,y=me.p,me.p=2,te.T=null;try{for(var v=i.onRecoverableError,x=0;x<c.length;x++){var C=c[x];v(C.value,{componentStack:C.stack})}}finally{te.T=s,me.p=y}}(xo&3)!==0&&dc(),Ji(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===lh?pl++:(pl=0,lh=i):pl=0,gl(0)}}function hv(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Qa(s)))}function dc(){return cv(),dv(),fv(),mv()}function mv(){if(jt!==5)return!1;var i=us,s=rh;rh=0;var a=he(xo),c=te.T,y=me.p;try{me.p=32>a?32:a,te.T=null,a=ah,ah=null;var v=us,x=xo;if(jt=0,Xr=us=null,xo=0,(at&6)!==0)throw Error(o(331));var C=at;if(at|=4,$y(v.current),Yy(v,v.current,x,a),at=C,gl(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Ze,v)}catch{}return!0}finally{me.p=y,te.T=c,hv(i,s)}}function pv(i,s,a){s=di(a,s),s=qf(i.stateNode,s,2),i=ns(i,s,2),i!==null&&(Oi(i,2),Ji(i))}function dt(i,s,a){if(i.tag===3)pv(i,i,a);else for(;s!==null;){if(s.tag===3){pv(s,i,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ls===null||!ls.has(c))){i=di(a,i),a=gy(2),c=ns(s,a,2),c!==null&&(yy(a,c,s,i),Oi(c,2),Ji(c));break}}s=s.return}}function dh(i,s,a){var c=i.pingCache;if(c===null){c=i.pingCache=new Ax;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(a)||(ih=!0,y.add(a),i=Nx.bind(null,i,s,a),s.then(i,i))}function Nx(i,s,a){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,gt===i&&(Ye&a)===a&&(Mt===4||Mt===3&&(Ye&62914560)===Ye&&300>Et()-sc?(at&2)===0&&Wr(i,0):oh|=a,Qr===Ye&&(Qr=0)),Ji(i)}function gv(i,s){s===0&&(s=Ps()),i=Ys(i,s),i!==null&&(Oi(i,s),Ji(i))}function Mx(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),gv(i,a)}function Dx(i,s){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(s),gv(i,a)}function Px(i,s){return ki(i,s)}var fc=null,ea=null,fh=!1,hc=!1,hh=!1,ds=0;function Ji(i){i!==ea&&i.next===null&&(ea===null?fc=ea=i:ea=ea.next=i),hc=!0,fh||(fh=!0,kx())}function gl(i,s){if(!hh&&hc){hh=!0;do for(var a=!1,c=fc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var x=c.suspendedLanes,C=c.pingedLanes;v=(1<<31-Qt(42|i)+1)-1,v&=y&~(x&~C),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,Tv(c,v))}else v=Ye,v=Un(c,c===gt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Li(c,v)||(a=!0,Tv(c,v));c=c.next}while(a);hh=!1}}function Ux(){yv()}function yv(){hc=fh=!1;var i=0;ds!==0&&jx()&&(i=ds);for(var s=Et(),a=null,c=fc;c!==null;){var y=c.next,v=vv(c,s);v===0?(c.next=null,a===null?fc=y:a.next=y,y===null&&(ea=a)):(a=c,(i!==0||(v&3)!==0)&&(hc=!0)),c=y}jt!==0&&jt!==5||gl(i),ds!==0&&(ds=0)}function vv(i,s){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var x=31-Qt(v),C=1<<x,B=y[x];B===-1?((C&a)===0||(C&c)!==0)&&(y[x]=ko(C,s)):B<=s&&(i.expiredLanes|=C),v&=~C}if(s=gt,a=Ye,a=Un(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===s&&(ct===2||ct===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&si(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Li(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(c!==null&&si(c),he(a)){case 2:case 8:a=Dt;break;case 32:a=ri;break;case 268435456:a=no;break;default:a=ri}return c=_v.bind(null,i),a=ki(a,c),i.callbackPriority=s,i.callbackNode=a,s}return c!==null&&c!==null&&si(c),i.callbackPriority=2,i.callbackNode=null,2}function _v(i,s){if(jt!==0&&jt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(dc()&&i.callbackNode!==a)return null;var c=Ye;return c=Un(i,i===gt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(ev(i,c,s),vv(i,Et()),i.callbackNode!=null&&i.callbackNode===a?_v.bind(null,i):null)}function Tv(i,s){if(dc())return null;ev(i,s,!0)}function kx(){Jx(function(){(at&6)!==0?ki(Rt,Ux):yv()})}function mh(){if(ds===0){var i=Br;i===0&&(i=Uo,Uo<<=1,(Uo&261888)===0&&(Uo=256)),ds=i}return ds}function Ev(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Gi(""+i)}function Sv(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function Vx(i,s,a,c,y){if(s==="submit"&&a&&a.stateNode===y){var v=Ev((y[et]||null).action),x=c.submitter;x&&(s=(s=x[et]||null)?Ev(s.formAction):x.getAttribute("formAction"),s!==null&&(v=s,x=null));var C=new Bs("action","action",null,c,y);i.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ds!==0){var B=x?Sv(y,x):new FormData(y);Uf(a,{pending:!0,data:B,method:y.method,action:v},null,B)}}else typeof v=="function"&&(C.preventDefault(),B=x?Sv(y,x):new FormData(y),Uf(a,{pending:!0,data:B,method:y.method,action:v},v,B))},currentTarget:y}]})}}for(var ph=0;ph<Qd.length;ph++){var gh=Qd[ph],Lx=gh.toLowerCase(),Ox=gh[0].toUpperCase()+gh.slice(1);wi(Lx,"on"+Ox)}wi(Zp,"onAnimationEnd"),wi(eg,"onAnimationIteration"),wi(tg,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(ex,"onTransitionRun"),wi(tx,"onTransitionStart"),wi(nx,"onTransitionCancel"),wi(ng,"onTransitionEnd"),qi("onMouseEnter",["mouseout","mouseover"]),qi("onMouseLeave",["mouseout","mouseover"]),qi("onPointerEnter",["pointerout","pointerover"]),qi("onPointerLeave",["pointerout","pointerover"]),xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yl));function bv(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var v=void 0;if(s)for(var x=c.length-1;0<=x;x--){var C=c[x],B=C.instance,$=C.currentTarget;if(C=C.listener,B!==v&&y.isPropagationStopped())break e;v=C,y.currentTarget=$;try{v(y)}catch(ne){Ru(ne)}y.currentTarget=null,v=B}else for(x=0;x<c.length;x++){if(C=c[x],B=C.instance,$=C.currentTarget,C=C.listener,B!==v&&y.isPropagationStopped())break e;v=C,y.currentTarget=$;try{v(y)}catch(ne){Ru(ne)}y.currentTarget=null,v=B}}}}function ze(i,s){var a=s[bi];a===void 0&&(a=s[bi]=new Set);var c=i+"__bubble";a.has(c)||(xv(s,i,2,!1),a.add(c))}function yh(i,s,a){var c=0;s&&(c|=4),xv(a,i,c,s)}var mc="_reactListening"+Math.random().toString(36).slice(2);function vh(i){if(!i[mc]){i[mc]=!0,Er.forEach(function(a){a!=="selectionchange"&&(Bx.has(a)||yh(a,!1,i),yh(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[mc]||(s[mc]=!0,yh("selectionchange",!1,s))}}function xv(i,s,a,c){switch(Zv(s)){case 2:var y=hA;break;case 8:y=mA;break;default:y=Ph}a=y.bind(null,s,a,i),y=void 0,!Ba||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(s,a,{capture:!0,passive:y}):i.addEventListener(s,a,!0):y!==void 0?i.addEventListener(s,a,{passive:y}):i.addEventListener(s,a,!1)}function _h(i,s,a,c,y){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var C=c.stateNode.containerInfo;if(C===y)break;if(x===4)for(x=c.return;x!==null;){var B=x.tag;if((B===3||B===4)&&x.stateNode.containerInfo===y)return;x=x.return}for(;C!==null;){if(x=io(C),x===null)return;if(B=x.tag,B===5||B===6||B===26||B===27){c=v=x;continue e}C=C.parentNode}}c=c.return}fu(function(){var $=v,ne=wr(a),re=[];e:{var Q=ig.get(i);if(Q!==void 0){var Z=Bs,Se=i;switch(i){case"keypress":if(Os(a)===0)break e;case"keydown":case"keyup":Z=Eu;break;case"focusin":Se="focus",Z=Yo;break;case"focusout":Se="blur",Z=Yo;break;case"beforeblur":case"afterblur":Z=Yo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=pu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=bu;break;case Zp:case eg:case tg:Z=Ir;break;case ng:Z=Nr;break;case"scroll":case"scrollend":Z=hu;break;case"wheel":Z=Au;break;case"copy":case"cut":case"paste":Z=yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=za;break;case"toggle":case"beforetoggle":Z=Ko}var Ne=(s&4)!==0,pt=!Ne&&(i==="scroll"||i==="scrollend"),Y=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var F=$,K;F!==null;){var oe=F;if(K=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||K===null||Y===null||(oe=kn(F,Y),oe!=null&&Ne.push(vl(F,oe,K))),pt)break;F=F.return}0<Ne.length&&(Q=new Z(Q,Se,null,a,ne),re.push({event:Q,listeners:Ne}))}}if((s&7)===0){e:{if(Q=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",Q&&a!==Ar&&(Se=a.relatedTarget||a.fromElement)&&(io(Se)||Se[Yn]))break e;if((Z||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Se=a.relatedTarget||a.toElement,Z=$,Se=Se?io(Se):null,Se!==null&&(pt=l(Se),Ne=Se.tag,Se!==pt||Ne!==5&&Ne!==27&&Ne!==6)&&(Se=null)):(Z=null,Se=$),Z!==Se)){if(Ne=mu,oe="onMouseLeave",Y="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(Ne=za,oe="onPointerLeave",Y="onPointerEnter",F="pointer"),pt=Z==null?Q:ks(Z),K=Se==null?Q:ks(Se),Q=new Ne(oe,F+"leave",Z,a,ne),Q.target=pt,Q.relatedTarget=K,oe=null,io(ne)===$&&(Ne=new Ne(Y,F+"enter",Se,a,ne),Ne.target=K,Ne.relatedTarget=pt,oe=Ne),pt=oe,Z&&Se)t:{for(Ne=qx,Y=Z,F=Se,K=0,oe=Y;oe;oe=Ne(oe))K++;oe=0;for(var we=F;we;we=Ne(we))oe++;for(;0<K-oe;)Y=Ne(Y),K--;for(;0<oe-K;)F=Ne(F),oe--;for(;K--;){if(Y===F||F!==null&&Y===F.alternate){Ne=Y;break t}Y=Ne(Y),F=Ne(F)}Ne=null}else Ne=null;Z!==null&&Av(re,Q,Z,Ne,!1),Se!==null&&pt!==null&&Av(re,pt,Se,Ne,!0)}}e:{if(Q=$?ks($):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var nt=Fp;else if(Vn(Q))if(Hp)nt=Xb;else{nt=$b;var xe=Kb}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?$&&La($.elementType)&&(nt=Fp):nt=Qb;if(nt&&(nt=nt(i,$))){Hs(re,nt,a,ne);break e}xe&&xe(i,Q,$),i==="focusout"&&$&&Q.type==="number"&&$.memoizedProps.value!=null&&xr(Q,"number",Q.value)}switch(xe=$?ks($):window,i){case"focusin":(Vn(xe)||xe.contentEditable==="true")&&(Mr=xe,Jd=$,Ja=null);break;case"focusout":Ja=Jd=Mr=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,Xp(re,a,ne);break;case"selectionchange":if(Zb)break;case"keydown":case"keyup":Xp(re,a,ne)}var Ge;if(S)e:{switch(i){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Fe?ut(i,a)&&(Je="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Je="onCompositionStart");Je&&(J&&a.locale!=="ko"&&(Fe||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Fe&&(Ge=Fo()):(Kn=ne,Cr="value"in Kn?Kn.value:Kn.textContent,Fe=!0)),xe=pc($,Je),0<xe.length&&(Je=new Ga(Je,i,null,a,ne),re.push({event:Je,listeners:xe}),Ge?Je.data=Ge:(Ge=Lt(a),Ge!==null&&(Je.data=Ge)))),(Ge=R?Wt(i,a):Zt(i,a))&&(Je=pc($,"onBeforeInput"),0<Je.length&&(xe=new Ga("onBeforeInput","beforeinput",null,a,ne),re.push({event:xe,listeners:Je}),xe.data=Ge)),Vx(re,i,$,a,ne)}bv(re,s)})}function vl(i,s,a){return{instance:i,listener:s,currentTarget:a}}function pc(i,s){for(var a=s+"Capture",c=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=kn(i,a),y!=null&&c.unshift(vl(i,y,v)),y=kn(i,s),y!=null&&c.push(vl(i,y,v))),i.tag===3)return c;i=i.return}return[]}function qx(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Av(i,s,a,c,y){for(var v=s._reactName,x=[];a!==null&&a!==c;){var C=a,B=C.alternate,$=C.stateNode;if(C=C.tag,B!==null&&B===c)break;C!==5&&C!==26&&C!==27||$===null||(B=$,y?($=kn(a,v),$!=null&&x.unshift(vl(a,$,B))):y||($=kn(a,v),$!=null&&x.push(vl(a,$,B)))),a=a.return}x.length!==0&&i.push({event:s,listeners:x})}var Gx=/\r\n?/g,Fx=/\u0000|\uFFFD/g;function wv(i){return(typeof i=="string"?i:""+i).replace(Gx,`
`).replace(Fx,"")}function Cv(i,s){return s=wv(s),wv(i)===s}function mt(i,s,a,c,y,v){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||ui(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&ui(i,""+c);break;case"className":Bo(i,"class",c);break;case"tabIndex":Bo(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Bo(i,a,c);break;case"style":cu(i,c,v);break;case"data":if(s!=="object"){Bo(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Gi(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&mt(i,s,"name",y.name,y,null),mt(i,s,"formEncType",y.formEncType,y,null),mt(i,s,"formMethod",y.formMethod,y,null),mt(i,s,"formTarget",y.formTarget,y,null)):(mt(i,s,"encType",y.encType,y,null),mt(i,s,"method",y.method,y,null),mt(i,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Gi(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Xt);break;case"onScroll":c!=null&&ze("scroll",i);break;case"onScrollEnd":c!=null&&ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Gi(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":ze("beforetoggle",i),ze("toggle",i),Oo(i,"popover",c);break;case"xlinkActuate":li(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":li(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":li(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":li(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":li(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":li(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":li(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":li(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":li(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Oo(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gd.get(a)||a,Oo(i,a,c))}}function Th(i,s,a,c,y,v){switch(a){case"style":cu(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof c=="string"?ui(i,c):(typeof c=="number"||typeof c=="bigint")&&ui(i,""+c);break;case"onScroll":c!=null&&ze("scroll",i);break;case"onScrollEnd":c!=null&&ze("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Xt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),s=a.slice(2,y?a.length-7:void 0),v=i[et]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(s,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Oo(i,a,c)}}}function ln(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",i),ze("load",i);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var x=a[v];if(x!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:mt(i,s,v,x,a,null)}}y&&mt(i,s,"srcSet",a.srcSet,a,null),c&&mt(i,s,"src",a.src,a,null);return;case"input":ze("invalid",i);var C=v=x=y=null,B=null,$=null;for(c in a)if(a.hasOwnProperty(c)){var ne=a[c];if(ne!=null)switch(c){case"name":y=ne;break;case"type":x=ne;break;case"checked":B=ne;break;case"defaultChecked":$=ne;break;case"value":v=ne;break;case"defaultValue":C=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,s));break;default:mt(i,s,c,ne,a,null)}}Vs(i,v,C,B,$,x,y,!1);return;case"select":ze("invalid",i),c=x=v=null;for(y in a)if(a.hasOwnProperty(y)&&(C=a[y],C!=null))switch(y){case"value":v=C;break;case"defaultValue":x=C;break;case"multiple":c=C;default:mt(i,s,y,C,a,null)}s=v,a=x,i.multiple=!!c,s!=null?tt(i,!!c,s,!1):a!=null&&tt(i,!!c,a,!0);return;case"textarea":ze("invalid",i),v=y=c=null;for(x in a)if(a.hasOwnProperty(x)&&(C=a[x],C!=null))switch(x){case"value":c=C;break;case"defaultValue":y=C;break;case"children":v=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:mt(i,s,x,C,a,null)}Go(i,c,y,v);return;case"option":for(B in a)if(a.hasOwnProperty(B)&&(c=a[B],c!=null))switch(B){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:mt(i,s,B,c,a,null)}return;case"dialog":ze("beforetoggle",i),ze("toggle",i),ze("cancel",i),ze("close",i);break;case"iframe":case"object":ze("load",i);break;case"video":case"audio":for(c=0;c<yl.length;c++)ze(yl[c],i);break;case"image":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"embed":case"source":case"link":ze("error",i),ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(c=a[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:mt(i,s,$,c,a,null)}return;default:if(La(s)){for(ne in a)a.hasOwnProperty(ne)&&(c=a[ne],c!==void 0&&Th(i,s,ne,c,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(c=a[C],c!=null&&mt(i,s,C,c,a,null))}function Hx(i,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,x=null,C=null,B=null,$=null,ne=null;for(Z in a){var re=a[Z];if(a.hasOwnProperty(Z)&&re!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":B=re;default:c.hasOwnProperty(Z)||mt(i,s,Z,null,c,re)}}for(var Q in c){var Z=c[Q];if(re=a[Q],c.hasOwnProperty(Q)&&(Z!=null||re!=null))switch(Q){case"type":v=Z;break;case"name":y=Z;break;case"checked":$=Z;break;case"defaultChecked":ne=Z;break;case"value":x=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,s));break;default:Z!==re&&mt(i,s,Q,Z,c,re)}}qo(i,x,C,B,$,ne,v,y);return;case"select":Z=x=C=Q=null;for(v in a)if(B=a[v],a.hasOwnProperty(v)&&B!=null)switch(v){case"value":break;case"multiple":Z=B;default:c.hasOwnProperty(v)||mt(i,s,v,null,c,B)}for(y in c)if(v=c[y],B=a[y],c.hasOwnProperty(y)&&(v!=null||B!=null))switch(y){case"value":Q=v;break;case"defaultValue":C=v;break;case"multiple":x=v;default:v!==B&&mt(i,s,y,v,c,B)}s=C,a=x,c=Z,Q!=null?tt(i,!!a,Q,!1):!!c!=!!a&&(s!=null?tt(i,!!a,s,!0):tt(i,!!a,a?[]:"",!1));return;case"textarea":Z=Q=null;for(C in a)if(y=a[C],a.hasOwnProperty(C)&&y!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:mt(i,s,C,null,c,y)}for(x in c)if(y=c[x],v=a[x],c.hasOwnProperty(x)&&(y!=null||v!=null))switch(x){case"value":Q=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==v&&mt(i,s,x,y,c,v)}Ls(i,Q,Z);return;case"option":for(var Se in a)if(Q=a[Se],a.hasOwnProperty(Se)&&Q!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":i.selected=!1;break;default:mt(i,s,Se,null,c,Q)}for(B in c)if(Q=c[B],Z=a[B],c.hasOwnProperty(B)&&Q!==Z&&(Q!=null||Z!=null))switch(B){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:mt(i,s,B,Q,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)Q=a[Ne],a.hasOwnProperty(Ne)&&Q!=null&&!c.hasOwnProperty(Ne)&&mt(i,s,Ne,null,c,Q);for($ in c)if(Q=c[$],Z=a[$],c.hasOwnProperty($)&&Q!==Z&&(Q!=null||Z!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,s));break;default:mt(i,s,$,Q,c,Z)}return;default:if(La(s)){for(var pt in a)Q=a[pt],a.hasOwnProperty(pt)&&Q!==void 0&&!c.hasOwnProperty(pt)&&Th(i,s,pt,void 0,c,Q);for(ne in c)Q=c[ne],Z=a[ne],!c.hasOwnProperty(ne)||Q===Z||Q===void 0&&Z===void 0||Th(i,s,ne,Q,c,Z);return}}for(var Y in a)Q=a[Y],a.hasOwnProperty(Y)&&Q!=null&&!c.hasOwnProperty(Y)&&mt(i,s,Y,null,c,Q);for(re in c)Q=c[re],Z=a[re],!c.hasOwnProperty(re)||Q===Z||Q==null&&Z==null||mt(i,s,re,Q,c,Z)}function Rv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zx(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,x=y.initiatorType,C=y.duration;if(v&&C&&Rv(x)){for(x=0,C=y.responseEnd,c+=1;c<a.length;c++){var B=a[c],$=B.startTime;if($>C)break;var ne=B.transferSize,re=B.initiatorType;ne&&Rv(re)&&(B=B.responseEnd,x+=ne*(B<C?1:(C-$)/(B-$)))}if(--c,s+=8*(v+x)/(y.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Eh=null,Sh=null;function gc(i){return i.nodeType===9?i:i.ownerDocument}function Iv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nv(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function bh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var xh=null;function jx(){var i=window.event;return i&&i.type==="popstate"?i===xh?!1:(xh=i,!0):(xh=null,!1)}var Mv=typeof setTimeout=="function"?setTimeout:void 0,Yx=typeof clearTimeout=="function"?clearTimeout:void 0,Dv=typeof Promise=="function"?Promise:void 0,Jx=typeof queueMicrotask=="function"?queueMicrotask:typeof Dv<"u"?function(i){return Dv.resolve(null).then(i).catch(Kx)}:Mv;function Kx(i){setTimeout(function(){throw i})}function fs(i){return i==="head"}function Pv(i,s){var a=s,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),oa(s);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")_l(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,_l(a);for(var v=a.firstChild;v;){var x=v.nextSibling,C=v.nodeName;v[ai]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=x}}else a==="body"&&_l(i.ownerDocument.body);a=y}while(a);oa(s)}function Uv(i,s){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function Ah(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ah(a),Us(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function $x(i,s,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[ai])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=gi(i.nextSibling),i===null)break}return null}function Qx(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=gi(i.nextSibling),i===null))return null;return i}function kv(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=gi(i.nextSibling),i===null))return null;return i}function wh(i){return i.data==="$?"||i.data==="$~"}function Ch(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Xx(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function gi(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Rh=null;function Vv(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return gi(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function Lv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function Ov(i,s,a){switch(s=gc(a),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function _l(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Us(i)}var yi=new Map,Bv=new Set;function yc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ao=me.d;me.d={f:Wx,r:Zx,D:eA,C:tA,L:nA,m:iA,X:sA,S:oA,M:rA};function Wx(){var i=Ao.f(),s=lc();return i||s}function Zx(i){var s=oo(i);s!==null&&s.tag===5&&s.type==="form"?ny(s):Ao.r(i)}var ta=typeof document>"u"?null:document;function qv(i,s,a){var c=ta;if(c&&typeof s=="string"&&s){var y=It(s);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),Bv.has(y)||(Bv.add(y),i={rel:i,crossOrigin:a,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),ln(s,"link",i),Pt(s),c.head.appendChild(s)))}}function eA(i){Ao.D(i),qv("dns-prefetch",i,null)}function tA(i,s){Ao.C(i,s),qv("preconnect",i,s)}function nA(i,s,a){Ao.L(i,s,a);var c=ta;if(c&&i&&s){var y='link[rel="preload"][as="'+It(s)+'"]';s==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+It(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+It(a.imageSizes)+'"]')):y+='[href="'+It(i)+'"]';var v=y;switch(s){case"style":v=na(i);break;case"script":v=ia(i)}yi.has(v)||(i=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),yi.set(v,i),c.querySelector(y)!==null||s==="style"&&c.querySelector(Tl(v))||s==="script"&&c.querySelector(El(v))||(s=c.createElement("link"),ln(s,"link",i),Pt(s),c.head.appendChild(s)))}}function iA(i,s){Ao.m(i,s);var a=ta;if(a&&i){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+It(c)+'"][href="'+It(i)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ia(i)}if(!yi.has(v)&&(i=E({rel:"modulepreload",href:i},s),yi.set(v,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(El(v)))return}c=a.createElement("link"),ln(c,"link",i),Pt(c),a.head.appendChild(c)}}}function oA(i,s,a){Ao.S(i,s,a);var c=ta;if(c&&i){var y=xi(c).hoistableStyles,v=na(i);s=s||"default";var x=y.get(v);if(!x){var C={loading:0,preload:null};if(x=c.querySelector(Tl(v)))C.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":s},a),(a=yi.get(v))&&Ih(i,a);var B=x=c.createElement("link");Pt(B),ln(B,"link",i),B._p=new Promise(function($,ne){B.onload=$,B.onerror=ne}),B.addEventListener("load",function(){C.loading|=1}),B.addEventListener("error",function(){C.loading|=2}),C.loading|=4,vc(x,s,c)}x={type:"stylesheet",instance:x,count:1,state:C},y.set(v,x)}}}function sA(i,s){Ao.X(i,s);var a=ta;if(a&&i){var c=xi(a).hoistableScripts,y=ia(i),v=c.get(y);v||(v=a.querySelector(El(y)),v||(i=E({src:i,async:!0},s),(s=yi.get(y))&&Nh(i,s),v=a.createElement("script"),Pt(v),ln(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function rA(i,s){Ao.M(i,s);var a=ta;if(a&&i){var c=xi(a).hoistableScripts,y=ia(i),v=c.get(y);v||(v=a.querySelector(El(y)),v||(i=E({src:i,async:!0,type:"module"},s),(s=yi.get(y))&&Nh(i,s),v=a.createElement("script"),Pt(v),ln(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function Gv(i,s,a,c){var y=(y=De.current)?yc(y):null;if(!y)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=na(a.href),a=xi(y).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=na(a.href);var v=xi(y).hoistableStyles,x=v.get(i);if(x||(y=y.ownerDocument||y,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,x),(v=y.querySelector(Tl(i)))&&!v._p&&(x.instance=v,x.state.loading=5),yi.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},yi.set(i,a),v||aA(y,i,a,x.state))),s&&c===null)throw Error(o(528,""));return x}if(s&&c!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ia(a),a=xi(y).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function na(i){return'href="'+It(i)+'"'}function Tl(i){return'link[rel="stylesheet"]['+i+"]"}function Fv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function aA(i,s,a,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),ln(s,"link",a),Pt(s),i.head.appendChild(s))}function ia(i){return'[src="'+It(i)+'"]'}function El(i){return"script[async]"+i}function Hv(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+It(a.href)+'"]');if(c)return s.instance=c,Pt(c),c;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Pt(c),ln(c,"style",y),vc(c,a.precedence,i),s.instance=c;case"stylesheet":y=na(a.href);var v=i.querySelector(Tl(y));if(v)return s.state.loading|=4,s.instance=v,Pt(v),v;c=Fv(a),(y=yi.get(y))&&Ih(c,y),v=(i.ownerDocument||i).createElement("link"),Pt(v);var x=v;return x._p=new Promise(function(C,B){x.onload=C,x.onerror=B}),ln(v,"link",c),s.state.loading|=4,vc(v,a.precedence,i),s.instance=v;case"script":return v=ia(a.src),(y=i.querySelector(El(v)))?(s.instance=y,Pt(y),y):(c=a,(y=yi.get(v))&&(c=E({},a),Nh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Pt(y),ln(y,"link",c),i.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,vc(c,a.precedence,i));return s.instance}function vc(i,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,x=0;x<c.length;x++){var C=c[x];if(C.dataset.precedence===s)v=C;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function Ih(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Nh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var _c=null;function zv(i,s,a){if(_c===null){var c=new Map,y=_c=new Map;y.set(a,c)}else y=_c,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[ai]||v[Ce]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var x=v.getAttribute(s)||"";x=i+x;var C=c.get(x);C?C.push(v):c.set(x,[v])}}return c}function jv(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function lA(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Yv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function uA(i,s,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=na(c.href),v=s.querySelector(Tl(y));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Tc.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=v,Pt(v);return}v=s.ownerDocument||s,c=Fv(c),(y=yi.get(y))&&Ih(c,y),v=v.createElement("link"),Pt(v);var x=v;x._p=new Promise(function(C,B){x.onload=C,x.onerror=B}),ln(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Tc.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var Mh=0;function cA(i,s){return i.stylesheets&&i.count===0&&Sc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Sc(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+s);0<i.imgBytes&&Mh===0&&(Mh=62500*zx());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Sc(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>Mh?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Tc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ec=null;function Sc(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ec=new Map,s.forEach(dA,i),Ec=null,Tc.call(i))}function dA(i,s){if(!(s.state.loading&4)){var a=Ec.get(i);if(a)var c=a.get(null);else{a=new Map,Ec.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var x=y[v];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),c=x)}c&&a.set(null,c)}y=s.instance,x=y.getAttribute("data-precedence"),v=a.get(x)||c,v===c&&a.set(null,y),a.set(x,y),this.count++,c=Tc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),s.state.loading|=4}}var Sl={$$typeof:z,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function fA(i,s,a,c,y,v,x,C,B){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Jv(i,s,a,c,y,v,x,C,B,$,ne,re){return i=new fA(i,s,a,x,B,$,ne,re,C),s=1,v===!0&&(s|=24),v=Qn(3,null,null,s),i.current=v,v.stateNode=i,s=cf(),s.refCount++,i.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:s},mf(v),i}function Kv(i){return i?(i=Ur,i):Ur}function $v(i,s,a,c,y,v){y=Kv(y),c.context===null?c.context=y:c.pendingContext=y,c=ts(s),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=ns(i,c,s),a!==null&&(Gn(a,i,s),el(a,i,s))}function Qv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Dh(i,s){Qv(i,s),(i=i.alternate)&&Qv(i,s)}function Xv(i){if(i.tag===13||i.tag===31){var s=Ys(i,67108864);s!==null&&Gn(s,i,67108864),Dh(i,67108864)}}function Wv(i){if(i.tag===13||i.tag===31){var s=ti();s=le(s);var a=Ys(i,s);a!==null&&Gn(a,i,s),Dh(i,s)}}var bc=!0;function hA(i,s,a,c){var y=te.T;te.T=null;var v=me.p;try{me.p=2,Ph(i,s,a,c)}finally{me.p=v,te.T=y}}function mA(i,s,a,c){var y=te.T;te.T=null;var v=me.p;try{me.p=8,Ph(i,s,a,c)}finally{me.p=v,te.T=y}}function Ph(i,s,a,c){if(bc){var y=Uh(c);if(y===null)_h(i,s,c,xc,a),e_(i,c);else if(gA(y,i,s,a,c))c.stopPropagation();else if(e_(i,c),s&4&&-1<pA.indexOf(i)){for(;y!==null;){var v=oo(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var x=jn(v.pendingLanes);if(x!==0){var C=v;for(C.pendingLanes|=2,C.entangledLanes|=2;x;){var B=1<<31-Qt(x);C.entanglements[1]|=B,x&=~B}Ji(v),(at&6)===0&&(rc=Et()+500,gl(0))}}break;case 31:case 13:C=Ys(v,2),C!==null&&Gn(C,v,2),lc(),Dh(v,2)}if(v=Uh(c),v===null&&_h(i,s,c,xc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else _h(i,s,c,null,a)}}function Uh(i){return i=wr(i),kh(i)}var xc=null;function kh(i){if(xc=null,i=io(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=u(s),i!==null)return i;i=null}else if(a===31){if(i=f(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return xc=i,null}function Zv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(to()){case Rt:return 2;case Dt:return 8;case ri:case Ds:return 32;case no:return 268435456;default:return 32}default:return 32}}var Vh=!1,hs=null,ms=null,ps=null,bl=new Map,xl=new Map,gs=[],pA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function e_(i,s){switch(i){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":bl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(s.pointerId)}}function Al(i,s,a,c,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},s!==null&&(s=oo(s),s!==null&&Xv(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),i)}function gA(i,s,a,c,y){switch(s){case"focusin":return hs=Al(hs,i,s,a,c,y),!0;case"dragenter":return ms=Al(ms,i,s,a,c,y),!0;case"mouseover":return ps=Al(ps,i,s,a,c,y),!0;case"pointerover":var v=y.pointerId;return bl.set(v,Al(bl.get(v)||null,i,s,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,xl.set(v,Al(xl.get(v)||null,i,s,a,c,y)),!0}return!1}function t_(i){var s=io(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){i.blockedOn=s,ge(i.priority,function(){Wv(a)});return}}else if(s===31){if(s=f(a),s!==null){i.blockedOn=s,ge(i.priority,function(){Wv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ac(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Uh(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Ar=c,a.target.dispatchEvent(c),Ar=null}else return s=oo(a),s!==null&&Xv(s),i.blockedOn=a,!1;s.shift()}return!0}function n_(i,s,a){Ac(i)&&a.delete(s)}function yA(){Vh=!1,hs!==null&&Ac(hs)&&(hs=null),ms!==null&&Ac(ms)&&(ms=null),ps!==null&&Ac(ps)&&(ps=null),bl.forEach(n_),xl.forEach(n_)}function wc(i,s){i.blockedOn===s&&(i.blockedOn=null,Vh||(Vh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,yA)))}var Cc=null;function i_(i){Cc!==i&&(Cc=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Cc===i&&(Cc=null);for(var s=0;s<i.length;s+=3){var a=i[s],c=i[s+1],y=i[s+2];if(typeof c!="function"){if(kh(c||a)===null)continue;break}var v=oo(a);v!==null&&(i.splice(s,3),s-=3,Uf(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function oa(i){function s(B){return wc(B,i)}hs!==null&&wc(hs,i),ms!==null&&wc(ms,i),ps!==null&&wc(ps,i),bl.forEach(s),xl.forEach(s);for(var a=0;a<gs.length;a++){var c=gs[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<gs.length&&(a=gs[0],a.blockedOn===null);)t_(a),a.blockedOn===null&&gs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],x=y[et]||null;if(typeof v=="function")x||i_(a);else if(x){var C=null;if(v&&v.hasAttribute("formAction")){if(y=v,x=v[et]||null)C=x.formAction;else if(kh(y)!==null)continue}else C=x.action;typeof C=="function"?a[c+1]=C:(a.splice(c,3),c-=3),i_(a)}}}function o_(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(x){return y=x})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Lh(i){this._internalRoot=i}Rc.prototype.render=Lh.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,c=ti();$v(a,c,i,s,null,null)},Rc.prototype.unmount=Lh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;$v(i.current,2,null,i,null,null),lc(),s[Yn]=null}};function Rc(i){this._internalRoot=i}Rc.prototype.unstable_scheduleHydration=function(i){if(i){var s=ue();i={blockedOn:null,target:i,priority:s};for(var a=0;a<gs.length&&s!==0&&s<gs[a].priority;a++);gs.splice(a,0,i),a===0&&t_(i)}};var s_=e.version;if(s_!=="19.2.4")throw Error(o(527,s_,"19.2.4"));me.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=h(s),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var vA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ic.isDisabled&&Ic.supportsFiber)try{Ze=Ic.inject(vA),At=Ic}catch{}}return Cl.createRoot=function(i,s){if(!r(i))throw Error(o(299));var a=!1,c="",y=fy,v=hy,x=my;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError)),s=Jv(i,1,!1,null,null,a,c,null,y,v,x,o_),i[Yn]=s.current,vh(i),new Lh(s)},Cl.hydrateRoot=function(i,s,a){if(!r(i))throw Error(o(299));var c=!1,y="",v=fy,x=hy,C=my,B=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(B=a.formState)),s=Jv(i,1,!0,s,a??null,c,y,B,v,x,C,o_),s.context=Kv(null),a=s.current,c=ti(),c=le(c),y=ts(c),y.callback=null,ns(a,y,c),a=c,s.current.lanes=a,Oi(s,a),Ji(s),i[Yn]=s.current,vh(i),new Rc(s)},Cl.version="19.2.4",Cl}var p_;function IA(){if(p_)return qh.exports;p_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qh.exports=RA(),qh.exports}var NA=IA();const MA=WT(NA),$c="/edu/assets/logo-C-dOhpPe.png",Fl={phone:"01011828609",googleSheet:"https://docs.google.com/spreadsheets/d/1vVjXx-RvBcK45bfo-5LY5W0t2amk4rt_KN80he7wAE4/edit?usp=sharing"},_s=[{id:"primary",name:" ",icon:""},{id:"preparatory",name:" ",icon:""},{id:"secondary",name:" ",icon:""},{id:"languages",name:" ",icon:""}],DA=[{stage:"primary",subjects:[" ",""," ",""," "]},{stage:"preparatory",subjects:[" ",""," ",""," ","",""]},{stage:"secondary",subjects:[" ","","",""," "," "," "," ","",""]},{stage:"languages",subjects:["English (Main)","Mathematics (Lang)","Science (Lang)","Arabic","Social Studies"]}],PA=[{id:"t1",name:".  ",subject:" ",imageUrl:"https://picsum.photos/seed/t1/400",whatsapp:"01011828609",availability:"  ",teachingHours:"4:00 - 8:00 ",bio:"       .",grades:[" "," "],stages:["primary"]}],UA=[{id:"c1",title:"  ",description:"        .",stage:"primary",grade:" ",gradeId:"p4",teacherId:"t1",media:[{id:"m1",title:" ",url:"https://www.w3schools.com/html/mov_bbb.mp4",type:"video"},{id:"m2",title:"  ",url:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",type:"pdf"}]}],vn=()=>[{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]}],kA=[{id:"p1",name:"  ",stage:"primary",schedule:vn(),teachers:[],courses:[]},{id:"p2",name:"  ",stage:"primary",schedule:vn(),teachers:[],courses:[]},{id:"p3",name:"  ",stage:"primary",schedule:vn(),teachers:[],courses:[]},{id:"p4",name:"  ",stage:"primary",schedule:vn(),teachers:["t1"],courses:["c1"]},{id:"p5",name:"  ",stage:"primary",schedule:vn(),teachers:["t1"],courses:[]},{id:"p6",name:"  ",stage:"primary",schedule:vn(),teachers:[],courses:[]},{id:"pr1",name:"  ",stage:"preparatory",schedule:vn(),teachers:[],courses:[]},{id:"pr2",name:"  ",stage:"preparatory",schedule:vn(),teachers:[],courses:[]},{id:"pr3",name:"  ",stage:"preparatory",schedule:vn(),teachers:[],courses:[]},{id:"s1",name:"  ",stage:"secondary",schedule:vn(),teachers:[],courses:[]},{id:"s2",name:"  ",stage:"secondary",schedule:vn(),teachers:[],courses:[]},{id:"s3",name:"  ",stage:"secondary",schedule:vn(),teachers:[],courses:[]},{id:"l1",name:"Primary 1 (Languages)",stage:"languages",schedule:vn(),teachers:[],courses:[]},{id:"l2",name:"Primary 2 (Languages)",stage:"languages",schedule:vn(),teachers:[],courses:[]},{id:"l3",name:"Prep 1 (Languages)",stage:"languages",schedule:vn(),teachers:[],courses:[]},{id:"l4",name:"Secondary 1 (Languages)",stage:"languages",schedule:vn(),teachers:[],courses:[]}],VA=({onNavigate:t,isAdmin:e})=>T.jsx("nav",{className:"bg-white border-b sticky top-0 z-50 shadow-sm",children:T.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:T.jsxs("div",{className:"flex justify-between h-20 items-center",children:[T.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("home"),children:[T.jsx("img",{src:$c,alt:"Educators Academy Logo",className:"h-14 w-auto object-contain"}),T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-[#0a192f] font-black text-xl leading-none hidden md:block",children:"Educators Academy"}),T.jsx("span",{className:"text-[#10b981] font-bold text-xs hidden md:block tracking-widest",children:"CENTER OF EXCELLENCE"})]})]}),T.jsxs("div",{className:"hidden md:flex items-center space-x-8 space-x-reverse text-gray-600 font-medium",children:[T.jsx("button",{onClick:()=>t("home"),className:"hover:text-[#10b981] transition font-bold",children:""}),T.jsx("button",{onClick:()=>t("stages"),className:"hover:text-[#10b981] transition font-bold",children:""}),T.jsx("button",{onClick:()=>t("teachers"),className:"hover:text-[#10b981] transition font-bold",children:""}),T.jsx("button",{onClick:()=>t("admin"),className:`px-4 py-2 rounded-xl font-bold transition-all ${e?"bg-[#0a192f] text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e?"  ":"  "})]}),T.jsx("a",{href:`https://wa.me/20${Fl.phone}`,target:"_blank",className:"bg-[#f97316] text-white px-6 py-2.5 rounded-full font-black hover:bg-orange-600 transition shadow-xl shadow-orange-500/20 active:scale-95",children:" "})]})})}),LA=async t=>{const e=localStorage.getItem("google_sheet_webhook_url");if(!e)return console.warn("       ."),!1;try{const n=new URLSearchParams;return n.append("studentName",t.studentName),n.append("parentPhone",t.parentPhone),n.append("teacherName",t.teacherName),n.append("timestamp",t.timestamp),await fetch(e,{method:"POST",mode:"no-cors",body:n}),!0}catch(n){return console.error("  :",n),!1}},ZT=({targetName:t,type:e,onClose:n})=>{const[o,r]=ve.useState(""),[l,u]=ve.useState(""),[f,g]=ve.useState(!1),[h,_]=ve.useState(!1),[E,b]=ve.useState(""),w=async I=>{if(I.preventDefault(),!o||!l)return;g(!0);const U=new Date().toLocaleString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0});await LA({studentName:o,parentPhone:l,teacherName:t,timestamp:U});const W=Fl.phone,z=W.startsWith("0")?`2${W}`:`20${W}`,X=`       : ${o}  /: ${t}`,G=`https://wa.me/${z}?text=${encodeURIComponent(X)}`;b(G),_(!0);const se=window.open(G,"_blank");setTimeout(()=>{(!se||se.closed||typeof se.closed>"u")&&console.warn("Popup blocked or failed to redirect automatically."),g(!1)},1200)};return h?T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/80 backdrop-blur-md animate-in fade-in duration-300",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 text-center shadow-2xl animate-in zoom-in-95",children:[T.jsx("div",{className:"text-7xl mb-6",children:""}),T.jsx("h3",{className:"text-3xl font-black text-[#0a192f] mb-3",children:"  !"}),T.jsx("p",{className:"text-gray-500 font-bold mb-8 text-lg leading-relaxed",children:"   .."}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("a",{href:E,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-[#25d366] text-white py-5 rounded-2xl font-black text-xl hover:bg-[#1ebe57] transition-all shadow-xl shadow-green-500/20",children:"      "}),T.jsx("button",{onClick:n,className:"block w-full text-gray-400 font-bold hover:text-[#0a192f] transition-colors",children:"  "})]})]})}):T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/60 backdrop-blur-sm animate-in fade-in duration-300 text-right",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 border-t-8 border-[#2d5a4c]",children:[T.jsxs("div",{className:"p-8 text-center",children:[T.jsx("h3",{className:"text-3xl font-black text-[#2d5a4c] mb-2",children:"  "}),T.jsxs("p",{className:"text-gray-400 font-bold text-lg",children:[" : ",t]})]}),T.jsxs("form",{onSubmit:w,className:"px-8 pb-10 space-y-5",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2 mr-1",children:"  :"}),T.jsx("input",{required:!0,type:"text",value:o,onChange:I=>r(I.target.value),className:"w-full border border-gray-200 rounded-xl p-4 bg-gray-50 focus:border-[#10b981] outline-none font-black text-right text-lg",placeholder:":   "})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2 mr-1",children:"  :"}),T.jsx("input",{required:!0,type:"tel",value:l,onChange:I=>u(I.target.value),className:"w-full border border-gray-200 rounded-xl p-4 bg-gray-50 focus:border-[#10b981] outline-none font-black text-left text-lg",dir:"ltr",placeholder:"010xxxxxxxx"})]}),T.jsxs("div",{className:"pt-4",children:[T.jsx("button",{type:"submit",disabled:f,className:"w-full bg-[#25d366] text-white py-5 rounded-xl font-black text-xl hover:bg-[#1ebe57] transition-all shadow-xl shadow-green-500/10 disabled:opacity-50",children:f?"  ...":"  "}),T.jsx("button",{type:"button",onClick:n,className:"w-full text-gray-400 font-bold mt-4 hover:text-red-500 transition-colors",children:" "})]})]})]})})},OA=({grade:t,teachers:e,courses:n,onBack:o})=>{const r=G=>{if(!G)return"";if(G.match(/AM|PM||/))return G;const se=G.match(/^(\d{1,2}):(\d{2})$/);if(se){let D=parseInt(se[1]);const N=se[2],M=D>=12?"":"";return D=D%12||12,`${D}:${N} ${M}`}return G},[l,u]=ve.useState("schedule"),[f,g]=ve.useState(null),[h,_]=ve.useState(null),[E,b]=ve.useState(null),[w,I]=ve.useState(!1),L=w&&t.ramadanSchedule&&t.ramadanSchedule.length>0?t.ramadanSchedule:t.schedule,U=e.filter(G=>t.teachers.includes(G.id)),j=n.filter(G=>t.courses.includes(G.id)),W=G=>{const se=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,D=G.match(se);return D&&D[2].length===11?`https://www.youtube.com/embed/${D[2]}`:null},z=G=>G.includes("firebasestorage")||G.endsWith(".mp4")||G.endsWith(".webm")||G.endsWith(".mov"),X=G=>G.includes("drive.google.com")&&!G.includes("/preview")?G.replace("/view","/preview").replace("/edit","/preview"):G.includes("docs.google.com/presentation")||G.includes("docs.google.com/document")?G.replace("/edit","/preview").replace("/view","/preview"):`https://docs.google.com/gview?url=${encodeURIComponent(G)}&embedded=true`;return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[E&&T.jsx(ZT,{targetName:E.name,type:E.type,onClose:()=>b(null)}),T.jsxs("button",{onClick:o,className:"mb-8 text-gray-400 flex items-center gap-3 hover:text-[#0a192f] transition-all group font-black",children:[T.jsx("span",{className:"bg-white p-2 rounded-xl shadow-sm group-hover:-translate-x-1 transition-transform",children:""}),"   "]}),T.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl overflow-hidden mb-12 border border-gray-100 animate-in fade-in zoom-in-95 duration-700",children:[T.jsxs("div",{className:"bg-[#0a192f] p-12 text-white relative overflow-hidden text-right",children:[T.jsxs("div",{className:"relative z-10",children:[T.jsx("h1",{className:"text-5xl font-black mb-4",children:t.name}),T.jsx("p",{className:"text-blue-200/80 text-xl font-medium max-w-2xl",children:"         "})]}),T.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-[#10b981] rounded-full blur-[140px] opacity-20 -mr-40 -mt-40"}),T.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-[#f97316] rounded-full blur-[120px] opacity-10 -ml-32 -mb-32"})]}),T.jsxs("div",{className:"flex border-b bg-gray-50/50 overflow-x-auto whitespace-nowrap scrollbar-hide",children:[T.jsxs("button",{onClick:()=>u("schedule"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${l==="schedule"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[T.jsx("span",{children:""}),"  "]}),T.jsxs("button",{onClick:()=>u("teachers"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${l==="teachers"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[T.jsx("span",{children:""}),"  "]}),T.jsxs("button",{onClick:()=>u("courses"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${l==="courses"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[T.jsx("span",{children:""}),"  "]})]}),T.jsxs("div",{className:"p-8 md:p-14 text-right",children:[l==="schedule"&&T.jsxs("div",{children:[t.ramadanSchedule&&t.ramadanSchedule.length>0&&T.jsx("div",{className:"flex justify-center mb-8",children:T.jsxs("button",{onClick:()=>I(!w),className:`relative px-8 py-3 rounded-full font-black text-lg transition-all flex items-center gap-3 shadow-lg ${w?"bg-[#f97316] text-white":"bg-[#0a192f] text-white hover:bg-[#10b981]"}`,children:[T.jsx("span",{children:w?"   ":"   "}),w&&T.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[T.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),T.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-white"})]})]})}),w&&T.jsxs("div",{className:"text-center mb-6 animate-in fade-in zoom-in",children:[T.jsx("h2",{className:"text-3xl font-black text-[#f97316]",children:"    "}),T.jsx("p",{className:"text-gray-500 font-bold mt-2",children:"    -  "})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-6 animate-in slide-in-from-bottom-8 duration-500",children:L.map((G,se)=>T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsx("div",{className:"bg-[#0a192f] text-white py-4 rounded-3xl text-center font-black shadow-xl",children:G.day}),T.jsxs("div",{className:"space-y-4",children:[(()=>{const D=new Set;return G.slots.map(N=>{const M=(G.day||"").trim(),P=(N.subject||"").trim(),O=(N.time||"").trim(),q=`${M}-${P}-${O}`;if(D.has(q))return null;D.add(q);const k=e.find(Me=>Me.id===N.teacherId);return T.jsxs("div",{onClick:()=>k&&g(k),className:`${N.color} p-6 rounded-[2rem] shadow-sm border border-black/5 flex flex-col gap-3 transform hover:scale-[1.05] hover:shadow-xl transition-all cursor-pointer`,children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("span",{className:"text-3xl",children:N.icon||""}),k&&T.jsxs("span",{className:"text-[10px] bg-white/40 backdrop-blur-md px-3 py-1 rounded-full font-black uppercase text-gray-900",children:["/ ",k.name.split(" ")[1]||k.name]})]}),T.jsxs("div",{children:[T.jsx("div",{className:"font-black text-2xl text-gray-900 leading-tight",children:N.subject}),T.jsx("div",{className:"text-sm font-bold opacity-70 mt-1",children:r(N.time)})]})]},N.id)})})(),G.slots.length===0&&T.jsx("div",{className:"text-gray-200 text-center py-10 italic text-sm border-2 border-dashed border-gray-100 rounded-3xl",children:" "})]})]},se))})]}),l==="teachers"&&T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 animate-in slide-in-from-right-8 duration-500",children:[U.map(G=>T.jsxs("div",{onClick:()=>g(G),className:"group bg-white rounded-[3rem] border border-gray-100 shadow-lg hover:shadow-2xl hover:border-[#10b981]/30 transition-all cursor-pointer overflow-hidden flex flex-col h-full active:scale-95",children:[T.jsxs("div",{className:"h-48 overflow-hidden relative",children:[T.jsx("img",{src:G.imageUrl,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000",alt:G.name}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent"}),T.jsx("div",{className:"absolute bottom-4 right-6 bg-white/20 backdrop-blur-md text-white px-5 py-1.5 rounded-full text-xs font-black",children:" "})]}),T.jsxs("div",{className:"p-8 text-center flex-1 flex flex-col items-center",children:[T.jsx("h3",{className:"text-3xl font-black mb-1 text-[#0a192f]",children:G.name}),T.jsx("p",{className:"text-[#10b981] font-black text-xl mb-6",children:G.subject}),T.jsx("div",{className:"w-full h-px bg-gray-50 mb-6"}),T.jsx("button",{onClick:se=>{se.stopPropagation(),b({name:G.name,type:""})},className:"mt-auto w-full bg-[#10b981] text-white py-5 rounded-2xl font-black text-xl hover:bg-emerald-600 transition-all shadow-xl shadow-emerald-500/10",children:"  "})]})]},G.id)),U.length===0&&T.jsx("div",{className:"col-span-full py-32 text-center",children:T.jsx("p",{className:"text-gray-300 font-black text-2xl",children:"     "})})]}),l==="courses"&&T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 animate-in slide-in-from-left-8 duration-500",children:[j.map(G=>T.jsxs("div",{className:"bg-white border-2 border-gray-100 rounded-[3.5rem] flex flex-col hover:border-[#f97316] transition-all group overflow-hidden shadow-sm hover:shadow-2xl active:scale-[0.98]",children:[T.jsxs("div",{className:"h-64 overflow-hidden relative",children:[T.jsx("img",{src:G.thumbnailUrl,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000",alt:G.title}),T.jsx("div",{className:"absolute top-6 right-6 bg-[#f97316] text-white px-5 py-2 rounded-full text-xs font-black shadow-2xl animate-pulse",children:"  (4K Content)"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"})]}),T.jsxs("div",{className:"p-10 flex-1 flex flex-col",children:[T.jsx("h3",{className:"text-3xl font-black text-[#0a192f] group-hover:text-[#f97316] transition-colors mb-4",children:G.title}),T.jsx("p",{className:"text-gray-500 text-xl leading-relaxed mb-8 flex-1 line-clamp-3",children:G.description}),T.jsxs("div",{className:"space-y-4 mb-10",children:[T.jsxs("h4",{className:"font-black text-sm text-gray-300 uppercase tracking-widest flex items-center gap-2",children:[T.jsx("span",{className:"w-4 h-0.5 bg-gray-200"}),"  "]}),G.media.map(se=>T.jsxs("div",{onClick:()=>_(se),className:"flex items-center justify-between bg-gray-50 hover:bg-orange-50 p-5 rounded-3xl border border-gray-100 hover:border-orange-200 transition-all cursor-pointer group/item",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("span",{className:"text-3xl bg-white w-12 h-12 rounded-2xl shadow-sm flex items-center justify-center",children:se.type==="video"?"":se.type==="pdf"?"":""}),T.jsx("span",{className:"font-black text-xl text-[#0a192f]",children:se.title})]}),T.jsx("span",{className:"text-[#f97316] font-black text-sm opacity-0 group-hover/item:opacity-100 transition-all",children:"  "})]},se.id))]}),T.jsx("button",{onClick:()=>b({name:G.title,type:""}),className:"w-full bg-[#f97316] text-white py-6 rounded-3xl font-black text-2xl hover:bg-orange-600 transition-all shadow-2xl shadow-orange-500/30",children:"    "})]})]},G.id)),j.length===0&&T.jsx("div",{className:"col-span-full py-32 text-center",children:T.jsx("p",{className:"text-gray-300 font-black text-2xl",children:"    "})})]})]})]}),h&&T.jsxs("div",{className:"fixed inset-0 z-[120] bg-[#0a192f]/98 flex flex-col p-4 sm:p-10 animate-in fade-in duration-500",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8 text-right",children:[T.jsxs("div",{className:"flex items-center gap-6",children:[T.jsx("button",{onClick:()=>_(null),className:"text-white bg-white/10 w-16 h-16 rounded-3xl flex items-center justify-center hover:bg-red-500 transition-all text-2xl shadow-2xl",children:""}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-white text-3xl font-black",children:h.title}),T.jsx("p",{className:"text-blue-400 font-bold text-sm",children:"    "})]})]}),T.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"text-white font-black bg-[#10b981] px-10 py-4 rounded-2xl shadow-xl hover:bg-emerald-600 transition-all hidden sm:flex items-center gap-2",children:[T.jsx("span",{children:" / "})," "]})]}),T.jsxs("div",{className:"flex-1 bg-black rounded-[3rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.5)] relative flex items-center justify-center border border-white/10 group",children:[h.type==="video"?W(h.url)?T.jsx("iframe",{src:`${W(h.url)}?autoplay=1&rel=0&modestbranding=1`,className:"w-full h-full border-none shadow-inner",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}):z(h.url)?T.jsx("video",{src:h.url,controls:!0,className:"max-h-full max-w-full rounded-2xl",autoPlay:!0,playsInline:!0,controlsList:"nodownload"}):T.jsxs("div",{className:"text-center p-10",children:[T.jsx("p",{className:"text-white text-2xl font-bold mb-6",children:"     "}),T.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"bg-[#f97316] text-white px-8 py-4 rounded-2xl font-black text-xl hover:bg-orange-600 transition-all shadow-lg inline-flex items-center gap-2",children:[T.jsx("span",{children:"    "})," "]})]}):h.type==="pdf"?T.jsx("iframe",{src:X(h.url),className:"w-full h-full border-none bg-white rounded-2xl",title:"PDF Viewer"}):T.jsx("img",{src:h.url,className:"max-h-full max-w-full object-contain group-hover:scale-105 transition-transform duration-1000"}),T.jsx("div",{className:"absolute top-10 left-10 pointer-events-none opacity-20 hidden sm:block",children:T.jsx("span",{className:"text-white text-9xl font-black select-none",children:"EDUCATORS"})})]})]}),f&&T.jsx("div",{className:"fixed inset-0 z-[110] flex justify-end items-center bg-[#0a192f]/90 backdrop-blur-2xl animate-in fade-in p-0 sm:p-6 duration-500 cursor-pointer",onClick:()=>g(null),children:T.jsxs("div",{className:"bg-white h-full sm:h-auto w-full max-w-2xl sm:rounded-[3.5rem] overflow-hidden shadow-[0_0_80px_rgba(0,0,0,0.4)] animate-in slide-in-from-left duration-700 text-right flex flex-col cursor-default relative",onClick:G=>G.stopPropagation(),children:[T.jsx("button",{onClick:()=>g(null),className:"fixed top-6 left-6 z-[120] bg-red-500 hover:bg-red-600 text-white w-16 h-16 rounded-full flex items-center justify-center shadow-2xl border-4 border-white/20 hover:scale-110 transition-all animate-pulse",title:"",children:T.jsx("span",{className:"text-4xl font-black mb-1",children:""})}),T.jsxs("div",{className:"relative h-80 bg-[#0a192f]",children:[T.jsx("img",{src:f.imageUrl,className:"w-full h-full object-cover opacity-70"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a192f] via-[#0a192f]/40 to-transparent"}),T.jsxs("div",{className:"absolute bottom-10 right-12",children:[T.jsx("h2",{className:"text-5xl font-black text-white mb-2",children:f.name}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("div",{className:"bg-[#10b981] text-white px-6 py-2 rounded-full inline-block font-black text-lg shadow-xl",children:f.subject}),f.whatsapp&&T.jsxs("a",{href:`https://wa.me/20${f.whatsapp}`,target:"_blank",rel:"noopener noreferrer",className:"bg-[#25D366] text-white px-6 py-2 rounded-full inline-flex items-center gap-2 font-black text-lg shadow-xl hover:bg-[#128C7E] transition-colors",children:[T.jsx("span",{children:""})," "]})]})]})]}),T.jsxs("div",{className:"p-12 flex-1 space-y-10 overflow-y-auto",children:[T.jsxs("div",{className:"animate-in slide-in-from-bottom-4 duration-500",children:[T.jsxs("h3",{className:"text-2xl font-black text-[#0a192f] mb-6 flex items-center gap-3",children:[T.jsx("span",{className:"w-1.5 h-6 bg-[#10b981] rounded-full"}),"  "]}),T.jsx("p",{className:"text-gray-600 text-2xl leading-relaxed bg-gray-50/50 p-10 rounded-[2.5rem] border-2 border-dashed border-gray-100 font-medium italic",children:f.bio||"           ."})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 animate-in slide-in-from-bottom-8 duration-700",children:[T.jsxs("div",{className:"bg-emerald-50/50 p-8 rounded-[2rem] border-2 border-emerald-100 flex flex-col items-center text-center",children:[T.jsx("span",{className:"text-4xl mb-3",children:""}),T.jsx("p",{className:"text-gray-400 text-xs font-black mb-1 uppercase tracking-tighter",children:"  "}),T.jsx("p",{className:"text-[#0a192f] font-black text-2xl",children:f.availability||"  "})]}),T.jsxs("div",{className:"bg-blue-50/50 p-8 rounded-[2rem] border-2 border-blue-100 flex flex-col items-center text-center",children:[T.jsx("span",{className:"text-4xl mb-3",children:""}),T.jsx("p",{className:"text-gray-400 text-xs font-black mb-1 uppercase tracking-tighter",children:" "}),T.jsx("p",{className:"text-[#0a192f] font-black text-2xl",children:f.teachingHours||" "})]})]}),f.hourlyRates&&T.jsxs("div",{className:"animate-in slide-in-from-bottom-8 duration-700 delay-100",children:[T.jsxs("h3",{className:"text-2xl font-black text-[#0a192f] mb-6 flex items-center gap-3",children:[T.jsx("span",{className:"w-1.5 h-6 bg-[#f97316] rounded-full"}),"  "]}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries(f.hourlyRates).map(([G,se])=>T.jsxs("div",{className:"flex justify-between items-center bg-orange-50/50 p-6 rounded-2xl border border-orange-100",children:[T.jsx("span",{className:"font-bold text-[#0a192f] text-lg",children:G}),T.jsxs("span",{className:"font-black text-[#f97316] text-xl",children:[se," ."]})]},G))})]}),T.jsxs("div",{className:"flex flex-col gap-4 mt-auto",children:[T.jsx("button",{onClick:()=>b({name:f.name,type:""}),className:"w-full bg-[#10b981] text-white py-6 rounded-3xl font-black text-2xl shadow-2xl shadow-emerald-500/30 hover:bg-emerald-600 transition-all active:scale-95 animate-in slide-in-from-bottom-12 duration-1000",children:"     "}),T.jsx("button",{onClick:()=>g(null),className:"w-full bg-gray-100 text-gray-500 py-4 rounded-3xl font-bold text-xl hover:bg-gray-200 transition-all active:scale-95",children:"  "})]})]})]})})]})};var BA={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let qA,GA;function FA(){return{geminiUrl:qA,vertexUrl:GA}}function HA(t,e,n,o){var r,l;if(!(t!=null&&t.baseUrl)){const u=FA();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:n:(l=u.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mo{}function _e(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function m(t,e,n){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in t))if(Array.isArray(n))t[f]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[f])){const g=t[f];if(Array.isArray(n))for(let h=0;h<g.length;h++){const _=g[h];m(_,e.slice(l+1),n[h])}else for(const h of g)m(h,e.slice(l+1),n)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in t||(t[f]=[{}]);const g=t[f];m(g[0],e.slice(l+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(f=>d(f,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function zA(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),l=o.split("."),u=new Set;let f=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){f=g;break}if(f!==-1&&l.length>f)for(let g=f;g<l.length;g++){const h=l[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}um(t,r,l,0,u)}}function um(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2),f=t;if(u in f&&Array.isArray(f[u]))for(const g of f[u])um(g,e,n,o+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),g={};for(const h of f)g[h]=u[h];for(const[h,_]of Object.entries(g)){const E=[];for(const b of n.slice(o))b==="*"?E.push(h):E.push(b);m(u,E,_)}for(const h of f)delete u[h]}}else{const u=t;l in u&&um(u[l],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Km(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jA(t){const e={},n=d(t,["operationName"]);n!=null&&m(e,["operationName"],n);const o=d(t,["resourceName"]);return o!=null&&m(e,["_url","resourceName"],o),e}function YA(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],KA(u)),e}function JA(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response"]);return u!=null&&m(e,["response"],$A(u)),e}function KA(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>QA(u))),m(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function $A(t){const e={},n=d(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>XA(u))),m(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function QA(t){const e={},n=d(t,["video"]);return n!=null&&m(e,["video"],iw(n)),e}function XA(t){const e={},n=d(t,["_self"]);return n!=null&&m(e,["video"],ow(n)),e}function WA(t){const e={},n=d(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function ZA(t){const e={},n=d(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function ew(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response"]);return u!=null&&m(e,["response"],tw(u)),e}function tw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&m(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function eE(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response"]);return u!=null&&m(e,["response"],nw(u)),e}function nw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&m(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function iw(t){const e={},n=d(t,["uri"]);n!=null&&m(e,["uri"],n);const o=d(t,["encodedVideo"]);o!=null&&m(e,["videoBytes"],Km(o));const r=d(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function ow(t){const e={},n=d(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const o=d(t,["bytesBase64Encoded"]);o!=null&&m(e,["videoBytes"],Km(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var g_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(g_||(g_={}));var y_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(y_||(y_={}));var v_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(v_||(v_={}));var Yt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Yt||(Yt={}));var __;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(__||(__={}));var T_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(T_||(T_={}));var E_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(E_||(E_={}));var S_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(S_||(S_={}));var b_;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(b_||(b_={}));var x_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(x_||(x_={}));var A_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(A_||(A_={}));var w_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(w_||(w_={}));var C_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(C_||(C_={}));var R_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(R_||(R_={}));var I_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(I_||(I_={}));var N_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(N_||(N_={}));var M_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(M_||(M_={}));var D_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(D_||(D_={}));var P_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(P_||(P_={}));var U_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(U_||(U_={}));var k_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(k_||(k_={}));var Qc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Qc||(Qc={}));var V_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(V_||(V_={}));var L_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(L_||(L_={}));var O_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(O_||(O_={}));var cm;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cm||(cm={}));var B_;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(B_||(B_={}));var q_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(q_||(q_={}));var dm;(function(t){t.COLLECTION="COLLECTION"})(dm||(dm={}));var G_;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(G_||(G_={}));var F_;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(F_||(F_={}));var H_;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(H_||(H_={}));var z_;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(z_||(z_={}));var j_;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(j_||(j_={}));var Y_;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Y_||(Y_={}));var J_;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(J_||(J_={}));var K_;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(K_||(K_={}));var $_;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})($_||($_={}));var Q_;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Q_||(Q_={}));var X_;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(X_||(X_={}));var W_;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(W_||(W_={}));var Z_;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Z_||(Z_={}));var e0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(e0||(e0={}));var t0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(t0||(t0={}));var n0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(n0||(n0={}));var i0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(i0||(i0={}));var o0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(o0||(o0={}));var s0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(s0||(s0={}));var r0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(r0||(r0={}));var a0;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(a0||(a0={}));var l0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(l0||(l0={}));var u0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(u0||(u0={}));var c0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(c0||(c0={}));var d0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(d0||(d0={}));var f0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(f0||(f0={}));var h0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(h0||(h0={}));var da;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(da||(da={}));class fm{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Rl{get text(){var e,n,o,r,l,u,f,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const E=[];for(const b of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[w,I]of Object.entries(b))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(I!==null||I!==void 0)&&E.push(w);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;_=!0,h+=b.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,n,o,r,l,u,f,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const E of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[b,w]of Object.entries(E))b!=="inlineData"&&(w!==null||w!==void 0)&&_.push(b);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,o,r,l,u,f,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,o,r,l,u,f,g,h;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,o,r,l,u,f,g,h;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class m0{}class p0{}class sw{}class rw{}class aw{}class lw{}class g0{}class y0{}class v0{}class uw{}class Xc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Xc;let r;const l=e;return n?r=JA(l):r=YA(l),Object.assign(o,r),o}}class _0{}class T0{}class E0{}class S0{}class cw{}class dw{}class fw{}class $m{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new $m,l=ew(e);return Object.assign(o,l),o}}class hw{}class mw{}class pw{}class gw{}class b0{}class yw{get text(){var e,n,o;let r="",l=!1;const u=[];for(const f of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[g,h]of Object.entries(f))g!=="text"&&g!=="thought"&&h!==null&&u.push(g);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,o;let r="";const l=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[f,g]of Object.entries(u))f!=="inlineData"&&g!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class vw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Qm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Qm,l=eE(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function st(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tE(t,e){const n=st(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function nE(t){return Array.isArray(t)?t.map(e=>Wc(e)):[Wc(t)]}function Wc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function iE(t){const e=Wc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function oE(t){const e=Wc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function x0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function sE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>x0(e)):[x0(t)]}function hm(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function A0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function w0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Sn(t){if(t==null)throw new Error("ContentUnion is required");return hm(t)?t:{role:"user",parts:sE(t)}}function Xm(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=Sn(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=Sn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Sn(n)):[Sn(e)]}function vi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(A0(t)||w0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Sn(t)]}const e=[],n=[],o=hm(t[0]);for(const r of t){const l=hm(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(A0(r)||w0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:sE(n)}),e}function _w(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Yt).includes(n[0].toUpperCase())?n[0].toUpperCase():Yt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Yt).includes(o.toUpperCase())?o.toUpperCase():Yt.TYPE_UNSPECIFIED})}}function ha(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&_w(t.type,e);for(const[u,f]of Object.entries(t))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Yt).includes(f.toUpperCase())?f.toUpperCase():Yt.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=ha(f);else if(o.includes(u)){const g=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}g.push(ha(h))}e[u]=g}else if(r.includes(u)){const g={};for(const[h,_]of Object.entries(f))g[h]=ha(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Wm(t){return ha(t)}function Zm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ep(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function xa(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ha(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ha(e.response));return t}function Aa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Tw(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Do(t,e){if(typeof e!="string")throw new Error("name must be a string");return Tw(t,e,"cachedContents")}function rE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Is(t){return Km(t)}function Ew(t){return t!=null&&typeof t=="object"&&"name"in t}function Sw(t){return t!=null&&typeof t=="object"&&"video"in t}function bw(t){return t!=null&&typeof t=="object"&&"uri"in t}function aE(t){var e;let n;if(Ew(t)&&(n=t.name),!(bw(t)&&(n=t.uri,n===void 0))&&!(Sw(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function lE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function uE(t){for(const e of["models","tunedModels","publisherModels"])if(xw(t,e))return t[e];return[]}function xw(t,e){return t!==null&&typeof t=="object"&&e in t}function Aw(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function ww(t,e={}){const n=[],o=new Set;for(const r of t){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const u=Aw(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function cE(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Cw(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function dE(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function wa(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function fE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rw(t){const e={},n=d(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const o=d(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>lC(u))),m(e,["inlinedResponses"],l)}const r=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["inlinedEmbedContentResponses"],l)}return e}function Iw(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const o=d(t,["gcsDestination","outputUriPrefix"]);o!=null&&m(e,["gcsUri"],o);const r=d(t,["bigqueryDestination","outputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function Nw(t){const e={},n=d(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const o=d(t,["gcsUri"]);o!=null&&m(e,["gcsDestination","outputUriPrefix"],o);const r=d(t,["bigqueryUri"]);if(r!=null&&m(e,["bigqueryDestination","outputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Fc(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const o=d(t,["metadata","displayName"]);o!=null&&m(e,["displayName"],o);const r=d(t,["metadata","state"]);r!=null&&m(e,["state"],fE(r));const l=d(t,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const u=d(t,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const f=d(t,["metadata","updateTime"]);f!=null&&m(e,["updateTime"],f);const g=d(t,["metadata","model"]);g!=null&&m(e,["model"],g);const h=d(t,["metadata","output"]);return h!=null&&m(e,["dest"],Rw(dE(h))),e}function mm(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const o=d(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=d(t,["state"]);r!=null&&m(e,["state"],fE(r));const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["createTime"]);u!=null&&m(e,["createTime"],u);const f=d(t,["startTime"]);f!=null&&m(e,["startTime"],f);const g=d(t,["endTime"]);g!=null&&m(e,["endTime"],g);const h=d(t,["updateTime"]);h!=null&&m(e,["updateTime"],h);const _=d(t,["model"]);_!=null&&m(e,["model"],_);const E=d(t,["inputConfig"]);E!=null&&m(e,["src"],Mw(E));const b=d(t,["outputConfig"]);b!=null&&m(e,["dest"],Iw(dE(b)));const w=d(t,["completionStats"]);return w!=null&&m(e,["completionStats"],w),e}function Mw(t){const e={},n=d(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const o=d(t,["gcsSource","uris"]);o!=null&&m(e,["gcsUri"],o);const r=d(t,["bigquerySource","inputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function Dw(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=d(e,["fileName"]);o!=null&&m(n,["fileName"],o);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>aC(t,u))),m(n,["requests","requests"],l)}return n}function Pw(t){const e={},n=d(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const o=d(t,["gcsUri"]);o!=null&&m(e,["gcsSource","uris"],o);const r=d(t,["bigqueryUri"]);if(r!=null&&m(e,["bigquerySource","inputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Uw(t){const e={},n=d(t,["data"]);if(n!=null&&m(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function kw(t,e){const n={},o=d(e,["name"]);return o!=null&&m(n,["_url","name"],wa(t,o)),n}function Vw(t,e){const n={},o=d(e,["name"]);return o!=null&&m(n,["_url","name"],wa(t,o)),n}function Lw(t){const e={},n=d(t,["content"]);n!=null&&m(e,["content"],n);const o=d(t,["citationMetadata"]);o!=null&&m(e,["citationMetadata"],Ow(o));const r=d(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const l=d(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const u=d(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const f=d(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const g=d(t,["index"]);g!=null&&m(e,["index"],g);const h=d(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=d(t,["safetyRatings"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(w=>w)),m(e,["safetyRatings"],b)}const E=d(t,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function Ow(t){const e={},n=d(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["citations"],o)}return e}function hE(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>pC(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function Bw(t,e){const n={},o=d(t,["displayName"]);if(e!==void 0&&o!=null&&m(e,["batch","displayName"],o),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function qw(t,e){const n={},o=d(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=d(t,["dest"]);return e!==void 0&&r!=null&&m(e,["outputConfig"],Nw(Cw(r))),n}function C0(t,e){const n={},o=d(e,["model"]);o!=null&&m(n,["_url","model"],st(t,o));const r=d(e,["src"]);r!=null&&m(n,["batch","inputConfig"],Dw(t,cE(t,r)));const l=d(e,["config"]);return l!=null&&Bw(l,n),n}function Gw(t,e){const n={},o=d(e,["model"]);o!=null&&m(n,["model"],st(t,o));const r=d(e,["src"]);r!=null&&m(n,["inputConfig"],Pw(cE(t,r)));const l=d(e,["config"]);return l!=null&&qw(l,n),n}function Fw(t,e){const n={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["batch","displayName"],o),n}function Hw(t,e){const n={},o=d(e,["model"]);o!=null&&m(n,["_url","model"],st(t,o));const r=d(e,["src"]);r!=null&&m(n,["batch","inputConfig"],Qw(t,r));const l=d(e,["config"]);return l!=null&&Fw(l,n),n}function zw(t,e){const n={},o=d(e,["name"]);return o!=null&&m(n,["_url","name"],wa(t,o)),n}function jw(t,e){const n={},o=d(e,["name"]);return o!=null&&m(n,["_url","name"],wa(t,o)),n}function Yw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);return l!=null&&m(e,["error"],l),e}function Jw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);return l!=null&&m(e,["error"],l),e}function Kw(t,e){const n={},o=d(e,["contents"]);if(o!=null){let l=Xm(t,o);Array.isArray(l)&&(l=l.map(u=>u)),m(n,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(m(n,["_self"],$w(r,n)),zA(n,{"requests[].*":"requests[].request.*"})),n}function $w(t,e){const n={},o=d(t,["taskType"]);e!==void 0&&o!=null&&m(e,["requests[]","taskType"],o);const r=d(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Qw(t,e){const n={},o=d(e,["fileName"]);o!=null&&m(n,["file_name"],o);const r=d(e,["inlinedRequests"]);return r!=null&&m(n,["requests"],Kw(t,r)),n}function Xw(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Ww(t){const e={},n=d(t,["id"]);n!=null&&m(e,["id"],n);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zw(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&m(e,["allowedFunctionNames"],n);const o=d(t,["mode"]);if(o!=null&&m(e,["mode"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function eC(t,e,n){const o={},r=d(e,["systemInstruction"]);n!==void 0&&r!=null&&m(n,["systemInstruction"],hE(Sn(r)));const l=d(e,["temperature"]);l!=null&&m(o,["temperature"],l);const u=d(e,["topP"]);u!=null&&m(o,["topP"],u);const f=d(e,["topK"]);f!=null&&m(o,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&m(o,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(o,["stopSequences"],_);const E=d(e,["responseLogprobs"]);E!=null&&m(o,["responseLogprobs"],E);const b=d(e,["logprobs"]);b!=null&&m(o,["logprobs"],b);const w=d(e,["presencePenalty"]);w!=null&&m(o,["presencePenalty"],w);const I=d(e,["frequencyPenalty"]);I!=null&&m(o,["frequencyPenalty"],I);const L=d(e,["seed"]);L!=null&&m(o,["seed"],L);const U=d(e,["responseMimeType"]);U!=null&&m(o,["responseMimeType"],U);const j=d(e,["responseSchema"]);j!=null&&m(o,["responseSchema"],Wm(j));const W=d(e,["responseJsonSchema"]);if(W!=null&&m(o,["responseJsonSchema"],W),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=d(e,["safetySettings"]);if(n!==void 0&&z!=null){let k=z;Array.isArray(k)&&(k=k.map(Me=>gC(Me))),m(n,["safetySettings"],k)}const X=d(e,["tools"]);if(n!==void 0&&X!=null){let k=Aa(X);Array.isArray(k)&&(k=k.map(Me=>vC(xa(Me)))),m(n,["tools"],k)}const G=d(e,["toolConfig"]);if(n!==void 0&&G!=null&&m(n,["toolConfig"],yC(G)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=d(e,["cachedContent"]);n!==void 0&&se!=null&&m(n,["cachedContent"],Do(t,se));const D=d(e,["responseModalities"]);D!=null&&m(o,["responseModalities"],D);const N=d(e,["mediaResolution"]);N!=null&&m(o,["mediaResolution"],N);const M=d(e,["speechConfig"]);if(M!=null&&m(o,["speechConfig"],Zm(M)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=d(e,["thinkingConfig"]);P!=null&&m(o,["thinkingConfig"],P);const O=d(e,["imageConfig"]);O!=null&&m(o,["imageConfig"],rC(O));const q=d(e,["enableEnhancedCivicAnswers"]);if(q!=null&&m(o,["enableEnhancedCivicAnswers"],q),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function tC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(h=>Lw(h))),m(e,["candidates"],g)}const r=d(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const l=d(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const u=d(t,["responseId"]);u!=null&&m(e,["responseId"],u);const f=d(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function nC(t,e){const n={},o=d(e,["name"]);return o!=null&&m(n,["_url","name"],wa(t,o)),n}function iC(t,e){const n={},o=d(e,["name"]);return o!=null&&m(n,["_url","name"],wa(t,o)),n}function oC(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function sC(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function rC(t){const e={},n=d(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const o=d(t,["imageSize"]);if(o!=null&&m(e,["imageSize"],o),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function aC(t,e){const n={},o=d(e,["model"]);o!=null&&m(n,["request","model"],st(t,o));const r=d(e,["contents"]);if(r!=null){let f=vi(r);Array.isArray(f)&&(f=f.map(g=>hE(g))),m(n,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&m(n,["metadata"],l);const u=d(e,["config"]);return u!=null&&m(n,["request","generationConfig"],eC(t,u,d(n,["request"],{}))),n}function lC(t){const e={},n=d(t,["response"]);n!=null&&m(e,["response"],tC(n));const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["error"]);return r!=null&&m(e,["error"],r),e}function uC(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);if(e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function cC(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const l=d(t,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),n}function dC(t){const e={},n=d(t,["config"]);return n!=null&&uC(n,e),e}function fC(t){const e={},n=d(t,["config"]);return n!=null&&cC(n,e),e}function hC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Fc(u))),m(e,["batchJobs"],l)}return e}function mC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>mm(u))),m(e,["batchJobs"],l)}return e}function pC(t){const e={},n=d(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],Xw(l));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],Ww(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const g=d(t,["inlineData"]);g!=null&&m(e,["inlineData"],Uw(g));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const E=d(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const b=d(t,["videoMetadata"]);return b!=null&&m(e,["videoMetadata"],b),e}function gC(t){const e={},n=d(t,["category"]);if(n!=null&&m(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&m(e,["threshold"],o),e}function yC(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&m(e,["retrievalConfig"],n);const o=d(t,["functionCallingConfig"]);return o!=null&&m(e,["functionCallingConfig"],Zw(o)),e}function vC(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const r=d(t,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],oC(u));const f=d(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],sC(f));const g=d(t,["googleSearchRetrieval"]);g!=null&&m(e,["googleSearchRetrieval"],g);const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Co;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Co||(Co={}));class mr{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _C extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mr(Co.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=C0(this.apiClient,e),o=n._url,r=_e("{model}:batchGenerateContent",o),f=n.batch.inputConfig.requests,g=f.requests,h=[];for(const _ of g){const E=Object.assign({},_);if(E.systemInstruction){const b=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=b,E.request=w}h.push(E)}return f.requests=h,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(u)o.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=Gw(this.apiClient,e);return f=_e("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>mm(_))}else{const h=C0(this.apiClient,e);return f=_e("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Fc(_))}}async createEmbeddingsInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Hw(this.apiClient,e);return l=_e("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>Fc(g))}}async get(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=iC(this.apiClient,e);return f=_e("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>mm(_))}else{const h=nC(this.apiClient,e);return f=_e("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Fc(_))}}async cancel(e){var n,o,r,l;let u="",f={};if(this.apiClient.isVertexAI()){const g=Vw(this.apiClient,e);u=_e("batchPredictionJobs/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=kw(this.apiClient,e);u=_e("batches/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=fC(e);return f=_e("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=mC(_),b=new b0;return Object.assign(b,E),b})}else{const h=dC(e);return f=_e("batches",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=hC(_),b=new b0;return Object.assign(b,E),b})}}async delete(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=jw(this.apiClient,e);return f=_e("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>Jw(_))}else{const h=zw(this.apiClient,e);return f=_e("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>Yw(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TC(t){const e={},n=d(t,["data"]);if(n!=null&&m(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function R0(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>HC(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function EC(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let _=vi(u);Array.isArray(_)&&(_=_.map(E=>R0(E))),m(e,["contents"],_)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],R0(Sn(f)));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(E=>jC(E))),m(e,["tools"],_)}const h=d(t,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],zC(h)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function SC(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let E=vi(u);Array.isArray(E)&&(E=E.map(b=>b)),m(e,["contents"],E)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],Sn(f));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(b=>YC(b))),m(e,["tools"],E)}const h=d(t,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const _=d(t,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),n}function bC(t,e){const n={},o=d(e,["model"]);o!=null&&m(n,["model"],tE(t,o));const r=d(e,["config"]);return r!=null&&EC(r,n),n}function xC(t,e){const n={},o=d(e,["model"]);o!=null&&m(n,["model"],tE(t,o));const r=d(e,["config"]);return r!=null&&SC(r,n),n}function AC(t,e){const n={},o=d(e,["name"]);return o!=null&&m(n,["_url","name"],Do(t,o)),n}function wC(t,e){const n={},o=d(e,["name"]);return o!=null&&m(n,["_url","name"],Do(t,o)),n}function CC(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function RC(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function IC(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function NC(t){const e={},n=d(t,["id"]);n!=null&&m(e,["id"],n);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function MC(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&m(e,["allowedFunctionNames"],n);const o=d(t,["mode"]);if(o!=null&&m(e,["mode"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function DC(t){const e={},n=d(t,["description"]);n!=null&&m(e,["description"],n);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=d(t,["response"]);u!=null&&m(e,["response"],u);const f=d(t,["responseJsonSchema"]);if(f!=null&&m(e,["responseJsonSchema"],f),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function PC(t,e){const n={},o=d(e,["name"]);return o!=null&&m(n,["_url","name"],Do(t,o)),n}function UC(t,e){const n={},o=d(e,["name"]);return o!=null&&m(n,["_url","name"],Do(t,o)),n}function kC(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function VC(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function LC(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function OC(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function BC(t){const e={},n=d(t,["config"]);return n!=null&&LC(n,e),e}function qC(t){const e={},n=d(t,["config"]);return n!=null&&OC(n,e),e}function GC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function FC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function HC(t){const e={},n=d(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],IC(l));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],NC(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const g=d(t,["inlineData"]);g!=null&&m(e,["inlineData"],TC(g));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const E=d(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const b=d(t,["videoMetadata"]);return b!=null&&m(e,["videoMetadata"],b),e}function zC(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&m(e,["retrievalConfig"],n);const o=d(t,["functionCallingConfig"]);return o!=null&&m(e,["functionCallingConfig"],MC(o)),e}function jC(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const r=d(t,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],kC(u));const f=d(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],VC(f));const g=d(t,["googleSearchRetrieval"]);g!=null&&m(e,["googleSearchRetrieval"],g);const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function YC(t){const e={},n=d(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const o=d(t,["computerUse"]);if(o!=null&&m(e,["computerUse"],o),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&m(e,["codeExecution"],r);const l=d(t,["enterpriseWebSearch"]);l!=null&&m(e,["enterpriseWebSearch"],l);const u=d(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(b=>DC(b))),m(e,["functionDeclarations"],E)}const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const g=d(t,["googleSearch"]);g!=null&&m(e,["googleSearch"],g);const h=d(t,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const _=d(t,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function JC(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),n}function KC(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),n}function $C(t,e){const n={},o=d(e,["name"]);o!=null&&m(n,["_url","name"],Do(t,o));const r=d(e,["config"]);return r!=null&&JC(r,n),n}function QC(t,e){const n={},o=d(e,["name"]);o!=null&&m(n,["_url","name"],Do(t,o));const r=d(e,["config"]);return r!=null&&KC(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XC extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mr(Co.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=xC(this.apiClient,e);return f=_e("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=bC(this.apiClient,e);return f=_e("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=UC(this.apiClient,e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=PC(this.apiClient,e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=wC(this.apiClient,e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=RC(_),b=new E0;return Object.assign(b,E),b})}else{const h=AC(this.apiClient,e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=CC(_),b=new E0;return Object.assign(b,E),b})}}async update(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=QC(this.apiClient,e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=$C(this.apiClient,e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=qC(e);return f=_e("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=FC(_),b=new S0;return Object.assign(b,E),b})}else{const h=BC(e);return f=_e("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=GC(_),b=new S0;return Object.assign(b,E),b})}}}function Zc(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function I0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ue(t){return this instanceof Ue?(this.v=t,this):new Ue(t)}function Ii(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(I){return Promise.resolve(I).then(w,E)}}function f(w,I){o[w]&&(r[w]=function(L){return new Promise(function(U,j){l.push([w,L,U,j])>1||g(w,L)})},I&&(r[w]=I(r[w])))}function g(w,I){try{h(o[w](I))}catch(L){b(l[0][3],L)}}function h(w){w.value instanceof Ue?Promise.resolve(w.value.v).then(_,E):b(l[0][2],w)}function _(w){g("next",w)}function E(w){g("throw",w)}function b(w,I){w(I),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Ni(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof I0=="function"?I0(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(u){return new Promise(function(f,g){u=t[l](u),r(f,g,u.done,u.value)})}}function r(l,u,f,g){Promise.resolve(g).then(function(h){l({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WC(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:mE(n)}function mE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ZC(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function N0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let l=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),l&&!mE(t[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class eR{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new tR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class tR{constructor(e,n,o,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),ZC(l)}async sendMessage(e){var n;await this.sendPromise;const o=Sn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,u,f;const g=await r,h=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let b=[];_!=null&&(b=(f=_.slice(E))!==null&&f!==void 0?f:[]);const w=h?[h]:[];this.recordHistory(o,w,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=Sn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?N0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Ii(this,arguments,function*(){var r,l,u,f,g,h;const _=[];try{for(var E=!0,b=Ni(e),w;w=yield Ue(b.next()),r=w.done,!r;E=!0){f=w.value,E=!1;const I=f;if(WC(I)){const L=(h=(g=I.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;L!==void 0&&_.push(L)}yield yield Ue(I)}}catch(I){l={error:I}}finally{try{!E&&!r&&(u=b.return)&&(yield Ue(u.call(b)))}finally{if(l)throw l.error}}this.recordHistory(n,_)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...N0(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Hl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nR(t){const e={},n=d(t,["file"]);return n!=null&&m(e,["file"],n),e}function iR(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function oR(t){const e={},n=d(t,["name"]);return n!=null&&m(e,["_url","file"],aE(n)),e}function sR(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function rR(t){const e={},n=d(t,["name"]);return n!=null&&m(e,["_url","file"],aE(n)),e}function aR(t){const e={},n=d(t,["uris"]);return n!=null&&m(e,["uris"],n),e}function lR(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function uR(t){const e={},n=d(t,["config"]);return n!=null&&lR(n,e),e}function cR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["files"],l)}return e}function dR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fR extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mr(Co.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uR(e);return l=_e("files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=cR(g),_=new hw;return Object.assign(_,h),_})}}async createInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=nR(e);return l=_e("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const h=iR(g),_=new mw;return Object.assign(_,h),_})}}async get(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rR(e);return l=_e("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=oR(e);return l=_e("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=sR(g),_=new pw;return Object.assign(_,h),_})}}async registerFilesInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=aR(e);return l=_e("files:register",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const h=dR(g),_=new gw;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hc(t){const e={},n=d(t,["data"]);if(n!=null&&m(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function hR(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>IR(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function mR(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function pR(t){const e={},n=d(t,["id"]);n!=null&&m(e,["id"],n);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gR(t){const e={},n=d(t,["description"]);n!=null&&m(e,["description"],n);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=d(t,["response"]);u!=null&&m(e,["response"],u);const f=d(t,["responseJsonSchema"]);if(f!=null&&m(e,["responseJsonSchema"],f),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function yR(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const o=d(t,["responseJsonSchema"]);o!=null&&m(e,["responseJsonSchema"],o);const r=d(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const l=d(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const u=d(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const f=d(t,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const g=d(t,["logprobs"]);g!=null&&m(e,["logprobs"],g);const h=d(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=d(t,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const E=d(t,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const b=d(t,["responseLogprobs"]);b!=null&&m(e,["responseLogprobs"],b);const w=d(t,["responseMimeType"]);w!=null&&m(e,["responseMimeType"],w);const I=d(t,["responseModalities"]);I!=null&&m(e,["responseModalities"],I);const L=d(t,["responseSchema"]);L!=null&&m(e,["responseSchema"],L);const U=d(t,["routingConfig"]);U!=null&&m(e,["routingConfig"],U);const j=d(t,["seed"]);j!=null&&m(e,["seed"],j);const W=d(t,["speechConfig"]);W!=null&&m(e,["speechConfig"],W);const z=d(t,["stopSequences"]);z!=null&&m(e,["stopSequences"],z);const X=d(t,["temperature"]);X!=null&&m(e,["temperature"],X);const G=d(t,["thinkingConfig"]);G!=null&&m(e,["thinkingConfig"],G);const se=d(t,["topK"]);se!=null&&m(e,["topK"],se);const D=d(t,["topP"]);if(D!=null&&m(e,["topP"],D),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function _R(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function TR(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(t,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],ep(E));const b=d(t,["thinkingConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","thinkingConfig"],b);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const I=d(t,["systemInstruction"]);e!==void 0&&I!=null&&m(e,["setup","systemInstruction"],hR(Sn(I)));const L=d(t,["tools"]);if(e!==void 0&&L!=null){let se=Aa(L);Array.isArray(se)&&(se=se.map(D=>MR(xa(D)))),m(e,["setup","tools"],se)}const U=d(t,["sessionResumption"]);e!==void 0&&U!=null&&m(e,["setup","sessionResumption"],NR(U));const j=d(t,["inputAudioTranscription"]);e!==void 0&&j!=null&&m(e,["setup","inputAudioTranscription"],j);const W=d(t,["outputAudioTranscription"]);e!==void 0&&W!=null&&m(e,["setup","outputAudioTranscription"],W);const z=d(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const X=d(t,["contextWindowCompression"]);e!==void 0&&X!=null&&m(e,["setup","contextWindowCompression"],X);const G=d(t,["proactivity"]);if(e!==void 0&&G!=null&&m(e,["setup","proactivity"],G),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ER(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],yR(o));const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(t,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],ep(E));const b=d(t,["thinkingConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","thinkingConfig"],b);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const I=d(t,["systemInstruction"]);e!==void 0&&I!=null&&m(e,["setup","systemInstruction"],Sn(I));const L=d(t,["tools"]);if(e!==void 0&&L!=null){let D=Aa(L);Array.isArray(D)&&(D=D.map(N=>DR(xa(N)))),m(e,["setup","tools"],D)}const U=d(t,["sessionResumption"]);e!==void 0&&U!=null&&m(e,["setup","sessionResumption"],U);const j=d(t,["inputAudioTranscription"]);e!==void 0&&j!=null&&m(e,["setup","inputAudioTranscription"],j);const W=d(t,["outputAudioTranscription"]);e!==void 0&&W!=null&&m(e,["setup","outputAudioTranscription"],W);const z=d(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const X=d(t,["contextWindowCompression"]);e!==void 0&&X!=null&&m(e,["setup","contextWindowCompression"],X);const G=d(t,["proactivity"]);e!==void 0&&G!=null&&m(e,["setup","proactivity"],G);const se=d(t,["explicitVadSignal"]);return e!==void 0&&se!=null&&m(e,["setup","explicitVadSignal"],se),n}function SR(t,e){const n={},o=d(e,["model"]);o!=null&&m(n,["setup","model"],st(t,o));const r=d(e,["config"]);return r!=null&&m(n,["config"],TR(r,n)),n}function bR(t,e){const n={},o=d(e,["model"]);o!=null&&m(n,["setup","model"],st(t,o));const r=d(e,["config"]);return r!=null&&m(n,["config"],ER(r,n)),n}function xR(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],n),e}function AR(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["weightedPrompts"],o)}return e}function wR(t){const e={},n=d(t,["media"]);if(n!=null){let h=nE(n);Array.isArray(h)&&(h=h.map(_=>Hc(_))),m(e,["mediaChunks"],h)}const o=d(t,["audio"]);o!=null&&m(e,["audio"],Hc(oE(o)));const r=d(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&m(e,["video"],Hc(iE(l)));const u=d(t,["text"]);u!=null&&m(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const g=d(t,["activityEnd"]);return g!=null&&m(e,["activityEnd"],g),e}function CR(t){const e={},n=d(t,["media"]);if(n!=null){let h=nE(n);Array.isArray(h)&&(h=h.map(_=>_)),m(e,["mediaChunks"],h)}const o=d(t,["audio"]);o!=null&&m(e,["audio"],oE(o));const r=d(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&m(e,["video"],iE(l));const u=d(t,["text"]);u!=null&&m(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const g=d(t,["activityEnd"]);return g!=null&&m(e,["activityEnd"],g),e}function RR(t){const e={},n=d(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],n);const o=d(t,["serverContent"]);o!=null&&m(e,["serverContent"],o);const r=d(t,["toolCall"]);r!=null&&m(e,["toolCall"],r);const l=d(t,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const u=d(t,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],PR(u));const f=d(t,["goAway"]);f!=null&&m(e,["goAway"],f);const g=d(t,["sessionResumptionUpdate"]);g!=null&&m(e,["sessionResumptionUpdate"],g);const h=d(t,["voiceActivityDetectionSignal"]);h!=null&&m(e,["voiceActivityDetectionSignal"],h);const _=d(t,["voiceActivity"]);return _!=null&&m(e,["voiceActivity"],UR(_)),e}function IR(t){const e={},n=d(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],mR(l));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],pR(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const g=d(t,["inlineData"]);g!=null&&m(e,["inlineData"],Hc(g));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const E=d(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const b=d(t,["videoMetadata"]);return b!=null&&m(e,["videoMetadata"],b),e}function NR(t){const e={},n=d(t,["handle"]);if(n!=null&&m(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function MR(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const r=d(t,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],vR(u));const f=d(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],_R(f));const g=d(t,["googleSearchRetrieval"]);g!=null&&m(e,["googleSearchRetrieval"],g);const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function DR(t){const e={},n=d(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const o=d(t,["computerUse"]);if(o!=null&&m(e,["computerUse"],o),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&m(e,["codeExecution"],r);const l=d(t,["enterpriseWebSearch"]);l!=null&&m(e,["enterpriseWebSearch"],l);const u=d(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(b=>gR(b))),m(e,["functionDeclarations"],E)}const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const g=d(t,["googleSearch"]);g!=null&&m(e,["googleSearch"],g);const h=d(t,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const _=d(t,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function PR(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const o=d(t,["cachedContentTokenCount"]);o!=null&&m(e,["cachedContentTokenCount"],o);const r=d(t,["candidatesTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const u=d(t,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const f=d(t,["totalTokenCount"]);f!=null&&m(e,["totalTokenCount"],f);const g=d(t,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(I=>I)),m(e,["promptTokensDetails"],w)}const h=d(t,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(I=>I)),m(e,["cacheTokensDetails"],w)}const _=d(t,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(I=>I)),m(e,["responseTokensDetails"],w)}const E=d(t,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(I=>I)),m(e,["toolUsePromptTokensDetails"],w)}const b=d(t,["trafficType"]);return b!=null&&m(e,["trafficType"],b),e}function UR(t){const e={},n=d(t,["type"]);return n!=null&&m(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kR(t,e){const n={},o=d(t,["data"]);if(o!=null&&m(n,["data"],o),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&m(n,["mimeType"],r),n}function VR(t,e){const n={},o=d(t,["content"]);o!=null&&m(n,["content"],o);const r=d(t,["citationMetadata"]);r!=null&&m(n,["citationMetadata"],LR(r));const l=d(t,["tokenCount"]);l!=null&&m(n,["tokenCount"],l);const u=d(t,["finishReason"]);u!=null&&m(n,["finishReason"],u);const f=d(t,["avgLogprobs"]);f!=null&&m(n,["avgLogprobs"],f);const g=d(t,["groundingMetadata"]);g!=null&&m(n,["groundingMetadata"],g);const h=d(t,["index"]);h!=null&&m(n,["index"],h);const _=d(t,["logprobsResult"]);_!=null&&m(n,["logprobsResult"],_);const E=d(t,["safetyRatings"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(I=>I)),m(n,["safetyRatings"],w)}const b=d(t,["urlContextMetadata"]);return b!=null&&m(n,["urlContextMetadata"],b),n}function LR(t,e){const n={},o=d(t,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(n,["citations"],r)}return n}function OR(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["contents"]);if(l!=null){let u=vi(l);Array.isArray(u)&&(u=u.map(f=>f)),m(o,["contents"],u)}return o}function BR(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["tokensInfo"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),m(n,["tokensInfo"],l)}return n}function qR(t,e){const n={},o=d(t,["values"]);o!=null&&m(n,["values"],o);const r=d(t,["statistics"]);return r!=null&&m(n,["statistics"],GR(r)),n}function GR(t,e){const n={},o=d(t,["truncated"]);o!=null&&m(n,["truncated"],o);const r=d(t,["token_count"]);return r!=null&&m(n,["tokenCount"],r),n}function md(t,e){const n={},o=d(t,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>QI(u))),m(n,["parts"],l)}const r=d(t,["role"]);return r!=null&&m(n,["role"],r),n}function FR(t,e){const n={},o=d(t,["controlType"]);o!=null&&m(n,["controlType"],o);const r=d(t,["enableControlImageComputation"]);return r!=null&&m(n,["computeControl"],r),n}function HR(t,e){const n={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function zR(t,e,n){const o={},r=d(t,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],Sn(r));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>vE(g))),m(e,["tools"],f)}const u=d(t,["generationConfig"]);return e!==void 0&&u!=null&&m(e,["generationConfig"],kI(u)),o}function jR(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["contents"]);if(l!=null){let f=vi(l);Array.isArray(f)&&(f=f.map(g=>md(g))),m(o,["contents"],f)}const u=d(e,["config"]);return u!=null&&HR(u),o}function YR(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["contents"]);if(l!=null){let f=vi(l);Array.isArray(f)&&(f=f.map(g=>g)),m(o,["contents"],f)}const u=d(e,["config"]);return u!=null&&zR(u,o),o}function JR(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["totalTokens"]);r!=null&&m(n,["totalTokens"],r);const l=d(t,["cachedContentTokenCount"]);return l!=null&&m(n,["cachedContentTokenCount"],l),n}function KR(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["totalTokens"]);return r!=null&&m(n,["totalTokens"],r),n}function $R(t,e,n){const o={},r=d(e,["model"]);return r!=null&&m(o,["_url","name"],st(t,r)),o}function QR(t,e,n){const o={},r=d(e,["model"]);return r!=null&&m(o,["_url","name"],st(t,r)),o}function XR(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&m(n,["sdkHttpResponse"],o),n}function WR(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&m(n,["sdkHttpResponse"],o),n}function ZR(t,e,n){const o={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&m(e,["parameters","negativePrompt"],l);const u=d(t,["numberOfImages"]);e!==void 0&&u!=null&&m(e,["parameters","sampleCount"],u);const f=d(t,["aspectRatio"]);e!==void 0&&f!=null&&m(e,["parameters","aspectRatio"],f);const g=d(t,["guidanceScale"]);e!==void 0&&g!=null&&m(e,["parameters","guidanceScale"],g);const h=d(t,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const _=d(t,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const E=d(t,["personGeneration"]);e!==void 0&&E!=null&&m(e,["parameters","personGeneration"],E);const b=d(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&m(e,["parameters","includeSafetyAttributes"],b);const w=d(t,["includeRaiReason"]);e!==void 0&&w!=null&&m(e,["parameters","includeRaiReason"],w);const I=d(t,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const L=d(t,["outputMimeType"]);e!==void 0&&L!=null&&m(e,["parameters","outputOptions","mimeType"],L);const U=d(t,["outputCompressionQuality"]);e!==void 0&&U!=null&&m(e,["parameters","outputOptions","compressionQuality"],U);const j=d(t,["addWatermark"]);e!==void 0&&j!=null&&m(e,["parameters","addWatermark"],j);const W=d(t,["labels"]);e!==void 0&&W!=null&&m(e,["labels"],W);const z=d(t,["editMode"]);e!==void 0&&z!=null&&m(e,["parameters","editMode"],z);const X=d(t,["baseSteps"]);return e!==void 0&&X!=null&&m(e,["parameters","editConfig","baseSteps"],X),o}function eI(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["prompt"]);l!=null&&m(o,["instances[0]","prompt"],l);const u=d(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(h=>nN(h))),m(o,["instances[0]","referenceImages"],g)}const f=d(e,["config"]);return f!=null&&ZR(f,o),o}function tI(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>pd(u))),m(n,["generatedImages"],l)}return n}function nI(t,e,n){const o={},r=d(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const l=d(t,["title"]);e!==void 0&&l!=null&&m(e,["requests[]","title"],l);const u=d(t,["outputDimensionality"]);if(e!==void 0&&u!=null&&m(e,["requests[]","outputDimensionality"],u),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function iI(t,e,n){const o={},r=d(t,["taskType"]);e!==void 0&&r!=null&&m(e,["instances[]","task_type"],r);const l=d(t,["title"]);e!==void 0&&l!=null&&m(e,["instances[]","title"],l);const u=d(t,["outputDimensionality"]);e!==void 0&&u!=null&&m(e,["parameters","outputDimensionality"],u);const f=d(t,["mimeType"]);e!==void 0&&f!=null&&m(e,["instances[]","mimeType"],f);const g=d(t,["autoTruncate"]);return e!==void 0&&g!=null&&m(e,["parameters","autoTruncate"],g),o}function oI(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["contents"]);if(l!=null){let g=Xm(t,l);Array.isArray(g)&&(g=g.map(h=>h)),m(o,["requests[]","content"],g)}const u=d(e,["config"]);u!=null&&nI(u,o);const f=d(e,["model"]);return f!==void 0&&m(o,["requests[]","model"],st(t,f)),o}function sI(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["contents"]);if(l!=null){let f=Xm(t,l);Array.isArray(f)&&(f=f.map(g=>g)),m(o,["instances[]","content"],f)}const u=d(e,["config"]);return u!=null&&iI(u,o),o}function rI(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),m(n,["embeddings"],u)}const l=d(t,["metadata"]);return l!=null&&m(n,["metadata"],l),n}function aI(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>qR(f))),m(n,["embeddings"],u)}const l=d(t,["metadata"]);return l!=null&&m(n,["metadata"],l),n}function lI(t,e){const n={},o=d(t,["endpoint"]);o!=null&&m(n,["name"],o);const r=d(t,["deployedModelId"]);return r!=null&&m(n,["deployedModelId"],r),n}function uI(t,e){const n={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["fileUri"]);o!=null&&m(n,["fileUri"],o);const r=d(t,["mimeType"]);return r!=null&&m(n,["mimeType"],r),n}function cI(t,e){const n={},o=d(t,["id"]);o!=null&&m(n,["id"],o);const r=d(t,["args"]);r!=null&&m(n,["args"],r);const l=d(t,["name"]);if(l!=null&&m(n,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function dI(t,e){const n={},o=d(t,["allowedFunctionNames"]);o!=null&&m(n,["allowedFunctionNames"],o);const r=d(t,["mode"]);if(r!=null&&m(n,["mode"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function fI(t,e){const n={},o=d(t,["description"]);o!=null&&m(n,["description"],o);const r=d(t,["name"]);r!=null&&m(n,["name"],r);const l=d(t,["parameters"]);l!=null&&m(n,["parameters"],l);const u=d(t,["parametersJsonSchema"]);u!=null&&m(n,["parametersJsonSchema"],u);const f=d(t,["response"]);f!=null&&m(n,["response"],f);const g=d(t,["responseJsonSchema"]);if(g!=null&&m(n,["responseJsonSchema"],g),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function hI(t,e,n,o){const r={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&m(n,["systemInstruction"],md(Sn(l)));const u=d(e,["temperature"]);u!=null&&m(r,["temperature"],u);const f=d(e,["topP"]);f!=null&&m(r,["topP"],f);const g=d(e,["topK"]);g!=null&&m(r,["topK"],g);const h=d(e,["candidateCount"]);h!=null&&m(r,["candidateCount"],h);const _=d(e,["maxOutputTokens"]);_!=null&&m(r,["maxOutputTokens"],_);const E=d(e,["stopSequences"]);E!=null&&m(r,["stopSequences"],E);const b=d(e,["responseLogprobs"]);b!=null&&m(r,["responseLogprobs"],b);const w=d(e,["logprobs"]);w!=null&&m(r,["logprobs"],w);const I=d(e,["presencePenalty"]);I!=null&&m(r,["presencePenalty"],I);const L=d(e,["frequencyPenalty"]);L!=null&&m(r,["frequencyPenalty"],L);const U=d(e,["seed"]);U!=null&&m(r,["seed"],U);const j=d(e,["responseMimeType"]);j!=null&&m(r,["responseMimeType"],j);const W=d(e,["responseSchema"]);W!=null&&m(r,["responseSchema"],Wm(W));const z=d(e,["responseJsonSchema"]);if(z!=null&&m(r,["responseJsonSchema"],z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=d(e,["safetySettings"]);if(n!==void 0&&X!=null){let Me=X;Array.isArray(Me)&&(Me=Me.map(rt=>iN(rt))),m(n,["safetySettings"],Me)}const G=d(e,["tools"]);if(n!==void 0&&G!=null){let Me=Aa(G);Array.isArray(Me)&&(Me=Me.map(rt=>cN(xa(rt)))),m(n,["tools"],Me)}const se=d(e,["toolConfig"]);if(n!==void 0&&se!=null&&m(n,["toolConfig"],uN(se)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=d(e,["cachedContent"]);n!==void 0&&D!=null&&m(n,["cachedContent"],Do(t,D));const N=d(e,["responseModalities"]);N!=null&&m(r,["responseModalities"],N);const M=d(e,["mediaResolution"]);M!=null&&m(r,["mediaResolution"],M);const P=d(e,["speechConfig"]);if(P!=null&&m(r,["speechConfig"],Zm(P)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=d(e,["thinkingConfig"]);O!=null&&m(r,["thinkingConfig"],O);const q=d(e,["imageConfig"]);q!=null&&m(r,["imageConfig"],qI(q));const k=d(e,["enableEnhancedCivicAnswers"]);if(k!=null&&m(r,["enableEnhancedCivicAnswers"],k),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function mI(t,e,n,o){const r={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&m(n,["systemInstruction"],Sn(l));const u=d(e,["temperature"]);u!=null&&m(r,["temperature"],u);const f=d(e,["topP"]);f!=null&&m(r,["topP"],f);const g=d(e,["topK"]);g!=null&&m(r,["topK"],g);const h=d(e,["candidateCount"]);h!=null&&m(r,["candidateCount"],h);const _=d(e,["maxOutputTokens"]);_!=null&&m(r,["maxOutputTokens"],_);const E=d(e,["stopSequences"]);E!=null&&m(r,["stopSequences"],E);const b=d(e,["responseLogprobs"]);b!=null&&m(r,["responseLogprobs"],b);const w=d(e,["logprobs"]);w!=null&&m(r,["logprobs"],w);const I=d(e,["presencePenalty"]);I!=null&&m(r,["presencePenalty"],I);const L=d(e,["frequencyPenalty"]);L!=null&&m(r,["frequencyPenalty"],L);const U=d(e,["seed"]);U!=null&&m(r,["seed"],U);const j=d(e,["responseMimeType"]);j!=null&&m(r,["responseMimeType"],j);const W=d(e,["responseSchema"]);W!=null&&m(r,["responseSchema"],Wm(W));const z=d(e,["responseJsonSchema"]);z!=null&&m(r,["responseJsonSchema"],z);const X=d(e,["routingConfig"]);X!=null&&m(r,["routingConfig"],X);const G=d(e,["modelSelectionConfig"]);G!=null&&m(r,["modelConfig"],G);const se=d(e,["safetySettings"]);if(n!==void 0&&se!=null){let Ee=se;Array.isArray(Ee)&&(Ee=Ee.map(Oe=>Oe)),m(n,["safetySettings"],Ee)}const D=d(e,["tools"]);if(n!==void 0&&D!=null){let Ee=Aa(D);Array.isArray(Ee)&&(Ee=Ee.map(Oe=>vE(xa(Oe)))),m(n,["tools"],Ee)}const N=d(e,["toolConfig"]);n!==void 0&&N!=null&&m(n,["toolConfig"],N);const M=d(e,["labels"]);n!==void 0&&M!=null&&m(n,["labels"],M);const P=d(e,["cachedContent"]);n!==void 0&&P!=null&&m(n,["cachedContent"],Do(t,P));const O=d(e,["responseModalities"]);O!=null&&m(r,["responseModalities"],O);const q=d(e,["mediaResolution"]);q!=null&&m(r,["mediaResolution"],q);const k=d(e,["speechConfig"]);k!=null&&m(r,["speechConfig"],Zm(k));const Me=d(e,["audioTimestamp"]);Me!=null&&m(r,["audioTimestamp"],Me);const rt=d(e,["thinkingConfig"]);rt!=null&&m(r,["thinkingConfig"],rt);const te=d(e,["imageConfig"]);if(te!=null&&m(r,["imageConfig"],GI(te)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const me=d(e,["modelArmorConfig"]);return n!==void 0&&me!=null&&m(n,["modelArmorConfig"],me),r}function M0(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["contents"]);if(l!=null){let f=vi(l);Array.isArray(f)&&(f=f.map(g=>md(g))),m(o,["contents"],f)}const u=d(e,["config"]);return u!=null&&m(o,["generationConfig"],hI(t,u,o)),o}function D0(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["contents"]);if(l!=null){let f=vi(l);Array.isArray(f)&&(f=f.map(g=>g)),m(o,["contents"],f)}const u=d(e,["config"]);return u!=null&&m(o,["generationConfig"],mI(t,u,o)),o}function P0(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(_=>VR(_))),m(n,["candidates"],h)}const l=d(t,["modelVersion"]);l!=null&&m(n,["modelVersion"],l);const u=d(t,["promptFeedback"]);u!=null&&m(n,["promptFeedback"],u);const f=d(t,["responseId"]);f!=null&&m(n,["responseId"],f);const g=d(t,["usageMetadata"]);return g!=null&&m(n,["usageMetadata"],g),n}function U0(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["candidates"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(E=>E)),m(n,["candidates"],_)}const l=d(t,["createTime"]);l!=null&&m(n,["createTime"],l);const u=d(t,["modelVersion"]);u!=null&&m(n,["modelVersion"],u);const f=d(t,["promptFeedback"]);f!=null&&m(n,["promptFeedback"],f);const g=d(t,["responseId"]);g!=null&&m(n,["responseId"],g);const h=d(t,["usageMetadata"]);return h!=null&&m(n,["usageMetadata"],h),n}function pI(t,e,n){const o={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const u=d(t,["guidanceScale"]);if(e!==void 0&&u!=null&&m(e,["parameters","guidanceScale"],u),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const g=d(t,["personGeneration"]);e!==void 0&&g!=null&&m(e,["parameters","personGeneration"],g);const h=d(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&m(e,["parameters","includeSafetyAttributes"],h);const _=d(t,["includeRaiReason"]);e!==void 0&&_!=null&&m(e,["parameters","includeRaiReason"],_);const E=d(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const w=d(t,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&m(e,["parameters","outputOptions","compressionQuality"],w),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=d(t,["imageSize"]);if(e!==void 0&&I!=null&&m(e,["parameters","sampleImageSize"],I),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function gI(t,e,n){const o={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&m(e,["parameters","negativePrompt"],l);const u=d(t,["numberOfImages"]);e!==void 0&&u!=null&&m(e,["parameters","sampleCount"],u);const f=d(t,["aspectRatio"]);e!==void 0&&f!=null&&m(e,["parameters","aspectRatio"],f);const g=d(t,["guidanceScale"]);e!==void 0&&g!=null&&m(e,["parameters","guidanceScale"],g);const h=d(t,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const _=d(t,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const E=d(t,["personGeneration"]);e!==void 0&&E!=null&&m(e,["parameters","personGeneration"],E);const b=d(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&m(e,["parameters","includeSafetyAttributes"],b);const w=d(t,["includeRaiReason"]);e!==void 0&&w!=null&&m(e,["parameters","includeRaiReason"],w);const I=d(t,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const L=d(t,["outputMimeType"]);e!==void 0&&L!=null&&m(e,["parameters","outputOptions","mimeType"],L);const U=d(t,["outputCompressionQuality"]);e!==void 0&&U!=null&&m(e,["parameters","outputOptions","compressionQuality"],U);const j=d(t,["addWatermark"]);e!==void 0&&j!=null&&m(e,["parameters","addWatermark"],j);const W=d(t,["labels"]);e!==void 0&&W!=null&&m(e,["labels"],W);const z=d(t,["imageSize"]);e!==void 0&&z!=null&&m(e,["parameters","sampleImageSize"],z);const X=d(t,["enhancePrompt"]);return e!==void 0&&X!=null&&m(e,["parameters","enhancePrompt"],X),o}function yI(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["prompt"]);l!=null&&m(o,["instances[0]","prompt"],l);const u=d(e,["config"]);return u!=null&&pI(u,o),o}function vI(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["prompt"]);l!=null&&m(o,["instances[0]","prompt"],l);const u=d(e,["config"]);return u!=null&&gI(u,o),o}function _I(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>MI(f))),m(n,["generatedImages"],u)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&m(n,["positivePromptSafetyAttributes"],gE(l)),n}function TI(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>pd(f))),m(n,["generatedImages"],u)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&m(n,["positivePromptSafetyAttributes"],yE(l)),n}function EI(t,e,n){const o={},r=d(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=d(t,["durationSeconds"]);if(e!==void 0&&l!=null&&m(e,["parameters","durationSeconds"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const f=d(t,["resolution"]);e!==void 0&&f!=null&&m(e,["parameters","resolution"],f);const g=d(t,["personGeneration"]);if(e!==void 0&&g!=null&&m(e,["parameters","personGeneration"],g),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=d(t,["negativePrompt"]);e!==void 0&&h!=null&&m(e,["parameters","negativePrompt"],h);const _=d(t,["enhancePrompt"]);if(e!==void 0&&_!=null&&m(e,["parameters","enhancePrompt"],_),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=d(t,["lastFrame"]);e!==void 0&&E!=null&&m(e,["instances[0]","lastFrame"],gd(E));const b=d(t,["referenceImages"]);if(e!==void 0&&b!=null){let w=b;Array.isArray(w)&&(w=w.map(I=>bN(I))),m(e,["instances[0]","referenceImages"],w)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function SI(t,e,n){const o={},r=d(t,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const u=d(t,["fps"]);e!==void 0&&u!=null&&m(e,["parameters","fps"],u);const f=d(t,["durationSeconds"]);e!==void 0&&f!=null&&m(e,["parameters","durationSeconds"],f);const g=d(t,["seed"]);e!==void 0&&g!=null&&m(e,["parameters","seed"],g);const h=d(t,["aspectRatio"]);e!==void 0&&h!=null&&m(e,["parameters","aspectRatio"],h);const _=d(t,["resolution"]);e!==void 0&&_!=null&&m(e,["parameters","resolution"],_);const E=d(t,["personGeneration"]);e!==void 0&&E!=null&&m(e,["parameters","personGeneration"],E);const b=d(t,["pubsubTopic"]);e!==void 0&&b!=null&&m(e,["parameters","pubsubTopic"],b);const w=d(t,["negativePrompt"]);e!==void 0&&w!=null&&m(e,["parameters","negativePrompt"],w);const I=d(t,["enhancePrompt"]);e!==void 0&&I!=null&&m(e,["parameters","enhancePrompt"],I);const L=d(t,["generateAudio"]);e!==void 0&&L!=null&&m(e,["parameters","generateAudio"],L);const U=d(t,["lastFrame"]);e!==void 0&&U!=null&&m(e,["instances[0]","lastFrame"],Di(U));const j=d(t,["referenceImages"]);if(e!==void 0&&j!=null){let X=j;Array.isArray(X)&&(X=X.map(G=>xN(G))),m(e,["instances[0]","referenceImages"],X)}const W=d(t,["mask"]);e!==void 0&&W!=null&&m(e,["instances[0]","mask"],SN(W));const z=d(t,["compressionQuality"]);return e!==void 0&&z!=null&&m(e,["parameters","compressionQuality"],z),o}function bI(t,e){const n={},o=d(t,["name"]);o!=null&&m(n,["name"],o);const r=d(t,["metadata"]);r!=null&&m(n,["metadata"],r);const l=d(t,["done"]);l!=null&&m(n,["done"],l);const u=d(t,["error"]);u!=null&&m(n,["error"],u);const f=d(t,["response","generateVideoResponse"]);return f!=null&&m(n,["response"],CI(f)),n}function xI(t,e){const n={},o=d(t,["name"]);o!=null&&m(n,["name"],o);const r=d(t,["metadata"]);r!=null&&m(n,["metadata"],r);const l=d(t,["done"]);l!=null&&m(n,["done"],l);const u=d(t,["error"]);u!=null&&m(n,["error"],u);const f=d(t,["response"]);return f!=null&&m(n,["response"],RI(f)),n}function AI(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["prompt"]);l!=null&&m(o,["instances[0]","prompt"],l);const u=d(e,["image"]);u!=null&&m(o,["instances[0]","image"],gd(u));const f=d(e,["video"]);f!=null&&m(o,["instances[0]","video"],_E(f));const g=d(e,["source"]);g!=null&&II(g,o);const h=d(e,["config"]);return h!=null&&EI(h,o),o}function wI(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["prompt"]);l!=null&&m(o,["instances[0]","prompt"],l);const u=d(e,["image"]);u!=null&&m(o,["instances[0]","image"],Di(u));const f=d(e,["video"]);f!=null&&m(o,["instances[0]","video"],TE(f));const g=d(e,["source"]);g!=null&&NI(g,o);const h=d(e,["config"]);return h!=null&&SI(h,o),o}function CI(t,e){const n={},o=d(t,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>PI(f))),m(n,["generatedVideos"],u)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&m(n,["raiMediaFilteredCount"],r);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&m(n,["raiMediaFilteredReasons"],l),n}function RI(t,e){const n={},o=d(t,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>UI(f))),m(n,["generatedVideos"],u)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&m(n,["raiMediaFilteredCount"],r);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&m(n,["raiMediaFilteredReasons"],l),n}function II(t,e,n){const o={},r=d(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&m(e,["instances[0]","image"],gd(l));const u=d(t,["video"]);return e!==void 0&&u!=null&&m(e,["instances[0]","video"],_E(u)),o}function NI(t,e,n){const o={},r=d(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&m(e,["instances[0]","image"],Di(l));const u=d(t,["video"]);return e!==void 0&&u!=null&&m(e,["instances[0]","video"],TE(u)),o}function MI(t,e){const n={},o=d(t,["_self"]);o!=null&&m(n,["image"],FI(o));const r=d(t,["raiFilteredReason"]);r!=null&&m(n,["raiFilteredReason"],r);const l=d(t,["_self"]);return l!=null&&m(n,["safetyAttributes"],gE(l)),n}function pd(t,e){const n={},o=d(t,["_self"]);o!=null&&m(n,["image"],pE(o));const r=d(t,["raiFilteredReason"]);r!=null&&m(n,["raiFilteredReason"],r);const l=d(t,["_self"]);l!=null&&m(n,["safetyAttributes"],yE(l));const u=d(t,["prompt"]);return u!=null&&m(n,["enhancedPrompt"],u),n}function DI(t,e){const n={},o=d(t,["_self"]);o!=null&&m(n,["mask"],pE(o));const r=d(t,["labels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),m(n,["labels"],l)}return n}function PI(t,e){const n={},o=d(t,["video"]);return o!=null&&m(n,["video"],TN(o)),n}function UI(t,e){const n={},o=d(t,["_self"]);return o!=null&&m(n,["video"],EN(o)),n}function kI(t,e){const n={},o=d(t,["modelSelectionConfig"]);o!=null&&m(n,["modelConfig"],o);const r=d(t,["responseJsonSchema"]);r!=null&&m(n,["responseJsonSchema"],r);const l=d(t,["audioTimestamp"]);l!=null&&m(n,["audioTimestamp"],l);const u=d(t,["candidateCount"]);u!=null&&m(n,["candidateCount"],u);const f=d(t,["enableAffectiveDialog"]);f!=null&&m(n,["enableAffectiveDialog"],f);const g=d(t,["frequencyPenalty"]);g!=null&&m(n,["frequencyPenalty"],g);const h=d(t,["logprobs"]);h!=null&&m(n,["logprobs"],h);const _=d(t,["maxOutputTokens"]);_!=null&&m(n,["maxOutputTokens"],_);const E=d(t,["mediaResolution"]);E!=null&&m(n,["mediaResolution"],E);const b=d(t,["presencePenalty"]);b!=null&&m(n,["presencePenalty"],b);const w=d(t,["responseLogprobs"]);w!=null&&m(n,["responseLogprobs"],w);const I=d(t,["responseMimeType"]);I!=null&&m(n,["responseMimeType"],I);const L=d(t,["responseModalities"]);L!=null&&m(n,["responseModalities"],L);const U=d(t,["responseSchema"]);U!=null&&m(n,["responseSchema"],U);const j=d(t,["routingConfig"]);j!=null&&m(n,["routingConfig"],j);const W=d(t,["seed"]);W!=null&&m(n,["seed"],W);const z=d(t,["speechConfig"]);z!=null&&m(n,["speechConfig"],z);const X=d(t,["stopSequences"]);X!=null&&m(n,["stopSequences"],X);const G=d(t,["temperature"]);G!=null&&m(n,["temperature"],G);const se=d(t,["thinkingConfig"]);se!=null&&m(n,["thinkingConfig"],se);const D=d(t,["topK"]);D!=null&&m(n,["topK"],D);const N=d(t,["topP"]);if(N!=null&&m(n,["topP"],N),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function VI(t,e,n){const o={},r=d(e,["model"]);return r!=null&&m(o,["_url","name"],st(t,r)),o}function LI(t,e,n){const o={},r=d(e,["model"]);return r!=null&&m(o,["_url","name"],st(t,r)),o}function OI(t,e){const n={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=d(t,["enableWidget"]);return o!=null&&m(n,["enableWidget"],o),n}function BI(t,e){const n={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=d(t,["timeRangeFilter"]);return o!=null&&m(n,["timeRangeFilter"],o),n}function qI(t,e){const n={},o=d(t,["aspectRatio"]);o!=null&&m(n,["aspectRatio"],o);const r=d(t,["imageSize"]);if(r!=null&&m(n,["imageSize"],r),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function GI(t,e){const n={},o=d(t,["aspectRatio"]);o!=null&&m(n,["aspectRatio"],o);const r=d(t,["imageSize"]);r!=null&&m(n,["imageSize"],r);const l=d(t,["personGeneration"]);l!=null&&m(n,["personGeneration"],l);const u=d(t,["outputMimeType"]);u!=null&&m(n,["imageOutputOptions","mimeType"],u);const f=d(t,["outputCompressionQuality"]);return f!=null&&m(n,["imageOutputOptions","compressionQuality"],f),n}function FI(t,e){const n={},o=d(t,["bytesBase64Encoded"]);o!=null&&m(n,["imageBytes"],Is(o));const r=d(t,["mimeType"]);return r!=null&&m(n,["mimeType"],r),n}function pE(t,e){const n={},o=d(t,["gcsUri"]);o!=null&&m(n,["gcsUri"],o);const r=d(t,["bytesBase64Encoded"]);r!=null&&m(n,["imageBytes"],Is(r));const l=d(t,["mimeType"]);return l!=null&&m(n,["mimeType"],l),n}function gd(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=d(t,["imageBytes"]);o!=null&&m(n,["bytesBase64Encoded"],Is(o));const r=d(t,["mimeType"]);return r!=null&&m(n,["mimeType"],r),n}function Di(t,e){const n={},o=d(t,["gcsUri"]);o!=null&&m(n,["gcsUri"],o);const r=d(t,["imageBytes"]);r!=null&&m(n,["bytesBase64Encoded"],Is(r));const l=d(t,["mimeType"]);return l!=null&&m(n,["mimeType"],l),n}function HI(t,e,n,o){const r={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&m(n,["_query","pageSize"],l);const u=d(e,["pageToken"]);n!==void 0&&u!=null&&m(n,["_query","pageToken"],u);const f=d(e,["filter"]);n!==void 0&&f!=null&&m(n,["_query","filter"],f);const g=d(e,["queryBase"]);return n!==void 0&&g!=null&&m(n,["_url","models_url"],lE(t,g)),r}function zI(t,e,n,o){const r={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&m(n,["_query","pageSize"],l);const u=d(e,["pageToken"]);n!==void 0&&u!=null&&m(n,["_query","pageToken"],u);const f=d(e,["filter"]);n!==void 0&&f!=null&&m(n,["_query","filter"],f);const g=d(e,["queryBase"]);return n!==void 0&&g!=null&&m(n,["_url","models_url"],lE(t,g)),r}function jI(t,e,n){const o={},r=d(e,["config"]);return r!=null&&HI(t,r,o),o}function YI(t,e,n){const o={},r=d(e,["config"]);return r!=null&&zI(t,r,o),o}function JI(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&m(n,["nextPageToken"],r);const l=d(t,["_self"]);if(l!=null){let u=uE(l);Array.isArray(u)&&(u=u.map(f=>pm(f))),m(n,["models"],u)}return n}function KI(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&m(n,["nextPageToken"],r);const l=d(t,["_self"]);if(l!=null){let u=uE(l);Array.isArray(u)&&(u=u.map(f=>gm(f))),m(n,["models"],u)}return n}function $I(t,e){const n={},o=d(t,["maskMode"]);o!=null&&m(n,["maskMode"],o);const r=d(t,["segmentationClasses"]);r!=null&&m(n,["maskClasses"],r);const l=d(t,["maskDilation"]);return l!=null&&m(n,["dilation"],l),n}function pm(t,e){const n={},o=d(t,["name"]);o!=null&&m(n,["name"],o);const r=d(t,["displayName"]);r!=null&&m(n,["displayName"],r);const l=d(t,["description"]);l!=null&&m(n,["description"],l);const u=d(t,["version"]);u!=null&&m(n,["version"],u);const f=d(t,["_self"]);f!=null&&m(n,["tunedModelInfo"],dN(f));const g=d(t,["inputTokenLimit"]);g!=null&&m(n,["inputTokenLimit"],g);const h=d(t,["outputTokenLimit"]);h!=null&&m(n,["outputTokenLimit"],h);const _=d(t,["supportedGenerationMethods"]);_!=null&&m(n,["supportedActions"],_);const E=d(t,["temperature"]);E!=null&&m(n,["temperature"],E);const b=d(t,["maxTemperature"]);b!=null&&m(n,["maxTemperature"],b);const w=d(t,["topP"]);w!=null&&m(n,["topP"],w);const I=d(t,["topK"]);I!=null&&m(n,["topK"],I);const L=d(t,["thinking"]);return L!=null&&m(n,["thinking"],L),n}function gm(t,e){const n={},o=d(t,["name"]);o!=null&&m(n,["name"],o);const r=d(t,["displayName"]);r!=null&&m(n,["displayName"],r);const l=d(t,["description"]);l!=null&&m(n,["description"],l);const u=d(t,["versionId"]);u!=null&&m(n,["version"],u);const f=d(t,["deployedModels"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(w=>lI(w))),m(n,["endpoints"],b)}const g=d(t,["labels"]);g!=null&&m(n,["labels"],g);const h=d(t,["_self"]);h!=null&&m(n,["tunedModelInfo"],fN(h));const _=d(t,["defaultCheckpointId"]);_!=null&&m(n,["defaultCheckpointId"],_);const E=d(t,["checkpoints"]);if(E!=null){let b=E;Array.isArray(b)&&(b=b.map(w=>w)),m(n,["checkpoints"],b)}return n}function QI(t,e){const n={},o=d(t,["mediaResolution"]);o!=null&&m(n,["mediaResolution"],o);const r=d(t,["codeExecutionResult"]);r!=null&&m(n,["codeExecutionResult"],r);const l=d(t,["executableCode"]);l!=null&&m(n,["executableCode"],l);const u=d(t,["fileData"]);u!=null&&m(n,["fileData"],uI(u));const f=d(t,["functionCall"]);f!=null&&m(n,["functionCall"],cI(f));const g=d(t,["functionResponse"]);g!=null&&m(n,["functionResponse"],g);const h=d(t,["inlineData"]);h!=null&&m(n,["inlineData"],kR(h));const _=d(t,["text"]);_!=null&&m(n,["text"],_);const E=d(t,["thought"]);E!=null&&m(n,["thought"],E);const b=d(t,["thoughtSignature"]);b!=null&&m(n,["thoughtSignature"],b);const w=d(t,["videoMetadata"]);return w!=null&&m(n,["videoMetadata"],w),n}function XI(t,e){const n={},o=d(t,["productImage"]);return o!=null&&m(n,["image"],Di(o)),n}function WI(t,e,n){const o={},r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const l=d(t,["baseSteps"]);e!==void 0&&l!=null&&m(e,["parameters","baseSteps"],l);const u=d(t,["outputGcsUri"]);e!==void 0&&u!=null&&m(e,["parameters","storageUri"],u);const f=d(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const g=d(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&m(e,["parameters","safetySetting"],g);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const _=d(t,["addWatermark"]);e!==void 0&&_!=null&&m(e,["parameters","addWatermark"],_);const E=d(t,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const b=d(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","compressionQuality"],b);const w=d(t,["enhancePrompt"]);e!==void 0&&w!=null&&m(e,["parameters","enhancePrompt"],w);const I=d(t,["labels"]);return e!==void 0&&I!=null&&m(e,["labels"],I),o}function ZI(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["source"]);l!=null&&tN(l,o);const u=d(e,["config"]);return u!=null&&WI(u,o),o}function eN(t,e){const n={},o=d(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>pd(l))),m(n,["generatedImages"],r)}return n}function tN(t,e,n){const o={},r=d(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const l=d(t,["personImage"]);e!==void 0&&l!=null&&m(e,["instances[0]","personImage","image"],Di(l));const u=d(t,["productImages"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(g=>XI(g))),m(e,["instances[0]","productImages"],f)}return o}function nN(t,e){const n={},o=d(t,["referenceImage"]);o!=null&&m(n,["referenceImage"],Di(o));const r=d(t,["referenceId"]);r!=null&&m(n,["referenceId"],r);const l=d(t,["referenceType"]);l!=null&&m(n,["referenceType"],l);const u=d(t,["maskImageConfig"]);u!=null&&m(n,["maskImageConfig"],$I(u));const f=d(t,["controlImageConfig"]);f!=null&&m(n,["controlImageConfig"],FR(f));const g=d(t,["styleImageConfig"]);g!=null&&m(n,["styleImageConfig"],g);const h=d(t,["subjectImageConfig"]);return h!=null&&m(n,["subjectImageConfig"],h),n}function gE(t,e){const n={},o=d(t,["safetyAttributes","categories"]);o!=null&&m(n,["categories"],o);const r=d(t,["safetyAttributes","scores"]);r!=null&&m(n,["scores"],r);const l=d(t,["contentType"]);return l!=null&&m(n,["contentType"],l),n}function yE(t,e){const n={},o=d(t,["safetyAttributes","categories"]);o!=null&&m(n,["categories"],o);const r=d(t,["safetyAttributes","scores"]);r!=null&&m(n,["scores"],r);const l=d(t,["contentType"]);return l!=null&&m(n,["contentType"],l),n}function iN(t,e){const n={},o=d(t,["category"]);if(o!=null&&m(n,["category"],o),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(t,["threshold"]);return r!=null&&m(n,["threshold"],r),n}function oN(t,e){const n={},o=d(t,["image"]);return o!=null&&m(n,["image"],Di(o)),n}function sN(t,e,n){const o={},r=d(t,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const l=d(t,["maxPredictions"]);e!==void 0&&l!=null&&m(e,["parameters","maxPredictions"],l);const u=d(t,["confidenceThreshold"]);e!==void 0&&u!=null&&m(e,["parameters","confidenceThreshold"],u);const f=d(t,["maskDilation"]);e!==void 0&&f!=null&&m(e,["parameters","maskDilation"],f);const g=d(t,["binaryColorThreshold"]);e!==void 0&&g!=null&&m(e,["parameters","binaryColorThreshold"],g);const h=d(t,["labels"]);return e!==void 0&&h!=null&&m(e,["labels"],h),o}function rN(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["source"]);l!=null&&lN(l,o);const u=d(e,["config"]);return u!=null&&sN(u,o),o}function aN(t,e){const n={},o=d(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>DI(l))),m(n,["generatedMasks"],r)}return n}function lN(t,e,n){const o={},r=d(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&m(e,["instances[0]","image"],Di(l));const u=d(t,["scribbleImage"]);return e!==void 0&&u!=null&&m(e,["instances[0]","scribble"],oN(u)),o}function uN(t,e){const n={},o=d(t,["retrievalConfig"]);o!=null&&m(n,["retrievalConfig"],o);const r=d(t,["functionCallingConfig"]);return r!=null&&m(n,["functionCallingConfig"],dI(r)),n}function cN(t,e){const n={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["computerUse"]);o!=null&&m(n,["computerUse"],o);const r=d(t,["fileSearch"]);r!=null&&m(n,["fileSearch"],r);const l=d(t,["codeExecution"]);if(l!=null&&m(n,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=d(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(b=>b)),m(n,["functionDeclarations"],E)}const f=d(t,["googleMaps"]);f!=null&&m(n,["googleMaps"],OI(f));const g=d(t,["googleSearch"]);g!=null&&m(n,["googleSearch"],BI(g));const h=d(t,["googleSearchRetrieval"]);h!=null&&m(n,["googleSearchRetrieval"],h);const _=d(t,["urlContext"]);return _!=null&&m(n,["urlContext"],_),n}function vE(t,e){const n={},o=d(t,["retrieval"]);o!=null&&m(n,["retrieval"],o);const r=d(t,["computerUse"]);if(r!=null&&m(n,["computerUse"],r),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&m(n,["codeExecution"],l);const u=d(t,["enterpriseWebSearch"]);u!=null&&m(n,["enterpriseWebSearch"],u);const f=d(t,["functionDeclarations"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(w=>fI(w))),m(n,["functionDeclarations"],b)}const g=d(t,["googleMaps"]);g!=null&&m(n,["googleMaps"],g);const h=d(t,["googleSearch"]);h!=null&&m(n,["googleSearch"],h);const _=d(t,["googleSearchRetrieval"]);_!=null&&m(n,["googleSearchRetrieval"],_);const E=d(t,["urlContext"]);return E!=null&&m(n,["urlContext"],E),n}function dN(t,e){const n={},o=d(t,["baseModel"]);o!=null&&m(n,["baseModel"],o);const r=d(t,["createTime"]);r!=null&&m(n,["createTime"],r);const l=d(t,["updateTime"]);return l!=null&&m(n,["updateTime"],l),n}function fN(t,e){const n={},o=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&m(n,["baseModel"],o);const r=d(t,["createTime"]);r!=null&&m(n,["createTime"],r);const l=d(t,["updateTime"]);return l!=null&&m(n,["updateTime"],l),n}function hN(t,e,n){const o={},r=d(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const l=d(t,["description"]);e!==void 0&&l!=null&&m(e,["description"],l);const u=d(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&m(e,["defaultCheckpointId"],u),o}function mN(t,e,n){const o={},r=d(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const l=d(t,["description"]);e!==void 0&&l!=null&&m(e,["description"],l);const u=d(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&m(e,["defaultCheckpointId"],u),o}function pN(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","name"],st(t,r));const l=d(e,["config"]);return l!=null&&hN(l,o),o}function gN(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["config"]);return l!=null&&mN(l,o),o}function yN(t,e,n){const o={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&m(e,["parameters","safetySetting"],l);const u=d(t,["personGeneration"]);e!==void 0&&u!=null&&m(e,["parameters","personGeneration"],u);const f=d(t,["includeRaiReason"]);e!==void 0&&f!=null&&m(e,["parameters","includeRaiReason"],f);const g=d(t,["outputMimeType"]);e!==void 0&&g!=null&&m(e,["parameters","outputOptions","mimeType"],g);const h=d(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","compressionQuality"],h);const _=d(t,["enhanceInputImage"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],_);const E=d(t,["imagePreservationFactor"]);e!==void 0&&E!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const b=d(t,["labels"]);e!==void 0&&b!=null&&m(e,["labels"],b);const w=d(t,["numberOfImages"]);e!==void 0&&w!=null&&m(e,["parameters","sampleCount"],w);const I=d(t,["mode"]);return e!==void 0&&I!=null&&m(e,["parameters","mode"],I),o}function vN(t,e,n){const o={},r=d(e,["model"]);r!=null&&m(o,["_url","model"],st(t,r));const l=d(e,["image"]);l!=null&&m(o,["instances[0]","image"],Di(l));const u=d(e,["upscaleFactor"]);u!=null&&m(o,["parameters","upscaleConfig","upscaleFactor"],u);const f=d(e,["config"]);return f!=null&&yN(f,o),o}function _N(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>pd(u))),m(n,["generatedImages"],l)}return n}function TN(t,e){const n={},o=d(t,["uri"]);o!=null&&m(n,["uri"],o);const r=d(t,["encodedVideo"]);r!=null&&m(n,["videoBytes"],Is(r));const l=d(t,["encoding"]);return l!=null&&m(n,["mimeType"],l),n}function EN(t,e){const n={},o=d(t,["gcsUri"]);o!=null&&m(n,["uri"],o);const r=d(t,["bytesBase64Encoded"]);r!=null&&m(n,["videoBytes"],Is(r));const l=d(t,["mimeType"]);return l!=null&&m(n,["mimeType"],l),n}function SN(t,e){const n={},o=d(t,["image"]);o!=null&&m(n,["_self"],Di(o));const r=d(t,["maskMode"]);return r!=null&&m(n,["maskMode"],r),n}function bN(t,e){const n={},o=d(t,["image"]);o!=null&&m(n,["image"],gd(o));const r=d(t,["referenceType"]);return r!=null&&m(n,["referenceType"],r),n}function xN(t,e){const n={},o=d(t,["image"]);o!=null&&m(n,["image"],Di(o));const r=d(t,["referenceType"]);return r!=null&&m(n,["referenceType"],r),n}function _E(t,e){const n={},o=d(t,["uri"]);o!=null&&m(n,["uri"],o);const r=d(t,["videoBytes"]);r!=null&&m(n,["encodedVideo"],Is(r));const l=d(t,["mimeType"]);return l!=null&&m(n,["encoding"],l),n}function TE(t,e){const n={},o=d(t,["uri"]);o!=null&&m(n,["gcsUri"],o);const r=d(t,["videoBytes"]);r!=null&&m(n,["bytesBase64Encoded"],Is(r));const l=d(t,["mimeType"]);return l!=null&&m(n,["mimeType"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AN(t,e){const n={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["displayName"],o),n}function wN(t){const e={},n=d(t,["config"]);return n!=null&&AN(n,e),e}function CN(t,e){const n={},o=d(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),n}function RN(t){const e={},n=d(t,["name"]);n!=null&&m(e,["_url","name"],n);const o=d(t,["config"]);return o!=null&&CN(o,e),e}function IN(t){const e={},n=d(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function NN(t,e){const n={},o=d(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["customMetadata"],l)}const r=d(t,["chunkingConfig"]);return e!==void 0&&r!=null&&m(e,["chunkingConfig"],r),n}function MN(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const u=d(t,["response"]);return u!=null&&m(e,["response"],PN(u)),e}function DN(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const o=d(t,["fileName"]);o!=null&&m(e,["fileName"],o);const r=d(t,["config"]);return r!=null&&NN(r,e),e}function PN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&m(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function UN(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function kN(t){const e={},n=d(t,["config"]);return n!=null&&UN(n,e),e}function VN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["fileSearchStores"],l)}return e}function EE(t,e){const n={},o=d(t,["mimeType"]);e!==void 0&&o!=null&&m(e,["mimeType"],o);const r=d(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>g)),m(e,["customMetadata"],f)}const u=d(t,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),n}function LN(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const o=d(t,["config"]);return o!=null&&EE(o,e),e}function ON(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BN="Content-Type",qN="X-Server-Timeout",GN="User-Agent",ym="x-goog-api-client",FN="1.40.0",HN=`google-genai-sdk/${FN}`,zN="v1beta1",jN="v1beta";class YN{constructor(e){var n,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const f=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!f?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:zN}else{if(!this.clientOptions.apiKey)throw new Hl({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:jN,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===dm.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))r.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const l=new AbortController,u=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const f=setTimeout(()=>l.abort(),n.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return n&&n.extraBody!==null&&JN(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await k0(r),new fm(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await k0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Ii(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const f="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Ue(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=l.decode(_,{stream:!0});try{const I=JSON.parse(E);if("error"in I){const L=JSON.parse(JSON.stringify(I.error)),U=L.status,j=L.code,W=`got status: ${U}. ${JSON.stringify(I)}`;if(j>=400&&j<600)throw new Hl({message:W,status:j})}}catch(I){if(I.name==="ApiError")throw I}u+=E;let b=-1,w=0;for(;;){b=-1,w=0;for(const U of g){const j=u.indexOf(U);j!==-1&&(b===-1||j<b)&&(b=j,w=U.length)}if(b===-1)break;const I=u.substring(0,b);u=u.substring(b+w);const L=I.trim();if(L.startsWith(f)){const U=L.substring(f.length).trim();try{const j=new Response(U,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ue(new fm(j))}catch(j){throw new Error(`exception parsing stream chunk ${U}. ${j}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=HN+" "+this.clientOptions.userAgentExtra;return e[GN]=n,e[ym]=n,e[BN]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(qN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const f=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const g={file:r},h=this.getFileName(e),_=_e("upload/v1beta/files",g._url),E=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,h,g,n==null?void 0:n.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,o){var r;const l=this.clientOptions.uploader,u=await l.stat(n),f=String(u.size),g=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),E={};o!=null&&EE(o,E);const b=await this.fetchUploadUrl(h,f,g,_,E,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(n,b,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,l,u){var f;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function k0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Hl({message:r,status:n}):new Error(r)}}function JN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,u){const f=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const h=u[g],_=f[g];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?f[g]=o(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),f[g]=h)}return f}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KN="mcp_used/unknown";let $N=!1;function SE(t){for(const e of t)if(QN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return $N}function bE(t){var e;const n=(e=t[ym])!==null&&e!==void 0?e:"";t[ym]=(n+` ${KN}`).trimStart()}function QN(t){return t!==null&&typeof t=="object"&&t instanceof tp}function XN(t){return Ii(this,arguments,function*(n,o=100){let r,l=0;for(;l<o;){const u=yield Ue(n.listTools({cursor:r}));for(const f of u.tools)yield yield Ue(f),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class tp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new tp(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,g=(n=void 0,Ni(XN(_))),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const E=r;u.push(E);const b=E.name;if(l[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);l[b]=_}}catch(E){n={error:E}}finally{try{!f&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),ww(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function WN(t,e,n){const o=new vw;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class ZN{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=n1(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const _=new Promise(z=>{h=z}),E=e.callbacks,b=function(){h({})},w=this.apiClient,I={onopen:b,onmessage:z=>{WN(w,E.onmessage,z)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(z){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(z){}},L=this.webSocketFactory.create(g,t1(u),I);L.connect(),await _;const W={setup:{model:st(this.apiClient,e.model)}};return L.send(JSON.stringify(W)),new e1(L,this.apiClient)}}class e1{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=AR(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=xR(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(da.PLAY)}pause(){this.sendPlaybackControl(da.PAUSE)}stop(){this.sendPlaybackControl(da.STOP)}resetContext(){this.sendPlaybackControl(da.RESET_CONTEXT)}close(){this.conn.close()}}function t1(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function n1(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function o1(t,e,n){const o=new yw;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const l=JSON.parse(r);if(t.isVertexAI()){const u=RR(l);Object.assign(o,u)}else Object.assign(o,l);e(o)}class s1{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new ZN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&SE(e.config.tools)&&bE(E);const b=u1(E);if(this.apiClient.isVertexAI()){const M=this.apiClient.getProject(),P=this.apiClient.getLocation(),O=this.apiClient.getApiKey(),q=!!M&&!!P||!!O;this.apiClient.getCustomBaseUrl()&&!q?_=g:(_=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b,_))}else{const M=this.apiClient.getApiKey();let P="BidiGenerateContent",O="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",O="access_token"),_=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${P}?${O}=${M}`}let w=()=>{};const I=new Promise(M=>{w=M}),L=e.callbacks,U=function(){var M;(M=L==null?void 0:L.onopen)===null||M===void 0||M.call(L),w({})},j=this.apiClient,W={onopen:U,onmessage:M=>{o1(j,L.onmessage,M)},onerror:(n=L==null?void 0:L.onerror)!==null&&n!==void 0?n:function(M){},onclose:(o=L==null?void 0:L.onclose)!==null&&o!==void 0?o:function(M){}},z=this.webSocketFactory.create(_,l1(b),W);z.connect(),await I;let X=st(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&X.startsWith("publishers/")){const M=this.apiClient.getProject(),P=this.apiClient.getLocation();M&&P&&(X=`projects/${M}/locations/${P}/`+X)}let G={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Qc.AUDIO]}:e.config.responseModalities=[Qc.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const se=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],D=[];for(const M of se)if(this.isCallableTool(M)){const P=M;D.push(await P.tool())}else D.push(M);D.length>0&&(e.config.tools=D);const N={model:X,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?G=bR(this.apiClient,N):G=SR(this.apiClient,N),delete G.config,z.send(JSON.stringify(G)),new a1(z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const r1={turnComplete:!0};class a1{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=vi(n.turns),e.isVertexAI()||(o=o.map(r=>md(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(i1)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},r1),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:CR(e)}:n={realtimeInput:wR(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function l1(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function u1(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V0=10;function L0(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ma(u)){r=!0;break}if(!r)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ma(t){return"callTool"in t&&typeof t.callTool=="function"}function c1(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>ma(r)))!==null&&o!==void 0?o:!1}function O0(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(ma(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(r)}),n}function B0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d1 extends Mo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,l,u,f;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!c1(n)||L0(n.config))return await this.generateContentInternal(g);const h=O0(n);if(h.length>0){const L=h.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${L}.`)}let _,E;const b=vi(g.contents),w=(l=(r=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:V0;let I=0;for(;I<w&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const L=_.candidates[0].content,U=[];for(const j of(f=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(ma(j)){const z=await j.callTool(_.functionCalls);U.push(...z)}I++,E={role:"user",parts:U},g.contents=vi(g.contents),g.contents.push(L),g.contents.push(E),B0(g.config)&&(b.push(L),b.push(E))}return B0(g.config)&&(_.automaticFunctionCallingHistory=b),_},this.generateContentStream=async n=>{var o,r,l,u,f;if(this.maybeMoveToResponseJsonSchem(n),L0(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const g=O0(n);if(g.length>0){const E=g.map(b=>`tools[${b}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(f=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let l;const u=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},f}),this.list=async n=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new mr(Co.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,l,u,f,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(f=n.source)===null||f===void 0?void 0:f.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>ma(g)?await g.tool():g)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&SE(e.config.tools)){const g=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),bE(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var n,o,r;const l=new Map;for(const u of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(ma(u)){const f=u,g=await f.tool();for(const h of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,f)}}return l}async processAfcStream(e){var n,o,r;const l=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:V0;let u=!1,f=0;const g=await this.initAfcToolsMap(e);return(function(h,_,E){return Ii(this,arguments,function*(){for(var b,w,I,L,U,j;f<l;){u&&(f++,u=!1);const G=yield Ue(h.processParamsMaybeAddMcpUsage(E)),se=yield Ue(h.generateContentStreamInternal(G)),D=[],N=[];try{for(var W=!0,z=(w=void 0,Ni(se)),X;X=yield Ue(z.next()),b=X.done,!b;W=!0){L=X.value,W=!1;const M=L;if(yield yield Ue(M),M.candidates&&(!((U=M.candidates[0])===null||U===void 0)&&U.content)){N.push(M.candidates[0].content);for(const P of(j=M.candidates[0].content.parts)!==null&&j!==void 0?j:[])if(f<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(P.functionCall.name)){const O=yield Ue(_.get(P.functionCall.name).callTool([P.functionCall]));D.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(M){w={error:M}}finally{try{!W&&!b&&(I=z.return)&&(yield Ue(I.call(z)))}finally{if(w)throw w.error}}if(D.length>0){u=!0;const M=new Rl;M.candidates=[{content:{role:"user",parts:D}}],yield yield Ue(M);const P=[];P.push(...N),P.push({role:"user",parts:D});const O=vi(E.contents).concat(P);E.contents=O}else break}})})(this,g,e)}async generateContentInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=D0(this.apiClient,e);return f=_e("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=U0(_),b=new Rl;return Object.assign(b,E),b})}else{const h=M0(this.apiClient,e);return f=_e("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=P0(_),b=new Rl;return Object.assign(b,E),b})}}async generateContentStreamInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=D0(this.apiClient,e);return f=_e("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(E){return Ii(this,arguments,function*(){var b,w,I,L;try{for(var U=!0,j=Ni(E),W;W=yield Ue(j.next()),b=W.done,!b;U=!0){L=W.value,U=!1;const z=L,X=U0(yield Ue(z.json()),e);X.sdkHttpResponse={headers:z.headers};const G=new Rl;Object.assign(G,X),yield yield Ue(G)}}catch(z){w={error:z}}finally{try{!U&&!b&&(I=j.return)&&(yield Ue(I.call(j)))}finally{if(w)throw w.error}}})})}else{const h=M0(this.apiClient,e);return f=_e("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(E){return Ii(this,arguments,function*(){var b,w,I,L;try{for(var U=!0,j=Ni(E),W;W=yield Ue(j.next()),b=W.done,!b;U=!0){L=W.value,U=!1;const z=L,X=P0(yield Ue(z.json()),e);X.sdkHttpResponse={headers:z.headers};const G=new Rl;Object.assign(G,X),yield yield Ue(G)}}catch(z){w={error:z}}finally{try{!U&&!b&&(I=j.return)&&(yield Ue(I.call(j)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=sI(this.apiClient,e);return f=_e("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=aI(_),b=new m0;return Object.assign(b,E),b})}else{const h=oI(this.apiClient,e);return f=_e("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=rI(_),b=new m0;return Object.assign(b,E),b})}}async generateImagesInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=vI(this.apiClient,e);return f=_e("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=TI(_),b=new p0;return Object.assign(b,E),b})}else{const h=yI(this.apiClient,e);return f=_e("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=_I(_),b=new p0;return Object.assign(b,E),b})}}async editImageInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=eI(this.apiClient,e);return l=_e("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=tI(g),_=new sw;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=vN(this.apiClient,e);return l=_e("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=_N(g),_=new rw;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=ZI(this.apiClient,e);return l=_e("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const h=eN(g),_=new aw;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=rN(this.apiClient,e);return l=_e("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const h=aN(g),_=new lw;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=LI(this.apiClient,e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>gm(_))}else{const h=VI(this.apiClient,e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>pm(_))}}async listInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=YI(this.apiClient,e);return f=_e("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=KI(_),b=new g0;return Object.assign(b,E),b})}else{const h=jI(this.apiClient,e);return f=_e("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=JI(_),b=new g0;return Object.assign(b,E),b})}}async update(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=gN(this.apiClient,e);return f=_e("{model}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>gm(_))}else{const h=pN(this.apiClient,e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>pm(_))}}async delete(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=QR(this.apiClient,e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=WR(_),b=new y0;return Object.assign(b,E),b})}else{const h=$R(this.apiClient,e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=XR(_),b=new y0;return Object.assign(b,E),b})}}async countTokens(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=YR(this.apiClient,e);return f=_e("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=KR(_),b=new v0;return Object.assign(b,E),b})}else{const h=jR(this.apiClient,e);return f=_e("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=JR(_),b=new v0;return Object.assign(b,E),b})}}async computeTokens(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=OR(this.apiClient,e);return l=_e("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=BR(g),_=new uw;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=wI(this.apiClient,e);return f=_e("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>{const E=xI(_),b=new Xc;return Object.assign(b,E),b})}else{const h=AI(this.apiClient,e);return f=_e("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const E=bI(_),b=new Xc;return Object.assign(b,E),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f1 extends Mo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=ZA(e);return f=_e("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u}else{const h=WA(e);return f=_e("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=jA(e);return l=_e("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h1(t){const e={},n=d(t,["data"]);if(n!=null&&m(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function m1(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>b1(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function p1(t,e,n){const o={},r=d(e,["expireTime"]);n!==void 0&&r!=null&&m(n,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&m(n,["newSessionExpireTime"],l);const u=d(e,["uses"]);n!==void 0&&u!=null&&m(n,["uses"],u);const f=d(e,["liveConnectConstraints"]);n!==void 0&&f!=null&&m(n,["bidiGenerateContentSetup"],S1(t,f));const g=d(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&m(n,["fieldMask"],g),o}function g1(t,e){const n={},o=d(e,["config"]);return o!=null&&m(n,["config"],p1(t,o,n)),n}function y1(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function v1(t){const e={},n=d(t,["id"]);n!=null&&m(e,["id"],n);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _1(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function T1(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function E1(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(t,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],ep(E));const b=d(t,["thinkingConfig"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","thinkingConfig"],b);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const I=d(t,["systemInstruction"]);e!==void 0&&I!=null&&m(e,["setup","systemInstruction"],m1(Sn(I)));const L=d(t,["tools"]);if(e!==void 0&&L!=null){let se=Aa(L);Array.isArray(se)&&(se=se.map(D=>A1(xa(D)))),m(e,["setup","tools"],se)}const U=d(t,["sessionResumption"]);e!==void 0&&U!=null&&m(e,["setup","sessionResumption"],x1(U));const j=d(t,["inputAudioTranscription"]);e!==void 0&&j!=null&&m(e,["setup","inputAudioTranscription"],j);const W=d(t,["outputAudioTranscription"]);e!==void 0&&W!=null&&m(e,["setup","outputAudioTranscription"],W);const z=d(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const X=d(t,["contextWindowCompression"]);e!==void 0&&X!=null&&m(e,["setup","contextWindowCompression"],X);const G=d(t,["proactivity"]);if(e!==void 0&&G!=null&&m(e,["setup","proactivity"],G),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function S1(t,e){const n={},o=d(e,["model"]);o!=null&&m(n,["setup","model"],st(t,o));const r=d(e,["config"]);return r!=null&&m(n,["config"],E1(r,n)),n}function b1(t){const e={},n=d(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],y1(l));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],v1(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const g=d(t,["inlineData"]);g!=null&&m(e,["inlineData"],h1(g));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const E=d(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const b=d(t,["videoMetadata"]);return b!=null&&m(e,["videoMetadata"],b),e}function x1(t){const e={},n=d(t,["handle"]);if(n!=null&&m(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function A1(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const r=d(t,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],_1(u));const f=d(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],T1(f));const g=d(t,["googleSearchRetrieval"]);g!=null&&m(e,["googleSearchRetrieval"],g);const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w1(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function C1(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=w1(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const g=[];l&&g.push(l),f.length>0&&g.push(...f),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class R1 extends Mo{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=g1(this.apiClient,e);l=_e("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const g=C1(f,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I1(t,e){const n={},o=d(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),n}function N1(t){const e={},n=d(t,["name"]);n!=null&&m(e,["_url","name"],n);const o=d(t,["config"]);return o!=null&&I1(o,e),e}function M1(t){const e={},n=d(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function D1(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function P1(t){const e={},n=d(t,["parent"]);n!=null&&m(e,["_url","parent"],n);const o=d(t,["config"]);return o!=null&&D1(o,e),e}function U1(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k1 extends Mo{constructor(e){super(),this.apiClient=e,this.list=async n=>new mr(Co.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=M1(e);return l=_e("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=N1(e);r=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=P1(e);return l=_e("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const h=U1(g),_=new cw;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V1 extends Mo{constructor(e,n=new k1(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new mr(Co.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wN(e);return l=_e("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=IN(e);return l=_e("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=RN(e);r=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kN(e);return l=_e("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const h=VN(g),_=new dw;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=LN(e);return l=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const h=ON(g),_=new fw;return Object.assign(_,h),_})}}async importFile(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=DN(e);return l=_e("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const h=MN(g),_=new $m;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xE=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return xE=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const L1=()=>xE();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const _m=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ti extends Error{}class Mn extends Ti{constructor(e,n,o,r){super(`${Mn.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new yd({message:o,cause:_m(n)});const l=n;return e===400?new wE(e,l,o,r):e===401?new CE(e,l,o,r):e===403?new RE(e,l,o,r):e===404?new IE(e,l,o,r):e===409?new NE(e,l,o,r):e===422?new ME(e,l,o,r):e===429?new DE(e,l,o,r):e>=500?new PE(e,l,o,r):new Mn(e,l,o,r)}}class Tm extends Mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class yd extends Mn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class AE extends yd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class wE extends Mn{}class CE extends Mn{}class RE extends Mn{}class IE extends Mn{}class NE extends Mn{}class ME extends Mn{}class DE extends Mn{}class PE extends Mn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O1=/^[a-z][a-z0-9+.-]*:/i,B1=t=>O1.test(t);let Em=t=>(Em=Array.isArray,Em(t));const q1=Em;let G1=q1;const q0=G1;function F1(t){if(!t)return!0;for(const e in t)return!1;return!0}function H1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const z1=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ti(`${t} must be an integer`);if(e<0)throw new Ti(`${t} must be a positive integer`);return e},j1=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y1=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ra="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J1(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const K1=()=>{var t,e,n,o,r;const l=J1();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ra,"X-Stainless-OS":F0(Deno.build.os),"X-Stainless-Arch":G0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ra,"X-Stainless-OS":F0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":G0((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=$1();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function $1(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,l=o[2]||0,u=o[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const G0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",F0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Nc;const Q1=()=>Nc??(Nc=K1());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X1(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function UE(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function W1(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return UE({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function kE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Z1(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VE=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function zh(t,e,n){return VE(),new File(t,e??"unknown_file",n)}function tM(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const nM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LE=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",iM=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&LE(t),oM=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function sM(t,e,n){if(VE(),t=await t,iM(t))return t instanceof File?t:zh([await t.arrayBuffer()],t.name);if(oM(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),zh(await Sm(r),e,n)}const o=await Sm(t);if(e||(e=tM(t)),!(n!=null&&n.type)){const r=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return zh(o,e,n)}async function Sm(t){var e,n,o,r,l;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(LE(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(nM(t))try{for(var f=!0,g=Ni(t),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const _=r;u.push(...await Sm(_))}}catch(_){n={error:_}}finally{try{!f&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}else{const _=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${_?`; constructor: ${_}`:""}${rM(t)}`)}return u}function rM(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OE{constructor(e){this._client=e}}OE._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BE(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const H0=Object.freeze(Object.create(null)),aM=(t=BE)=>(function(n,...o){if(n.length===1)return n[0];let r=!1;const l=[],u=n.reduce((_,E,b)=>{var w,I,L;/[?#]/.test(E)&&(r=!0);const U=o[b];let j=(r?encodeURIComponent:t)(""+U);return b!==o.length&&(U==null||typeof U=="object"&&U.toString===((L=Object.getPrototypeOf((I=Object.getPrototypeOf((w=U.hasOwnProperty)!==null&&w!==void 0?w:H0))!==null&&I!==void 0?I:H0))===null||L===void 0?void 0:L.toString))&&(j=U+"",l.push({start:_.length+E.length,length:j.length,error:`Value of type ${Object.prototype.toString.call(U).slice(8,-1)} is not a valid path parameter`})),_+E+(b===o.length?"":j)},""),f=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(f))!==null;)l.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(l.sort((_,E)=>_.start-E.start),l.length>0){let _=0;const E=l.reduce((b,w)=>{const I=" ".repeat(w.start-_),L="^".repeat(w.length);return _=w.start+w.length,b+I+L},"");throw new Ti(`Path parameters result in path with invalid segments:
${l.map(b=>b.error).join(`
`)}
${u}
${E}`)}return u}),Mc=aM(BE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qE extends OE{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,l=Zc(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Ti("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Ti("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Mc`/${r}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Mc`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Mc`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const l=n??{},{api_version:u=this._client.apiVersion}=l,f=Zc(l,["api_version"]);return this._client.get(Mc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}qE._key=Object.freeze(["interactions"]);class GE extends qE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lM(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let Dc;function np(t){let e;return(Dc??(e=new globalThis.TextEncoder,Dc=e.encode.bind(e)))(t)}let Pc;function z0(t){let e;return(Pc??(e=new globalThis.TextDecoder,Pc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?np(e):e;this.buffer=lM([this.buffer,n]);const o=[];let r;for(;(r=uM(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(z0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=z0(this.buffer.subarray(0,l));o.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}vd.NEWLINE_CHARS=new Set([`
`,"\r"]);vd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function uM(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function cM(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ed={off:0,error:200,warn:300,info:400,debug:500},j0=(t,e,n)=>{if(t){if(H1(ed,t))return t;Nn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ed))}`)}};function Pl(){}function Uc(t,e,n){return!e||ed[t]>ed[n]?Pl:e[t].bind(e)}const dM={error:Pl,warn:Pl,info:Pl,debug:Pl};let Y0=new WeakMap;function Nn(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return dM;const r=Y0.get(n);if(r&&r[0]===o)return r[1];const l={error:Uc("error",n,o),warn:Uc("warn",n,o),info:Uc("info",n,o),debug:Uc("debug",n,o)};return Y0.set(n,[o,l]),l}const sr=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fa{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const l=o?Nn(o):console;function u(){return Ii(this,arguments,function*(){var g,h,_,E;if(r)throw new Ti("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let b=!1;try{try{for(var w=!0,I=Ni(fM(e,n)),L;L=yield Ue(I.next()),g=L.done,!g;w=!0){E=L.value,w=!1;const U=E;if(!b)if(U.data.startsWith("[DONE]")){b=!0;continue}else try{yield yield Ue(JSON.parse(U.data))}catch(j){throw l.error("Could not parse message into JSON:",U.data),l.error("From chunk:",U.raw),j}}}catch(U){h={error:U}}finally{try{!w&&!g&&(_=I.return)&&(yield Ue(_.call(I)))}finally{if(h)throw h.error}}b=!0}catch(U){if(vm(U))return yield Ue(void 0);throw U}finally{b||n.abort()}})}return new fa(u,n,o)}static fromReadableStream(e,n,o){let r=!1;function l(){return Ii(this,arguments,function*(){var g,h,_,E;const b=new vd,w=kE(e);try{for(var I=!0,L=Ni(w),U;U=yield Ue(L.next()),g=U.done,!g;I=!0){E=U.value,I=!1;const j=E;for(const W of b.decode(j))yield yield Ue(W)}}catch(j){h={error:j}}finally{try{!I&&!g&&(_=L.return)&&(yield Ue(_.call(L)))}finally{if(h)throw h.error}}for(const j of b.flush())yield yield Ue(j)})}function u(){return Ii(this,arguments,function*(){var g,h,_,E;if(r)throw new Ti("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let b=!1;try{try{for(var w=!0,I=Ni(l()),L;L=yield Ue(I.next()),g=L.done,!g;w=!0){E=L.value,w=!1;const U=E;b||U&&(yield yield Ue(JSON.parse(U)))}}catch(U){h={error:U}}finally{try{!w&&!g&&(_=I.return)&&(yield Ue(_.call(I)))}finally{if(h)throw h.error}}b=!0}catch(U){if(vm(U))return yield Ue(void 0);throw U}finally{b||n.abort()}})}return new fa(u,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=o.next();e.push(u),n.push(u)}return l.shift()}});return[new fa(()=>r(e),this.controller,this.client),new fa(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return UE({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:l}=await n.next();if(l)return o.close();const u=np(JSON.stringify(r)+`
`);o.enqueue(u)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function fM(t,e){return Ii(this,arguments,function*(){var o,r,l,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ti("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ti("Attempted to iterate over a response with no body");const f=new mM,g=new vd,h=kE(t.body);try{for(var _=!0,E=Ni(hM(h)),b;b=yield Ue(E.next()),o=b.done,!o;_=!0){u=b.value,_=!1;const w=u;for(const I of g.decode(w)){const L=f.decode(I);L&&(yield yield Ue(L))}}}catch(w){r={error:w}}finally{try{!_&&!o&&(l=E.return)&&(yield Ue(l.call(E)))}finally{if(r)throw r.error}}for(const w of g.flush()){const I=f.decode(w);I&&(yield yield Ue(I))}})}function hM(t){return Ii(this,arguments,function*(){var n,o,r,l;let u=new Uint8Array;try{for(var f=!0,g=Ni(t),h;h=yield Ue(g.next()),n=h.done,!n;f=!0){l=h.value,f=!1;const _=l;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?np(_):_;let b=new Uint8Array(u.length+E.length);b.set(u),b.set(E,u.length),u=b;let w;for(;(w=cM(u))!==-1;)yield yield Ue(u.slice(0,w)),u=u.slice(w)}}catch(_){o={error:_}}finally{try{!f&&!n&&(r=g.return)&&(yield Ue(r.call(g)))}finally{if(o)throw o.error}}u.length>0&&(yield yield Ue(u))})}class mM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=pM(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function pM(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function gM(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var f;if(e.options.stream)return Nn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):fa.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),h=(f=g==null?void 0:g.split(";")[0])===null||f===void 0?void 0:f.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return Nn(t).debug(`[${o}] response parsed`,sr({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ip extends Promise{constructor(e,n,o=gM){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new ip(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FE=Symbol("brand.privateNullableHeaders");function*yM(t){if(!t)return;if(FE in t){const{values:o,nulls:r}=t;yield*o.entries();for(const l of r)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():q0(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=q0(o[1])?o[1]:[o[1]];let u=!1;for(const f of l)f!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,f])}}const Il=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[l,u]of yM(o)){const f=l.toLowerCase();r.has(f)||(e.delete(l),r.add(f)),u===null?(e.delete(l),n.add(f)):(e.append(l,u),n.delete(f))}}return{[FE]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jh=t=>{var e,n,o,r,l,u;if(typeof globalThis.process<"u")return(o=(n=(e=BA)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var HE;class _d{constructor(e){var n,o,r,l,u,f,g,{baseURL:h=jh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(n=jh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=e,b=Zc(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:_,apiVersion:E},b),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(o=w.timeout)!==null&&o!==void 0?o:_d.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;const I="warn";this.logLevel=I,this.logLevel=(u=(l=j0(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:j0(jh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:I,this.fetchOptions=w.fetchOptions,this.maxRetries=(f=w.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(g=w.fetch)!==null&&g!==void 0?g:X1(),this.encoder=eM,this._options=w,this.apiKey=_,this.apiVersion=E,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Il([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Il([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Il([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new Ti(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ra}`}defaultIdempotencyKey(){return`stainless-node-retry-${L1()}`}makeStatusError(e,n,o,r){return Mn.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,l=B1(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return F1(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new ip(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,l,u;const f=await e,g=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=g),await this.prepareOptions(f);const{req:h,url:_,timeout:E}=await this.buildRequest(f,{retryCount:g-n});await this.prepareRequest(h,{url:_,options:f});const b="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=o===void 0?"":`, retryOf: ${o}`,I=Date.now();if(Nn(this).debug(`[${b}] sending request`,sr({retryOfRequestLogID:o,method:f.method,url:_,options:f,headers:h.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new Tm;const L=new AbortController,U=await this.fetchWithTimeout(_,h,E,L).catch(_m),j=Date.now();if(U instanceof globalThis.Error){const z=`retrying, ${n} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new Tm;const X=vm(U)||/timed? ?out/i.test(String(U)+("cause"in U?String(U.cause):""));if(n)return Nn(this).info(`[${b}] connection ${X?"timed out":"failed"} - ${z}`),Nn(this).debug(`[${b}] connection ${X?"timed out":"failed"} (${z})`,sr({retryOfRequestLogID:o,url:_,durationMs:j-I,message:U.message})),this.retryRequest(f,n,o??b);throw Nn(this).info(`[${b}] connection ${X?"timed out":"failed"} - error; no more retries left`),Nn(this).debug(`[${b}] connection ${X?"timed out":"failed"} (error; no more retries left)`,sr({retryOfRequestLogID:o,url:_,durationMs:j-I,message:U.message})),X?new AE:new yd({cause:U})}const W=`[${b}${w}] ${h.method} ${_} ${U.ok?"succeeded":"failed"} with status ${U.status} in ${j-I}ms`;if(!U.ok){const z=await this.shouldRetry(U);if(n&&z){const M=`retrying, ${n} attempts remaining`;return await Z1(U.body),Nn(this).info(`${W} - ${M}`),Nn(this).debug(`[${b}] response error (${M})`,sr({retryOfRequestLogID:o,url:U.url,status:U.status,headers:U.headers,durationMs:j-I})),this.retryRequest(f,n,o??b,U.headers)}const X=z?"error; no more retries left":"error; not retryable";Nn(this).info(`${W} - ${X}`);const G=await U.text().catch(M=>_m(M).message),se=j1(G),D=se?void 0:G;throw Nn(this).debug(`[${b}] response error (${X})`,sr({retryOfRequestLogID:o,url:U.url,status:U.status,headers:U.headers,message:D,durationMs:Date.now()-I})),this.makeStatusError(U.status,se,D,U.headers)}return Nn(this).info(W),Nn(this).debug(`[${b}] response start`,sr({retryOfRequestLogID:o,url:U.url,status:U.status,headers:U.headers,durationMs:j-I})),{response:U,options:f,controller:L,requestLogID:b,retryOfRequestLogID:o,startTime:I}}async fetchWithTimeout(e,n,o,r){const l=n||{},{signal:u,method:f}=l,g=Zc(l,["signal","method"]),h=r.abort.bind(r);u&&u.addEventListener("abort",h,{once:!0});const _=setTimeout(h,o),E=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},E?{duplex:"half"}:{}),{method:"GET"}),g);f&&(b.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(_)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var l;let u;const f=r==null?void 0:r.get("retry-after-ms");if(f){const h=parseFloat(f);Number.isNaN(h)||(u=h)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const h=parseFloat(g);Number.isNaN(h)?u=Date.parse(g)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,h)}return await Y1(u),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,u=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,l;const u=Object.assign({},e),{method:f,path:g,query:h,defaultBaseURL:_}=u,E=this.buildURL(g,h,_);"timeout"in u&&z1("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:b,body:w}=this.buildBody({options:u}),I=await this.buildHeaders({options:e,method:f,bodyHeaders:b,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:I},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=Il([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Q1()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Il([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:W1(e)}:this.encoder({body:e,headers:o})}}_d.DEFAULT_TIMEOUT=6e4;class nn extends _d{constructor(){super(...arguments),this.interactions=new GE(this)}}HE=nn;nn.GeminiNextGenAPIClient=HE;nn.GeminiNextGenAPIClientError=Ti;nn.APIError=Mn;nn.APIConnectionError=yd;nn.APIConnectionTimeoutError=AE;nn.APIUserAbortError=Tm;nn.NotFoundError=IE;nn.ConflictError=NE;nn.RateLimitError=DE;nn.BadRequestError=wE;nn.AuthenticationError=CE;nn.InternalServerError=PE;nn.PermissionDeniedError=RE;nn.UnprocessableEntityError=ME;nn.toFile=sM;nn.Interactions=GE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vM(t,e){const n={},o=d(t,["name"]);return o!=null&&m(n,["_url","name"],o),n}function _M(t,e){const n={},o=d(t,["name"]);return o!=null&&m(n,["_url","name"],o),n}function TM(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&m(n,["sdkHttpResponse"],o),n}function EM(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&m(n,["sdkHttpResponse"],o),n}function SM(t,e,n){const o={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const u=d(t,["learningRateMultiplier"]);if(u!=null&&m(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(d(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(d(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","batchSize"],f);const g=d(t,["learningRate"]);if(e!==void 0&&g!=null&&m(e,["tuningTask","hyperparameters","learningRate"],g),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(d(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(d(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(d(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(d(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function bM(t,e,n){const o={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const G=d(t,["validationDataset"]);e!==void 0&&G!=null&&m(e,["supervisedTuningSpec"],Yh(G))}else if(r==="PREFERENCE_TUNING"){const G=d(t,["validationDataset"]);e!==void 0&&G!=null&&m(e,["preferenceOptimizationSpec"],Yh(G))}else if(r==="DISTILLATION"){const G=d(t,["validationDataset"]);e!==void 0&&G!=null&&m(e,["distillationSpec"],Yh(G))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const u=d(t,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let f=d(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const G=d(t,["epochCount"]);e!==void 0&&G!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],G)}else if(f==="PREFERENCE_TUNING"){const G=d(t,["epochCount"]);e!==void 0&&G!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],G)}else if(f==="DISTILLATION"){const G=d(t,["epochCount"]);e!==void 0&&G!=null&&m(e,["distillationSpec","hyperParameters","epochCount"],G)}let g=d(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const G=d(t,["learningRateMultiplier"]);e!==void 0&&G!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],G)}else if(g==="PREFERENCE_TUNING"){const G=d(t,["learningRateMultiplier"]);e!==void 0&&G!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],G)}else if(g==="DISTILLATION"){const G=d(t,["learningRateMultiplier"]);e!==void 0&&G!=null&&m(e,["distillationSpec","hyperParameters","learningRateMultiplier"],G)}let h=d(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const G=d(t,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],G)}else if(h==="PREFERENCE_TUNING"){const G=d(t,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],G)}else if(h==="DISTILLATION"){const G=d(t,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&m(e,["distillationSpec","exportLastCheckpointOnly"],G)}let _=d(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const G=d(t,["adapterSize"]);e!==void 0&&G!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],G)}else if(_==="PREFERENCE_TUNING"){const G=d(t,["adapterSize"]);e!==void 0&&G!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],G)}else if(_==="DISTILLATION"){const G=d(t,["adapterSize"]);e!==void 0&&G!=null&&m(e,["distillationSpec","hyperParameters","adapterSize"],G)}let E=d(n,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const G=d(t,["tuningMode"]);e!==void 0&&G!=null&&m(e,["supervisedTuningSpec","tuningMode"],G)}const b=d(t,["customBaseModel"]);e!==void 0&&b!=null&&m(e,["customBaseModel"],b);let w=d(n,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const G=d(t,["batchSize"]);e!==void 0&&G!=null&&m(e,["supervisedTuningSpec","hyperParameters","batchSize"],G)}let I=d(n,["config","method"]);if(I===void 0&&(I="SUPERVISED_FINE_TUNING"),I==="SUPERVISED_FINE_TUNING"){const G=d(t,["learningRate"]);e!==void 0&&G!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRate"],G)}const L=d(t,["labels"]);e!==void 0&&L!=null&&m(e,["labels"],L);const U=d(t,["beta"]);e!==void 0&&U!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],U);const j=d(t,["baseTeacherModel"]);e!==void 0&&j!=null&&m(e,["distillationSpec","baseTeacherModel"],j);const W=d(t,["tunedTeacherModelSource"]);e!==void 0&&W!=null&&m(e,["distillationSpec","tunedTeacherModelSource"],W);const z=d(t,["sftLossWeightMultiplier"]);e!==void 0&&z!=null&&m(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],z);const X=d(t,["outputUri"]);return e!==void 0&&X!=null&&m(e,["outputUri"],X),o}function xM(t,e){const n={},o=d(t,["baseModel"]);o!=null&&m(n,["baseModel"],o);const r=d(t,["preTunedModel"]);r!=null&&m(n,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&kM(l);const u=d(t,["config"]);return u!=null&&SM(u,n),n}function AM(t,e){const n={},o=d(t,["baseModel"]);o!=null&&m(n,["baseModel"],o);const r=d(t,["preTunedModel"]);r!=null&&m(n,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&VM(l,n,e);const u=d(t,["config"]);return u!=null&&bM(u,n,e),n}function wM(t,e){const n={},o=d(t,["name"]);return o!=null&&m(n,["_url","name"],o),n}function CM(t,e){const n={},o=d(t,["name"]);return o!=null&&m(n,["_url","name"],o),n}function RM(t,e,n){const o={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=d(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),o}function IM(t,e,n){const o={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=d(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),o}function NM(t,e){const n={},o=d(t,["config"]);return o!=null&&RM(o,n),n}function MM(t,e){const n={},o=d(t,["config"]);return o!=null&&IM(o,n),n}function DM(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&m(n,["nextPageToken"],r);const l=d(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>zE(f))),m(n,["tuningJobs"],u)}return n}function PM(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&m(n,["nextPageToken"],r);const l=d(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>bm(f))),m(n,["tuningJobs"],u)}return n}function UM(t,e){const n={},o=d(t,["name"]);o!=null&&m(n,["model"],o);const r=d(t,["name"]);return r!=null&&m(n,["endpoint"],r),n}function kM(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=d(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(n,["examples","examples"],r)}return n}function VM(t,e,n){const o={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["distillationSpec","promptDatasetUri"],u)}let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["distillationSpec","promptDatasetUri"],u)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function zE(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&m(n,["name"],r);const l=d(t,["state"]);l!=null&&m(n,["state"],rE(l));const u=d(t,["createTime"]);u!=null&&m(n,["createTime"],u);const f=d(t,["tuningTask","startTime"]);f!=null&&m(n,["startTime"],f);const g=d(t,["tuningTask","completeTime"]);g!=null&&m(n,["endTime"],g);const h=d(t,["updateTime"]);h!=null&&m(n,["updateTime"],h);const _=d(t,["description"]);_!=null&&m(n,["description"],_);const E=d(t,["baseModel"]);E!=null&&m(n,["baseModel"],E);const b=d(t,["_self"]);return b!=null&&m(n,["tunedModel"],UM(b)),n}function bm(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&m(n,["name"],r);const l=d(t,["state"]);l!=null&&m(n,["state"],rE(l));const u=d(t,["createTime"]);u!=null&&m(n,["createTime"],u);const f=d(t,["startTime"]);f!=null&&m(n,["startTime"],f);const g=d(t,["endTime"]);g!=null&&m(n,["endTime"],g);const h=d(t,["updateTime"]);h!=null&&m(n,["updateTime"],h);const _=d(t,["error"]);_!=null&&m(n,["error"],_);const E=d(t,["description"]);E!=null&&m(n,["description"],E);const b=d(t,["baseModel"]);b!=null&&m(n,["baseModel"],b);const w=d(t,["tunedModel"]);w!=null&&m(n,["tunedModel"],w);const I=d(t,["preTunedModel"]);I!=null&&m(n,["preTunedModel"],I);const L=d(t,["supervisedTuningSpec"]);L!=null&&m(n,["supervisedTuningSpec"],L);const U=d(t,["preferenceOptimizationSpec"]);U!=null&&m(n,["preferenceOptimizationSpec"],U);const j=d(t,["distillationSpec"]);j!=null&&m(n,["distillationSpec"],j);const W=d(t,["tuningDataStats"]);W!=null&&m(n,["tuningDataStats"],W);const z=d(t,["encryptionSpec"]);z!=null&&m(n,["encryptionSpec"],z);const X=d(t,["partnerModelTuningSpec"]);X!=null&&m(n,["partnerModelTuningSpec"],X);const G=d(t,["customBaseModel"]);G!=null&&m(n,["customBaseModel"],G);const se=d(t,["experiment"]);se!=null&&m(n,["experiment"],se);const D=d(t,["labels"]);D!=null&&m(n,["labels"],D);const N=d(t,["outputUri"]);N!=null&&m(n,["outputUri"],N);const M=d(t,["pipelineJob"]);M!=null&&m(n,["pipelineJob"],M);const P=d(t,["serviceAccount"]);P!=null&&m(n,["serviceAccount"],P);const O=d(t,["tunedModelDisplayName"]);O!=null&&m(n,["tunedModelDisplayName"],O);const q=d(t,["veoTuningSpec"]);return q!=null&&m(n,["veoTuningSpec"],q),n}function LM(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&m(n,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&m(n,["name"],r);const l=d(t,["metadata"]);l!=null&&m(n,["metadata"],l);const u=d(t,["done"]);u!=null&&m(n,["done"],u);const f=d(t,["error"]);return f!=null&&m(n,["error"],f),n}function Yh(t,e){const n={},o=d(t,["gcsUri"]);o!=null&&m(n,["validationDatasetUri"],o);const r=d(t,["vertexDatasetResource"]);return r!=null&&m(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OM extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mr(Co.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:cm.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=CM(e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>bm(_))}else{const h=wM(e);return f=_e("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>zE(_))}}async listInternal(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=MM(e);return f=_e("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=PM(_),b=new _0;return Object.assign(b,E),b})}else{const h=NM(e);return f=_e("tunedModels",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=DM(_),b=new _0;return Object.assign(b,E),b})}}async cancel(e){var n,o,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=_M(e);return f=_e("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=EM(_),b=new T0;return Object.assign(b,E),b})}else{const h=vM(e);return f=_e("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const b=E;return b.sdkHttpResponse={headers:_.headers},b})),u.then(_=>{const E=TM(_),b=new T0;return Object.assign(b,E),b})}}async tuneInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=AM(e,e);return l=_e("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>bm(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xM(e);return l=_e("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>LM(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BM{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const qM=1024*1024*8,GM=3,FM=1e3,HM=2,td="x-goog-upload-status";async function zM(t,e,n){var o;const r=await jE(t,e,n),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[td])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function jM(t,e,n){var o;const r=await jE(t,e,n),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[td])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=eE(l),f=new Qm;return Object.assign(f,u),f}async function jE(t,e,n){var o,r;let l=0,u=0,f=new fm(new Response),g="upload";for(l=t.size;u<l;){const h=Math.min(qM,l-u),_=t.slice(u,u+h);u+h>=l&&(g+=", finalize");let E=0,b=FM;for(;E<GM&&(f=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((o=f==null?void 0:f.headers)===null||o===void 0)&&o[td]));)E++,await JM(b),b=b*HM;if(u+=h,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[td])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function YM(t){return{size:t.size,type:t.type}}function JM(t){return new Promise(e=>setTimeout(e,t))}class KM{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zM(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jM(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $M{create(e,n,o){return new QM(e,n,o)}}class QM{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J0="x-goog-api-key";class XM{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(J0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(J0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WM="gl-node/";class op{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new nn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=HA(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new XM(this.apiKey);this.apiClient=new YN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:WM+"web",uploader:new KM,downloader:new BM}),this.models=new d1(this.apiClient),this.live=new s1(this.apiClient,r,new $M),this.batches=new _C(this.apiClient),this.chats=new eR(this.models,this.apiClient),this.caches=new XC(this.apiClient),this.files=new fR(this.apiClient),this.operations=new f1(this.apiClient),this.authTokens=new R1(this.apiClient),this.tunings=new OM(this.apiClient),this.fileSearchStores=new V1(this.apiClient)}}const K0=t=>{const e={:"",:"",sunday:"",sun:"",:"",:"",:"",monday:"",mon:"",:"",:"",thursday:"",tue:"",tues:"",:"",:"",:"",wed:"",:"",:"",thu:"",thurs:"",:"",fri:"",:"",sat:""},n={Math:{name:"",color:"bg-blue-100 text-blue-800",icon:"",keywords:["","","","","math",""]},Science:{name:"",color:"bg-green-100 text-green-800",icon:"",keywords:["","","kimya","science","physics","chemistry","biology","","",""]},Arabic:{name:" ",color:"bg-emerald-100 text-emerald-800",icon:"",keywords:[""," ","arabic","",""," "," "]},English:{name:" ",color:"bg-red-100 text-red-800",icon:"",keywords:["","","english",""]},Social:{name:" ",color:"bg-yellow-100 text-yellow-800",icon:"",keywords:["","","","social","history"]},Religion:{name:" ",color:"bg-purple-100 text-purple-800",icon:"",keywords:[""," ","islamic","quran",""]},Art:{name:" ",color:"bg-pink-100 text-pink-800",icon:"",keywords:["","art",""]},Sport:{name:" ",color:"bg-orange-100 text-orange-800",icon:"",keywords:["","","sport","pe"]}},o=[],r=g=>{let h=o.find(_=>_.day===g);return h||(h={day:g,slots:[]},o.push(h)),h};t.replace(//g," ").replace(/-/g," ").replace(/_/g," ").replace(/ /g,"  ").replace(/\s+/g," ");const l=t.split(/\n|\.|/).map(g=>g.trim()).filter(g=>g.length>2);let u=" ",f={color:"bg-gray-100 text-gray-800",icon:""};for(const g of l){let h="",_=null;for(const[w,I]of Object.entries(n))if(I.keywords.some(L=>g.toLowerCase().includes(L))){h=I.name,_=I;break}const E=/\d/.test(g),b=Object.keys(e).some(w=>g.includes(w));if(h&&!E&&!b){u=h,f=_;continue}if(b){let w=u,I=f;h&&(w=h,I=_);const L=[];for(const[z,X]of Object.entries(e)){const G=new RegExp(z,"gi");let se;for(;(se=G.exec(g))!==null;)L.some(D=>D.index===se.index)||L.push({day:X,index:se.index})}L.sort((z,X)=>z.index-X.index);const U=[],j=/(\d{1,2})(:\d{2})?\s*(||pm|am||)?|\s*(\d{1,2})/gi;let W;for(;(W=j.exec(g))!==null;){let z=W[0],X=W[1]||W[4],G=parseInt(X);if(G){let se="";z.match(/|pm||PM/i)||G>=12&&G<=6||G>=1&&G<=6?se="":G>=7&&G<=11&&(se="");let D=`${G}:00 ${se}`;U.push({time:D,index:W.index,raw:z})}}L.length>0&&(U.length===1?L.forEach(z=>{r(z.day).slots.push({id:`s-${Math.random()}`,subject:w,time:U[0].time,color:I.color,icon:I.icon})}):U.length>1&&L.forEach((z,X)=>{var N;const G=((N=L[X+1])==null?void 0:N.index)??1/0,D=U.find(M=>M.index>z.index&&M.index<G)||U[U.length-1];D&&r(z.day).slots.push({id:`s-${Math.random()}`,subject:w,time:D.time,color:I.color,icon:I.icon})}))}}return o.length===0&&t.trim()&&o.push({day:"",slots:[{id:`s-${Math.random()}`,subject:t.trim().substring(0,30),time:"09:00 ",color:"bg-blue-100 text-blue-800",icon:""}]}),o},YE=async(t,e)=>{try{const n=await fetch("/api/anthropic/v1/messages",{method:"POST",headers:{"x-api-key":e,"anthropic-version":"2023-06-01","content-type":"application/json"},body:JSON.stringify({model:"claude-3-5-sonnet-20240620",max_tokens:4096,messages:[{role:"user",content:t}]})});if(!n.ok){const r=await n.text();throw new Error(`Claude API Error: ${r}`)}return(await n.json()).content[0].text}catch(n){throw console.error("Claude API Request Failed:",n),n}},xm=async(t,e,n="gemini")=>{try{const o=e||"";if(!o)return console.warn("API Key missing, using Smart Context Regex parser."),K0(t);const r={Math:{name:"",color:"bg-blue-100 text-blue-800",icon:"",keywords:["","","","","math",""]},Science:{name:"",color:"bg-green-100 text-green-800",icon:"",keywords:["","","kimya","science","physics","chemistry","biology","","",""]},Arabic:{name:" ",color:"bg-emerald-100 text-emerald-800",icon:"",keywords:[""," ","arabic","",""," "," "]},English:{name:" ",color:"bg-red-100 text-red-800",icon:"",keywords:["","","english",""]},Social:{name:" ",color:"bg-yellow-100 text-yellow-800",icon:"",keywords:["","","","social","history"]},Religion:{name:" ",color:"bg-purple-100 text-purple-800",icon:"",keywords:[""," ","islamic","quran",""]},Art:{name:" ",color:"bg-pink-100 text-pink-800",icon:"",keywords:["","art",""]},Sport:{name:" ",color:"bg-orange-100 text-orange-800",icon:"",keywords:["","","sport","pe"]}},l="gemini-1.5-flash",u=`
           .     " "   JSON  .
      
       :
      1. :  (day)  (subject)  (time).
      2.   :   (      )  .
      3.  :            .
      4.  :    (: "" -> "").
      5. :      JSON    .
      
        :
      [{"day": "", "subject": " ", "time": "04:00 "}, ...]

       :
      "${t}"
    `;let f="";if(n==="claude"?f=await YE(u,o):f=(await new op({apiKey:o}).models.generateContent({model:l,contents:[{role:"user",parts:[{text:u}]}],config:{responseMimeType:"application/json"}})).text||"",!f)throw new Error("Empty response from AI");const g=JSON.parse(f),h=[],_={};return g.forEach(E=>{_[E.day]||(_[E.day]={day:E.day,slots:[]},h.push(_[E.day]));let b={color:"bg-gray-100 text-gray-800",icon:""};for(const w of Object.values(r))if(w.keywords.some(I=>E.subject.includes(I)||w.name.includes(E.subject))){b=w,!E.subject.includes(w.name)&&w.name.includes(E.subject)&&(E.subject=w.name);break}_[E.day].slots.push({id:`s-${Math.random().toString(36).substr(2,9)}`,subject:E.subject,time:E.time,color:b.color,icon:b.icon})}),h}catch(o){return console.error("AI Schedule Parsing Error:",o),K0(t)}},$0=t=>{const e=[],n=t.split(/\n|,|/).map(r=>r.trim()).filter(r=>r.length>5),o={:" "," ":" ",:"",:"",:"",:"",:" ",english:" ",:" ",:" "};return n.forEach(r=>{const l=r.match(/(|||\/)\s*([\u0600-\u06FF\s]+)/)||[null,"",r.split(" ").slice(0,2).join(" ")];let u=l[2]||l[0]||" ",f=" ";for(const[_,E]of Object.entries(o))if(r.includes(_)){f=E;break}const h=["","","","","","",""].filter(_=>r.includes(_)).join(" ");u.length>3&&e.push({id:`t-${Math.random()}`,name:u.trim(),subject:f,availability:h||"  ",bio:"     ( )",imageUrl:`https://picsum.photos/seed/${Math.random()}/400`,grades:[]})}),e},JE=async(t,e,n="gemini")=>{try{const o=e||"";if(!o)return console.warn("API Key is missing, using Offline Regex Parser."),$0(t);const r=`         JSON.
      : "${t}"
      
        ( ):
      - name:  .
      - subject:  ().
      - bio:   ().
      - availability:   ().
      - teachingHours:   ().
      - grades:   ().
      - imageUrl:   .
      - id:  .
      
      Output ONLY JSON array.`;let l="";return n==="claude"?l=await YE(r,o):l=(await new op({apiKey:o}).models.generateContent({model:"gemini-1.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:Yt.ARRAY,items:{type:Yt.OBJECT,properties:{id:{type:Yt.STRING},name:{type:Yt.STRING},subject:{type:Yt.STRING},bio:{type:Yt.STRING},availability:{type:Yt.STRING},teachingHours:{type:Yt.STRING},grades:{type:Yt.ARRAY,items:{type:Yt.STRING}},imageUrl:{type:Yt.STRING}},required:["id","name","subject","bio","availability","teachingHours","grades","imageUrl"]}}}})).text||"[]",JSON.parse(l.trim())}catch(o){return console.error("AI Teacher Parsing Error:",o),$0(t)}};class ZM{constructor(e="ar-EG"){this.supported=!1,this.lang=e;const n=window.SpeechRecognition||window.webkitSpeechRecognition;this.synth=window.speechSynthesis,n?(this.recognition=new n,this.recognition.lang=e,this.recognition.interimResults=!1,this.recognition.continuous=!1,this.supported=!0):(console.error("Speech Recognition not supported in this browser."),this.supported=!1)}listen(){return new Promise((e,n)=>{if(!this.supported)return n("Browser not supported");try{this.recognition.stop()}catch{}this.recognition.start(),this.recognition.onresult=o=>{const r=o.results[0][0].transcript;e(r)},this.recognition.onerror=o=>{o.error==="no-speech"?n("no-speech"):n(o.error)},this.recognition.onend=()=>{}})}say(e){return new Promise((n,o)=>{if(!this.synth)return n();this.synth.cancel();const r=new SpeechSynthesisUtterance(e);r.lang=this.lang,r.pitch=1,r.rate=1,r.onend=()=>n(),r.onerror=l=>{console.error("Speech Synthesis Error",l),n()},this.synth.speak(r)})}}const Ki=new ZM,KE=({onUpdateSchedule:t,onAddTeacher:e,onNavigate:n,grades:o,apiKey:r})=>{const[l,u]=ve.useState(!1),[f,g]=ve.useState(!1),[h,_]=ve.useState(" ");ve.useEffect(()=>{let b=!0;const w=async()=>{if(!(!l||!b)){g(!0),_(" ... | Listening");try{const I=await Ki.listen();if(!b||!l)return;g(!1),_(`: "${I}"`),console.log("Voice Command:",I);const L=I.toLowerCase();if(L.includes("")||L.includes(""))await Ki.say("      ."),n("stages");else if(L.includes("")||L.includes(""))await Ki.say("    ."),n("home");else if(L.includes("")||L.includes(""))await Ki.say("    ."),n("teachers");else if(L.includes("")||L.includes(""))await Ki.say("         "),console.log("Processing El-Moasser request...");else if(L.includes("")||L.includes(""))await Ki.say("  ..."),await e(I),await Ki.say(" .");else if(L.includes("")||L.includes("")){const U=o.find(j=>I.includes(j.name));U?(await Ki.say(`   ${U.name}`),await t(U.id,I)):await Ki.say("    .  .")}else await Ki.say("   .  :     .")}catch{b&&l&&_("  ...")}b&&l&&(await new Promise(I=>setTimeout(I,1e3)),w())}};return l?w():(g(!1),_(" "),window.speechSynthesis.cancel()),()=>{b=!1}},[l,n,e,t,o]);const E=()=>{u(!l)};return T.jsxs("div",{className:"fixed bottom-8 left-8 z-[100] flex flex-col items-end gap-4",children:[l&&T.jsxs("div",{className:"rounded-3xl shadow-2xl p-6 w-72 border bg-white border-emerald-100 animate-in slide-in-from-bottom-4",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx("div",{className:`w-3 h-3 rounded-full ${f?"bg-red-500 animate-pulse":"bg-gray-300"}`}),T.jsx("span",{className:"font-black text-emerald-600",children:"  (Offline)"})]}),T.jsx("p",{className:"text-gray-600 text-sm font-bold leading-relaxed",children:h})]}),T.jsx("button",{onClick:E,className:`w-20 h-20 rounded-full flex items-center justify-center shadow-2xl transition-all active:scale-90 ${l?"bg-red-500 text-white animate-pulse":"bg-[#10b981] text-white hover:bg-emerald-600"}`,children:l?T.jsx("span",{className:"text-3xl",children:""}):T.jsx("span",{className:"text-4xl",children:""})})]})};var Q0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let r=t.charCodeAt(o);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++o)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},eD=function(t){const e=[];let n=0,o=0;for(;n<t.length;){const r=t[n++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=t[n++];e[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=t[n++],u=t[n++],f=t[n++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const l=t[n++],u=t[n++];e[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},QE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<t.length;r+=3){const l=t[r],u=r+1<t.length,f=u?t[r+1]:0,g=r+2<t.length,h=g?t[r+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let b=(f&15)<<2|h>>6,w=h&63;g||(w=64,u||(b=64)),o.push(n[_],n[E],n[b],n[w])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($E(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<t.length;){const l=n[t.charAt(r++)],f=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const E=r<t.length?n[t.charAt(r)]:64;if(++r,l==null||f==null||h==null||E==null)throw new tD;const b=l<<2|f>>4;if(o.push(b),h!==64){const w=f<<4&240|h>>2;if(o.push(w),E!==64){const I=h<<6&192|E;o.push(I)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nD=function(t){const e=$E(t);return QE.encodeByteArray(e,!0)},nd=function(t){return nD(t).replace(/\./g,"")},iD=function(t){try{return QE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=()=>oD().__FIREBASE_DEFAULTS__,rD=()=>{if(typeof process>"u"||typeof Q0>"u")return;const t=Q0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iD(t[1]);return e&&JSON.parse(e)},sp=()=>{try{return sD()||rD()||aD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lD=t=>{var e,n;return(n=(e=sp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},XE=t=>{const e=lD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},WE=()=>{var t;return(t=sp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",r=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[nd(JSON.stringify(n)),nd(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dD(){var t;const e=(t=sp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fD(){return!dD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hD(){try{return typeof indexedDB=="object"}catch{return!1}}function mD(){return new Promise((t,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(o),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var l;e(((l=r.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="FirebaseError";class pr extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=pD,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eS.prototype.create)}}class eS{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?gD(l,o):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new pr(r,f,o)}}function gD(t,e){return t.replace(yD,(n,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const yD=/\{\$([^}]+)}/g;function Am(t,e){if(t===e)return!0;const n=Object.keys(t),o=Object.keys(e);for(const r of n){if(!o.includes(r))return!1;const l=t[r],u=e[r];if(X0(l)&&X0(u)){if(!Am(l,u))return!1}else if(l!==u)return!1}for(const r of o)if(!n.includes(r))return!1;return!0}function X0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t){return t&&t._delegate?t._delegate:t}class ga{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new uD;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TD(e))try{this.getOrInitializeService({instanceIdentifier:rr})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(e=rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rr){return this.instances.has(e)}getOptions(e=rr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);o===f&&u.resolve(r)}return r}onInit(e,n){var o;const r=this.normalizeInstanceIdentifier(n),l=(o=this.onInitCallbacks.get(r))!==null&&o!==void 0?o:new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const r of o)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:_D(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=rr){return this.component?this.component.multipleInstances?e:rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _D(t){return t===rr?void 0:t}function TD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const SD={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},bD=Xe.INFO,xD={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},AD=(t,e,...n)=>{if(e<t.logLevel)return;const o=new Date().toISOString(),r=xD[e];if(r)console[r](`[${o}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tS{constructor(e){this.name=e,this._logLevel=bD,this._logHandler=AD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const wD=(t,e)=>e.some(n=>t instanceof n);let W0,Z0;function CD(){return W0||(W0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RD(){return Z0||(Z0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nS=new WeakMap,wm=new WeakMap,iS=new WeakMap,Jh=new WeakMap,rp=new WeakMap;function ID(t){const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(Es(t.result)),r()},u=()=>{o(t.error),r()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&nS.set(n,t)}).catch(()=>{}),rp.set(e,t),e}function ND(t){if(wm.has(t))return;const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),r()},u=()=>{o(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});wm.set(t,e)}let Cm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MD(t){Cm=t(Cm)}function DD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(Kh(this),e,...n);return iS.set(o,e.sort?e.sort():[e]),Es(o)}:RD().includes(t)?function(...e){return t.apply(Kh(this),e),Es(nS.get(this))}:function(...e){return Es(t.apply(Kh(this),e))}}function PD(t){return typeof t=="function"?DD(t):(t instanceof IDBTransaction&&ND(t),wD(t,CD())?new Proxy(t,Cm):t)}function Es(t){if(t instanceof IDBRequest)return ID(t);if(Jh.has(t))return Jh.get(t);const e=PD(t);return e!==t&&(Jh.set(t,e),rp.set(e,t)),e}const Kh=t=>rp.get(t);function UD(t,e,{blocked:n,upgrade:o,blocking:r,terminated:l}={}){const u=indexedDB.open(t,e),f=Es(u);return o&&u.addEventListener("upgradeneeded",g=>{o(Es(u.result),g.oldVersion,g.newVersion,Es(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const kD=["get","getKey","getAll","getAllKeys","count"],VD=["put","add","delete","clear"],$h=new Map;function eT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($h.get(e))return $h.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,r=VD.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(r||kD.includes(n)))return;const l=async function(u,...f){const g=this.transaction(u,r?"readwrite":"readonly");let h=g.store;return o&&(h=h.index(f.shift())),(await Promise.all([h[n](...f),r&&g.done]))[0]};return $h.set(e,l),l}MD(t=>({...t,get:(e,n,o)=>eT(e,n)||t.get(e,n,o),has:(e,n)=>!!eT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OD(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function OD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rm="@firebase/app",tT="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new tS("@firebase/app"),BD="@firebase/app-compat",qD="@firebase/analytics-compat",GD="@firebase/analytics",FD="@firebase/app-check-compat",HD="@firebase/app-check",zD="@firebase/auth",jD="@firebase/auth-compat",YD="@firebase/database",JD="@firebase/data-connect",KD="@firebase/database-compat",$D="@firebase/functions",QD="@firebase/functions-compat",XD="@firebase/installations",WD="@firebase/installations-compat",ZD="@firebase/messaging",e2="@firebase/messaging-compat",t2="@firebase/performance",n2="@firebase/performance-compat",i2="@firebase/remote-config",o2="@firebase/remote-config-compat",s2="@firebase/storage",r2="@firebase/storage-compat",a2="@firebase/firestore",l2="@firebase/vertexai-preview",u2="@firebase/firestore-compat",c2="firebase",d2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",f2={[Rm]:"fire-core",[BD]:"fire-core-compat",[GD]:"fire-analytics",[qD]:"fire-analytics-compat",[HD]:"fire-app-check",[FD]:"fire-app-check-compat",[zD]:"fire-auth",[jD]:"fire-auth-compat",[YD]:"fire-rtdb",[JD]:"fire-data-connect",[KD]:"fire-rtdb-compat",[$D]:"fire-fn",[QD]:"fire-fn-compat",[XD]:"fire-iid",[WD]:"fire-iid-compat",[ZD]:"fire-fcm",[e2]:"fire-fcm-compat",[t2]:"fire-perf",[n2]:"fire-perf-compat",[i2]:"fire-rc",[o2]:"fire-rc-compat",[s2]:"fire-gcs",[r2]:"fire-gcs-compat",[a2]:"fire-fst",[u2]:"fire-fst-compat",[l2]:"fire-vertex","fire-js":"fire-js",[c2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=new Map,h2=new Map,Nm=new Map;function nT(t,e){try{t.container.addComponent(e)}catch(n){Ro.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zl(t){const e=t.name;if(Nm.has(e))return Ro.debug(`There were multiple attempts to register component ${e}.`),!1;Nm.set(e,t);for(const n of id.values())nT(n,t);for(const n of h2.values())nT(n,t);return!0}function oS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new eS("app","Firebase",m2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=d2;function rS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const o=Object.assign({name:Im,automaticDataCollectionEnabled:!1},e),r=o.name;if(typeof r!="string"||!r)throw Ss.create("bad-app-name",{appName:String(r)});if(n||(n=WE()),!n)throw Ss.create("no-options");const l=id.get(r);if(l){if(Am(n,l.options)&&Am(o,l.config))return l;throw Ss.create("duplicate-app",{appName:r})}const u=new ED(r);for(const g of Nm.values())u.addComponent(g);const f=new p2(n,o,u);return id.set(r,f),f}function aS(t=Im){const e=id.get(t);if(!e&&t===Im&&WE())return rS();if(!e)throw Ss.create("no-app",{appName:t});return e}function bs(t,e,n){var o;let r=(o=f2[t])!==null&&o!==void 0?o:t;n&&(r+=`-${n}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ro.warn(f.join(" "));return}zl(new ga(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="firebase-heartbeat-database",y2=1,jl="firebase-heartbeat-store";let Qh=null;function lS(){return Qh||(Qh=UD(g2,y2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ss.create("idb-open",{originalErrorMessage:t.message})})),Qh}async function v2(t){try{const n=(await lS()).transaction(jl),o=await n.objectStore(jl).get(uS(t));return await n.done,o}catch(e){if(e instanceof pr)Ro.warn(e.message);else{const n=Ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ro.warn(n.message)}}}async function iT(t,e){try{const o=(await lS()).transaction(jl,"readwrite");await o.objectStore(jl).put(e,uS(t)),await o.done}catch(n){if(n instanceof pr)Ro.warn(n.message);else{const o=Ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ro.warn(o.message)}}}function uS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=1024,T2=720*60*60*1e3;class E2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new b2(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=oT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const f=new Date(u.date).valueOf();return Date.now()-f<=T2}),this._storage.overwrite(this._heartbeatsCache))}catch(o){Ro.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=oT(),{heartbeatsToSend:o,unsentEntries:r}=S2(this._heartbeatsCache.heartbeats),l=nd(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Ro.warn(n),""}}}function oT(){return new Date().toISOString().substring(0,10)}function S2(t,e=_2){const n=[];let o=t.slice();for(const r of t){const l=n.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),sT(n)>e){l.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),sT(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class b2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hD()?mD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await v2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return iT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return iT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sT(t){return nd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){zl(new ga("platform-logger",e=>new LD(e),"PRIVATE")),zl(new ga("heartbeat",e=>new E2(e),"PRIVATE")),bs(Rm,tT,t),bs(Rm,tT,"esm2017"),bs("fire-js","")}x2("");var A2="firebase",w2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bs(A2,w2,"app");var rT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lr,cS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function M(){}M.prototype=N.prototype,D.D=N.prototype,D.prototype=new M,D.prototype.constructor=D,D.C=function(P,O,q){for(var k=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)k[Me-2]=arguments[Me];return N.prototype[O].apply(P,k)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,n),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,N,M){M||(M=0);var P=Array(16);if(typeof N=="string")for(var O=0;16>O;++O)P[O]=N.charCodeAt(M++)|N.charCodeAt(M++)<<8|N.charCodeAt(M++)<<16|N.charCodeAt(M++)<<24;else for(O=0;16>O;++O)P[O]=N[M++]|N[M++]<<8|N[M++]<<16|N[M++]<<24;N=D.g[0],M=D.g[1],O=D.g[2];var q=D.g[3],k=N+(q^M&(O^q))+P[0]+3614090360&4294967295;N=M+(k<<7&4294967295|k>>>25),k=q+(O^N&(M^O))+P[1]+3905402710&4294967295,q=N+(k<<12&4294967295|k>>>20),k=O+(M^q&(N^M))+P[2]+606105819&4294967295,O=q+(k<<17&4294967295|k>>>15),k=M+(N^O&(q^N))+P[3]+3250441966&4294967295,M=O+(k<<22&4294967295|k>>>10),k=N+(q^M&(O^q))+P[4]+4118548399&4294967295,N=M+(k<<7&4294967295|k>>>25),k=q+(O^N&(M^O))+P[5]+1200080426&4294967295,q=N+(k<<12&4294967295|k>>>20),k=O+(M^q&(N^M))+P[6]+2821735955&4294967295,O=q+(k<<17&4294967295|k>>>15),k=M+(N^O&(q^N))+P[7]+4249261313&4294967295,M=O+(k<<22&4294967295|k>>>10),k=N+(q^M&(O^q))+P[8]+1770035416&4294967295,N=M+(k<<7&4294967295|k>>>25),k=q+(O^N&(M^O))+P[9]+2336552879&4294967295,q=N+(k<<12&4294967295|k>>>20),k=O+(M^q&(N^M))+P[10]+4294925233&4294967295,O=q+(k<<17&4294967295|k>>>15),k=M+(N^O&(q^N))+P[11]+2304563134&4294967295,M=O+(k<<22&4294967295|k>>>10),k=N+(q^M&(O^q))+P[12]+1804603682&4294967295,N=M+(k<<7&4294967295|k>>>25),k=q+(O^N&(M^O))+P[13]+4254626195&4294967295,q=N+(k<<12&4294967295|k>>>20),k=O+(M^q&(N^M))+P[14]+2792965006&4294967295,O=q+(k<<17&4294967295|k>>>15),k=M+(N^O&(q^N))+P[15]+1236535329&4294967295,M=O+(k<<22&4294967295|k>>>10),k=N+(O^q&(M^O))+P[1]+4129170786&4294967295,N=M+(k<<5&4294967295|k>>>27),k=q+(M^O&(N^M))+P[6]+3225465664&4294967295,q=N+(k<<9&4294967295|k>>>23),k=O+(N^M&(q^N))+P[11]+643717713&4294967295,O=q+(k<<14&4294967295|k>>>18),k=M+(q^N&(O^q))+P[0]+3921069994&4294967295,M=O+(k<<20&4294967295|k>>>12),k=N+(O^q&(M^O))+P[5]+3593408605&4294967295,N=M+(k<<5&4294967295|k>>>27),k=q+(M^O&(N^M))+P[10]+38016083&4294967295,q=N+(k<<9&4294967295|k>>>23),k=O+(N^M&(q^N))+P[15]+3634488961&4294967295,O=q+(k<<14&4294967295|k>>>18),k=M+(q^N&(O^q))+P[4]+3889429448&4294967295,M=O+(k<<20&4294967295|k>>>12),k=N+(O^q&(M^O))+P[9]+568446438&4294967295,N=M+(k<<5&4294967295|k>>>27),k=q+(M^O&(N^M))+P[14]+3275163606&4294967295,q=N+(k<<9&4294967295|k>>>23),k=O+(N^M&(q^N))+P[3]+4107603335&4294967295,O=q+(k<<14&4294967295|k>>>18),k=M+(q^N&(O^q))+P[8]+1163531501&4294967295,M=O+(k<<20&4294967295|k>>>12),k=N+(O^q&(M^O))+P[13]+2850285829&4294967295,N=M+(k<<5&4294967295|k>>>27),k=q+(M^O&(N^M))+P[2]+4243563512&4294967295,q=N+(k<<9&4294967295|k>>>23),k=O+(N^M&(q^N))+P[7]+1735328473&4294967295,O=q+(k<<14&4294967295|k>>>18),k=M+(q^N&(O^q))+P[12]+2368359562&4294967295,M=O+(k<<20&4294967295|k>>>12),k=N+(M^O^q)+P[5]+4294588738&4294967295,N=M+(k<<4&4294967295|k>>>28),k=q+(N^M^O)+P[8]+2272392833&4294967295,q=N+(k<<11&4294967295|k>>>21),k=O+(q^N^M)+P[11]+1839030562&4294967295,O=q+(k<<16&4294967295|k>>>16),k=M+(O^q^N)+P[14]+4259657740&4294967295,M=O+(k<<23&4294967295|k>>>9),k=N+(M^O^q)+P[1]+2763975236&4294967295,N=M+(k<<4&4294967295|k>>>28),k=q+(N^M^O)+P[4]+1272893353&4294967295,q=N+(k<<11&4294967295|k>>>21),k=O+(q^N^M)+P[7]+4139469664&4294967295,O=q+(k<<16&4294967295|k>>>16),k=M+(O^q^N)+P[10]+3200236656&4294967295,M=O+(k<<23&4294967295|k>>>9),k=N+(M^O^q)+P[13]+681279174&4294967295,N=M+(k<<4&4294967295|k>>>28),k=q+(N^M^O)+P[0]+3936430074&4294967295,q=N+(k<<11&4294967295|k>>>21),k=O+(q^N^M)+P[3]+3572445317&4294967295,O=q+(k<<16&4294967295|k>>>16),k=M+(O^q^N)+P[6]+76029189&4294967295,M=O+(k<<23&4294967295|k>>>9),k=N+(M^O^q)+P[9]+3654602809&4294967295,N=M+(k<<4&4294967295|k>>>28),k=q+(N^M^O)+P[12]+3873151461&4294967295,q=N+(k<<11&4294967295|k>>>21),k=O+(q^N^M)+P[15]+530742520&4294967295,O=q+(k<<16&4294967295|k>>>16),k=M+(O^q^N)+P[2]+3299628645&4294967295,M=O+(k<<23&4294967295|k>>>9),k=N+(O^(M|~q))+P[0]+4096336452&4294967295,N=M+(k<<6&4294967295|k>>>26),k=q+(M^(N|~O))+P[7]+1126891415&4294967295,q=N+(k<<10&4294967295|k>>>22),k=O+(N^(q|~M))+P[14]+2878612391&4294967295,O=q+(k<<15&4294967295|k>>>17),k=M+(q^(O|~N))+P[5]+4237533241&4294967295,M=O+(k<<21&4294967295|k>>>11),k=N+(O^(M|~q))+P[12]+1700485571&4294967295,N=M+(k<<6&4294967295|k>>>26),k=q+(M^(N|~O))+P[3]+2399980690&4294967295,q=N+(k<<10&4294967295|k>>>22),k=O+(N^(q|~M))+P[10]+4293915773&4294967295,O=q+(k<<15&4294967295|k>>>17),k=M+(q^(O|~N))+P[1]+2240044497&4294967295,M=O+(k<<21&4294967295|k>>>11),k=N+(O^(M|~q))+P[8]+1873313359&4294967295,N=M+(k<<6&4294967295|k>>>26),k=q+(M^(N|~O))+P[15]+4264355552&4294967295,q=N+(k<<10&4294967295|k>>>22),k=O+(N^(q|~M))+P[6]+2734768916&4294967295,O=q+(k<<15&4294967295|k>>>17),k=M+(q^(O|~N))+P[13]+1309151649&4294967295,M=O+(k<<21&4294967295|k>>>11),k=N+(O^(M|~q))+P[4]+4149444226&4294967295,N=M+(k<<6&4294967295|k>>>26),k=q+(M^(N|~O))+P[11]+3174756917&4294967295,q=N+(k<<10&4294967295|k>>>22),k=O+(N^(q|~M))+P[2]+718787259&4294967295,O=q+(k<<15&4294967295|k>>>17),k=M+(q^(O|~N))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(O+(k<<21&4294967295|k>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+q&4294967295}o.prototype.u=function(D,N){N===void 0&&(N=D.length);for(var M=N-this.blockSize,P=this.B,O=this.h,q=0;q<N;){if(O==0)for(;q<=M;)r(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<N;)if(P[O++]=D.charCodeAt(q++),O==this.blockSize){r(this,P),O=0;break}}else for(;q<N;)if(P[O++]=D[q++],O==this.blockSize){r(this,P),O=0;break}}this.h=O,this.o+=N},o.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;var M=8*this.o;for(N=D.length-8;N<D.length;++N)D[N]=M&255,M/=256;for(this.u(D),D=Array(16),N=M=0;4>N;++N)for(var P=0;32>P;P+=8)D[M++]=this.g[N]>>>P&255;return D};function l(D,N){var M=f;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=N(D)}function u(D,N){this.h=N;for(var M=[],P=!0,O=D.length-1;0<=O;O--){var q=D[O]|0;P&&q==N||(M[O]=q,P=!1)}this.g=M}var f={};function g(D){return-128<=D&&128>D?l(D,function(N){return new u([N|0],0>N?-1:0)}):new u([D|0],0>D?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return U(h(-D));for(var N=[],M=1,P=0;D>=M;P++)N[P]=D/M|0,M*=4294967296;return new u(N,0)}function _(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return U(_(D.substring(1),N));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=h(Math.pow(N,8)),P=E,O=0;O<D.length;O+=8){var q=Math.min(8,D.length-O),k=parseInt(D.substring(O,O+q),N);8>q?(q=h(Math.pow(N,q)),P=P.j(q).add(h(k))):(P=P.j(M),P=P.add(h(k)))}return P}var E=g(0),b=g(1),w=g(16777216);t=u.prototype,t.m=function(){if(L(this))return-U(this).m();for(var D=0,N=1,M=0;M<this.g.length;M++){var P=this.i(M);D+=(0<=P?P:4294967296+P)*N,N*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(L(this))return"-"+U(this).toString(D);for(var N=h(Math.pow(D,6)),M=this,P="";;){var O=X(M,N).g;M=j(M,O.j(N));var q=((0<M.g.length?M.g[0]:M.h)>>>0).toString(D);if(M=O,I(M))return q+P;for(;6>q.length;)q="0"+q;P=q+P}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(var N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function L(D){return D.h==-1}t.l=function(D){return D=j(this,D),L(D)?-1:I(D)?0:1};function U(D){for(var N=D.g.length,M=[],P=0;P<N;P++)M[P]=~D.g[P];return new u(M,~D.h).add(b)}t.abs=function(){return L(this)?U(this):this},t.add=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],P=0,O=0;O<=N;O++){var q=P+(this.i(O)&65535)+(D.i(O)&65535),k=(q>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);P=k>>>16,q&=65535,k&=65535,M[O]=k<<16|q}return new u(M,M[M.length-1]&-2147483648?-1:0)};function j(D,N){return D.add(U(N))}t.j=function(D){if(I(this)||I(D))return E;if(L(this))return L(D)?U(this).j(U(D)):U(U(this).j(D));if(L(D))return U(this.j(U(D)));if(0>this.l(w)&&0>D.l(w))return h(this.m()*D.m());for(var N=this.g.length+D.g.length,M=[],P=0;P<2*N;P++)M[P]=0;for(P=0;P<this.g.length;P++)for(var O=0;O<D.g.length;O++){var q=this.i(P)>>>16,k=this.i(P)&65535,Me=D.i(O)>>>16,rt=D.i(O)&65535;M[2*P+2*O]+=k*rt,W(M,2*P+2*O),M[2*P+2*O+1]+=q*rt,W(M,2*P+2*O+1),M[2*P+2*O+1]+=k*Me,W(M,2*P+2*O+1),M[2*P+2*O+2]+=q*Me,W(M,2*P+2*O+2)}for(P=0;P<N;P++)M[P]=M[2*P+1]<<16|M[2*P];for(P=N;P<2*N;P++)M[P]=0;return new u(M,0)};function W(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function z(D,N){this.g=D,this.h=N}function X(D,N){if(I(N))throw Error("division by zero");if(I(D))return new z(E,E);if(L(D))return N=X(U(D),N),new z(U(N.g),U(N.h));if(L(N))return N=X(D,U(N)),new z(U(N.g),N.h);if(30<D.g.length){if(L(D)||L(N))throw Error("slowDivide_ only works with positive integers.");for(var M=b,P=N;0>=P.l(D);)M=G(M),P=G(P);var O=se(M,1),q=se(P,1);for(P=se(P,2),M=se(M,2);!I(P);){var k=q.add(P);0>=k.l(D)&&(O=O.add(M),q=k),P=se(P,1),M=se(M,1)}return N=j(D,O.j(N)),new z(O,N)}for(O=E;0<=D.l(N);){for(M=Math.max(1,Math.floor(D.m()/N.m())),P=Math.ceil(Math.log(M)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),q=h(M),k=q.j(N);L(k)||0<k.l(D);)M-=P,q=h(M),k=q.j(N);I(q)&&(q=b),O=O.add(q),D=j(D,k)}return new z(O,D)}t.A=function(D){return X(this,D).h},t.and=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],P=0;P<N;P++)M[P]=this.i(P)&D.i(P);return new u(M,this.h&D.h)},t.or=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],P=0;P<N;P++)M[P]=this.i(P)|D.i(P);return new u(M,this.h|D.h)},t.xor=function(D){for(var N=Math.max(this.g.length,D.g.length),M=[],P=0;P<N;P++)M[P]=this.i(P)^D.i(P);return new u(M,this.h^D.h)};function G(D){for(var N=D.g.length+1,M=[],P=0;P<N;P++)M[P]=D.i(P)<<1|D.i(P-1)>>>31;return new u(M,D.h)}function se(D,N){var M=N>>5;N%=32;for(var P=D.g.length-M,O=[],q=0;q<P;q++)O[q]=0<N?D.i(q+M)>>>N|D.i(q+M+1)<<32-N:D.i(q+M);return new u(O,D.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,cS=o,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,lr=u}).apply(typeof rT<"u"?rT:typeof self<"u"?self:typeof window<"u"?window:{});var kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dS,Ul,fS,zc,Mm,hS,mS,pS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,S,A){return p==Array.prototype||p==Object.prototype||(p[S]=A.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof kc=="object"&&kc];for(var S=0;S<p.length;++S){var A=p[S];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var o=n(this);function r(p,S){if(S)e:{var A=o;p=p.split(".");for(var R=0;R<p.length-1;R++){var J=p[R];if(!(J in A))break e;A=A[J]}p=p[p.length-1],R=A[p],S=S(R),S!=R&&S!=null&&e(A,p,{configurable:!0,writable:!0,value:S})}}function l(p,S){p instanceof String&&(p+="");var A=0,R=!1,J={next:function(){if(!R&&A<p.length){var ee=A++;return{value:S(ee,p[ee]),done:!1}}return R=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}r("Array.prototype.values",function(p){return p||function(){return l(this,function(S,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function g(p){var S=typeof p;return S=S!="object"?S:p?Array.isArray(p)?"array":S:"null",S=="array"||S=="object"&&typeof p.length=="number"}function h(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function _(p,S,A){return p.call.apply(p.bind,arguments)}function E(p,S,A){if(!p)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,R),p.apply(S,J)}}return function(){return p.apply(S,arguments)}}function b(p,S,A){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,b.apply(null,arguments)}function w(p,S){var A=Array.prototype.slice.call(arguments,1);return function(){var R=A.slice();return R.push.apply(R,arguments),p.apply(this,R)}}function I(p,S){function A(){}A.prototype=S.prototype,p.aa=S.prototype,p.prototype=new A,p.prototype.constructor=p,p.Qb=function(R,J,ee){for(var pe=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)pe[ut-2]=arguments[ut];return S.prototype[J].apply(R,pe)}}function L(p){const S=p.length;if(0<S){const A=Array(S);for(let R=0;R<S;R++)A[R]=p[R];return A}return[]}function U(p,S){for(let A=1;A<arguments.length;A++){const R=arguments[A];if(g(R)){const J=p.length||0,ee=R.length||0;p.length=J+ee;for(let pe=0;pe<ee;pe++)p[J+pe]=R[pe]}else p.push(R)}}class j{constructor(S,A){this.i=S,this.j=A,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function W(p){return/^[\s\xa0]*$/.test(p)}function z(){var p=f.navigator;return p&&(p=p.userAgent)?p:""}function X(p){return X[" "](p),p}X[" "]=function(){};var G=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function se(p,S,A){for(const R in p)S.call(A,p[R],R,p)}function D(p,S){for(const A in p)S.call(void 0,p[A],A,p)}function N(p){const S={};for(const A in p)S[A]=p[A];return S}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(p,S){let A,R;for(let J=1;J<arguments.length;J++){R=arguments[J];for(A in R)p[A]=R[A];for(let ee=0;ee<M.length;ee++)A=M[ee],Object.prototype.hasOwnProperty.call(R,A)&&(p[A]=R[A])}}function O(p){var S=1;p=p.split(":");const A=[];for(;0<S&&p.length;)A.push(p.shift()),S--;return p.length&&A.push(p.join(":")),A}function q(p){f.setTimeout(()=>{throw p},0)}function k(){var p=Oe;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class Me{constructor(){this.h=this.g=null}add(S,A){const R=rt.get();R.set(S,A),this.h?this.h.next=R:this.g=R,this.h=R}}var rt=new j(()=>new te,p=>p.reset());class te{constructor(){this.next=this.g=this.h=null}set(S,A){this.h=S,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let me,Ee=!1,Oe=new Me,je=()=>{const p=f.Promise.resolve(void 0);me=()=>{p.then(H)}};var H=()=>{for(var p;p=k();){try{p.h.call(p.g)}catch(A){q(A)}var S=rt;S.j(p),100>S.h&&(S.h++,p.next=S.g,S.g=p)}Ee=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Te=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const A=()=>{};f.addEventListener("test",A,S),f.removeEventListener("test",A,S)}catch{}return p})();function Re(p,S){if(fe.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var A=this.type=p.type,R=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget){if(G){e:{try{X(S.nodeName);var J=!0;break e}catch{}J=!1}J||(S=null)}}else A=="mouseover"?S=p.fromElement:A=="mouseout"&&(S=p.toElement);this.relatedTarget=S,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:De[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Re.aa.h.call(this)}}I(Re,fe);var De={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),Ht=0;function lt(p,S,A,R,J){this.listener=p,this.proxy=null,this.src=S,this.type=A,this.capture=!!R,this.ha=J,this.key=++Ht,this.da=this.fa=!1}function mn(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Dn(p){this.src=p,this.g={},this.h=0}Dn.prototype.add=function(p,S,A,R,J){var ee=p.toString();p=this.g[ee],p||(p=this.g[ee]=[],this.h++);var pe=Pi(p,S,R,J);return-1<pe?(S=p[pe],A||(S.fa=!1)):(S=new lt(S,this.src,ee,!!R,J),S.fa=A,p.push(S)),S};function eo(p,S){var A=S.type;if(A in p.g){var R=p.g[A],J=Array.prototype.indexOf.call(R,S,void 0),ee;(ee=0<=J)&&Array.prototype.splice.call(R,J,1),ee&&(mn(S),p.g[A].length==0&&(delete p.g[A],p.h--))}}function Pi(p,S,A,R){for(var J=0;J<p.length;++J){var ee=p[J];if(!ee.da&&ee.listener==S&&ee.capture==!!A&&ee.ha==R)return J}return-1}var Pn="closure_lm_"+(1e6*Math.random()|0),Po={};function Ms(p,S,A,R,J){if(Array.isArray(S)){for(var ee=0;ee<S.length;ee++)Ms(p,S[ee],A,R,J);return null}return A=to(A),p&&p[Be]?p.K(S,A,h(R)?!!R.capture:!1,J):$t(p,S,A,!1,R,J)}function $t(p,S,A,R,J,ee){if(!S)throw Error("Invalid event type");var pe=h(J)?!!J.capture:!!J,ut=We(p);if(ut||(p[Pn]=ut=new Dn(p)),A=ut.add(S,A,R,pe,ee),A.proxy)return A;if(R=xt(),A.proxy=R,R.src=p,R.listener=A,p.addEventListener)Te||(J=pe),J===void 0&&(J=!1),p.addEventListener(S.toString(),R,J);else if(p.attachEvent)p.attachEvent(si(S.toString()),R);else if(p.addListener&&p.removeListener)p.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return A}function xt(){function p(A){return S.call(p.src,p.listener,A)}const S=Ma;return p}function Ui(p,S,A,R,J){if(Array.isArray(S))for(var ee=0;ee<S.length;ee++)Ui(p,S[ee],A,R,J);else R=h(R)?!!R.capture:!!R,A=to(A),p&&p[Be]?(p=p.i,S=String(S).toString(),S in p.g&&(ee=p.g[S],A=Pi(ee,A,R,J),-1<A&&(mn(ee[A]),Array.prototype.splice.call(ee,A,1),ee.length==0&&(delete p.g[S],p.h--)))):p&&(p=We(p))&&(S=p.g[S.toString()],p=-1,S&&(p=Pi(S,A,R,J)),(A=-1<p?S[p]:null)&&ki(A))}function ki(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[Be])eo(S.i,p);else{var A=p.type,R=p.proxy;S.removeEventListener?S.removeEventListener(A,R,p.capture):S.detachEvent?S.detachEvent(si(A),R):S.addListener&&S.removeListener&&S.removeListener(R),(A=We(S))?(eo(A,p),A.h==0&&(A.src=null,S[Pn]=null)):mn(p)}}}function si(p){return p in Po?Po[p]:Po[p]="on"+p}function Ma(p,S){if(p.da)p=!0;else{S=new Re(S,this);var A=p.listener,R=p.ha||p.src;p.fa&&ki(p),p=A.call(R,S)}return p}function We(p){return p=p[Pn],p instanceof Dn?p:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function to(p){return typeof p=="function"?p:(p[Et]||(p[Et]=function(S){return p.handleEvent(S)}),p[Et])}function Rt(){ie.call(this),this.i=new Dn(this),this.M=this,this.F=null}I(Rt,ie),Rt.prototype[Be]=!0,Rt.prototype.removeEventListener=function(p,S,A,R){Ui(this,p,S,A,R)};function Dt(p,S){var A,R=p.F;if(R)for(A=[];R;R=R.F)A.push(R);if(p=p.M,R=S.type||S,typeof S=="string")S=new fe(S,p);else if(S instanceof fe)S.target=S.target||p;else{var J=S;S=new fe(R,p),P(S,J)}if(J=!0,A)for(var ee=A.length-1;0<=ee;ee--){var pe=S.g=A[ee];J=ri(pe,R,!0,S)&&J}if(pe=S.g=p,J=ri(pe,R,!0,S)&&J,J=ri(pe,R,!1,S)&&J,A)for(ee=0;ee<A.length;ee++)pe=S.g=A[ee],J=ri(pe,R,!1,S)&&J}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var p=this.i,S;for(S in p.g){for(var A=p.g[S],R=0;R<A.length;R++)mn(A[R]);delete p.g[S],p.h--}}this.F=null},Rt.prototype.K=function(p,S,A,R){return this.i.add(String(p),S,!1,A,R)},Rt.prototype.L=function(p,S,A,R){return this.i.add(String(p),S,!0,A,R)};function ri(p,S,A,R){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();for(var J=!0,ee=0;ee<S.length;++ee){var pe=S[ee];if(pe&&!pe.da&&pe.capture==A){var ut=pe.listener,Lt=pe.ha||pe.src;pe.fa&&eo(p.i,pe),J=ut.call(Lt,R)!==!1&&J}}return J&&!R.defaultPrevented}function Ds(p,S,A){if(typeof p=="function")A&&(p=b(p,A));else if(p&&typeof p.handleEvent=="function")p=b(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:f.setTimeout(p,S||0)}function no(p){p.g=Ds(()=>{p.g=null,p.i&&(p.i=!1,no(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class vr extends ie{constructor(S,A){super(),this.m=S,this.l=A,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:no(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vi(p){ie.call(this),this.h=p,this.g={}}I(Vi,ie);var Ze=[];function At(p){se(p.g,function(S,A){this.g.hasOwnProperty(A)&&ki(S)},p),p.g={}}Vi.prototype.N=function(){Vi.aa.N.call(this),At(this)},Vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var on=f.JSON.stringify,Qt=f.JSON.parse,au=class{stringify(p){return f.JSON.stringify(p,void 0)}parse(p){return f.JSON.parse(p,void 0)}};function _r(){}_r.prototype.h=null;function Da(p){return p.h||(p.h=p.i())}function Uo(){}var bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ei(){fe.call(this,"d")}I(Ei,fe);function jn(){fe.call(this,"c")}I(jn,fe);var Un={},Li=null;function ko(){return Li=Li||new Rt}Un.La="serverreachability";function Ps(p){fe.call(this,Un.La,p)}I(Ps,fe);function Si(p){const S=ko();Dt(S,new Ps(S))}Un.STAT_EVENT="statevent";function Oi(p,S){fe.call(this,Un.STAT_EVENT,p),this.stat=S}I(Oi,fe);function zt(p){const S=ko();Dt(S,new Oi(S,p))}Un.Ma="timingevent";function Vo(p,S){fe.call(this,Un.Ma,p),this.size=S}I(Vo,fe);function V(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){p()},S)}function ae(){this.g=!0}ae.prototype.xa=function(){this.g=!1};function le(p,S,A,R,J,ee){p.info(function(){if(p.g)if(ee)for(var pe="",ut=ee.split("&"),Lt=0;Lt<ut.length;Lt++){var Fe=ut[Lt].split("=");if(1<Fe.length){var Wt=Fe[0];Fe=Fe[1];var Zt=Wt.split("_");pe=2<=Zt.length&&Zt[1]=="type"?pe+(Wt+"="+Fe+"&"):pe+(Wt+"=redacted&")}}else pe=null;else pe=ee;return"XMLHTTP REQ ("+R+") [attempt "+J+"]: "+S+`
`+A+`
`+pe})}function he(p,S,A,R,J,ee,pe){p.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+J+"]: "+S+`
`+A+`
`+ee+" "+pe})}function ue(p,S,A,R){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+ye(p,A)+(R?" "+R:"")})}function ge(p,S){p.info(function(){return"TIMEOUT: "+S})}ae.prototype.info=function(){};function ye(p,S){if(!p.g)return S;if(!S)return null;try{var A=JSON.parse(S);if(A){for(p=0;p<A.length;p++)if(Array.isArray(A[p])){var R=A[p];if(!(2>R.length)){var J=R[1];if(Array.isArray(J)&&!(1>J.length)){var ee=J[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var pe=1;pe<J.length;pe++)J[pe]=""}}}}return on(A)}catch{return S}}var Ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},et={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yn;function bi(){}I(bi,_r),bi.prototype.g=function(){return new XMLHttpRequest},bi.prototype.i=function(){return{}},Yn=new bi;function pn(p,S,A,R){this.j=p,this.i=S,this.l=A,this.R=R||1,this.U=new Vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bi}function Bi(){this.i=null,this.g="",this.h=!1}var Tr={},ai={};function Us(p,S,A){p.L=1,p.v=Ls(It(S)),p.m=A,p.P=!0,io(p,null)}function io(p,S){p.F=Date.now(),xi(p),p.A=It(p.v);var A=p.A,R=p.R;Array.isArray(R)||(R=[String(R)]),ro(A.i,"t",R),p.C=0,A=p.j.J,p.h=new Bi,p.g=bu(p.j,A?S:null,!p.m),0<p.O&&(p.M=new vr(b(p.Y,p,p.g),p.O)),S=p.U,A=p.g,R=p.ca;var J="readystatechange";Array.isArray(J)||(J&&(Ze[0]=J.toString()),J=Ze);for(var ee=0;ee<J.length;ee++){var pe=Ms(A,J[ee],R||S.handleEvent,!1,S.h||S);if(!pe)break;S.g[pe.key]=pe}S=p.H?N(p.H):{},p.m?(p.u||(p.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,S)):(p.u="GET",p.g.ea(p.A,p.u,null,S)),Si(),le(p.i,p.u,p.A,p.l,p.R,p.m)}pn.prototype.ca=function(p){p=p.target;const S=this.M;S&&wn(p)==3?S.j():this.Y(p)},pn.prototype.Y=function(p){try{if(p==this.g)e:{const Zt=wn(this.g);var S=this.g.Ba();const $o=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||qs(this.g)))){this.J||Zt!=4||S==7||(S==8||0>=$o?Si(3):Si(2)),Er(this);var A=this.g.Z();this.X=A;t:if(oo(this)){var R=qs(this.g);p="";var J=R.length,ee=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xn(this),Lo(this);var pe="";break t}this.h.i=new f.TextDecoder}for(S=0;S<J;S++)this.h.h=!0,p+=this.h.i.decode(R[S],{stream:!(ee&&S==J-1)});R.length=0,this.h.g+=p,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=A==200,he(this.i,this.u,this.A,this.l,this.R,Zt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Lt=this.g;if((ut=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(ut)){var Fe=ut;break t}}Fe=null}if(A=Fe)ue(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qi(this,A);else{this.o=!1,this.s=3,zt(12),xn(this),Lo(this);break e}}if(this.P){A=!0;let Vn;for(;!this.J&&this.C<pe.length;)if(Vn=ks(this,pe),Vn==ai){Zt==4&&(this.s=4,zt(14),A=!1),ue(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Tr){this.s=4,zt(15),ue(this.i,this.l,pe,"[Invalid Chunk]"),A=!1;break}else ue(this.i,this.l,Vn,null),qi(this,Vn);if(oo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||pe.length!=0||this.h.h||(this.s=1,zt(16),A=!1),this.o=this.o&&A,!A)ue(this.i,this.l,pe,"[Invalid Chunked Response]"),xn(this),Lo(this);else if(0<pe.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),Ha(Wt),Wt.M=!0,zt(11))}}else ue(this.i,this.l,pe,null),qi(this,pe);Zt==4&&xn(this),this.o&&!this.J&&(Zt==4?Tu(this.j,this):(this.o=!1,xi(this)))}else mu(this.g),A==400&&0<pe.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),xn(this),Lo(this)}}}catch{}finally{}};function oo(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function ks(p,S){var A=p.C,R=S.indexOf(`
`,A);return R==-1?ai:(A=Number(S.substring(A,R)),isNaN(A)?Tr:(R+=1,R+A>S.length?ai:(S=S.slice(R,R+A),p.C=R+A,S)))}pn.prototype.cancel=function(){this.J=!0,xn(this)};function xi(p){p.S=Date.now()+p.I,Pt(p,p.I)}function Pt(p,S){if(p.B!=null)throw Error("WatchDog timer not null");p.B=V(b(p.ba,p),S)}function Er(p){p.B&&(f.clearTimeout(p.B),p.B=null)}pn.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(ge(this.i,this.A),this.L!=2&&(Si(),zt(17)),xn(this),this.s=2,Lo(this)):Pt(this,this.S-p)};function Lo(p){p.j.G==0||p.J||Tu(p.j,p)}function xn(p){Er(p);var S=p.M;S&&typeof S.ma=="function"&&S.ma(),p.M=null,At(p.U),p.g&&(S=p.g,p.g=null,S.abort(),S.ma())}function qi(p,S){try{var A=p.j;if(A.G!=0&&(A.g==p||Oo(A.h,p))){if(!p.K&&Oo(A.h,p)&&A.G==3){try{var R=A.Da.g.parse(S)}catch{R=null}if(Array.isArray(R)&&R.length==3){var J=R;if(J[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<p.F)Jo(A),Yo(A);else break e;Fa(A),zt(18)}}else A.za=J[1],0<A.za-A.T&&37500>J[2]&&A.F&&A.v==0&&!A.C&&(A.C=V(b(A.Za,A),6e3));if(1>=lu(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else lo(A,11)}else if((p.K||A.g==p)&&Jo(A),!W(S))for(J=A.Da.g.parse(S),S=0;S<J.length;S++){let Fe=J[S];if(A.T=Fe[0],Fe=Fe[1],A.G==2)if(Fe[0]=="c"){A.K=Fe[1],A.ia=Fe[2];const Wt=Fe[3];Wt!=null&&(A.la=Wt,A.j.info("VER="+A.la));const Zt=Fe[4];Zt!=null&&(A.Aa=Zt,A.j.info("SVER="+A.Aa));const $o=Fe[5];$o!=null&&typeof $o=="number"&&0<$o&&(R=1.5*$o,A.L=R,A.j.info("backChannelRequestTimeoutMs_="+R)),R=A;const Vn=p.g;if(Vn){const Hs=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hs){var ee=R.h;ee.g||Hs.indexOf("spdy")==-1&&Hs.indexOf("quic")==-1&&Hs.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Bo(ee,ee.h),ee.h=null))}if(R.D){const uo=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(R.ya=uo,tt(R.I,R.D,uo))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-p.F,A.j.info("Handshake RTT: "+A.R+"ms")),R=A;var pe=p;if(R.qa=Su(R,R.J?R.ia:null,R.W),pe.K){li(R.h,pe);var ut=pe,Lt=R.L;Lt&&(ut.I=Lt),ut.B&&(Er(ut),xi(ut)),R.g=pe}else vu(R);0<A.i.length&&Ir(A)}else Fe[0]!="stop"&&Fe[0]!="close"||lo(A,7);else A.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?lo(A,7):qa(A):Fe[0]!="noop"&&A.l&&A.l.ta(Fe),A.v=0)}}Si(4)}catch{}}var Od=class{constructor(p,S){this.g=p,this.map=S}};function Pa(p){this.l=p||10,f.PerformanceNavigationTiming?(p=f.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ua(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function lu(p){return p.h?1:p.g?p.g.size:0}function Oo(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function Bo(p,S){p.g?p.g.add(S):p.h=S}function li(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}Pa.prototype.cancel=function(){if(this.i=An(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function An(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const A of p.g.values())S=S.concat(A.D);return S}return L(p.i)}function uu(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(g(p)){for(var S=[],A=p.length,R=0;R<A;R++)S.push(p[R]);return S}S=[],A=0;for(R in p)S[A++]=p[R];return S}function Bd(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(g(p)||typeof p=="string"){var S=[];p=p.length;for(var A=0;A<p;A++)S.push(A);return S}S=[],A=0;for(const R in p)S[A++]=R;return S}}}function Sr(p,S){if(p.forEach&&typeof p.forEach=="function")p.forEach(S,void 0);else if(g(p)||typeof p=="string")Array.prototype.forEach.call(p,S,void 0);else for(var A=Bd(p),R=uu(p),J=R.length,ee=0;ee<J;ee++)S.call(void 0,R[ee],A&&A[ee],p)}var ka=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function br(p,S){if(p){p=p.split("&");for(var A=0;A<p.length;A++){var R=p[A].indexOf("="),J=null;if(0<=R){var ee=p[A].substring(0,R);J=p[A].substring(R+1)}else ee=p[A];S(ee,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function so(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof so){this.h=p.h,qo(this,p.j),this.o=p.o,this.g=p.g,Vs(this,p.s),this.l=p.l;var S=p.i,A=new Gi;A.i=S.i,S.g&&(A.g=new Map(S.g),A.h=S.h),xr(this,A),this.m=p.m}else p&&(S=String(p).match(ka))?(this.h=!1,qo(this,S[1]||"",!0),this.o=Go(S[2]||""),this.g=Go(S[3]||"",!0),Vs(this,S[4]),this.l=Go(S[5]||"",!0),xr(this,S[6]||"",!0),this.m=Go(S[7]||"")):(this.h=!1,this.i=new Gi(null,this.h))}so.prototype.toString=function(){var p=[],S=this.j;S&&p.push(ui(S,Va,!0),":");var A=this.g;return(A||S=="file")&&(p.push("//"),(S=this.o)&&p.push(ui(S,Va,!0),"@"),p.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&p.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&p.push("/"),p.push(ui(A,A.charAt(0)=="/"?La:cu,!0))),(A=this.i.toString())&&p.push("?",A),(A=this.m)&&p.push("#",ui(A,Fd)),p.join("")};function It(p){return new so(p)}function qo(p,S,A){p.j=A?Go(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function Vs(p,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);p.s=S}else p.s=null}function xr(p,S,A){S instanceof Gi?(p.i=S,du(p.i,p.h)):(A||(S=ui(S,Gd)),p.i=new Gi(S,p.h))}function tt(p,S,A){p.i.set(S,A)}function Ls(p){return tt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Go(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ui(p,S,A){return typeof p=="string"?(p=encodeURI(p).replace(S,qd),A&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function qd(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Va=/[#\/\?@]/g,cu=/[#\?:]/g,La=/[#\?]/g,Gd=/[#\?@]/g,Fd=/#/g;function Gi(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function Xt(p){p.g||(p.g=new Map,p.h=0,p.i&&br(p.i,function(S,A){p.add(decodeURIComponent(S.replace(/\+/g," ")),A)}))}t=Gi.prototype,t.add=function(p,S){Xt(this),this.i=null,p=Jn(this,p);var A=this.g.get(p);return A||this.g.set(p,A=[]),A.push(S),this.h+=1,this};function Ar(p,S){Xt(p),S=Jn(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function wr(p,S){return Xt(p),S=Jn(p,S),p.g.has(S)}t.forEach=function(p,S){Xt(this),this.g.forEach(function(A,R){A.forEach(function(J){p.call(S,J,R,this)},this)},this)},t.na=function(){Xt(this);const p=Array.from(this.g.values()),S=Array.from(this.g.keys()),A=[];for(let R=0;R<S.length;R++){const J=p[R];for(let ee=0;ee<J.length;ee++)A.push(S[R])}return A},t.V=function(p){Xt(this);let S=[];if(typeof p=="string")wr(this,p)&&(S=S.concat(this.g.get(Jn(this,p))));else{p=Array.from(this.g.values());for(let A=0;A<p.length;A++)S=S.concat(p[A])}return S},t.set=function(p,S){return Xt(this),this.i=null,p=Jn(this,p),wr(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},t.get=function(p,S){return p?(p=this.V(p),0<p.length?String(p[0]):S):S};function ro(p,S,A){Ar(p,S),0<A.length&&(p.i=null,p.g.set(Jn(p,S),L(A)),p.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(var A=0;A<S.length;A++){var R=S[A];const ee=encodeURIComponent(String(R)),pe=this.V(R);for(R=0;R<pe.length;R++){var J=ee;pe[R]!==""&&(J+="="+encodeURIComponent(String(pe[R]))),p.push(J)}}return this.i=p.join("&")};function Jn(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function du(p,S){S&&!p.j&&(Xt(p),p.i=null,p.g.forEach(function(A,R){var J=R.toLowerCase();R!=J&&(Ar(this,R),ro(this,J,A))},p)),p.j=S}function Oa(p,S){const A=new ae;if(f.Image){const R=new Image;R.onload=w(kn,A,"TestLoadImage: loaded",!0,S,R),R.onerror=w(kn,A,"TestLoadImage: error",!1,S,R),R.onabort=w(kn,A,"TestLoadImage: abort",!1,S,R),R.ontimeout=w(kn,A,"TestLoadImage: timeout",!1,S,R),f.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=p}else S(!1)}function fu(p,S){const A=new ae,R=new AbortController,J=setTimeout(()=>{R.abort(),kn(A,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:R.signal}).then(ee=>{clearTimeout(J),ee.ok?kn(A,"TestPingServer: ok",!0,S):kn(A,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(J),kn(A,"TestPingServer: error",!1,S)})}function kn(p,S,A,R,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),R(A)}catch{}}function Ai(){this.g=new au}function Ba(p,S,A){const R=A||"";try{Sr(p,function(J,ee){let pe=J;h(J)&&(pe=on(J)),S.push(R+ee+"="+encodeURIComponent(pe))})}catch(J){throw S.push(R+"type="+encodeURIComponent("_badmap")),J}}function Fi(p){this.l=p.Ub||null,this.j=p.eb||!1}I(Fi,_r),Fi.prototype.g=function(){return new Kn(this.l,this.j)},Fi.prototype.i=(function(p){return function(){return p}})({});function Kn(p,S){Rt.call(this),this.D=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Kn,Rt),t=Kn.prototype,t.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=S,this.readyState=1,Fo(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(S.body=p),(this.D||f).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hi(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Fo(this)),this.g&&(this.readyState=3,Fo(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cr(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cr(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?Hi(this):Fo(this),this.readyState==3&&Cr(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Hi(this))},t.Qa=function(p){this.g&&(this.response=p,Hi(this))},t.ga=function(){this.g&&Hi(this)};function Hi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Fo(p)}t.setRequestHeader=function(p,S){this.u.append(p,S)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var A=S.next();!A.done;)A=A.value,p.push(A[0]+": "+A[1]),A=S.next();return p.join(`\r
`)};function Fo(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Kn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Os(p){let S="";return se(p,function(A,R){S+=R,S+=":",S+=A,S+=`\r
`}),S}function Ho(p,S,A){e:{for(R in A){var R=!1;break e}R=!0}R||(A=Os(A),typeof p=="string"?A!=null&&encodeURIComponent(String(A)):tt(p,S,A))}function yt(p){Rt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(yt,Rt);var gn=/^https?$/i,ao=["POST","PUT"];t=yt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,S,A,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yn.g(),this.v=this.o?Da(this.o):Da(Yn),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(ee){Bs(this,ee);return}if(p=A||"",A=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var J in R)A.set(J,R[J]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ee of R.keys())A.set(ee,R.get(ee));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(A.keys()).find(ee=>ee.toLowerCase()=="content-type"),J=f.FormData&&p instanceof f.FormData,!(0<=Array.prototype.indexOf.call(ao,S,void 0))||R||J||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,pe]of A)this.g.setRequestHeader(ee,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rr(this),this.u=!0,this.g.send(p),this.u=!1}catch(ee){Bs(this,ee)}};function Bs(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.m=5,zo(p),jo(p)}function zo(p){p.A||(p.A=!0,Dt(p,"complete"),Dt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Dt(this,"complete"),Dt(this,"abort"),jo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jo(this,!0)),yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?hu(this):this.bb())},t.bb=function(){hu(this)};function hu(p){if(p.h&&typeof u<"u"&&(!p.v[1]||wn(p)!=4||p.Z()!=2)){if(p.u&&wn(p)==4)Ds(p.Ea,0,p);else if(Dt(p,"readystatechange"),wn(p)==4){p.h=!1;try{const pe=p.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var A;if(!(A=S)){var R;if(R=pe===0){var J=String(p.D).match(ka)[1]||null;!J&&f.self&&f.self.location&&(J=f.self.location.protocol.slice(0,-1)),R=!gn.test(J?J.toLowerCase():"")}A=R}if(A)Dt(p,"complete"),Dt(p,"success");else{p.m=6;try{var ee=2<wn(p)?p.g.statusText:""}catch{ee=""}p.l=ee+" ["+p.Z()+"]",zo(p)}}finally{jo(p)}}}}function jo(p,S){if(p.g){Rr(p);const A=p.g,R=p.v[0]?()=>{}:null;p.g=null,p.v=null,S||Dt(p,"ready");try{A.onreadystatechange=R}catch{}}}function Rr(p){p.I&&(f.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function wn(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),Qt(S)}};function qs(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function mu(p){const S={};p=(p.g&&2<=wn(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<p.length;R++){if(W(p[R]))continue;var A=O(p[R]);const J=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ee=S[J]||[];S[J]=ee,ee.push(A)}D(S,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gs(p,S,A){return A&&A.internalChannelParams&&A.internalChannelParams[p]||S}function pu(p){this.Aa=0,this.i=[],this.j=new ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gs("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gs("baseRetryDelayMs",5e3,p),this.cb=Gs("retryDelaySeedMs",1e4,p),this.Wa=Gs("forwardChannelMaxRetries",2,p),this.wa=Gs("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Pa(p&&p.concurrentRequestLimit),this.Da=new Ai,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pu.prototype,t.la=8,t.G=1,t.connect=function(p,S,A,R){zt(0),this.W=p,this.H=S||{},A&&R!==void 0&&(this.H.OSID=A,this.H.OAID=R),this.F=this.X,this.I=Su(this,null,this.W),Ir(this)};function qa(p){if(gu(p),p.G==3){var S=p.U++,A=It(p.I);if(tt(A,"SID",p.K),tt(A,"RID",S),tt(A,"TYPE","terminate"),Fs(p,A),S=new pn(p,p.j,S),S.L=2,S.v=Ls(It(A)),A=!1,f.navigator&&f.navigator.sendBeacon)try{A=f.navigator.sendBeacon(S.v.toString(),"")}catch{}!A&&f.Image&&(new Image().src=S.v,A=!0),A||(S.g=bu(S.j,null),S.g.ea(S.v)),S.F=Date.now(),xi(S)}za(p)}function Yo(p){p.g&&(Ha(p),p.g.cancel(),p.g=null)}function gu(p){Yo(p),p.u&&(f.clearTimeout(p.u),p.u=null),Jo(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&f.clearTimeout(p.s),p.s=null)}function Ir(p){if(!Ua(p.h)&&!p.s){p.s=!0;var S=p.Ga;me||je(),Ee||(me(),Ee=!0),Oe.add(S,p),p.B=0}}function Hd(p,S){return lu(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=S.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=V(b(p.Ga,p,S),Eu(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const J=new pn(this,this.j,p);let ee=this.o;if(this.S&&(ee?(ee=N(ee),P(ee,this.S)):ee=this.S),this.m!==null||this.O||(J.H=ee,ee=null),this.P)e:{for(var S=0,A=0;A<this.i.length;A++){t:{var R=this.i[A];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(S+=R,4096<S){S=A;break e}if(S===4096||A===this.i.length-1){S=A+1;break e}}S=1e3}else S=1e3;S=Ga(this,J,S),A=It(this.I),tt(A,"RID",p),tt(A,"CVER",22),this.D&&tt(A,"X-HTTP-Session-Id",this.D),Fs(this,A),ee&&(this.O?S="headers="+encodeURIComponent(String(Os(ee)))+"&"+S:this.m&&Ho(A,this.m,ee)),Bo(this.h,J),this.Ua&&tt(A,"TYPE","init"),this.P?(tt(A,"$req",S),tt(A,"SID","null"),J.T=!0,Us(J,A,null)):Us(J,A,S),this.G=2}}else this.G==3&&(p?yu(this,p):this.i.length==0||Ua(this.h)||yu(this))};function yu(p,S){var A;S?A=S.l:A=p.U++;const R=It(p.I);tt(R,"SID",p.K),tt(R,"RID",A),tt(R,"AID",p.T),Fs(p,R),p.m&&p.o&&Ho(R,p.m,p.o),A=new pn(p,p.j,A,p.B+1),p.m===null&&(A.H=p.o),S&&(p.i=S.D.concat(p.i)),S=Ga(p,A,1e3),A.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Bo(p.h,A),Us(A,R,S)}function Fs(p,S){p.H&&se(p.H,function(A,R){tt(S,R,A)}),p.l&&Sr({},function(A,R){tt(S,R,A)})}function Ga(p,S,A){A=Math.min(p.i.length,A);var R=p.l?b(p.l.Na,p.l,p):null;e:{var J=p.i;let ee=-1;for(;;){const pe=["count="+A];ee==-1?0<A?(ee=J[0].g,pe.push("ofs="+ee)):ee=0:pe.push("ofs="+ee);let ut=!0;for(let Lt=0;Lt<A;Lt++){let Fe=J[Lt].g;const Wt=J[Lt].map;if(Fe-=ee,0>Fe)ee=Math.max(0,J[Lt].g-100),ut=!1;else try{Ba(Wt,pe,"req"+Fe+"_")}catch{R&&R(Wt)}}if(ut){R=pe.join("&");break e}}}return p=p.i.splice(0,A),S.D=p,R}function vu(p){if(!p.g&&!p.u){p.Y=1;var S=p.Fa;me||je(),Ee||(me(),Ee=!0),Oe.add(S,p),p.v=0}}function Fa(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=V(b(p.Fa,p),Eu(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,_u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=V(b(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Yo(this),_u(this))};function Ha(p){p.A!=null&&(f.clearTimeout(p.A),p.A=null)}function _u(p){p.g=new pn(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var S=It(p.qa);tt(S,"RID","rpc"),tt(S,"SID",p.K),tt(S,"AID",p.T),tt(S,"CI",p.F?"0":"1"),!p.F&&p.ja&&tt(S,"TO",p.ja),tt(S,"TYPE","xmlhttp"),Fs(p,S),p.m&&p.o&&Ho(S,p.m,p.o),p.L&&(p.g.I=p.L);var A=p.g;p=p.ia,A.L=1,A.v=Ls(It(S)),A.m=null,A.P=!0,io(A,p)}t.Za=function(){this.C!=null&&(this.C=null,Yo(this),Fa(this),zt(19))};function Jo(p){p.C!=null&&(f.clearTimeout(p.C),p.C=null)}function Tu(p,S){var A=null;if(p.g==S){Jo(p),Ha(p),p.g=null;var R=2}else if(Oo(p.h,S))A=S.D,li(p.h,S),R=1;else return;if(p.G!=0){if(S.o)if(R==1){A=S.m?S.m.length:0,S=Date.now()-S.F;var J=p.B;R=ko(),Dt(R,new Vo(R,A)),Ir(p)}else vu(p);else if(J=S.s,J==3||J==0&&0<S.X||!(R==1&&Hd(p,S)||R==2&&Fa(p)))switch(A&&0<A.length&&(S=p.h,S.i=S.i.concat(A)),J){case 1:lo(p,5);break;case 4:lo(p,10);break;case 3:lo(p,6);break;default:lo(p,2)}}}function Eu(p,S){let A=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(A*=2),A*S}function lo(p,S){if(p.j.info("Error code "+S),S==2){var A=b(p.fb,p),R=p.Xa;const J=!R;R=new so(R||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||qo(R,"https"),Ls(R),J?Oa(R.toString(),A):fu(R.toString(),A)}else zt(2);p.G=0,p.l&&p.l.sa(S),za(p),gu(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function za(p){if(p.G=0,p.ka=[],p.l){const S=An(p.h);(S.length!=0||p.i.length!=0)&&(U(p.ka,S),U(p.ka,p.i),p.h.i.length=0,L(p.i),p.i.length=0),p.l.ra()}}function Su(p,S,A){var R=A instanceof so?It(A):new so(A);if(R.g!="")S&&(R.g=S+"."+R.g),Vs(R,R.s);else{var J=f.location;R=J.protocol,S=S?S+"."+J.hostname:J.hostname,J=+J.port;var ee=new so(null);R&&qo(ee,R),S&&(ee.g=S),J&&Vs(ee,J),A&&(ee.l=A),R=ee}return A=p.D,S=p.ya,A&&S&&tt(R,A,S),tt(R,"VER",p.la),Fs(p,R),R}function bu(p,S,A){if(S&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Ca&&!p.pa?new yt(new Fi({eb:A})):new yt(p.pa),S.Ha(p.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}t=xu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nr(){}Nr.prototype.g=function(p,S){return new Cn(p,S)};function Cn(p,S){Rt.call(this),this.g=new pu(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(p?p["X-WebChannel-Client-Profile"]=S.va:p={"X-WebChannel-Client-Profile":S.va}),this.g.S=p,(p=S&&S.Sb)&&!W(p)&&(this.g.m=p),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!W(S)&&(this.g.D=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new Ko(this)}I(Cn,Rt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){qa(this.g)},Cn.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var A={};A.__data__=p,p=A}else this.u&&(A={},A.__data__=on(p),p=A);S.i.push(new Od(S.Ya++,p)),S.G==3&&Ir(S)},Cn.prototype.N=function(){this.g.l=null,delete this.j,qa(this.g),delete this.g,Cn.aa.N.call(this)};function Au(p){Ei.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const A in S){p=A;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}I(Au,Ei);function wu(){jn.call(this),this.status=1}I(wu,jn);function Ko(p){this.g=p}I(Ko,xu),Ko.prototype.ua=function(){Dt(this.g,"a")},Ko.prototype.ta=function(p){Dt(this.g,new Au(p))},Ko.prototype.sa=function(p){Dt(this.g,new wu)},Ko.prototype.ra=function(){Dt(this.g,"b")},Nr.prototype.createWebChannel=Nr.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,pS=function(){return new Nr},mS=function(){return ko()},hS=Un,Mm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,zc=Ce,et.COMPLETE="complete",fS=et,Uo.EventType=bn,bn.OPEN="a",bn.CLOSE="b",bn.ERROR="c",bn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Ul=Uo,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,dS=yt}).apply(typeof kc<"u"?kc:typeof self<"u"?self:typeof window<"u"?window:{});const aT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ca="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new tS("@firebase/firestore");function Nl(){return cr.logLevel}function be(t,...e){if(cr.logLevel<=Xe.DEBUG){const n=e.map(ap);cr.debug(`Firestore (${Ca}): ${t}`,...n)}}function Io(t,...e){if(cr.logLevel<=Xe.ERROR){const n=e.map(ap);cr.error(`Firestore (${Ca}): ${t}`,...n)}}function ya(t,...e){if(cr.logLevel<=Xe.WARN){const n=e.map(ap);cr.warn(`Firestore (${Ca}): ${t}`,...n)}}function ap(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t="Unexpected state"){const e=`FIRESTORE (${Ca}) INTERNAL ASSERTION FAILED: `+t;throw Io(e),new Error(e)}function ft(t,e){t||Pe()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Tn.UNAUTHENTICATED)))}shutdown(){}}class R2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class I2{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ft(this.o===void 0);let o=this.i;const r=g=>this.i!==o?(o=this.i,n(g)):Promise.resolve();let l=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xs,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},f=g=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xs)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ft(typeof o.accessToken=="string"),new gS(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string"),new Tn(e)}}class N2{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class M2{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new N2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class D2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class P2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ft(this.o===void 0);const o=l=>{l.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const r=l=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?r(l):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ft(typeof n.token=="string"),this.R=n.token,new D2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<t;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const r=U2(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<n&&(o+=e.charAt(r[l]%e.length))}return o}}function ot(t,e){return t<e?-1:t>e?1:0}function va(t,e,n){return t.length===e.length&&t.every(((o,r)=>n(o,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Kt(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Kt(0,0))}static max(){return new Ve(new Kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n,o){n===void 0?n=0:n>e.length&&Pe(),o===void 0?o=e.length-n:o>e.length-n&&Pe(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Yl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yl?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let r=0;r<o;r++){const l=e.get(r),u=n.get(r);if(l<u)return-1;if(l>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class bt extends Yl{construct(e,n,o){return new bt(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((r=>r.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const k2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Yl{construct(e,n,o){return new dn(e,n,o)}static isValidIdentifier(e){return k2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dn(["__name__"])}static fromServerFormat(e){const n=[];let o="",r=0;const l=()=>{if(o.length===0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let u=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new Ae(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ae(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=g,r+=2}else f==="`"?(u=!u,r++):f!=="."||u?(o+=f,r++):(l(),r++)}if(l(),u)throw new Ae(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(bt.fromString(e))}static fromName(e){return new Ie(bt.fromString(e).popFirst(5))}static empty(){return new Ie(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new bt(e.slice()))}}function V2(t,e){const n=t.toTimestamp().seconds,o=t.toTimestamp().nanoseconds+1,r=Ve.fromTimestamp(o===1e9?new Kt(n+1,0):new Kt(n,o));return new ws(r,Ie.empty(),e)}function L2(t){return new ws(t.readTime,t.key,-1)}class ws{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new ws(Ve.min(),Ie.empty(),-1)}static max(){return new ws(Ve.max(),Ie.empty(),-1)}}function O2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==B2)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(n,l).next(o,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):de.reject(n)}static resolve(e){return new de(((n,o)=>{n(e)}))}static reject(e){return new de(((n,o)=>{o(e)}))}static waitFor(e){return new de(((n,o)=>{let r=0,l=0,u=!1;e.forEach((f=>{++r,f.next((()=>{++l,u&&l===r&&n()}),(g=>o(g)))})),u=!0,l===r&&n()}))}static or(e){let n=de.resolve(!1);for(const o of e)n=n.next((r=>r?de.resolve(r):o()));return n}static forEach(e,n){const o=[];return e.forEach(((r,l)=>{o.push(n.call(this,r,l))})),this.waitFor(o)}static mapArray(e,n){return new de(((o,r)=>{const l=e.length,u=new Array(l);let f=0;for(let g=0;g<l;g++){const h=g;n(e[h]).next((_=>{u[h]=_,++f,f===l&&o(u)}),(_=>r(_)))}}))}static doWhile(e,n){return new de(((o,r)=>{const l=()=>{e()===!0?n().next((()=>{l()}),r):o()};l()}))}}function G2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function eu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ie(o),this.se=o=>n.writeSequenceNumber(o))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lp.oe=-1;function Td(t){return t==null}function od(t){return t===0&&1/t==-1/0}function F2(t){return typeof t=="number"&&Number.isInteger(t)&&!od(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){this.comparator=e,this.root=n||cn.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(e,o.key);if(r===0)return n+o.left.size;r<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vc(this.root,e,this.comparator,!0)}}class Vc{constructor(e,n,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?o(e.key,n):1,n&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,n,o,r,l){this.key=e,this.value=n,this.color=o??cn.RED,this.left=r??cn.EMPTY,this.right=l??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,r,l){return new cn(e??this.key,n??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let r=this;const l=o(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,n,o),null):l===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return cn.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,n,o,r,l){return this}insert(e,n,o){return new cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uT(this.data.getIterator())}getIteratorFrom(e){return new uT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new fn(this.comparator);return n.data=e,n}}class uT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new ni([])}unionWith(e){let n=new fn(dn.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new ni(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new _S("Invalid base64 string: "+l):l}})(e);return new hn(n)}static fromUint8Array(e){const n=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const H2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(t){if(ft(!!t),typeof t=="string"){let e=0;const n=H2.exec(t);if(ft(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const o=new Date(t);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dr(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cp(t){const e=t.mapValue.fields.__previous_value__;return up(e)?cp(e):e}function Jl(t){const e=Cs(t.mapValue.fields.__local_write_time__.timestampValue);return new Kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n,o,r,l,u,f,g,h){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=h}}class Kl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc={mapValue:{}};function fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?up(t)?4:Y2(t)?9007199254740991:j2(t)?10:11:Pe()}function Wi(t,e){if(t===e)return!0;const n=fr(t);if(n!==fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jl(t).isEqual(Jl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=Cs(r.timestampValue),f=Cs(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,l){return dr(r.bytesValue).isEqual(dr(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,l){return Vt(r.geoPointValue.latitude)===Vt(l.geoPointValue.latitude)&&Vt(r.geoPointValue.longitude)===Vt(l.geoPointValue.longitude)})(t,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return Vt(r.integerValue)===Vt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=Vt(r.doubleValue),f=Vt(l.doubleValue);return u===f?od(u)===od(f):isNaN(u)&&isNaN(f)}return!1})(t,e);case 9:return va(t.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},f=l.mapValue.fields||{};if(lT(u)!==lT(f))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(f[g]===void 0||!Wi(u[g],f[g])))return!1;return!0})(t,e);default:return Pe()}}function $l(t,e){return(t.values||[]).find((n=>Wi(n,e)))!==void 0}function _a(t,e){if(t===e)return 0;const n=fr(t),o=fr(e);if(n!==o)return ot(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=Vt(l.integerValue||l.doubleValue),g=Vt(u.integerValue||u.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(t,e);case 3:return cT(t.timestampValue,e.timestampValue);case 4:return cT(Jl(t),Jl(e));case 5:return ot(t.stringValue,e.stringValue);case 6:return(function(l,u){const f=dr(l),g=dr(u);return f.compareTo(g)})(t.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),g=u.split("/");for(let h=0;h<f.length&&h<g.length;h++){const _=ot(f[h],g[h]);if(_!==0)return _}return ot(f.length,g.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=ot(Vt(l.latitude),Vt(u.latitude));return f!==0?f:ot(Vt(l.longitude),Vt(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return dT(t.arrayValue,e.arrayValue);case 10:return(function(l,u){var f,g,h,_;const E=l.fields||{},b=u.fields||{},w=(f=E.value)===null||f===void 0?void 0:f.arrayValue,I=(g=b.value)===null||g===void 0?void 0:g.arrayValue,L=ot(((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0,((_=I==null?void 0:I.values)===null||_===void 0?void 0:_.length)||0);return L!==0?L:dT(w,I)})(t.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Lc.mapValue&&u===Lc.mapValue)return 0;if(l===Lc.mapValue)return 1;if(u===Lc.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),h=u.fields||{},_=Object.keys(h);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const b=ot(g[E],_[E]);if(b!==0)return b;const w=_a(f[g[E]],h[_[E]]);if(w!==0)return w}return ot(g.length,_.length)})(t.mapValue,e.mapValue);default:throw Pe()}}function cT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=Cs(t),o=Cs(e),r=ot(n.seconds,o.seconds);return r!==0?r:ot(n.nanos,o.nanos)}function dT(t,e){const n=t.values||[],o=e.values||[];for(let r=0;r<n.length&&r<o.length;++r){const l=_a(n[r],o[r]);if(l)return l}return ot(n.length,o.length)}function Ta(t){return Dm(t)}function Dm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const o=Cs(n);return`time(${o.seconds},${o.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return dr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ie.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let o="[",r=!0;for(const l of n.values||[])r?r=!1:o+=",",o+=Dm(l);return o+"]"})(t.arrayValue):"mapValue"in t?(function(n){const o=Object.keys(n.fields||{}).sort();let r="{",l=!0;for(const u of o)l?l=!1:r+=",",r+=`${u}:${Dm(n.fields[u])}`;return r+"}"})(t.mapValue):Pe()}function Pm(t){return!!t&&"integerValue"in t}function dp(t){return!!t&&"arrayValue"in t}function fT(t){return!!t&&"nullValue"in t}function hT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jc(t){return!!t&&"mapValue"in t}function j2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ll(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gr(t.mapValue.fields,((n,o)=>e.mapValue.fields[n]=Ll(o))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ll(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Y2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!jc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(n)}setAll(e){let n=dn.emptyPath(),o={},r=[];e.forEach(((u,f)=>{if(!n.isImmediateParentOf(f)){const g=this.getFieldsMap(n);this.applyChanges(g,o,r),o={},r=[],n=f.popLast()}u?o[f.lastSegment()]=Ll(u):r.push(f.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,o,r)}delete(e){const n=this.field(e.popLast());jc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let r=n.mapValue.fields[e.get(o)];jc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,o){gr(n,((r,l)=>e[r]=l));for(const r of o)delete e[r]}clone(){return new zn(Ll(this.value))}}function TS(t){const e=[];return gr(t.fields,((n,o)=>{const r=new dn([n]);if(jc(o)){const l=TS(o.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n,o,r,l,u,f){this.key=e,this.documentType=n,this.version=o,this.readTime=r,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new En(e,0,Ve.min(),Ve.min(),Ve.min(),zn.empty(),0)}static newFoundDocument(e,n,o,r){return new En(e,1,n,Ve.min(),o,r,0)}static newNoDocument(e,n){return new En(e,2,n,Ve.min(),Ve.min(),zn.empty(),0)}static newUnknownDocument(e,n){return new En(e,3,n,Ve.min(),Ve.min(),zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n){this.position=e,this.inclusive=n}}function mT(t,e,n){let o=0;for(let r=0;r<t.position.length;r++){const l=e[r],u=t.position[r];if(l.field.isKeyField()?o=Ie.comparator(Ie.fromName(u.referenceValue),n.key):o=_a(u,n.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function pT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n="asc"){this.field=e,this.dir=n}}function J2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{}class Jt extends ES{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new $2(e,n,o):n==="array-contains"?new W2(e,o):n==="in"?new Z2(e,o):n==="not-in"?new eP(e,o):n==="array-contains-any"?new tP(e,o):new Jt(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new Q2(e,o):new X2(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_a(n,this.value)):n!==null&&fr(this.value)===fr(n)&&this.matchesComparison(_a(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zi extends ES{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zi(e,n)}matches(e){return SS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function SS(t){return t.op==="and"}function bS(t){return K2(t)&&SS(t)}function K2(t){for(const e of t.filters)if(e instanceof Zi)return!1;return!0}function Um(t){if(t instanceof Jt)return t.field.canonicalString()+t.op.toString()+Ta(t.value);if(bS(t))return t.filters.map((e=>Um(e))).join(",");{const e=t.filters.map((n=>Um(n))).join(",");return`${t.op}(${e})`}}function xS(t,e){return t instanceof Jt?(function(o,r){return r instanceof Jt&&o.op===r.op&&o.field.isEqual(r.field)&&Wi(o.value,r.value)})(t,e):t instanceof Zi?(function(o,r){return r instanceof Zi&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,u,f)=>l&&xS(u,r.filters[f])),!0):!1})(t,e):void Pe()}function AS(t){return t instanceof Jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ta(n.value)}`})(t):t instanceof Zi?(function(n){return n.op.toString()+" {"+n.getFilters().map(AS).join(" ,")+"}"})(t):"Filter"}class $2 extends Jt{constructor(e,n,o){super(e,n,o),this.key=Ie.fromName(o.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class Q2 extends Jt{constructor(e,n){super(e,"in",n),this.keys=wS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class X2 extends Jt{constructor(e,n){super(e,"not-in",n),this.keys=wS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function wS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((o=>Ie.fromName(o.referenceValue)))}class W2 extends Jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dp(n)&&$l(n.arrayValue,this.value)}}class Z2 extends Jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$l(this.value.arrayValue,n)}}class eP extends Jt{constructor(e,n){super(e,"not-in",n)}matches(e){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$l(this.value.arrayValue,n)}}class tP extends Jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>$l(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n=null,o=[],r=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=u,this.endAt=f,this.ue=null}}function gT(t,e=null,n=[],o=[],r=null,l=null,u=null){return new nP(t,e,n,o,r,l,u)}function fp(t){const e=Le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>Um(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),Td(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>Ta(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>Ta(o))).join(",")),e.ue=n}return e.ue}function hp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!J2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pT(t.startAt,e.startAt)&&pT(t.endAt,e.endAt)}function km(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n=null,o=[],r=[],l=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function iP(t,e,n,o,r,l,u,f){return new Ed(t,e,n,o,r,l,u,f)}function CS(t){return new Ed(t)}function yT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oP(t){return t.collectionGroup!==null}function Ol(t){const e=Le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),n.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new fn(dn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.ce.push(new rd(l,o))})),n.has(dn.keyField().canonicalString())||e.ce.push(new rd(dn.keyField(),o))}return e.ce}function Qi(t){const e=Le(t);return e.le||(e.le=sP(e,Ol(t))),e.le}function sP(t,e){if(t.limitType==="F")return gT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new rd(r.field,l)}));const n=t.endAt?new sd(t.endAt.position,t.endAt.inclusive):null,o=t.startAt?new sd(t.startAt.position,t.startAt.inclusive):null;return gT(t.path,t.collectionGroup,e,t.filters,t.limit,n,o)}}function Vm(t,e,n){return new Ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sd(t,e){return hp(Qi(t),Qi(e))&&t.limitType===e.limitType}function RS(t){return`${fp(Qi(t))}|lt:${t.limitType}`}function aa(t){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((r=>AS(r))).join(", ")}]`),Td(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((r=>Ta(r))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((r=>Ta(r))).join(",")),`Target(${o})`})(Qi(t))}; limitType=${t.limitType})`}function bd(t,e){return e.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):Ie.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(t,e)&&(function(o,r){for(const l of Ol(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(t,e)&&(function(o,r){return!(o.startAt&&!(function(u,f,g){const h=mT(u,f,g);return u.inclusive?h<=0:h<0})(o.startAt,Ol(o),r)||o.endAt&&!(function(u,f,g){const h=mT(u,f,g);return u.inclusive?h>=0:h>0})(o.endAt,Ol(o),r))})(t,e)}function rP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IS(t){return(e,n)=>{let o=!1;for(const r of Ol(t)){const l=aP(r,e,n);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function aP(t,e,n){const o=t.field.isKeyField()?Ie.comparator(e.key,n.key):(function(l,u,f){const g=u.data.field(l),h=f.data.field(l);return g!==null&&h!==null?_a(g,h):Pe()})(t.field,e,n);switch(t.dir){case"asc":return o;case"desc":return-1*o;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),r=this.inner[o];if(r===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],e))return o.length===1?delete this.inner[n]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(e){gr(this.inner,((n,o)=>{for(const[r,l]of o)e(r,l)}))}isEmpty(){return vS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new wt(Ie.comparator);function No(){return lP}const NS=new wt(Ie.comparator);function kl(...t){let e=NS;for(const n of t)e=e.insert(n.key,n);return e}function MS(t){let e=NS;return t.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function ar(){return Bl()}function DS(){return Bl()}function Bl(){return new Ra((t=>t.toString()),((t,e)=>t.isEqual(e)))}const uP=new wt(Ie.comparator),cP=new fn(Ie.comparator);function Ke(...t){let e=cP;for(const n of t)e=e.add(n);return e}const dP=new fn(ot);function fP(){return dP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:od(e)?"-0":e}}function PS(t){return{integerValue:""+t}}function hP(t,e){return F2(e)?PS(e):mp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this._=void 0}}function mP(t,e,n){return t instanceof ad?(function(r,l){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&up(l)&&(l=cp(l)),l&&(u.fields.__previous_value__=l),{mapValue:u}})(n,e):t instanceof Ql?kS(t,e):t instanceof Xl?VS(t,e):(function(r,l){const u=US(r,l),f=vT(u)+vT(r.Pe);return Pm(u)&&Pm(r.Pe)?PS(f):mp(r.serializer,f)})(t,e)}function pP(t,e,n){return t instanceof Ql?kS(t,e):t instanceof Xl?VS(t,e):n}function US(t,e){return t instanceof ld?(function(o){return Pm(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class ad extends xd{}class Ql extends xd{constructor(e){super(),this.elements=e}}function kS(t,e){const n=LS(e);for(const o of t.elements)n.some((r=>Wi(r,o)))||n.push(o);return{arrayValue:{values:n}}}class Xl extends xd{constructor(e){super(),this.elements=e}}function VS(t,e){let n=LS(e);for(const o of t.elements)n=n.filter((r=>!Wi(r,o)));return{arrayValue:{values:n}}}class ld extends xd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function vT(t){return Vt(t.integerValue||t.doubleValue)}function LS(t){return dp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function gP(t,e){return t.field.isEqual(e.field)&&(function(o,r){return o instanceof Ql&&r instanceof Ql||o instanceof Xl&&r instanceof Xl?va(o.elements,r.elements,Wi):o instanceof ld&&r instanceof ld?Wi(o.Pe,r.Pe):o instanceof ad&&r instanceof ad})(t.transform,e.transform)}class yP{constructor(e,n){this.version=e,this.transformResults=n}}class _i{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ad{}function OS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wd(t.key,_i.none()):new tu(t.key,t.data,_i.none());{const n=t.data,o=zn.empty();let r=new fn(dn.comparator);for(let l of e.fields)if(!r.has(l)){let u=n.field(l);u===null&&l.length>1&&(l=l.popLast(),u=n.field(l)),u===null?o.delete(l):o.set(l,u),r=r.add(l)}return new Ns(t.key,o,new ni(r.toArray()),_i.none())}}function vP(t,e,n){t instanceof tu?(function(r,l,u){const f=r.value.clone(),g=TT(r.fieldTransforms,l,u.transformResults);f.setAll(g),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):t instanceof Ns?(function(r,l,u){if(!Yc(r.precondition,l))return void l.convertToUnknownDocument(u.version);const f=TT(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(BS(r)),g.setAll(f),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(t,e,n):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function ql(t,e,n,o){return t instanceof tu?(function(l,u,f,g){if(!Yc(l.precondition,u))return f;const h=l.value.clone(),_=ET(l.fieldTransforms,g,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(t,e,n,o):t instanceof Ns?(function(l,u,f,g){if(!Yc(l.precondition,u))return f;const h=ET(l.fieldTransforms,g,u),_=u.data;return _.setAll(BS(l)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(t,e,n,o):(function(l,u,f){return Yc(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(t,e,n)}function _P(t,e){let n=null;for(const o of t.fieldTransforms){const r=e.data.field(o.field),l=US(o.transform,r||null);l!=null&&(n===null&&(n=zn.empty()),n.set(o.field,l))}return n||null}function _T(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&va(o,r,((l,u)=>gP(l,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tu extends Ad{constructor(e,n,o,r=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ns extends Ad{constructor(e,n,o,r,l=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function BS(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=t.data.field(n);e.set(n,o)}})),e}function TT(t,e,n){const o=new Map;ft(t.length===n.length);for(let r=0;r<n.length;r++){const l=t[r],u=l.transform,f=e.data.field(l.field);o.set(l.field,pP(u,f,n[r]))}return o}function ET(t,e,n){const o=new Map;for(const r of t){const l=r.transform,u=n.data.field(r.field);o.set(r.field,mP(l,u,e))}return o}class wd extends Ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TP extends Ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n,o,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&vP(l,e,o[r])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=ql(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=ql(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=DS();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=n.has(r.key)?null:f;const g=OS(u,f);g!==null&&o.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(Ve.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,((n,o)=>_T(n,o)))&&va(this.baseMutations,e.baseMutations,((n,o)=>_T(n,o)))}}class pp{constructor(e,n,o,r){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=r}static from(e,n,o){ft(e.mutations.length===o.length);let r=(function(){return uP})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,o[u].version);return new pp(e,n,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Qe;function xP(t){switch(t){default:return Pe();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function qS(t){if(t===void 0)return Io("GRPC error has no .code"),ce.UNKNOWN;switch(t){case Ft.OK:return ce.OK;case Ft.CANCELLED:return ce.CANCELLED;case Ft.UNKNOWN:return ce.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return ce.INTERNAL;case Ft.UNAVAILABLE:return ce.UNAVAILABLE;case Ft.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Ft.NOT_FOUND:return ce.NOT_FOUND;case Ft.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Ft.ABORTED:return ce.ABORTED;case Ft.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Ft.DATA_LOSS:return ce.DATA_LOSS;default:return Pe()}}(Qe=Ft||(Ft={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new lr([4294967295,4294967295],0);function ST(t){const e=AP().encode(t),n=new cS;return n.update(e),new Uint8Array(n.digest())}function bT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new lr([n,o],0),new lr([r,l],0)]}class gp{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Vl(`Invalid padding: ${n}`);if(o<0)throw new Vl(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=lr.fromNumber(this.Ie)}Ee(e,n,o){let r=e.add(n.multiply(lr.fromNumber(o)));return r.compare(wP)===1&&(r=new lr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ST(e),[o,r]=bT(n);for(let l=0;l<this.hashCount;l++){const u=this.Ee(o,r,l);if(!this.de(u))return!1}return!0}static create(e,n,o){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new gp(l,r,n);return o.forEach((f=>u.insert(f))),u}insert(e){if(this.Ie===0)return;const n=ST(e),[o,r]=bT(n);for(let l=0;l<this.hashCount;l++){const u=this.Ee(o,r,l);this.Ae(u)}}Ae(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,o,r,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const r=new Map;return r.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Cd(Ve.min(),r,new wt(ot),No(),Ke())}}class nu{constructor(e,n,o,r,l){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new nu(o,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,o,r){this.Re=e,this.removedTargetIds=n,this.key=o,this.Ve=r}}class GS{constructor(e,n){this.targetId=e,this.me=n}}class FS{constructor(e,n,o=hn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=r}}class xT{constructor(){this.fe=0,this.ge=wT(),this.pe=hn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ke(),n=Ke(),o=Ke();return this.ge.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:o=o.add(r);break;default:Pe()}})),new nu(this.pe,this.ye,e,n,o)}Ce(){this.we=!1,this.ge=wT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ft(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class CP{constructor(e){this.Le=e,this.Be=new Map,this.ke=No(),this.qe=AT(),this.Qe=new wt(ot)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const o=this.Ge(n);switch(e.state){case 0:this.ze(n)&&o.De(e.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(e.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(o.Ne(),o.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),o.De(e.resumeToken));break;default:Pe()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((o,r)=>{this.ze(r)&&n(r)}))}He(e){const n=e.targetId,o=e.me.count,r=this.Je(n);if(r){const l=r.target;if(km(l))if(o===0){const u=new Ie(l.path);this.Ue(n,u,En.newNoDocument(u,Ve.min()))}else ft(o===1);else{const u=this.Ye(n);if(u!==o){const f=this.Ze(e),g=f?this.Xe(f,e,u):1;if(g!==0){this.je(n);const h=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=n;let u,f;try{u=dr(o).toUint8Array()}catch(g){if(g instanceof _S)return ya("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new gp(u,r,l)}catch(g){return ya(g instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.Ie===0?null:f}Xe(e,n,o){return n.me.count===o-this.nt(e,n.targetId)?0:2}nt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let r=0;return o.forEach((l=>{const u=this.Le.tt(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Ue(n,l,null),r++)})),r}rt(e){const n=new Map;this.Be.forEach(((l,u)=>{const f=this.Je(u);if(f){if(l.current&&km(f.target)){const g=new Ie(f.target.path);this.ke.get(g)!==null||this.it(u,g)||this.Ue(u,g,En.newNoDocument(g,e))}l.be&&(n.set(u,l.ve()),l.Ce())}}));let o=Ke();this.qe.forEach(((l,u)=>{let f=!0;u.forEachWhile((g=>{const h=this.Je(g);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(o=o.add(l))})),this.ke.forEach(((l,u)=>u.setReadTime(e)));const r=new Cd(e,n,this.Qe,this.ke,o);return this.ke=No(),this.qe=AT(),this.Qe=new wt(ot),r}$e(e,n){if(!this.ze(e))return;const o=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,o),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,o){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),o&&(this.ke=this.ke.insert(n,o))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new xT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new fn(ot),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xT),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function AT(){return new wt(Ie.comparator)}function wT(){return new wt(Ie.comparator)}const RP={asc:"ASCENDING",desc:"DESCENDING"},IP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NP={and:"AND",or:"OR"};class MP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lm(t,e){return t.useProto3Json||Td(e)?e:{value:e}}function ud(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DP(t,e){return ud(t,e.toTimestamp())}function Xi(t){return ft(!!t),Ve.fromTimestamp((function(n){const o=Cs(n);return new Kt(o.seconds,o.nanos)})(t))}function yp(t,e){return Om(t,e).canonicalString()}function Om(t,e){const n=(function(r){return new bt(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function zS(t){const e=bt.fromString(t);return ft($S(e)),e}function Bm(t,e){return yp(t.databaseId,e.path)}function Xh(t,e){const n=zS(e);if(n.get(1)!==t.databaseId.projectId)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(YS(n))}function jS(t,e){return yp(t.databaseId,e)}function PP(t){const e=zS(t);return e.length===4?bt.emptyPath():YS(e)}function qm(t){return new bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YS(t){return ft(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function CT(t,e,n){return{name:Bm(t,e),fields:n.value.mapValue.fields}}function UP(t,e){let n;if("targetChange"in e){e.targetChange;const o=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Pe()})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(h,_){return h.useProto3Json?(ft(_===void 0||typeof _=="string"),hn.fromBase64String(_||"")):(ft(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),hn.fromUint8Array(_||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const _=h.code===void 0?ce.UNKNOWN:qS(h.code);return new Ae(_,h.message||"")})(u);n=new FS(o,r,l,f||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const r=Xh(t,o.document.name),l=Xi(o.document.updateTime),u=o.document.createTime?Xi(o.document.createTime):Ve.min(),f=new zn({mapValue:{fields:o.document.fields}}),g=En.newFoundDocument(r,l,u,f),h=o.targetIds||[],_=o.removedTargetIds||[];n=new Jc(h,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const r=Xh(t,o.document),l=o.readTime?Xi(o.readTime):Ve.min(),u=En.newNoDocument(r,l),f=o.removedTargetIds||[];n=new Jc([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const r=Xh(t,o.document),l=o.removedTargetIds||[];n=new Jc([],l,r,null)}else{if(!("filter"in e))return Pe();{e.filter;const o=e.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,u=new bP(r,l),f=o.targetId;n=new GS(f,u)}}return n}function kP(t,e){let n;if(e instanceof tu)n={update:CT(t,e.key,e.value)};else if(e instanceof wd)n={delete:Bm(t,e.key)};else if(e instanceof Ns)n={update:CT(t,e.key,e.data),updateMask:zP(e.fieldMask)};else{if(!(e instanceof TP))return Pe();n={verify:Bm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(l,u){const f=u.transform;if(f instanceof ad)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ql)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Xl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ld)return{fieldPath:u.field.canonicalString(),increment:f.Pe};throw Pe()})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:DP(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Pe()})(t,e.precondition)),n}function VP(t,e){return t&&t.length>0?(ft(e!==void 0),t.map((n=>(function(r,l){let u=r.updateTime?Xi(r.updateTime):Xi(l);return u.isEqual(Ve.min())&&(u=Xi(l)),new yP(u,r.transformResults||[])})(n,e)))):[]}function LP(t,e){return{documents:[jS(t,e.path)]}}function OP(t,e){const n={structuredQuery:{}},o=e.path;let r;e.collectionGroup!==null?(r=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=jS(t,r);const l=(function(h){if(h.length!==0)return KS(Zi.create(h,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const u=(function(h){if(h.length!==0)return h.map((_=>(function(b){return{field:la(b.field),direction:GP(b.dir)}})(_)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const f=Lm(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:n,parent:r}}function BP(t){let e=PP(t.parent);const n=t.structuredQuery,o=n.from?n.from.length:0;let r=null;if(o>0){ft(o===1);const _=n.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];n.where&&(l=(function(E){const b=JS(E);return b instanceof Zi&&bS(b)?b.getFilters():[b]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((b=>(function(I){return new rd(ua(I.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(b)))})(n.orderBy));let f=null;n.limit&&(f=(function(E){let b;return b=typeof E=="object"?E.value:E,Td(b)?null:b})(n.limit));let g=null;n.startAt&&(g=(function(E){const b=!!E.before,w=E.values||[];return new sd(w,b)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const b=!E.before,w=E.values||[];return new sd(w,b)})(n.endAt)),iP(e,r,u,l,f,"F",g,h)}function qP(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=ua(n.unaryFilter.field);return Jt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=ua(n.unaryFilter.field);return Jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ua(n.unaryFilter.field);return Jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ua(n.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}})(t):t.fieldFilter!==void 0?(function(n){return Jt.create(ua(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Zi.create(n.compositeFilter.filters.map((o=>JS(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Pe()}})(n.compositeFilter.op))})(t):Pe()}function GP(t){return RP[t]}function FP(t){return IP[t]}function HP(t){return NP[t]}function la(t){return{fieldPath:t.canonicalString()}}function ua(t){return dn.fromServerFormat(t.fieldPath)}function KS(t){return t instanceof Jt?(function(n){if(n.op==="=="){if(hT(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NAN"}};if(fT(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hT(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NOT_NAN"}};if(fT(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:la(n.field),op:FP(n.op),value:n.value}}})(t):t instanceof Zi?(function(n){const o=n.getFilters().map((r=>KS(r)));return o.length===1?o[0]:{compositeFilter:{op:HP(n.op),filters:o}}})(t):Pe()}function zP(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function $S(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,o,r,l=Ve.min(),u=Ve.min(),f=hn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.ct=e}}function YP(t){const e=BP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.un=new KP}addToCollectionParentIndex(e,n){return this.un.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(ws.min())}updateCollectionGroup(e,n,o){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class KP{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),r=this.index[n]||new fn(bt.comparator),l=!r.has(o);return this.index[n]=r.add(o),l}has(e){const n=e.lastSegment(),o=e.popLast(),r=this.index[n];return r&&r.has(o)}getEntries(e){return(this.index[e]||new fn(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ea(0)}static kn(){return new Ea(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.changes=new Ra((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?de.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n,o,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=r}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(o=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(o!==null&&ql(o.mutation,r,ni.empty(),Kt.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,Ke()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=Ke()){const r=ar();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,o).next((l=>{let u=kl();return l.forEach(((f,g)=>{u=u.insert(f,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const o=ar();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,Ke())))}populateOverlays(e,n,o){const r=[];return o.forEach((l=>{n.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,f)=>{n.set(u,f)}))}))}computeViews(e,n,o,r){let l=No();const u=Bl(),f=(function(){return Bl()})();return n.forEach(((g,h)=>{const _=o.get(h.key);r.has(h.key)&&(_===void 0||_.mutation instanceof Ns)?l=l.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),ql(_.mutation,h,_.mutation.getFieldMask(),Kt.now())):u.set(h.key,ni.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((h,_)=>u.set(h,_))),n.forEach(((h,_)=>{var E;return f.set(h,new QP(_,(E=u.get(h))!==null&&E!==void 0?E:null))})),f)))}recalculateAndSaveOverlays(e,n){const o=Bl();let r=new wt(((u,f)=>u-f)),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const f of u)f.keys().forEach((g=>{const h=n.get(g);if(h===null)return;let _=o.get(g)||ni.empty();_=f.applyToLocalView(h,_),o.set(g,_);const E=(r.get(f.batchId)||Ke()).add(g);r=r.insert(f.batchId,E)}))})).next((()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),h=g.key,_=g.value,E=DS();_.forEach((b=>{if(!l.has(b)){const w=OS(n.get(b),o.get(b));w!==null&&E.set(b,w),l=l.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return de.waitFor(u)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,r){return(function(u){return Ie.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,r):this.getDocumentsMatchingCollectionQuery(e,n,o,r)}getNextDocuments(e,n,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,r-l.size):de.resolve(ar());let f=-1,g=l;return u.next((h=>de.forEach(h,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?de.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{g=g.insert(_,b)}))))).next((()=>this.populateOverlays(e,h,l))).next((()=>this.computeViews(e,g,h,Ke()))).next((_=>({batchId:f,changes:MS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next((o=>{let r=kl();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,r){const l=n.collectionGroup;let u=kl();return this.indexManager.getCollectionParents(e,l).next((f=>de.forEach(f,(g=>{const h=(function(E,b){return new Ed(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,h,o,r).next((_=>{_.forEach(((E,b)=>{u=u.insert(E,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,l,r)))).next((u=>{l.forEach(((g,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,En.newInvalidDocument(_)))}));let f=kl();return u.forEach(((g,h)=>{const _=l.get(g);_!==void 0&&ql(_.mutation,h,ni.empty(),Kt.now()),bd(n,h)&&(f=f.insert(g,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return de.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Xi(r.createTime)}})(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(r){return{name:r.name,query:YP(r.bundledQuery),readTime:Xi(r.readTime)}})(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(){this.overlays=new wt(Ie.comparator),this.Ir=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const o=ar();return de.forEach(n,(r=>this.getOverlay(e,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((r,l)=>{this.ht(e,n,l)})),de.resolve()}removeOverlaysForBatchId(e,n,o){const r=this.Ir.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(o)),de.resolve()}getOverlaysForCollection(e,n,o){const r=ar(),l=n.length+1,u=new Ie(n.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,h=g.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===l&&g.largestBatchId>o&&r.set(g.getKey(),g)}return de.resolve(r)}getOverlaysForCollectionGroup(e,n,o,r){let l=new wt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>o){let _=l.get(h.largestBatchId);_===null&&(_=ar(),l=l.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const f=ar(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((h,_)=>f.set(h,_))),!(f.size()>=r)););return de.resolve(f)}ht(e,n,o){const r=this.overlays.get(o.key);if(r!==null){const u=this.Ir.get(r.largestBatchId).delete(o.key);this.Ir.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new SP(n,o));let l=this.Ir.get(n);l===void 0&&(l=Ke(),this.Ir.set(n,l)),this.Ir.set(n,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(){this.Tr=new fn(tn.Er),this.dr=new fn(tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const o=new tn(e,n);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Vr(new tn(e,n))}mr(e,n){e.forEach((o=>this.removeReference(o,n)))}gr(e){const n=new Ie(new bt([])),o=new tn(n,e),r=new tn(n,e+1),l=[];return this.dr.forEachInRange([o,r],(u=>{this.Vr(u),l.push(u.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ie(new bt([])),o=new tn(n,e),r=new tn(n,e+1);let l=Ke();return this.dr.forEachInRange([o,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const n=new tn(e,0),o=this.Tr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class tn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ie.comparator(e.key,n.key)||ot(e.wr,n.wr)}static Ar(e,n){return ot(e.wr,n.wr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new fn(tn.Er)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,r){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new EP(l,n,o,r);this.mutationQueue.push(u);for(const f of r)this.br=this.br.add(new tn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return de.resolve(u)}lookupMutationBatch(e,n){return de.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,r=this.vr(o),l=r<0?0:r;return de.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new tn(n,0),r=new tn(n,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([o,r],(u=>{const f=this.Dr(u.wr);l.push(f)})),de.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new fn(ot);return n.forEach((r=>{const l=new tn(r,0),u=new tn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,u],(f=>{o=o.add(f.wr)}))})),de.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,r=o.length+1;let l=o;Ie.isDocumentKey(l)||(l=l.child(""));const u=new tn(new Ie(l),0);let f=new fn(ot);return this.br.forEachWhile((g=>{const h=g.key.path;return!!o.isPrefixOf(h)&&(h.length===r&&(f=f.add(g.wr)),!0)}),u),de.resolve(this.Cr(f))}Cr(e){const n=[];return e.forEach((o=>{const r=this.Dr(o);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){ft(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let o=this.br;return de.forEach(n.mutations,(r=>{const l=new tn(r.key,n.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=o}))}On(e){}containsKey(e,n){const o=new tn(n,0),r=this.br.firstAfterOrEqual(o);return de.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.Mr=e,this.docs=(function(){return new wt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,r=this.docs.get(o),l=r?r.size:0,u=this.Mr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return de.resolve(o?o.document.mutableCopy():En.newInvalidDocument(n))}getEntries(e,n){let o=No();return n.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():En.newInvalidDocument(r))})),de.resolve(o)}getDocumentsMatchingQuery(e,n,o,r){let l=No();const u=n.path,f=new Ie(u.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:h,value:{document:_}}=g.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||O2(L2(_),o)<=0||(r.has(_.key)||bd(n,_))&&(l=l.insert(_.key,_.mutableCopy()))}return de.resolve(l)}getAllFromCollectionGroup(e,n,o,r){Pe()}Or(e,n){return de.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new iU(this)}getSize(e){return de.resolve(this.size)}}class iU extends $P{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(o)})),de.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.persistence=e,this.Nr=new Ra((n=>fp(n)),hp),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vp,this.targetCount=0,this.kr=Ea.Bn()}forEachTarget(e,n){return this.Nr.forEach(((o,r)=>n(r))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Lr&&(this.Lr=n),de.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ea(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Kn(n),de.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,o){let r=0;const l=[];return this.Nr.forEach(((u,f)=>{f.sequenceNumber<=n&&o.get(f.targetId)===null&&(this.Nr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),de.waitFor(l).next((()=>r))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const o=this.Nr.get(n)||null;return de.resolve(o)}addMatchingKeys(e,n,o){return this.Br.Rr(n,o),de.resolve()}removeMatchingKeys(e,n,o){this.Br.mr(n,o);const r=this.persistence.referenceDelegate,l=[];return r&&n.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),de.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Br.yr(n);return de.resolve(o)}containsKey(e,n){return de.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,n){this.qr={},this.overlays={},this.Qr=new lp(0),this.Kr=!1,this.Kr=!0,this.$r=new eU,this.referenceDelegate=e(this),this.Ur=new oU(this),this.indexManager=new JP,this.remoteDocumentCache=(function(r){return new nU(r)})((o=>this.referenceDelegate.Wr(o))),this.serializer=new jP(n),this.Gr=new WP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ZP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.qr[e.toKey()];return o||(o=new tU(n,this.referenceDelegate),this.qr[e.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,o){be("MemoryPersistence","Starting transaction:",e);const r=new rU(this.Qr.next());return this.referenceDelegate.zr(),o(r).next((l=>this.referenceDelegate.jr(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Hr(e,n){return de.or(Object.values(this.qr).map((o=>()=>o.containsKey(e,n))))}}class rU extends q2{constructor(e){super(),this.currentSequenceNumber=e}}class _p{constructor(e){this.persistence=e,this.Jr=new vp,this.Yr=null}static Zr(e){return new _p(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,n,o){return this.Jr.addReference(o,n),this.Xr.delete(o.toString()),de.resolve()}removeReference(e,n,o){return this.Jr.removeReference(o,n),this.Xr.add(o.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),de.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((r=>this.Xr.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((l=>this.Xr.add(l.toString())))})).next((()=>o.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Xr,(o=>{const r=Ie.fromPath(o);return this.ei(e,r).next((l=>{l||n.removeEntry(r,Ve.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((o=>{o?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return de.or([()=>de.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,o,r){this.targetId=e,this.fromCache=n,this.$i=o,this.Ui=r}static Wi(e,n){let o=Ke(),r=Ke();for(const l of n.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Tp(e,n.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return fD()?8:G2(cD())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,o,r){const l={result:null};return this.Yi(e,n).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.Zi(e,n,r,o).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new aU;return this.Xi(e,n,u).next((f=>{if(l.result=f,this.zi)return this.es(e,n,u,f.size)}))})).next((()=>l.result))}es(e,n,o,r){return o.documentReadCount<this.ji?(Nl()<=Xe.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",aa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),de.resolve()):(Nl()<=Xe.DEBUG&&be("QueryEngine","Query:",aa(n),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.Hi*r?(Nl()<=Xe.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",aa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(n))):de.resolve())}Yi(e,n){if(yT(n))return de.resolve(null);let o=Qi(n);return this.indexManager.getIndexType(e,o).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Vm(n,null,"F"),o=Qi(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const u=Ke(...l);return this.Ji.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,o).next((g=>{const h=this.ts(n,f);return this.ns(n,h,u,g.readTime)?this.Yi(e,Vm(n,null,"F")):this.rs(e,h,n,g)}))))})))))}Zi(e,n,o,r){return yT(n)||r.isEqual(Ve.min())?de.resolve(null):this.Ji.getDocuments(e,o).next((l=>{const u=this.ts(n,l);return this.ns(n,u,o,r)?de.resolve(null):(Nl()<=Xe.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),aa(n)),this.rs(e,u,n,V2(r,-1)).next((f=>f)))}))}ts(e,n){let o=new fn(IS(e));return n.forEach(((r,l)=>{bd(e,l)&&(o=o.add(l))})),o}ns(e,n,o,r){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Xi(e,n,o){return Nl()<=Xe.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",aa(n)),this.Ji.getDocumentsMatchingQuery(e,n,ws.min(),o)}rs(e,n,o,r){return this.Ji.getDocumentsMatchingQuery(e,o,r).next((l=>(n.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n,o,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new wt(ot),this._s=new Ra((l=>fp(l)),hp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(o)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function cU(t,e,n,o){return new uU(t,e,n,o)}async function QS(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return n.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,n.ls(e),n.mutationQueue.getAllMutationBatches(o)))).next((l=>{const u=[],f=[];let g=Ke();for(const h of r){u.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}for(const h of l){f.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(o,g).next((h=>({hs:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function dU(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=e.batch.keys(),l=n.cs.newChangeBuffer({trackRemovals:!0});return(function(f,g,h,_){const E=h.batch,b=E.keys();let w=de.resolve();return b.forEach((I=>{w=w.next((()=>_.getEntry(g,I))).next((L=>{const U=h.docVersions.get(I);ft(U!==null),L.version.compareTo(U)<0&&(E.applyToRemoteDocument(L,h),L.isValidDocument()&&(L.setReadTime(h.commitVersion),_.addEntry(L)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(n,o,e,l).next((()=>l.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(f){let g=Ke();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(g=g.add(f.batch.mutations[h].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(o,r)))}))}function XS(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function fU(t,e){const n=Le(t),o=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const f=[];e.targetChanges.forEach(((_,E)=>{const b=r.get(E);if(!b)return;f.push(n.Ur.removeMatchingKeys(l,_.removedDocuments,E).next((()=>n.Ur.addMatchingKeys(l,_.addedDocuments,E))));let w=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(hn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,o)),r=r.insert(E,w),(function(L,U,j){return L.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(b,w,_)&&f.push(n.Ur.updateTargetData(l,w))}));let g=No(),h=Ke();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(hU(l,u,e.documentUpdates).next((_=>{g=_.Ps,h=_.Is}))),!o.isEqual(Ve.min())){const _=n.Ur.getLastRemoteSnapshotVersion(l).next((E=>n.Ur.setTargetsMetadata(l,l.currentSequenceNumber,o)));f.push(_)}return de.waitFor(f).next((()=>u.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,g,h))).next((()=>g))})).then((l=>(n.os=r,l)))}function hU(t,e,n){let o=Ke(),r=Ke();return n.forEach((l=>o=o.add(l))),e.getEntries(t,o).next((l=>{let u=No();return n.forEach(((f,g)=>{const h=l.get(f);g.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(f)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!h.isValidDocument()||g.version.compareTo(h.version)>0||g.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):be("LocalStore","Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",g.version)})),{Ps:u,Is:r}}))}function mU(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function pU(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return n.Ur.getTargetData(o,e).next((l=>l?(r=l,de.resolve(r)):n.Ur.allocateTargetId(o).next((u=>(r=new Ts(e,u,"TargetPurposeListen",o.currentSequenceNumber),n.Ur.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=n.os.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(o.targetId,o),n._s.set(e,o.targetId)),o}))}async function Gm(t,e,n){const o=Le(t),r=o.os.get(e),l=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",l,(u=>o.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!eu(u))throw u;be("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}o.os=o.os.remove(e),o._s.delete(r.target)}function RT(t,e,n){const o=Le(t);let r=Ve.min(),l=Ke();return o.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,h,_){const E=Le(g),b=E._s.get(_);return b!==void 0?de.resolve(E.os.get(b)):E.Ur.getTargetData(h,_)})(o,u,Qi(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(u,f.targetId).next((g=>{l=g}))})).next((()=>o.ss.getDocumentsMatchingQuery(u,e,n?r:Ve.min(),n?l:Ke()))).next((f=>(gU(o,rP(e),f),{documents:f,Ts:l})))))}function gU(t,e,n){let o=t.us.get(e)||Ve.min();n.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),t.us.set(e,o)}class IT{constructor(){this.activeTargetIds=fP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yU{constructor(){this.so=new IT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,o){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new IT,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc=null;function Wh(){return Oc===null?Oc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Oc++,"0x"+Oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class EU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+n.host,this.vo=`projects/${r}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${l}`}get Fo(){return!1}Mo(n,o,r,l,u){const f=Wh(),g=this.xo(n,o.toUriEncodedString());be("RestConnection",`Sending RPC '${n}' ${f}:`,g,r);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,l,u),this.No(n,g,h,r).then((_=>(be("RestConnection",`Received RPC '${n}' ${f}: `,_),_)),(_=>{throw ya("RestConnection",`RPC '${n}' ${f} failed with error: `,_,"url: ",g,"request:",r),_}))}Lo(n,o,r,l,u,f){return this.Mo(n,o,r,l,u)}Oo(n,o,r){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ca})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach(((l,u)=>n[u]=l)),r&&r.headers.forEach(((l,u)=>n[u]=l))}xo(n,o){const r=_U[n];return`${this.Do}/v1/${o}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,o,r){const l=Wh();return new Promise(((u,f)=>{const g=new dS;g.setWithCredentials(!0),g.listenOnce(fS.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case zc.NO_ERROR:const _=g.getResponseJson();be(_n,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),u(_);break;case zc.TIMEOUT:be(_n,`RPC '${e}' ${l} timed out`),f(new Ae(ce.DEADLINE_EXCEEDED,"Request time out"));break;case zc.HTTP_ERROR:const E=g.getStatus();if(be(_n,`RPC '${e}' ${l} failed with status:`,E,"response text:",g.getResponseText()),E>0){let b=g.getResponseJson();Array.isArray(b)&&(b=b[0]);const w=b==null?void 0:b.error;if(w&&w.status&&w.message){const I=(function(U){const j=U.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(j)>=0?j:ce.UNKNOWN})(w.status);f(new Ae(I,w.message))}else f(new Ae(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new Ae(ce.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{be(_n,`RPC '${e}' ${l} completed.`)}}));const h=JSON.stringify(r);be(_n,`RPC '${e}' ${l} sending request:`,r),g.send(n,"POST",h,o,15)}))}Bo(e,n,o){const r=Wh(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=pS(),f=mS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(g.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,n,o),g.encodeInitMessageHeaders=!0;const _=l.join("");be(_n,`Creating RPC '${e}' stream ${r}: ${_}`,g);const E=u.createWebChannel(_,g);let b=!1,w=!1;const I=new TU({Io:U=>{w?be(_n,`Not sending because RPC '${e}' stream ${r} is closed:`,U):(b||(be(_n,`Opening RPC '${e}' stream ${r} transport.`),E.open(),b=!0),be(_n,`RPC '${e}' stream ${r} sending:`,U),E.send(U))},To:()=>E.close()}),L=(U,j,W)=>{U.listen(j,(z=>{try{W(z)}catch(X){setTimeout((()=>{throw X}),0)}}))};return L(E,Ul.EventType.OPEN,(()=>{w||(be(_n,`RPC '${e}' stream ${r} transport opened.`),I.yo())})),L(E,Ul.EventType.CLOSE,(()=>{w||(w=!0,be(_n,`RPC '${e}' stream ${r} transport closed`),I.So())})),L(E,Ul.EventType.ERROR,(U=>{w||(w=!0,ya(_n,`RPC '${e}' stream ${r} transport errored:`,U),I.So(new Ae(ce.UNAVAILABLE,"The operation could not be completed")))})),L(E,Ul.EventType.MESSAGE,(U=>{var j;if(!w){const W=U.data[0];ft(!!W);const z=W,X=z.error||((j=z[0])===null||j===void 0?void 0:j.error);if(X){be(_n,`RPC '${e}' stream ${r} received error:`,X);const G=X.status;let se=(function(M){const P=Ft[M];if(P!==void 0)return qS(P)})(G),D=X.message;se===void 0&&(se=ce.INTERNAL,D="Unknown error status: "+G+" with message "+X.message),w=!0,I.So(new Ae(se,D)),E.close()}else be(_n,`RPC '${e}' stream ${r} received:`,W),I.bo(W)}})),L(f,hS.STAT_EVENT,(U=>{U.stat===Mm.PROXY?be(_n,`RPC '${e}' stream ${r} detected buffering proxy`):U.stat===Mm.NOPROXY&&be(_n,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{I.wo()}),0),I}}function Zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t){return new MP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n,o=1e3,r=1.5,l=6e4){this.ui=e,this.timerId=n,this.ko=o,this.qo=r,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-o);r>0&&be("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n,o,r,l,u,f,g){this.ui=e,this.Ho=o,this.Jo=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new WS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Io(n.toString()),Io("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.Yo===n&&this.P_(o,r)}),(o=>{e((()=>{const r=new Ae(ce.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(r)}))}))}P_(e,n){const o=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{o((()=>this.listener.Eo()))})),this.stream.Ro((()=>{o((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((r=>{o((()=>this.I_(r)))})),this.stream.onMessage((r=>{o((()=>++this.e_==1?this.E_(r):this.onNext(r)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SU extends ZS{constructor(e,n,o,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,r,u),this.serializer=l}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=UP(this.serializer,e),o=(function(l){if(!("targetChange"in l))return Ve.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ve.min():u.readTime?Xi(u.readTime):Ve.min()})(e);return this.listener.d_(n,o)}A_(e){const n={};n.database=qm(this.serializer),n.addTarget=(function(l,u){let f;const g=u.target;if(f=km(g)?{documents:LP(l,g)}:{query:OP(l,g)._t},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=HS(l,u.resumeToken);const h=Lm(l,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(Ve.min())>0){f.readTime=ud(l,u.snapshotVersion.toTimestamp());const h=Lm(l,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const o=qP(this.serializer,e);o&&(n.labels=o),this.a_(n)}R_(e){const n={};n.database=qm(this.serializer),n.removeTarget=e,this.a_(n)}}class bU extends ZS{constructor(e,n,o,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,r,u),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ft(!!e.streamToken),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=VP(e.writeResults,e.commitTime),o=Xi(e.commitTime);return this.listener.g_(o,n)}p_(){const e={};e.database=qm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>kP(this.serializer,o)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU extends class{}{constructor(e,n,o,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,o,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Mo(e,Om(n,o),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ae(ce.UNKNOWN,l.toString())}))}Lo(e,n,o,r,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Lo(e,Om(n,o),r,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(ce.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class AU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Io(n),this.D_=!1):be("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,n,o,r,l){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((u=>{o.enqueueAndForget((async()=>{yr(this)&&(be("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const h=Le(g);h.L_.add(4),await iu(h),h.q_.set("Unknown"),h.L_.delete(4),await Id(h)})(this))}))})),this.q_=new AU(o,r)}}async function Id(t){if(yr(t))for(const e of t.B_)await e(!0)}async function iu(t){for(const e of t.B_)await e(!1)}function eb(t,e){const n=Le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xp(n)?bp(n):Ia(n).r_()&&Sp(n,e))}function Ep(t,e){const n=Le(t),o=Ia(n);n.N_.delete(e),o.r_()&&tb(n,e),n.N_.size===0&&(o.r_()?o.o_():yr(n)&&n.q_.set("Unknown"))}function Sp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ia(t).A_(e)}function tb(t,e){t.Q_.xe(e),Ia(t).R_(e)}function bp(t){t.Q_=new CP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ia(t).start(),t.q_.v_()}function xp(t){return yr(t)&&!Ia(t).n_()&&t.N_.size>0}function yr(t){return Le(t).L_.size===0}function nb(t){t.Q_=void 0}async function CU(t){t.q_.set("Online")}async function RU(t){t.N_.forEach(((e,n)=>{Sp(t,e)}))}async function IU(t,e){nb(t),xp(t)?(t.q_.M_(e),bp(t)):t.q_.set("Unknown")}async function NU(t,e,n){if(t.q_.set("Online"),e instanceof FS&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const f of l.targetIds)r.N_.has(f)&&(await r.remoteSyncer.rejectListen(f,u),r.N_.delete(f),r.Q_.removeTarget(f))})(t,e)}catch(o){be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),await cd(t,o)}else if(e instanceof Jc?t.Q_.Ke(e):e instanceof GS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ve.min()))try{const o=await XS(t.localStore);n.compareTo(o)>=0&&await(function(l,u){const f=l.Q_.rt(u);return f.targetChanges.forEach(((g,h)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.N_.get(h);_&&l.N_.set(h,_.withResumeToken(g.resumeToken,u))}})),f.targetMismatches.forEach(((g,h)=>{const _=l.N_.get(g);if(!_)return;l.N_.set(g,_.withResumeToken(hn.EMPTY_BYTE_STRING,_.snapshotVersion)),tb(l,g);const E=new Ts(_.target,g,h,_.sequenceNumber);Sp(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(t,n)}catch(o){be("RemoteStore","Failed to raise snapshot:",o),await cd(t,o)}}async function cd(t,e,n){if(!eu(e))throw e;t.L_.add(1),await iu(t),t.q_.set("Offline"),n||(n=()=>XS(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{be("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Id(t)}))}function ib(t,e){return e().catch((n=>cd(t,n,e)))}async function Nd(t){const e=Le(t),n=Rs(e);let o=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;MU(e);)try{const r=await mU(e.localStore,o);if(r===null){e.O_.length===0&&n.o_();break}o=r.batchId,DU(e,r)}catch(r){await cd(e,r)}ob(e)&&sb(e)}function MU(t){return yr(t)&&t.O_.length<10}function DU(t,e){t.O_.push(e);const n=Rs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ob(t){return yr(t)&&!Rs(t).n_()&&t.O_.length>0}function sb(t){Rs(t).start()}async function PU(t){Rs(t).p_()}async function UU(t){const e=Rs(t);for(const n of t.O_)e.m_(n.mutations)}async function kU(t,e,n){const o=t.O_.shift(),r=pp.from(o,e,n);await ib(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Nd(t)}async function VU(t,e){e&&Rs(t).V_&&await(async function(o,r){if((function(u){return xP(u)&&u!==ce.ABORTED})(r.code)){const l=o.O_.shift();Rs(o).s_(),await ib(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Nd(o)}})(t,e),ob(t)&&sb(t)}async function MT(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),be("RemoteStore","RemoteStore received new credentials");const o=yr(n);n.L_.add(3),await iu(n),o&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Id(n)}async function LU(t,e){const n=Le(t);e?(n.L_.delete(2),await Id(n)):e||(n.L_.add(2),await iu(n),n.q_.set("Unknown"))}function Ia(t){return t.K_||(t.K_=(function(n,o,r){const l=Le(n);return l.w_(),new SU(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(t.datastore,t.asyncQueue,{Eo:CU.bind(null,t),Ro:RU.bind(null,t),mo:IU.bind(null,t),d_:NU.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),xp(t)?bp(t):t.q_.set("Unknown")):(await t.K_.stop(),nb(t))}))),t.K_}function Rs(t){return t.U_||(t.U_=(function(n,o,r){const l=Le(n);return l.w_(),new bU(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:PU.bind(null,t),mo:VU.bind(null,t),f_:UU.bind(null,t),g_:kU.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Nd(t)):(await t.U_.stop(),t.O_.length>0&&(be("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n,o,r,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,r,l){const u=Date.now()+o,f=new Ap(e,n,u,r,l);return f.start(o),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wp(t,e){if(Io("AsyncQueue",`${e}: ${t}`),eu(t))return new Ae(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Ie.comparator(n.key,o.key):(n,o)=>Ie.comparator(n.key,o.key),this.keyedMap=kl(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new pa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new pa;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.W_=new wt(Ie.comparator)}track(e){const n=e.doc.key,o=this.W_.get(n);o?e.type!==0&&o.type===3?this.W_=this.W_.insert(n,e):e.type===3&&o.type!==1?this.W_=this.W_.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.W_=this.W_.remove(n):e.type===1&&o.type===2?this.W_=this.W_.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,o)=>{e.push(o)})),e}}class Sa{constructor(e,n,o,r,l,u,f,g,h){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=h}static fromInitialDocuments(e,n,o,r,l){const u=[];return n.forEach((f=>{u.push({type:0,doc:f})})),new Sa(e,n,pa.emptySet(n),u,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==o[r].type||!n[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class BU{constructor(){this.queries=PT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,o){const r=Le(n),l=r.queries;r.queries=PT(),l.forEach(((u,f)=>{for(const g of f.j_)g.onError(o)}))})(this,new Ae(ce.ABORTED,"Firestore shutting down"))}}function PT(){return new Ra((t=>RS(t)),Sd)}async function qU(t,e){const n=Le(t);let o=3;const r=e.query;let l=n.queries.get(r);l?!l.H_()&&e.J_()&&(o=2):(l=new OU,o=e.J_()?0:1);try{switch(o){case 0:l.z_=await n.onListen(r,!0);break;case 1:l.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(u){const f=wp(u,`Initialization of query '${aa(e.query)}' failed`);return void e.onError(f)}n.queries.set(r,l),l.j_.push(e),e.Z_(n.onlineState),l.z_&&e.X_(l.z_)&&Cp(n)}async function GU(t,e){const n=Le(t),o=e.query;let r=3;const l=n.queries.get(o);if(l){const u=l.j_.indexOf(e);u>=0&&(l.j_.splice(u,1),l.j_.length===0?r=e.J_()?0:1:!l.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function FU(t,e){const n=Le(t);let o=!1;for(const r of e){const l=r.query,u=n.queries.get(l);if(u){for(const f of u.j_)f.X_(r)&&(o=!0);u.z_=r}}o&&Cp(n)}function HU(t,e,n){const o=Le(t),r=o.queries.get(e);if(r)for(const l of r.j_)l.onError(n);o.queries.delete(e)}function Cp(t){t.Y_.forEach((e=>{e.next()}))}var Fm,UT;(UT=Fm||(Fm={})).ea="default",UT.Cache="cache";class zU{constructor(e,n,o){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(e){if(!this.options.includeMetadataChanges){const o=[];for(const r of e.docChanges)r.type!==3&&o.push(r);e=new Sa(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const o=n!=="Offline";return(!this.options._a||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.key=e}}class ab{constructor(e){this.key=e}}class jU{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ke(),this.mutatedKeys=Ke(),this.Aa=IS(e),this.Ra=new pa(this.Aa)}get Va(){return this.Ta}ma(e,n){const o=n?n.fa:new DT,r=n?n.Ra:this.Ra;let l=n?n.mutatedKeys:this.mutatedKeys,u=r,f=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,E)=>{const b=r.get(_),w=bd(this.query,E)?E:null,I=!!b&&this.mutatedKeys.has(b.key),L=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let U=!1;b&&w?b.data.isEqual(w.data)?I!==L&&(o.track({type:3,doc:w}),U=!0):this.ga(b,w)||(o.track({type:2,doc:w}),U=!0,(g&&this.Aa(w,g)>0||h&&this.Aa(w,h)<0)&&(f=!0)):!b&&w?(o.track({type:0,doc:w}),U=!0):b&&!w&&(o.track({type:1,doc:b}),U=!0,(g||h)&&(f=!0)),U&&(w?(u=u.add(w),l=L?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),o.track({type:1,doc:_})}return{Ra:u,fa:o,ns:f,mutatedKeys:l}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,r){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,E)=>(function(w,I){const L=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return L(w)-L(I)})(_.type,E.type)||this.Aa(_.doc,E.doc))),this.pa(o),r=r!=null&&r;const f=n&&!r?this.ya():[],g=this.da.size===0&&this.current&&!r?1:0,h=g!==this.Ea;return this.Ea=g,u.length!==0||h?{snapshot:new Sa(this.query,e.Ra,l,u,e.mutatedKeys,g===0,h,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new DT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ke(),this.Ra.forEach((o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))}));const n=[];return e.forEach((o=>{this.da.has(o)||n.push(new ab(o))})),this.da.forEach((o=>{e.has(o)||n.push(new rb(o))})),n}ba(e){this.Ta=e.Ts,this.da=Ke();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Sa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class YU{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class JU{constructor(e){this.key=e,this.va=!1}}class KU{constructor(e,n,o,r,l,u){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Ra((f=>RS(f)),Sd),this.Ma=new Map,this.xa=new Set,this.Oa=new wt(Ie.comparator),this.Na=new Map,this.La=new vp,this.Ba={},this.ka=new Map,this.qa=Ea.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function $U(t,e,n=!0){const o=hb(t);let r;const l=o.Fa.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.Da()):r=await lb(o,e,n,!0),r}async function QU(t,e){const n=hb(t);await lb(n,e,!0,!1)}async function lb(t,e,n,o){const r=await pU(t.localStore,Qi(e)),l=r.targetId,u=t.sharedClientState.addLocalQueryTarget(l,n);let f;return o&&(f=await XU(t,e,l,u==="current",r.resumeToken)),t.isPrimaryClient&&n&&eb(t.remoteStore,r),f}async function XU(t,e,n,o,r){t.Ka=(E,b,w)=>(async function(L,U,j,W){let z=U.view.ma(j);z.ns&&(z=await RT(L.localStore,U.query,!1).then((({documents:D})=>U.view.ma(D,z))));const X=W&&W.targetChanges.get(U.targetId),G=W&&W.targetMismatches.get(U.targetId)!=null,se=U.view.applyChanges(z,L.isPrimaryClient,X,G);return VT(L,U.targetId,se.wa),se.snapshot})(t,E,b,w);const l=await RT(t.localStore,e,!0),u=new jU(e,l.Ts),f=u.ma(l.documents),g=nu.createSynthesizedTargetChangeForCurrentChange(n,o&&t.onlineState!=="Offline",r),h=u.applyChanges(f,t.isPrimaryClient,g);VT(t,n,h.wa);const _=new YU(e,n,u);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function WU(t,e,n){const o=Le(t),r=o.Fa.get(e),l=o.Ma.get(r.targetId);if(l.length>1)return o.Ma.set(r.targetId,l.filter((u=>!Sd(u,e)))),void o.Fa.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await Gm(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),n&&Ep(o.remoteStore,r.targetId),Hm(o,r.targetId)})).catch(Zl)):(Hm(o,r.targetId),await Gm(o.localStore,r.targetId,!0))}async function ZU(t,e){const n=Le(t),o=n.Fa.get(e),r=n.Ma.get(o.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),Ep(n.remoteStore,o.targetId))}async function ek(t,e,n){const o=ak(t);try{const r=await(function(u,f){const g=Le(u),h=Kt.now(),_=f.reduce(((w,I)=>w.add(I.key)),Ke());let E,b;return g.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let I=No(),L=Ke();return g.cs.getEntries(w,_).next((U=>{I=U,I.forEach(((j,W)=>{W.isValidDocument()||(L=L.add(j))}))})).next((()=>g.localDocuments.getOverlayedDocuments(w,I))).next((U=>{E=U;const j=[];for(const W of f){const z=_P(W,E.get(W.key).overlayedDocument);z!=null&&j.push(new Ns(W.key,z,TS(z.value.mapValue),_i.exists(!0)))}return g.mutationQueue.addMutationBatch(w,h,j,f)})).next((U=>{b=U;const j=U.applyToLocalDocumentSet(E,L);return g.documentOverlayCache.saveOverlays(w,U.batchId,j)}))})).then((()=>({batchId:b.batchId,changes:MS(E)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(r.batchId),(function(u,f,g){let h=u.Ba[u.currentUser.toKey()];h||(h=new wt(ot)),h=h.insert(f,g),u.Ba[u.currentUser.toKey()]=h})(o,r.batchId,n),await ou(o,r.changes),await Nd(o.remoteStore)}catch(r){const l=wp(r,"Failed to persist write");n.reject(l)}}async function ub(t,e){const n=Le(t);try{const o=await fU(n.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=n.Na.get(l);u&&(ft(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.va=!0:r.modifiedDocuments.size>0?ft(u.va):r.removedDocuments.size>0&&(ft(u.va),u.va=!1))})),await ou(n,o,e)}catch(o){await Zl(o)}}function kT(t,e,n){const o=Le(t);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const r=[];o.Fa.forEach(((l,u)=>{const f=u.view.Z_(e);f.snapshot&&r.push(f.snapshot)})),(function(u,f){const g=Le(u);g.onlineState=f;let h=!1;g.queries.forEach(((_,E)=>{for(const b of E.j_)b.Z_(f)&&(h=!0)})),h&&Cp(g)})(o.eventManager,e),r.length&&o.Ca.d_(r),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function tk(t,e,n){const o=Le(t);o.sharedClientState.updateQueryState(e,"rejected",n);const r=o.Na.get(e),l=r&&r.key;if(l){let u=new wt(Ie.comparator);u=u.insert(l,En.newNoDocument(l,Ve.min()));const f=Ke().add(l),g=new Cd(Ve.min(),new Map,new wt(ot),u,f);await ub(o,g),o.Oa=o.Oa.remove(l),o.Na.delete(e),Rp(o)}else await Gm(o.localStore,e,!1).then((()=>Hm(o,e,n))).catch(Zl)}async function nk(t,e){const n=Le(t),o=e.batch.batchId;try{const r=await dU(n.localStore,e);db(n,o,null),cb(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await ou(n,r)}catch(r){await Zl(r)}}async function ik(t,e,n){const o=Le(t);try{const r=await(function(u,f){const g=Le(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return g.mutationQueue.lookupMutationBatch(h,f).next((E=>(ft(E!==null),_=E.keys(),g.mutationQueue.removeMutationBatch(h,E)))).next((()=>g.mutationQueue.performConsistencyCheck(h))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(h,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>g.localDocuments.getDocuments(h,_)))}))})(o.localStore,e);db(o,e,n),cb(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await ou(o,r)}catch(r){await Zl(r)}}function cb(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function db(t,e,n){const o=Le(t);let r=o.Ba[o.currentUser.toKey()];if(r){const l=r.get(e);l&&(n?l.reject(n):l.resolve(),r=r.remove(e)),o.Ba[o.currentUser.toKey()]=r}}function Hm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const o of t.Ma.get(e))t.Fa.delete(o),n&&t.Ca.$a(o,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((o=>{t.La.containsKey(o)||fb(t,o)}))}function fb(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ep(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Rp(t))}function VT(t,e,n){for(const o of n)o instanceof rb?(t.La.addReference(o.key,e),ok(t,o)):o instanceof ab?(be("SyncEngine","Document no longer in limbo: "+o.key),t.La.removeReference(o.key,e),t.La.containsKey(o.key)||fb(t,o.key)):Pe()}function ok(t,e){const n=e.key,o=n.path.canonicalString();t.Oa.get(n)||t.xa.has(o)||(be("SyncEngine","New document in limbo: "+n),t.xa.add(o),Rp(t))}function Rp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ie(bt.fromString(e)),o=t.qa.next();t.Na.set(o,new JU(n)),t.Oa=t.Oa.insert(n,o),eb(t.remoteStore,new Ts(Qi(CS(n.path)),o,"TargetPurposeLimboResolution",lp.oe))}}async function ou(t,e,n){const o=Le(t),r=[],l=[],u=[];o.Fa.isEmpty()||(o.Fa.forEach(((f,g)=>{u.push(o.Ka(g,e,n).then((h=>{var _;if((h||n)&&o.isPrimaryClient){const E=h?!h.fromCache:(_=n==null?void 0:n.targetChanges.get(g.targetId))===null||_===void 0?void 0:_.current;o.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(h){r.push(h);const E=Tp.Wi(g.targetId,h);l.push(E)}})))})),await Promise.all(u),o.Ca.d_(r),await(async function(g,h){const _=Le(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>de.forEach(h,(b=>de.forEach(b.$i,(w=>_.persistence.referenceDelegate.addReference(E,b.targetId,w))).next((()=>de.forEach(b.Ui,(w=>_.persistence.referenceDelegate.removeReference(E,b.targetId,w)))))))))}catch(E){if(!eu(E))throw E;be("LocalStore","Failed to update sequence numbers: "+E)}for(const E of h){const b=E.targetId;if(!E.fromCache){const w=_.os.get(b),I=w.snapshotVersion,L=w.withLastLimboFreeSnapshotVersion(I);_.os=_.os.insert(b,L)}}})(o.localStore,l))}async function sk(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){be("SyncEngine","User change. New user:",e.toKey());const o=await QS(n.localStore,e);n.currentUser=e,(function(l,u){l.ka.forEach((f=>{f.forEach((g=>{g.reject(new Ae(ce.CANCELLED,u))}))})),l.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await ou(n,o.hs)}}function rk(t,e){const n=Le(t),o=n.Na.get(e);if(o&&o.va)return Ke().add(o.key);{let r=Ke();const l=n.Ma.get(e);if(!l)return r;for(const u of l){const f=n.Fa.get(u);r=r.unionWith(f.view.Va)}return r}}function hb(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ub.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tk.bind(null,e),e.Ca.d_=FU.bind(null,e.eventManager),e.Ca.$a=HU.bind(null,e.eventManager),e}function ak(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ik.bind(null,e),e}class dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return cU(this.persistence,new lU,e.initialUser,this.serializer)}Ga(e){return new sU(_p.Zr,this.serializer)}Wa(e){return new yU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dd.provider={build:()=>new dd};class zm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>kT(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=sk.bind(null,this.syncEngine),await LU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BU})()}createDatastore(e){const n=Rd(e.databaseInfo.databaseId),o=(function(l){return new EU(l)})(e.databaseInfo);return(function(l,u,f,g){return new xU(l,u,f,g)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,r,l,u,f){return new wU(o,r,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>kT(this.syncEngine,n,0)),(function(){return NT.D()?new NT:new vU})())}createSyncEngine(e,n){return(function(r,l,u,f,g,h,_){const E=new KU(r,l,u,f,g,h);return _&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const l=Le(r);be("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await iu(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}zm.provider={build:()=>new zm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Io("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n,o,r,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=r,this.user=Tn.UNAUTHENTICATED,this.clientId=yS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async u=>{be("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(o,(u=>(be("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=wp(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function em(t,e){t.asyncQueue.verifyOperationInProgress(),be("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let o=n.initialUser;t.setCredentialChangeListener((async r=>{o.isEqual(r)||(await QS(e.localStore,r),o=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function LT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ck(t);be("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((o=>MT(e.remoteStore,o))),t.setAppCheckTokenChangeListener(((o,r)=>MT(e.remoteStore,r))),t._onlineComponents=e}async function ck(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be("FirestoreClient","Using user provided OfflineComponentProvider");try{await em(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ce.FAILED_PRECONDITION||r.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;ya("Error using user provided cache. Falling back to memory cache: "+n),await em(t,new dd)}}else be("FirestoreClient","Using default OfflineComponentProvider"),await em(t,new dd);return t._offlineComponents}async function mb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be("FirestoreClient","Using user provided OnlineComponentProvider"),await LT(t,t._uninitializedComponentsProvider._online)):(be("FirestoreClient","Using default OnlineComponentProvider"),await LT(t,new zm))),t._onlineComponents}function dk(t){return mb(t).then((e=>e.syncEngine))}async function fk(t){const e=await mb(t),n=e.eventManager;return n.onListen=$U.bind(null,e.syncEngine),n.onUnlisten=WU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=QU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZU.bind(null,e.syncEngine),n}function hk(t,e,n={}){const o=new xs;return t.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,g,h){const _=new lk({next:b=>{_.Za(),u.enqueueAndForget((()=>GU(l,E))),b.fromCache&&g.source==="server"?h.reject(new Ae(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(b)},error:b=>h.reject(b)}),E=new zU(f,_,{includeMetadataChanges:!0,_a:!0});return qU(l,E)})(await fk(t),t.asyncQueue,e,n,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t,e,n){if(!n)throw new Ae(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mk(t,e,n,o){if(e===!0&&o===!0)throw new Ae(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function BT(t){if(!Ie.isDocumentKey(t))throw new Ae(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qT(t){if(Ie.isDocumentKey(t))throw new Ae(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ip(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe()}function Wl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ip(t);throw new Ae(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){var n,o;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ae(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pb((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Md{constructor(e,n,o,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GT(e),e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new C2;switch(o.type){case"firstParty":return new M2(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Ae(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=OT.get(n);o&&(be("ComponentProvider","Removing Datastore"),OT.delete(n),o.terminate())})(this),Promise.resolve()}}function pk(t,e,n,o={}){var r;const l=(t=Wl(t,Md))._getSettings(),u=`${e}:${n}`;if(l.host!=="firestore.googleapis.com"&&l.host!==u&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:u,ssl:!1})),o.mockUserToken){let f,g;if(typeof o.mockUserToken=="string")f=o.mockUserToken,g=Tn.MOCK_USER;else{f=ZE(o.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const h=o.mockUserToken.sub||o.mockUserToken.user_id;if(!h)throw new Ae(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Tn(h)}t._authCredentials=new R2(new gS(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Dd(this.firestore,e,this._query)}}class Mi{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new As(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mi(this.firestore,e,this._key)}}class As extends Dd{constructor(e,n,o){super(e,n,CS(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mi(this.firestore,null,new Ie(e))}withConverter(e){return new As(this.firestore,e,this._path)}}function tm(t,e,...n){if(t=oi(t),gb("collection","path",e),t instanceof Md){const o=bt.fromString(e,...n);return qT(o),new As(t,null,o)}{if(!(t instanceof Mi||t instanceof As))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(bt.fromString(e,...n));return qT(o),new As(t.firestore,null,o)}}function Ml(t,e,...n){if(t=oi(t),arguments.length===1&&(e=yS.newId()),gb("doc","path",e),t instanceof Md){const o=bt.fromString(e,...n);return BT(o),new Mi(t,null,new Ie(o))}{if(!(t instanceof Mi||t instanceof As))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(bt.fromString(e,...n));return BT(o),new Mi(t.firestore,t instanceof As?t.converter:null,new Ie(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new WS(this,"async_queue_retry"),this.Vu=()=>{const o=Zh();o&&be("AsyncQueue","Visibility state changed to "+o.visibilityState),this.t_.jo()},this.mu=e;const n=Zh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Zh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new xs;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!eu(e))throw e;be("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((o=>{this.Eu=o,this.du=!1;const r=(function(u){let f=u.message||"";return u.stack&&(f=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),f})(o);throw Io("INTERNAL UNHANDLED ERROR: ",r),o})).then((o=>(this.du=!1,o))))));return this.mu=n,n}enqueueAfterDelay(e,n,o){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Ap.createAndSchedule(this,e,n,o,(l=>this.yu(l)));return this.Tu.push(r),r}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Pd extends Md{constructor(e,n,o,r){super(e,n,o,r),this.type="firestore",this._queue=new FT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FT(e),this._firestoreClient=void 0,await e}}}function gk(t,e){const n=typeof t=="object"?t:aS(),o=typeof t=="string"?t:"(default)",r=oS(n,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=XE("firestore");l&&pk(r,...l)}return r}function Np(t){if(t._terminated)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yk(t),t._firestoreClient}function yk(t){var e,n,o;const r=t._freezeSettings(),l=(function(f,g,h,_){return new z2(f,g,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,pb(_.experimentalLongPollingOptions),_.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((o=r.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new uk(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(hn.fromBase64String(e))}catch(n){throw new Ae(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ba(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=/^__.*__$/;class _k{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new tu(e,this.data,n,this.fieldTransforms)}}class yb{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Up{constructor(e,n,o,r,l,u){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Up(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const o=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:o,xu:!1});return r.Ou(e),r}Nu(e){var n;const o=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:o,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vb(this.Cu)&&vk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Tk{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Rd(e)}Qu(e,n,o,r=!1){return new Up({Cu:e,methodName:n,qu:o,path:dn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ek(t){const e=t._freezeSettings(),n=Rd(t._databaseId);return new Tk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sk(t,e,n,o,r,l={}){const u=t.Qu(l.merge||l.mergeFields?2:0,e,n,r);kp("Data must be an object, but it was:",u,o);const f=_b(o,u);let g,h;if(l.merge)g=new ni(u.fieldMask),h=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const b=jm(e,E,n);if(!u.contains(b))throw new Ae(ce.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Eb(_,b)||_.push(b)}g=new ni(_),h=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,h=u.fieldTransforms;return new _k(new zn(f),g,h)}class kd extends Mp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kd}}function bk(t,e,n,o){const r=t.Qu(1,e,n);kp("Data must be an object, but it was:",r,o);const l=[],u=zn.empty();gr(o,((g,h)=>{const _=Vp(e,g,n);h=oi(h);const E=r.Nu(_);if(h instanceof kd)l.push(_);else{const b=Vd(h,E);b!=null&&(l.push(_),u.set(_,b))}}));const f=new ni(l);return new yb(u,f,r.fieldTransforms)}function xk(t,e,n,o,r,l){const u=t.Qu(1,e,n),f=[jm(e,o,n)],g=[r];if(l.length%2!=0)throw new Ae(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)f.push(jm(e,l[b])),g.push(l[b+1]);const h=[],_=zn.empty();for(let b=f.length-1;b>=0;--b)if(!Eb(h,f[b])){const w=f[b];let I=g[b];I=oi(I);const L=u.Nu(w);if(I instanceof kd)h.push(w);else{const U=Vd(I,L);U!=null&&(h.push(w),_.set(w,U))}}const E=new ni(h);return new yb(_,E,u.fieldTransforms)}function Vd(t,e){if(Tb(t=oi(t)))return kp("Unsupported field value:",e,t),_b(t,e);if(t instanceof Mp)return(function(o,r){if(!vb(r.Cu))throw r.Bu(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(o,r){const l=[];let u=0;for(const f of o){let g=Vd(f,r.Lu(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(t,e)}return(function(o,r){if((o=oi(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return hP(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=Kt.fromDate(o);return{timestampValue:ud(r.serializer,l)}}if(o instanceof Kt){const l=new Kt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ud(r.serializer,l)}}if(o instanceof Dp)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof ba)return{bytesValue:HS(r.serializer,o._byteString)};if(o instanceof Mi){const l=r.databaseId,u=o.firestore._databaseId;if(!u.isEqual(l))throw r.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:yp(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof Pp)return(function(u,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw f.Bu("VectorValues must only contain numeric values.");return mp(f.serializer,g)}))}}}}}})(o,r);throw r.Bu(`Unsupported field value: ${Ip(o)}`)})(t,e)}function _b(t,e){const n={};return vS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gr(t,((o,r)=>{const l=Vd(r,e.Mu(o));l!=null&&(n[o]=l)})),{mapValue:{fields:n}}}function Tb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Kt||t instanceof Dp||t instanceof ba||t instanceof Mi||t instanceof Mp||t instanceof Pp)}function kp(t,e,n){if(!Tb(n)||!(function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)})(n)){const o=Ip(n);throw o==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+o)}}function jm(t,e,n){if((e=oi(e))instanceof Ud)return e._internalPath;if(typeof e=="string")return Vp(t,e);throw fd("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ak=new RegExp("[~\\*/\\[\\]]");function Vp(t,e,n){if(e.search(Ak)>=0)throw fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ud(...e.split("."))._internalPath}catch{throw fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fd(t,e,n,o,r){const l=o&&!o.isEmpty(),u=r!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${o}`),u&&(g+=` in document ${r}`),g+=")"),new Ae(ce.INVALID_ARGUMENT,f+t+g)}function Eb(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n,o,r,l){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Mi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wk extends Sb{data(){return super.data()}}function bb(t,e){return typeof e=="string"?Vp(t,e):e instanceof Ud?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rk{convertValue(e,n="none"){switch(fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return gr(e,((r,l)=>{o[r]=this.convertValue(l,n)})),o}convertVectorValue(e){var n,o,r;const l=(r=(o=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||o===void 0?void 0:o.values)===null||r===void 0?void 0:r.map((u=>Vt(u.doubleValue)));return new Pp(l)}convertGeoPoint(e){return new Dp(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=cp(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const n=Cs(e);return new Kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=bt.fromString(e);ft($S(o));const r=new Kl(o.get(1),o.get(3)),l=new Ie(o.popFirst(5));return r.isEqual(n)||Io(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e,n){let o;return o=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nk extends Sb{constructor(e,n,o,r,l,u){super(e,n,o,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(bb("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Kc extends Nk{data(e={}){return super.data(e)}}class Mk{constructor(e,n,o,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Bc(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new Kc(this._firestore,this._userDataWriter,o.key,o,new Bc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((f=>{const g=new Kc(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Bc(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Kc(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Bc(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,_=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:Dk(f.type),doc:g,oldIndex:h,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Dk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}class Pk extends Rk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mi(this.firestore,null,n)}}function nm(t){t=Wl(t,Dd);const e=Wl(t.firestore,Pd),n=Np(e),o=new Pk(e);return Ck(t._query),hk(n,t._query).then((r=>new Mk(e,o,t,r)))}function HT(t){return xb(Wl(t.firestore,Pd),[new wd(t._key,_i.none())])}function xb(t,e){return(function(o,r){const l=new xs;return o.asyncQueue.enqueueAndForget((async()=>ek(await dk(o),r,l))),l.promise})(Np(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ek(e)}set(e,n,o){this._verifyNotCommitted();const r=im(e,this._firestore),l=Ik(r.converter,n,o),u=Sk(this._dataReader,"WriteBatch.set",r._key,l,r.converter!==null,o);return this._mutations.push(u.toMutation(r._key,_i.none())),this}update(e,n,o,...r){this._verifyNotCommitted();const l=im(e,this._firestore);let u;return u=typeof(n=oi(n))=="string"||n instanceof Ud?xk(this._dataReader,"WriteBatch.update",l._key,n,o,r):bk(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(u.toMutation(l._key,_i.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=im(e,this._firestore);return this._mutations=this._mutations.concat(new wd(n._key,_i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function im(t,e){if((t=oi(t)).firestore!==e)throw new Ae(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t){return Np(t=Wl(t,Pd)),new Uk(t,(e=>xb(t,e)))}(function(e,n=!0){(function(r){Ca=r})(sS),zl(new ga("firestore",((o,{instanceIdentifier:r,options:l})=>{const u=o.getProvider("app").getImmediate(),f=new Pd(new I2(o.getProvider("auth-internal")),new P2(o.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ae(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(h.options.projectId,_)})(u,r),u);return l=Object.assign({useFetchStreams:n},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),bs(aT,"4.7.3",e),bs(aT,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="firebasestorage.googleapis.com",wb="storageBucket",kk=120*1e3,Vk=600*1e3,Lk=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct extends pr{constructor(e,n,o=0){super(sm(e),`Firebase Storage: ${n} (${sm(e)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tt||(Tt={}));function sm(t){return"storage/"+t}function Lp(){const t="An unknown error occurred, please check the error payload for server response.";return new Ct(Tt.UNKNOWN,t)}function Ok(t){return new Ct(Tt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Bk(t){return new Ct(Tt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qk(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ct(Tt.UNAUTHENTICATED,t)}function Gk(){return new Ct(Tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Fk(t){return new Ct(Tt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Cb(){return new Ct(Tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Rb(){return new Ct(Tt.CANCELED,"User canceled the upload/download.")}function Hk(t){return new Ct(Tt.INVALID_URL,"Invalid URL '"+t+"'.")}function zk(t){return new Ct(Tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function jk(){return new Ct(Tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wb+"' property when initializing the app?")}function Ib(){return new Ct(Tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Yk(){return new Ct(Tt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Jk(){return new Ct(Tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Kk(t){return new Ct(Tt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ym(t){return new Ct(Tt.INVALID_ARGUMENT,t)}function Nb(){return new Ct(Tt.APP_DELETED,"The Firebase app was deleted.")}function $k(t){return new Ct(Tt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gl(t,e){return new Ct(Tt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Dl(t){throw new Ct(Tt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let o;try{o=ii.makeFromUrl(e,n)}catch{return new ii(e,"")}if(o.path==="")return o;throw zk(e)}static makeFromUrl(e,n){let o=null;const r="([A-Za-z0-9.\\-_]+)";function l(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+r+u,"i"),g={bucket:1,path:3};function h(X){X.path_=decodeURIComponent(X.path)}const _="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",w=new RegExp(`^https?://${E}/${_}/b/${r}/o${b}`,"i"),I={bucket:1,path:3},L=n===Ab?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",j=new RegExp(`^https?://${L}/${r}/${U}`,"i"),z=[{regex:f,indices:g,postModify:l},{regex:w,indices:I,postModify:h},{regex:j,indices:{bucket:1,path:2},postModify:h}];for(let X=0;X<z.length;X++){const G=z[X],se=G.regex.exec(e);if(se){const D=se[G.indices.bucket];let N=se[G.indices.path];N||(N=""),o=new ii(D,N),G.postModify(o);break}}if(o==null)throw Hk(e);return o}}class Qk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t,e,n){let o=1,r=null,l=null,u=!1,f=0;function g(){return f===2}let h=!1;function _(...U){h||(h=!0,e.apply(null,U))}function E(U){r=setTimeout(()=>{r=null,t(w,g())},U)}function b(){l&&clearTimeout(l)}function w(U,...j){if(h){b();return}if(U){b(),_.call(null,U,...j);return}if(g()||u){b(),_.call(null,U,...j);return}o<64&&(o*=2);let z;f===1?(f=2,z=0):z=(o+Math.random())*1e3,E(z)}let I=!1;function L(U){I||(I=!0,b(),!h&&(r!==null?(U||(f=2),clearTimeout(r),E(0)):U||(f=1)))}return E(0),l=setTimeout(()=>{u=!0,L(!0)},n),L}function Wk(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){return t!==void 0}function eV(t){return typeof t=="function"}function tV(t){return typeof t=="object"&&!Array.isArray(t)}function Ld(t){return typeof t=="string"||t instanceof String}function zT(t){return Op()&&t instanceof Blob}function Op(){return typeof Blob<"u"}function jT(t,e,n,o){if(o<e)throw Ym(`Invalid value for '${t}'. Expected ${e} or greater.`);if(o>n)throw Ym(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t,e,n){let o=e;return n==null&&(o=`https://${e}`),`${n}://${o}/v0${t}`}function Mb(t){const e=encodeURIComponent;let n="?";for(const o in t)if(t.hasOwnProperty(o)){const r=e(o)+"="+e(t[o]);n=n+r+"&"}return n=n.slice(0,-1),n}var ur;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ur||(ur={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||r||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,o,r,l,u,f,g,h,_,E,b=!0){this.url_=e,this.method_=n,this.headers_=o,this.body_=r,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=g,this.timeout_=h,this.progressCallback_=_,this.connectionFactory_=E,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,I)=>{this.resolve_=w,this.reject_=I,this.start_()})}start_(){const e=(o,r)=>{if(r){o(!1,new qc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=f=>{const g=f.loaded,h=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,h)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const f=l.getErrorCode()===ur.NO_ERROR,g=l.getStatus();if(!f||Db(g,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===ur.ABORT;o(!1,new qc(!1,null,_));return}const h=this.successCodes_.indexOf(g)!==-1;o(!0,new qc(h,l))})},n=(o,r)=>{const l=this.resolve_,u=this.reject_,f=r.connection;if(r.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());Zk(g)?l(g):l()}catch(g){u(g)}else if(f!==null){const g=Lp();g.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,g)):u(g)}else if(r.canceled){const g=this.appDelete_?Nb():Rb();u(g)}else{const g=Cb();u(g)}};this.canceled_?n(!1,new qc(!1,null,!0)):this.backoffId_=Xk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Wk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qc{constructor(e,n,o){this.wasSuccessCode=e,this.connection=n,this.canceled=!!o}}function iV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function oV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function sV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function rV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function aV(t,e,n,o,r,l,u=!0){const f=Mb(t.urlParams),g=t.url+f,h=Object.assign({},t.headers);return sV(h,e),iV(h,n),oV(h,l),rV(h,o),new nV(g,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function uV(...t){const e=lV();if(e!==void 0){const n=new e;for(let o=0;o<t.length;o++)n.append(t[o]);return n.getBlob()}else{if(Op())return new Blob(t);throw new Ct(Tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function cV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t){if(typeof atob>"u")throw Kk("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rm{constructor(e,n){this.data=e,this.contentType=n||null}}function fV(t,e){switch(t){case $i.RAW:return new rm(Pb(e));case $i.BASE64:case $i.BASE64URL:return new rm(Ub(t,e));case $i.DATA_URL:return new rm(mV(e),pV(e))}throw Lp()}function Pb(t){const e=[];for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);if(o<=127)e.push(o);else if(o<=2047)e.push(192|o>>6,128|o&63);else if((o&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const l=o,u=t.charCodeAt(++n);o=65536|(l&1023)<<10|u&1023,e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|o&63)}else(o&64512)===56320?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|o&63)}return new Uint8Array(e)}function hV(t){let e;try{e=decodeURIComponent(t)}catch{throw Gl($i.DATA_URL,"Malformed data URL.")}return Pb(e)}function Ub(t,e){switch(t){case $i.BASE64:{const r=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(r||l)throw Gl(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case $i.BASE64URL:{const r=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(r||l)throw Gl(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=dV(e)}catch(r){throw r.message.includes("polyfill")?r:Gl(t,"Invalid character found")}const o=new Uint8Array(n.length);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return o}class kb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Gl($i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=n[1]||null;o!=null&&(this.base64=gV(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=e.substring(e.indexOf(",")+1)}}function mV(t){const e=new kb(t);return e.base64?Ub($i.BASE64,e.rest):hV(e.rest)}function pV(t){return new kb(t).contentType}function gV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){let o=0,r="";zT(e)?(this.data_=e,o=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),o=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),o=e.length),this.size_=o,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(zT(this.data_)){const o=this.data_,r=cV(o,e,n);return r===null?null:new vs(r)}else{const o=new Uint8Array(this.data_.buffer,e,n-e);return new vs(o,!0)}}static getBlob(...e){if(Op()){const n=e.map(o=>o instanceof vs?o.data_:o);return new vs(uV.apply(null,n))}else{const n=e.map(u=>Ld(u)?fV($i.RAW,u).data:u.data_);let o=0;n.forEach(u=>{o+=u.byteLength});const r=new Uint8Array(o);let l=0;return n.forEach(u=>{for(let f=0;f<u.length;f++)r[l++]=u[f]}),new vs(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){let e;try{e=JSON.parse(t)}catch{return null}return tV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function vV(t,e){const n=e.split("/").filter(o=>o.length>0).join("/");return t.length===0?n:t+"/"+n}function Lb(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t,e){return e}class In{constructor(e,n,o,r){this.server=e,this.local=n||e,this.writable=!!o,this.xform=r||_V}}let Gc=null;function TV(t){return!Ld(t)||t.length<2?t:Lb(t)}function Ob(){if(Gc)return Gc;const t=[];t.push(new In("bucket")),t.push(new In("generation")),t.push(new In("metageneration")),t.push(new In("name","fullPath",!0));function e(l,u){return TV(u)}const n=new In("name");n.xform=e,t.push(n);function o(l,u){return u!==void 0?Number(u):u}const r=new In("size");return r.xform=o,t.push(r),t.push(new In("timeCreated")),t.push(new In("updated")),t.push(new In("md5Hash",null,!0)),t.push(new In("cacheControl",null,!0)),t.push(new In("contentDisposition",null,!0)),t.push(new In("contentEncoding",null,!0)),t.push(new In("contentLanguage",null,!0)),t.push(new In("contentType",null,!0)),t.push(new In("metadata","customMetadata",!0)),Gc=t,Gc}function EV(t,e){function n(){const o=t.bucket,r=t.fullPath,l=new ii(o,r);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:n})}function SV(t,e,n){const o={};o.type="file";const r=n.length;for(let l=0;l<r;l++){const u=n[l];o[u.local]=u.xform(o,e[u.server])}return EV(o,t),o}function Bb(t,e,n){const o=Vb(e);return o===null?null:SV(t,o,n)}function bV(t,e,n,o){const r=Vb(e);if(r===null||!Ld(r.downloadTokens))return null;const l=r.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(h=>{const _=t.bucket,E=t.fullPath,b="/b/"+u(_)+"/o/"+u(E),w=su(b,n,o),I=Mb({alt:"media",token:h});return w+I})[0]}function qb(t,e){const n={},o=e.length;for(let r=0;r<o;r++){const l=e[r];l.writable&&(n[l.server]=t[l.local])}return JSON.stringify(n)}class Na{constructor(e,n,o,r){this.url=e,this.method=n,this.handler=o,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){if(!t)throw Lp()}function Bp(t,e){function n(o,r){const l=Bb(t,r,e);return wo(l!==null),l}return n}function xV(t,e){function n(o,r){const l=Bb(t,r,e);return wo(l!==null),bV(l,r,t.host,t._protocol)}return n}function ru(t){function e(n,o){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=Gk():r=qk():n.getStatus()===402?r=Bk(t.bucket):n.getStatus()===403?r=Fk(t.path):r=o,r.status=n.getStatus(),r.serverResponse=o.serverResponse,r}return e}function Gb(t){const e=ru(t);function n(o,r){let l=e(o,r);return o.getStatus()===404&&(l=Ok(t.path)),l.serverResponse=r.serverResponse,l}return n}function AV(t,e,n){const o=e.fullServerUrl(),r=su(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,f=new Na(r,l,Bp(t,n),u);return f.errorHandler=Gb(e),f}function wV(t,e,n){const o=e.fullServerUrl(),r=su(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,f=new Na(r,l,xV(t,n),u);return f.errorHandler=Gb(e),f}function CV(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Fb(t,e,n){const o=Object.assign({},n);return o.fullPath=t.path,o.size=e.size(),o.contentType||(o.contentType=CV(null,e)),o}function RV(t,e,n,o,r){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function f(){let z="";for(let X=0;X<2;X++)z=z+Math.random().toString().slice(2);return z}const g=f();u["Content-Type"]="multipart/related; boundary="+g;const h=Fb(e,o,r),_=qb(h,n),E="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+g+`\r
Content-Type: `+h.contentType+`\r
\r
`,b=`\r
--`+g+"--",w=vs.getBlob(E,o,b);if(w===null)throw Ib();const I={name:h.fullPath},L=su(l,t.host,t._protocol),U="POST",j=t.maxUploadRetryTime,W=new Na(L,U,Bp(t,n),j);return W.urlParams=I,W.headers=u,W.body=w.uploadData(),W.errorHandler=ru(e),W}class hd{constructor(e,n,o,r){this.current=e,this.total=n,this.finalized=!!o,this.metadata=r||null}}function qp(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{wo(!1)}return wo(!!n&&(e||["active"]).indexOf(n)!==-1),n}function IV(t,e,n,o,r){const l=e.bucketOnlyServerUrl(),u=Fb(e,o,r),f={name:u.fullPath},g=su(l,t.host,t._protocol),h="POST",_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},E=qb(u,n),b=t.maxUploadRetryTime;function w(L){qp(L);let U;try{U=L.getResponseHeader("X-Goog-Upload-URL")}catch{wo(!1)}return wo(Ld(U)),U}const I=new Na(g,h,w,b);return I.urlParams=f,I.headers=_,I.body=E,I.errorHandler=ru(e),I}function NV(t,e,n,o){const r={"X-Goog-Upload-Command":"query"};function l(h){const _=qp(h,["active","final"]);let E=null;try{E=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{wo(!1)}E||wo(!1);const b=Number(E);return wo(!isNaN(b)),new hd(b,o.size(),_==="final")}const u="POST",f=t.maxUploadRetryTime,g=new Na(n,u,l,f);return g.headers=r,g.errorHandler=ru(e),g}const YT=256*1024;function MV(t,e,n,o,r,l,u,f){const g=new hd(0,0);if(u?(g.current=u.current,g.total=u.total):(g.current=0,g.total=o.size()),o.size()!==g.total)throw Yk();const h=g.total-g.current;let _=h;r>0&&(_=Math.min(_,r));const E=g.current,b=E+_;let w="";_===0?w="finalize":h===_?w="upload, finalize":w="upload";const I={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${g.current}`},L=o.slice(E,b);if(L===null)throw Ib();function U(X,G){const se=qp(X,["active","final"]),D=g.current+_,N=o.size();let M;return se==="final"?M=Bp(e,l)(X,G):M=null,new hd(D,N,se==="final",M)}const j="POST",W=e.maxUploadRetryTime,z=new Na(n,j,U,W);return z.headers=I,z.body=L.uploadData(),z.progressCallback=f||null,z.errorHandler=ru(t),z}const Hn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function am(t){switch(t){case"running":case"pausing":case"canceling":return Hn.RUNNING;case"paused":return Hn.PAUSED;case"success":return Hn.SUCCESS;case"canceled":return Hn.CANCELED;case"error":return Hn.ERROR;default:return Hn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,n,o){if(eV(e)||n!=null||o!=null)this.next=e,this.error=n??void 0,this.complete=o??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class PV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ur.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ur.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ur.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,o,r){if(this.sent_)throw Dl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const l in r)r.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,r[l].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class UV extends PV{initXhr(){this.xhr_.responseType="text"}}function ca(){return new UV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,o=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=o,this._mappings=Ob(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Tt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(Db(r.status,[]))if(l)r=Cb();else{this.sleepTime=Math.max(this.sleepTime*2,Lk),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Tt.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,l)=>{this._resolve=r,this._reject=l,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,o])=>{switch(this._state){case"running":e(n,o);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const o=IV(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(o,ca,e,n);this._request=r,r.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,o)=>{const r=NV(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(r,ca,n,o);this._request=l,l.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=YT*this._chunkMultiplier,n=new hd(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken((r,l)=>{let u;try{u=MV(this._ref._location,this._ref.storage,o,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(g){this._error=g,this._transition("error");return}const f=this._ref.storage._makeRequest(u,ca,r,l,!1);this._request=f,f.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){YT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const o=AV(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(o,ca,e,n);this._request=r,r.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const o=RV(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(o,ca,e,n);this._request=r,r.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Rb(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=am(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,o,r){const l=new DV(n||void 0,o||void 0,r||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(am(this._state)){case Hn.SUCCESS:sa(this._resolve.bind(null,this.snapshot))();break;case Hn.CANCELED:case Hn.ERROR:const n=this._reject;sa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(am(this._state)){case Hn.RUNNING:case Hn.PAUSED:e.next&&sa(e.next.bind(e,this.snapshot))();break;case Hn.SUCCESS:e.complete&&sa(e.complete.bind(e))();break;case Hn.CANCELED:case Hn.ERROR:e.error&&sa(e.error.bind(e,this._error))();break;default:e.error&&sa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n){this._service=e,n instanceof ii?this._location=n:this._location=ii.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new hr(e,n)}get root(){const e=new ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Lb(this._location.path)}get storage(){return this._service}get parent(){const e=yV(this._location.path);if(e===null)return null;const n=new ii(this._location.bucket,e);return new hr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw $k(e)}}function VV(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new kV(t,new vs(e),n)}function LV(t){t._throwIfRoot("getDownloadURL");const e=wV(t.storage,t._location,Ob());return t.storage.makeRequestWithTokens(e,ca).then(n=>{if(n===null)throw Jk();return n})}function OV(t,e){const n=vV(t._location.path,e),o=new ii(t._location.bucket,n);return new hr(t.storage,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(t){return/^[A-Za-z]+:\/\//.test(t)}function qV(t,e){return new hr(t,e)}function Hb(t,e){if(t instanceof Gp){const n=t;if(n._bucket==null)throw jk();const o=new hr(n,n._bucket);return e!=null?Hb(o,e):o}else return e!==void 0?OV(t,e):t}function GV(t,e){if(e&&BV(e)){if(t instanceof Gp)return qV(t,e);throw Ym("To use ref(service, url), the first argument must be a Storage instance.")}else return Hb(t,e)}function JT(t,e){const n=e==null?void 0:e[wb];return n==null?null:ii.makeFromBucketSpec(n,t)}function FV(t,e,n,o={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=o;r&&(t._overrideAuthToken=typeof r=="string"?r:ZE(r,t.app.options.projectId))}class Gp{constructor(e,n,o,r,l){this.app=e,this._authProvider=n,this._appCheckProvider=o,this._url=r,this._firebaseVersion=l,this._bucket=null,this._host=Ab,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kk,this._maxUploadRetryTime=Vk,this._requests=new Set,r!=null?this._bucket=ii.makeFromBucketSpec(r,this._host):this._bucket=JT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ii.makeFromBucketSpec(this._url,e):this._bucket=JT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hr(this,e)}_makeRequest(e,n,o,r,l=!0){if(this._deleted)return new Qk(Nb());{const u=aV(e,this._appId,o,r,n,this._firebaseVersion,l);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[o,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,o,r).getPromise()}}const KT="@firebase/storage",$T="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="storage";function HV(t,e,n){return t=oi(t),VV(t,e,n)}function zV(t){return t=oi(t),LV(t)}function jV(t,e){return t=oi(t),GV(t,e)}function YV(t=aS(),e){t=oi(t);const o=oS(t,zb).getImmediate({identifier:e}),r=XE("storage");return r&&JV(o,...r),o}function JV(t,e,n,o={}){FV(t,e,n,o)}function KV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Gp(n,o,r,e,sS)}function $V(){zl(new ga(zb,KV,"PUBLIC").setMultipleInstances(!0)),bs(KT,$T,""),bs(KT,$T,"esm2017")}$V();const QV={apiKey:"AIzaSyBvTHMQKOJ3wc3iz-MiOYCBG9j2o3oDOGc",authDomain:"educators-academy.firebaseapp.com",projectId:"educators-academy",storageBucket:"educators-academy.firebasestorage.app",messagingSenderId:"827874514960",appId:"1:827874514960:web:4ab3a29c04b447b413d295",measurementId:"G-TDZ7DD1HQL"},jb=rS(QV),un=gk(jb),QT=YV(jb),XV=async t=>t.type.startsWith("image/")?new Promise((e,n)=>{const o=new Image,r=URL.createObjectURL(t);o.src=r,o.onload=()=>{URL.revokeObjectURL(r);const l=document.createElement("canvas"),u=l.getContext("2d");if(!u){e(t);return}const f=1200;let g=o.width,h=o.height;g>f&&(h*=f/g,g=f),l.width=g,l.height=h,u.drawImage(o,0,0,g,h),l.toBlob(_=>{if(!_){e(t);return}const E=new File([_],t.name.replace(/\.[^/.]+$/,"")+".jpg",{type:"image/jpeg",lastModified:Date.now()});E.size>t.size?e(t):e(E)},"image/jpeg",.8)},o.onerror=l=>{URL.revokeObjectURL(r),console.warn("Image load failed for compression",l),e(t)}}):t,lm=t=>JSON.parse(JSON.stringify(t,(e,n)=>n===void 0?null:n)),Fn={async uploadFile(t,e,n){if(!QT)throw new Error("Firebase Storage is not initialized properly.");let o=t;try{o=await XV(t)}catch(g){console.warn("Compression failed, using original file",g)}const r=o.name.split(".").pop(),l=`${Date.now()}_${Math.random().toString(36).substr(2,5)}.${r}`,u=jV(QT,`${e}/${l}`),f=HV(u,o);return new Promise((g,h)=>{f.on("state_changed",_=>{const E=_.bytesTransferred/_.totalBytes*100;n&&n(E)},_=>{console.error("Upload failed:",_),h(_)},async()=>{const _=await zV(f.snapshot.ref);g(_)})})},async saveGrades(t){if(localStorage.setItem("academy_grades",JSON.stringify(t)),un)try{const e=om(un);t.forEach(n=>{const o=Ml(un,"grades",n.id);e.set(o,lm(n))}),await e.commit()}catch(e){console.error("Firebase Save Grades Error:",e)}},async saveTeachers(t){if(localStorage.setItem("academy_teachers",JSON.stringify(t)),un)try{const e=om(un);t.forEach(n=>{const o=Ml(un,"teachers",n.id);e.set(o,lm(n))}),await e.commit()}catch(e){console.error("Firebase Save Teachers Error:",e)}},async saveCourses(t){if(localStorage.setItem("academy_courses",JSON.stringify(t)),un)try{const e=om(un);t.forEach(n=>{const o=Ml(un,"courses",n.id);e.set(o,lm(n))}),await e.commit()}catch(e){console.error("Firebase Save Courses Error:",e)}},async deleteTeacher(t){if(un)try{await HT(Ml(un,"teachers",t))}catch(e){throw console.error("Firebase Delete Teacher Error:",e),e}},async deleteCourse(t){if(un)try{await HT(Ml(un,"courses",t))}catch(e){throw console.error("Firebase Delete Course Error:",e),e}},async loadData(){const t={grades:JSON.parse(localStorage.getItem("academy_grades")||"null"),teachers:JSON.parse(localStorage.getItem("academy_teachers")||"null"),courses:JSON.parse(localStorage.getItem("academy_courses")||"null")};if(un)try{const[e,n,o]=await Promise.all([nm(tm(un,"grades")),nm(tm(un,"teachers")),nm(tm(un,"courses"))]),r={grades:e.docs.map(l=>l.data()),teachers:n.docs.map(l=>l.data()),courses:o.docs.map(l=>l.data())};return localStorage.setItem("academy_grades",JSON.stringify(r.grades)),localStorage.setItem("academy_teachers",JSON.stringify(r.teachers)),localStorage.setItem("academy_courses",JSON.stringify(r.courses)),r}catch(e){console.error("Firebase Load Error:",e)}return t}},XT=({value:t,onChange:e})=>{const n=w=>{let I="12",L="00",U="AM";if(!w)return{hour:I,minute:L,period:U};const j=w.match(/^(\d{1,2}):(\d{2})$/);if(j){let z=parseInt(j[1]);const X=j[2];return U=z>=12?"PM":"AM",z=z%12||12,I=z.toString(),L=X,{hour:I,minute:L,period:U}}const W=w.match(/^(\d{1,2}):(\d{2})\s*(.*)$/);if(W){I=W[1],L=W[2];const z=W[3].trim();return U=z===""||z==="PM"||z===""?"PM":"AM",{hour:I,minute:L,period:U}}return{hour:I,minute:L,period:U}},{hour:o,minute:r,period:l}=n(t),[u,f]=ve.useState(o),[g,h]=ve.useState(r),[_,E]=ve.useState(l);ve.useEffect(()=>{const{hour:w,minute:I,period:L}=n(t);f(w),h(I),E(L)},[t]);const b=(w,I,L)=>{f(w),h(I),E(L),e(`${w}:${I} ${L==="AM"?"":""}`)};return T.jsxs("div",{className:"flex items-center gap-1",dir:"ltr",children:[T.jsxs("select",{value:_,onChange:w=>b(u,g,w.target.value),className:"bg-gray-50 border border-gray-200 rounded-lg p-1 text-sm font-bold outline-none focus:border-[#0a192f] w-16 text-center",children:[T.jsx("option",{value:"AM",children:""}),T.jsx("option",{value:"PM",children:""})]}),T.jsx("select",{value:g,onChange:w=>b(u,w.target.value,_),className:"bg-gray-50 border border-gray-200 rounded-lg p-1 text-sm font-bold outline-none focus:border-[#0a192f] w-14 text-center",children:["00","05","10","15","20","25","30","35","40","45","50","55"].map(w=>T.jsx("option",{value:w,children:w},w))}),T.jsx("span",{className:"font-bold",children:":"}),T.jsx("select",{value:u,onChange:w=>b(w.target.value,g,_),className:"bg-gray-50 border border-gray-200 rounded-lg p-1 text-sm font-bold outline-none focus:border-[#0a192f] w-14 text-center",children:Array.from({length:12},(w,I)=>I+1).map(w=>T.jsx("option",{value:w,children:w},w))})]})},WV=({grades:t,setGrades:e,teachers:n,setTeachers:o,courses:r,setCourses:l,onLogout:u,apiKey:f,setApiKey:g,anthropicApiKey:h,setAnthropicApiKey:_})=>{var Vo;const[E,b]=ve.useState(()=>localStorage.getItem("admin_active_tab")||"ai-schedule");ve.useEffect(()=>{localStorage.setItem("admin_active_tab",E)},[E]);const[w,I]=ve.useState("list"),[L,U]=ve.useState("list"),[j,W]=ve.useState(null),[z,X]=ve.useState(null),[G,se]=ve.useState(null),[D,N]=ve.useState(()=>{const V=localStorage.getItem("academy_stage_subjects");return V?JSON.parse(V):DA}),[M,P]=ve.useState(""),[O,q]=ve.useState(""),[k,Me]=ve.useState("gemini"),[rt,te]=ve.useState("ai"),[me,Ee]=ve.useState(""),[Oe,je]=ve.useState([]),[H,ie]=ve.useState(!1),[fe,Te]=ve.useState("gemini"),[Re,De]=ve.useState(0),[Be,Ht]=ve.useState(""),[lt,mn]=ve.useState([]);ve.useEffect(()=>{if(me){const V=t.find(ae=>ae.id===me);V&&je(JSON.parse(JSON.stringify(V.schedule||[])))}},[me,t]),ve.useEffect(()=>{if(Be){const V=t.find(ae=>ae.id===Be);V&&mn(JSON.parse(JSON.stringify(V.ramadanSchedule||[])))}},[Be,t]);const[Dn,eo]=ve.useState(""),[Pi,Pn]=ve.useState(""),[Po,Ms]=ve.useState(((Vo=t[0])==null?void 0:Vo.id)||""),[$t,xt]=ve.useState(!1),[Ui,ki]=ve.useState(!1),[si,Ma]=ve.useState(localStorage.getItem("google_sheet_webhook_url")||""),[We,Et]=ve.useState({name:"",subject:"",teachingHours:"",availability:"",bio:"",imageUrl:"",grades:[],stages:[]}),[to,Rt]=ve.useState(null),[Dt,ri]=ve.useState(null),[Ds,no]=ve.useState(!1),[vr,Vi]=ve.useState(""),[Ze,At]=ve.useState({title:"",description:"",videoUrl:"",thumbnailUrl:"",gradeId:""}),[on,Qt]=ve.useState(null),[au,_r]=ve.useState(!1),[Da,Uo]=ve.useState("info"),bn=Array.from(new Set(D.flatMap(V=>V.subjects))).sort();ve.useEffect(()=>{Fn.saveGrades(t),Fn.saveTeachers(n),Fn.saveCourses(r),localStorage.setItem("academy_stage_subjects",JSON.stringify(D))},[t,n,r,D]),ve.useEffect(()=>{localStorage.setItem("google_sheet_webhook_url",si)},[si]);const Ei=async V=>{const ae=typeof V=="string"?V:Pi;if(ae.trim()){xt(!0);try{const he=(await JE(ae,f)).map(ue=>{const ge=t.filter(ye=>{var Ce;return(Ce=ue.grades)==null?void 0:Ce.some(et=>ye.name.includes(et)||et.includes(ye.name)||ye.stage==="primary"&&et.includes("")||ye.stage==="preparatory"&&et.includes("")||ye.stage==="secondary"&&et.includes(""))}).map(ye=>ye.id);return{...ue,id:ue.id||`t-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,whatsapp:Fl.phone,imageUrl:ue.imageUrl||`https://picsum.photos/seed/${Math.random()}/400`,grades:ge.length>0?ge:[]}});o(ue=>{const ge=[...ue];return he.forEach(ye=>{ge.find(Ce=>Ce.name===ye.name)||ge.push(ye)}),ge}),e(ue=>ue.map(ge=>{const ye=he.filter(Ce=>{var et;return(et=Ce.grades)==null?void 0:et.includes(ge.id)}).map(Ce=>Ce.id);return ye.length>0?{...ge,teachers:Array.from(new Set([...ge.teachers,...ye]))}:ge})),alert(`   ${he.length}    !`),Pn(""),I("list")}catch(le){console.error(le),f?alert("    ."):console.warn("AI Teacher parsing failed (likely due to missing key), falling back to offline regex.")}finally{xt(!1)}}},jn=async V=>{V.preventDefault();const ae=Ds?vr:We.subject;if(!We.name||!ae)return alert("   ");if(!We.stages||We.stages.length===0)return alert("     ");xt(!0);try{let le=We.imageUrl||`https://picsum.photos/seed/${Date.now()}/400`;to&&(le=await Fn.uploadFile(to,"teachers",ge=>De(ge)));const he=`t-${Date.now()}`,ue={id:he,name:We.name,subject:ae,imageUrl:le,whatsapp:Fl.phone,teachingHours:We.teachingHours||"",availability:We.availability||"",bio:We.bio||"",grades:We.grades||[],stages:We.stages||[]};o(ge=>[...ge,ue]),We.grades&&We.grades.length>0&&e(ge=>ge.map(ye=>{var Ce;return(Ce=We.grades)!=null&&Ce.includes(ye.id)?{...ye,teachers:Array.from(new Set([...ye.teachers,he]))}:ye})),alert("      !"),I("list"),Un()}catch(le){console.error(le),alert("    ")}finally{xt(!1),De(0)}},Un=()=>{Et({name:"",subject:"",bio:"",availability:"",teachingHours:"",imageUrl:"",grades:[],stages:[]}),Rt(null),no(!1),Vi("")},Li=async()=>{var V,ae,le,he;if(!Ze.title)return alert("    ");f||console.warn("Attempting 4K image generation without API Key. This will likely fail."),ki(!0);try{const ye=(le=(ae=(V=(await new op({apiKey:f||""}).models.generateContent({model:"gemini-3-pro-image-preview",contents:{parts:[{text:`High-end 4K cinematic educational course thumbnail for a subject titled "${Ze.title}". 
            Atmosphere: Professional, prestigious, elite academic. 
            Visuals: Dramatic studio lighting, shallow depth of field, sharp textures of books and polished wood, 
            luxurious gold and deep navy blue color palette. 
            Style: Inspirational and modern, suitable for Educators Academy.`}]},config:{imageConfig:{aspectRatio:"16:9",imageSize:"4K"}}})).candidates)==null?void 0:V[0])==null?void 0:ae.content)==null?void 0:le.parts.find(Ce=>Ce.inlineData);if(ye!=null&&ye.inlineData){const Ce=ye.inlineData.data;At(et=>({...et,thumbnailUrl:`data:image/png;base64,${Ce}`}))}else alert("          .")}catch(ue){console.error(ue),alert("   (   API )."),(he=ue.message)!=null&&he.includes("Requested entity was not found")}finally{ki(!1)}},ko=async V=>{if(V.preventDefault(),!Ze.title||!Ze.gradeId)return alert("    ");xt(!0);try{let ae=Ze.thumbnailUrl||"";on&&(ae=await Fn.uploadFile(on,"courses/thumbs",ge=>De(ge)));const le=t.find(ge=>ge.id===Ze.gradeId),he=`c-${Date.now()}`,ue={id:he,title:Ze.title,description:Ze.description||"     ",thumbnailUrl:ae||`https://picsum.photos/seed/${he}/800/400`,stage:le?le.stage:"primary",grade:le?le.name:"",gradeId:Ze.gradeId,media:Ze.videoUrl?[{id:`m-${Date.now()}`,title:" ",url:Ze.videoUrl,type:"video"}]:[]};l(ge=>[...ge,ue]),e(ge=>ge.map(ye=>ye.id===Ze.gradeId?{...ye,courses:Array.from(new Set([...ye.courses,he]))}:ye)),alert("   !"),U("list"),At({title:"",description:"",videoUrl:"",thumbnailUrl:"",gradeId:""}),Qt(null)}catch(ae){console.error(ae)}finally{xt(!1),De(0)}},Ps=V=>{Et(ae=>{const le=ae.stages||[],he=le.includes(V)?le.filter(ye=>ye!==V):[...le,V],ue=t.filter(ye=>he.includes(ye.stage)).map(ye=>ye.id),ge=(ae.grades||[]).filter(ye=>ue.includes(ye));return{...ae,stages:he,grades:ge}})},Si=V=>{Et(ae=>{const le=ae.grades||[],he=le.includes(V)?le.filter(ue=>ue!==V):[...le,V];return{...ae,grades:he}})},Oi=async V=>{xt(!0);try{let ae=V.imageUrl;Dt&&(ae=await Fn.uploadFile(Dt,"teachers",he=>De(he)));const le={...V,imageUrl:ae};o(he=>he.map(ue=>ue.id===le.id?le:ue)),alert("    !"),W(null),ri(null)}catch(ae){console.error(ae),alert("    ")}finally{xt(!1),De(0)}},zt=async()=>{if(!O.trim()||!Dn){alert("     ");return}if(!(k==="gemini"?f:h)){Te(k),ie(!0);return}xt(!0);try{const ae=t.find(ge=>ge.id===Dn),le=ae?`[: ${ae.name}]`:"",he=k==="gemini"?f:h,ue=await xm(`${le} ${O}`,he,k);e(ge=>ge.map(ye=>{if(ye.id===Dn){const et=[...ye.schedule||[]];return ue.forEach(Yn=>{const bi=Yn.day.trim();let pn=et.find(Bi=>Bi.day.trim()===bi);pn||(pn={day:bi,slots:[]},et.push(pn)),Yn.slots.forEach(Bi=>{pn.slots.some(ai=>ai.subject.trim()===Bi.subject.trim()&&ai.time.trim()===Bi.time.trim())||pn.slots.push(Bi)})}),{...ye,schedule:et}}return ye})),alert("   !       "),q("")}catch(ae){console.error("AI Update Error:",ae),alert("        API  .")}finally{xt(!1)}};return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-10",dir:"rtl",children:[Re>0&&T.jsx("div",{className:"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm flex items-center justify-center animate-in fade-in duration-300",children:T.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-2xl text-center max-w-sm w-full mx-4 border border-gray-100 transform scale-100 hover:scale-105 transition-transform",children:[T.jsx("div",{className:"mb-6 text-7xl animate-bounce filter drop-shadow-lg",children:""}),T.jsx("h3",{className:"text-3xl font-black text-[#0a192f] mb-2",children:" ..."}),T.jsx("p",{className:"text-gray-400 font-bold text-sm mb-6",children:"  "}),T.jsx("div",{className:"relative w-full bg-gray-100 rounded-full h-6 mb-4 overflow-hidden inner-shadow",children:T.jsx("div",{className:"bg-gradient-to-r from-[#10b981] to-[#34d399] h-full transition-all duration-300 ease-out shadow-[0_0_15px_rgba(16,185,129,0.5)]",style:{width:`${Re}%`},children:T.jsx("div",{className:"absolute top-0 right-0 bottom-0 left-0 bg-white/20 animate-[shimmer_1s_infinite] skew-x-12"})})}),T.jsxs("p",{className:"text-[#10b981] font-black text-2xl",children:[Math.round(Re),"%"]})]})}),T.jsx(KE,{grades:t,apiKey:f,onUpdateSchedule:async(V,ae)=>{const le=t.find(ge=>ge.id===V),he=le?` ${le.name} (${le.stage})`:"",ue=await xm(`${he} ${ae}`,f);e(ge=>ge.map(ye=>ye.id===V?{...ye,schedule:ue}:ye))},onAddTeacher:Ei,onNavigate:()=>{}}),T.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-10 gap-6 text-right",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("img",{src:$c,alt:"Logo",className:"w-16 h-auto"}),T.jsx("h1",{className:"text-4xl font-black text-[#0a192f]",children:"  "})]}),T.jsxs("div",{className:"flex bg-white rounded-2xl p-1 shadow-lg border overflow-x-auto max-w-full",children:[[{id:"ai-schedule",label:" "},{id:"teachers",label:" "},{id:"subjects",label:" "},{id:"courses",label:" "},{id:"settings",label:" "}].map(V=>T.jsx("button",{onClick:()=>b(V.id),className:`px-5 py-2.5 rounded-xl font-bold transition-all whitespace-nowrap ${E===V.id?"bg-[#0a192f] text-white":"text-gray-500 hover:bg-gray-50"}`,children:V.label},V.id)),T.jsx("button",{onClick:u,className:"px-5 py-2.5 rounded-xl font-bold text-red-500 hover:bg-red-50",children:""})]})]}),E==="ai-schedule"&&T.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl p-10 animate-in fade-in border border-gray-100",children:[T.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[T.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),T.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[T.jsx("button",{onClick:()=>te("ai"),className:`px-6 py-3 rounded-2xl font-black transition-all ${rt==="ai"?"bg-[#10b981] text-white shadow-lg":"bg-white text-gray-500 hover:bg-gray-100"}`,children:"   (AI)"}),T.jsx("button",{onClick:()=>te("manual"),className:`px-6 py-3 rounded-2xl font-black transition-all ${rt==="manual"?"bg-[#0a192f] text-white shadow-lg":"bg-white text-gray-500 hover:bg-gray-100"}`,children:"  "}),T.jsx("button",{onClick:()=>te("ramadan"),className:`px-6 py-3 rounded-2xl font-black transition-all ${rt==="ramadan"?"bg-[#f97316] text-white shadow-lg":"bg-white text-gray-500 hover:bg-gray-100"}`,children:"  "})]})]}),rt==="ai"&&T.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4",children:[T.jsx("div",{className:"flex gap-4 mb-8 overflow-x-auto pb-2",children:[{id:"gemini",name:"Gemini 1.5 Pro",icon:"",premium:!0,provider:"gemini"},{id:"claude",name:"Claude 3.5 Sonnet",icon:"",premium:!0,provider:"claude"},{id:"offline",name:"Local Intelligence",icon:"",premium:!1,provider:"offline"}].map(V=>T.jsxs("button",{onClick:()=>{V.id!=="offline"&&(Me(V.provider),(V.provider==="gemini"?f:h)||(Te(V.provider),ie(!0)))},className:`flex items-center gap-3 px-6 py-4 rounded-2xl border-2 transition-all min-w-[200px] ${k===V.provider&&V.id!=="offline"?"border-[#10b981] bg-[#0a192f] text-white shadow-lg scale-105":"border-[#0a192f] bg-white text-[#0a192f] hover:bg-gray-50"}`,children:[T.jsx("span",{className:"text-2xl",children:V.icon}),T.jsxs("div",{className:"text-right",children:[T.jsx("p",{className:"font-black text-sm",children:V.name}),T.jsx("p",{className:"text-xs opacity-75 font-bold",children:V.premium?f?"  ":" API ":"   "})]})]},V.id))}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[T.jsxs("div",{className:"md:col-span-1",children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-3",children:"  :"}),T.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2 custom-scrollbar",children:t.map(V=>T.jsx("button",{onClick:()=>eo(V.id),className:`w-full text-right p-4 rounded-2xl font-bold transition-all border-2 ${Dn===V.id?"bg-[#0a192f] text-white border-[#0a192f]":"bg-gray-50 text-gray-500 border-transparent hover:border-gray-200"}`,children:V.name},V.id))})]}),T.jsxs("div",{className:"md:col-span-2 space-y-6",children:[T.jsx("textarea",{value:O,onChange:V=>q(V.target.value),className:"w-full border-2 rounded-[2rem] p-8 h-64 outline-none font-bold text-xl leading-relaxed shadow-inner bg-gray-50 focus:border-[#10b981] transition-all",placeholder:"    .. :  4     6  ..."}),T.jsx("button",{onClick:zt,disabled:$t,className:"w-full bg-[#0a192f] text-white py-6 rounded-[2.5rem] font-black text-2xl shadow-2xl hover:bg-[#10b981] transition-all active:scale-95 flex items-center justify-center gap-4",children:$t?T.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"}):"   "})]})]})]}),rt==="manual"&&T.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 space-y-8",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-3",children:"   :"}),T.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:t.map(V=>T.jsx("button",{onClick:()=>Ee(V.id),className:`px-6 py-3 rounded-xl font-bold transition-all border-2 min-w-fit ${me===V.id?"bg-[#0a192f] text-white border-[#0a192f] shadow-lg scale-105":"bg-white text-gray-500 border-gray-100 hover:border-gray-200"}`,children:V.name},V.id))})]}),me?T.jsxs("div",{className:"bg-gray-50 rounded-[2.5rem] p-6 border border-gray-200",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-xl font-black text-[#0a192f]",children:"   "}),T.jsxs("button",{onClick:()=>{e(V=>V.map(ae=>ae.id===me?{...ae,schedule:Oe}:ae)),alert("   ! ")},className:"bg-[#10b981] text-white px-8 py-3 rounded-xl font-black shadow-lg hover:bg-emerald-600 transition-all active:scale-95 flex items-center gap-2",children:[T.jsx("span",{children:""}),"  "]})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["","","","","",""].map(V=>{const ae=Oe.find(le=>le.day===V)||{slots:[]};return T.jsxs("div",{className:"bg-white p-5 rounded-3xl shadow-sm border border-gray-100 hover:border-[#0a192f]/20 transition-all",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[T.jsx("h4",{className:"font-black text-lg text-[#0a192f]",children:V}),T.jsx("button",{onClick:()=>{const le={id:`s-${Date.now()}-${Math.random()}`,subject:"",time:"",color:"bg-blue-500",teacherId:""},he=[...Oe],ue=he.findIndex(ge=>ge.day===V);ue>=0?he[ue].slots.push(le):he.push({day:V,slots:[le]}),je(he)},className:"w-8 h-8 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center font-black hover:bg-blue-100 transition-all",title:" ",children:"+"})]}),T.jsxs("div",{className:"space-y-3",children:[ae.slots.map((le,he)=>T.jsxs("div",{className:"bg-gray-50 p-3 rounded-2xl border border-gray-200 group relative",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsxs("select",{value:le.subject,onChange:ue=>{const ge=[...Oe],ye=ge.findIndex(Ce=>Ce.day===V);ge[ye].slots[he].subject=ue.target.value,je(ge)},className:"w-full bg-white border border-gray-200 rounded-lg p-2 text-sm font-bold outline-none focus:border-[#0a192f]",children:[T.jsx("option",{value:"",children:" ..."}),bn.map(ue=>T.jsx("option",{value:ue,children:ue},ue))]}),T.jsx(XT,{value:le.time,onChange:ue=>{const ge=[...Oe],ye=ge.findIndex(Ce=>Ce.day===V);ge[ye].slots[he].time=ue,je(ge)}})]}),T.jsx("button",{onClick:()=>{const ue=[...Oe],ge=ue.findIndex(ye=>ye.day===V);ue[ge].slots=ue[ge].slots.filter(ye=>ye.id!==le.id),je(ue)},className:"absolute -top-2 -left-2 w-6 h-6 bg-red-100 text-red-500 rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-all font-black shadow-sm hover:bg-red-500 hover:text-white",children:""})]},le.id)),ae.slots.length===0&&T.jsx("p",{className:"text-center text-gray-300 text-xs font-bold py-4",children:"  "})]})]},V)})})]}):T.jsx("div",{className:"text-center py-20 bg-gray-50 rounded-[2.5rem] border-2 border-dashed border-gray-200",children:T.jsx("p",{className:"text-gray-400 font-bold text-xl",children:"       "})})]}),rt==="ramadan"&&T.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 space-y-8",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-3",children:"    :"}),T.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 custom-scrollbar",children:t.map(V=>T.jsx("button",{onClick:()=>Ht(V.id),className:`px-6 py-3 rounded-xl font-bold transition-all border-2 min-w-fit ${Be===V.id?"bg-[#f97316] text-white border-[#f97316] shadow-lg scale-105":"bg-white text-gray-500 border-gray-100 hover:border-gray-200"}`,children:V.name},V.id))})]}),Be?T.jsxs("div",{className:"bg-orange-50/50 rounded-[2.5rem] p-6 border border-orange-100",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-xl font-black text-[#f97316]",children:"   "}),T.jsxs("button",{onClick:()=>{e(V=>V.map(ae=>ae.id===Be?{...ae,ramadanSchedule:lt}:ae)),alert("    ! ")},className:"bg-[#f97316] text-white px-8 py-3 rounded-xl font-black shadow-lg hover:bg-orange-600 transition-all active:scale-95 flex items-center gap-2",children:[T.jsx("span",{children:""}),"   "]})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["","","","","",""].map(V=>{const ae=lt.find(le=>le.day===V)||{slots:[]};return T.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-gray-100",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-100 pb-2",children:[T.jsxs("h4",{className:"font-black text-lg text-[#0a192f] flex items-center gap-2",children:[T.jsx("span",{className:"text-[#f97316]",children:""})," ",V]}),T.jsx("button",{onClick:()=>{const le={id:`s-${Date.now()}`,subject:" ",time:"09:00 ",color:"bg-orange-100 text-orange-800",icon:""},he=[...lt],ue=he.findIndex(ge=>ge.day===V);ue>=0?he[ue].slots.push(le):he.push({day:V,slots:[le]}),mn(he)},className:"bg-gray-50 text-[#f97316] px-4 py-2 rounded-lg text-sm font-bold hover:bg-orange-50 transition-colors",children:"+  "})]}),T.jsx("div",{className:"space-y-3",children:ae.slots.length===0?T.jsx("p",{className:"text-gray-300 text-sm text-center py-4 italic",children:"     "}):ae.slots.map((le,he)=>T.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-gray-50 p-3 rounded-xl border border-gray-100 group hover:border-[#f97316]/30 transition-colors",children:[T.jsx("div",{className:"flex-1 min-w-[150px]",children:T.jsxs("select",{value:le.subject,onChange:ue=>{const ge=[...lt],ye=ge.findIndex(Ce=>Ce.day===V);ge[ye].slots[he].subject=ue.target.value,mn(ge)},className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm font-bold focus:border-[#f97316] outline-none",children:[T.jsx("option",{value:" ",children:" "}),bn.map(ue=>T.jsx("option",{value:ue,children:ue},ue))]})}),T.jsx("div",{className:"w-32",children:T.jsx(XT,{value:le.time,onChange:ue=>{const ge=[...lt],ye=ge.findIndex(Ce=>Ce.day===V);ge[ye].slots[he].time=ue,mn(ge)}})}),T.jsx("button",{onClick:()=>{const ue=[...lt],ge=ue.findIndex(ye=>ye.day===V);ue[ge].slots.splice(he,1),mn(ue)},className:"text-red-400 hover:text-red-600 p-2 opacity-50 group-hover:opacity-100 transition-opacity",title:" ",children:""})]},le.id))})]},V)})})]}):T.jsx("div",{className:"text-center py-20 bg-orange-50/30 rounded-[2.5rem] border-2 border-dashed border-orange-100/50",children:T.jsx("p",{className:"text-gray-400 font-bold text-xl",children:"      "})})]})]}),E==="teachers"&&T.jsxs("div",{className:"animate-in fade-in text-right",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8 border-b pb-4",children:[T.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"  "}),T.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[T.jsx("button",{onClick:()=>I("list"),className:`px-4 py-2 rounded-lg font-bold ${w==="list"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:""}),T.jsx("button",{onClick:()=>I("add"),className:`px-4 py-2 rounded-lg font-bold ${w==="add"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:" "}),T.jsx("button",{onClick:()=>I("ai-add"),className:`px-4 py-2 rounded-lg font-bold ${w==="ai-add"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:"  "})]})]}),w==="ai-add"&&T.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-xl space-y-8 max-w-2xl mx-auto border-t-8 border-[#10b981]",children:[T.jsx("h3",{className:"text-2xl font-black text-[#0a192f] text-center",children:"    "}),T.jsx("textarea",{value:Pi,onChange:V=>Pn(V.target.value),className:"w-full border-2 rounded-2xl p-6 h-64 focus:border-[#10b981] outline-none font-bold text-lg shadow-inner bg-gray-50",placeholder:"    (:     1  2 )..."}),T.jsx("button",{onClick:()=>Ei(),disabled:$t||!Pi.trim(),className:"w-full bg-[#0a192f] text-white py-5 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all active:scale-95",children:$t?"  ...":"   "})]}),w==="add"&&T.jsxs("form",{onSubmit:jn,className:"bg-white p-8 rounded-[2.5rem] shadow-xl space-y-8 max-w-3xl mx-auto border-t-8 border-[#10b981]",children:[T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("input",{required:!0,placeholder:"",value:We.name,onChange:V=>Et({...We,name:V.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold outline-none focus:border-[#10b981]"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),Ds?T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{autoFocus:!0,required:!0,placeholder:" ",value:vr,onChange:V=>Vi(V.target.value),className:"flex-1 border-2 rounded-xl p-4 font-bold outline-none border-orange-500"}),T.jsx("button",{type:"button",onClick:()=>no(!1),className:"bg-gray-100 px-4 rounded-xl text-gray-400 font-bold",children:""})]}):T.jsxs("select",{required:!0,value:We.subject,onChange:V=>V.target.value==="ADD_NEW"?no(!0):Et({...We,subject:V.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white",children:[T.jsx("option",{value:"",children:" ..."}),bn.map(V=>T.jsx("option",{value:V,children:V},V)),T.jsx("option",{value:"ADD_NEW",className:"text-orange-500 font-black",children:"+  ..."})]})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-4",children:"   :"}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:_s.map(V=>{var ae,le,he,ue,ge;return T.jsxs("div",{className:`p-4 rounded-2xl border-2 transition-all cursor-pointer ${(ae=We.stages)!=null&&ae.includes(V.id)?"bg-[#10b981]/5 border-[#10b981]":"bg-gray-50 border-gray-100"}`,onClick:()=>Ps(V.id),children:[T.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[T.jsx("span",{className:"text-xl",children:V.icon}),T.jsx("span",{className:`font-black ${(le=We.stages)!=null&&le.includes(V.id)?"text-[#10b981]":"text-gray-400"}`,children:V.name}),T.jsx("div",{className:`mr-auto w-5 h-5 rounded-full border-2 flex items-center justify-center ${(he=We.stages)!=null&&he.includes(V.id)?"border-[#10b981] bg-[#10b981]":"border-gray-300"}`,children:((ue=We.stages)==null?void 0:ue.includes(V.id))&&T.jsx("span",{className:"text-white text-[10px]",children:""})})]}),((ge=We.stages)==null?void 0:ge.includes(V.id))&&T.jsx("div",{className:"space-y-1 mt-2 animate-in fade-in zoom-in-95",onClick:ye=>ye.stopPropagation(),children:t.filter(ye=>ye.stage===V.id).map(ye=>{var Ce;return T.jsx("div",{onClick:()=>Si(ye.id),className:`flex items-center gap-2 p-2 rounded-lg text-xs font-bold transition-all ${(Ce=We.grades)!=null&&Ce.includes(ye.id)?"bg-[#10b981] text-white":"bg-white border text-gray-400"}`,children:ye.name},ye.id)})})]},V.id)})})]}),T.jsxs("div",{className:"border-2 border-dashed rounded-2xl p-8 text-center bg-gray-50 hover:bg-gray-100 transition-all cursor-pointer relative group",children:[T.jsx("input",{type:"file",accept:"image/*",onChange:V=>{var ae;return Rt(((ae=V.target.files)==null?void 0:ae[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),T.jsxs("div",{className:"flex flex-col items-center",children:[T.jsx("span",{className:"text-4xl mb-2",children:""}),T.jsx("p",{className:"text-gray-400 font-bold",children:to?`  : ${to.name}`:"    "})]})]}),T.jsx("textarea",{placeholder:" ...",value:We.bio,onChange:V=>Et({...We,bio:V.target.value}),className:"w-full border-2 rounded-xl p-4 h-32 font-bold focus:border-[#10b981] outline-none"}),T.jsx("button",{disabled:$t,className:"w-full bg-[#10b981] text-white py-5 rounded-2xl font-black text-xl shadow-xl shadow-emerald-500/20 active:scale-95 transition-all",children:$t?" ...":"  "})]}),w==="list"&&T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(V=>{var ae;return T.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] shadow-md border border-gray-100 group hover:border-[#10b981] transition-all flex flex-col",children:[T.jsx("img",{src:V.imageUrl,className:"w-32 h-32 rounded-[2rem] object-cover mx-auto mb-4 border-4 border-gray-50 shadow-sm"}),T.jsx("h3",{className:"text-2xl font-black text-center text-[#0a192f]",children:V.name}),T.jsx("p",{className:"text-[#10b981] font-bold text-center mb-6",children:V.subject}),T.jsx("div",{className:"flex flex-wrap gap-1 justify-center mb-4",children:(ae=V.grades)==null?void 0:ae.map(le=>{const he=t.find(ue=>ue.id===le);return he?T.jsx("span",{className:"bg-gray-100 text-gray-600 text-[10px] px-2 py-1 rounded-full font-bold border border-gray-200",children:he.name},le):null})}),T.jsxs("div",{className:"flex gap-2 mt-auto",children:[T.jsx("button",{onClick:()=>W(V),className:"flex-1 bg-gray-50 text-gray-600 py-3 rounded-xl font-bold hover:bg-[#10b981] hover:text-white transition-all",children:" "}),T.jsx("button",{onClick:()=>se(V),className:"bg-red-50 p-3 rounded-xl text-red-500 hover:bg-red-500 hover:text-white transition-all",children:""})]})]},V.id)})})]}),E==="courses"&&T.jsxs("div",{className:"animate-in fade-in text-right",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8 border-b pb-4",children:[T.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"   "}),T.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[T.jsx("button",{onClick:()=>U("list"),className:`px-4 py-2 rounded-lg font-bold ${L==="list"?"bg-white shadow text-[#f97316]":"text-gray-400"}`,children:""}),T.jsx("button",{onClick:()=>U("add"),className:`px-4 py-2 rounded-lg font-bold ${L==="add"?"bg-white shadow text-[#f97316]":"text-gray-400"}`,children:"  "})]})]}),L==="add"&&T.jsxs("form",{onSubmit:ko,className:"bg-white p-10 rounded-[2.5rem] shadow-xl space-y-8 max-w-2xl mx-auto border-t-8 border-[#f97316]",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("input",{required:!0,placeholder:" ",value:Ze.title,onChange:V=>At({...Ze,title:V.target.value}),className:"w-full border-2 rounded-2xl p-5 font-black text-2xl focus:border-[#f97316] outline-none"})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.jsxs("button",{type:"button",onClick:Li,disabled:Ui||!Ze.title,className:"bg-[#0a192f] text-white p-5 rounded-2xl font-black flex items-center justify-center gap-3 hover:bg-black group transition-all active:scale-95 shadow-xl",children:[Ui?T.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):T.jsx("span",{className:"text-2xl group-hover:rotate-12 transition-transform",children:""}),Ui?"  4K...":"  4K"]}),T.jsxs("div",{className:"relative h-full",children:[T.jsx("input",{type:"file",accept:"image/*",onChange:V=>{var ae;return Qt(((ae=V.target.files)==null?void 0:ae[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),T.jsx("div",{className:"bg-orange-50 border-2 border-dashed border-orange-200 rounded-2xl p-5 text-center font-bold text-orange-600 h-full flex items-center justify-center",children:on?` ${on.name}`:"   "})]})]}),T.jsx("input",{type:"text",placeholder:"     ...",value:Ze.thumbnailUrl,onChange:V=>At({...Ze,thumbnailUrl:V.target.value}),className:"w-full bg-gray-50 border-2 border-gray-100 rounded-xl p-3 font-bold text-sm focus:border-[#f97316] outline-none text-left",dir:"ltr"}),Ze.thumbnailUrl&&T.jsx("img",{src:Ze.thumbnailUrl,className:"w-full h-56 object-cover rounded-[2rem] border-4 border-white shadow-xl animate-in zoom-in"})]}),T.jsxs("select",{required:!0,value:Ze.gradeId,onChange:V=>At({...Ze,gradeId:V.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white focus:border-[#f97316] outline-none",children:[T.jsx("option",{value:"",children:"  ..."}),t.map(V=>T.jsx("option",{value:V.id,children:V.name},V.id))]}),T.jsx("textarea",{placeholder:"  ...",value:Ze.description,onChange:V=>At({...Ze,description:V.target.value}),className:"w-full border-2 rounded-2xl p-4 h-32 font-bold focus:border-[#f97316] outline-none"}),T.jsx("button",{disabled:$t,className:"w-full bg-[#f97316] text-white py-6 rounded-[2rem] font-black text-2xl shadow-2xl hover:bg-orange-600 transition-all active:scale-95 shadow-orange-500/20",children:$t?" ...":"    "})]}),L==="list"&&T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(V=>T.jsxs("div",{className:"bg-white rounded-[3rem] shadow-xl border border-gray-100 overflow-hidden group flex flex-col hover:-translate-y-2 transition-all duration-500",children:[T.jsx("img",{src:V.thumbnailUrl,className:"w-full h-56 object-cover group-hover:scale-105 transition-transform duration-1000"}),T.jsxs("div",{className:"p-8 flex-1 flex flex-col",children:[T.jsx("h3",{className:"text-2xl font-black mb-2 text-[#0a192f]",children:V.title}),T.jsx("p",{className:"text-gray-400 font-bold text-sm mb-6",children:V.grade}),T.jsxs("div",{className:"flex gap-2 mt-auto",children:[T.jsx("button",{onClick:()=>X(V),className:"flex-1 bg-gray-50 text-[#0a192f] py-4 rounded-2xl font-black hover:bg-[#0a192f] hover:text-white transition-all shadow-sm",children:"  "}),T.jsx("button",{onClick:async()=>{if(confirm("    "))try{await Fn.deleteCourse(V.id),l(ae=>ae.filter(le=>le.id!==V.id)),e(ae=>ae.map(le=>({...le,courses:le.courses.filter(he=>he!==V.id)})))}catch(ae){console.error(ae),alert("    ")}},className:"bg-red-50 p-4 rounded-2xl text-red-500 hover:bg-red-500 hover:text-white transition-all",children:""})]})]})]},V.id))})]}),j&&T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:T.jsxs("form",{onSubmit:V=>{V.preventDefault(),Oi(j)},className:"bg-white w-full max-w-4xl rounded-[2.5rem] p-8 md:p-12 shadow-2xl overflow-y-auto max-h-[90vh] animate-in zoom-in-95 border-t-8 border-[#10b981]",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8",children:[T.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),T.jsx("button",{type:"button",onClick:()=>W(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 hover:bg-red-100 hover:text-red-500 transition-all font-black",children:""})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"text-center",children:[T.jsxs("div",{className:"relative inline-block group cursor-pointer",children:[T.jsx("img",{src:j.imageUrl,alt:j.name,className:"w-40 h-40 rounded-[2.5rem] object-cover border-4 border-[#10b981] shadow-xl group-hover:brightness-75 transition-all"}),T.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:T.jsx("span",{className:"text-white text-3xl",children:""})}),T.jsx("input",{type:"file",accept:"image/*",onChange:V=>{var ae;return ri(((ae=V.target.files)==null?void 0:ae[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer"})]}),T.jsx("p",{className:"text-sm font-bold text-gray-400 mt-2",children:"  "}),T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2 mt-4 text-right",children:"  ():"}),T.jsx("input",{type:"text",placeholder:"https://i.ibb.co/.../image.jpg",value:j.imageUrl||"",onChange:V=>W({...j,imageUrl:V.target.value}),className:"w-full bg-gray-50 border-2 border-gray-100 rounded-xl p-3 font-bold text-sm focus:border-[#10b981] outline-none text-left",dir:"ltr"}),T.jsx("p",{className:"text-xs text-gray-400 mt-1 text-right",children:"   (Direct Link)  ImgBB  ."})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:":"}),T.jsx("input",{required:!0,value:j.name,onChange:V=>W({...j,name:V.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold outline-none focus:border-[#10b981]"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:":"}),T.jsx("select",{required:!0,value:j.subject,onChange:V=>W({...j,subject:V.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white",children:bn.map(V=>T.jsx("option",{value:V,children:V},V))})]})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:"  (Bio):"}),T.jsxs("div",{className:"relative",children:[T.jsx("textarea",{value:j.bio,onChange:V=>W({...j,bio:V.target.value}),className:"w-full border-2 rounded-xl p-4 h-40 font-bold focus:border-[#10b981] outline-none resize-none"}),T.jsx("button",{type:"button",onClick:async()=>{if(!j.bio)return alert("       .");xt(!0);try{await new Promise(V=>setTimeout(V,1500)),W({...j,bio:"   : "+j.bio})}catch(V){console.error(V),alert("      .    API.")}finally{xt(!1)}},className:"absolute bottom-4 left-4 bg-[#0a192f] text-white text-xs px-3 py-1.5 rounded-lg font-bold flex items-center gap-1 hover:bg-[#10b981] transition-all",disabled:$t,children:$t?"...":"  "})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:_s.map(V=>{var ae;return T.jsx("button",{type:"button",onClick:()=>{const le=j.stages||[],he=le.includes(V.id)?le.filter(ue=>ue!==V.id):[...le,V.id];W({...j,stages:he})},className:`px-3 py-1.5 rounded-lg text-sm font-bold border-2 transition-all ${(ae=j.stages)!=null&&ae.includes(V.id)?"bg-[#10b981] text-white border-[#10b981]":"bg-gray-50 text-gray-400 border-gray-100"}`,children:V.name},V.id)})})]})]})]}),T.jsxs("div",{className:"mb-8 border-t pt-8",children:[T.jsx("h3",{className:"text-xl font-black text-[#0a192f] mb-6",children:"  (/) "}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:[t.filter(V=>{var ae;return(ae=j.stages)==null?void 0:ae.includes(V.stage)}).map(V=>{var le,he;const ae=(le=j.grades)==null?void 0:le.includes(V.id);return T.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all ${ae?"border-[#10b981] bg-[#10b981]/5":"border-gray-100 bg-gray-50"}`,children:[T.jsx("div",{className:"flex items-center justify-between gap-2 mb-3",children:T.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[T.jsx("input",{type:"checkbox",checked:ae,onChange:()=>{const ue=j.grades||[],ge=ae?ue.filter(ye=>ye!==V.id):[...ue,V.id];W({...j,grades:ge})},className:"w-5 h-5 accent-[#10b981] rounded-md"}),T.jsx("span",{className:`font-bold text-sm ${ae?"text-[#0a192f]":"text-gray-400"}`,children:V.name})]})}),ae&&T.jsx("div",{className:"animate-in slide-in-from-top-2",children:T.jsx("input",{type:"number",placeholder:" ",value:((he=j.hourlyRates)==null?void 0:he[V.id])||"",onChange:ue=>{const ge={...j.hourlyRates||{}};ge[V.id]=parseFloat(ue.target.value),W({...j,hourlyRates:ge})},className:"w-full border rounded-lg p-2 text-sm font-bold focus:border-[#10b981] outline-none"})})]},V.id)}),t.filter(V=>{var ae;return(ae=j.stages)==null?void 0:ae.includes(V.stage)}).length===0&&T.jsx("p",{className:"text-gray-400 font-bold col-span-full text-center py-4",children:"      ."})]})]}),T.jsx("button",{type:"submit",disabled:$t,className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all shadow-xl active:scale-95 flex items-center justify-center gap-2",children:$t?T.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):T.jsx("span",{children:"  "})})]})}),z&&T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:T.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-[2.5rem] p-8 md:p-12 shadow-2xl overflow-y-auto max-h-[90vh] animate-in zoom-in-95 border-t-8 border-[#f97316]",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8",children:[T.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),T.jsx("button",{onClick:()=>X(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 hover:bg-red-100 hover:text-red-500 transition-all font-black",children:""})]}),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full overflow-hidden",children:[T.jsxs("div",{className:"lg:col-span-8 flex flex-col h-full overflow-hidden bg-gray-50 rounded-[2.5rem] p-8 border border-gray-100 shadow-inner",children:[T.jsxs("div",{className:"flex items-center justify-between mb-8",children:[T.jsx("h3",{className:"font-black text-2xl text-[#0a192f]",children:"   "}),T.jsxs("div",{className:"flex gap-3",children:[T.jsxs("button",{onClick:()=>{const V={id:`m-${Date.now()}`,title:" ",url:"",type:"video"};X({...z,media:[...z.media,V]})},className:"bg-blue-100 text-blue-600 px-6 py-3 rounded-2xl font-black hover:bg-blue-500 hover:text-white transition-all flex items-center gap-2",children:[T.jsx("span",{children:"+"})," "]}),T.jsxs("button",{onClick:()=>{const V={id:`m-${Date.now()}`,title:" PDF ",url:"",type:"pdf"};X({...z,media:[...z.media,V]})},className:"bg-red-100 text-red-500 px-6 py-3 rounded-2xl font-black hover:bg-red-500 hover:text-white transition-all flex items-center gap-2",children:[T.jsx("span",{children:"+"}),"  PDF"]}),T.jsxs("button",{onClick:()=>{const V={id:`m-${Date.now()}`,title:" ",url:"",type:"image"};X({...z,media:[...z.media,V]})},className:"bg-green-100 text-green-600 px-6 py-3 rounded-2xl font-black hover:bg-green-500 hover:text-white transition-all flex items-center gap-2",children:[T.jsx("span",{children:"+"})," "]})]})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-4 pr-2",children:[z.media.map((V,ae)=>T.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 flex items-start gap-4 group hover:border-[#f97316] transition-all",children:[T.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gray-50 flex items-center justify-center text-3xl shrink-0",children:V.type==="video"?"":V.type==="pdf"?"":""}),T.jsxs("div",{className:"flex-1 space-y-3",children:[T.jsx("input",{placeholder:"  (:  )",value:V.title,onChange:le=>{const he=z.media.map(ue=>ue.id===V.id?{...ue,title:le.target.value}:ue);X({...z,media:he})},className:"w-full bg-[#334155] text-white placeholder-gray-400 p-3 rounded-xl font-bold text-sm outline-none border border-transparent focus:border-orange-500 transition-all"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{placeholder:V.type==="video"?"  (YouTube/)":" ",value:V.url,onChange:le=>{const he=z.media.map(ue=>ue.id===V.id?{...ue,url:le.target.value}:ue);X({...z,media:he})},className:"flex-1 bg-[#334155] text-white placeholder-gray-400 p-3 rounded-xl font-bold text-xs outline-none border border-transparent focus:border-orange-500 transition-all text-left",dir:"ltr"}),T.jsxs("div",{className:"relative overflow-hidden",children:[T.jsx("button",{className:"bg-gray-200 text-gray-600 px-4 py-3 rounded-xl font-bold text-xs hover:bg-gray-300 transition-all whitespace-nowrap",children:"  "}),T.jsx("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:async le=>{var ue;const he=(ue=le.target.files)==null?void 0:ue[0];if(he){xt(!0);try{const ge=await Fn.uploadFile(he,`courses/media/${z.id}`),ye=z.media.map(Ce=>Ce.id===V.id?{...Ce,url:ge}:Ce);X({...z,media:ye})}catch(ge){console.error(ge)}finally{xt(!1)}}}})]})]})]}),T.jsx("button",{onClick:()=>{if(confirm("  ")){const le=z.media.filter(he=>he.id!==V.id);X({...z,media:le})}},className:"w-10 h-10 bg-red-50 text-red-500 rounded-xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all self-center",children:""})]},V.id)),z.media.length===0&&T.jsx("div",{className:"text-center py-20 opacity-50",children:T.jsx("p",{className:"font-bold text-xl",children:"     "})})]})]}),T.jsxs("div",{className:"lg:col-span-4 space-y-6 overflow-y-auto custom-scrollbar",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("input",{value:z.title,onChange:V=>X({...z,title:V.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 font-black text-lg focus:ring-2 focus:ring-[#f97316] outline-none"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("textarea",{value:z.description,onChange:V=>X({...z,description:V.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 h-32 font-bold focus:ring-2 focus:ring-[#f97316] outline-none resize-none"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),T.jsx("select",{value:z.gradeId,onChange:V=>X({...z,gradeId:V.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 font-bold focus:ring-2 focus:ring-[#f97316] outline-none",children:t.map(V=>T.jsx("option",{value:V.id,children:V.name},V.id))})]}),T.jsxs("div",{className:"relative group cursor-pointer rounded-[2rem] overflow-hidden border-4 border-[#334155] hover:border-[#f97316] transition-all shadow-xl h-48",children:[T.jsx("img",{src:z.thumbnailUrl,className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-all",children:T.jsx("span",{className:"text-white font-black",children:"  "})}),T.jsx("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:async V=>{var le;const ae=(le=V.target.files)==null?void 0:le[0];if(ae){xt(!0);try{const he=await Fn.uploadFile(ae,"course-thumbnails");X({...z,thumbnailUrl:he})}catch{alert("    ")}finally{xt(!1)}}}})]}),T.jsx("input",{type:"text",placeholder:"     ...",value:z.thumbnailUrl,onChange:V=>X({...z,thumbnailUrl:V.target.value}),className:"w-full bg-[#334155] text-white border-2 border-[#1e293b] rounded-xl p-3 font-bold text-sm focus:border-[#f97316] outline-none text-left",dir:"ltr"}),T.jsx("button",{onClick:async()=>{xt(!0);try{const V=r.map(le=>le.id===z.id?z:le),ae=r.find(le=>le.id===z.id);ae&&ae.gradeId!==z.gradeId&&e(le=>le.map(he=>he.id===ae.gradeId?{...he,courses:he.courses.filter(ue=>ue!==z.id)}:he.id===z.gradeId?{...he,courses:Array.from(new Set([...he.courses,z.id]))}:he)),l(V),alert("  ! "),X(null)}catch(V){console.error(V)}finally{xt(!1)}},disabled:$t,className:"w-full bg-[#f97316] text-white py-4 rounded-2xl font-black text-xl hover:bg-orange-600 transition-all shadow-xl active:scale-95",children:$t?" ...":"  "})]})]})]})}),G&&T.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 text-center shadow-2xl border-t-8 border-red-500 animate-in zoom-in-95",children:[T.jsx("div",{className:"text-6xl mb-6",children:""}),T.jsx("h3",{className:"text-3xl font-black text-[#0a192f] mb-4",children:" "}),T.jsxs("p",{className:"text-gray-500 text-lg mb-4 font-bold",children:["     ",T.jsxs("span",{className:"text-red-500",children:['"',G.name,'"']})," ."]}),T.jsx("div",{className:"bg-red-50 p-4 rounded-2xl mb-8 border border-red-100",children:T.jsx("p",{className:"text-red-600 font-black text-sm",children:"        ."})}),T.jsxs("div",{className:"flex flex-col gap-3",children:[T.jsx("button",{onClick:async()=>{try{const V=r.filter(le=>le.teacherId===G.id);await Promise.all(V.map(le=>Fn.deleteCourse(le.id))),await Fn.deleteTeacher(G.id);const ae=G.id;o(le=>le.filter(he=>he.id!==ae)),l(le=>le.filter(he=>he.teacherId!==ae)),e(le=>le.map(he=>({...he,teachers:he.teachers.filter(ue=>ue!==ae)}))),se(null),alert(`   "${G.name}" .`)}catch(V){console.error(V),alert("       .")}},className:"w-full bg-red-500 text-white py-5 rounded-2xl font-black text-xl hover:bg-red-600 transition-all active:scale-95 shadow-xl shadow-red-500/20",children:"   "}),T.jsx("button",{onClick:()=>se(null),className:"w-full bg-gray-100 text-gray-500 py-4 rounded-2xl font-black text-lg hover:bg-gray-200 transition-all",children:" "})]})]})}),E==="subjects"&&T.jsxs("div",{className:"animate-in fade-in space-y-8",children:[T.jsxs("div",{className:"flex justify-between items-center border-b pb-6",children:[T.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),T.jsxs("div",{className:"bg-orange-50 text-orange-600 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2",children:[T.jsx("span",{children:""}),"        "]})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:D.map((V,ae)=>{var le,he;return T.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 shadow-xl border border-gray-100 hover:border-[#10b981] transition-all group",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[T.jsx("div",{className:"w-16 h-16 rounded-2xl bg-[#0a192f] text-white flex items-center justify-center text-3xl shadow-lg group-hover:scale-110 transition-transform",children:(le=_s.find(ue=>ue.id===V.stage))==null?void 0:le.icon}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-2xl font-black text-[#0a192f]",children:(he=_s.find(ue=>ue.id===V.stage))==null?void 0:he.name}),T.jsxs("p",{className:"text-gray-400 font-bold text-sm",children:[V.subjects.length,"  "]})]})]}),T.jsxs("div",{className:"flex flex-wrap gap-3",children:[V.subjects.map((ue,ge)=>T.jsx("span",{className:"bg-gray-50 text-gray-600 px-4 py-2 rounded-xl font-bold border hover:bg-[#10b981] hover:text-white hover:border-[#10b981] transition-colors cursor-default",children:ue},ge)),T.jsx("button",{onClick:()=>{const ue=prompt("   :");if(ue){const ge=[...D];ge[ae].subjects.push(ue),N(ge)}},className:"bg-gray-100 text-gray-400 px-4 py-2 rounded-xl font-bold border-2 border-dashed border-gray-200 hover:border-[#10b981] hover:text-[#10b981] transition-all",children:"+ "})]})]},ae)})})]}),E==="settings"&&T.jsx("div",{className:"animate-in fade-in max-w-2xl mx-auto space-y-8",children:T.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-xl border border-gray-100",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[T.jsx("span",{className:"text-4xl",children:""}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"  "}),T.jsx("p",{className:"text-gray-400 font-bold text-sm",children:"   Google Sheets"})]})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2",children:" Webhook (Google Apps Script):"}),T.jsx("input",{type:"url",value:si,onChange:V=>Ma(V.target.value),placeholder:"https://script.google.com/macros/s/...",className:"w-full border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#10b981] transition-colors",dir:"ltr"}),T.jsxs("p",{className:"text-xs text-gray-400 mt-2 font-bold leading-relaxed",children:['*   Google Apps Script    Web App  "Anyone".',T.jsx("br",{}),"*     (     )       ."]})]}),T.jsxs("div",{className:"bg-blue-50 p-6 rounded-2xl border border-blue-100",children:[T.jsx("h4",{className:"font-black text-blue-800 mb-2 text-sm",children:" :"}),T.jsxs("ol",{className:"list-decimal list-inside text-sm text-blue-700 space-y-1 font-bold",children:[T.jsx("li",{children:"   ."}),T.jsxs("li",{children:["  Extensions ",">"," Apps Script."]}),T.jsxs("li",{children:["     ",T.jsx("code",{children:"sheetService.ts"}),"."]}),T.jsxs("li",{children:[" Deploy ",">"," New Deployment."]}),T.jsx("li",{children:" Web app   Access: Anyone."}),T.jsx("li",{children:"    ."})]})]}),T.jsx("div",{className:"flex gap-4 pt-4",children:T.jsx("button",{onClick:()=>{if(!si)return alert("   ");localStorage.setItem("google_sheet_webhook_url",si),alert("   !     .")},className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black hover:bg-[#10b981] transition-all shadow-xl active:scale-95",children:"  "})})]}),T.jsxs("div",{className:"mt-8 border-t pt-8",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[T.jsx("span",{className:"text-4xl",children:""}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"   (API Key)"}),T.jsx("p",{className:"text-gray-400 font-bold text-sm",children:" Gemini AI"})]})]}),T.jsx("div",{className:"space-y-4",children:T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2",children:"Gemini API Key:"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"password",value:f,onChange:V=>{g(V.target.value),localStorage.setItem("gemini_api_key",V.target.value)},placeholder:"AIzaSy...",className:"flex-1 border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#10b981] transition-colors",dir:"ltr"}),f&&T.jsx("button",{onClick:()=>{g(""),localStorage.removeItem("gemini_api_key")},className:"bg-red-50 text-red-500 px-4 rounded-xl font-bold hover:bg-red-100 transition-all",children:""})]}),T.jsxs("p",{className:"text-xs text-gray-400 mt-2 font-bold",children:["*        .",T.jsx("br",{}),"*       ."]})]})})]}),T.jsxs("div",{className:"mt-8 border-t pt-8",children:[T.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[T.jsx("span",{className:"text-4xl",children:""}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"Claude API Key"}),T.jsx("p",{className:"text-gray-400 font-bold text-sm",children:" Anthropic Claude 3.5 Sonnet"})]})]}),T.jsx("div",{className:"space-y-4",children:T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2",children:"Anthropic API Key (sk-ant...):"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"password",value:h,onChange:V=>{_(V.target.value),localStorage.setItem("anthropic_api_key",V.target.value)},placeholder:"sk-ant-api...",className:"flex-1 border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#f97316] transition-colors",dir:"ltr"}),h&&T.jsx("button",{onClick:()=>{_(""),localStorage.removeItem("anthropic_api_key")},className:"bg-red-50 text-red-500 px-4 rounded-xl font-bold hover:bg-red-100 transition-all",children:""})]})]})})]})]})}),H&&T.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:T.jsxs("div",{className:"bg-white rounded-[2rem] p-8 max-w-md w-full shadow-2xl animate-in fade-in zoom-in-95",dir:"rtl",children:[T.jsxs("h3",{className:"text-2xl font-black text-[#0a192f] mb-4",children:[fe==="gemini"?"  Gemini":"  Claude"," "]}),T.jsxs("p",{className:"text-gray-500 mb-6 font-bold",children:["      API   ",fe==="gemini"?"Google Gemini":"Anthropic Claude","."]}),T.jsx("input",{type:"password",placeholder:fe==="gemini"?"AIzaSy...":"sk-ant-api...",className:"w-full border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#10b981] mb-6",autoFocus:!0,dir:"ltr",onChange:V=>{fe==="gemini"?(g(V.target.value),localStorage.setItem("gemini_api_key",V.target.value)):(_(V.target.value),localStorage.setItem("anthropic_api_key",V.target.value))}}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("button",{onClick:()=>ie(!1),className:"flex-1 bg-[#0a192f] text-white py-3 rounded-xl font-black hover:bg-[#10b981] transition-all",children:" "}),T.jsx("button",{onClick:()=>ie(!1),className:"px-6 py-3 rounded-xl font-bold text-gray-500 hover:bg-gray-100",children:""})]})]})})]})},ZV=({teachers:t,onBack:e})=>{const[n,o]=ve.useState("all"),[r,l]=ve.useState(""),[u,f]=ve.useState(null),g=t.filter(h=>{var b;const _=n==="all"||((b=h.stages)==null?void 0:b.includes(n)),E=h.name.toLowerCase().includes(r.toLowerCase())||h.subject.toLowerCase().includes(r.toLowerCase());return _&&E});return T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[u&&T.jsx(ZT,{targetName:u,type:"",onClose:()=>f(null)}),T.jsxs("button",{onClick:e,className:"mb-8 text-gray-400 hover:text-[#0a192f] flex items-center gap-3 font-black text-lg transition-colors group",children:[T.jsx("span",{className:"bg-white p-3 rounded-2xl shadow-sm group-hover:-translate-x-2 transition-transform",children:""}),"  "]}),T.jsxs("div",{className:"text-center mb-16",children:[T.jsx("h1",{className:"text-5xl font-black text-[#0a192f] mb-4",children:"  "}),T.jsx("p",{className:"text-gray-500 text-xl font-medium",children:"      "})]}),T.jsxs("div",{className:"flex flex-col items-center gap-8 mb-16",children:[T.jsxs("div",{className:"relative w-full max-w-2xl group",children:[T.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-2xl group-focus-within:scale-110 transition-transform",children:""}),T.jsx("input",{type:"text",value:r,onChange:h=>l(h.target.value),placeholder:"     ...",className:"w-full bg-white border-2 border-gray-100 rounded-[2rem] py-6 pr-16 pl-8 text-xl font-bold shadow-xl shadow-gray-200/20 focus:border-[#10b981] focus:ring-4 focus:ring-[#10b981]/5 outline-none transition-all placeholder:text-gray-300"})]}),T.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[T.jsx("button",{onClick:()=>o("all"),className:`px-8 py-3 rounded-2xl font-black transition-all ${n==="all"?"bg-[#0a192f] text-white shadow-xl scale-105":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100"}`,children:""}),_s.map(h=>T.jsxs("button",{onClick:()=>o(h.id),className:`px-8 py-3 rounded-2xl font-black transition-all flex items-center gap-2 ${n===h.id?"bg-[#10b981] text-white shadow-xl scale-105":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100"}`,children:[T.jsx("span",{children:h.icon})," ",h.name]},h.id))]})]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:[g.map(h=>T.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 shadow-xl border border-gray-100 hover:border-[#10b981] hover:-translate-y-2 transition-all group flex flex-col h-full",children:[T.jsxs("div",{className:"relative mb-6",children:[T.jsx("img",{src:h.imageUrl,className:"w-32 h-32 rounded-[2rem] mx-auto border-4 border-gray-50 shadow-md group-hover:scale-105 transition-transform object-cover",alt:h.name}),T.jsx("div",{className:"absolute -bottom-2 right-1/2 translate-x-1/2 bg-[#10b981] text-white px-4 py-1 rounded-full text-xs font-black shadow-lg whitespace-nowrap",children:h.subject})]}),T.jsxs("div",{className:"text-center flex-1 flex flex-col",children:[T.jsx("h3",{className:"text-2xl font-black text-[#0a192f] mb-2",children:h.name}),T.jsx("p",{className:"text-gray-400 text-sm font-medium mb-6 line-clamp-3 flex-1",children:h.bio||"   ."}),T.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl text-right space-y-2 mb-6",children:[T.jsx("div",{className:"text-xs font-black text-gray-400",children:" :"}),T.jsx("div",{className:"text-sm font-bold text-[#0a192f]",children:h.availability})]}),T.jsx("button",{onClick:()=>f(h.name),className:"block w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black hover:bg-[#10b981] transition-all shadow-lg active:scale-95",children:" "})]})]},h.id)),g.length===0&&T.jsxs("div",{className:"col-span-full py-20 text-center",children:[T.jsx("div",{className:"text-6xl mb-4",children:""}),T.jsx("h3",{className:"text-2xl font-black text-gray-400",children:"      "}),T.jsx("button",{onClick:()=>{l(""),o("all")},className:"mt-4 text-[#10b981] font-black hover:underline",children:"  "})]})]})]})},eL=()=>{var M;const[t,e]=ve.useState(()=>localStorage.getItem("app_view")||"home"),[n,o]=ve.useState(()=>sessionStorage.getItem("admin_auth")==="true"),[r,l]=ve.useState(""),[u,f]=ve.useState(localStorage.getItem("gemini_api_key")||""),[g,h]=ve.useState(localStorage.getItem("anthropic_api_key")||""),[_,E]=ve.useState(null),[b,w]=ve.useState(null),[I,L]=ve.useState(kA),[U,j]=ve.useState(PA),[W,z]=ve.useState(UA);ve.useEffect(()=>{const P=async()=>{const O=await Fn.loadData();if(O.grades&&L(O.grades.filter(q=>q&&q.id)),O.teachers&&j(O.teachers.filter(q=>q&&q.id)),O.courses&&z(O.courses.filter(q=>q&&q.id)),window.aistudio){const q=await window.aistudio.getKey();q&&(f(q),localStorage.setItem("gemini_api_key",q))}};P(),P()},[]),ve.useEffect(()=>{localStorage.setItem("app_view",t)},[t]),ve.useEffect(()=>{sessionStorage.setItem("admin_auth",n.toString())},[n]);const X=P=>{P.preventDefault(),r==="55"?o(!0):alert("   !")},G=P=>{E(P),e("stages")},se=P=>{const O=I.find(q=>q.id===P);O&&(w(O),e("grade"))},D=async(P,O)=>{try{const q=await xm(O,u),k=I.map(Me=>Me.id===P?{...Me,schedule:q}:Me);L(k),await Fn.saveGrades(k)}catch(q){console.error("Voice Schedule Error:",q)}},N=async P=>{try{const O=await JE(P,u);if(O.length>0){const q=O.map(Me=>({...Me,id:Me.id||`t-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,imageUrl:Me.imageUrl||`https://ui-avatars.com/api/?name=${encodeURIComponent(Me.name||"Teacher")}&background=random`})),k=[...U,...q];j(k),await Fn.saveTeachers(k)}}catch(O){console.error("Voice Teacher Add Error:",O)}};return T.jsxs("div",{className:"min-h-screen pb-20 bg-gray-50 selection:bg-[#10b981] selection:text-white",children:[T.jsx(VA,{onNavigate:P=>{e(P),E(null)},isAdmin:n}),n&&T.jsx(KE,{onUpdateSchedule:D,onAddTeacher:N,onNavigate:P=>{e(P),E(null)},grades:I,apiKey:u}),t==="home"&&T.jsxs("main",{children:[T.jsxs("section",{className:"relative bg-[#0a192f] text-white py-24 md:py-32 overflow-hidden",children:[T.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 flex flex-col items-center text-center",children:[T.jsx("div",{className:"mb-10 animate-in fade-in zoom-in duration-1000",children:T.jsx("img",{src:$c,alt:"Logo",className:"w-48 md:w-64 h-auto drop-shadow-[0_0_30px_rgba(16,185,129,0.3)] mx-auto"})}),T.jsx("div",{className:"inline-block bg-[#10b981]/20 border border-[#10b981]/30 text-[#10b981] px-6 py-2 rounded-full font-black text-sm mb-8 animate-bounce",children:"     2025"}),T.jsxs("h1",{className:"text-5xl md:text-8xl font-black mb-8 leading-tight",children:["Educators Academy",T.jsx("br",{}),T.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#10b981] to-[#34d399]",children:"  "})]}),T.jsx("p",{className:"text-xl md:text-2xl text-gray-300 max-w-3xl mb-12 leading-relaxed font-bold",children:"              ."}),T.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[T.jsx("button",{onClick:()=>e("stages"),className:"bg-[#10b981] px-12 py-5 rounded-2xl font-black text-xl hover:bg-emerald-600 transition-all shadow-2xl shadow-emerald-500/20 active:scale-95",children:"  "}),T.jsx("a",{href:`https://wa.me/20${Fl.phone}`,target:"_blank",className:"bg-white/5 backdrop-blur-xl border border-white/10 px-12 py-5 rounded-2xl font-black text-xl hover:bg-white/10 transition-all active:scale-95",children:" "})]})]}),T.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[#10b981] rounded-full blur-[180px] opacity-20 -mr-64 -mt-64"}),T.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-[#f97316] rounded-full blur-[180px] opacity-10 -ml-64 -mb-64"})]}),T.jsxs("section",{className:"py-24 max-w-7xl mx-auto px-4",children:[T.jsxs("div",{className:"text-right mb-16",children:[T.jsx("h2",{className:"text-5xl font-black mb-4 text-[#0a192f]",children:" "}),T.jsx("div",{className:"h-2 w-32 bg-gradient-to-r from-[#10b981] to-transparent rounded-full"})]}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:_s.map(P=>T.jsxs("div",{onClick:()=>G(P.id),className:"group bg-white p-12 rounded-[3rem] shadow-xl border-2 border-transparent hover:border-[#10b981] hover:-translate-y-3 transition-all cursor-pointer text-center relative overflow-hidden active:scale-95",children:[T.jsx("div",{className:"text-7xl mb-8 relative z-10 group-hover:scale-110 transition-transform duration-500",children:P.icon}),T.jsx("h3",{className:"text-3xl font-black text-[#0a192f] relative z-10",children:P.name})]},P.id))})]})]}),t==="stages"&&T.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-20 animate-in fade-in slide-in-from-bottom-6",children:[T.jsxs("button",{onClick:()=>e("home"),className:"mb-10 text-gray-400 hover:text-[#0a192f] flex items-center gap-3 font-black text-lg transition-colors group",children:[T.jsx("span",{className:"bg-white p-3 rounded-2xl shadow-sm group-hover:-translate-x-2 transition-transform",children:""}),"  "]}),_?T.jsxs("div",{children:[T.jsxs("div",{className:"flex justify-between items-center mb-12",children:[T.jsx("button",{onClick:()=>E(null),className:"text-[#10b981] font-black hover:underline text-xl",children:"  "}),T.jsxs("h2",{className:"text-4xl font-black text-[#0a192f]",children:[" ",(M=_s.find(P=>P.id===_))==null?void 0:M.name]})]}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:I.filter(P=>P.stage===_).map(P=>T.jsx("div",{onClick:()=>se(P.id),className:"bg-white p-10 rounded-[2.5rem] shadow-xl hover:shadow-2xl hover:border-[#10b981] border-2 border-transparent transition-all cursor-pointer text-center group active:scale-95",children:T.jsx("h3",{className:"text-2xl font-black text-[#0a192f] leading-tight",children:P.name})},P.id))})]}):T.jsxs("div",{children:[T.jsx("h2",{className:"text-4xl font-black text-[#0a192f] mb-12 text-right",children:"  "}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:_s.map(P=>T.jsxs("div",{onClick:()=>E(P.id),className:"group bg-white p-12 rounded-[3rem] shadow-xl border-2 border-transparent hover:border-[#10b981] hover:-translate-y-3 transition-all cursor-pointer text-center active:scale-95",children:[T.jsx("div",{className:"text-7xl mb-8",children:P.icon}),T.jsx("h3",{className:"text-3xl font-black text-[#0a192f]",children:P.name})]},P.id))})]})]}),t==="grade"&&b&&T.jsx(OA,{grade:b,teachers:U,courses:W,onBack:()=>e("stages")}),t==="teachers"&&T.jsx(ZV,{teachers:U,onBack:()=>e("home")}),t==="admin"&&(n?T.jsx(WV,{grades:I,setGrades:L,teachers:U,setTeachers:j,courses:W,setCourses:z,onLogout:()=>o(!1),apiKey:u,setApiKey:f,anthropicApiKey:g,setAnthropicApiKey:h}):T.jsx("div",{className:"min-h-[80vh] flex items-center justify-center p-4",children:T.jsxs("form",{onSubmit:X,className:"bg-white p-12 rounded-[3rem] shadow-2xl w-full max-w-md text-center border-t-8 border-[#0a192f]",children:[T.jsx("img",{src:$c,alt:"Logo",className:"w-24 h-auto mx-auto mb-6"}),T.jsx("h2",{className:"text-4xl font-black text-[#0a192f] mb-8",children:"  "}),T.jsx("input",{type:"password",value:r,onChange:P=>l(P.target.value),placeholder:" ",className:"w-full border-2 rounded-2xl p-4 mb-6 font-bold text-center text-lg focus:border-[#10b981] outline-none transition-all"}),T.jsx("button",{type:"submit",className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all shadow-lg active:scale-95",children:"  "})]})}))]})};class tL extends ve.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleReset=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){var e;return this.state.hasError?T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a192f] p-4 text-center font-sans",dir:"rtl",children:T.jsxs("div",{className:"bg-white rounded-[2.5rem] p-10 max-w-lg w-full shadow-2xl animate-in zoom-in duration-300",children:[T.jsx("div",{className:"text-6xl mb-6",children:""}),T.jsx("h1",{className:"text-3xl font-black text-[#0a192f] mb-4",children:"    "}),T.jsx("p",{className:"text-gray-500 font-bold mb-8 text-lg",children:"       ."}),T.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100 mb-8 text-right",children:[T.jsx("p",{className:"text-red-500 font-bold text-sm mb-2",children:"  ():"}),T.jsx("code",{className:"block bg-white p-3 rounded-lg text-xs font-mono text-red-600 overflow-auto max-h-32 border border-red-200",children:(e=this.state.error)==null?void 0:e.toString()})]}),T.jsx("button",{onClick:this.handleReset,className:"w-full bg-[#10b981] text-white py-5 rounded-2xl font-black text-xl hover:bg-emerald-600 transition-all shadow-xl shadow-emerald-500/20 active:scale-95",children:"   (Reset App) "}),T.jsx("p",{className:"mt-4 text-xs text-gray-400 font-bold",children:"*         "})]})}):this.props.children}}const Yb=document.getElementById("root");if(!Yb)throw new Error("Could not find root element to mount to");const nL=MA.createRoot(Yb);nL.render(T.jsx(bA.StrictMode,{children:T.jsx(tL,{children:T.jsx(eL,{})})}));
