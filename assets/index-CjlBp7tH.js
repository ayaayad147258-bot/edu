(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function LT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xh={exports:{}},vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function eC(){if(Qv)return vl;Qv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:t,type:o,key:u,ref:r!==void 0?r:null,props:l}}return vl.Fragment=e,vl.jsx=n,vl.jsxs=n,vl}var Xv;function tC(){return Xv||(Xv=1,xh.exports=eC()),xh.exports}var b=tC(),wh={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function nC(){if(jv)return Ve;jv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=S&&B[S]||B["@@iterator"],typeof B=="function"?B:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,P={};function H(B,ne,ae){this.props=B,this.context=ne,this.refs=P,this.updater=ae||D}H.prototype.isReactComponent={},H.prototype.setState=function(B,ne){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ne,"setState")},H.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=H.prototype;function $(B,ne,ae){this.props=B,this.context=ne,this.refs=P,this.updater=ae||D}var Z=$.prototype=new j;Z.constructor=$,V(Z,H.prototype),Z.isPureReactComponent=!0;var Y=Array.isArray;function re(){}var M={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(B,ne,ae){var ge=ae.ref;return{$$typeof:t,type:B,key:ne,ref:ge!==void 0?ge:null,props:ae}}function k(B,ne){return N(B.type,ne,B.props)}function L(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function q(B){var ne={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ae){return ne[ae]})}var U=/\/+/g;function Oe(B,ne){return typeof B=="object"&&B!==null&&B.key!=null?q(""+B.key):ne.toString(36)}function je(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(re,re):(B.status="pending",B.then(function(ne){B.status==="pending"&&(B.status="fulfilled",B.value=ne)},function(ne){B.status==="pending"&&(B.status="rejected",B.reason=ne)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function te(B,ne,ae,ge,pe){var De=typeof B;(De==="undefined"||De==="boolean")&&(B=null);var qe=!1;if(B===null)qe=!0;else switch(De){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(B.$$typeof){case t:case e:qe=!0;break;case _:return qe=B._init,te(qe(B._payload),ne,ae,ge,pe)}}if(qe)return pe=pe(B),qe=ge===""?"."+Oe(B,0):ge,Y(pe)?(ae="",qe!=null&&(ae=qe.replace(U,"$&/")+"/"),te(pe,ne,ae,"",function(Ln){return Ln})):pe!=null&&(L(pe)&&(pe=k(pe,ae+(pe.key==null||B&&B.key===pe.key?"":(""+pe.key).replace(U,"$&/")+"/")+qe)),ne.push(pe)),1;qe=0;var Vt=ge===""?".":ge+":";if(Y(B))for(var yt=0;yt<B.length;yt++)ge=B[yt],De=Vt+Oe(ge,yt),qe+=te(ge,ne,ae,De,pe);else if(yt=x(B),typeof yt=="function")for(B=yt.call(B),yt=0;!(ge=B.next()).done;)ge=ge.value,De=Vt+Oe(ge,yt++),qe+=te(ge,ne,ae,De,pe);else if(De==="object"){if(typeof B.then=="function")return te(je(B),ne,ae,ge,pe);throw ne=String(B),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return qe}function fe(B,ne,ae){if(B==null)return B;var ge=[],pe=0;return te(B,ge,"","",function(De){return ne.call(ae,De,pe++)}),ge}function ye(B){if(B._status===-1){var ne=B._result;ne=ne(),ne.then(function(ae){(B._status===0||B._status===-1)&&(B._status=1,B._result=ae)},function(ae){(B._status===0||B._status===-1)&&(B._status=2,B._result=ae)}),B._status===-1&&(B._status=0,B._result=ne)}if(B._status===1)return B._result.default;throw B._result}var we=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Re={map:fe,forEach:function(B,ne,ae){fe(B,function(){ne.apply(this,arguments)},ae)},count:function(B){var ne=0;return fe(B,function(){ne++}),ne},toArray:function(B){return fe(B,function(ne){return ne})||[]},only:function(B){if(!L(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Ve.Activity=E,Ve.Children=Re,Ve.Component=H,Ve.Fragment=n,Ve.Profiler=r,Ve.PureComponent=$,Ve.StrictMode=o,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(B){return M.H.useMemoCache(B)}},Ve.cache=function(B){return function(){return B.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(B,ne,ae){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ge=V({},B.props),pe=B.key;if(ne!=null)for(De in ne.key!==void 0&&(pe=""+ne.key),ne)!R.call(ne,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ne.ref===void 0||(ge[De]=ne[De]);var De=arguments.length-2;if(De===1)ge.children=ae;else if(1<De){for(var qe=Array(De),Vt=0;Vt<De;Vt++)qe[Vt]=arguments[Vt+2];ge.children=qe}return N(B.type,pe,ge)},Ve.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},Ve.createElement=function(B,ne,ae){var ge,pe={},De=null;if(ne!=null)for(ge in ne.key!==void 0&&(De=""+ne.key),ne)R.call(ne,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(pe[ge]=ne[ge]);var qe=arguments.length-2;if(qe===1)pe.children=ae;else if(1<qe){for(var Vt=Array(qe),yt=0;yt<qe;yt++)Vt[yt]=arguments[yt+2];pe.children=Vt}if(B&&B.defaultProps)for(ge in qe=B.defaultProps,qe)pe[ge]===void 0&&(pe[ge]=qe[ge]);return N(B,De,pe)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(B){return{$$typeof:d,render:B}},Ve.isValidElement=L,Ve.lazy=function(B){return{$$typeof:_,_payload:{_status:-1,_result:B},_init:ye}},Ve.memo=function(B,ne){return{$$typeof:m,type:B,compare:ne===void 0?null:ne}},Ve.startTransition=function(B){var ne=M.T,ae={};M.T=ae;try{var ge=B(),pe=M.S;pe!==null&&pe(ae,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(re,we)}catch(De){we(De)}finally{ne!==null&&ae.types!==null&&(ne.types=ae.types),M.T=ne}},Ve.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ve.use=function(B){return M.H.use(B)},Ve.useActionState=function(B,ne,ae){return M.H.useActionState(B,ne,ae)},Ve.useCallback=function(B,ne){return M.H.useCallback(B,ne)},Ve.useContext=function(B){return M.H.useContext(B)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(B,ne){return M.H.useDeferredValue(B,ne)},Ve.useEffect=function(B,ne){return M.H.useEffect(B,ne)},Ve.useEffectEvent=function(B){return M.H.useEffectEvent(B)},Ve.useId=function(){return M.H.useId()},Ve.useImperativeHandle=function(B,ne,ae){return M.H.useImperativeHandle(B,ne,ae)},Ve.useInsertionEffect=function(B,ne){return M.H.useInsertionEffect(B,ne)},Ve.useLayoutEffect=function(B,ne){return M.H.useLayoutEffect(B,ne)},Ve.useMemo=function(B,ne){return M.H.useMemo(B,ne)},Ve.useOptimistic=function(B,ne){return M.H.useOptimistic(B,ne)},Ve.useReducer=function(B,ne,ae){return M.H.useReducer(B,ne,ae)},Ve.useRef=function(B){return M.H.useRef(B)},Ve.useState=function(B){return M.H.useState(B)},Ve.useSyncExternalStore=function(B,ne,ae){return M.H.useSyncExternalStore(B,ne,ae)},Ve.useTransition=function(){return M.H.useTransition()},Ve.version="19.2.4",Ve}var Wv;function Vp(){return Wv||(Wv=1,wh.exports=nC()),wh.exports}var Ae=Vp();const iC=LT(Ae);var Rh={exports:{}},_l={},Ih={exports:{}},Nh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function oC(){return Zv||(Zv=1,(function(t){function e(te,fe){var ye=te.length;te.push(fe);e:for(;0<ye;){var we=ye-1>>>1,Re=te[we];if(0<r(Re,fe))te[we]=fe,te[ye]=Re,ye=we;else break e}}function n(te){return te.length===0?null:te[0]}function o(te){if(te.length===0)return null;var fe=te[0],ye=te.pop();if(ye!==fe){te[0]=ye;e:for(var we=0,Re=te.length,B=Re>>>1;we<B;){var ne=2*(we+1)-1,ae=te[ne],ge=ne+1,pe=te[ge];if(0>r(ae,ye))ge<Re&&0>r(pe,ae)?(te[we]=pe,te[ge]=ye,we=ge):(te[we]=ae,te[ne]=ye,we=ne);else if(ge<Re&&0>r(pe,ye))te[we]=pe,te[ge]=ye,we=ge;else break e}}return fe}function r(te,fe){var ye=te.sortIndex-fe.sortIndex;return ye!==0?ye:te.id-fe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var g=[],m=[],_=1,E=null,S=3,x=!1,D=!1,V=!1,P=!1,H=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function Z(te){for(var fe=n(m);fe!==null;){if(fe.callback===null)o(m);else if(fe.startTime<=te)o(m),fe.sortIndex=fe.expirationTime,e(g,fe);else break;fe=n(m)}}function Y(te){if(V=!1,Z(te),!D)if(n(g)!==null)D=!0,re||(re=!0,q());else{var fe=n(m);fe!==null&&je(Y,fe.startTime-te)}}var re=!1,M=-1,R=5,N=-1;function k(){return P?!0:!(t.unstable_now()-N<R)}function L(){if(P=!1,re){var te=t.unstable_now();N=te;var fe=!0;try{e:{D=!1,V&&(V=!1,j(M),M=-1),x=!0;var ye=S;try{t:{for(Z(te),E=n(g);E!==null&&!(E.expirationTime>te&&k());){var we=E.callback;if(typeof we=="function"){E.callback=null,S=E.priorityLevel;var Re=we(E.expirationTime<=te);if(te=t.unstable_now(),typeof Re=="function"){E.callback=Re,Z(te),fe=!0;break t}E===n(g)&&o(g),Z(te)}else o(g);E=n(g)}if(E!==null)fe=!0;else{var B=n(m);B!==null&&je(Y,B.startTime-te),fe=!1}}break e}finally{E=null,S=ye,x=!1}fe=void 0}}finally{fe?q():re=!1}}}var q;if(typeof $=="function")q=function(){$(L)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Oe=U.port2;U.port1.onmessage=L,q=function(){Oe.postMessage(null)}}else q=function(){H(L,0)};function je(te,fe){M=H(function(){te(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(te){switch(S){case 1:case 2:case 3:var fe=3;break;default:fe=S}var ye=S;S=fe;try{return te()}finally{S=ye}},t.unstable_requestPaint=function(){P=!0},t.unstable_runWithPriority=function(te,fe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ye=S;S=te;try{return fe()}finally{S=ye}},t.unstable_scheduleCallback=function(te,fe,ye){var we=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?we+ye:we):ye=we,te){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=ye+Re,te={id:_++,callback:fe,priorityLevel:te,startTime:ye,expirationTime:Re,sortIndex:-1},ye>we?(te.sortIndex=ye,e(m,te),n(g)===null&&te===n(m)&&(V?(j(M),M=-1):V=!0,je(Y,ye-we))):(te.sortIndex=Re,e(g,te),D||x||(D=!0,re||(re=!0,q()))),te},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(te){var fe=S;return function(){var ye=S;S=fe;try{return te.apply(this,arguments)}finally{S=ye}}}})(Nh)),Nh}var e_;function sC(){return e_||(e_=1,Ih.exports=oC()),Ih.exports}var Mh={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function rC(){if(t_)return hn;t_=1;var t=Vp();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,m,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:g,containerInfo:m,implementation:_}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,hn.createPortal=function(g,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,_)},hn.flushSync=function(g){var m=u.T,_=o.p;try{if(u.T=null,o.p=2,g)return g()}finally{u.T=m,o.p=_,o.d.f()}},hn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},hn.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},hn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var _=m.as,E=d(_,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:x}):_==="script"&&o.d.X(g,{crossOrigin:E,integrity:S,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},hn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=d(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},hn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,E=d(_,m.crossOrigin);o.d.L(g,_,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},hn.preloadModule=function(g,m){if(typeof g=="string")if(m){var _=d(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},hn.requestFormReset=function(g){o.d.r(g)},hn.unstable_batchedUpdates=function(g,m){return g(m)},hn.useFormState=function(g,m,_){return u.H.useFormState(g,m,_)},hn.useFormStatus=function(){return u.H.useHostTransitionStatus()},hn.version="19.2.4",hn}var n_;function aC(){if(n_)return Mh.exports;n_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mh.exports=rC(),Mh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function lC(){if(i_)return _l;i_=1;var t=sC(),e=Vp(),n=aC();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(o(188))}function m(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(o(188));return s!==i?null:i}for(var a=i,c=s;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),i;if(v===c)return g(y),s;v=v.sibling}throw Error(o(188))}if(a.return!==c.return)a=y,c=v;else{for(var A=!1,w=y.child;w;){if(w===a){A=!0,a=y,c=v;break}if(w===c){A=!0,c=y,a=v;break}w=w.sibling}if(!A){for(w=v.child;w;){if(w===a){A=!0,a=v,c=y;break}if(w===c){A=!0,c=v,a=y;break}w=w.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:s}function _(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=_(i),s!==null)return s;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),$=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var U=Symbol.for("react.client.reference");function Oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===U?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case V:return"Fragment";case H:return"Profiler";case P:return"StrictMode";case Y:return"Suspense";case re:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case D:return"Portal";case $:return i.displayName||"Context";case j:return(i._context.displayName||"Context")+".Consumer";case Z:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return s=i.displayName||null,s!==null?s:Oe(i.type)||"Memo";case R:s=i._payload,i=i._init;try{return Oe(i(s))}catch{}}return null}var je=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},we=[],Re=-1;function B(i){return{current:i}}function ne(i){0>Re||(i.current=we[Re],we[Re]=null,Re--)}function ae(i,s){Re++,we[Re]=i.current,i.current=s}var ge=B(null),pe=B(null),De=B(null),qe=B(null);function Vt(i,s){switch(ae(De,s),ae(pe,i),ae(ge,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?vv(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=vv(s),i=_v(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(ge),ae(ge,i)}function yt(){ne(ge),ne(pe),ne(De)}function Ln(i){i.memoizedState!==null&&ae(qe,i);var s=ge.current,a=_v(s,i.type);s!==a&&(ae(pe,i),ae(ge,a))}function Wn(i){pe.current===i&&(ne(ge),ne(pe)),qe.current===i&&(ne(qe),pl._currentValue=ye)}var fi,qi;function Rn(i){if(fi===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);fi=s&&s[1]||"",qi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fi+i+qi}var ot=!1;function On(i,s){if(!i||ot)return"";ot=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var X=W}Reflect.construct(i,[],se)}else{try{se.call()}catch(W){X=W}i.call(se.prototype)}}else{try{throw Error()}catch(W){X=W}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],w=v[1];if(A&&w){var O=A.split(`
`),Q=w.split(`
`);for(y=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Q.length&&!Q[y].includes("DetermineComponentFrameRoot");)y++;if(c===O.length||y===Q.length)for(c=O.length-1,y=Q.length-1;1<=c&&0<=y&&O[c]!==Q[y];)y--;for(;1<=c&&0<=y;c--,y--)if(O[c]!==Q[y]){if(c!==1||y!==1)do if(c--,y--,0>y||O[c]!==Q[y]){var ie=`
`+O[c].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=c&&0<=y);break}}}finally{ot=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Rn(a):""}function Eo(i,s){switch(i.tag){case 26:case 27:case 5:return Rn(i.type);case 16:return Rn("Lazy");case 13:return i.child!==s&&s!==null?Rn("Suspense Fallback"):Rn("Suspense");case 19:return Rn("SuspenseList");case 0:case 15:return On(i.type,!1);case 11:return On(i.type.render,!1);case 1:return On(i.type,!0);case 31:return Rn("Activity");default:return""}}function Ss(i){try{var s="",a=null;do s+=Eo(i,a),a=i,i=i.return;while(i);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var As=Object.prototype.hasOwnProperty,So=t.unstable_scheduleCallback,bs=t.unstable_cancelCallback,Xl=t.unstable_shouldYield,Ao=t.unstable_requestPaint,kt=t.unstable_now,Cs=t.unstable_getCurrentPriorityLevel,Nt=t.unstable_ImmediatePriority,Lt=t.unstable_UserBlockingPriority,di=t.unstable_NormalPriority,fr=t.unstable_LowPriority,xs=t.unstable_IdlePriority,_a=t.log,Fi=t.unstable_setDisableYieldValue,bi=null,zt=null;function G(i){if(typeof _a=="function"&&Fi(i),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(bi,i)}catch{}}var ce=Math.clz32?Math.clz32:Ee,he=Math.log,ve=Math.LN2;function Ee(i){return i>>>=0,i===0?32:31-(he(i)/ve|0)|0}var Me=256,Ce=262144,ft=4194304;function dt(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function rt(i,s,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,v=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var w=c&134217727;return w!==0?(c=w&~v,c!==0?y=dt(c):(A&=w,A!==0?y=dt(A):a||(a=w&~i,a!==0&&(y=dt(a))))):(w=c&~v,w!==0?y=dt(w):A!==0?y=dt(A):a||(a=c&~i,a!==0&&(y=dt(a)))),y===0?0:s!==0&&s!==y&&(s&v)===0&&(v=y&-y,a=s&-s,v>=a||v===32&&(a&4194048)!==0)?s:y}function Kt(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function _n(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ta(){var i=ft;return ft<<=1,(ft&62914560)===0&&(ft=4194304),i}function Hi(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function bo(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function tn(i,s,a,c,y,v){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var w=i.entanglements,O=i.expirationTimes,Q=i.hiddenUpdates;for(a=A&~a;0<a;){var ie=31-ce(a),se=1<<ie;w[ie]=0,O[ie]=-1;var X=Q[ie];if(X!==null)for(Q[ie]=null,ie=0;ie<X.length;ie++){var W=X[ie];W!==null&&(W.lane&=-536870913)}a&=~se}c!==0&&Ea(i,c,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(A&~s))}function Ea(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-ce(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function Co(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var c=31-ce(a),y=1<<c;y&s|i[c]&s&&(i[c]|=s),a&=~y}}function xo(i,s){var a=s&-s;return a=(a&42)!==0?1:Sa(a),(a&(i.suspendedLanes|s))!==0?0:a}function Sa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Aa(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function zi(){var i=fe.p;return i!==0?i:(i=window.event,i===void 0?32:Fv(i.type))}function jl(i,s){var a=fe.p;try{return fe.p=i,s()}finally{fe.p=a}}var Ci=Math.random().toString(36).slice(2),bt="__reactFiber$"+Ci,nn="__reactProps$"+Ci,xi="__reactContainer$"+Ci,wo="__reactEvents$"+Ci,wi="__reactListeners$"+Ci,Wl="__reactHandles$"+Ci,ba="__reactResources$"+Ci,Ki="__reactMarker$"+Ci;function ws(i){delete i[bt],delete i[nn],delete i[wo],delete i[wi],delete i[Wl]}function Yi(i){var s=i[bt];if(s)return s;for(var a=i.parentNode;a;){if(s=a[xi]||a[bt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=xv(i);i!==null;){if(a=i[bt])return a;i=xv(i)}return s}i=a,a=i.parentNode}return null}function Ji(i){if(i=i[bt]||i[xi]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Rs(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function hi(i){var s=i[ba];return s||(s=i[ba]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Mt(i){i[Ki]=!0}var dr=new Set,Ro={};function Tn(i,s){Ri(i,s),Ri(i+"Capture",s)}function Ri(i,s){for(Ro[i]=s,i=0;i<s.length;i++)dr.add(s[i])}var wf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ca={},xa={};function Zl(i){return As.call(xa,i)?!0:As.call(Ca,i)?!1:wf.test(i)?xa[i]=!0:(Ca[i]=!0,!1)}function Io(i,s,a){if(Zl(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function No(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function Zn(i,s,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+c)}}function En(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function eu(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Rf(i,s,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(i,s,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function hr(i){if(!i._valueTracker){var s=eu(i)?"checked":"value";i._valueTracker=Rf(i,s,""+i[s])}}function wa(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return i&&(c=eu(i)?i.checked?"true":"false":i.value),i=c,i!==a?(s.setValue(i),!0):!1}function pr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var $i=/[\n"\\]/g;function Ct(i){return i.replace($i,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Mo(i,s,a,c,y,v,A,w){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+En(s)):i.value!==""+En(s)&&(i.value=""+En(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?mr(i,A,En(s)):a!=null?mr(i,A,En(a)):c!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+En(w):i.removeAttribute("name")}function Is(i,s,a,c,y,v,A,w){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){hr(i);return}a=a!=null?""+En(a):"",s=s!=null?""+En(s):a,w||s===i.value||(i.value=s),i.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=w?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),hr(i)}function mr(i,s,a){s==="number"&&pr(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Ze(i,s,a,c){if(i=i.options,s){s={};for(var y=0;y<a.length;y++)s["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=s.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+En(a),s=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}s!==null||i[y].disabled||(s=i[y])}s!==null&&(s.selected=!0)}}function Ns(i,s,a){if(s!=null&&(s=""+En(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+En(a):""}function Do(i,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(o(92));if(je(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=En(s),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),hr(i)}function ei(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var If=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ra(i,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,a):typeof a!="number"||a===0||If.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function tu(i,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&a[y]!==c&&Ra(i,y,c)}else for(var v in s)s.hasOwnProperty(v)&&Ra(i,v,s[v])}function Ia(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ii(i){return Mf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Qt(){}var gr=null;function yr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qi=null,Bn=null;function nu(i){var s=Ji(i);if(s&&(i=s.stateNode)){var a=i[nn]||null;e:switch(i=s.stateNode,s.type){case"input":if(Mo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ct(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==i&&c.form===i.form){var y=c[nn]||null;if(!y)throw Error(o(90));Mo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===i.form&&wa(c)}break e;case"textarea":Ns(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Ze(i,!!a.multiple,s,!1)}}}var Na=!1;function iu(i,s,a){if(Na)return i(s,a);Na=!0;try{var c=i(s);return c}finally{if(Na=!1,(Qi!==null||Bn!==null)&&(Zu(),Qi&&(s=Qi,i=Bn,Bn=Qi=null,nu(s),i)))for(s=0;s<i.length;s++)nu(i[s])}}function In(i,s){var a=i.stateNode;if(a===null)return null;var c=a[nn]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ma=!1;if(pi)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){Ma=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{Ma=!1}var Gn=null,vr=null,Mi=null;function Po(){if(Mi)return Mi;var i,s=vr,a=s.length,c,y="value"in Gn?Gn.value:Gn.textContent,v=y.length;for(i=0;i<a&&s[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&s[a-c]===y[v-c];c++);return Mi=y.slice(i,1<c?1-c:void 0)}function Ms(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Uo(){return!0}function vt(){return!1}function dn(i){function s(a,c,y,v,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(a=i[w],this[w]=a?a(v):v[w]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Uo:vt,this.isPropagationStopped=vt,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),s}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=dn(Xi),Vo=E({},Xi,{view:0,detail:0}),ou=dn(Vo),ko,_r,Sn,Ps=E({},Vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Sn&&(Sn&&i.type==="mousemove"?(ko=i.screenX-Sn.screenX,_r=i.screenY-Sn.screenY):_r=ko=0,Sn=i),ko)},movementY:function(i){return"movementY"in i?i.movementY:_r}}),su=dn(Ps),Us=E({},Ps,{dataTransfer:0}),ru=dn(Us),Da=E({},Vo,{relatedTarget:0}),Lo=dn(Da),au=E({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Tr=dn(au),Df=E({},Xi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),lu=dn(Df),Vs=E({},Xi,{data:0}),Pa=dn(Vs),uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ua={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Va={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Va[i])?!!s[i]:!1}function Oo(){return cu}var fu=E({},Vo,{key:function(i){if(i.key){var s=uu[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Ms(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ua[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(i){return i.type==="keypress"?Ms(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ms(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),du=dn(fu),ji=E({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ka=dn(ji),hu=E({},Vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),pu=dn(hu),mu=E({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Er=dn(mu),An=E({},Ps,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),gu=dn(An),yu=E({},Xi,{newState:0,oldState:0}),Bo=dn(yu),p=[9,13,27,32],T=pi&&"CompositionEvent"in window,C=null;pi&&"documentMode"in document&&(C=document.documentMode);var I=pi&&"TextEvent"in window&&!C,K=pi&&(!T||C&&8<C&&11>=C),ee=" ",de=!1;function at(i,s){switch(i){case"keyup":return p.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ot(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fe=!1;function Xt(i,s){switch(i){case"compositionend":return Ot(s);case"keypress":return s.which!==32?null:(de=!0,ee);case"textInput":return i=s.data,i===ee&&de?null:i;default:return null}}function jt(i,s){if(Fe)return i==="compositionend"||!T&&at(i,s)?(i=Po(),Mi=vr=Gn=null,Fe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return K&&s.locale!=="ko"?null:s.data;default:return null}}var Go={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Go[i.type]:s==="textarea"}function ks(i,s,a,c){Qi?Bn?Bn.push(c):Bn=[c]:Qi=c,s=rc(s,"onChange"),0<s.length&&(a=new Ds("onChange","change",null,a,c),i.push({event:a,listeners:s}))}var Wi=null,La=null;function wA(i){dv(i,0)}function vu(i){var s=Rs(i);if(wa(s))return i}function Mm(i,s){if(i==="change")return s}var Dm=!1;if(pi){var Pf;if(pi){var Uf="oninput"in document;if(!Uf){var Pm=document.createElement("div");Pm.setAttribute("oninput","return;"),Uf=typeof Pm.oninput=="function"}Pf=Uf}else Pf=!1;Dm=Pf&&(!document.documentMode||9<document.documentMode)}function Um(){Wi&&(Wi.detachEvent("onpropertychange",Vm),La=Wi=null)}function Vm(i){if(i.propertyName==="value"&&vu(La)){var s=[];ks(s,La,i,yr(i)),iu(wA,s)}}function RA(i,s,a){i==="focusin"?(Um(),Wi=s,La=a,Wi.attachEvent("onpropertychange",Vm)):i==="focusout"&&Um()}function IA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return vu(La)}function NA(i,s){if(i==="click")return vu(s)}function MA(i,s){if(i==="input"||i==="change")return vu(s)}function DA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var qn=typeof Object.is=="function"?Object.is:DA;function Oa(i,s){if(qn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!As.call(s,y)||!qn(i[y],s[y]))return!1}return!0}function km(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Lm(i,s){var a=km(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=s&&c>=s)return{node:a,offset:s-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=km(a)}}function Om(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Om(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Bm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=pr(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=pr(i.document)}return s}function Vf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var PA=pi&&"documentMode"in document&&11>=document.documentMode,Sr=null,kf=null,Ba=null,Lf=!1;function Gm(i,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Lf||Sr==null||Sr!==pr(c)||(c=Sr,"selectionStart"in c&&Vf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ba&&Oa(Ba,c)||(Ba=c,c=rc(kf,"onSelect"),0<c.length&&(s=new Ds("onSelect","select",null,s,a),i.push({event:s,listeners:c}),s.target=Sr)))}function Ls(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var Ar={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionrun:Ls("Transition","TransitionRun"),transitionstart:Ls("Transition","TransitionStart"),transitioncancel:Ls("Transition","TransitionCancel"),transitionend:Ls("Transition","TransitionEnd")},Of={},qm={};pi&&(qm=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);function Os(i){if(Of[i])return Of[i];if(!Ar[i])return i;var s=Ar[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in qm)return Of[i]=s[a];return i}var Fm=Os("animationend"),Hm=Os("animationiteration"),zm=Os("animationstart"),UA=Os("transitionrun"),VA=Os("transitionstart"),kA=Os("transitioncancel"),Km=Os("transitionend"),Ym=new Map,Bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bf.push("scrollEnd");function mi(i,s){Ym.set(i,s),Tn(s,[i])}var _u=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ti=[],br=0,Gf=0;function Tu(){for(var i=br,s=Gf=br=0;s<i;){var a=ti[s];ti[s++]=null;var c=ti[s];ti[s++]=null;var y=ti[s];ti[s++]=null;var v=ti[s];if(ti[s++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&Jm(a,y,v)}}function Eu(i,s,a,c){ti[br++]=i,ti[br++]=s,ti[br++]=a,ti[br++]=c,Gf|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function qf(i,s,a,c){return Eu(i,s,a,c),Su(i)}function Bs(i,s){return Eu(i,null,null,s),Su(i)}function Jm(i,s,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&s!==null&&(y=31-ce(a),i=v.hiddenUpdates,c=i[y],c===null?i[y]=[s]:c.push(s),s.lane=a|536870912),v):null}function Su(i){if(50<al)throw al=0,Xd=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Cr={};function LA(i,s,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(i,s,a,c){return new LA(i,s,a,c)}function Ff(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zi(i,s){var a=i.alternate;return a===null?(a=Fn(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function $m(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Au(i,s,a,c,y,v){var A=0;if(c=i,typeof i=="function")Ff(i)&&(A=1);else if(typeof i=="string")A=Fb(i,a,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Fn(31,a,s,y),i.elementType=N,i.lanes=v,i;case V:return Gs(a.children,y,v,s);case P:A=8,y|=24;break;case H:return i=Fn(12,a,s,y|2),i.elementType=H,i.lanes=v,i;case Y:return i=Fn(13,a,s,y),i.elementType=Y,i.lanes=v,i;case re:return i=Fn(19,a,s,y),i.elementType=re,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case $:A=10;break e;case j:A=9;break e;case Z:A=11;break e;case M:A=14;break e;case R:A=16,c=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),c=null}return s=Fn(A,a,s,y),s.elementType=i,s.type=c,s.lanes=v,s}function Gs(i,s,a,c){return i=Fn(7,i,c,s),i.lanes=a,i}function Hf(i,s,a){return i=Fn(6,i,null,s),i.lanes=a,i}function Qm(i){var s=Fn(18,null,null,0);return s.stateNode=i,s}function zf(i,s,a){return s=Fn(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Xm=new WeakMap;function ni(i,s){if(typeof i=="object"&&i!==null){var a=Xm.get(i);return a!==void 0?a:(s={value:i,source:s,stack:Ss(s)},Xm.set(i,s),s)}return{value:i,source:s,stack:Ss(s)}}var xr=[],wr=0,bu=null,Ga=0,ii=[],oi=0,qo=null,Di=1,Pi="";function eo(i,s){xr[wr++]=Ga,xr[wr++]=bu,bu=i,Ga=s}function jm(i,s,a){ii[oi++]=Di,ii[oi++]=Pi,ii[oi++]=qo,qo=i;var c=Di;i=Pi;var y=32-ce(c)-1;c&=~(1<<y),a+=1;var v=32-ce(s)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Di=1<<32-ce(s)+y|a<<y|c,Pi=v+i}else Di=1<<v|a<<y|c,Pi=i}function Kf(i){i.return!==null&&(eo(i,1),jm(i,1,0))}function Yf(i){for(;i===bu;)bu=xr[--wr],xr[wr]=null,Ga=xr[--wr],xr[wr]=null;for(;i===qo;)qo=ii[--oi],ii[oi]=null,Pi=ii[--oi],ii[oi]=null,Di=ii[--oi],ii[oi]=null}function Wm(i,s){ii[oi++]=Di,ii[oi++]=Pi,ii[oi++]=qo,Di=s.id,Pi=s.overflow,qo=i}var on=null,_t=null,$e=!1,Fo=null,si=!1,Jf=Error(o(519));function Ho(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qa(ni(s,i)),Jf}function Zm(i){var s=i.stateNode,a=i.type,c=i.memoizedProps;switch(s[bt]=i,s[nn]=c,a){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(a=0;a<ul.length;a++)ze(ul[a],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":ze("invalid",s),Is(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ze("invalid",s);break;case"textarea":ze("invalid",s),Do(s,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||gv(s.textContent,a)?(c.popover!=null&&(ze("beforetoggle",s),ze("toggle",s)),c.onScroll!=null&&ze("scroll",s),c.onScrollEnd!=null&&ze("scrollend",s),c.onClick!=null&&(s.onclick=Qt),s=!0):s=!1,s||Ho(i,!0)}function eg(i){for(on=i.return;on;)switch(on.tag){case 5:case 31:case 13:si=!1;return;case 27:case 3:si=!0;return;default:on=on.return}}function Rr(i){if(i!==on)return!1;if(!$e)return eg(i),$e=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||fh(i.type,i.memoizedProps)),a=!a),a&&_t&&Ho(i),eg(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));_t=Cv(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));_t=Cv(i)}else s===27?(s=_t,is(i.type)?(i=gh,gh=null,_t=i):_t=s):_t=on?ai(i.stateNode.nextSibling):null;return!0}function qs(){_t=on=null,$e=!1}function $f(){var i=Fo;return i!==null&&(Un===null?Un=i:Un.push.apply(Un,i),Fo=null),i}function qa(i){Fo===null?Fo=[i]:Fo.push(i)}var Qf=B(null),Fs=null,to=null;function zo(i,s,a){ae(Qf,s._currentValue),s._currentValue=a}function no(i){i._currentValue=Qf.current,ne(Qf)}function Xf(i,s,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===a)break;i=i.return}}function jf(i,s,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var w=v;v=y;for(var O=0;O<s.length;O++)if(w.context===s[O]){v.lanes|=a,w=v.alternate,w!==null&&(w.lanes|=a),Xf(v.return,a,i),c||(A=null);break e}v=w.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(o(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),Xf(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Ir(i,s,a,c){i=null;for(var y=s,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var w=y.type;qn(y.pendingProps.value,A.value)||(i!==null?i.push(w):i=[w])}}else if(y===qe.current){if(A=y.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(pl):i=[pl])}y=y.return}i!==null&&jf(s,i,a,c),s.flags|=262144}function Cu(i){for(i=i.firstContext;i!==null;){if(!qn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Hs(i){Fs=i,to=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function sn(i){return tg(Fs,i)}function xu(i,s){return Fs===null&&Hs(i),tg(i,s)}function tg(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},to===null){if(i===null)throw Error(o(308));to=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else to=to.next=s;return a}var OA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},BA=t.unstable_scheduleCallback,GA=t.unstable_NormalPriority,Bt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new OA,data:new Map,refCount:0}}function Fa(i){i.refCount--,i.refCount===0&&BA(GA,function(){i.controller.abort()})}var Ha=null,Zf=0,Nr=0,Mr=null;function qA(i,s){if(Ha===null){var a=Ha=[];Zf=0,Nr=nh(),Mr={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Zf++,s.then(ng,ng),s}function ng(){if(--Zf===0&&Ha!==null){Mr!==null&&(Mr.status="fulfilled");var i=Ha;Ha=null,Nr=0,Mr=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function FA(i,s){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<a.length;y++)(0,a[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var ig=te.S;te.S=function(i,s){Gy=kt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&qA(i,s),ig!==null&&ig(i,s)};var zs=B(null);function ed(){var i=zs.current;return i!==null?i:gt.pooledCache}function wu(i,s){s===null?ae(zs,zs.current):ae(zs,s.pool)}function og(){var i=ed();return i===null?null:{parent:Bt._currentValue,pool:i}}var Dr=Error(o(460)),td=Error(o(474)),Ru=Error(o(542)),Iu={then:function(){}};function sg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function rg(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Qt,Qt),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,lg(i),i;default:if(typeof s.status=="string")s.then(Qt,Qt);else{if(i=gt,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,lg(i),i}throw Ys=s,Dr}}function Ks(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ys=a,Dr):a}}var Ys=null;function ag(){if(Ys===null)throw Error(o(459));var i=Ys;return Ys=null,i}function lg(i){if(i===Dr||i===Ru)throw Error(o(483))}var Pr=null,za=0;function Nu(i){var s=za;return za+=1,Pr===null&&(Pr=[]),rg(Pr,i,s)}function Ka(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Mu(i,s){throw s.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function ug(i){function s(z,F){if(i){var J=z.deletions;J===null?(z.deletions=[F],z.flags|=16):J.push(F)}}function a(z,F){if(!i)return null;for(;F!==null;)s(z,F),F=F.sibling;return null}function c(z){for(var F=new Map;z!==null;)z.key!==null?F.set(z.key,z):F.set(z.index,z),z=z.sibling;return F}function y(z,F){return z=Zi(z,F),z.index=0,z.sibling=null,z}function v(z,F,J){return z.index=J,i?(J=z.alternate,J!==null?(J=J.index,J<F?(z.flags|=67108866,F):J):(z.flags|=67108866,F)):(z.flags|=1048576,F)}function A(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function w(z,F,J,oe){return F===null||F.tag!==6?(F=Hf(J,z.mode,oe),F.return=z,F):(F=y(F,J),F.return=z,F)}function O(z,F,J,oe){var xe=J.type;return xe===V?ie(z,F,J.props.children,oe,J.key):F!==null&&(F.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&Ks(xe)===F.type)?(F=y(F,J.props),Ka(F,J),F.return=z,F):(F=Au(J.type,J.key,J.props,null,z.mode,oe),Ka(F,J),F.return=z,F)}function Q(z,F,J,oe){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=zf(J,z.mode,oe),F.return=z,F):(F=y(F,J.children||[]),F.return=z,F)}function ie(z,F,J,oe,xe){return F===null||F.tag!==7?(F=Gs(J,z.mode,oe,xe),F.return=z,F):(F=y(F,J),F.return=z,F)}function se(z,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Hf(""+F,z.mode,J),F.return=z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case x:return J=Au(F.type,F.key,F.props,null,z.mode,J),Ka(J,F),J.return=z,J;case D:return F=zf(F,z.mode,J),F.return=z,F;case R:return F=Ks(F),se(z,F,J)}if(je(F)||q(F))return F=Gs(F,z.mode,J,null),F.return=z,F;if(typeof F.then=="function")return se(z,Nu(F),J);if(F.$$typeof===$)return se(z,xu(z,F),J);Mu(z,F)}return null}function X(z,F,J,oe){var xe=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return xe!==null?null:w(z,F,""+J,oe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case x:return J.key===xe?O(z,F,J,oe):null;case D:return J.key===xe?Q(z,F,J,oe):null;case R:return J=Ks(J),X(z,F,J,oe)}if(je(J)||q(J))return xe!==null?null:ie(z,F,J,oe,null);if(typeof J.then=="function")return X(z,F,Nu(J),oe);if(J.$$typeof===$)return X(z,F,xu(z,J),oe);Mu(z,J)}return null}function W(z,F,J,oe,xe){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return z=z.get(J)||null,w(F,z,""+oe,xe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:return z=z.get(oe.key===null?J:oe.key)||null,O(F,z,oe,xe);case D:return z=z.get(oe.key===null?J:oe.key)||null,Q(F,z,oe,xe);case R:return oe=Ks(oe),W(z,F,J,oe,xe)}if(je(oe)||q(oe))return z=z.get(J)||null,ie(F,z,oe,xe,null);if(typeof oe.then=="function")return W(z,F,J,Nu(oe),xe);if(oe.$$typeof===$)return W(z,F,J,xu(F,oe),xe);Mu(F,oe)}return null}function _e(z,F,J,oe){for(var xe=null,et=null,Se=F,Ge=F=0,Ye=null;Se!==null&&Ge<J.length;Ge++){Se.index>Ge?(Ye=Se,Se=null):Ye=Se.sibling;var tt=X(z,Se,J[Ge],oe);if(tt===null){Se===null&&(Se=Ye);break}i&&Se&&tt.alternate===null&&s(z,Se),F=v(tt,F,Ge),et===null?xe=tt:et.sibling=tt,et=tt,Se=Ye}if(Ge===J.length)return a(z,Se),$e&&eo(z,Ge),xe;if(Se===null){for(;Ge<J.length;Ge++)Se=se(z,J[Ge],oe),Se!==null&&(F=v(Se,F,Ge),et===null?xe=Se:et.sibling=Se,et=Se);return $e&&eo(z,Ge),xe}for(Se=c(Se);Ge<J.length;Ge++)Ye=W(Se,z,Ge,J[Ge],oe),Ye!==null&&(i&&Ye.alternate!==null&&Se.delete(Ye.key===null?Ge:Ye.key),F=v(Ye,F,Ge),et===null?xe=Ye:et.sibling=Ye,et=Ye);return i&&Se.forEach(function(ls){return s(z,ls)}),$e&&eo(z,Ge),xe}function Ne(z,F,J,oe){if(J==null)throw Error(o(151));for(var xe=null,et=null,Se=F,Ge=F=0,Ye=null,tt=J.next();Se!==null&&!tt.done;Ge++,tt=J.next()){Se.index>Ge?(Ye=Se,Se=null):Ye=Se.sibling;var ls=X(z,Se,tt.value,oe);if(ls===null){Se===null&&(Se=Ye);break}i&&Se&&ls.alternate===null&&s(z,Se),F=v(ls,F,Ge),et===null?xe=ls:et.sibling=ls,et=ls,Se=Ye}if(tt.done)return a(z,Se),$e&&eo(z,Ge),xe;if(Se===null){for(;!tt.done;Ge++,tt=J.next())tt=se(z,tt.value,oe),tt!==null&&(F=v(tt,F,Ge),et===null?xe=tt:et.sibling=tt,et=tt);return $e&&eo(z,Ge),xe}for(Se=c(Se);!tt.done;Ge++,tt=J.next())tt=W(Se,z,Ge,tt.value,oe),tt!==null&&(i&&tt.alternate!==null&&Se.delete(tt.key===null?Ge:tt.key),F=v(tt,F,Ge),et===null?xe=tt:et.sibling=tt,et=tt);return i&&Se.forEach(function(Zb){return s(z,Zb)}),$e&&eo(z,Ge),xe}function mt(z,F,J,oe){if(typeof J=="object"&&J!==null&&J.type===V&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case x:e:{for(var xe=J.key;F!==null;){if(F.key===xe){if(xe=J.type,xe===V){if(F.tag===7){a(z,F.sibling),oe=y(F,J.props.children),oe.return=z,z=oe;break e}}else if(F.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&Ks(xe)===F.type){a(z,F.sibling),oe=y(F,J.props),Ka(oe,J),oe.return=z,z=oe;break e}a(z,F);break}else s(z,F);F=F.sibling}J.type===V?(oe=Gs(J.props.children,z.mode,oe,J.key),oe.return=z,z=oe):(oe=Au(J.type,J.key,J.props,null,z.mode,oe),Ka(oe,J),oe.return=z,z=oe)}return A(z);case D:e:{for(xe=J.key;F!==null;){if(F.key===xe)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){a(z,F.sibling),oe=y(F,J.children||[]),oe.return=z,z=oe;break e}else{a(z,F);break}else s(z,F);F=F.sibling}oe=zf(J,z.mode,oe),oe.return=z,z=oe}return A(z);case R:return J=Ks(J),mt(z,F,J,oe)}if(je(J))return _e(z,F,J,oe);if(q(J)){if(xe=q(J),typeof xe!="function")throw Error(o(150));return J=xe.call(J),Ne(z,F,J,oe)}if(typeof J.then=="function")return mt(z,F,Nu(J),oe);if(J.$$typeof===$)return mt(z,F,xu(z,J),oe);Mu(z,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(a(z,F.sibling),oe=y(F,J),oe.return=z,z=oe):(a(z,F),oe=Hf(J,z.mode,oe),oe.return=z,z=oe),A(z)):a(z,F)}return function(z,F,J,oe){try{za=0;var xe=mt(z,F,J,oe);return Pr=null,xe}catch(Se){if(Se===Dr||Se===Ru)throw Se;var et=Fn(29,Se,null,z.mode);return et.lanes=oe,et.return=z,et}finally{}}}var Js=ug(!0),cg=ug(!1),Ko=!1;function nd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function id(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Yo(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Jo(i,s,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(st&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=Su(i),Jm(i,null,a),s}return Eu(i,c,s,a),Su(i)}function Ya(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,Co(i,a)}}function od(i,s){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=s:v=v.next=s}else y=v=s;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var sd=!1;function Ja(){if(sd){var i=Mr;if(i!==null)throw i}}function $a(i,s,a,c){sd=!1;var y=i.updateQueue;Ko=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var O=w,Q=O.next;O.next=null,A===null?v=Q:A.next=Q,A=O;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,w=ie.lastBaseUpdate,w!==A&&(w===null?ie.firstBaseUpdate=Q:w.next=Q,ie.lastBaseUpdate=O))}if(v!==null){var se=y.baseState;A=0,ie=Q=O=null,w=v;do{var X=w.lane&-536870913,W=X!==w.lane;if(W?(Ke&X)===X:(c&X)===X){X!==0&&X===Nr&&(sd=!0),ie!==null&&(ie=ie.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var _e=i,Ne=w;X=s;var mt=a;switch(Ne.tag){case 1:if(_e=Ne.payload,typeof _e=="function"){se=_e.call(mt,se,X);break e}se=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ne.payload,X=typeof _e=="function"?_e.call(mt,se,X):_e,X==null)break e;se=E({},se,X);break e;case 2:Ko=!0}}X=w.callback,X!==null&&(i.flags|=64,W&&(i.flags|=8192),W=y.callbacks,W===null?y.callbacks=[X]:W.push(X))}else W={lane:X,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ie===null?(Q=ie=W,O=se):ie=ie.next=W,A|=X;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;W=w,w=W.next,W.next=null,y.lastBaseUpdate=W,y.shared.pending=null}}while(!0);ie===null&&(O=se),y.baseState=O,y.firstBaseUpdate=Q,y.lastBaseUpdate=ie,v===null&&(y.shared.lanes=0),Wo|=A,i.lanes=A,i.memoizedState=se}}function fg(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function dg(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)fg(a[i],s)}var Ur=B(null),Du=B(0);function hg(i,s){i=fo,ae(Du,i),ae(Ur,s),fo=i|s.baseLanes}function rd(){ae(Du,fo),ae(Ur,Ur.current)}function ad(){fo=Du.current,ne(Ur),ne(Du)}var Hn=B(null),ri=null;function $o(i){var s=i.alternate;ae(Dt,Dt.current&1),ae(Hn,i),ri===null&&(s===null||Ur.current!==null||s.memoizedState!==null)&&(ri=i)}function ld(i){ae(Dt,Dt.current),ae(Hn,i),ri===null&&(ri=i)}function pg(i){i.tag===22?(ae(Dt,Dt.current),ae(Hn,i),ri===null&&(ri=i)):Qo()}function Qo(){ae(Dt,Dt.current),ae(Hn,Hn.current)}function zn(i){ne(Hn),ri===i&&(ri=null),ne(Dt)}var Dt=B(0);function Pu(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ph(a)||mh(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var io=0,Be=null,ht=null,Gt=null,Uu=!1,Vr=!1,$s=!1,Vu=0,Qa=0,kr=null,HA=0;function xt(){throw Error(o(321))}function ud(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!qn(i[a],s[a]))return!1;return!0}function cd(i,s,a,c,y,v){return io=v,Be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,te.H=i===null||i.memoizedState===null?jg:Cd,$s=!1,v=a(c,y),$s=!1,Vr&&(v=gg(s,a,c,y)),mg(i),v}function mg(i){te.H=Wa;var s=ht!==null&&ht.next!==null;if(io=0,Gt=ht=Be=null,Uu=!1,Qa=0,kr=null,s)throw Error(o(300));i===null||qt||(i=i.dependencies,i!==null&&Cu(i)&&(qt=!0))}function gg(i,s,a,c){Be=i;var y=0;do{if(Vr&&(kr=null),Qa=0,Vr=!1,25<=y)throw Error(o(301));if(y+=1,Gt=ht=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}te.H=Wg,v=s(a,c)}while(Vr);return v}function zA(){var i=te.H,s=i.useState()[0];return s=typeof s.then=="function"?Xa(s):s,i=i.useState()[0],(ht!==null?ht.memoizedState:null)!==i&&(Be.flags|=1024),s}function fd(){var i=Vu!==0;return Vu=0,i}function dd(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function hd(i){if(Uu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Uu=!1}io=0,Gt=ht=Be=null,Vr=!1,Qa=Vu=0,kr=null}function bn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Be.memoizedState=Gt=i:Gt=Gt.next=i,Gt}function Pt(){if(ht===null){var i=Be.alternate;i=i!==null?i.memoizedState:null}else i=ht.next;var s=Gt===null?Be.memoizedState:Gt.next;if(s!==null)Gt=s,ht=i;else{if(i===null)throw Be.alternate===null?Error(o(467)):Error(o(310));ht=i,i={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Gt===null?Be.memoizedState=Gt=i:Gt=Gt.next=i}return Gt}function ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xa(i){var s=Qa;return Qa+=1,kr===null&&(kr=[]),i=rg(kr,i,s),s=Be,(Gt===null?s.memoizedState:Gt.next)===null&&(s=s.alternate,te.H=s===null||s.memoizedState===null?jg:Cd),i}function Lu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Xa(i);if(i.$$typeof===$)return sn(i)}throw Error(o(438,String(i)))}function pd(i){var s=null,a=Be.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=ku(),Be.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),c=0;c<i;c++)a[c]=k;return s.index++,a}function oo(i,s){return typeof s=="function"?s(i):s}function Ou(i){var s=Pt();return md(s,ht,i)}function md(i,s,a){var c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var y=i.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}s.baseQueue=y=v,c.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{s=y.next;var w=A=null,O=null,Q=s,ie=!1;do{var se=Q.lane&-536870913;if(se!==Q.lane?(Ke&se)===se:(io&se)===se){var X=Q.revertLane;if(X===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),se===Nr&&(ie=!0);else if((io&X)===X){Q=Q.next,X===Nr&&(ie=!0);continue}else se={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(w=O=se,A=v):O=O.next=se,Be.lanes|=X,Wo|=X;se=Q.action,$s&&a(v,se),v=Q.hasEagerState?Q.eagerState:a(v,se)}else X={lane:se,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(w=O=X,A=v):O=O.next=X,Be.lanes|=se,Wo|=se;Q=Q.next}while(Q!==null&&Q!==s);if(O===null?A=v:O.next=w,!qn(v,i.memoizedState)&&(qt=!0,ie&&(a=Mr,a!==null)))throw a;i.memoizedState=v,i.baseState=A,i.baseQueue=O,c.lastRenderedState=v}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function gd(i){var s=Pt(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,v=s.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=i(v,A.action),A=A.next;while(A!==y);qn(v,s.memoizedState)||(qt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,c]}function yg(i,s,a){var c=Be,y=Pt(),v=$e;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=s();var A=!qn((ht||y).memoizedState,a);if(A&&(y.memoizedState=a,qt=!0),y=y.queue,_d(Tg.bind(null,c,y,i),[i]),y.getSnapshot!==s||A||Gt!==null&&Gt.memoizedState.tag&1){if(c.flags|=2048,Lr(9,{destroy:void 0},_g.bind(null,c,y,a,s),null),gt===null)throw Error(o(349));v||(io&127)!==0||vg(c,s,a)}return a}function vg(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=Be.updateQueue,s===null?(s=ku(),Be.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function _g(i,s,a,c){s.value=a,s.getSnapshot=c,Eg(s)&&Sg(i)}function Tg(i,s,a){return a(function(){Eg(s)&&Sg(i)})}function Eg(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!qn(i,a)}catch{return!0}}function Sg(i){var s=Bs(i,2);s!==null&&Vn(s,i,2)}function yd(i){var s=bn();if(typeof i=="function"){var a=i;if(i=a(),$s){G(!0);try{a()}finally{G(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:i},s}function Ag(i,s,a,c){return i.baseState=a,md(i,ht,typeof c=="function"?c:oo)}function KA(i,s,a,c,y){if(qu(i))throw Error(o(485));if(i=s.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};te.T!==null?a(!0):v.isTransition=!1,c(v),a=s.pending,a===null?(v.next=s.pending=v,bg(s,v)):(v.next=a.next,s.pending=a.next=v)}}function bg(i,s){var a=s.action,c=s.payload,y=i.state;if(s.isTransition){var v=te.T,A={};te.T=A;try{var w=a(y,c),O=te.S;O!==null&&O(A,w),Cg(i,s,w)}catch(Q){vd(i,s,Q)}finally{v!==null&&A.types!==null&&(v.types=A.types),te.T=v}}else try{v=a(y,c),Cg(i,s,v)}catch(Q){vd(i,s,Q)}}function Cg(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){xg(i,s,c)},function(c){return vd(i,s,c)}):xg(i,s,a)}function xg(i,s,a){s.status="fulfilled",s.value=a,wg(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,bg(i,a)))}function vd(i,s,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,wg(s),s=s.next;while(s!==c)}i.action=null}function wg(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Rg(i,s){return s}function Ig(i,s){if($e){var a=gt.formState;if(a!==null){e:{var c=Be;if($e){if(_t){t:{for(var y=_t,v=si;y.nodeType!==8;){if(!v){y=null;break t}if(y=ai(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){_t=ai(y.nextSibling),c=y.data==="F!";break e}}Ho(c)}c=!1}c&&(s=a[0])}}return a=bn(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rg,lastRenderedState:s},a.queue=c,a=$g.bind(null,Be,c),c.dispatch=a,c=yd(!1),v=bd.bind(null,Be,!1,c.queue),c=bn(),y={state:s,dispatch:null,action:i,pending:null},c.queue=y,a=KA.bind(null,Be,y,v,a),y.dispatch=a,c.memoizedState=i,[s,a,!1]}function Ng(i){var s=Pt();return Mg(s,ht,i)}function Mg(i,s,a){if(s=md(i,s,Rg)[0],i=Ou(oo)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Xa(s)}catch(A){throw A===Dr?Ru:A}else c=s;s=Pt();var y=s.queue,v=y.dispatch;return a!==s.memoizedState&&(Be.flags|=2048,Lr(9,{destroy:void 0},YA.bind(null,y,a),null)),[c,v,i]}function YA(i,s){i.action=s}function Dg(i){var s=Pt(),a=ht;if(a!==null)return Mg(s,a,i);Pt(),s=s.memoizedState,a=Pt();var c=a.queue.dispatch;return a.memoizedState=i,[s,c,!1]}function Lr(i,s,a,c){return i={tag:i,create:a,deps:c,inst:s,next:null},s=Be.updateQueue,s===null&&(s=ku(),Be.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,s.lastEffect=i),i}function Pg(){return Pt().memoizedState}function Bu(i,s,a,c){var y=bn();Be.flags|=i,y.memoizedState=Lr(1|s,{destroy:void 0},a,c===void 0?null:c)}function Gu(i,s,a,c){var y=Pt();c=c===void 0?null:c;var v=y.memoizedState.inst;ht!==null&&c!==null&&ud(c,ht.memoizedState.deps)?y.memoizedState=Lr(s,v,a,c):(Be.flags|=i,y.memoizedState=Lr(1|s,v,a,c))}function Ug(i,s){Bu(8390656,8,i,s)}function _d(i,s){Gu(2048,8,i,s)}function JA(i){Be.flags|=4;var s=Be.updateQueue;if(s===null)s=ku(),Be.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function Vg(i){var s=Pt().memoizedState;return JA({ref:s,nextImpl:i}),function(){if((st&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function kg(i,s){return Gu(4,2,i,s)}function Lg(i,s){return Gu(4,4,i,s)}function Og(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Bg(i,s,a){a=a!=null?a.concat([i]):null,Gu(4,4,Og.bind(null,s,i),a)}function Td(){}function Gg(i,s){var a=Pt();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&ud(s,c[1])?c[0]:(a.memoizedState=[i,s],i)}function qg(i,s){var a=Pt();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&ud(s,c[1]))return c[0];if(c=i(),$s){G(!0);try{i()}finally{G(!1)}}return a.memoizedState=[c,s],c}function Ed(i,s,a){return a===void 0||(io&1073741824)!==0&&(Ke&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=Fy(),Be.lanes|=i,Wo|=i,a)}function Fg(i,s,a,c){return qn(a,s)?a:Ur.current!==null?(i=Ed(i,a,c),qn(i,s)||(qt=!0),i):(io&42)===0||(io&1073741824)!==0&&(Ke&261930)===0?(qt=!0,i.memoizedState=a):(i=Fy(),Be.lanes|=i,Wo|=i,s)}function Hg(i,s,a,c,y){var v=fe.p;fe.p=v!==0&&8>v?v:8;var A=te.T,w={};te.T=w,bd(i,!1,s,a);try{var O=y(),Q=te.S;if(Q!==null&&Q(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ie=FA(O,c);ja(i,s,ie,Jn(i))}else ja(i,s,c,Jn(i))}catch(se){ja(i,s,{then:function(){},status:"rejected",reason:se},Jn())}finally{fe.p=v,A!==null&&w.types!==null&&(A.types=w.types),te.T=A}}function $A(){}function Sd(i,s,a,c){if(i.tag!==5)throw Error(o(476));var y=zg(i).queue;Hg(i,y,s,ye,a===null?$A:function(){return Kg(i),a(c)})}function zg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:ye},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Kg(i){var s=zg(i);s.next===null&&(s=i.alternate.memoizedState),ja(i,s.next.queue,{},Jn())}function Ad(){return sn(pl)}function Yg(){return Pt().memoizedState}function Jg(){return Pt().memoizedState}function QA(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=Jn();i=Yo(a);var c=Jo(s,i,a);c!==null&&(Vn(c,s,a),Ya(c,s,a)),s={cache:Wf()},i.payload=s;return}s=s.return}}function XA(i,s,a){var c=Jn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},qu(i)?Qg(s,a):(a=qf(i,s,a,c),a!==null&&(Vn(a,i,c),Xg(a,s,c)))}function $g(i,s,a){var c=Jn();ja(i,s,a,c)}function ja(i,s,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(qu(i))Qg(s,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var A=s.lastRenderedState,w=v(A,a);if(y.hasEagerState=!0,y.eagerState=w,qn(w,A))return Eu(i,s,y,0),gt===null&&Tu(),!1}catch{}finally{}if(a=qf(i,s,y,c),a!==null)return Vn(a,i,c),Xg(a,s,c),!0}return!1}function bd(i,s,a,c){if(c={lane:2,revertLane:nh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},qu(i)){if(s)throw Error(o(479))}else s=qf(i,a,c,2),s!==null&&Vn(s,i,2)}function qu(i){var s=i.alternate;return i===Be||s!==null&&s===Be}function Qg(i,s){Vr=Uu=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function Xg(i,s,a){if((a&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,Co(i,a)}}var Wa={readContext:sn,use:Lu,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};Wa.useEffectEvent=xt;var jg={readContext:sn,use:Lu,useCallback:function(i,s){return bn().memoizedState=[i,s===void 0?null:s],i},useContext:sn,useEffect:Ug,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Bu(4194308,4,Og.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Bu(4194308,4,i,s)},useInsertionEffect:function(i,s){Bu(4,2,i,s)},useMemo:function(i,s){var a=bn();s=s===void 0?null:s;var c=i();if($s){G(!0);try{i()}finally{G(!1)}}return a.memoizedState=[c,s],c},useReducer:function(i,s,a){var c=bn();if(a!==void 0){var y=a(s);if($s){G(!0);try{a(s)}finally{G(!1)}}}else y=s;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=XA.bind(null,Be,i),[c.memoizedState,i]},useRef:function(i){var s=bn();return i={current:i},s.memoizedState=i},useState:function(i){i=yd(i);var s=i.queue,a=$g.bind(null,Be,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Td,useDeferredValue:function(i,s){var a=bn();return Ed(a,i,s)},useTransition:function(){var i=yd(!1);return i=Hg.bind(null,Be,i.queue,!0,!1),bn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var c=Be,y=bn();if($e){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),gt===null)throw Error(o(349));(Ke&127)!==0||vg(c,s,a)}y.memoizedState=a;var v={value:a,getSnapshot:s};return y.queue=v,Ug(Tg.bind(null,c,v,i),[i]),c.flags|=2048,Lr(9,{destroy:void 0},_g.bind(null,c,v,a,s),null),a},useId:function(){var i=bn(),s=gt.identifierPrefix;if($e){var a=Pi,c=Di;a=(c&~(1<<32-ce(c)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Vu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=HA++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Ad,useFormState:Ig,useActionState:Ig,useOptimistic:function(i){var s=bn();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=bd.bind(null,Be,!0,a),a.dispatch=s,[i,s]},useMemoCache:pd,useCacheRefresh:function(){return bn().memoizedState=QA.bind(null,Be)},useEffectEvent:function(i){var s=bn(),a={impl:i};return s.memoizedState=a,function(){if((st&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Cd={readContext:sn,use:Lu,useCallback:Gg,useContext:sn,useEffect:_d,useImperativeHandle:Bg,useInsertionEffect:kg,useLayoutEffect:Lg,useMemo:qg,useReducer:Ou,useRef:Pg,useState:function(){return Ou(oo)},useDebugValue:Td,useDeferredValue:function(i,s){var a=Pt();return Fg(a,ht.memoizedState,i,s)},useTransition:function(){var i=Ou(oo)[0],s=Pt().memoizedState;return[typeof i=="boolean"?i:Xa(i),s]},useSyncExternalStore:yg,useId:Yg,useHostTransitionStatus:Ad,useFormState:Ng,useActionState:Ng,useOptimistic:function(i,s){var a=Pt();return Ag(a,ht,i,s)},useMemoCache:pd,useCacheRefresh:Jg};Cd.useEffectEvent=Vg;var Wg={readContext:sn,use:Lu,useCallback:Gg,useContext:sn,useEffect:_d,useImperativeHandle:Bg,useInsertionEffect:kg,useLayoutEffect:Lg,useMemo:qg,useReducer:gd,useRef:Pg,useState:function(){return gd(oo)},useDebugValue:Td,useDeferredValue:function(i,s){var a=Pt();return ht===null?Ed(a,i,s):Fg(a,ht.memoizedState,i,s)},useTransition:function(){var i=gd(oo)[0],s=Pt().memoizedState;return[typeof i=="boolean"?i:Xa(i),s]},useSyncExternalStore:yg,useId:Yg,useHostTransitionStatus:Ad,useFormState:Dg,useActionState:Dg,useOptimistic:function(i,s){var a=Pt();return ht!==null?Ag(a,ht,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:pd,useCacheRefresh:Jg};Wg.useEffectEvent=Vg;function xd(i,s,a,c){s=i.memoizedState,a=a(c,s),a=a==null?s:E({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var wd={enqueueSetState:function(i,s,a){i=i._reactInternals;var c=Jn(),y=Yo(c);y.payload=s,a!=null&&(y.callback=a),s=Jo(i,y,c),s!==null&&(Vn(s,i,c),Ya(s,i,c))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var c=Jn(),y=Yo(c);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=Jo(i,y,c),s!==null&&(Vn(s,i,c),Ya(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Jn(),c=Yo(a);c.tag=2,s!=null&&(c.callback=s),s=Jo(i,c,a),s!==null&&(Vn(s,i,a),Ya(s,i,a))}};function Zg(i,s,a,c,y,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,A):s.prototype&&s.prototype.isPureReactComponent?!Oa(a,c)||!Oa(y,v):!0}function ey(i,s,a,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==i&&wd.enqueueReplaceState(s,s.state,null)}function Qs(i,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(i=i.defaultProps){a===s&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function ty(i){_u(i)}function ny(i){console.error(i)}function iy(i){_u(i)}function Fu(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function oy(i,s,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Rd(i,s,a){return a=Yo(a),a.tag=3,a.payload={element:null},a.callback=function(){Fu(i,s)},a}function sy(i){return i=Yo(i),i.tag=3,i}function ry(i,s,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;i.payload=function(){return y(v)},i.callback=function(){oy(s,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){oy(s,a,c),typeof y!="function"&&(Zo===null?Zo=new Set([this]):Zo.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function jA(i,s,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&Ir(s,a,y,!0),a=Hn.current,a!==null){switch(a.tag){case 31:case 13:return ri===null?ec():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===Iu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),Zd(i,c,y)),!1;case 22:return a.flags|=65536,c===Iu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),Zd(i,c,y)),!1}throw Error(o(435,a.tag))}return Zd(i,c,y),ec(),!1}if($e)return s=Hn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==Jf&&(i=Error(o(422),{cause:c}),qa(ni(i,a)))):(c!==Jf&&(s=Error(o(423),{cause:c}),qa(ni(s,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=ni(c,a),y=Rd(i.stateNode,c,y),od(i,y),wt!==4&&(wt=2)),!1;var v=Error(o(520),{cause:c});if(v=ni(v,a),rl===null?rl=[v]:rl.push(v),wt!==4&&(wt=2),s===null)return!0;c=ni(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Rd(a.stateNode,c,i),od(a,i),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Zo===null||!Zo.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=sy(y),ry(y,i,a,c),od(a,y),!1}a=a.return}while(a!==null);return!1}var Id=Error(o(461)),qt=!1;function rn(i,s,a,c){s.child=i===null?cg(s,null,a,c):Js(s,i.child,a,c)}function ay(i,s,a,c,y){a=a.render;var v=s.ref;if("ref"in c){var A={};for(var w in c)w!=="ref"&&(A[w]=c[w])}else A=c;return Hs(s),c=cd(i,s,a,A,v,y),w=fd(),i!==null&&!qt?(dd(i,s,y),so(i,s,y)):($e&&w&&Kf(s),s.flags|=1,rn(i,s,c,y),s.child)}function ly(i,s,a,c,y){if(i===null){var v=a.type;return typeof v=="function"&&!Ff(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,uy(i,s,v,c,y)):(i=Au(a.type,null,c,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(v=i.child,!Ld(i,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:Oa,a(A,c)&&i.ref===s.ref)return so(i,s,y)}return s.flags|=1,i=Zi(v,c),i.ref=s.ref,i.return=s,s.child=i}function uy(i,s,a,c,y){if(i!==null){var v=i.memoizedProps;if(Oa(v,c)&&i.ref===s.ref)if(qt=!1,s.pendingProps=c=v,Ld(i,y))(i.flags&131072)!==0&&(qt=!0);else return s.lanes=i.lanes,so(i,s,y)}return Nd(i,s,a,c,y)}function cy(i,s,a,c){var y=c.children,v=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=s.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,s.child=null;return fy(i,s,v,a,c)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&wu(s,v!==null?v.cachePool:null),v!==null?hg(s,v):rd(),pg(s);else return c=s.lanes=536870912,fy(i,s,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(wu(s,v.cachePool),hg(s,v),Qo(),s.memoizedState=null):(i!==null&&wu(s,null),rd(),Qo());return rn(i,s,y,a),s.child}function Za(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function fy(i,s,a,c,y){var v=ed();return v=v===null?null:{parent:Bt._currentValue,pool:v},s.memoizedState={baseLanes:a,cachePool:v},i!==null&&wu(s,null),rd(),pg(s),i!==null&&Ir(i,s,c,!0),s.childLanes=y,null}function Hu(i,s){return s=Ku({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function dy(i,s,a){return Js(s,i.child,null,a),i=Hu(s,s.pendingProps),i.flags|=2,zn(s),s.memoizedState=null,i}function WA(i,s,a){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,i===null){if($e){if(c.mode==="hidden")return i=Hu(s,c),s.lanes=536870912,Za(null,i);if(ld(s),(i=_t)?(i=bv(i,si),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:qo!==null?{id:Di,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},a=Qm(i),a.return=s,s.child=a,on=s,_t=null)):i=null,i===null)throw Ho(s);return s.lanes=536870912,null}return Hu(s,c)}var v=i.memoizedState;if(v!==null){var A=v.dehydrated;if(ld(s),y)if(s.flags&256)s.flags&=-257,s=dy(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(qt||Ir(i,s,a,!1),y=(a&i.childLanes)!==0,qt||y){if(c=gt,c!==null&&(A=xo(c,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,Bs(i,A),Vn(c,i,A),Id;ec(),s=dy(i,s,a)}else i=v.treeContext,_t=ai(A.nextSibling),on=s,$e=!0,Fo=null,si=!1,i!==null&&Wm(s,i),s=Hu(s,c),s.flags|=4096;return s}return i=Zi(i.child,{mode:c.mode,children:c.children}),i.ref=s.ref,s.child=i,i.return=s,i}function zu(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function Nd(i,s,a,c,y){return Hs(s),a=cd(i,s,a,c,void 0,y),c=fd(),i!==null&&!qt?(dd(i,s,y),so(i,s,y)):($e&&c&&Kf(s),s.flags|=1,rn(i,s,a,y),s.child)}function hy(i,s,a,c,y,v){return Hs(s),s.updateQueue=null,a=gg(s,c,a,y),mg(i),c=fd(),i!==null&&!qt?(dd(i,s,v),so(i,s,v)):($e&&c&&Kf(s),s.flags|=1,rn(i,s,a,v),s.child)}function py(i,s,a,c,y){if(Hs(s),s.stateNode===null){var v=Cr,A=a.contextType;typeof A=="object"&&A!==null&&(v=sn(A)),v=new a(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=wd,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},nd(s),A=a.contextType,v.context=typeof A=="object"&&A!==null?sn(A):Cr,v.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(xd(s,a,A,c),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&wd.enqueueReplaceState(v,v.state,null),$a(s,c,v,y),Ja(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){v=s.stateNode;var w=s.memoizedProps,O=Qs(a,w);v.props=O;var Q=v.context,ie=a.contextType;A=Cr,typeof ie=="object"&&ie!==null&&(A=sn(ie));var se=a.getDerivedStateFromProps;ie=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,ie||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w||Q!==A)&&ey(s,v,c,A),Ko=!1;var X=s.memoizedState;v.state=X,$a(s,c,v,y),Ja(),Q=s.memoizedState,w||X!==Q||Ko?(typeof se=="function"&&(xd(s,a,se,c),Q=s.memoizedState),(O=Ko||Zg(s,a,O,c,X,Q,A))?(ie||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=Q),v.props=c,v.state=Q,v.context=A,c=O):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,id(i,s),A=s.memoizedProps,ie=Qs(a,A),v.props=ie,se=s.pendingProps,X=v.context,Q=a.contextType,O=Cr,typeof Q=="object"&&Q!==null&&(O=sn(Q)),w=a.getDerivedStateFromProps,(Q=typeof w=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==se||X!==O)&&ey(s,v,c,O),Ko=!1,X=s.memoizedState,v.state=X,$a(s,c,v,y),Ja();var W=s.memoizedState;A!==se||X!==W||Ko||i!==null&&i.dependencies!==null&&Cu(i.dependencies)?(typeof w=="function"&&(xd(s,a,w,c),W=s.memoizedState),(ie=Ko||Zg(s,a,ie,c,X,W,O)||i!==null&&i.dependencies!==null&&Cu(i.dependencies))?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,W,O),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,W,O)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&X===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&X===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=W),v.props=c,v.state=W,v.context=O,c=ie):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&X===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&X===i.memoizedState||(s.flags|=1024),c=!1)}return v=c,zu(i,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,i!==null&&c?(s.child=Js(s,i.child,null,y),s.child=Js(s,null,a,y)):rn(i,s,a,y),s.memoizedState=v.state,i=s.child):i=so(i,s,y),i}function my(i,s,a,c){return qs(),s.flags|=256,rn(i,s,a,c),s.child}var Md={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dd(i){return{baseLanes:i,cachePool:og()}}function Pd(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=Yn),i}function gy(i,s,a){var c=s.pendingProps,y=!1,v=(s.flags&128)!==0,A;if((A=v)||(A=i!==null&&i.memoizedState===null?!1:(Dt.current&2)!==0),A&&(y=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if($e){if(y?$o(s):Qo(),(i=_t)?(i=bv(i,si),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:qo!==null?{id:Di,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},a=Qm(i),a.return=s,s.child=a,on=s,_t=null)):i=null,i===null)throw Ho(s);return mh(i)?s.lanes=32:s.lanes=536870912,null}var w=c.children;return c=c.fallback,y?(Qo(),y=s.mode,w=Ku({mode:"hidden",children:w},y),c=Gs(c,y,a,null),w.return=s,c.return=s,w.sibling=c,s.child=w,c=s.child,c.memoizedState=Dd(a),c.childLanes=Pd(i,A,a),s.memoizedState=Md,Za(null,c)):($o(s),Ud(s,w))}var O=i.memoizedState;if(O!==null&&(w=O.dehydrated,w!==null)){if(v)s.flags&256?($o(s),s.flags&=-257,s=Vd(i,s,a)):s.memoizedState!==null?(Qo(),s.child=i.child,s.flags|=128,s=null):(Qo(),w=c.fallback,y=s.mode,c=Ku({mode:"visible",children:c.children},y),w=Gs(w,y,a,null),w.flags|=2,c.return=s,w.return=s,c.sibling=w,s.child=c,Js(s,i.child,null,a),c=s.child,c.memoizedState=Dd(a),c.childLanes=Pd(i,A,a),s.memoizedState=Md,s=Za(null,c));else if($o(s),mh(w)){if(A=w.nextSibling&&w.nextSibling.dataset,A)var Q=A.dgst;A=Q,c=Error(o(419)),c.stack="",c.digest=A,qa({value:c,source:null,stack:null}),s=Vd(i,s,a)}else if(qt||Ir(i,s,a,!1),A=(a&i.childLanes)!==0,qt||A){if(A=gt,A!==null&&(c=xo(A,a),c!==0&&c!==O.retryLane))throw O.retryLane=c,Bs(i,c),Vn(A,i,c),Id;ph(w)||ec(),s=Vd(i,s,a)}else ph(w)?(s.flags|=192,s.child=i.child,s=null):(i=O.treeContext,_t=ai(w.nextSibling),on=s,$e=!0,Fo=null,si=!1,i!==null&&Wm(s,i),s=Ud(s,c.children),s.flags|=4096);return s}return y?(Qo(),w=c.fallback,y=s.mode,O=i.child,Q=O.sibling,c=Zi(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,Q!==null?w=Zi(Q,w):(w=Gs(w,y,a,null),w.flags|=2),w.return=s,c.return=s,c.sibling=w,s.child=c,Za(null,c),c=s.child,w=i.child.memoizedState,w===null?w=Dd(a):(y=w.cachePool,y!==null?(O=Bt._currentValue,y=y.parent!==O?{parent:O,pool:O}:y):y=og(),w={baseLanes:w.baseLanes|a,cachePool:y}),c.memoizedState=w,c.childLanes=Pd(i,A,a),s.memoizedState=Md,Za(i.child,c)):($o(s),a=i.child,i=a.sibling,a=Zi(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=a,s.memoizedState=null,a)}function Ud(i,s){return s=Ku({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Ku(i,s){return i=Fn(22,i,null,s),i.lanes=0,i}function Vd(i,s,a){return Js(s,i.child,null,a),i=Ud(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function yy(i,s,a){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),Xf(i.return,s,a)}function kd(i,s,a,c,y,v){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function vy(i,s,a){var c=s.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Dt.current,w=(A&2)!==0;if(w?(A=A&1|2,s.flags|=128):A&=1,ae(Dt,A),rn(i,s,c,a),c=$e?Ga:0,!w&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&yy(i,a,s);else if(i.tag===19)yy(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=s.child,y=null;a!==null;)i=a.alternate,i!==null&&Pu(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=s.child,s.child=null):(y=a.sibling,a.sibling=null),kd(s,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&Pu(i)===null){s.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}kd(s,!0,a,null,v,c);break;case"together":kd(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function so(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),Wo|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(Ir(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,a=Zi(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=Zi(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function Ld(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Cu(i)))}function ZA(i,s,a){switch(s.tag){case 3:Vt(s,s.stateNode.containerInfo),zo(s,Bt,i.memoizedState.cache),qs();break;case 27:case 5:Ln(s);break;case 4:Vt(s,s.stateNode.containerInfo);break;case 10:zo(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ld(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?($o(s),s.flags|=128,null):(a&s.child.childLanes)!==0?gy(i,s,a):($o(s),i=so(i,s,a),i!==null?i.sibling:null);$o(s);break;case 19:var y=(i.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(Ir(i,s,a,!1),c=(a&s.childLanes)!==0),y){if(c)return vy(i,s,a);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(Dt,Dt.current),c)break;return null;case 22:return s.lanes=0,cy(i,s,a,s.pendingProps);case 24:zo(s,Bt,i.memoizedState.cache)}return so(i,s,a)}function _y(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)qt=!0;else{if(!Ld(i,a)&&(s.flags&128)===0)return qt=!1,ZA(i,s,a);qt=(i.flags&131072)!==0}else qt=!1,$e&&(s.flags&1048576)!==0&&jm(s,Ga,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(i=Ks(s.elementType),s.type=i,typeof i=="function")Ff(i)?(c=Qs(i,c),s.tag=1,s=py(null,s,i,c,a)):(s.tag=0,s=Nd(null,s,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===Z){s.tag=11,s=ay(null,s,i,c,a);break e}else if(y===M){s.tag=14,s=ly(null,s,i,c,a);break e}}throw s=Oe(i)||i,Error(o(306,s,""))}}return s;case 0:return Nd(i,s,s.type,s.pendingProps,a);case 1:return c=s.type,y=Qs(c,s.pendingProps),py(i,s,c,y,a);case 3:e:{if(Vt(s,s.stateNode.containerInfo),i===null)throw Error(o(387));c=s.pendingProps;var v=s.memoizedState;y=v.element,id(i,s),$a(s,c,null,a);var A=s.memoizedState;if(c=A.cache,zo(s,Bt,c),c!==v.cache&&jf(s,[Bt],a,!0),Ja(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=my(i,s,c,a);break e}else if(c!==y){y=ni(Error(o(424)),s),qa(y),s=my(i,s,c,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(_t=ai(i.firstChild),on=s,$e=!0,Fo=null,si=!0,a=cg(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(qs(),c===y){s=so(i,s,a);break e}rn(i,s,c,a)}s=s.child}return s;case 26:return zu(i,s),i===null?(a=Nv(s.type,null,s.pendingProps,null))?s.memoizedState=a:$e||(a=s.type,i=s.pendingProps,c=ac(De.current).createElement(a),c[bt]=s,c[nn]=i,an(c,a,i),Mt(c),s.stateNode=c):s.memoizedState=Nv(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Ln(s),i===null&&$e&&(c=s.stateNode=wv(s.type,s.pendingProps,De.current),on=s,si=!0,y=_t,is(s.type)?(gh=y,_t=ai(c.firstChild)):_t=y),rn(i,s,s.pendingProps.children,a),zu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&$e&&((y=c=_t)&&(c=Ib(c,s.type,s.pendingProps,si),c!==null?(s.stateNode=c,on=s,_t=ai(c.firstChild),si=!1,y=!0):y=!1),y||Ho(s)),Ln(s),y=s.type,v=s.pendingProps,A=i!==null?i.memoizedProps:null,c=v.children,fh(y,v)?c=null:A!==null&&fh(y,A)&&(s.flags|=32),s.memoizedState!==null&&(y=cd(i,s,zA,null,null,a),pl._currentValue=y),zu(i,s),rn(i,s,c,a),s.child;case 6:return i===null&&$e&&((i=a=_t)&&(a=Nb(a,s.pendingProps,si),a!==null?(s.stateNode=a,on=s,_t=null,i=!0):i=!1),i||Ho(s)),null;case 13:return gy(i,s,a);case 4:return Vt(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=Js(s,null,c,a):rn(i,s,c,a),s.child;case 11:return ay(i,s,s.type,s.pendingProps,a);case 7:return rn(i,s,s.pendingProps,a),s.child;case 8:return rn(i,s,s.pendingProps.children,a),s.child;case 12:return rn(i,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,zo(s,s.type,c.value),rn(i,s,c.children,a),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,Hs(s),y=sn(y),c=c(y),s.flags|=1,rn(i,s,c,a),s.child;case 14:return ly(i,s,s.type,s.pendingProps,a);case 15:return uy(i,s,s.type,s.pendingProps,a);case 19:return vy(i,s,a);case 31:return WA(i,s,a);case 22:return cy(i,s,a,s.pendingProps);case 24:return Hs(s),c=sn(Bt),i===null?(y=ed(),y===null&&(y=gt,v=Wf(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),s.memoizedState={parent:c,cache:y},nd(s),zo(s,Bt,y)):((i.lanes&a)!==0&&(id(i,s),$a(s,null,null,a),Ja()),y=i.memoizedState,v=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),zo(s,Bt,c)):(c=v.cache,zo(s,Bt,c),c!==y.cache&&jf(s,[Bt],a,!0))),rn(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function ro(i){i.flags|=4}function Od(i,s,a,c,y){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(Yy())i.flags|=8192;else throw Ys=Iu,td}else i.flags&=-16777217}function Ty(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Vv(s))if(Yy())i.flags|=8192;else throw Ys=Iu,td}function Yu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Ta():536870912,i.lanes|=s,qr|=s)}function el(i,s){if(!$e)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Tt(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(s)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,s}function eb(i,s,a){var c=s.pendingProps;switch(Yf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(s),null;case 1:return Tt(s),null;case 3:return a=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),no(Bt),yt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Rr(s)?ro(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,$f())),Tt(s),null;case 26:var y=s.type,v=s.memoizedState;return i===null?(ro(s),v!==null?(Tt(s),Ty(s,v)):(Tt(s),Od(s,y,null,c,a))):v?v!==i.memoizedState?(ro(s),Tt(s),Ty(s,v)):(Tt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==c&&ro(s),Tt(s),Od(s,y,i,c,a)),null;case 27:if(Wn(s),a=De.current,y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&ro(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return Tt(s),null}i=ge.current,Rr(s)?Zm(s):(i=wv(y,c,a),s.stateNode=i,ro(s))}return Tt(s),null;case 5:if(Wn(s),y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&ro(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return Tt(s),null}if(v=ge.current,Rr(s))Zm(s);else{var A=ac(De.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[bt]=s,v[nn]=c;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=v;e:switch(an(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ro(s)}}return Tt(s),Od(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&ro(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(o(166));if(i=De.current,Rr(s)){if(i=s.stateNode,a=s.memoizedProps,c=null,y=on,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[bt]=s,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||gv(i.nodeValue,a)),i||Ho(s,!0)}else i=ac(i).createTextNode(c),i[bt]=s,s.stateNode=i}return Tt(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(c=Rr(s),a!==null){if(i===null){if(!c)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[bt]=s}else qs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),i=!1}else a=$f(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(zn(s),s):(zn(s),null);if((s.flags&128)!==0)throw Error(o(558))}return Tt(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Rr(s),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(o(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[bt]=s}else qs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),y=!1}else y=$f(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(zn(s),s):(zn(s),null)}return zn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),Yu(s,s.updateQueue),Tt(s),null);case 4:return yt(),i===null&&rh(s.stateNode.containerInfo),Tt(s),null;case 10:return no(s.type),Tt(s),null;case 19:if(ne(Dt),c=s.memoizedState,c===null)return Tt(s),null;if(y=(s.flags&128)!==0,v=c.rendering,v===null)if(y)el(c,!1);else{if(wt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(v=Pu(i),v!==null){for(s.flags|=128,el(c,!1),i=v.updateQueue,s.updateQueue=i,Yu(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)$m(a,i),a=a.sibling;return ae(Dt,Dt.current&1|2),$e&&eo(s,c.treeForkCount),s.child}i=i.sibling}c.tail!==null&&kt()>ju&&(s.flags|=128,y=!0,el(c,!1),s.lanes=4194304)}else{if(!y)if(i=Pu(v),i!==null){if(s.flags|=128,y=!0,i=i.updateQueue,s.updateQueue=i,Yu(s,i),el(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!$e)return Tt(s),null}else 2*kt()-c.renderingStartTime>ju&&a!==536870912&&(s.flags|=128,y=!0,el(c,!1),s.lanes=4194304);c.isBackwards?(v.sibling=s.child,s.child=v):(i=c.last,i!==null?i.sibling=v:s.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=kt(),i.sibling=null,a=Dt.current,ae(Dt,y?a&1|2:a&1),$e&&eo(s,c.treeForkCount),i):(Tt(s),null);case 22:case 23:return zn(s),ad(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(Tt(s),s.subtreeFlags&6&&(s.flags|=8192)):Tt(s),a=s.updateQueue,a!==null&&Yu(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),i!==null&&ne(zs),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),no(Bt),Tt(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function tb(i,s){switch(Yf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return no(Bt),yt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Wn(s),null;case 31:if(s.memoizedState!==null){if(zn(s),s.alternate===null)throw Error(o(340));qs()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(zn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));qs()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ne(Dt),null;case 4:return yt(),null;case 10:return no(s.type),null;case 22:case 23:return zn(s),ad(),i!==null&&ne(zs),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return no(Bt),null;case 25:return null;default:return null}}function Ey(i,s){switch(Yf(s),s.tag){case 3:no(Bt),yt();break;case 26:case 27:case 5:Wn(s);break;case 4:yt();break;case 31:s.memoizedState!==null&&zn(s);break;case 13:zn(s);break;case 19:ne(Dt);break;case 10:no(s.type);break;case 22:case 23:zn(s),ad(),i!==null&&ne(zs);break;case 24:no(Bt)}}function tl(i,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var v=a.create,A=a.inst;c=v(),A.destroy=c}a=a.next}while(a!==y)}}catch(w){ut(s,s.return,w)}}function Xo(i,s,a){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&i)===i){var A=c.inst,w=A.destroy;if(w!==void 0){A.destroy=void 0,y=s;var O=a,Q=w;try{Q()}catch(ie){ut(y,O,ie)}}}c=c.next}while(c!==v)}}catch(ie){ut(s,s.return,ie)}}function Sy(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{dg(s,a)}catch(c){ut(i,i.return,c)}}}function Ay(i,s,a){a.props=Qs(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){ut(i,s,c)}}function nl(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){ut(i,s,y)}}function Ui(i,s){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){ut(i,s,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){ut(i,s,y)}else a.current=null}function by(i){var s=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){ut(i,i.return,y)}}function Bd(i,s,a){try{var c=i.stateNode;Ab(c,i.type,a,s),c[nn]=s}catch(y){ut(i,i.return,y)}}function Cy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&is(i.type)||i.tag===4}function Gd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Cy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&is(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qd(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Qt));else if(c!==4&&(c===27&&is(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(qd(i,s,a),i=i.sibling;i!==null;)qd(i,s,a),i=i.sibling}function Ju(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(c!==4&&(c===27&&is(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Ju(i,s,a),i=i.sibling;i!==null;)Ju(i,s,a),i=i.sibling}function xy(i){var s=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);an(s,c,a),s[bt]=i,s[nn]=a}catch(v){ut(i,i.return,v)}}var ao=!1,Ft=!1,Fd=!1,wy=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function nb(i,s){if(i=i.containerInfo,uh=pc,i=Bm(i),Vf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,w=-1,O=-1,Q=0,ie=0,se=i,X=null;t:for(;;){for(var W;se!==a||y!==0&&se.nodeType!==3||(w=A+y),se!==v||c!==0&&se.nodeType!==3||(O=A+c),se.nodeType===3&&(A+=se.nodeValue.length),(W=se.firstChild)!==null;)X=se,se=W;for(;;){if(se===i)break t;if(X===a&&++Q===y&&(w=A),X===v&&++ie===c&&(O=A),(W=se.nextSibling)!==null)break;se=X,X=se.parentNode}se=W}a=w===-1||O===-1?null:{start:w,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(ch={focusedElem:i,selectionRange:a},pc=!1,Wt=s;Wt!==null;)if(s=Wt,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Wt=i;else for(;Wt!==null;){switch(s=Wt,v=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=s,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var _e=Qs(a.type,y);i=c.getSnapshotBeforeUpdate(_e,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(Ne){ut(a,a.return,Ne)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)hh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":hh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,Wt=i;break}Wt=s.return}}function Ry(i,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:uo(i,a),c&4&&tl(5,a);break;case 1:if(uo(i,a),c&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(A){ut(a,a.return,A)}else{var y=Qs(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(y,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){ut(a,a.return,A)}}c&64&&Sy(a),c&512&&nl(a,a.return);break;case 3:if(uo(i,a),c&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{dg(i,s)}catch(A){ut(a,a.return,A)}}break;case 27:s===null&&c&4&&xy(a);case 26:case 5:uo(i,a),s===null&&c&4&&by(a),c&512&&nl(a,a.return);break;case 12:uo(i,a);break;case 31:uo(i,a),c&4&&My(i,a);break;case 13:uo(i,a),c&4&&Dy(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=fb.bind(null,a),Mb(i,a))));break;case 22:if(c=a.memoizedState!==null||ao,!c){s=s!==null&&s.memoizedState!==null||Ft,y=ao;var v=Ft;ao=c,(Ft=s)&&!v?co(i,a,(a.subtreeFlags&8772)!==0):uo(i,a),ao=y,Ft=v}break;case 30:break;default:uo(i,a)}}function Iy(i){var s=i.alternate;s!==null&&(i.alternate=null,Iy(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&ws(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Et=null,Mn=!1;function lo(i,s,a){for(a=a.child;a!==null;)Ny(i,s,a),a=a.sibling}function Ny(i,s,a){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(bi,a)}catch{}switch(a.tag){case 26:Ft||Ui(a,s),lo(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ft||Ui(a,s);var c=Et,y=Mn;is(a.type)&&(Et=a.stateNode,Mn=!1),lo(i,s,a),fl(a.stateNode),Et=c,Mn=y;break;case 5:Ft||Ui(a,s);case 6:if(c=Et,y=Mn,Et=null,lo(i,s,a),Et=c,Mn=y,Et!==null)if(Mn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(a.stateNode)}catch(v){ut(a,s,v)}else try{Et.removeChild(a.stateNode)}catch(v){ut(a,s,v)}break;case 18:Et!==null&&(Mn?(i=Et,Sv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Qr(i)):Sv(Et,a.stateNode));break;case 4:c=Et,y=Mn,Et=a.stateNode.containerInfo,Mn=!0,lo(i,s,a),Et=c,Mn=y;break;case 0:case 11:case 14:case 15:Xo(2,a,s),Ft||Xo(4,a,s),lo(i,s,a);break;case 1:Ft||(Ui(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Ay(a,s,c)),lo(i,s,a);break;case 21:lo(i,s,a);break;case 22:Ft=(c=Ft)||a.memoizedState!==null,lo(i,s,a),Ft=c;break;default:lo(i,s,a)}}function My(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Qr(i)}catch(a){ut(s,s.return,a)}}}function Dy(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Qr(i)}catch(a){ut(s,s.return,a)}}function ib(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new wy),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new wy),s;default:throw Error(o(435,i.tag))}}function $u(i,s){var a=ib(i);s.forEach(function(c){if(!a.has(c)){a.add(c);var y=db.bind(null,i,c);c.then(y,y)}})}function Dn(i,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=i,A=s,w=A;e:for(;w!==null;){switch(w.tag){case 27:if(is(w.type)){Et=w.stateNode,Mn=!1;break e}break;case 5:Et=w.stateNode,Mn=!1;break e;case 3:case 4:Et=w.stateNode.containerInfo,Mn=!0;break e}w=w.return}if(Et===null)throw Error(o(160));Ny(v,A,y),Et=null,Mn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Py(s,i),s=s.sibling}var gi=null;function Py(i,s){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Dn(s,i),Pn(i),c&4&&(Xo(3,i,i.return),tl(3,i),Xo(5,i,i.return));break;case 1:Dn(s,i),Pn(i),c&512&&(Ft||a===null||Ui(a,a.return)),c&64&&ao&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=gi;if(Dn(s,i),Pn(i),c&512&&(Ft||a===null||Ui(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Ki]||v[bt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),an(v,c,a),v[bt]=i,Mt(v),c=v;break e;case"link":var A=Pv("link","href",y).get(c+(a.href||""));if(A){for(var w=0;w<A.length;w++)if(v=A[w],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(w,1);break t}}v=y.createElement(c),an(v,c,a),y.head.appendChild(v);break;case"meta":if(A=Pv("meta","content",y).get(c+(a.content||""))){for(w=0;w<A.length;w++)if(v=A[w],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(w,1);break t}}v=y.createElement(c),an(v,c,a),y.head.appendChild(v);break;default:throw Error(o(468,c))}v[bt]=i,Mt(v),c=v}i.stateNode=c}else Uv(y,i.type,i.stateNode);else i.stateNode=Dv(y,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?Uv(y,i.type,i.stateNode):Dv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Bd(i,i.memoizedProps,a.memoizedProps)}break;case 27:Dn(s,i),Pn(i),c&512&&(Ft||a===null||Ui(a,a.return)),a!==null&&c&4&&Bd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Dn(s,i),Pn(i),c&512&&(Ft||a===null||Ui(a,a.return)),i.flags&32){y=i.stateNode;try{ei(y,"")}catch(_e){ut(i,i.return,_e)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Bd(i,y,a!==null?a.memoizedProps:y)),c&1024&&(Fd=!0);break;case 6:if(Dn(s,i),Pn(i),c&4){if(i.stateNode===null)throw Error(o(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(_e){ut(i,i.return,_e)}}break;case 3:if(cc=null,y=gi,gi=lc(s.containerInfo),Dn(s,i),gi=y,Pn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Qr(s.containerInfo)}catch(_e){ut(i,i.return,_e)}Fd&&(Fd=!1,Uy(i));break;case 4:c=gi,gi=lc(i.stateNode.containerInfo),Dn(s,i),Pn(i),gi=c;break;case 12:Dn(s,i),Pn(i);break;case 31:Dn(s,i),Pn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,$u(i,c)));break;case 13:Dn(s,i),Pn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Xu=kt()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,$u(i,c)));break;case 22:y=i.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,Q=ao,ie=Ft;if(ao=Q||y,Ft=ie||O,Dn(s,i),Ft=ie,ao=Q,Pn(i),c&8192)e:for(s=i.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(a===null||O||ao||Ft||Xs(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){O=a=s;try{if(v=O.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{w=O.stateNode;var se=O.memoizedProps.style,X=se!=null&&se.hasOwnProperty("display")?se.display:null;w.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(_e){ut(O,O.return,_e)}}}else if(s.tag===6){if(a===null){O=s;try{O.stateNode.nodeValue=y?"":O.memoizedProps}catch(_e){ut(O,O.return,_e)}}}else if(s.tag===18){if(a===null){O=s;try{var W=O.stateNode;y?Av(W,!0):Av(O.stateNode,!1)}catch(_e){ut(O,O.return,_e)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,$u(i,a))));break;case 19:Dn(s,i),Pn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,$u(i,c)));break;case 30:break;case 21:break;default:Dn(s,i),Pn(i)}}function Pn(i){var s=i.flags;if(s&2){try{for(var a,c=i.return;c!==null;){if(Cy(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var y=a.stateNode,v=Gd(i);Ju(i,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(ei(A,""),a.flags&=-33);var w=Gd(i);Ju(i,w,A);break;case 3:case 4:var O=a.stateNode.containerInfo,Q=Gd(i);qd(i,Q,O);break;default:throw Error(o(161))}}catch(ie){ut(i,i.return,ie)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Uy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Uy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function uo(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ry(i,s.alternate,s),s=s.sibling}function Xs(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Xo(4,s,s.return),Xs(s);break;case 1:Ui(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Ay(s,s.return,a),Xs(s);break;case 27:fl(s.stateNode);case 26:case 5:Ui(s,s.return),Xs(s);break;case 22:s.memoizedState===null&&Xs(s);break;case 30:Xs(s);break;default:Xs(s)}i=i.sibling}}function co(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=i,v=s,A=v.flags;switch(v.tag){case 0:case 11:case 15:co(y,v,a),tl(4,v);break;case 1:if(co(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Q){ut(c,c.return,Q)}if(c=v,y=c.updateQueue,y!==null){var w=c.stateNode;try{var O=y.shared.hiddenCallbacks;if(O!==null)for(y.shared.hiddenCallbacks=null,y=0;y<O.length;y++)fg(O[y],w)}catch(Q){ut(c,c.return,Q)}}a&&A&64&&Sy(v),nl(v,v.return);break;case 27:xy(v);case 26:case 5:co(y,v,a),a&&c===null&&A&4&&by(v),nl(v,v.return);break;case 12:co(y,v,a);break;case 31:co(y,v,a),a&&A&4&&My(y,v);break;case 13:co(y,v,a),a&&A&4&&Dy(y,v);break;case 22:v.memoizedState===null&&co(y,v,a),nl(v,v.return);break;case 30:break;default:co(y,v,a)}s=s.sibling}}function Hd(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Fa(a))}function zd(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Fa(i))}function yi(i,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Vy(i,s,a,c),s=s.sibling}function Vy(i,s,a,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:yi(i,s,a,c),y&2048&&tl(9,s);break;case 1:yi(i,s,a,c);break;case 3:yi(i,s,a,c),y&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Fa(i)));break;case 12:if(y&2048){yi(i,s,a,c),i=s.stateNode;try{var v=s.memoizedProps,A=v.id,w=v.onPostCommit;typeof w=="function"&&w(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(O){ut(s,s.return,O)}}else yi(i,s,a,c);break;case 31:yi(i,s,a,c);break;case 13:yi(i,s,a,c);break;case 23:break;case 22:v=s.stateNode,A=s.alternate,s.memoizedState!==null?v._visibility&2?yi(i,s,a,c):il(i,s):v._visibility&2?yi(i,s,a,c):(v._visibility|=2,Or(i,s,a,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&Hd(A,s);break;case 24:yi(i,s,a,c),y&2048&&zd(s.alternate,s);break;default:yi(i,s,a,c)}}function Or(i,s,a,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=i,A=s,w=a,O=c,Q=A.flags;switch(A.tag){case 0:case 11:case 15:Or(v,A,w,O,y),tl(8,A);break;case 23:break;case 22:var ie=A.stateNode;A.memoizedState!==null?ie._visibility&2?Or(v,A,w,O,y):il(v,A):(ie._visibility|=2,Or(v,A,w,O,y)),y&&Q&2048&&Hd(A.alternate,A);break;case 24:Or(v,A,w,O,y),y&&Q&2048&&zd(A.alternate,A);break;default:Or(v,A,w,O,y)}s=s.sibling}}function il(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,c=s,y=c.flags;switch(c.tag){case 22:il(a,c),y&2048&&Hd(c.alternate,c);break;case 24:il(a,c),y&2048&&zd(c.alternate,c);break;default:il(a,c)}s=s.sibling}}var ol=8192;function Br(i,s,a){if(i.subtreeFlags&ol)for(i=i.child;i!==null;)ky(i,s,a),i=i.sibling}function ky(i,s,a){switch(i.tag){case 26:Br(i,s,a),i.flags&ol&&i.memoizedState!==null&&Hb(a,gi,i.memoizedState,i.memoizedProps);break;case 5:Br(i,s,a);break;case 3:case 4:var c=gi;gi=lc(i.stateNode.containerInfo),Br(i,s,a),gi=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=ol,ol=16777216,Br(i,s,a),ol=c):Br(i,s,a));break;default:Br(i,s,a)}}function Ly(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function sl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];Wt=c,By(c,i)}Ly(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Oy(i),i=i.sibling}function Oy(i){switch(i.tag){case 0:case 11:case 15:sl(i),i.flags&2048&&Xo(9,i,i.return);break;case 3:sl(i);break;case 12:sl(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Qu(i)):sl(i);break;default:sl(i)}}function Qu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];Wt=c,By(c,i)}Ly(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Xo(8,s,s.return),Qu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Qu(s));break;default:Qu(s)}i=i.sibling}}function By(i,s){for(;Wt!==null;){var a=Wt;switch(a.tag){case 0:case 11:case 15:Xo(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Fa(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Wt=c;else e:for(a=i;Wt!==null;){c=Wt;var y=c.sibling,v=c.return;if(Iy(c),c===a){Wt=null;break e}if(y!==null){y.return=v,Wt=y;break e}Wt=v}}}var ob={getCacheForType:function(i){var s=sn(Bt),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return sn(Bt).controller.signal}},sb=typeof WeakMap=="function"?WeakMap:Map,st=0,gt=null,He=null,Ke=0,lt=0,Kn=null,jo=!1,Gr=!1,Kd=!1,fo=0,wt=0,Wo=0,js=0,Yd=0,Yn=0,qr=0,rl=null,Un=null,Jd=!1,Xu=0,Gy=0,ju=1/0,Wu=null,Zo=null,Yt=0,es=null,Fr=null,ho=0,$d=0,Qd=null,qy=null,al=0,Xd=null;function Jn(){return(st&2)!==0&&Ke!==0?Ke&-Ke:te.T!==null?nh():zi()}function Fy(){if(Yn===0)if((Ke&536870912)===0||$e){var i=Ce;Ce<<=1,(Ce&3932160)===0&&(Ce=262144),Yn=i}else Yn=536870912;return i=Hn.current,i!==null&&(i.flags|=32),Yn}function Vn(i,s,a){(i===gt&&(lt===2||lt===9)||i.cancelPendingCommit!==null)&&(Hr(i,0),ts(i,Ke,Yn,!1)),bo(i,a),((st&2)===0||i!==gt)&&(i===gt&&((st&2)===0&&(js|=a),wt===4&&ts(i,Ke,Yn,!1)),Vi(i))}function Hy(i,s,a){if((st&6)!==0)throw Error(o(327));var c=!a&&(s&127)===0&&(s&i.expiredLanes)===0||Kt(i,s),y=c?lb(i,s):Wd(i,s,!0),v=c;do{if(y===0){Gr&&!c&&ts(i,s,0,!1);break}else{if(a=i.current.alternate,v&&!rb(a)){y=Wd(i,s,!1),v=!1;continue}if(y===2){if(v=s,i.errorRecoveryDisabledLanes&v)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var w=i;y=rl;var O=w.current.memoizedState.isDehydrated;if(O&&(Hr(w,A).flags|=256),A=Wd(w,A,!1),A!==2){if(Kd&&!O){w.errorRecoveryDisabledLanes|=v,js|=v,y=4;break e}v=Un,Un=y,v!==null&&(Un===null?Un=v:Un.push.apply(Un,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){Hr(i,0),ts(i,s,0,!0);break}e:{switch(c=i,v=y,v){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:ts(c,s,Yn,!jo);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(y=Xu+300-kt(),10<y)){if(ts(c,s,Yn,!jo),rt(c,0,!0)!==0)break e;ho=s,c.timeoutHandle=Tv(zy.bind(null,c,a,Un,Wu,Jd,s,Yn,js,qr,jo,v,"Throttled",-0,0),y);break e}zy(c,a,Un,Wu,Jd,s,Yn,js,qr,jo,v,null,-0,0)}}break}while(!0);Vi(i)}function zy(i,s,a,c,y,v,A,w,O,Q,ie,se,X,W){if(i.timeoutHandle=-1,se=s.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qt},ky(s,v,se);var _e=(v&62914560)===v?Xu-kt():(v&4194048)===v?Gy-kt():0;if(_e=zb(se,_e),_e!==null){ho=v,i.cancelPendingCommit=_e(Wy.bind(null,i,s,v,a,c,y,A,w,O,ie,se,null,X,W)),ts(i,v,A,!Q);return}}Wy(i,s,v,a,c,y,A,w,O)}function rb(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!qn(v(),y))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ts(i,s,a,c){s&=~Yd,s&=~js,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var y=s;0<y;){var v=31-ce(y),A=1<<v;c[v]=-1,y&=~A}a!==0&&Ea(i,a,s)}function Zu(){return(st&6)===0?(ll(0),!1):!0}function jd(){if(He!==null){if(lt===0)var i=He.return;else i=He,to=Fs=null,hd(i),Pr=null,za=0,i=He;for(;i!==null;)Ey(i.alternate,i),i=i.return;He=null}}function Hr(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,xb(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),ho=0,jd(),gt=i,He=a=Zi(i.current,null),Ke=s,lt=0,Kn=null,jo=!1,Gr=Kt(i,s),Kd=!1,qr=Yn=Yd=js=Wo=wt=0,Un=rl=null,Jd=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var y=31-ce(c),v=1<<y;s|=i[y],c&=~v}return fo=s,Tu(),a}function Ky(i,s){Be=null,te.H=Wa,s===Dr||s===Ru?(s=ag(),lt=3):s===td?(s=ag(),lt=4):lt=s===Id?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kn=s,He===null&&(wt=1,Fu(i,ni(s,i.current)))}function Yy(){var i=Hn.current;return i===null?!0:(Ke&4194048)===Ke?ri===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?i===ri:!1}function Jy(){var i=te.H;return te.H=Wa,i===null?Wa:i}function $y(){var i=te.A;return te.A=ob,i}function ec(){wt=4,jo||(Ke&4194048)!==Ke&&Hn.current!==null||(Gr=!0),(Wo&134217727)===0&&(js&134217727)===0||gt===null||ts(gt,Ke,Yn,!1)}function Wd(i,s,a){var c=st;st|=2;var y=Jy(),v=$y();(gt!==i||Ke!==s)&&(Wu=null,Hr(i,s)),s=!1;var A=wt;e:do try{if(lt!==0&&He!==null){var w=He,O=Kn;switch(lt){case 8:jd(),A=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(s=!0);var Q=lt;if(lt=0,Kn=null,zr(i,w,O,Q),a&&Gr){A=0;break e}break;default:Q=lt,lt=0,Kn=null,zr(i,w,O,Q)}}ab(),A=wt;break}catch(ie){Ky(i,ie)}while(!0);return s&&i.shellSuspendCounter++,to=Fs=null,st=c,te.H=y,te.A=v,He===null&&(gt=null,Ke=0,Tu()),A}function ab(){for(;He!==null;)Qy(He)}function lb(i,s){var a=st;st|=2;var c=Jy(),y=$y();gt!==i||Ke!==s?(Wu=null,ju=kt()+500,Hr(i,s)):Gr=Kt(i,s);e:do try{if(lt!==0&&He!==null){s=He;var v=Kn;t:switch(lt){case 1:lt=0,Kn=null,zr(i,s,v,1);break;case 2:case 9:if(sg(v)){lt=0,Kn=null,Xy(s);break}s=function(){lt!==2&&lt!==9||gt!==i||(lt=7),Vi(i)},v.then(s,s);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:sg(v)?(lt=0,Kn=null,Xy(s)):(lt=0,Kn=null,zr(i,s,v,7));break;case 5:var A=null;switch(He.tag){case 26:A=He.memoizedState;case 5:case 27:var w=He;if(A?Vv(A):w.stateNode.complete){lt=0,Kn=null;var O=w.sibling;if(O!==null)He=O;else{var Q=w.return;Q!==null?(He=Q,tc(Q)):He=null}break t}}lt=0,Kn=null,zr(i,s,v,5);break;case 6:lt=0,Kn=null,zr(i,s,v,6);break;case 8:jd(),wt=6;break e;default:throw Error(o(462))}}ub();break}catch(ie){Ky(i,ie)}while(!0);return to=Fs=null,te.H=c,te.A=y,st=a,He!==null?0:(gt=null,Ke=0,Tu(),wt)}function ub(){for(;He!==null&&!Xl();)Qy(He)}function Qy(i){var s=_y(i.alternate,i,fo);i.memoizedProps=i.pendingProps,s===null?tc(i):He=s}function Xy(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=hy(a,s,s.pendingProps,s.type,void 0,Ke);break;case 11:s=hy(a,s,s.pendingProps,s.type.render,s.ref,Ke);break;case 5:hd(s);default:Ey(a,s),s=He=$m(s,fo),s=_y(a,s,fo)}i.memoizedProps=i.pendingProps,s===null?tc(i):He=s}function zr(i,s,a,c){to=Fs=null,hd(s),Pr=null,za=0;var y=s.return;try{if(jA(i,y,s,a,Ke)){wt=1,Fu(i,ni(a,i.current)),He=null;return}}catch(v){if(y!==null)throw He=y,v;wt=1,Fu(i,ni(a,i.current)),He=null;return}s.flags&32768?($e||c===1?i=!0:Gr||(Ke&536870912)!==0?i=!1:(jo=i=!0,(c===2||c===9||c===3||c===6)&&(c=Hn.current,c!==null&&c.tag===13&&(c.flags|=16384))),jy(s,i)):tc(s)}function tc(i){var s=i;do{if((s.flags&32768)!==0){jy(s,jo);return}i=s.return;var a=eb(s.alternate,s,fo);if(a!==null){He=a;return}if(s=s.sibling,s!==null){He=s;return}He=s=i}while(s!==null);wt===0&&(wt=5)}function jy(i,s){do{var a=tb(i.alternate,i);if(a!==null){a.flags&=32767,He=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){He=i;return}He=i=a}while(i!==null);wt=6,He=null}function Wy(i,s,a,c,y,v,A,w,O){i.cancelPendingCommit=null;do nc();while(Yt!==0);if((st&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(v=s.lanes|s.childLanes,v|=Gf,tn(i,a,v,A,w,O),i===gt&&(He=gt=null,Ke=0),Fr=s,es=i,ho=a,$d=v,Qd=y,qy=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,hb(di,function(){return iv(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=te.T,te.T=null,y=fe.p,fe.p=2,A=st,st|=4;try{nb(i,s,a)}finally{st=A,fe.p=y,te.T=c}}Yt=1,Zy(),ev(),tv()}}function Zy(){if(Yt===1){Yt=0;var i=es,s=Fr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=te.T,te.T=null;var c=fe.p;fe.p=2;var y=st;st|=4;try{Py(s,i);var v=ch,A=Bm(i.containerInfo),w=v.focusedElem,O=v.selectionRange;if(A!==w&&w&&w.ownerDocument&&Om(w.ownerDocument.documentElement,w)){if(O!==null&&Vf(w)){var Q=O.start,ie=O.end;if(ie===void 0&&(ie=Q),"selectionStart"in w)w.selectionStart=Q,w.selectionEnd=Math.min(ie,w.value.length);else{var se=w.ownerDocument||document,X=se&&se.defaultView||window;if(X.getSelection){var W=X.getSelection(),_e=w.textContent.length,Ne=Math.min(O.start,_e),mt=O.end===void 0?Ne:Math.min(O.end,_e);!W.extend&&Ne>mt&&(A=mt,mt=Ne,Ne=A);var z=Lm(w,Ne),F=Lm(w,mt);if(z&&F&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==F.node||W.focusOffset!==F.offset)){var J=se.createRange();J.setStart(z.node,z.offset),W.removeAllRanges(),Ne>mt?(W.addRange(J),W.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),W.addRange(J))}}}}for(se=[],W=w;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<se.length;w++){var oe=se[w];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}pc=!!uh,ch=uh=null}finally{st=y,fe.p=c,te.T=a}}i.current=s,Yt=2}}function ev(){if(Yt===2){Yt=0;var i=es,s=Fr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=te.T,te.T=null;var c=fe.p;fe.p=2;var y=st;st|=4;try{Ry(i,s.alternate,s)}finally{st=y,fe.p=c,te.T=a}}Yt=3}}function tv(){if(Yt===4||Yt===3){Yt=0,Ao();var i=es,s=Fr,a=ho,c=qy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Yt=5:(Yt=0,Fr=es=null,nv(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Zo=null),Aa(a),s=s.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(bi,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=te.T,y=fe.p,fe.p=2,te.T=null;try{for(var v=i.onRecoverableError,A=0;A<c.length;A++){var w=c[A];v(w.value,{componentStack:w.stack})}}finally{te.T=s,fe.p=y}}(ho&3)!==0&&nc(),Vi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Xd?al++:(al=0,Xd=i):al=0,ll(0)}}function nv(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Fa(s)))}function nc(){return Zy(),ev(),tv(),iv()}function iv(){if(Yt!==5)return!1;var i=es,s=$d;$d=0;var a=Aa(ho),c=te.T,y=fe.p;try{fe.p=32>a?32:a,te.T=null,a=Qd,Qd=null;var v=es,A=ho;if(Yt=0,Fr=es=null,ho=0,(st&6)!==0)throw Error(o(331));var w=st;if(st|=4,Oy(v.current),Vy(v,v.current,A,a),st=w,ll(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(bi,v)}catch{}return!0}finally{fe.p=y,te.T=c,nv(i,s)}}function ov(i,s,a){s=ni(a,s),s=Rd(i.stateNode,s,2),i=Jo(i,s,2),i!==null&&(bo(i,2),Vi(i))}function ut(i,s,a){if(i.tag===3)ov(i,i,a);else for(;s!==null;){if(s.tag===3){ov(s,i,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Zo===null||!Zo.has(c))){i=ni(a,i),a=sy(2),c=Jo(s,a,2),c!==null&&(ry(a,c,s,i),bo(c,2),Vi(c));break}}s=s.return}}function Zd(i,s,a){var c=i.pingCache;if(c===null){c=i.pingCache=new sb;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(a)||(Kd=!0,y.add(a),i=cb.bind(null,i,s,a),s.then(i,i))}function cb(i,s,a){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,gt===i&&(Ke&a)===a&&(wt===4||wt===3&&(Ke&62914560)===Ke&&300>kt()-Xu?(st&2)===0&&Hr(i,0):Yd|=a,qr===Ke&&(qr=0)),Vi(i)}function sv(i,s){s===0&&(s=Ta()),i=Bs(i,s),i!==null&&(bo(i,s),Vi(i))}function fb(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),sv(i,a)}function db(i,s){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(s),sv(i,a)}function hb(i,s){return So(i,s)}var ic=null,Kr=null,eh=!1,oc=!1,th=!1,ns=0;function Vi(i){i!==Kr&&i.next===null&&(Kr===null?ic=Kr=i:Kr=Kr.next=i),oc=!0,eh||(eh=!0,mb())}function ll(i,s){if(!th&&oc){th=!0;do for(var a=!1,c=ic;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,w=c.pingedLanes;v=(1<<31-ce(42|i)+1)-1,v&=y&~(A&~w),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,uv(c,v))}else v=Ke,v=rt(c,c===gt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Kt(c,v)||(a=!0,uv(c,v));c=c.next}while(a);th=!1}}function pb(){rv()}function rv(){oc=eh=!1;var i=0;ns!==0&&Cb()&&(i=ns);for(var s=kt(),a=null,c=ic;c!==null;){var y=c.next,v=av(c,s);v===0?(c.next=null,a===null?ic=y:a.next=y,y===null&&(Kr=a)):(a=c,(i!==0||(v&3)!==0)&&(oc=!0)),c=y}Yt!==0&&Yt!==5||ll(i),ns!==0&&(ns=0)}function av(i,s){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var A=31-ce(v),w=1<<A,O=y[A];O===-1?((w&a)===0||(w&c)!==0)&&(y[A]=_n(w,s)):O<=s&&(i.expiredLanes|=w),v&=~w}if(s=gt,a=Ke,a=rt(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===s&&(lt===2||lt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&bs(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Kt(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(c!==null&&bs(c),Aa(a)){case 2:case 8:a=Lt;break;case 32:a=di;break;case 268435456:a=xs;break;default:a=di}return c=lv.bind(null,i),a=So(a,c),i.callbackPriority=s,i.callbackNode=a,s}return c!==null&&c!==null&&bs(c),i.callbackPriority=2,i.callbackNode=null,2}function lv(i,s){if(Yt!==0&&Yt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(nc()&&i.callbackNode!==a)return null;var c=Ke;return c=rt(i,i===gt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Hy(i,c,s),av(i,kt()),i.callbackNode!=null&&i.callbackNode===a?lv.bind(null,i):null)}function uv(i,s){if(nc())return null;Hy(i,s,!0)}function mb(){wb(function(){(st&6)!==0?So(Nt,pb):rv()})}function nh(){if(ns===0){var i=Nr;i===0&&(i=Me,Me<<=1,(Me&261888)===0&&(Me=256)),ns=i}return ns}function cv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ii(""+i)}function fv(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function gb(i,s,a,c,y){if(s==="submit"&&a&&a.stateNode===y){var v=cv((y[nn]||null).action),A=c.submitter;A&&(s=(s=A[nn]||null)?cv(s.formAction):A.getAttribute("formAction"),s!==null&&(v=s,A=null));var w=new Ds("action","action",null,c,y);i.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ns!==0){var O=A?fv(y,A):new FormData(y);Sd(a,{pending:!0,data:O,method:y.method,action:v},null,O)}}else typeof v=="function"&&(w.preventDefault(),O=A?fv(y,A):new FormData(y),Sd(a,{pending:!0,data:O,method:y.method,action:v},v,O))},currentTarget:y}]})}}for(var ih=0;ih<Bf.length;ih++){var oh=Bf[ih],yb=oh.toLowerCase(),vb=oh[0].toUpperCase()+oh.slice(1);mi(yb,"on"+vb)}mi(Fm,"onAnimationEnd"),mi(Hm,"onAnimationIteration"),mi(zm,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(UA,"onTransitionRun"),mi(VA,"onTransitionStart"),mi(kA,"onTransitionCancel"),mi(Km,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_b=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ul));function dv(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var v=void 0;if(s)for(var A=c.length-1;0<=A;A--){var w=c[A],O=w.instance,Q=w.currentTarget;if(w=w.listener,O!==v&&y.isPropagationStopped())break e;v=w,y.currentTarget=Q;try{v(y)}catch(ie){_u(ie)}y.currentTarget=null,v=O}else for(A=0;A<c.length;A++){if(w=c[A],O=w.instance,Q=w.currentTarget,w=w.listener,O!==v&&y.isPropagationStopped())break e;v=w,y.currentTarget=Q;try{v(y)}catch(ie){_u(ie)}y.currentTarget=null,v=O}}}}function ze(i,s){var a=s[wo];a===void 0&&(a=s[wo]=new Set);var c=i+"__bubble";a.has(c)||(hv(s,i,2,!1),a.add(c))}function sh(i,s,a){var c=0;s&&(c|=4),hv(a,i,c,s)}var sc="_reactListening"+Math.random().toString(36).slice(2);function rh(i){if(!i[sc]){i[sc]=!0,dr.forEach(function(a){a!=="selectionchange"&&(_b.has(a)||sh(a,!1,i),sh(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[sc]||(s[sc]=!0,sh("selectionchange",!1,s))}}function hv(i,s,a,c){switch(Fv(s)){case 2:var y=Jb;break;case 8:y=$b;break;default:y=Eh}a=y.bind(null,s,a,i),y=void 0,!Ma||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(s,a,{capture:!0,passive:y}):i.addEventListener(s,a,!0):y!==void 0?i.addEventListener(s,a,{passive:y}):i.addEventListener(s,a,!1)}function ah(i,s,a,c,y){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var w=c.stateNode.containerInfo;if(w===y)break;if(A===4)for(A=c.return;A!==null;){var O=A.tag;if((O===3||O===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;w!==null;){if(A=Yi(w),A===null)return;if(O=A.tag,O===5||O===6||O===26||O===27){c=v=A;continue e}w=w.parentNode}}c=c.return}iu(function(){var Q=v,ie=yr(a),se=[];e:{var X=Ym.get(i);if(X!==void 0){var W=Ds,_e=i;switch(i){case"keypress":if(Ms(a)===0)break e;case"keydown":case"keyup":W=du;break;case"focusin":_e="focus",W=Lo;break;case"focusout":_e="blur",W=Lo;break;case"beforeblur":case"afterblur":W=Lo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=su;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=pu;break;case Fm:case Hm:case zm:W=Tr;break;case Km:W=Er;break;case"scroll":case"scrollend":W=ou;break;case"wheel":W=gu;break;case"copy":case"cut":case"paste":W=lu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ka;break;case"toggle":case"beforetoggle":W=Bo}var Ne=(s&4)!==0,mt=!Ne&&(i==="scroll"||i==="scrollend"),z=Ne?X!==null?X+"Capture":null:X;Ne=[];for(var F=Q,J;F!==null;){var oe=F;if(J=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||J===null||z===null||(oe=In(F,z),oe!=null&&Ne.push(cl(F,oe,J))),mt)break;F=F.return}0<Ne.length&&(X=new W(X,_e,null,a,ie),se.push({event:X,listeners:Ne}))}}if((s&7)===0){e:{if(X=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",X&&a!==gr&&(_e=a.relatedTarget||a.fromElement)&&(Yi(_e)||_e[xi]))break e;if((W||X)&&(X=ie.window===ie?ie:(X=ie.ownerDocument)?X.defaultView||X.parentWindow:window,W?(_e=a.relatedTarget||a.toElement,W=Q,_e=_e?Yi(_e):null,_e!==null&&(mt=l(_e),Ne=_e.tag,_e!==mt||Ne!==5&&Ne!==27&&Ne!==6)&&(_e=null)):(W=null,_e=Q),W!==_e)){if(Ne=su,oe="onMouseLeave",z="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(Ne=ka,oe="onPointerLeave",z="onPointerEnter",F="pointer"),mt=W==null?X:Rs(W),J=_e==null?X:Rs(_e),X=new Ne(oe,F+"leave",W,a,ie),X.target=mt,X.relatedTarget=J,oe=null,Yi(ie)===Q&&(Ne=new Ne(z,F+"enter",_e,a,ie),Ne.target=J,Ne.relatedTarget=mt,oe=Ne),mt=oe,W&&_e)t:{for(Ne=Tb,z=W,F=_e,J=0,oe=z;oe;oe=Ne(oe))J++;oe=0;for(var xe=F;xe;xe=Ne(xe))oe++;for(;0<J-oe;)z=Ne(z),J--;for(;0<oe-J;)F=Ne(F),oe--;for(;J--;){if(z===F||F!==null&&z===F.alternate){Ne=z;break t}z=Ne(z),F=Ne(F)}Ne=null}else Ne=null;W!==null&&pv(se,X,W,Ne,!1),_e!==null&&mt!==null&&pv(se,mt,_e,Ne,!0)}}e:{if(X=Q?Rs(Q):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var et=Mm;else if(Nn(X))if(Dm)et=MA;else{et=IA;var Se=RA}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Ia(Q.elementType)&&(et=Mm):et=NA;if(et&&(et=et(i,Q))){ks(se,et,a,ie);break e}Se&&Se(i,X,Q),i==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&mr(X,"number",X.value)}switch(Se=Q?Rs(Q):window,i){case"focusin":(Nn(Se)||Se.contentEditable==="true")&&(Sr=Se,kf=Q,Ba=null);break;case"focusout":Ba=kf=Sr=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,Gm(se,a,ie);break;case"selectionchange":if(PA)break;case"keydown":case"keyup":Gm(se,a,ie)}var Ge;if(T)e:{switch(i){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Fe?at(i,a)&&(Ye="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ye="onCompositionStart");Ye&&(K&&a.locale!=="ko"&&(Fe||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Fe&&(Ge=Po()):(Gn=ie,vr="value"in Gn?Gn.value:Gn.textContent,Fe=!0)),Se=rc(Q,Ye),0<Se.length&&(Ye=new Pa(Ye,i,null,a,ie),se.push({event:Ye,listeners:Se}),Ge?Ye.data=Ge:(Ge=Ot(a),Ge!==null&&(Ye.data=Ge)))),(Ge=I?Xt(i,a):jt(i,a))&&(Ye=rc(Q,"onBeforeInput"),0<Ye.length&&(Se=new Pa("onBeforeInput","beforeinput",null,a,ie),se.push({event:Se,listeners:Ye}),Se.data=Ge)),gb(se,i,Q,a,ie)}dv(se,s)})}function cl(i,s,a){return{instance:i,listener:s,currentTarget:a}}function rc(i,s){for(var a=s+"Capture",c=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=In(i,a),y!=null&&c.unshift(cl(i,y,v)),y=In(i,s),y!=null&&c.push(cl(i,y,v))),i.tag===3)return c;i=i.return}return[]}function Tb(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function pv(i,s,a,c,y){for(var v=s._reactName,A=[];a!==null&&a!==c;){var w=a,O=w.alternate,Q=w.stateNode;if(w=w.tag,O!==null&&O===c)break;w!==5&&w!==26&&w!==27||Q===null||(O=Q,y?(Q=In(a,v),Q!=null&&A.unshift(cl(a,Q,O))):y||(Q=In(a,v),Q!=null&&A.push(cl(a,Q,O)))),a=a.return}A.length!==0&&i.push({event:s,listeners:A})}var Eb=/\r\n?/g,Sb=/\u0000|\uFFFD/g;function mv(i){return(typeof i=="string"?i:""+i).replace(Eb,`
`).replace(Sb,"")}function gv(i,s){return s=mv(s),mv(i)===s}function pt(i,s,a,c,y,v){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||ei(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&ei(i,""+c);break;case"className":No(i,"class",c);break;case"tabIndex":No(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":No(i,a,c);break;case"style":tu(i,c,v);break;case"data":if(s!=="object"){No(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ii(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&pt(i,s,"name",y.name,y,null),pt(i,s,"formEncType",y.formEncType,y,null),pt(i,s,"formMethod",y.formMethod,y,null),pt(i,s,"formTarget",y.formTarget,y,null)):(pt(i,s,"encType",y.encType,y,null),pt(i,s,"method",y.method,y,null),pt(i,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ii(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Qt);break;case"onScroll":c!=null&&ze("scroll",i);break;case"onScrollEnd":c!=null&&ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Ii(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":ze("beforetoggle",i),ze("toggle",i),Io(i,"popover",c);break;case"xlinkActuate":Zn(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Zn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Zn(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Zn(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Zn(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Zn(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Io(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Nf.get(a)||a,Io(i,a,c))}}function lh(i,s,a,c,y,v){switch(a){case"style":tu(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof c=="string"?ei(i,c):(typeof c=="number"||typeof c=="bigint")&&ei(i,""+c);break;case"onScroll":c!=null&&ze("scroll",i);break;case"onScrollEnd":c!=null&&ze("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Qt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ro.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),s=a.slice(2,y?a.length-7:void 0),v=i[nn]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(s,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Io(i,a,c)}}}function an(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",i),ze("load",i);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:pt(i,s,v,A,a,null)}}y&&pt(i,s,"srcSet",a.srcSet,a,null),c&&pt(i,s,"src",a.src,a,null);return;case"input":ze("invalid",i);var w=v=A=y=null,O=null,Q=null;for(c in a)if(a.hasOwnProperty(c)){var ie=a[c];if(ie!=null)switch(c){case"name":y=ie;break;case"type":A=ie;break;case"checked":O=ie;break;case"defaultChecked":Q=ie;break;case"value":v=ie;break;case"defaultValue":w=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(o(137,s));break;default:pt(i,s,c,ie,a,null)}}Is(i,v,w,O,Q,A,y,!1);return;case"select":ze("invalid",i),c=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(w=a[y],w!=null))switch(y){case"value":v=w;break;case"defaultValue":A=w;break;case"multiple":c=w;default:pt(i,s,y,w,a,null)}s=v,a=A,i.multiple=!!c,s!=null?Ze(i,!!c,s,!1):a!=null&&Ze(i,!!c,a,!0);return;case"textarea":ze("invalid",i),v=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(w=a[A],w!=null))switch(A){case"value":c=w;break;case"defaultValue":y=w;break;case"children":v=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(o(91));break;default:pt(i,s,A,w,a,null)}Do(i,c,y,v);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(c=a[O],c!=null))switch(O){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:pt(i,s,O,c,a,null)}return;case"dialog":ze("beforetoggle",i),ze("toggle",i),ze("cancel",i),ze("close",i);break;case"iframe":case"object":ze("load",i);break;case"video":case"audio":for(c=0;c<ul.length;c++)ze(ul[c],i);break;case"image":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"embed":case"source":case"link":ze("error",i),ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(c=a[Q],c!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:pt(i,s,Q,c,a,null)}return;default:if(Ia(s)){for(ie in a)a.hasOwnProperty(ie)&&(c=a[ie],c!==void 0&&lh(i,s,ie,c,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(c=a[w],c!=null&&pt(i,s,w,c,a,null))}function Ab(i,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,w=null,O=null,Q=null,ie=null;for(W in a){var se=a[W];if(a.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":O=se;default:c.hasOwnProperty(W)||pt(i,s,W,null,c,se)}}for(var X in c){var W=c[X];if(se=a[X],c.hasOwnProperty(X)&&(W!=null||se!=null))switch(X){case"type":v=W;break;case"name":y=W;break;case"checked":Q=W;break;case"defaultChecked":ie=W;break;case"value":A=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(o(137,s));break;default:W!==se&&pt(i,s,X,W,c,se)}}Mo(i,A,w,O,Q,ie,v,y);return;case"select":W=A=w=X=null;for(v in a)if(O=a[v],a.hasOwnProperty(v)&&O!=null)switch(v){case"value":break;case"multiple":W=O;default:c.hasOwnProperty(v)||pt(i,s,v,null,c,O)}for(y in c)if(v=c[y],O=a[y],c.hasOwnProperty(y)&&(v!=null||O!=null))switch(y){case"value":X=v;break;case"defaultValue":w=v;break;case"multiple":A=v;default:v!==O&&pt(i,s,y,v,c,O)}s=w,a=A,c=W,X!=null?Ze(i,!!a,X,!1):!!c!=!!a&&(s!=null?Ze(i,!!a,s,!0):Ze(i,!!a,a?[]:"",!1));return;case"textarea":W=X=null;for(w in a)if(y=a[w],a.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:pt(i,s,w,null,c,y)}for(A in c)if(y=c[A],v=a[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":X=y;break;case"defaultValue":W=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==v&&pt(i,s,A,y,c,v)}Ns(i,X,W);return;case"option":for(var _e in a)if(X=a[_e],a.hasOwnProperty(_e)&&X!=null&&!c.hasOwnProperty(_e))switch(_e){case"selected":i.selected=!1;break;default:pt(i,s,_e,null,c,X)}for(O in c)if(X=c[O],W=a[O],c.hasOwnProperty(O)&&X!==W&&(X!=null||W!=null))switch(O){case"selected":i.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:pt(i,s,O,X,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)X=a[Ne],a.hasOwnProperty(Ne)&&X!=null&&!c.hasOwnProperty(Ne)&&pt(i,s,Ne,null,c,X);for(Q in c)if(X=c[Q],W=a[Q],c.hasOwnProperty(Q)&&X!==W&&(X!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,s));break;default:pt(i,s,Q,X,c,W)}return;default:if(Ia(s)){for(var mt in a)X=a[mt],a.hasOwnProperty(mt)&&X!==void 0&&!c.hasOwnProperty(mt)&&lh(i,s,mt,void 0,c,X);for(ie in c)X=c[ie],W=a[ie],!c.hasOwnProperty(ie)||X===W||X===void 0&&W===void 0||lh(i,s,ie,X,c,W);return}}for(var z in a)X=a[z],a.hasOwnProperty(z)&&X!=null&&!c.hasOwnProperty(z)&&pt(i,s,z,null,c,X);for(se in c)X=c[se],W=a[se],!c.hasOwnProperty(se)||X===W||X==null&&W==null||pt(i,s,se,X,c,W)}function yv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bb(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,A=y.initiatorType,w=y.duration;if(v&&w&&yv(A)){for(A=0,w=y.responseEnd,c+=1;c<a.length;c++){var O=a[c],Q=O.startTime;if(Q>w)break;var ie=O.transferSize,se=O.initiatorType;ie&&yv(se)&&(O=O.responseEnd,A+=ie*(O<w?1:(w-Q)/(O-Q)))}if(--c,s+=8*(v+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var uh=null,ch=null;function ac(i){return i.nodeType===9?i:i.ownerDocument}function vv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _v(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function fh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var dh=null;function Cb(){var i=window.event;return i&&i.type==="popstate"?i===dh?!1:(dh=i,!0):(dh=null,!1)}var Tv=typeof setTimeout=="function"?setTimeout:void 0,xb=typeof clearTimeout=="function"?clearTimeout:void 0,Ev=typeof Promise=="function"?Promise:void 0,wb=typeof queueMicrotask=="function"?queueMicrotask:typeof Ev<"u"?function(i){return Ev.resolve(null).then(i).catch(Rb)}:Tv;function Rb(i){setTimeout(function(){throw i})}function is(i){return i==="head"}function Sv(i,s){var a=s,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),Qr(s);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")fl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,fl(a);for(var v=a.firstChild;v;){var A=v.nextSibling,w=v.nodeName;v[Ki]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&fl(i.ownerDocument.body);a=y}while(a);Qr(s)}function Av(i,s){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function hh(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":hh(a),ws(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function Ib(i,s,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Ki])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=ai(i.nextSibling),i===null)break}return null}function Nb(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=ai(i.nextSibling),i===null))return null;return i}function bv(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=ai(i.nextSibling),i===null))return null;return i}function ph(i){return i.data==="$?"||i.data==="$~"}function mh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Mb(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function ai(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var gh=null;function Cv(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return ai(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function xv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function wv(i,s,a){switch(s=ac(a),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function fl(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);ws(i)}var li=new Map,Rv=new Set;function lc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var po=fe.d;fe.d={f:Db,r:Pb,D:Ub,C:Vb,L:kb,m:Lb,X:Bb,S:Ob,M:Gb};function Db(){var i=po.f(),s=Zu();return i||s}function Pb(i){var s=Ji(i);s!==null&&s.tag===5&&s.type==="form"?Kg(s):po.r(i)}var Yr=typeof document>"u"?null:document;function Iv(i,s,a){var c=Yr;if(c&&typeof s=="string"&&s){var y=Ct(s);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),Rv.has(y)||(Rv.add(y),i={rel:i,crossOrigin:a,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),an(s,"link",i),Mt(s),c.head.appendChild(s)))}}function Ub(i){po.D(i),Iv("dns-prefetch",i,null)}function Vb(i,s){po.C(i,s),Iv("preconnect",i,s)}function kb(i,s,a){po.L(i,s,a);var c=Yr;if(c&&i&&s){var y='link[rel="preload"][as="'+Ct(s)+'"]';s==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+Ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+Ct(a.imageSizes)+'"]')):y+='[href="'+Ct(i)+'"]';var v=y;switch(s){case"style":v=Jr(i);break;case"script":v=$r(i)}li.has(v)||(i=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),li.set(v,i),c.querySelector(y)!==null||s==="style"&&c.querySelector(dl(v))||s==="script"&&c.querySelector(hl(v))||(s=c.createElement("link"),an(s,"link",i),Mt(s),c.head.appendChild(s)))}}function Lb(i,s){po.m(i,s);var a=Yr;if(a&&i){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+Ct(c)+'"][href="'+Ct(i)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=$r(i)}if(!li.has(v)&&(i=E({rel:"modulepreload",href:i},s),li.set(v,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(hl(v)))return}c=a.createElement("link"),an(c,"link",i),Mt(c),a.head.appendChild(c)}}}function Ob(i,s,a){po.S(i,s,a);var c=Yr;if(c&&i){var y=hi(c).hoistableStyles,v=Jr(i);s=s||"default";var A=y.get(v);if(!A){var w={loading:0,preload:null};if(A=c.querySelector(dl(v)))w.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":s},a),(a=li.get(v))&&yh(i,a);var O=A=c.createElement("link");Mt(O),an(O,"link",i),O._p=new Promise(function(Q,ie){O.onload=Q,O.onerror=ie}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,uc(A,s,c)}A={type:"stylesheet",instance:A,count:1,state:w},y.set(v,A)}}}function Bb(i,s){po.X(i,s);var a=Yr;if(a&&i){var c=hi(a).hoistableScripts,y=$r(i),v=c.get(y);v||(v=a.querySelector(hl(y)),v||(i=E({src:i,async:!0},s),(s=li.get(y))&&vh(i,s),v=a.createElement("script"),Mt(v),an(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function Gb(i,s){po.M(i,s);var a=Yr;if(a&&i){var c=hi(a).hoistableScripts,y=$r(i),v=c.get(y);v||(v=a.querySelector(hl(y)),v||(i=E({src:i,async:!0,type:"module"},s),(s=li.get(y))&&vh(i,s),v=a.createElement("script"),Mt(v),an(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function Nv(i,s,a,c){var y=(y=De.current)?lc(y):null;if(!y)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Jr(a.href),a=hi(y).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Jr(a.href);var v=hi(y).hoistableStyles,A=v.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,A),(v=y.querySelector(dl(i)))&&!v._p&&(A.instance=v,A.state.loading=5),li.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},li.set(i,a),v||qb(y,i,a,A.state))),s&&c===null)throw Error(o(528,""));return A}if(s&&c!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=$r(a),a=hi(y).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Jr(i){return'href="'+Ct(i)+'"'}function dl(i){return'link[rel="stylesheet"]['+i+"]"}function Mv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function qb(i,s,a,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),an(s,"link",a),Mt(s),i.head.appendChild(s))}function $r(i){return'[src="'+Ct(i)+'"]'}function hl(i){return"script[async]"+i}function Dv(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+Ct(a.href)+'"]');if(c)return s.instance=c,Mt(c),c;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Mt(c),an(c,"style",y),uc(c,a.precedence,i),s.instance=c;case"stylesheet":y=Jr(a.href);var v=i.querySelector(dl(y));if(v)return s.state.loading|=4,s.instance=v,Mt(v),v;c=Mv(a),(y=li.get(y))&&yh(c,y),v=(i.ownerDocument||i).createElement("link"),Mt(v);var A=v;return A._p=new Promise(function(w,O){A.onload=w,A.onerror=O}),an(v,"link",c),s.state.loading|=4,uc(v,a.precedence,i),s.instance=v;case"script":return v=$r(a.src),(y=i.querySelector(hl(v)))?(s.instance=y,Mt(y),y):(c=a,(y=li.get(v))&&(c=E({},a),vh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Mt(y),an(y,"link",c),i.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,uc(c,a.precedence,i));return s.instance}function uc(i,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var w=c[A];if(w.dataset.precedence===s)v=w;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function yh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function vh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var cc=null;function Pv(i,s,a){if(cc===null){var c=new Map,y=cc=new Map;y.set(a,c)}else y=cc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[Ki]||v[bt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(s)||"";A=i+A;var w=c.get(A);w?w.push(v):c.set(A,[v])}}return c}function Uv(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function Fb(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Vv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Hb(i,s,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Jr(c.href),v=s.querySelector(dl(y));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=fc.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=v,Mt(v);return}v=s.ownerDocument||s,c=Mv(c),(y=li.get(y))&&yh(c,y),v=v.createElement("link"),Mt(v);var A=v;A._p=new Promise(function(w,O){A.onload=w,A.onerror=O}),an(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=fc.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var _h=0;function zb(i,s){return i.stylesheets&&i.count===0&&hc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&hc(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+s);0<i.imgBytes&&_h===0&&(_h=62500*bb());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&hc(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>_h?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function fc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var dc=null;function hc(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,dc=new Map,s.forEach(Kb,i),dc=null,fc.call(i))}function Kb(i,s){if(!(s.state.loading&4)){var a=dc.get(i);if(a)var c=a.get(null);else{a=new Map,dc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=s.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||c,v===c&&a.set(null,y),a.set(A,y),this.count++,c=fc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),s.state.loading|=4}}var pl={$$typeof:$,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function Yb(i,s,a,c,y,v,A,w,O){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.hiddenUpdates=Hi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function kv(i,s,a,c,y,v,A,w,O,Q,ie,se){return i=new Yb(i,s,a,A,O,Q,ie,se,w),s=1,v===!0&&(s|=24),v=Fn(3,null,null,s),i.current=v,v.stateNode=i,s=Wf(),s.refCount++,i.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:s},nd(v),i}function Lv(i){return i?(i=Cr,i):Cr}function Ov(i,s,a,c,y,v){y=Lv(y),c.context===null?c.context=y:c.pendingContext=y,c=Yo(s),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=Jo(i,c,s),a!==null&&(Vn(a,i,s),Ya(a,i,s))}function Bv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Th(i,s){Bv(i,s),(i=i.alternate)&&Bv(i,s)}function Gv(i){if(i.tag===13||i.tag===31){var s=Bs(i,67108864);s!==null&&Vn(s,i,67108864),Th(i,67108864)}}function qv(i){if(i.tag===13||i.tag===31){var s=Jn();s=Sa(s);var a=Bs(i,s);a!==null&&Vn(a,i,s),Th(i,s)}}var pc=!0;function Jb(i,s,a,c){var y=te.T;te.T=null;var v=fe.p;try{fe.p=2,Eh(i,s,a,c)}finally{fe.p=v,te.T=y}}function $b(i,s,a,c){var y=te.T;te.T=null;var v=fe.p;try{fe.p=8,Eh(i,s,a,c)}finally{fe.p=v,te.T=y}}function Eh(i,s,a,c){if(pc){var y=Sh(c);if(y===null)ah(i,s,c,mc,a),Hv(i,c);else if(Xb(y,i,s,a,c))c.stopPropagation();else if(Hv(i,c),s&4&&-1<Qb.indexOf(i)){for(;y!==null;){var v=Ji(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=dt(v.pendingLanes);if(A!==0){var w=v;for(w.pendingLanes|=2,w.entangledLanes|=2;A;){var O=1<<31-ce(A);w.entanglements[1]|=O,A&=~O}Vi(v),(st&6)===0&&(ju=kt()+500,ll(0))}}break;case 31:case 13:w=Bs(v,2),w!==null&&Vn(w,v,2),Zu(),Th(v,2)}if(v=Sh(c),v===null&&ah(i,s,c,mc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else ah(i,s,c,null,a)}}function Sh(i){return i=yr(i),Ah(i)}var mc=null;function Ah(i){if(mc=null,i=Yi(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=u(s),i!==null)return i;i=null}else if(a===31){if(i=d(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return mc=i,null}function Fv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cs()){case Nt:return 2;case Lt:return 8;case di:case fr:return 32;case xs:return 268435456;default:return 32}default:return 32}}var bh=!1,os=null,ss=null,rs=null,ml=new Map,gl=new Map,as=[],Qb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hv(i,s){switch(i){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":ml.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(s.pointerId)}}function yl(i,s,a,c,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},s!==null&&(s=Ji(s),s!==null&&Gv(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),i)}function Xb(i,s,a,c,y){switch(s){case"focusin":return os=yl(os,i,s,a,c,y),!0;case"dragenter":return ss=yl(ss,i,s,a,c,y),!0;case"mouseover":return rs=yl(rs,i,s,a,c,y),!0;case"pointerover":var v=y.pointerId;return ml.set(v,yl(ml.get(v)||null,i,s,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,gl.set(v,yl(gl.get(v)||null,i,s,a,c,y)),!0}return!1}function zv(i){var s=Yi(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){i.blockedOn=s,jl(i.priority,function(){qv(a)});return}}else if(s===31){if(s=d(a),s!==null){i.blockedOn=s,jl(i.priority,function(){qv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function gc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Sh(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);gr=c,a.target.dispatchEvent(c),gr=null}else return s=Ji(a),s!==null&&Gv(s),i.blockedOn=a,!1;s.shift()}return!0}function Kv(i,s,a){gc(i)&&a.delete(s)}function jb(){bh=!1,os!==null&&gc(os)&&(os=null),ss!==null&&gc(ss)&&(ss=null),rs!==null&&gc(rs)&&(rs=null),ml.forEach(Kv),gl.forEach(Kv)}function yc(i,s){i.blockedOn===s&&(i.blockedOn=null,bh||(bh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,jb)))}var vc=null;function Yv(i){vc!==i&&(vc=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){vc===i&&(vc=null);for(var s=0;s<i.length;s+=3){var a=i[s],c=i[s+1],y=i[s+2];if(typeof c!="function"){if(Ah(c||a)===null)continue;break}var v=Ji(a);v!==null&&(i.splice(s,3),s-=3,Sd(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function Qr(i){function s(O){return yc(O,i)}os!==null&&yc(os,i),ss!==null&&yc(ss,i),rs!==null&&yc(rs,i),ml.forEach(s),gl.forEach(s);for(var a=0;a<as.length;a++){var c=as[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<as.length&&(a=as[0],a.blockedOn===null);)zv(a),a.blockedOn===null&&as.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],A=y[nn]||null;if(typeof v=="function")A||Yv(a);else if(A){var w=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[nn]||null)w=A.formAction;else if(Ah(y)!==null)continue}else w=A.action;typeof w=="function"?a[c+1]=w:(a.splice(c,3),c-=3),Yv(a)}}}function Jv(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Ch(i){this._internalRoot=i}_c.prototype.render=Ch.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,c=Jn();Ov(a,c,i,s,null,null)},_c.prototype.unmount=Ch.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Ov(i.current,2,null,i,null,null),Zu(),s[xi]=null}};function _c(i){this._internalRoot=i}_c.prototype.unstable_scheduleHydration=function(i){if(i){var s=zi();i={blockedOn:null,target:i,priority:s};for(var a=0;a<as.length&&s!==0&&s<as[a].priority;a++);as.splice(a,0,i),a===0&&zv(i)}};var $v=e.version;if($v!=="19.2.4")throw Error(o(527,$v,"19.2.4"));fe.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(s),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var Wb={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{bi=Tc.inject(Wb),zt=Tc}catch{}}return _l.createRoot=function(i,s){if(!r(i))throw Error(o(299));var a=!1,c="",y=ty,v=ny,A=iy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=kv(i,1,!1,null,null,a,c,null,y,v,A,Jv),i[xi]=s.current,rh(i),new Ch(s)},_l.hydrateRoot=function(i,s,a){if(!r(i))throw Error(o(299));var c=!1,y="",v=ty,A=ny,w=iy,O=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),s=kv(i,1,!0,s,a??null,c,y,O,v,A,w,Jv),s.context=Lv(null),a=s.current,c=Jn(),c=Sa(c),y=Yo(c),y.callback=null,Jo(a,y,c),a=c,s.current.lanes=a,bo(s,a),Vi(s),i[xi]=s.current,rh(i),new _c(s)},_l.version="19.2.4",_l}var o_;function uC(){if(o_)return Rh.exports;o_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rh.exports=lC(),Rh.exports}var cC=uC();const fC=LT(cC),Gc="/edu/assets/logo-C-dOhpPe.png",Pl={phone:"01011828609",googleSheet:"https://docs.google.com/spreadsheets/d/1vVjXx-RvBcK45bfo-5LY5W0t2amk4rt_KN80he7wAE4/edit?usp=sharing"},cs=[{id:"primary",name:" ",icon:""},{id:"preparatory",name:" ",icon:""},{id:"secondary",name:" ",icon:""},{id:"languages",name:" ",icon:""}],dC=[{stage:"primary",subjects:[" ",""," ",""," "]},{stage:"preparatory",subjects:[" ",""," ",""," ","",""]},{stage:"secondary",subjects:[" ","","",""," "," "," "," ","",""]},{stage:"languages",subjects:["English (Main)","Mathematics (Lang)","Science (Lang)","Arabic","Social Studies"]}],hC=[{id:"t1",name:".  ",subject:" ",imageUrl:"https://picsum.photos/seed/t1/400",whatsapp:"01011828609",availability:"  ",teachingHours:"4:00 - 8:00 ",bio:"       .",grades:[" "," "],stages:["primary"]}],pC=[{id:"c1",title:"  ",description:"        .",stage:"primary",grade:" ",gradeId:"p4",teacherId:"t1",media:[{id:"m1",title:" ",url:"https://www.w3schools.com/html/mov_bbb.mp4",type:"video"},{id:"m2",title:"  ",url:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",type:"pdf"}]}],pn=()=>[{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]},{day:"",slots:[]}],mC=[{id:"p1",name:"  ",stage:"primary",schedule:pn(),teachers:[],courses:[]},{id:"p2",name:"  ",stage:"primary",schedule:pn(),teachers:[],courses:[]},{id:"p3",name:"  ",stage:"primary",schedule:pn(),teachers:[],courses:[]},{id:"p4",name:"  ",stage:"primary",schedule:pn(),teachers:["t1"],courses:["c1"]},{id:"p5",name:"  ",stage:"primary",schedule:pn(),teachers:["t1"],courses:[]},{id:"p6",name:"  ",stage:"primary",schedule:pn(),teachers:[],courses:[]},{id:"pr1",name:"  ",stage:"preparatory",schedule:pn(),teachers:[],courses:[]},{id:"pr2",name:"  ",stage:"preparatory",schedule:pn(),teachers:[],courses:[]},{id:"pr3",name:"  ",stage:"preparatory",schedule:pn(),teachers:[],courses:[]},{id:"s1",name:"  ",stage:"secondary",schedule:pn(),teachers:[],courses:[]},{id:"s2",name:"  ",stage:"secondary",schedule:pn(),teachers:[],courses:[]},{id:"s3",name:"  ",stage:"secondary",schedule:pn(),teachers:[],courses:[]},{id:"l1",name:"Primary 1 (Languages)",stage:"languages",schedule:pn(),teachers:[],courses:[]},{id:"l2",name:"Primary 2 (Languages)",stage:"languages",schedule:pn(),teachers:[],courses:[]},{id:"l3",name:"Prep 1 (Languages)",stage:"languages",schedule:pn(),teachers:[],courses:[]},{id:"l4",name:"Secondary 1 (Languages)",stage:"languages",schedule:pn(),teachers:[],courses:[]}],gC=({onNavigate:t,isAdmin:e})=>b.jsx("nav",{className:"bg-white border-b sticky top-0 z-50 shadow-sm",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex justify-between h-20 items-center",children:[b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("home"),children:[b.jsx("img",{src:Gc,alt:"Educators Academy Logo",className:"h-14 w-auto object-contain"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsx("span",{className:"text-[#0a192f] font-black text-xl leading-none hidden md:block",children:"Educators Academy"}),b.jsx("span",{className:"text-[#10b981] font-bold text-xs hidden md:block tracking-widest",children:"CENTER OF EXCELLENCE"})]})]}),b.jsxs("div",{className:"hidden md:flex items-center space-x-8 space-x-reverse text-gray-600 font-medium",children:[b.jsx("button",{onClick:()=>t("home"),className:"hover:text-[#10b981] transition font-bold",children:""}),b.jsx("button",{onClick:()=>t("stages"),className:"hover:text-[#10b981] transition font-bold",children:""}),b.jsx("button",{onClick:()=>t("teachers"),className:"hover:text-[#10b981] transition font-bold",children:""}),b.jsx("button",{onClick:()=>t("admin"),className:`px-4 py-2 rounded-xl font-bold transition-all ${e?"bg-[#0a192f] text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e?"  ":"  "})]}),b.jsx("a",{href:`https://wa.me/20${Pl.phone}`,target:"_blank",className:"bg-[#f97316] text-white px-6 py-2.5 rounded-full font-black hover:bg-orange-600 transition shadow-xl shadow-orange-500/20 active:scale-95",children:" "})]})})}),yC=async t=>{const e=localStorage.getItem("google_sheet_webhook_url");if(!e)return console.warn("       ."),!1;try{const n=new URLSearchParams;return n.append("studentName",t.studentName),n.append("parentPhone",t.parentPhone),n.append("teacherName",t.teacherName),n.append("timestamp",t.timestamp),await fetch(e,{method:"POST",mode:"no-cors",body:n}),!0}catch(n){return console.error("  :",n),!1}},OT=({targetName:t,type:e,onClose:n})=>{const[o,r]=Ae.useState(""),[l,u]=Ae.useState(""),[d,g]=Ae.useState(!1),[m,_]=Ae.useState(!1),[E,S]=Ae.useState(""),x=async D=>{if(D.preventDefault(),!o||!l)return;g(!0);const P=new Date().toLocaleString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0});await yC({studentName:o,parentPhone:l,teacherName:t,timestamp:P});const j=Pl.phone,$=j.startsWith("0")?`2${j}`:`20${j}`,Z=`       : ${o}  /: ${t}`,Y=`https://wa.me/${$}?text=${encodeURIComponent(Z)}`;S(Y),_(!0);const re=window.open(Y,"_blank");setTimeout(()=>{(!re||re.closed||typeof re.closed>"u")&&console.warn("Popup blocked or failed to redirect automatically."),g(!1)},1200)};return m?b.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/80 backdrop-blur-md animate-in fade-in duration-300",children:b.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 text-center shadow-2xl animate-in zoom-in-95",children:[b.jsx("div",{className:"text-7xl mb-6",children:""}),b.jsx("h3",{className:"text-3xl font-black text-[#0a192f] mb-3",children:"  !"}),b.jsx("p",{className:"text-gray-500 font-bold mb-8 text-lg leading-relaxed",children:"   .."}),b.jsxs("div",{className:"space-y-4",children:[b.jsx("a",{href:E,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-[#25d366] text-white py-5 rounded-2xl font-black text-xl hover:bg-[#1ebe57] transition-all shadow-xl shadow-green-500/20",children:"      "}),b.jsx("button",{onClick:n,className:"block w-full text-gray-400 font-bold hover:text-[#0a192f] transition-colors",children:"  "})]})]})}):b.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/60 backdrop-blur-sm animate-in fade-in duration-300 text-right",children:b.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 border-t-8 border-[#2d5a4c]",children:[b.jsxs("div",{className:"p-8 text-center",children:[b.jsx("h3",{className:"text-3xl font-black text-[#2d5a4c] mb-2",children:"  "}),b.jsxs("p",{className:"text-gray-400 font-bold text-lg",children:[" : ",t]})]}),b.jsxs("form",{onSubmit:x,className:"px-8 pb-10 space-y-5",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2 mr-1",children:"  :"}),b.jsx("input",{required:!0,type:"text",value:o,onChange:D=>r(D.target.value),className:"w-full border border-gray-200 rounded-xl p-4 bg-gray-50 focus:border-[#10b981] outline-none font-black text-right text-lg",placeholder:":   "})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2 mr-1",children:"  :"}),b.jsx("input",{required:!0,type:"tel",value:l,onChange:D=>u(D.target.value),className:"w-full border border-gray-200 rounded-xl p-4 bg-gray-50 focus:border-[#10b981] outline-none font-black text-left text-lg",dir:"ltr",placeholder:"010xxxxxxxx"})]}),b.jsxs("div",{className:"pt-4",children:[b.jsx("button",{type:"submit",disabled:d,className:"w-full bg-[#25d366] text-white py-5 rounded-xl font-black text-xl hover:bg-[#1ebe57] transition-all shadow-xl shadow-green-500/10 disabled:opacity-50",children:d?"  ...":"  "}),b.jsx("button",{type:"button",onClick:n,className:"w-full text-gray-400 font-bold mt-4 hover:text-red-500 transition-colors",children:" "})]})]})]})})},vC=({grade:t,teachers:e,courses:n,onBack:o})=>{const[r,l]=Ae.useState("schedule"),[u,d]=Ae.useState(null),[g,m]=Ae.useState(null),[_,E]=Ae.useState(null),S=e.filter(H=>t.teachers.includes(H.id)),x=n.filter(H=>t.courses.includes(H.id)),D=H=>{const j=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,$=H.match(j);return $&&$[2].length===11?`https://www.youtube.com/embed/${$[2]}`:null},V=H=>H.includes("firebasestorage")||H.endsWith(".mp4")||H.endsWith(".webm")||H.endsWith(".mov"),P=H=>H.includes("drive.google.com")&&!H.includes("/preview")?H.replace("/view","/preview").replace("/edit","/preview"):H.includes("docs.google.com/presentation")||H.includes("docs.google.com/document")?H.replace("/edit","/preview").replace("/view","/preview"):`https://docs.google.com/gview?url=${encodeURIComponent(H)}&embedded=true`;return b.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[_&&b.jsx(OT,{targetName:_.name,type:_.type,onClose:()=>E(null)}),b.jsxs("button",{onClick:o,className:"mb-8 text-gray-400 flex items-center gap-3 hover:text-[#0a192f] transition-all group font-black",children:[b.jsx("span",{className:"bg-white p-2 rounded-xl shadow-sm group-hover:-translate-x-1 transition-transform",children:""}),"   "]}),b.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl overflow-hidden mb-12 border border-gray-100 animate-in fade-in zoom-in-95 duration-700",children:[b.jsxs("div",{className:"bg-[#0a192f] p-12 text-white relative overflow-hidden text-right",children:[b.jsxs("div",{className:"relative z-10",children:[b.jsx("h1",{className:"text-5xl font-black mb-4",children:t.name}),b.jsx("p",{className:"text-blue-200/80 text-xl font-medium max-w-2xl",children:"         "})]}),b.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-[#10b981] rounded-full blur-[140px] opacity-20 -mr-40 -mt-40"}),b.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-[#f97316] rounded-full blur-[120px] opacity-10 -ml-32 -mb-32"})]}),b.jsxs("div",{className:"flex border-b bg-gray-50/50 overflow-x-auto whitespace-nowrap scrollbar-hide",children:[b.jsxs("button",{onClick:()=>l("schedule"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${r==="schedule"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[b.jsx("span",{children:""}),"  "]}),b.jsxs("button",{onClick:()=>l("teachers"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${r==="teachers"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[b.jsx("span",{children:""}),"  "]}),b.jsxs("button",{onClick:()=>l("courses"),className:`flex-1 py-6 px-10 font-black text-xl transition-all flex items-center justify-center gap-3 ${r==="courses"?"text-[#10b981] border-b-4 border-[#10b981] bg-white":"text-gray-400 hover:text-gray-600"}`,children:[b.jsx("span",{children:""}),"  "]})]}),b.jsxs("div",{className:"p-8 md:p-14 text-right",children:[r==="schedule"&&b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-6 animate-in slide-in-from-bottom-8 duration-500",children:t.schedule.map((H,j)=>b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsx("div",{className:"bg-[#0a192f] text-white py-4 rounded-3xl text-center font-black shadow-xl",children:H.day}),b.jsxs("div",{className:"space-y-4",children:[H.slots.map($=>{const Z=e.find(Y=>Y.id===$.teacherId);return b.jsxs("div",{onClick:()=>Z&&d(Z),className:`${$.color} p-6 rounded-[2rem] shadow-sm border border-black/5 flex flex-col gap-3 transform hover:scale-[1.05] hover:shadow-xl transition-all cursor-pointer`,children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("span",{className:"text-3xl",children:$.icon||""}),Z&&b.jsxs("span",{className:"text-[10px] bg-white/40 backdrop-blur-md px-3 py-1 rounded-full font-black uppercase text-gray-900",children:["/ ",Z.name.split(" ")[1]||Z.name]})]}),b.jsxs("div",{children:[b.jsx("div",{className:"font-black text-2xl text-gray-900 leading-tight",children:$.subject}),b.jsx("div",{className:"text-sm font-bold opacity-70 mt-1",children:$.time})]})]},$.id)}),H.slots.length===0&&b.jsx("div",{className:"text-gray-200 text-center py-10 italic text-sm border-2 border-dashed border-gray-100 rounded-3xl",children:" "})]})]},j))}),r==="teachers"&&b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 animate-in slide-in-from-right-8 duration-500",children:[S.map(H=>b.jsxs("div",{onClick:()=>d(H),className:"group bg-white rounded-[3rem] border border-gray-100 shadow-lg hover:shadow-2xl hover:border-[#10b981]/30 transition-all cursor-pointer overflow-hidden flex flex-col h-full active:scale-95",children:[b.jsxs("div",{className:"h-48 overflow-hidden relative",children:[b.jsx("img",{src:H.imageUrl,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000",alt:H.name}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent"}),b.jsx("div",{className:"absolute bottom-4 right-6 bg-white/20 backdrop-blur-md text-white px-5 py-1.5 rounded-full text-xs font-black",children:" "})]}),b.jsxs("div",{className:"p-8 text-center flex-1 flex flex-col items-center",children:[b.jsx("h3",{className:"text-3xl font-black mb-1 text-[#0a192f]",children:H.name}),b.jsx("p",{className:"text-[#10b981] font-black text-xl mb-6",children:H.subject}),b.jsx("div",{className:"w-full h-px bg-gray-50 mb-6"}),b.jsx("button",{onClick:j=>{j.stopPropagation(),E({name:H.name,type:""})},className:"mt-auto w-full bg-[#10b981] text-white py-5 rounded-2xl font-black text-xl hover:bg-emerald-600 transition-all shadow-xl shadow-emerald-500/10",children:"  "})]})]},H.id)),S.length===0&&b.jsx("div",{className:"col-span-full py-32 text-center",children:b.jsx("p",{className:"text-gray-300 font-black text-2xl",children:"     "})})]}),r==="courses"&&b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 animate-in slide-in-from-left-8 duration-500",children:[x.map(H=>(e.find(j=>j.id===H.teacherId),b.jsxs("div",{className:"bg-white border-2 border-gray-100 rounded-[3.5rem] flex flex-col hover:border-[#f97316] transition-all group overflow-hidden shadow-sm hover:shadow-2xl active:scale-[0.98]",children:[b.jsxs("div",{className:"h-64 overflow-hidden relative",children:[b.jsx("img",{src:H.thumbnailUrl,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000",alt:H.title}),b.jsx("div",{className:"absolute top-6 right-6 bg-[#f97316] text-white px-5 py-2 rounded-full text-xs font-black shadow-2xl animate-pulse",children:"  (4K Content)"}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"})]}),b.jsxs("div",{className:"p-10 flex-1 flex flex-col",children:[b.jsx("h3",{className:"text-3xl font-black text-[#0a192f] group-hover:text-[#f97316] transition-colors mb-4",children:H.title}),b.jsx("p",{className:"text-gray-500 text-xl leading-relaxed mb-8 flex-1 line-clamp-3",children:H.description}),b.jsxs("div",{className:"space-y-4 mb-10",children:[b.jsxs("h4",{className:"font-black text-sm text-gray-300 uppercase tracking-widest flex items-center gap-2",children:[b.jsx("span",{className:"w-4 h-0.5 bg-gray-200"}),"  "]}),H.media.map(j=>b.jsxs("div",{onClick:()=>m(j),className:"flex items-center justify-between bg-gray-50 hover:bg-orange-50 p-5 rounded-3xl border border-gray-100 hover:border-orange-200 transition-all cursor-pointer group/item",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("span",{className:"text-3xl bg-white w-12 h-12 rounded-2xl shadow-sm flex items-center justify-center",children:j.type==="video"?"":j.type==="pdf"?"":""}),b.jsx("span",{className:"font-black text-xl text-[#0a192f]",children:j.title})]}),b.jsx("span",{className:"text-[#f97316] font-black text-sm opacity-0 group-hover/item:opacity-100 transition-all",children:"  "})]},j.id))]}),b.jsx("button",{onClick:()=>E({name:H.title,type:""}),className:"w-full bg-[#f97316] text-white py-6 rounded-3xl font-black text-2xl hover:bg-orange-600 transition-all shadow-2xl shadow-orange-500/30",children:"    "})]})]},H.id))),x.length===0&&b.jsx("div",{className:"col-span-full py-32 text-center",children:b.jsx("p",{className:"text-gray-300 font-black text-2xl",children:"    "})})]})]})]}),g&&b.jsxs("div",{className:"fixed inset-0 z-[120] bg-[#0a192f]/98 flex flex-col p-4 sm:p-10 animate-in fade-in duration-500",children:[b.jsxs("div",{className:"flex justify-between items-center mb-8 text-right",children:[b.jsxs("div",{className:"flex items-center gap-6",children:[b.jsx("button",{onClick:()=>m(null),className:"text-white bg-white/10 w-16 h-16 rounded-3xl flex items-center justify-center hover:bg-red-500 transition-all text-2xl shadow-2xl",children:""}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-white text-3xl font-black",children:g.title}),b.jsx("p",{className:"text-blue-400 font-bold text-sm",children:"    "})]})]}),b.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"text-white font-black bg-[#10b981] px-10 py-4 rounded-2xl shadow-xl hover:bg-emerald-600 transition-all hidden sm:flex items-center gap-2",children:[b.jsx("span",{children:" / "})," "]})]}),b.jsxs("div",{className:"flex-1 bg-black rounded-[3rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.5)] relative flex items-center justify-center border border-white/10 group",children:[g.type==="video"?D(g.url)?b.jsx("iframe",{src:`${D(g.url)}?autoplay=1&rel=0&modestbranding=1`,className:"w-full h-full border-none shadow-inner",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}):V(g.url)?b.jsx("video",{src:g.url,controls:!0,className:"max-h-full max-w-full rounded-2xl",autoPlay:!0,playsInline:!0,controlsList:"nodownload"}):b.jsxs("div",{className:"text-center p-10",children:[b.jsx("p",{className:"text-white text-2xl font-bold mb-6",children:"     "}),b.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"bg-[#f97316] text-white px-8 py-4 rounded-2xl font-black text-xl hover:bg-orange-600 transition-all shadow-lg inline-flex items-center gap-2",children:[b.jsx("span",{children:"    "})," "]})]}):g.type==="pdf"?b.jsx("iframe",{src:P(g.url),className:"w-full h-full border-none bg-white rounded-2xl",title:"PDF Viewer"}):b.jsx("img",{src:g.url,className:"max-h-full max-w-full object-contain group-hover:scale-105 transition-transform duration-1000"}),b.jsx("div",{className:"absolute top-10 left-10 pointer-events-none opacity-20 hidden sm:block",children:b.jsx("span",{className:"text-white text-9xl font-black select-none",children:"EDUCATORS"})})]})]}),u&&b.jsx("div",{className:"fixed inset-0 z-[110] flex justify-end items-center bg-[#0a192f]/90 backdrop-blur-2xl animate-in fade-in p-0 sm:p-6 duration-500",children:b.jsxs("div",{className:"bg-white h-full sm:h-auto w-full max-w-2xl sm:rounded-[3.5rem] overflow-hidden shadow-[0_0_80px_rgba(0,0,0,0.4)] animate-in slide-in-from-left duration-700 text-right flex flex-col",children:[b.jsxs("div",{className:"relative h-80 bg-[#0a192f]",children:[b.jsx("button",{onClick:()=>d(null),className:"absolute top-8 left-8 z-20 bg-white/10 hover:bg-white/30 text-white w-14 h-14 rounded-2xl flex items-center justify-center backdrop-blur-xl transition-all",children:""}),b.jsx("img",{src:u.imageUrl,className:"w-full h-full object-cover opacity-70"}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a192f] via-[#0a192f]/20 to-transparent"}),b.jsxs("div",{className:"absolute bottom-10 right-12",children:[b.jsx("h2",{className:"text-5xl font-black text-white mb-2",children:u.name}),b.jsx("div",{className:"bg-[#10b981] text-white px-6 py-2 rounded-full inline-block font-black text-lg shadow-xl",children:u.subject})]})]}),b.jsxs("div",{className:"p-12 flex-1 space-y-10 overflow-y-auto",children:[b.jsxs("div",{className:"animate-in slide-in-from-bottom-4 duration-500",children:[b.jsxs("h3",{className:"text-2xl font-black text-[#0a192f] mb-6 flex items-center gap-3",children:[b.jsx("span",{className:"w-1.5 h-6 bg-[#10b981] rounded-full"}),"  "]}),b.jsx("p",{className:"text-gray-600 text-2xl leading-relaxed bg-gray-50/50 p-10 rounded-[2.5rem] border-2 border-dashed border-gray-100 font-medium italic",children:u.bio||"           ."})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-8 animate-in slide-in-from-bottom-8 duration-700",children:[b.jsxs("div",{className:"bg-emerald-50/50 p-8 rounded-[2rem] border-2 border-emerald-100 flex flex-col items-center text-center",children:[b.jsx("span",{className:"text-4xl mb-3",children:""}),b.jsx("p",{className:"text-gray-400 text-xs font-black mb-1 uppercase tracking-tighter",children:"  "}),b.jsx("p",{className:"text-[#0a192f] font-black text-2xl",children:u.availability||"  "})]}),b.jsxs("div",{className:"bg-blue-50/50 p-8 rounded-[2rem] border-2 border-blue-100 flex flex-col items-center text-center",children:[b.jsx("span",{className:"text-4xl mb-3",children:""}),b.jsx("p",{className:"text-gray-400 text-xs font-black mb-1 uppercase tracking-tighter",children:" "}),b.jsx("p",{className:"text-[#0a192f] font-black text-2xl",children:u.teachingHours||" "})]})]}),b.jsx("button",{onClick:()=>E({name:u.name,type:""}),className:"w-full bg-[#10b981] text-white py-6 rounded-3xl font-black text-2xl shadow-2xl shadow-emerald-500/30 hover:bg-emerald-600 transition-all active:scale-95 mb-4 animate-in slide-in-from-bottom-12 duration-1000",children:"     "})]})]})})]})};var _C={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let TC,EC;function SC(){return{geminiUrl:TC,vertexUrl:EC}}function AC(t,e,n,o){var r,l;if(!(t!=null&&t.baseUrl)){const u=SC();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:n:(l=u.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _o{}function me(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(t,e,n){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const g=t[d];if(Array.isArray(n))for(let m=0;m<g.length;m++){const _=g[m];h(_,e.slice(l+1),n[m])}else for(const m of g)h(m,e.slice(l+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const g=t[d];h(g[0],e.slice(l+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function bC(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),l=o.split("."),u=new Set;let d=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const m=l[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}jh(t,r,l,0,u)}}function jh(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const g of d[u])jh(g,e,n,o+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!r.has(m)),g={};for(const m of d)g[m]=u[m];for(const[m,_]of Object.entries(g)){const E=[];for(const S of n.slice(o))S==="*"?E.push(m):E.push(S);h(u,E,_)}for(const m of d)delete u[m]}}else{const u=t;l in u&&jh(u[l],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CC(t){const e={},n=f(t,["operationName"]);n!=null&&h(e,["operationName"],n);const o=f(t,["resourceName"]);return o!=null&&h(e,["_url","resourceName"],o),e}function xC(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],RC(u)),e}function wC(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],IC(u)),e}function RC(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>NC(u))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function IC(t){const e={},n=f(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>MC(u))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function NC(t){const e={},n=f(t,["video"]);return n!=null&&h(e,["video"],LC(n)),e}function MC(t){const e={},n=f(t,["_self"]);return n!=null&&h(e,["video"],OC(n)),e}function DC(t){const e={},n=f(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function PC(t){const e={},n=f(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function UC(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],VC(u)),e}function VC(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function BT(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],kC(u)),e}function kC(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function LC(t){const e={},n=f(t,["uri"]);n!=null&&h(e,["uri"],n);const o=f(t,["encodedVideo"]);o!=null&&h(e,["videoBytes"],kp(o));const r=f(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function OC(t){const e={},n=f(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],kp(o));const r=f(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var s_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(s_||(s_={}));var r_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(r_||(r_={}));var a_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(a_||(a_={}));var Xe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Xe||(Xe={}));var l_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(l_||(l_={}));var u_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(u_||(u_={}));var c_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(c_||(c_={}));var f_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(f_||(f_={}));var d_;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(d_||(d_={}));var h_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(h_||(h_={}));var p_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(p_||(p_={}));var m_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(m_||(m_={}));var g_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(g_||(g_={}));var y_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(y_||(y_={}));var v_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(v_||(v_={}));var __;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(__||(__={}));var T_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(T_||(T_={}));var E_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(E_||(E_={}));var S_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(S_||(S_={}));var A_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(A_||(A_={}));var b_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(b_||(b_={}));var Ul;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ul||(Ul={}));var C_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(C_||(C_={}));var x_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(x_||(x_={}));var w_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(w_||(w_={}));var Wh;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Wh||(Wh={}));var R_;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(R_||(R_={}));var I_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(I_||(I_={}));var Zh;(function(t){t.COLLECTION="COLLECTION"})(Zh||(Zh={}));var N_;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(N_||(N_={}));var M_;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(M_||(M_={}));var D_;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(D_||(D_={}));var P_;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(P_||(P_={}));var U_;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(U_||(U_={}));var V_;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(V_||(V_={}));var k_;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(k_||(k_={}));var L_;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(L_||(L_={}));var O_;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(O_||(O_={}));var B_;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(B_||(B_={}));var G_;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(G_||(G_={}));var q_;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(q_||(q_={}));var F_;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(F_||(F_={}));var H_;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(H_||(H_={}));var z_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(z_||(z_={}));var K_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(K_||(K_={}));var Y_;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Y_||(Y_={}));var J_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(J_||(J_={}));var $_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})($_||($_={}));var Q_;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Q_||(Q_={}));var X_;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(X_||(X_={}));var j_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(j_||(j_={}));var W_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(W_||(W_={}));var Z_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Z_||(Z_={}));var e0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(e0||(e0={}));var t0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(t0||(t0={}));var n0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(n0||(n0={}));var ea;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ea||(ea={}));class ep{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Tl{get text(){var e,n,o,r,l,u,d,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",_=!1;const E=[];for(const S of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[x,D]of Object.entries(S))x!=="text"&&x!=="thought"&&x!=="thoughtSignature"&&(D!==null||D!==void 0)&&E.push(x);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,m+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?m:void 0}get data(){var e,n,o,r,l,u,d,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const _=[];for(const E of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,x]of Object.entries(E))S!=="inlineData"&&(x!==null||x!==void 0)&&_.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,o,r,l,u,d,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,o,r,l,u,d,g,m;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,o,r,l,u,d,g,m;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.output}}class i0{}class o0{}class BC{}class GC{}class qC{}class FC{}class s0{}class r0{}class a0{}class HC{}class qc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new qc;let r;const l=e;return n?r=wC(l):r=xC(l),Object.assign(o,r),o}}class l0{}class u0{}class c0{}class f0{}class zC{}class KC{}class YC{}class Lp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Lp,l=UC(e);return Object.assign(o,l),o}}class JC{}class $C{}class QC{}class XC{}class d0{}class jC{get text(){var e,n,o;let r="",l=!1;const u=[];for(const d of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[g,m]of Object.entries(d))g!=="text"&&g!=="thought"&&m!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,o;let r="";const l=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class WC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Op{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Op,l=BT(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function it(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function GT(t,e){const n=it(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function qT(t){return Array.isArray(t)?t.map(e=>Fc(e)):[Fc(t)]}function Fc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function FT(t){const e=Fc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function HT(t){const e=Fc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function h0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function zT(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>h0(e)):[h0(t)]}function tp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function p0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function m0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function vn(t){if(t==null)throw new Error("ContentUnion is required");return tp(t)?t:{role:"user",parts:zT(t)}}function Bp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=vn(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=vn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>vn(n)):[vn(e)]}function ui(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(p0(t)||m0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[vn(t)]}const e=[],n=[],o=tp(t[0]);for(const r of t){const l=tp(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(p0(r)||m0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:zT(n)}),e}function ZC(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Xe).includes(n[0].toUpperCase())?n[0].toUpperCase():Xe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Xe).includes(o.toUpperCase())?o.toUpperCase():Xe.TYPE_UNSPECIFIED})}}function na(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&ZC(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Xe).includes(d.toUpperCase())?d.toUpperCase():Xe.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=na(d);else if(o.includes(u)){const g=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}g.push(na(m))}e[u]=g}else if(r.includes(u)){const g={};for(const[m,_]of Object.entries(d))g[m]=na(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Gp(t){return na(t)}function qp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Fp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ha(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=na(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=na(e.response));return t}function pa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function ex(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function To(t,e){if(typeof e!="string")throw new Error("name must be a string");return ex(t,e,"cachedContents")}function KT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ts(t){return kp(t)}function tx(t){return t!=null&&typeof t=="object"&&"name"in t}function nx(t){return t!=null&&typeof t=="object"&&"video"in t}function ix(t){return t!=null&&typeof t=="object"&&"uri"in t}function YT(t){var e;let n;if(tx(t)&&(n=t.name),!(ix(t)&&(n=t.uri,n===void 0))&&!(nx(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function JT(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function $T(t){for(const e of["models","tunedModels","publisherModels"])if(ox(t,e))return t[e];return[]}function ox(t,e){return t!==null&&typeof t=="object"&&e in t}function sx(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function rx(t,e={}){const n=[],o=new Set;for(const r of t){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const u=sx(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function QT(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function ax(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function XT(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ma(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function jT(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lx(t){const e={},n=f(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const o=f(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Fx(u))),h(e,["inlinedResponses"],l)}const r=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function ux(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const o=f(t,["gcsDestination","outputUriPrefix"]);o!=null&&h(e,["gcsUri"],o);const r=f(t,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function cx(t){const e={},n=f(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const o=f(t,["gcsUri"]);o!=null&&h(e,["gcsDestination","outputUriPrefix"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Pc(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata","displayName"]);o!=null&&h(e,["displayName"],o);const r=f(t,["metadata","state"]);r!=null&&h(e,["state"],jT(r));const l=f(t,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=f(t,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(t,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(t,["metadata","model"]);g!=null&&h(e,["model"],g);const m=f(t,["metadata","output"]);return m!=null&&h(e,["dest"],lx(XT(m))),e}function np(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["displayName"]);o!=null&&h(e,["displayName"],o);const r=f(t,["state"]);r!=null&&h(e,["state"],jT(r));const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(t,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(t,["endTime"]);g!=null&&h(e,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&h(e,["updateTime"],m);const _=f(t,["model"]);_!=null&&h(e,["model"],_);const E=f(t,["inputConfig"]);E!=null&&h(e,["src"],fx(E));const S=f(t,["outputConfig"]);S!=null&&h(e,["dest"],ux(XT(S)));const x=f(t,["completionStats"]);return x!=null&&h(e,["completionStats"],x),e}function fx(t){const e={},n=f(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const o=f(t,["gcsSource","uris"]);o!=null&&h(e,["gcsUri"],o);const r=f(t,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function dx(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&h(n,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>qx(t,u))),h(n,["requests","requests"],l)}return n}function hx(t){const e={},n=f(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const o=f(t,["gcsUri"]);o!=null&&h(e,["gcsSource","uris"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function px(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function mx(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],ma(t,o)),n}function gx(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],ma(t,o)),n}function yx(t){const e={},n=f(t,["content"]);n!=null&&h(e,["content"],n);const o=f(t,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],vx(o));const r=f(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(t,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(t,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(t,["index"]);g!=null&&h(e,["index"],g);const m=f(t,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const _=f(t,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(x=>x)),h(e,["safetyRatings"],S)}const E=f(t,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function vx(t){const e={},n=f(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["citations"],o)}return e}function WT(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Qx(l))),h(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function _x(t,e){const n={},o=f(t,["displayName"]);if(e!==void 0&&o!=null&&h(e,["batch","displayName"],o),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Tx(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const r=f(t,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],cx(ax(r))),n}function g0(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],it(t,o));const r=f(e,["src"]);r!=null&&h(n,["batch","inputConfig"],dx(t,QT(t,r)));const l=f(e,["config"]);return l!=null&&_x(l,n),n}function Ex(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["model"],it(t,o));const r=f(e,["src"]);r!=null&&h(n,["inputConfig"],hx(QT(t,r)));const l=f(e,["config"]);return l!=null&&Tx(l,n),n}function Sx(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&h(e,["batch","displayName"],o),n}function Ax(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],it(t,o));const r=f(e,["src"]);r!=null&&h(n,["batch","inputConfig"],Nx(t,r));const l=f(e,["config"]);return l!=null&&Sx(l,n),n}function bx(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],ma(t,o)),n}function Cx(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],ma(t,o)),n}function xx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const l=f(t,["error"]);return l!=null&&h(e,["error"],l),e}function wx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const l=f(t,["error"]);return l!=null&&h(e,["error"],l),e}function Rx(t,e){const n={},o=f(e,["contents"]);if(o!=null){let l=Bp(t,o);Array.isArray(l)&&(l=l.map(u=>u)),h(n,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(h(n,["_self"],Ix(r,n)),bC(n,{"requests[].*":"requests[].request.*"})),n}function Ix(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Nx(t,e){const n={},o=f(e,["fileName"]);o!=null&&h(n,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&h(n,["requests"],Rx(t,r)),n}function Mx(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Dx(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const r=f(t,["name"]);if(r!=null&&h(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Px(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&h(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ux(t,e,n){const o={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],WT(vn(r)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(o,["topP"],u);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(o,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const _=f(e,["stopSequences"]);_!=null&&h(o,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&h(o,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const x=f(e,["presencePenalty"]);x!=null&&h(o,["presencePenalty"],x);const D=f(e,["frequencyPenalty"]);D!=null&&h(o,["frequencyPenalty"],D);const V=f(e,["seed"]);V!=null&&h(o,["seed"],V);const P=f(e,["responseMimeType"]);P!=null&&h(o,["responseMimeType"],P);const H=f(e,["responseSchema"]);H!=null&&h(o,["responseSchema"],Gp(H));const j=f(e,["responseJsonSchema"]);if(j!=null&&h(o,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=f(e,["safetySettings"]);if(n!==void 0&&$!=null){let U=$;Array.isArray(U)&&(U=U.map(Oe=>Xx(Oe))),h(n,["safetySettings"],U)}const Z=f(e,["tools"]);if(n!==void 0&&Z!=null){let U=pa(Z);Array.isArray(U)&&(U=U.map(Oe=>Wx(ha(Oe)))),h(n,["tools"],U)}const Y=f(e,["toolConfig"]);if(n!==void 0&&Y!=null&&h(n,["toolConfig"],jx(Y)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const re=f(e,["cachedContent"]);n!==void 0&&re!=null&&h(n,["cachedContent"],To(t,re));const M=f(e,["responseModalities"]);M!=null&&h(o,["responseModalities"],M);const R=f(e,["mediaResolution"]);R!=null&&h(o,["mediaResolution"],R);const N=f(e,["speechConfig"]);if(N!=null&&h(o,["speechConfig"],qp(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=f(e,["thinkingConfig"]);k!=null&&h(o,["thinkingConfig"],k);const L=f(e,["imageConfig"]);L!=null&&h(o,["imageConfig"],Gx(L));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&h(o,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function Vx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>yx(m))),h(e,["candidates"],g)}const r=f(t,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(t,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function kx(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],ma(t,o)),n}function Lx(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],ma(t,o)),n}function Ox(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function Bx(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function Gx(t){const e={},n=f(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const o=f(t,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function qx(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["request","model"],it(t,o));const r=f(e,["contents"]);if(r!=null){let d=ui(r);Array.isArray(d)&&(d=d.map(g=>WT(g))),h(n,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(n,["metadata"],l);const u=f(e,["config"]);return u!=null&&h(n,["request","generationConfig"],Ux(t,u,f(n,["request"],{}))),n}function Fx(t){const e={},n=f(t,["response"]);n!=null&&h(e,["response"],Vx(n));const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(t,["error"]);return r!=null&&h(e,["error"],r),e}function Hx(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function zx(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(t,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),n}function Kx(t){const e={},n=f(t,["config"]);return n!=null&&Hx(n,e),e}function Yx(t){const e={},n=f(t,["config"]);return n!=null&&zx(n,e),e}function Jx(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Pc(u))),h(e,["batchJobs"],l)}return e}function $x(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>np(u))),h(e,["batchJobs"],l)}return e}function Qx(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],Mx(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],Dx(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],px(g));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const _=f(t,["thought"]);_!=null&&h(e,["thought"],_);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function Xx(t){const e={},n=f(t,["category"]);if(n!=null&&h(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function jx(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],Px(o)),e}function Wx(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],Ox(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],Bx(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mo;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(mo||(mo={}));class ar{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zx extends _o{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ar(mo.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=g0(this.apiClient,e),o=n._url,r=me("{model}:batchGenerateContent",o),d=n.batch.inputConfig.requests,g=d.requests,m=[];for(const _ of g){const E=Object.assign({},_);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const x=E.request;x.systemInstruction=S,E.request=x}m.push(E)}return d.requests=m,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(u)o.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Ex(this.apiClient,e);return d=me("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>np(_))}else{const m=g0(this.apiClient,e);return d=me("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Pc(_))}}async createEmbeddingsInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ax(this.apiClient,e);return l=me("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>Pc(g))}}async get(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Lx(this.apiClient,e);return d=me("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>np(_))}else{const m=kx(this.apiClient,e);return d=me("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Pc(_))}}async cancel(e){var n,o,r,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=gx(this.apiClient,e);u=me("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=mx(this.apiClient,e);u=me("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Yx(e);return d=me("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=$x(_),S=new d0;return Object.assign(S,E),S})}else{const m=Kx(e);return d=me("batches",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Jx(_),S=new d0;return Object.assign(S,E),S})}}async delete(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Cx(this.apiClient,e);return d=me("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>wx(_))}else{const m=bx(this.apiClient,e);return d=me("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>xx(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ew(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function y0(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Aw(l))),h(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function tw(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let _=ui(u);Array.isArray(_)&&(_=_.map(E=>y0(E))),h(e,["contents"],_)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],y0(vn(d)));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(E=>Cw(E))),h(e,["tools"],_)}const m=f(t,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],bw(m)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function nw(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let E=ui(u);Array.isArray(E)&&(E=E.map(S=>S)),h(e,["contents"],E)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],vn(d));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(S=>xw(S))),h(e,["tools"],E)}const m=f(t,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const _=f(t,["kmsKeyName"]);return e!==void 0&&_!=null&&h(e,["encryption_spec","kmsKeyName"],_),n}function iw(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["model"],GT(t,o));const r=f(e,["config"]);return r!=null&&tw(r,n),n}function ow(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["model"],GT(t,o));const r=f(e,["config"]);return r!=null&&nw(r,n),n}function sw(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],To(t,o)),n}function rw(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],To(t,o)),n}function aw(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function lw(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function uw(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function cw(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const r=f(t,["name"]);if(r!=null&&h(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fw(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&h(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dw(t){const e={},n=f(t,["description"]);n!=null&&h(e,["description"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const r=f(t,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(t,["response"]);u!=null&&h(e,["response"],u);const d=f(t,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function hw(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],To(t,o)),n}function pw(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],To(t,o)),n}function mw(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function gw(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function yw(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function vw(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function _w(t){const e={},n=f(t,["config"]);return n!=null&&yw(n,e),e}function Tw(t){const e={},n=f(t,["config"]);return n!=null&&vw(n,e),e}function Ew(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function Sw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function Aw(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],uw(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],cw(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],ew(g));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const _=f(t,["thought"]);_!=null&&h(e,["thought"],_);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function bw(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],fw(o)),e}function Cw(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],mw(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],gw(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function xw(t){const e={},n=f(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>dw(S))),h(e,["functionDeclarations"],E)}const d=f(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const _=f(t,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function ww(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function Rw(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function Iw(t,e){const n={},o=f(e,["name"]);o!=null&&h(n,["_url","name"],To(t,o));const r=f(e,["config"]);return r!=null&&ww(r,n),n}function Nw(t,e){const n={},o=f(e,["name"]);o!=null&&h(n,["_url","name"],To(t,o));const r=f(e,["config"]);return r!=null&&Rw(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mw extends _o{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ar(mo.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=ow(this.apiClient,e);return d=me("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=iw(this.apiClient,e);return d=me("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=pw(this.apiClient,e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=hw(this.apiClient,e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=rw(this.apiClient,e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=lw(_),S=new c0;return Object.assign(S,E),S})}else{const m=sw(this.apiClient,e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=aw(_),S=new c0;return Object.assign(S,E),S})}}async update(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Nw(this.apiClient,e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=Iw(this.apiClient,e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Tw(e);return d=me("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Sw(_),S=new f0;return Object.assign(S,E),S})}else{const m=_w(e);return d=me("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Ew(_),S=new f0;return Object.assign(S,E),S})}}}function Hc(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function v0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ue(t){return this instanceof Ue?(this.v=t,this):new Ue(t)}function _i(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(x){return function(D){return Promise.resolve(D).then(x,E)}}function d(x,D){o[x]&&(r[x]=function(V){return new Promise(function(P,H){l.push([x,V,P,H])>1||g(x,V)})},D&&(r[x]=D(r[x])))}function g(x,D){try{m(o[x](D))}catch(V){S(l[0][3],V)}}function m(x){x.value instanceof Ue?Promise.resolve(x.value.v).then(_,E):S(l[0][2],x)}function _(x){g("next",x)}function E(x){g("throw",x)}function S(x,D){x(D),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Ti(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof v0=="function"?v0(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(u){return new Promise(function(d,g){u=t[l](u),r(d,g,u.done,u.value)})}}function r(l,u,d,g){Promise.resolve(g).then(function(m){l({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ZT(n)}function ZT(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Pw(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function _0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let l=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),l&&!ZT(t[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Uw{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Vw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Vw{constructor(e,n,o,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Pw(l)}async sendMessage(e){var n;await this.sendPromise;const o=vn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,u,d;const g=await r,m=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];_!=null&&(S=(d=_.slice(E))!==null&&d!==void 0?d:[]);const x=m?[m]:[];this.recordHistory(o,x,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=vn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?_0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return _i(this,arguments,function*(){var r,l,u,d,g,m;const _=[];try{for(var E=!0,S=Ti(e),x;x=yield Ue(S.next()),r=x.done,!r;E=!0){d=x.value,E=!1;const D=d;if(Dw(D)){const V=(m=(g=D.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;V!==void 0&&_.push(V)}yield yield Ue(D)}}catch(D){l={error:D}}finally{try{!E&&!r&&(u=S.return)&&(yield Ue(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(n,_)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(..._0(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Vl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kw(t){const e={},n=f(t,["file"]);return n!=null&&h(e,["file"],n),e}function Lw(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function Ow(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","file"],YT(n)),e}function Bw(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function Gw(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","file"],YT(n)),e}function qw(t){const e={},n=f(t,["uris"]);return n!=null&&h(e,["uris"],n),e}function Fw(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function Hw(t){const e={},n=f(t,["config"]);return n!=null&&Fw(n,e),e}function zw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}function Kw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yw extends _o{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ar(mo.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Hw(e);return l=me("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const m=zw(g),_=new JC;return Object.assign(_,m),_})}}async createInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kw(e);return l=me("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Lw(g),_=new $C;return Object.assign(_,m),_})}}async get(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Gw(e);return l=me("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ow(e);return l=me("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const m=Bw(g),_=new QC;return Object.assign(_,m),_})}}async registerFilesInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qw(e);return l=me("files:register",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Kw(g),_=new XC;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uc(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Jw(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>uR(l))),h(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function $w(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Qw(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const r=f(t,["name"]);if(r!=null&&h(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Xw(t){const e={},n=f(t,["description"]);n!=null&&h(e,["description"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const r=f(t,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(t,["response"]);u!=null&&h(e,["response"],u);const d=f(t,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function jw(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const o=f(t,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const r=f(t,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(t,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(t,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(t,["logprobs"]);g!=null&&h(e,["logprobs"],g);const m=f(t,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const _=f(t,["mediaResolution"]);_!=null&&h(e,["mediaResolution"],_);const E=f(t,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const S=f(t,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const x=f(t,["responseMimeType"]);x!=null&&h(e,["responseMimeType"],x);const D=f(t,["responseModalities"]);D!=null&&h(e,["responseModalities"],D);const V=f(t,["responseSchema"]);V!=null&&h(e,["responseSchema"],V);const P=f(t,["routingConfig"]);P!=null&&h(e,["routingConfig"],P);const H=f(t,["seed"]);H!=null&&h(e,["seed"],H);const j=f(t,["speechConfig"]);j!=null&&h(e,["speechConfig"],j);const $=f(t,["stopSequences"]);$!=null&&h(e,["stopSequences"],$);const Z=f(t,["temperature"]);Z!=null&&h(e,["temperature"],Z);const Y=f(t,["thinkingConfig"]);Y!=null&&h(e,["thinkingConfig"],Y);const re=f(t,["topK"]);re!=null&&h(e,["topK"],re);const M=f(t,["topP"]);if(M!=null&&h(e,["topP"],M),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ww(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function Zw(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function eR(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const _=f(t,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Fp(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const x=f(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const D=f(t,["systemInstruction"]);e!==void 0&&D!=null&&h(e,["setup","systemInstruction"],Jw(vn(D)));const V=f(t,["tools"]);if(e!==void 0&&V!=null){let re=pa(V);Array.isArray(re)&&(re=re.map(M=>fR(ha(M)))),h(e,["setup","tools"],re)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&h(e,["setup","sessionResumption"],cR(P));const H=f(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&h(e,["setup","inputAudioTranscription"],H);const j=f(t,["outputAudioTranscription"]);e!==void 0&&j!=null&&h(e,["setup","outputAudioTranscription"],j);const $=f(t,["realtimeInputConfig"]);e!==void 0&&$!=null&&h(e,["setup","realtimeInputConfig"],$);const Z=f(t,["contextWindowCompression"]);e!==void 0&&Z!=null&&h(e,["setup","contextWindowCompression"],Z);const Y=f(t,["proactivity"]);if(e!==void 0&&Y!=null&&h(e,["setup","proactivity"],Y),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function tR(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],jw(o));const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const _=f(t,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Fp(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const x=f(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const D=f(t,["systemInstruction"]);e!==void 0&&D!=null&&h(e,["setup","systemInstruction"],vn(D));const V=f(t,["tools"]);if(e!==void 0&&V!=null){let M=pa(V);Array.isArray(M)&&(M=M.map(R=>dR(ha(R)))),h(e,["setup","tools"],M)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&h(e,["setup","sessionResumption"],P);const H=f(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&h(e,["setup","inputAudioTranscription"],H);const j=f(t,["outputAudioTranscription"]);e!==void 0&&j!=null&&h(e,["setup","outputAudioTranscription"],j);const $=f(t,["realtimeInputConfig"]);e!==void 0&&$!=null&&h(e,["setup","realtimeInputConfig"],$);const Z=f(t,["contextWindowCompression"]);e!==void 0&&Z!=null&&h(e,["setup","contextWindowCompression"],Z);const Y=f(t,["proactivity"]);e!==void 0&&Y!=null&&h(e,["setup","proactivity"],Y);const re=f(t,["explicitVadSignal"]);return e!==void 0&&re!=null&&h(e,["setup","explicitVadSignal"],re),n}function nR(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["setup","model"],it(t,o));const r=f(e,["config"]);return r!=null&&h(n,["config"],eR(r,n)),n}function iR(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["setup","model"],it(t,o));const r=f(e,["config"]);return r!=null&&h(n,["config"],tR(r,n)),n}function oR(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function sR(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["weightedPrompts"],o)}return e}function rR(t){const e={},n=f(t,["media"]);if(n!=null){let m=qT(n);Array.isArray(m)&&(m=m.map(_=>Uc(_))),h(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&h(e,["audio"],Uc(HT(o)));const r=f(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&h(e,["video"],Uc(FT(l)));const u=f(t,["text"]);u!=null&&h(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(t,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function aR(t){const e={},n=f(t,["media"]);if(n!=null){let m=qT(n);Array.isArray(m)&&(m=m.map(_=>_)),h(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&h(e,["audio"],HT(o));const r=f(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&h(e,["video"],FT(l));const u=f(t,["text"]);u!=null&&h(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(t,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function lR(t){const e={},n=f(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const o=f(t,["serverContent"]);o!=null&&h(e,["serverContent"],o);const r=f(t,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=f(t,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=f(t,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],hR(u));const d=f(t,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(t,["sessionResumptionUpdate"]);g!=null&&h(e,["sessionResumptionUpdate"],g);const m=f(t,["voiceActivityDetectionSignal"]);m!=null&&h(e,["voiceActivityDetectionSignal"],m);const _=f(t,["voiceActivity"]);return _!=null&&h(e,["voiceActivity"],pR(_)),e}function uR(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],$w(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],Qw(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],Uc(g));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const _=f(t,["thought"]);_!=null&&h(e,["thought"],_);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function cR(t){const e={},n=f(t,["handle"]);if(n!=null&&h(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fR(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],Ww(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],Zw(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function dR(t){const e={},n=f(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>Xw(S))),h(e,["functionDeclarations"],E)}const d=f(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const _=f(t,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function hR(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const o=f(t,["cachedContentTokenCount"]);o!=null&&h(e,["cachedContentTokenCount"],o);const r=f(t,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=f(t,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=f(t,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(t,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(t,["promptTokensDetails"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(D=>D)),h(e,["promptTokensDetails"],x)}const m=f(t,["cacheTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(D=>D)),h(e,["cacheTokensDetails"],x)}const _=f(t,["candidatesTokensDetails"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(D=>D)),h(e,["responseTokensDetails"],x)}const E=f(t,["toolUsePromptTokensDetails"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(D=>D)),h(e,["toolUsePromptTokensDetails"],x)}const S=f(t,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}function pR(t){const e={},n=f(t,["type"]);return n!=null&&h(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mR(t,e){const n={},o=f(t,["data"]);if(o!=null&&h(n,["data"],o),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function gR(t,e){const n={},o=f(t,["content"]);o!=null&&h(n,["content"],o);const r=f(t,["citationMetadata"]);r!=null&&h(n,["citationMetadata"],yR(r));const l=f(t,["tokenCount"]);l!=null&&h(n,["tokenCount"],l);const u=f(t,["finishReason"]);u!=null&&h(n,["finishReason"],u);const d=f(t,["avgLogprobs"]);d!=null&&h(n,["avgLogprobs"],d);const g=f(t,["groundingMetadata"]);g!=null&&h(n,["groundingMetadata"],g);const m=f(t,["index"]);m!=null&&h(n,["index"],m);const _=f(t,["logprobsResult"]);_!=null&&h(n,["logprobsResult"],_);const E=f(t,["safetyRatings"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(D=>D)),h(n,["safetyRatings"],x)}const S=f(t,["urlContextMetadata"]);return S!=null&&h(n,["urlContextMetadata"],S),n}function yR(t,e){const n={},o=f(t,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(n,["citations"],r)}return n}function vR(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["contents"]);if(l!=null){let u=ui(l);Array.isArray(u)&&(u=u.map(d=>d)),h(o,["contents"],u)}return o}function _R(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["tokensInfo"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(n,["tokensInfo"],l)}return n}function TR(t,e){const n={},o=f(t,["values"]);o!=null&&h(n,["values"],o);const r=f(t,["statistics"]);return r!=null&&h(n,["statistics"],ER(r)),n}function ER(t,e){const n={},o=f(t,["truncated"]);o!=null&&h(n,["truncated"],o);const r=f(t,["token_count"]);return r!=null&&h(n,["tokenCount"],r),n}function sf(t,e){const n={},o=f(t,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>NI(u))),h(n,["parts"],l)}const r=f(t,["role"]);return r!=null&&h(n,["role"],r),n}function SR(t,e){const n={},o=f(t,["controlType"]);o!=null&&h(n,["controlType"],o);const r=f(t,["enableControlImageComputation"]);return r!=null&&h(n,["computeControl"],r),n}function AR(t,e){const n={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function bR(t,e,n){const o={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],vn(r));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>iE(g))),h(e,["tools"],d)}const u=f(t,["generationConfig"]);return e!==void 0&&u!=null&&h(e,["generationConfig"],mI(u)),o}function CR(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["contents"]);if(l!=null){let d=ui(l);Array.isArray(d)&&(d=d.map(g=>sf(g))),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&AR(u),o}function xR(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["contents"]);if(l!=null){let d=ui(l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&bR(u,o),o}function wR(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["totalTokens"]);r!=null&&h(n,["totalTokens"],r);const l=f(t,["cachedContentTokenCount"]);return l!=null&&h(n,["cachedContentTokenCount"],l),n}function RR(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["totalTokens"]);return r!=null&&h(n,["totalTokens"],r),n}function IR(t,e,n){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],it(t,r)),o}function NR(t,e,n){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],it(t,r)),o}function MR(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function DR(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function PR(t,e,n){const o={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=f(t,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(t,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(t,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const m=f(t,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const _=f(t,["safetyFilterLevel"]);e!==void 0&&_!=null&&h(e,["parameters","safetySetting"],_);const E=f(t,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(t,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const x=f(t,["includeRaiReason"]);e!==void 0&&x!=null&&h(e,["parameters","includeRaiReason"],x);const D=f(t,["language"]);e!==void 0&&D!=null&&h(e,["parameters","language"],D);const V=f(t,["outputMimeType"]);e!==void 0&&V!=null&&h(e,["parameters","outputOptions","mimeType"],V);const P=f(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&h(e,["parameters","outputOptions","compressionQuality"],P);const H=f(t,["addWatermark"]);e!==void 0&&H!=null&&h(e,["parameters","addWatermark"],H);const j=f(t,["labels"]);e!==void 0&&j!=null&&h(e,["labels"],j);const $=f(t,["editMode"]);e!==void 0&&$!=null&&h(e,["parameters","editMode"],$);const Z=f(t,["baseSteps"]);return e!==void 0&&Z!=null&&h(e,["parameters","editConfig","baseSteps"],Z),o}function UR(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(m=>kI(m))),h(o,["instances[0]","referenceImages"],g)}const d=f(e,["config"]);return d!=null&&PR(d,o),o}function VR(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>rf(u))),h(n,["generatedImages"],l)}return n}function kR(t,e,n){const o={},r=f(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const l=f(t,["title"]);e!==void 0&&l!=null&&h(e,["requests[]","title"],l);const u=f(t,["outputDimensionality"]);if(e!==void 0&&u!=null&&h(e,["requests[]","outputDimensionality"],u),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function LR(t,e,n){const o={},r=f(t,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const l=f(t,["title"]);e!==void 0&&l!=null&&h(e,["instances[]","title"],l);const u=f(t,["outputDimensionality"]);e!==void 0&&u!=null&&h(e,["parameters","outputDimensionality"],u);const d=f(t,["mimeType"]);e!==void 0&&d!=null&&h(e,["instances[]","mimeType"],d);const g=f(t,["autoTruncate"]);return e!==void 0&&g!=null&&h(e,["parameters","autoTruncate"],g),o}function OR(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["contents"]);if(l!=null){let g=Bp(t,l);Array.isArray(g)&&(g=g.map(m=>m)),h(o,["requests[]","content"],g)}const u=f(e,["config"]);u!=null&&kR(u,o);const d=f(e,["model"]);return d!==void 0&&h(o,["requests[]","model"],it(t,d)),o}function BR(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["contents"]);if(l!=null){let d=Bp(t,l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&LR(u,o),o}function GR(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),h(n,["embeddings"],u)}const l=f(t,["metadata"]);return l!=null&&h(n,["metadata"],l),n}function qR(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>TR(d))),h(n,["embeddings"],u)}const l=f(t,["metadata"]);return l!=null&&h(n,["metadata"],l),n}function FR(t,e){const n={},o=f(t,["endpoint"]);o!=null&&h(n,["name"],o);const r=f(t,["deployedModelId"]);return r!=null&&h(n,["deployedModelId"],r),n}function HR(t,e){const n={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["fileUri"]);o!=null&&h(n,["fileUri"],o);const r=f(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function zR(t,e){const n={},o=f(t,["id"]);o!=null&&h(n,["id"],o);const r=f(t,["args"]);r!=null&&h(n,["args"],r);const l=f(t,["name"]);if(l!=null&&h(n,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function KR(t,e){const n={},o=f(t,["allowedFunctionNames"]);o!=null&&h(n,["allowedFunctionNames"],o);const r=f(t,["mode"]);if(r!=null&&h(n,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function YR(t,e){const n={},o=f(t,["description"]);o!=null&&h(n,["description"],o);const r=f(t,["name"]);r!=null&&h(n,["name"],r);const l=f(t,["parameters"]);l!=null&&h(n,["parameters"],l);const u=f(t,["parametersJsonSchema"]);u!=null&&h(n,["parametersJsonSchema"],u);const d=f(t,["response"]);d!=null&&h(n,["response"],d);const g=f(t,["responseJsonSchema"]);if(g!=null&&h(n,["responseJsonSchema"],g),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function JR(t,e,n,o){const r={},l=f(e,["systemInstruction"]);n!==void 0&&l!=null&&h(n,["systemInstruction"],sf(vn(l)));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&h(r,["candidateCount"],m);const _=f(e,["maxOutputTokens"]);_!=null&&h(r,["maxOutputTokens"],_);const E=f(e,["stopSequences"]);E!=null&&h(r,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&h(r,["responseLogprobs"],S);const x=f(e,["logprobs"]);x!=null&&h(r,["logprobs"],x);const D=f(e,["presencePenalty"]);D!=null&&h(r,["presencePenalty"],D);const V=f(e,["frequencyPenalty"]);V!=null&&h(r,["frequencyPenalty"],V);const P=f(e,["seed"]);P!=null&&h(r,["seed"],P);const H=f(e,["responseMimeType"]);H!=null&&h(r,["responseMimeType"],H);const j=f(e,["responseSchema"]);j!=null&&h(r,["responseSchema"],Gp(j));const $=f(e,["responseJsonSchema"]);if($!=null&&h(r,["responseJsonSchema"],$),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(n!==void 0&&Z!=null){let Oe=Z;Array.isArray(Oe)&&(Oe=Oe.map(je=>LI(je))),h(n,["safetySettings"],Oe)}const Y=f(e,["tools"]);if(n!==void 0&&Y!=null){let Oe=pa(Y);Array.isArray(Oe)&&(Oe=Oe.map(je=>zI(ha(je)))),h(n,["tools"],Oe)}const re=f(e,["toolConfig"]);if(n!==void 0&&re!=null&&h(n,["toolConfig"],HI(re)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=f(e,["cachedContent"]);n!==void 0&&M!=null&&h(n,["cachedContent"],To(t,M));const R=f(e,["responseModalities"]);R!=null&&h(r,["responseModalities"],R);const N=f(e,["mediaResolution"]);N!=null&&h(r,["mediaResolution"],N);const k=f(e,["speechConfig"]);if(k!=null&&h(r,["speechConfig"],qp(k)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&h(r,["thinkingConfig"],L);const q=f(e,["imageConfig"]);q!=null&&h(r,["imageConfig"],TI(q));const U=f(e,["enableEnhancedCivicAnswers"]);if(U!=null&&h(r,["enableEnhancedCivicAnswers"],U),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function $R(t,e,n,o){const r={},l=f(e,["systemInstruction"]);n!==void 0&&l!=null&&h(n,["systemInstruction"],vn(l));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&h(r,["candidateCount"],m);const _=f(e,["maxOutputTokens"]);_!=null&&h(r,["maxOutputTokens"],_);const E=f(e,["stopSequences"]);E!=null&&h(r,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&h(r,["responseLogprobs"],S);const x=f(e,["logprobs"]);x!=null&&h(r,["logprobs"],x);const D=f(e,["presencePenalty"]);D!=null&&h(r,["presencePenalty"],D);const V=f(e,["frequencyPenalty"]);V!=null&&h(r,["frequencyPenalty"],V);const P=f(e,["seed"]);P!=null&&h(r,["seed"],P);const H=f(e,["responseMimeType"]);H!=null&&h(r,["responseMimeType"],H);const j=f(e,["responseSchema"]);j!=null&&h(r,["responseSchema"],Gp(j));const $=f(e,["responseJsonSchema"]);$!=null&&h(r,["responseJsonSchema"],$);const Z=f(e,["routingConfig"]);Z!=null&&h(r,["routingConfig"],Z);const Y=f(e,["modelSelectionConfig"]);Y!=null&&h(r,["modelConfig"],Y);const re=f(e,["safetySettings"]);if(n!==void 0&&re!=null){let ye=re;Array.isArray(ye)&&(ye=ye.map(we=>we)),h(n,["safetySettings"],ye)}const M=f(e,["tools"]);if(n!==void 0&&M!=null){let ye=pa(M);Array.isArray(ye)&&(ye=ye.map(we=>iE(ha(we)))),h(n,["tools"],ye)}const R=f(e,["toolConfig"]);n!==void 0&&R!=null&&h(n,["toolConfig"],R);const N=f(e,["labels"]);n!==void 0&&N!=null&&h(n,["labels"],N);const k=f(e,["cachedContent"]);n!==void 0&&k!=null&&h(n,["cachedContent"],To(t,k));const L=f(e,["responseModalities"]);L!=null&&h(r,["responseModalities"],L);const q=f(e,["mediaResolution"]);q!=null&&h(r,["mediaResolution"],q);const U=f(e,["speechConfig"]);U!=null&&h(r,["speechConfig"],qp(U));const Oe=f(e,["audioTimestamp"]);Oe!=null&&h(r,["audioTimestamp"],Oe);const je=f(e,["thinkingConfig"]);je!=null&&h(r,["thinkingConfig"],je);const te=f(e,["imageConfig"]);if(te!=null&&h(r,["imageConfig"],EI(te)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const fe=f(e,["modelArmorConfig"]);return n!==void 0&&fe!=null&&h(n,["modelArmorConfig"],fe),r}function T0(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["contents"]);if(l!=null){let d=ui(l);Array.isArray(d)&&(d=d.map(g=>sf(g))),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(o,["generationConfig"],JR(t,u,o)),o}function E0(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["contents"]);if(l!=null){let d=ui(l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(o,["generationConfig"],$R(t,u,o)),o}function S0(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(_=>gR(_))),h(n,["candidates"],m)}const l=f(t,["modelVersion"]);l!=null&&h(n,["modelVersion"],l);const u=f(t,["promptFeedback"]);u!=null&&h(n,["promptFeedback"],u);const d=f(t,["responseId"]);d!=null&&h(n,["responseId"],d);const g=f(t,["usageMetadata"]);return g!=null&&h(n,["usageMetadata"],g),n}function A0(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["candidates"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(E=>E)),h(n,["candidates"],_)}const l=f(t,["createTime"]);l!=null&&h(n,["createTime"],l);const u=f(t,["modelVersion"]);u!=null&&h(n,["modelVersion"],u);const d=f(t,["promptFeedback"]);d!=null&&h(n,["promptFeedback"],d);const g=f(t,["responseId"]);g!=null&&h(n,["responseId"],g);const m=f(t,["usageMetadata"]);return m!=null&&h(n,["usageMetadata"],m),n}function QR(t,e,n){const o={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=f(t,["guidanceScale"]);if(e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const m=f(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const _=f(t,["includeRaiReason"]);e!==void 0&&_!=null&&h(e,["parameters","includeRaiReason"],_);const E=f(t,["language"]);e!==void 0&&E!=null&&h(e,["parameters","language"],E);const S=f(t,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const x=f(t,["outputCompressionQuality"]);if(e!==void 0&&x!=null&&h(e,["parameters","outputOptions","compressionQuality"],x),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=f(t,["imageSize"]);if(e!==void 0&&D!=null&&h(e,["parameters","sampleImageSize"],D),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function XR(t,e,n){const o={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=f(t,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(t,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(t,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const m=f(t,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const _=f(t,["safetyFilterLevel"]);e!==void 0&&_!=null&&h(e,["parameters","safetySetting"],_);const E=f(t,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(t,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const x=f(t,["includeRaiReason"]);e!==void 0&&x!=null&&h(e,["parameters","includeRaiReason"],x);const D=f(t,["language"]);e!==void 0&&D!=null&&h(e,["parameters","language"],D);const V=f(t,["outputMimeType"]);e!==void 0&&V!=null&&h(e,["parameters","outputOptions","mimeType"],V);const P=f(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&h(e,["parameters","outputOptions","compressionQuality"],P);const H=f(t,["addWatermark"]);e!==void 0&&H!=null&&h(e,["parameters","addWatermark"],H);const j=f(t,["labels"]);e!==void 0&&j!=null&&h(e,["labels"],j);const $=f(t,["imageSize"]);e!==void 0&&$!=null&&h(e,["parameters","sampleImageSize"],$);const Z=f(t,["enhancePrompt"]);return e!==void 0&&Z!=null&&h(e,["parameters","enhancePrompt"],Z),o}function jR(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&QR(u,o),o}function WR(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&XR(u,o),o}function ZR(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>fI(d))),h(n,["generatedImages"],u)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&h(n,["positivePromptSafetyAttributes"],tE(l)),n}function eI(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>rf(d))),h(n,["generatedImages"],u)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&h(n,["positivePromptSafetyAttributes"],nE(l)),n}function tI(t,e,n){const o={},r=f(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(t,["durationSeconds"]);if(e!==void 0&&l!=null&&h(e,["parameters","durationSeconds"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(t,["resolution"]);e!==void 0&&d!=null&&h(e,["parameters","resolution"],d);const g=f(t,["personGeneration"]);if(e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(t,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const _=f(t,["enhancePrompt"]);if(e!==void 0&&_!=null&&h(e,["parameters","enhancePrompt"],_),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=f(t,["lastFrame"]);e!==void 0&&E!=null&&h(e,["instances[0]","lastFrame"],af(E));const S=f(t,["referenceImages"]);if(e!==void 0&&S!=null){let x=S;Array.isArray(x)&&(x=x.map(D=>iN(D))),h(e,["instances[0]","referenceImages"],x)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function nI(t,e,n){const o={},r=f(t,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=f(t,["fps"]);e!==void 0&&u!=null&&h(e,["parameters","fps"],u);const d=f(t,["durationSeconds"]);e!==void 0&&d!=null&&h(e,["parameters","durationSeconds"],d);const g=f(t,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const m=f(t,["aspectRatio"]);e!==void 0&&m!=null&&h(e,["parameters","aspectRatio"],m);const _=f(t,["resolution"]);e!==void 0&&_!=null&&h(e,["parameters","resolution"],_);const E=f(t,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(t,["pubsubTopic"]);e!==void 0&&S!=null&&h(e,["parameters","pubsubTopic"],S);const x=f(t,["negativePrompt"]);e!==void 0&&x!=null&&h(e,["parameters","negativePrompt"],x);const D=f(t,["enhancePrompt"]);e!==void 0&&D!=null&&h(e,["parameters","enhancePrompt"],D);const V=f(t,["generateAudio"]);e!==void 0&&V!=null&&h(e,["parameters","generateAudio"],V);const P=f(t,["lastFrame"]);e!==void 0&&P!=null&&h(e,["instances[0]","lastFrame"],Ai(P));const H=f(t,["referenceImages"]);if(e!==void 0&&H!=null){let Z=H;Array.isArray(Z)&&(Z=Z.map(Y=>oN(Y))),h(e,["instances[0]","referenceImages"],Z)}const j=f(t,["mask"]);e!==void 0&&j!=null&&h(e,["instances[0]","mask"],nN(j));const $=f(t,["compressionQuality"]);return e!==void 0&&$!=null&&h(e,["parameters","compressionQuality"],$),o}function iI(t,e){const n={},o=f(t,["name"]);o!=null&&h(n,["name"],o);const r=f(t,["metadata"]);r!=null&&h(n,["metadata"],r);const l=f(t,["done"]);l!=null&&h(n,["done"],l);const u=f(t,["error"]);u!=null&&h(n,["error"],u);const d=f(t,["response","generateVideoResponse"]);return d!=null&&h(n,["response"],aI(d)),n}function oI(t,e){const n={},o=f(t,["name"]);o!=null&&h(n,["name"],o);const r=f(t,["metadata"]);r!=null&&h(n,["metadata"],r);const l=f(t,["done"]);l!=null&&h(n,["done"],l);const u=f(t,["error"]);u!=null&&h(n,["error"],u);const d=f(t,["response"]);return d!=null&&h(n,["response"],lI(d)),n}function sI(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&h(o,["instances[0]","image"],af(u));const d=f(e,["video"]);d!=null&&h(o,["instances[0]","video"],oE(d));const g=f(e,["source"]);g!=null&&uI(g,o);const m=f(e,["config"]);return m!=null&&tI(m,o),o}function rI(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&h(o,["instances[0]","image"],Ai(u));const d=f(e,["video"]);d!=null&&h(o,["instances[0]","video"],sE(d));const g=f(e,["source"]);g!=null&&cI(g,o);const m=f(e,["config"]);return m!=null&&nI(m,o),o}function aI(t,e){const n={},o=f(t,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>hI(d))),h(n,["generatedVideos"],u)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&h(n,["raiMediaFilteredCount"],r);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&h(n,["raiMediaFilteredReasons"],l),n}function lI(t,e){const n={},o=f(t,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>pI(d))),h(n,["generatedVideos"],u)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&h(n,["raiMediaFilteredCount"],r);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&h(n,["raiMediaFilteredReasons"],l),n}function uI(t,e,n){const o={},r=f(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],af(l));const u=f(t,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],oE(u)),o}function cI(t,e,n){const o={},r=f(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],Ai(l));const u=f(t,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],sE(u)),o}function fI(t,e){const n={},o=f(t,["_self"]);o!=null&&h(n,["image"],SI(o));const r=f(t,["raiFilteredReason"]);r!=null&&h(n,["raiFilteredReason"],r);const l=f(t,["_self"]);return l!=null&&h(n,["safetyAttributes"],tE(l)),n}function rf(t,e){const n={},o=f(t,["_self"]);o!=null&&h(n,["image"],eE(o));const r=f(t,["raiFilteredReason"]);r!=null&&h(n,["raiFilteredReason"],r);const l=f(t,["_self"]);l!=null&&h(n,["safetyAttributes"],nE(l));const u=f(t,["prompt"]);return u!=null&&h(n,["enhancedPrompt"],u),n}function dI(t,e){const n={},o=f(t,["_self"]);o!=null&&h(n,["mask"],eE(o));const r=f(t,["labels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(n,["labels"],l)}return n}function hI(t,e){const n={},o=f(t,["video"]);return o!=null&&h(n,["video"],eN(o)),n}function pI(t,e){const n={},o=f(t,["_self"]);return o!=null&&h(n,["video"],tN(o)),n}function mI(t,e){const n={},o=f(t,["modelSelectionConfig"]);o!=null&&h(n,["modelConfig"],o);const r=f(t,["responseJsonSchema"]);r!=null&&h(n,["responseJsonSchema"],r);const l=f(t,["audioTimestamp"]);l!=null&&h(n,["audioTimestamp"],l);const u=f(t,["candidateCount"]);u!=null&&h(n,["candidateCount"],u);const d=f(t,["enableAffectiveDialog"]);d!=null&&h(n,["enableAffectiveDialog"],d);const g=f(t,["frequencyPenalty"]);g!=null&&h(n,["frequencyPenalty"],g);const m=f(t,["logprobs"]);m!=null&&h(n,["logprobs"],m);const _=f(t,["maxOutputTokens"]);_!=null&&h(n,["maxOutputTokens"],_);const E=f(t,["mediaResolution"]);E!=null&&h(n,["mediaResolution"],E);const S=f(t,["presencePenalty"]);S!=null&&h(n,["presencePenalty"],S);const x=f(t,["responseLogprobs"]);x!=null&&h(n,["responseLogprobs"],x);const D=f(t,["responseMimeType"]);D!=null&&h(n,["responseMimeType"],D);const V=f(t,["responseModalities"]);V!=null&&h(n,["responseModalities"],V);const P=f(t,["responseSchema"]);P!=null&&h(n,["responseSchema"],P);const H=f(t,["routingConfig"]);H!=null&&h(n,["routingConfig"],H);const j=f(t,["seed"]);j!=null&&h(n,["seed"],j);const $=f(t,["speechConfig"]);$!=null&&h(n,["speechConfig"],$);const Z=f(t,["stopSequences"]);Z!=null&&h(n,["stopSequences"],Z);const Y=f(t,["temperature"]);Y!=null&&h(n,["temperature"],Y);const re=f(t,["thinkingConfig"]);re!=null&&h(n,["thinkingConfig"],re);const M=f(t,["topK"]);M!=null&&h(n,["topK"],M);const R=f(t,["topP"]);if(R!=null&&h(n,["topP"],R),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function gI(t,e,n){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],it(t,r)),o}function yI(t,e,n){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],it(t,r)),o}function vI(t,e){const n={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(t,["enableWidget"]);return o!=null&&h(n,["enableWidget"],o),n}function _I(t,e){const n={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(t,["timeRangeFilter"]);return o!=null&&h(n,["timeRangeFilter"],o),n}function TI(t,e){const n={},o=f(t,["aspectRatio"]);o!=null&&h(n,["aspectRatio"],o);const r=f(t,["imageSize"]);if(r!=null&&h(n,["imageSize"],r),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function EI(t,e){const n={},o=f(t,["aspectRatio"]);o!=null&&h(n,["aspectRatio"],o);const r=f(t,["imageSize"]);r!=null&&h(n,["imageSize"],r);const l=f(t,["personGeneration"]);l!=null&&h(n,["personGeneration"],l);const u=f(t,["outputMimeType"]);u!=null&&h(n,["imageOutputOptions","mimeType"],u);const d=f(t,["outputCompressionQuality"]);return d!=null&&h(n,["imageOutputOptions","compressionQuality"],d),n}function SI(t,e){const n={},o=f(t,["bytesBase64Encoded"]);o!=null&&h(n,["imageBytes"],Ts(o));const r=f(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function eE(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&h(n,["gcsUri"],o);const r=f(t,["bytesBase64Encoded"]);r!=null&&h(n,["imageBytes"],Ts(r));const l=f(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function af(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=f(t,["imageBytes"]);o!=null&&h(n,["bytesBase64Encoded"],Ts(o));const r=f(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function Ai(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&h(n,["gcsUri"],o);const r=f(t,["imageBytes"]);r!=null&&h(n,["bytesBase64Encoded"],Ts(r));const l=f(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function AI(t,e,n,o){const r={},l=f(e,["pageSize"]);n!==void 0&&l!=null&&h(n,["_query","pageSize"],l);const u=f(e,["pageToken"]);n!==void 0&&u!=null&&h(n,["_query","pageToken"],u);const d=f(e,["filter"]);n!==void 0&&d!=null&&h(n,["_query","filter"],d);const g=f(e,["queryBase"]);return n!==void 0&&g!=null&&h(n,["_url","models_url"],JT(t,g)),r}function bI(t,e,n,o){const r={},l=f(e,["pageSize"]);n!==void 0&&l!=null&&h(n,["_query","pageSize"],l);const u=f(e,["pageToken"]);n!==void 0&&u!=null&&h(n,["_query","pageToken"],u);const d=f(e,["filter"]);n!==void 0&&d!=null&&h(n,["_query","filter"],d);const g=f(e,["queryBase"]);return n!==void 0&&g!=null&&h(n,["_url","models_url"],JT(t,g)),r}function CI(t,e,n){const o={},r=f(e,["config"]);return r!=null&&AI(t,r,o),o}function xI(t,e,n){const o={},r=f(e,["config"]);return r!=null&&bI(t,r,o),o}function wI(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=f(t,["_self"]);if(l!=null){let u=$T(l);Array.isArray(u)&&(u=u.map(d=>ip(d))),h(n,["models"],u)}return n}function RI(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=f(t,["_self"]);if(l!=null){let u=$T(l);Array.isArray(u)&&(u=u.map(d=>op(d))),h(n,["models"],u)}return n}function II(t,e){const n={},o=f(t,["maskMode"]);o!=null&&h(n,["maskMode"],o);const r=f(t,["segmentationClasses"]);r!=null&&h(n,["maskClasses"],r);const l=f(t,["maskDilation"]);return l!=null&&h(n,["dilation"],l),n}function ip(t,e){const n={},o=f(t,["name"]);o!=null&&h(n,["name"],o);const r=f(t,["displayName"]);r!=null&&h(n,["displayName"],r);const l=f(t,["description"]);l!=null&&h(n,["description"],l);const u=f(t,["version"]);u!=null&&h(n,["version"],u);const d=f(t,["_self"]);d!=null&&h(n,["tunedModelInfo"],KI(d));const g=f(t,["inputTokenLimit"]);g!=null&&h(n,["inputTokenLimit"],g);const m=f(t,["outputTokenLimit"]);m!=null&&h(n,["outputTokenLimit"],m);const _=f(t,["supportedGenerationMethods"]);_!=null&&h(n,["supportedActions"],_);const E=f(t,["temperature"]);E!=null&&h(n,["temperature"],E);const S=f(t,["maxTemperature"]);S!=null&&h(n,["maxTemperature"],S);const x=f(t,["topP"]);x!=null&&h(n,["topP"],x);const D=f(t,["topK"]);D!=null&&h(n,["topK"],D);const V=f(t,["thinking"]);return V!=null&&h(n,["thinking"],V),n}function op(t,e){const n={},o=f(t,["name"]);o!=null&&h(n,["name"],o);const r=f(t,["displayName"]);r!=null&&h(n,["displayName"],r);const l=f(t,["description"]);l!=null&&h(n,["description"],l);const u=f(t,["versionId"]);u!=null&&h(n,["version"],u);const d=f(t,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(x=>FR(x))),h(n,["endpoints"],S)}const g=f(t,["labels"]);g!=null&&h(n,["labels"],g);const m=f(t,["_self"]);m!=null&&h(n,["tunedModelInfo"],YI(m));const _=f(t,["defaultCheckpointId"]);_!=null&&h(n,["defaultCheckpointId"],_);const E=f(t,["checkpoints"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(x=>x)),h(n,["checkpoints"],S)}return n}function NI(t,e){const n={},o=f(t,["mediaResolution"]);o!=null&&h(n,["mediaResolution"],o);const r=f(t,["codeExecutionResult"]);r!=null&&h(n,["codeExecutionResult"],r);const l=f(t,["executableCode"]);l!=null&&h(n,["executableCode"],l);const u=f(t,["fileData"]);u!=null&&h(n,["fileData"],HR(u));const d=f(t,["functionCall"]);d!=null&&h(n,["functionCall"],zR(d));const g=f(t,["functionResponse"]);g!=null&&h(n,["functionResponse"],g);const m=f(t,["inlineData"]);m!=null&&h(n,["inlineData"],mR(m));const _=f(t,["text"]);_!=null&&h(n,["text"],_);const E=f(t,["thought"]);E!=null&&h(n,["thought"],E);const S=f(t,["thoughtSignature"]);S!=null&&h(n,["thoughtSignature"],S);const x=f(t,["videoMetadata"]);return x!=null&&h(n,["videoMetadata"],x),n}function MI(t,e){const n={},o=f(t,["productImage"]);return o!=null&&h(n,["image"],Ai(o)),n}function DI(t,e,n){const o={},r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(t,["baseSteps"]);e!==void 0&&l!=null&&h(e,["parameters","baseSteps"],l);const u=f(t,["outputGcsUri"]);e!==void 0&&u!=null&&h(e,["parameters","storageUri"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const m=f(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const _=f(t,["addWatermark"]);e!==void 0&&_!=null&&h(e,["parameters","addWatermark"],_);const E=f(t,["outputMimeType"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","mimeType"],E);const S=f(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S);const x=f(t,["enhancePrompt"]);e!==void 0&&x!=null&&h(e,["parameters","enhancePrompt"],x);const D=f(t,["labels"]);return e!==void 0&&D!=null&&h(e,["labels"],D),o}function PI(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["source"]);l!=null&&VI(l,o);const u=f(e,["config"]);return u!=null&&DI(u,o),o}function UI(t,e){const n={},o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>rf(l))),h(n,["generatedImages"],r)}return n}function VI(t,e,n){const o={},r=f(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(t,["personImage"]);e!==void 0&&l!=null&&h(e,["instances[0]","personImage","image"],Ai(l));const u=f(t,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(g=>MI(g))),h(e,["instances[0]","productImages"],d)}return o}function kI(t,e){const n={},o=f(t,["referenceImage"]);o!=null&&h(n,["referenceImage"],Ai(o));const r=f(t,["referenceId"]);r!=null&&h(n,["referenceId"],r);const l=f(t,["referenceType"]);l!=null&&h(n,["referenceType"],l);const u=f(t,["maskImageConfig"]);u!=null&&h(n,["maskImageConfig"],II(u));const d=f(t,["controlImageConfig"]);d!=null&&h(n,["controlImageConfig"],SR(d));const g=f(t,["styleImageConfig"]);g!=null&&h(n,["styleImageConfig"],g);const m=f(t,["subjectImageConfig"]);return m!=null&&h(n,["subjectImageConfig"],m),n}function tE(t,e){const n={},o=f(t,["safetyAttributes","categories"]);o!=null&&h(n,["categories"],o);const r=f(t,["safetyAttributes","scores"]);r!=null&&h(n,["scores"],r);const l=f(t,["contentType"]);return l!=null&&h(n,["contentType"],l),n}function nE(t,e){const n={},o=f(t,["safetyAttributes","categories"]);o!=null&&h(n,["categories"],o);const r=f(t,["safetyAttributes","scores"]);r!=null&&h(n,["scores"],r);const l=f(t,["contentType"]);return l!=null&&h(n,["contentType"],l),n}function LI(t,e){const n={},o=f(t,["category"]);if(o!=null&&h(n,["category"],o),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(t,["threshold"]);return r!=null&&h(n,["threshold"],r),n}function OI(t,e){const n={},o=f(t,["image"]);return o!=null&&h(n,["image"],Ai(o)),n}function BI(t,e,n){const o={},r=f(t,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const l=f(t,["maxPredictions"]);e!==void 0&&l!=null&&h(e,["parameters","maxPredictions"],l);const u=f(t,["confidenceThreshold"]);e!==void 0&&u!=null&&h(e,["parameters","confidenceThreshold"],u);const d=f(t,["maskDilation"]);e!==void 0&&d!=null&&h(e,["parameters","maskDilation"],d);const g=f(t,["binaryColorThreshold"]);e!==void 0&&g!=null&&h(e,["parameters","binaryColorThreshold"],g);const m=f(t,["labels"]);return e!==void 0&&m!=null&&h(e,["labels"],m),o}function GI(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["source"]);l!=null&&FI(l,o);const u=f(e,["config"]);return u!=null&&BI(u,o),o}function qI(t,e){const n={},o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>dI(l))),h(n,["generatedMasks"],r)}return n}function FI(t,e,n){const o={},r=f(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],Ai(l));const u=f(t,["scribbleImage"]);return e!==void 0&&u!=null&&h(e,["instances[0]","scribble"],OI(u)),o}function HI(t,e){const n={},o=f(t,["retrievalConfig"]);o!=null&&h(n,["retrievalConfig"],o);const r=f(t,["functionCallingConfig"]);return r!=null&&h(n,["functionCallingConfig"],KR(r)),n}function zI(t,e){const n={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["computerUse"]);o!=null&&h(n,["computerUse"],o);const r=f(t,["fileSearch"]);r!=null&&h(n,["fileSearch"],r);const l=f(t,["codeExecution"]);if(l!=null&&h(n,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>S)),h(n,["functionDeclarations"],E)}const d=f(t,["googleMaps"]);d!=null&&h(n,["googleMaps"],vI(d));const g=f(t,["googleSearch"]);g!=null&&h(n,["googleSearch"],_I(g));const m=f(t,["googleSearchRetrieval"]);m!=null&&h(n,["googleSearchRetrieval"],m);const _=f(t,["urlContext"]);return _!=null&&h(n,["urlContext"],_),n}function iE(t,e){const n={},o=f(t,["retrieval"]);o!=null&&h(n,["retrieval"],o);const r=f(t,["computerUse"]);if(r!=null&&h(n,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(t,["codeExecution"]);l!=null&&h(n,["codeExecution"],l);const u=f(t,["enterpriseWebSearch"]);u!=null&&h(n,["enterpriseWebSearch"],u);const d=f(t,["functionDeclarations"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(x=>YR(x))),h(n,["functionDeclarations"],S)}const g=f(t,["googleMaps"]);g!=null&&h(n,["googleMaps"],g);const m=f(t,["googleSearch"]);m!=null&&h(n,["googleSearch"],m);const _=f(t,["googleSearchRetrieval"]);_!=null&&h(n,["googleSearchRetrieval"],_);const E=f(t,["urlContext"]);return E!=null&&h(n,["urlContext"],E),n}function KI(t,e){const n={},o=f(t,["baseModel"]);o!=null&&h(n,["baseModel"],o);const r=f(t,["createTime"]);r!=null&&h(n,["createTime"],r);const l=f(t,["updateTime"]);return l!=null&&h(n,["updateTime"],l),n}function YI(t,e){const n={},o=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&h(n,["baseModel"],o);const r=f(t,["createTime"]);r!=null&&h(n,["createTime"],r);const l=f(t,["updateTime"]);return l!=null&&h(n,["updateTime"],l),n}function JI(t,e,n){const o={},r=f(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(t,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=f(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function $I(t,e,n){const o={},r=f(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(t,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=f(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function QI(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","name"],it(t,r));const l=f(e,["config"]);return l!=null&&JI(l,o),o}function XI(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["config"]);return l!=null&&$I(l,o),o}function jI(t,e,n){const o={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const u=f(t,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const d=f(t,["includeRaiReason"]);e!==void 0&&d!=null&&h(e,["parameters","includeRaiReason"],d);const g=f(t,["outputMimeType"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","mimeType"],g);const m=f(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const _=f(t,["enhanceInputImage"]);e!==void 0&&_!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],_);const E=f(t,["imagePreservationFactor"]);e!==void 0&&E!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const S=f(t,["labels"]);e!==void 0&&S!=null&&h(e,["labels"],S);const x=f(t,["numberOfImages"]);e!==void 0&&x!=null&&h(e,["parameters","sampleCount"],x);const D=f(t,["mode"]);return e!==void 0&&D!=null&&h(e,["parameters","mode"],D),o}function WI(t,e,n){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],it(t,r));const l=f(e,["image"]);l!=null&&h(o,["instances[0]","image"],Ai(l));const u=f(e,["upscaleFactor"]);u!=null&&h(o,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&jI(d,o),o}function ZI(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>rf(u))),h(n,["generatedImages"],l)}return n}function eN(t,e){const n={},o=f(t,["uri"]);o!=null&&h(n,["uri"],o);const r=f(t,["encodedVideo"]);r!=null&&h(n,["videoBytes"],Ts(r));const l=f(t,["encoding"]);return l!=null&&h(n,["mimeType"],l),n}function tN(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&h(n,["uri"],o);const r=f(t,["bytesBase64Encoded"]);r!=null&&h(n,["videoBytes"],Ts(r));const l=f(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function nN(t,e){const n={},o=f(t,["image"]);o!=null&&h(n,["_self"],Ai(o));const r=f(t,["maskMode"]);return r!=null&&h(n,["maskMode"],r),n}function iN(t,e){const n={},o=f(t,["image"]);o!=null&&h(n,["image"],af(o));const r=f(t,["referenceType"]);return r!=null&&h(n,["referenceType"],r),n}function oN(t,e){const n={},o=f(t,["image"]);o!=null&&h(n,["image"],Ai(o));const r=f(t,["referenceType"]);return r!=null&&h(n,["referenceType"],r),n}function oE(t,e){const n={},o=f(t,["uri"]);o!=null&&h(n,["uri"],o);const r=f(t,["videoBytes"]);r!=null&&h(n,["encodedVideo"],Ts(r));const l=f(t,["mimeType"]);return l!=null&&h(n,["encoding"],l),n}function sE(t,e){const n={},o=f(t,["uri"]);o!=null&&h(n,["gcsUri"],o);const r=f(t,["videoBytes"]);r!=null&&h(n,["bytesBase64Encoded"],Ts(r));const l=f(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sN(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&h(e,["displayName"],o),n}function rN(t){const e={},n=f(t,["config"]);return n!=null&&sN(n,e),e}function aN(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),n}function lN(t){const e={},n=f(t,["name"]);n!=null&&h(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&aN(o,e),e}function uN(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function cN(t,e){const n={},o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const r=f(t,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),n}function fN(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(t,["done"]);r!=null&&h(e,["done"],r);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],hN(u)),e}function dN(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const o=f(t,["fileName"]);o!=null&&h(e,["fileName"],o);const r=f(t,["config"]);return r!=null&&cN(r,e),e}function hN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function pN(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function mN(t){const e={},n=f(t,["config"]);return n!=null&&pN(n,e),e}function gN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function rE(t,e){const n={},o=f(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["mimeType"],o);const r=f(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(t,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),n}function yN(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const o=f(t,["config"]);return o!=null&&rE(o,e),e}function vN(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _N="Content-Type",TN="X-Server-Timeout",EN="User-Agent",sp="x-goog-api-client",SN="1.40.0",AN=`google-genai-sdk/${SN}`,bN="v1beta1",CN="v1beta";class xN{constructor(e){var n,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:bN}else{if(!this.clientOptions.apiKey)throw new Vl({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:CN,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Zh.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const l=new AbortController,u=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>l.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return n&&n.extraBody!==null&&wN(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await b0(r),new ep(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await b0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return _i(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:_}=yield Ue(r.read());if(m){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=l.decode(_,{stream:!0});try{const D=JSON.parse(E);if("error"in D){const V=JSON.parse(JSON.stringify(D.error)),P=V.status,H=V.code,j=`got status: ${P}. ${JSON.stringify(D)}`;if(H>=400&&H<600)throw new Vl({message:j,status:H})}}catch(D){if(D.name==="ApiError")throw D}u+=E;let S=-1,x=0;for(;;){S=-1,x=0;for(const P of g){const H=u.indexOf(P);H!==-1&&(S===-1||H<S)&&(S=H,x=P.length)}if(S===-1)break;const D=u.substring(0,S);u=u.substring(S+x);const V=D.trim();if(V.startsWith(d)){const P=V.substring(d.length).trim();try{const H=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ue(new ep(H))}catch(H){throw new Error(`exception parsing stream chunk ${P}. ${H}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=AN+" "+this.clientOptions.userAgentExtra;return e[EN]=n,e[sp]=n,e[_N]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(TN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const d=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const g={file:r},m=this.getFileName(e),_=me("upload/v1beta/files",g._url),E=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,m,g,n==null?void 0:n.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,o){var r;const l=this.clientOptions.uploader,u=await l.stat(n),d=String(u.size),g=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),E={};o!=null&&rE(o,E);const S=await this.fetchUploadUrl(m,d,g,_,E,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,l,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function b0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Vl({message:r,status:n}):new Error(r)}}function wN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,u){const d=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const m=u[g],_=d[g];m&&typeof m=="object"&&!Array.isArray(m)&&_&&typeof _=="object"&&!Array.isArray(_)?d[g]=o(_,m):(_&&m&&typeof _!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof m}. Overwriting.`),d[g]=m)}return d}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RN="mcp_used/unknown";let IN=!1;function aE(t){for(const e of t)if(NN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return IN}function lE(t){var e;const n=(e=t[sp])!==null&&e!==void 0?e:"";t[sp]=(n+` ${RN}`).trimStart()}function NN(t){return t!==null&&typeof t=="object"&&t instanceof Hp}function MN(t){return _i(this,arguments,function*(n,o=100){let r,l=0;for(;l<o;){const u=yield Ue(n.listTools({cursor:r}));for(const d of u.tools)yield yield Ue(d),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class Hp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Hp(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,g=(n=void 0,Ti(MN(_))),m;m=await g.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const E=r;u.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(E){n={error:E}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),rx(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function DN(t,e,n){const o=new WC;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class PN{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=kN(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const _=new Promise($=>{m=$}),E=e.callbacks,S=function(){m({})},x=this.apiClient,D={onopen:S,onmessage:$=>{DN(x,E.onmessage,$)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function($){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function($){}},V=this.webSocketFactory.create(g,VN(u),D);V.connect(),await _;const j={setup:{model:it(this.apiClient,e.model)}};return V.send(JSON.stringify(j)),new UN(V,this.apiClient)}}class UN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=sR(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=oR(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ea.PLAY)}pause(){this.sendPlaybackControl(ea.PAUSE)}stop(){this.sendPlaybackControl(ea.STOP)}resetContext(){this.sendPlaybackControl(ea.RESET_CONTEXT)}close(){this.conn.close()}}function VN(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function kN(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ON(t,e,n){const o=new jC;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const l=JSON.parse(r);if(t.isVertexAI()){const u=lR(l);Object.assign(o,u)}else Object.assign(o,l);e(o)}class BN{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new PN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&aE(e.config.tools)&&lE(E);const S=HN(E);if(this.apiClient.isVertexAI()){const N=this.apiClient.getProject(),k=this.apiClient.getLocation(),L=this.apiClient.getApiKey(),q=!!N&&!!k||!!L;this.apiClient.getCustomBaseUrl()&&!q?_=g:(_=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_))}else{const N=this.apiClient.getApiKey();let k="BidiGenerateContent",L="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",L="access_token"),_=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${k}?${L}=${N}`}let x=()=>{};const D=new Promise(N=>{x=N}),V=e.callbacks,P=function(){var N;(N=V==null?void 0:V.onopen)===null||N===void 0||N.call(V),x({})},H=this.apiClient,j={onopen:P,onmessage:N=>{ON(H,V.onmessage,N)},onerror:(n=V==null?void 0:V.onerror)!==null&&n!==void 0?n:function(N){},onclose:(o=V==null?void 0:V.onclose)!==null&&o!==void 0?o:function(N){}},$=this.webSocketFactory.create(_,FN(S),j);$.connect(),await D;let Z=it(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Z.startsWith("publishers/")){const N=this.apiClient.getProject(),k=this.apiClient.getLocation();N&&k&&(Z=`projects/${N}/locations/${k}/`+Z)}let Y={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ul.AUDIO]}:e.config.responseModalities=[Ul.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const re=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const N of re)if(this.isCallableTool(N)){const k=N;M.push(await k.tool())}else M.push(N);M.length>0&&(e.config.tools=M);const R={model:Z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Y=iR(this.apiClient,R):Y=nR(this.apiClient,R),delete Y.config,$.send(JSON.stringify(Y)),new qN($,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const GN={turnComplete:!0};class qN{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=ui(n.turns),e.isVertexAI()||(o=o.map(r=>sf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(LN)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},GN),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:aR(e)}:n={realtimeInput:rR(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function FN(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function HN(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C0=10;function x0(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ia(u)){r=!0;break}if(!r)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ia(t){return"callTool"in t&&typeof t.callTool=="function"}function zN(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>ia(r)))!==null&&o!==void 0?o:!1}function w0(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(ia(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(r)}),n}function R0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KN extends _o{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,l,u,d;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!zN(n)||x0(n.config))return await this.generateContentInternal(g);const m=w0(n);if(m.length>0){const V=m.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let _,E;const S=ui(g.contents),x=(l=(r=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:C0;let D=0;for(;D<x&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const V=_.candidates[0].content,P=[];for(const H of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(ia(H)){const $=await H.callTool(_.functionCalls);P.push(...$)}D++,E={role:"user",parts:P},g.contents=ui(g.contents),g.contents.push(V),g.contents.push(E),R0(g.config)&&(S.push(V),S.push(E))}return R0(g.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async n=>{var o,r,l,u,d;if(this.maybeMoveToResponseJsonSchem(n),x0(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const g=w0(n);if(g.length>0){const E=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(d=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let l;const u=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async n=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new ar(mo.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,l,u,d,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(d=n.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>ia(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&aE(e.config.tools)){const g=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),lE(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var n,o,r;const l=new Map;for(const u of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(ia(u)){const d=u,g=await d.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var n,o,r;const l=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:C0;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(m,_,E){return _i(this,arguments,function*(){for(var S,x,D,V,P,H;d<l;){u&&(d++,u=!1);const Y=yield Ue(m.processParamsMaybeAddMcpUsage(E)),re=yield Ue(m.generateContentStreamInternal(Y)),M=[],R=[];try{for(var j=!0,$=(x=void 0,Ti(re)),Z;Z=yield Ue($.next()),S=Z.done,!S;j=!0){V=Z.value,j=!1;const N=V;if(yield yield Ue(N),N.candidates&&(!((P=N.candidates[0])===null||P===void 0)&&P.content)){R.push(N.candidates[0].content);for(const k of(H=N.candidates[0].content.parts)!==null&&H!==void 0?H:[])if(d<l&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(k.functionCall.name)){const L=yield Ue(_.get(k.functionCall.name).callTool([k.functionCall]));M.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(N){x={error:N}}finally{try{!j&&!S&&(D=$.return)&&(yield Ue(D.call($)))}finally{if(x)throw x.error}}if(M.length>0){u=!0;const N=new Tl;N.candidates=[{content:{role:"user",parts:M}}],yield yield Ue(N);const k=[];k.push(...R),k.push({role:"user",parts:M});const L=ui(E.contents).concat(k);E.contents=L}else break}})})(this,g,e)}async generateContentInternal(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=E0(this.apiClient,e);return d=me("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=A0(_),S=new Tl;return Object.assign(S,E),S})}else{const m=T0(this.apiClient,e);return d=me("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=S0(_),S=new Tl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=E0(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(E){return _i(this,arguments,function*(){var S,x,D,V;try{for(var P=!0,H=Ti(E),j;j=yield Ue(H.next()),S=j.done,!S;P=!0){V=j.value,P=!1;const $=V,Z=A0(yield Ue($.json()),e);Z.sdkHttpResponse={headers:$.headers};const Y=new Tl;Object.assign(Y,Z),yield yield Ue(Y)}}catch($){x={error:$}}finally{try{!P&&!S&&(D=H.return)&&(yield Ue(D.call(H)))}finally{if(x)throw x.error}}})})}else{const m=T0(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(E){return _i(this,arguments,function*(){var S,x,D,V;try{for(var P=!0,H=Ti(E),j;j=yield Ue(H.next()),S=j.done,!S;P=!0){V=j.value,P=!1;const $=V,Z=S0(yield Ue($.json()),e);Z.sdkHttpResponse={headers:$.headers};const Y=new Tl;Object.assign(Y,Z),yield yield Ue(Y)}}catch($){x={error:$}}finally{try{!P&&!S&&(D=H.return)&&(yield Ue(D.call(H)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=BR(this.apiClient,e);return d=me("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=qR(_),S=new i0;return Object.assign(S,E),S})}else{const m=OR(this.apiClient,e);return d=me("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=GR(_),S=new i0;return Object.assign(S,E),S})}}async generateImagesInternal(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=WR(this.apiClient,e);return d=me("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=eI(_),S=new o0;return Object.assign(S,E),S})}else{const m=jR(this.apiClient,e);return d=me("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=ZR(_),S=new o0;return Object.assign(S,E),S})}}async editImageInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=UR(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const m=VR(g),_=new BC;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=WI(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const m=ZI(g),_=new GC;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=PI(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=UI(g),_=new qC;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=GI(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=qI(g),_=new FC;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=yI(this.apiClient,e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>op(_))}else{const m=gI(this.apiClient,e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>ip(_))}}async listInternal(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=xI(this.apiClient,e);return d=me("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=RI(_),S=new s0;return Object.assign(S,E),S})}else{const m=CI(this.apiClient,e);return d=me("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=wI(_),S=new s0;return Object.assign(S,E),S})}}async update(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=XI(this.apiClient,e);return d=me("{model}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>op(_))}else{const m=QI(this.apiClient,e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>ip(_))}}async delete(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=NR(this.apiClient,e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=DR(_),S=new r0;return Object.assign(S,E),S})}else{const m=IR(this.apiClient,e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=MR(_),S=new r0;return Object.assign(S,E),S})}}async countTokens(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=xR(this.apiClient,e);return d=me("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=RR(_),S=new a0;return Object.assign(S,E),S})}else{const m=CR(this.apiClient,e);return d=me("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=wR(_),S=new a0;return Object.assign(S,E),S})}}async computeTokens(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=vR(this.apiClient,e);return l=me("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const m=_R(g),_=new HC;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=rI(this.apiClient,e);return d=me("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>{const E=oI(_),S=new qc;return Object.assign(S,E),S})}else{const m=sI(this.apiClient,e);return d=me("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const E=iI(_),S=new qc;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YN extends _o{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=PC(e);return d=me("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u}else{const m=DC(e);return d=me("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=CC(e);return l=me("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JN(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function $N(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>i1(l))),h(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function QN(t,e,n){const o={},r=f(e,["expireTime"]);n!==void 0&&r!=null&&h(n,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&h(n,["newSessionExpireTime"],l);const u=f(e,["uses"]);n!==void 0&&u!=null&&h(n,["uses"],u);const d=f(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&h(n,["bidiGenerateContentSetup"],n1(t,d));const g=f(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&h(n,["fieldMask"],g),o}function XN(t,e){const n={},o=f(e,["config"]);return o!=null&&h(n,["config"],QN(t,o,n)),n}function jN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function WN(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const r=f(t,["name"]);if(r!=null&&h(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ZN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function e1(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function t1(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const _=f(t,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Fp(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const x=f(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const D=f(t,["systemInstruction"]);e!==void 0&&D!=null&&h(e,["setup","systemInstruction"],$N(vn(D)));const V=f(t,["tools"]);if(e!==void 0&&V!=null){let re=pa(V);Array.isArray(re)&&(re=re.map(M=>s1(ha(M)))),h(e,["setup","tools"],re)}const P=f(t,["sessionResumption"]);e!==void 0&&P!=null&&h(e,["setup","sessionResumption"],o1(P));const H=f(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&h(e,["setup","inputAudioTranscription"],H);const j=f(t,["outputAudioTranscription"]);e!==void 0&&j!=null&&h(e,["setup","outputAudioTranscription"],j);const $=f(t,["realtimeInputConfig"]);e!==void 0&&$!=null&&h(e,["setup","realtimeInputConfig"],$);const Z=f(t,["contextWindowCompression"]);e!==void 0&&Z!=null&&h(e,["setup","contextWindowCompression"],Z);const Y=f(t,["proactivity"]);if(e!==void 0&&Y!=null&&h(e,["setup","proactivity"],Y),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function n1(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["setup","model"],it(t,o));const r=f(e,["config"]);return r!=null&&h(n,["config"],t1(r,n)),n}function i1(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],jN(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],WN(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],JN(g));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const _=f(t,["thought"]);_!=null&&h(e,["thought"],_);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function o1(t){const e={},n=f(t,["handle"]);if(n!=null&&h(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function s1(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["functionDeclarations"],_)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],ZN(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],e1(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r1(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function a1(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=r1(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(m=>u.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class l1 extends _o{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=XN(this.apiClient,e);l=me("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=a1(d,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u1(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),n}function c1(t){const e={},n=f(t,["name"]);n!=null&&h(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&u1(o,e),e}function f1(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function d1(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function h1(t){const e={},n=f(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const o=f(t,["config"]);return o!=null&&d1(o,e),e}function p1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m1 extends _o{constructor(e){super(),this.apiClient=e,this.list=async n=>new ar(mo.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=f1(e);return l=me("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=c1(e);r=me("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=h1(e);return l=me("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=p1(g),_=new zC;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g1 extends _o{constructor(e,n=new m1(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new ar(mo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rN(e);return l=me("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uN(e);return l=me("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lN(e);r=me("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mN(e);return l=me("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=gN(g),_=new KC;return Object.assign(_,m),_})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=yN(e);return l=me("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=vN(g),_=new YC;return Object.assign(_,m),_})}}async importFile(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=dN(e);return l=me("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=fN(g),_=new Lp;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uE=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return uE=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const y1=()=>uE();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ap=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ci extends Error{}class wn extends ci{constructor(e,n,o,r){super(`${wn.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new lf({message:o,cause:ap(n)});const l=n;return e===400?new fE(e,l,o,r):e===401?new dE(e,l,o,r):e===403?new hE(e,l,o,r):e===404?new pE(e,l,o,r):e===409?new mE(e,l,o,r):e===422?new gE(e,l,o,r):e===429?new yE(e,l,o,r):e>=500?new vE(e,l,o,r):new wn(e,l,o,r)}}class lp extends wn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class lf extends wn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class cE extends lf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class fE extends wn{}class dE extends wn{}class hE extends wn{}class pE extends wn{}class mE extends wn{}class gE extends wn{}class yE extends wn{}class vE extends wn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v1=/^[a-z][a-z0-9+.-]*:/i,_1=t=>v1.test(t);let up=t=>(up=Array.isArray,up(t));const T1=up;let E1=T1;const I0=E1;function S1(t){if(!t)return!0;for(const e in t)return!1;return!0}function A1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const b1=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ci(`${t} must be an integer`);if(e<0)throw new ci(`${t} must be a positive integer`);return e},C1=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x1=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w1(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const R1=()=>{var t,e,n,o,r;const l=w1();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xr,"X-Stainless-OS":M0(Deno.build.os),"X-Stainless-Arch":N0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xr,"X-Stainless-OS":M0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":N0((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=I1();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function I1(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,l=o[2]||0,u=o[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const N0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",M0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ec;const N1=()=>Ec??(Ec=R1());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M1(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function _E(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function D1(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return _E({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function TE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function P1(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U1=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EE=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Dh(t,e,n){return EE(),new File(t,e??"unknown_file",n)}function V1(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const k1=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SE=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",L1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&SE(t),O1=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function B1(t,e,n){if(EE(),t=await t,L1(t))return t instanceof File?t:Dh([await t.arrayBuffer()],t.name);if(O1(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Dh(await cp(r),e,n)}const o=await cp(t);if(e||(e=V1(t)),!(n!=null&&n.type)){const r=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Dh(o,e,n)}async function cp(t){var e,n,o,r,l;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(SE(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(k1(t))try{for(var d=!0,g=Ti(t),m;m=await g.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const _=r;u.push(...await cp(_))}}catch(_){n={error:_}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}else{const _=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${_?`; constructor: ${_}`:""}${G1(t)}`)}return u}function G1(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AE{constructor(e){this._client=e}}AE._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bE(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const D0=Object.freeze(Object.create(null)),q1=(t=bE)=>(function(n,...o){if(n.length===1)return n[0];let r=!1;const l=[],u=n.reduce((_,E,S)=>{var x,D,V;/[?#]/.test(E)&&(r=!0);const P=o[S];let H=(r?encodeURIComponent:t)(""+P);return S!==o.length&&(P==null||typeof P=="object"&&P.toString===((V=Object.getPrototypeOf((D=Object.getPrototypeOf((x=P.hasOwnProperty)!==null&&x!==void 0?x:D0))!==null&&D!==void 0?D:D0))===null||V===void 0?void 0:V.toString))&&(H=P+"",l.push({start:_.length+E.length,length:H.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),_+E+(S===o.length?"":H)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(d))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((_,E)=>_.start-E.start),l.length>0){let _=0;const E=l.reduce((S,x)=>{const D=" ".repeat(x.start-_),V="^".repeat(x.length);return _=x.start+x.length,S+D+V},"");throw new ci(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${u}
${E}`)}return u}),Sc=q1(bE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CE extends AE{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,l=Hc(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new ci("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new ci("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Sc`/${r}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Sc`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Sc`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const l=n??{},{api_version:u=this._client.apiVersion}=l,d=Hc(l,["api_version"]);return this._client.get(Sc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}CE._key=Object.freeze(["interactions"]);class xE extends CE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F1(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let Ac;function zp(t){let e;return(Ac??(e=new globalThis.TextEncoder,Ac=e.encode.bind(e)))(t)}let bc;function P0(t){let e;return(bc??(e=new globalThis.TextDecoder,bc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?zp(e):e;this.buffer=F1([this.buffer,n]);const o=[];let r;for(;(r=H1(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(P0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=P0(this.buffer.subarray(0,l));o.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}uf.NEWLINE_CHARS=new Set([`
`,"\r"]);uf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function H1(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function z1(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zc={off:0,error:200,warn:300,info:400,debug:500},U0=(t,e,n)=>{if(t){if(A1(zc,t))return t;xn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(zc))}`)}};function bl(){}function Cc(t,e,n){return!e||zc[t]>zc[n]?bl:e[t].bind(e)}const K1={error:bl,warn:bl,info:bl,debug:bl};let V0=new WeakMap;function xn(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return K1;const r=V0.get(n);if(r&&r[0]===o)return r[1];const l={error:Cc("error",n,o),warn:Cc("warn",n,o),info:Cc("info",n,o),debug:Cc("debug",n,o)};return V0.set(n,[o,l]),l}const Ws=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ta{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const l=o?xn(o):console;function u(){return _i(this,arguments,function*(){var g,m,_,E;if(r)throw new ci("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var x=!0,D=Ti(Y1(e,n)),V;V=yield Ue(D.next()),g=V.done,!g;x=!0){E=V.value,x=!1;const P=E;if(!S)if(P.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ue(JSON.parse(P.data))}catch(H){throw l.error("Could not parse message into JSON:",P.data),l.error("From chunk:",P.raw),H}}}catch(P){m={error:P}}finally{try{!x&&!g&&(_=D.return)&&(yield Ue(_.call(D)))}finally{if(m)throw m.error}}S=!0}catch(P){if(rp(P))return yield Ue(void 0);throw P}finally{S||n.abort()}})}return new ta(u,n,o)}static fromReadableStream(e,n,o){let r=!1;function l(){return _i(this,arguments,function*(){var g,m,_,E;const S=new uf,x=TE(e);try{for(var D=!0,V=Ti(x),P;P=yield Ue(V.next()),g=P.done,!g;D=!0){E=P.value,D=!1;const H=E;for(const j of S.decode(H))yield yield Ue(j)}}catch(H){m={error:H}}finally{try{!D&&!g&&(_=V.return)&&(yield Ue(_.call(V)))}finally{if(m)throw m.error}}for(const H of S.flush())yield yield Ue(H)})}function u(){return _i(this,arguments,function*(){var g,m,_,E;if(r)throw new ci("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var x=!0,D=Ti(l()),V;V=yield Ue(D.next()),g=V.done,!g;x=!0){E=V.value,x=!1;const P=E;S||P&&(yield yield Ue(JSON.parse(P)))}}catch(P){m={error:P}}finally{try{!x&&!g&&(_=D.return)&&(yield Ue(_.call(D)))}finally{if(m)throw m.error}}S=!0}catch(P){if(rp(P))return yield Ue(void 0);throw P}finally{S||n.abort()}})}return new ta(u,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=o.next();e.push(u),n.push(u)}return l.shift()}});return[new ta(()=>r(e),this.controller,this.client),new ta(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return _E({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:l}=await n.next();if(l)return o.close();const u=zp(JSON.stringify(r)+`
`);o.enqueue(u)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function Y1(t,e){return _i(this,arguments,function*(){var o,r,l,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ci("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ci("Attempted to iterate over a response with no body");const d=new $1,g=new uf,m=TE(t.body);try{for(var _=!0,E=Ti(J1(m)),S;S=yield Ue(E.next()),o=S.done,!o;_=!0){u=S.value,_=!1;const x=u;for(const D of g.decode(x)){const V=d.decode(D);V&&(yield yield Ue(V))}}}catch(x){r={error:x}}finally{try{!_&&!o&&(l=E.return)&&(yield Ue(l.call(E)))}finally{if(r)throw r.error}}for(const x of g.flush()){const D=d.decode(x);D&&(yield yield Ue(D))}})}function J1(t){return _i(this,arguments,function*(){var n,o,r,l;let u=new Uint8Array;try{for(var d=!0,g=Ti(t),m;m=yield Ue(g.next()),n=m.done,!n;d=!0){l=m.value,d=!1;const _=l;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?zp(_):_;let S=new Uint8Array(u.length+E.length);S.set(u),S.set(E,u.length),u=S;let x;for(;(x=z1(u))!==-1;)yield yield Ue(u.slice(0,x)),u=u.slice(x)}}catch(_){o={error:_}}finally{try{!d&&!n&&(r=g.return)&&(yield Ue(r.call(g)))}finally{if(o)throw o.error}}u.length>0&&(yield yield Ue(u))})}class $1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=Q1(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function Q1(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function X1(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var d;if(e.options.stream)return xn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ta.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),m=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return xn(t).debug(`[${o}] response parsed`,Ws({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kp extends Promise{constructor(e,n,o=X1){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Kp(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wE=Symbol("brand.privateNullableHeaders");function*j1(t){if(!t)return;if(wE in t){const{values:o,nulls:r}=t;yield*o.entries();for(const l of r)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():I0(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=I0(o[1])?o[1]:[o[1]];let u=!1;for(const d of l)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const El=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[l,u]of j1(o)){const d=l.toLowerCase();r.has(d)||(e.delete(l),r.add(d)),u===null?(e.delete(l),n.add(d)):(e.append(l,u),n.delete(d))}}return{[wE]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ph=t=>{var e,n,o,r,l,u;if(typeof globalThis.process<"u")return(o=(n=(e=_C)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var RE;class cf{constructor(e){var n,o,r,l,u,d,g,{baseURL:m=Ph("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(n=Ph("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=e,S=Hc(e,["baseURL","apiKey","apiVersion"]);const x=Object.assign(Object.assign({apiKey:_,apiVersion:E},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=x.baseURL,this.timeout=(o=x.timeout)!==null&&o!==void 0?o:cf.DEFAULT_TIMEOUT,this.logger=(r=x.logger)!==null&&r!==void 0?r:console;const D="warn";this.logLevel=D,this.logLevel=(u=(l=U0(x.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:U0(Ph("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:D,this.fetchOptions=x.fetchOptions,this.maxRetries=(d=x.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=x.fetch)!==null&&g!==void 0?g:M1(),this.encoder=U1,this._options=x,this.apiKey=_,this.apiVersion=E,this.clientAdapter=x.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=El([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return El([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return El([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new ci(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Xr}`}defaultIdempotencyKey(){return`stainless-node-retry-${y1()}`}makeStatusError(e,n,o,r){return wn.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,l=_1(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return S1(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Kp(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,l,u;const d=await e,g=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=g),await this.prepareOptions(d);const{req:m,url:_,timeout:E}=await this.buildRequest(d,{retryCount:g-n});await this.prepareRequest(m,{url:_,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),x=o===void 0?"":`, retryOf: ${o}`,D=Date.now();if(xn(this).debug(`[${S}] sending request`,Ws({retryOfRequestLogID:o,method:d.method,url:_,options:d,headers:m.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new lp;const V=new AbortController,P=await this.fetchWithTimeout(_,m,E,V).catch(ap),H=Date.now();if(P instanceof globalThis.Error){const $=`retrying, ${n} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new lp;const Z=rp(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(n)return xn(this).info(`[${S}] connection ${Z?"timed out":"failed"} - ${$}`),xn(this).debug(`[${S}] connection ${Z?"timed out":"failed"} (${$})`,Ws({retryOfRequestLogID:o,url:_,durationMs:H-D,message:P.message})),this.retryRequest(d,n,o??S);throw xn(this).info(`[${S}] connection ${Z?"timed out":"failed"} - error; no more retries left`),xn(this).debug(`[${S}] connection ${Z?"timed out":"failed"} (error; no more retries left)`,Ws({retryOfRequestLogID:o,url:_,durationMs:H-D,message:P.message})),Z?new cE:new lf({cause:P})}const j=`[${S}${x}] ${m.method} ${_} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${H-D}ms`;if(!P.ok){const $=await this.shouldRetry(P);if(n&&$){const N=`retrying, ${n} attempts remaining`;return await P1(P.body),xn(this).info(`${j} - ${N}`),xn(this).debug(`[${S}] response error (${N})`,Ws({retryOfRequestLogID:o,url:P.url,status:P.status,headers:P.headers,durationMs:H-D})),this.retryRequest(d,n,o??S,P.headers)}const Z=$?"error; no more retries left":"error; not retryable";xn(this).info(`${j} - ${Z}`);const Y=await P.text().catch(N=>ap(N).message),re=C1(Y),M=re?void 0:Y;throw xn(this).debug(`[${S}] response error (${Z})`,Ws({retryOfRequestLogID:o,url:P.url,status:P.status,headers:P.headers,message:M,durationMs:Date.now()-D})),this.makeStatusError(P.status,re,M,P.headers)}return xn(this).info(j),xn(this).debug(`[${S}] response start`,Ws({retryOfRequestLogID:o,url:P.url,status:P.status,headers:P.headers,durationMs:H-D})),{response:P,options:d,controller:V,requestLogID:S,retryOfRequestLogID:o,startTime:D}}async fetchWithTimeout(e,n,o,r){const l=n||{},{signal:u,method:d}=l,g=Hc(l,["signal","method"]),m=r.abort.bind(r);u&&u.addEventListener("abort",m,{once:!0});const _=setTimeout(m,o),E=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,S=Object.assign(Object.assign(Object.assign({signal:r.signal},E?{duplex:"half"}:{}),{method:"GET"}),g);d&&(S.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(_)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var l;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(u=m)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const m=parseFloat(g);Number.isNaN(m)?u=Date.parse(g)-Date.now():u=m*1e3}if(!(u&&0<=u&&u<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,m)}return await x1(u),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,u=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,l;const u=Object.assign({},e),{method:d,path:g,query:m,defaultBaseURL:_}=u,E=this.buildURL(g,m,_);"timeout"in u&&b1("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:x}=this.buildBody({options:u}),D=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:D},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&x instanceof globalThis.ReadableStream&&{duplex:"half"}),x&&{body:x}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=El([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),N1()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=El([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:D1(e)}:this.encoder({body:e,headers:o})}}cf.DEFAULT_TIMEOUT=6e4;class en extends cf{constructor(){super(...arguments),this.interactions=new xE(this)}}RE=en;en.GeminiNextGenAPIClient=RE;en.GeminiNextGenAPIClientError=ci;en.APIError=wn;en.APIConnectionError=lf;en.APIConnectionTimeoutError=cE;en.APIUserAbortError=lp;en.NotFoundError=pE;en.ConflictError=mE;en.RateLimitError=yE;en.BadRequestError=fE;en.AuthenticationError=dE;en.InternalServerError=vE;en.PermissionDeniedError=hE;en.UnprocessableEntityError=gE;en.toFile=B1;en.Interactions=xE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W1(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function Z1(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function eM(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function tM(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function nM(t,e,n){const o={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(t,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(t,["learningRateMultiplier"]);if(u!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(t,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function iM(t,e,n){const o={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const Y=f(t,["validationDataset"]);e!==void 0&&Y!=null&&h(e,["supervisedTuningSpec"],Uh(Y))}else if(r==="PREFERENCE_TUNING"){const Y=f(t,["validationDataset"]);e!==void 0&&Y!=null&&h(e,["preferenceOptimizationSpec"],Uh(Y))}else if(r==="DISTILLATION"){const Y=f(t,["validationDataset"]);e!==void 0&&Y!=null&&h(e,["distillationSpec"],Uh(Y))}const l=f(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=f(t,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const Y=f(t,["epochCount"]);e!==void 0&&Y!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],Y)}else if(d==="PREFERENCE_TUNING"){const Y=f(t,["epochCount"]);e!==void 0&&Y!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],Y)}else if(d==="DISTILLATION"){const Y=f(t,["epochCount"]);e!==void 0&&Y!=null&&h(e,["distillationSpec","hyperParameters","epochCount"],Y)}let g=f(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const Y=f(t,["learningRateMultiplier"]);e!==void 0&&Y!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],Y)}else if(g==="PREFERENCE_TUNING"){const Y=f(t,["learningRateMultiplier"]);e!==void 0&&Y!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],Y)}else if(g==="DISTILLATION"){const Y=f(t,["learningRateMultiplier"]);e!==void 0&&Y!=null&&h(e,["distillationSpec","hyperParameters","learningRateMultiplier"],Y)}let m=f(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const Y=f(t,["exportLastCheckpointOnly"]);e!==void 0&&Y!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],Y)}else if(m==="PREFERENCE_TUNING"){const Y=f(t,["exportLastCheckpointOnly"]);e!==void 0&&Y!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],Y)}else if(m==="DISTILLATION"){const Y=f(t,["exportLastCheckpointOnly"]);e!==void 0&&Y!=null&&h(e,["distillationSpec","exportLastCheckpointOnly"],Y)}let _=f(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const Y=f(t,["adapterSize"]);e!==void 0&&Y!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],Y)}else if(_==="PREFERENCE_TUNING"){const Y=f(t,["adapterSize"]);e!==void 0&&Y!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],Y)}else if(_==="DISTILLATION"){const Y=f(t,["adapterSize"]);e!==void 0&&Y!=null&&h(e,["distillationSpec","hyperParameters","adapterSize"],Y)}let E=f(n,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const Y=f(t,["tuningMode"]);e!==void 0&&Y!=null&&h(e,["supervisedTuningSpec","tuningMode"],Y)}const S=f(t,["customBaseModel"]);e!==void 0&&S!=null&&h(e,["customBaseModel"],S);let x=f(n,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const Y=f(t,["batchSize"]);e!==void 0&&Y!=null&&h(e,["supervisedTuningSpec","hyperParameters","batchSize"],Y)}let D=f(n,["config","method"]);if(D===void 0&&(D="SUPERVISED_FINE_TUNING"),D==="SUPERVISED_FINE_TUNING"){const Y=f(t,["learningRate"]);e!==void 0&&Y!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRate"],Y)}const V=f(t,["labels"]);e!==void 0&&V!=null&&h(e,["labels"],V);const P=f(t,["beta"]);e!==void 0&&P!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],P);const H=f(t,["baseTeacherModel"]);e!==void 0&&H!=null&&h(e,["distillationSpec","baseTeacherModel"],H);const j=f(t,["tunedTeacherModelSource"]);e!==void 0&&j!=null&&h(e,["distillationSpec","tunedTeacherModelSource"],j);const $=f(t,["sftLossWeightMultiplier"]);e!==void 0&&$!=null&&h(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],$);const Z=f(t,["outputUri"]);return e!==void 0&&Z!=null&&h(e,["outputUri"],Z),o}function oM(t,e){const n={},o=f(t,["baseModel"]);o!=null&&h(n,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&h(n,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&mM(l);const u=f(t,["config"]);return u!=null&&nM(u,n),n}function sM(t,e){const n={},o=f(t,["baseModel"]);o!=null&&h(n,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&h(n,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&gM(l,n,e);const u=f(t,["config"]);return u!=null&&iM(u,n,e),n}function rM(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function aM(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function lM(t,e,n){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(t,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function uM(t,e,n){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(t,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function cM(t,e){const n={},o=f(t,["config"]);return o!=null&&lM(o,n),n}function fM(t,e){const n={},o=f(t,["config"]);return o!=null&&uM(o,n),n}function dM(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=f(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>IE(d))),h(n,["tuningJobs"],u)}return n}function hM(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=f(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>fp(d))),h(n,["tuningJobs"],u)}return n}function pM(t,e){const n={},o=f(t,["name"]);o!=null&&h(n,["model"],o);const r=f(t,["name"]);return r!=null&&h(n,["endpoint"],r),n}function mM(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(n,["examples","examples"],r)}return n}function gM(t,e,n){const o={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}let l=f(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function IE(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&h(n,["name"],r);const l=f(t,["state"]);l!=null&&h(n,["state"],KT(l));const u=f(t,["createTime"]);u!=null&&h(n,["createTime"],u);const d=f(t,["tuningTask","startTime"]);d!=null&&h(n,["startTime"],d);const g=f(t,["tuningTask","completeTime"]);g!=null&&h(n,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&h(n,["updateTime"],m);const _=f(t,["description"]);_!=null&&h(n,["description"],_);const E=f(t,["baseModel"]);E!=null&&h(n,["baseModel"],E);const S=f(t,["_self"]);return S!=null&&h(n,["tunedModel"],pM(S)),n}function fp(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&h(n,["name"],r);const l=f(t,["state"]);l!=null&&h(n,["state"],KT(l));const u=f(t,["createTime"]);u!=null&&h(n,["createTime"],u);const d=f(t,["startTime"]);d!=null&&h(n,["startTime"],d);const g=f(t,["endTime"]);g!=null&&h(n,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&h(n,["updateTime"],m);const _=f(t,["error"]);_!=null&&h(n,["error"],_);const E=f(t,["description"]);E!=null&&h(n,["description"],E);const S=f(t,["baseModel"]);S!=null&&h(n,["baseModel"],S);const x=f(t,["tunedModel"]);x!=null&&h(n,["tunedModel"],x);const D=f(t,["preTunedModel"]);D!=null&&h(n,["preTunedModel"],D);const V=f(t,["supervisedTuningSpec"]);V!=null&&h(n,["supervisedTuningSpec"],V);const P=f(t,["preferenceOptimizationSpec"]);P!=null&&h(n,["preferenceOptimizationSpec"],P);const H=f(t,["distillationSpec"]);H!=null&&h(n,["distillationSpec"],H);const j=f(t,["tuningDataStats"]);j!=null&&h(n,["tuningDataStats"],j);const $=f(t,["encryptionSpec"]);$!=null&&h(n,["encryptionSpec"],$);const Z=f(t,["partnerModelTuningSpec"]);Z!=null&&h(n,["partnerModelTuningSpec"],Z);const Y=f(t,["customBaseModel"]);Y!=null&&h(n,["customBaseModel"],Y);const re=f(t,["experiment"]);re!=null&&h(n,["experiment"],re);const M=f(t,["labels"]);M!=null&&h(n,["labels"],M);const R=f(t,["outputUri"]);R!=null&&h(n,["outputUri"],R);const N=f(t,["pipelineJob"]);N!=null&&h(n,["pipelineJob"],N);const k=f(t,["serviceAccount"]);k!=null&&h(n,["serviceAccount"],k);const L=f(t,["tunedModelDisplayName"]);L!=null&&h(n,["tunedModelDisplayName"],L);const q=f(t,["veoTuningSpec"]);return q!=null&&h(n,["veoTuningSpec"],q),n}function yM(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&h(n,["name"],r);const l=f(t,["metadata"]);l!=null&&h(n,["metadata"],l);const u=f(t,["done"]);u!=null&&h(n,["done"],u);const d=f(t,["error"]);return d!=null&&h(n,["error"],d),n}function Uh(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&h(n,["validationDatasetUri"],o);const r=f(t,["vertexDatasetResource"]);return r!=null&&h(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vM extends _o{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ar(mo.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Wh.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=aM(e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>fp(_))}else{const m=rM(e);return d=me("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>IE(_))}}async listInternal(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=fM(e);return d=me("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=hM(_),S=new l0;return Object.assign(S,E),S})}else{const m=cM(e);return d=me("tunedModels",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=dM(_),S=new l0;return Object.assign(S,E),S})}}async cancel(e){var n,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Z1(e);return d=me("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=tM(_),S=new u0;return Object.assign(S,E),S})}else{const m=W1(e);return d=me("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=eM(_),S=new u0;return Object.assign(S,E),S})}}async tuneInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=sM(e,e);return l=me("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>fp(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oM(e);return l=me("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>yM(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _M{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const TM=1024*1024*8,EM=3,SM=1e3,AM=2,Kc="x-goog-upload-status";async function bM(t,e,n){var o;const r=await NE(t,e,n),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Kc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function CM(t,e,n){var o;const r=await NE(t,e,n),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Kc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=BT(l),d=new Op;return Object.assign(d,u),d}async function NE(t,e,n){var o,r;let l=0,u=0,d=new ep(new Response),g="upload";for(l=t.size;u<l;){const m=Math.min(TM,l-u),_=t.slice(u,u+m);u+m>=l&&(g+=", finalize");let E=0,S=SM;for(;E<EM&&(d=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[Kc]));)E++,await wM(S),S=S*AM;if(u+=m,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Kc])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function xM(t){return{size:t.size,type:t.type}}function wM(t){return new Promise(e=>setTimeout(e,t))}class RM{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bM(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await CM(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IM{create(e,n,o){return new NM(e,n,o)}}class NM{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k0="x-goog-api-key";class MM{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(k0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(k0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DM="gl-node/";class ff{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new en({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=AC(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new MM(this.apiKey);this.apiClient=new xN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:DM+"web",uploader:new RM,downloader:new _M}),this.models=new KN(this.apiClient),this.live=new BN(this.apiClient,r,new IM),this.batches=new Zx(this.apiClient),this.chats=new Uw(this.models,this.apiClient),this.caches=new Mw(this.apiClient),this.files=new Yw(this.apiClient),this.operations=new YN(this.apiClient),this.authTokens=new l1(this.apiClient),this.tunings=new vM(this.apiClient),this.fileSearchStores=new g1(this.apiClient)}}const L0=t=>{const e={:"",:"",sunday:"",sun:"",:"",:"",:"",monday:"",mon:"",:"",:"",thursday:"",tue:"",tues:"",:"",:"",:"",wed:"",:"",:"",thu:"",thurs:"",:"",fri:"",:"",sat:""},n={Math:{name:"",color:"bg-blue-100 text-blue-800",icon:"",keywords:["","","","","math",""]},Science:{name:"",color:"bg-green-100 text-green-800",icon:"",keywords:["","","kimya","science","physics","chemistry","biology","","",""]},Arabic:{name:" ",color:"bg-emerald-100 text-emerald-800",icon:"",keywords:[""," ","arabic","",""," "," "]},English:{name:" ",color:"bg-red-100 text-red-800",icon:"",keywords:["","","english",""]},Social:{name:" ",color:"bg-yellow-100 text-yellow-800",icon:"",keywords:["","","","social","history"]},Religion:{name:" ",color:"bg-purple-100 text-purple-800",icon:"",keywords:[""," ","islamic","quran",""]},Art:{name:" ",color:"bg-pink-100 text-pink-800",icon:"",keywords:["","art",""]},Sport:{name:" ",color:"bg-orange-100 text-orange-800",icon:"",keywords:["","","sport","pe"]}},o=[],r=g=>{let m=o.find(_=>_.day===g);return m||(m={day:g,slots:[]},o.push(m)),m};t.replace(//g," ").replace(/-/g," ").replace(/_/g," ").replace(/ /g,"  ").replace(/\s+/g," ");const l=t.split(/\n|\.|/).map(g=>g.trim()).filter(g=>g.length>2);let u=" ",d={color:"bg-gray-100 text-gray-800",icon:""};for(const g of l){let m="",_=null;for(const[x,D]of Object.entries(n))if(D.keywords.some(V=>g.toLowerCase().includes(V))){m=D.name,_=D;break}const E=/\d/.test(g),S=Object.keys(e).some(x=>g.includes(x));if(m&&!E&&!S){u=m,d=_;continue}if(S){let x=u,D=d;m&&(x=m,D=_);const V=[];for(const[$,Z]of Object.entries(e)){const Y=new RegExp($,"gi");let re;for(;(re=Y.exec(g))!==null;)V.some(M=>M.index===re.index)||V.push({day:Z,index:re.index})}V.sort(($,Z)=>$.index-Z.index);const P=[],H=/(\d{1,2})(:\d{2})?\s*(||pm|am||)?|\s*(\d{1,2})/gi;let j;for(;(j=H.exec(g))!==null;){let $=j[0],Z=j[1]||j[4],Y=parseInt(Z);if(Y){let re="";$.match(/|pm||PM/i)||Y>=12&&Y<=6||Y>=1&&Y<=6?re="":Y>=7&&Y<=11&&(re="");let M=`${Y}:00 ${re}`;P.push({time:M,index:j.index,raw:$})}}V.length>0&&(P.length===1?V.forEach($=>{r($.day).slots.push({id:`s-${Math.random()}`,subject:x,time:P[0].time,color:D.color,icon:D.icon})}):P.length>1&&V.forEach(($,Z)=>{var R;const Y=((R=V[Z+1])==null?void 0:R.index)??1/0,M=P.find(N=>N.index>$.index&&N.index<Y)||P[P.length-1];M&&r($.day).slots.push({id:`s-${Math.random()}`,subject:x,time:M.time,color:D.color,icon:D.icon})}))}}return o.length===0&&t.trim()&&o.push({day:"",slots:[{id:`s-${Math.random()}`,subject:t.trim().substring(0,30),time:"09:00 ",color:"bg-blue-100 text-blue-800",icon:""}]}),o},dp=async(t,e)=>{try{const n=e||void 0;if(!n)return console.warn("API Key missing, using Smart Context Regex parser."),L0(t);const l=(await new ff({apiKey:n}).models.generateContent({model:"gemini-1.5-flash",contents:`        .
          ( )   JSON .
      
      : "${t}"
      
      :
      1.           (   ).
      2.      "slots" ().
      3.  :
         - subject:    .
         - time:    ( "09:00 "  "04:00 ").
         - color:    Tailwind (: "bg-blue-100 text-blue-800").
         - icon:  .
         - id:  .
      
                ( "" "" "").`,config:{responseMimeType:"application/json",responseSchema:{type:Xe.ARRAY,items:{type:Xe.OBJECT,properties:{day:{type:Xe.STRING},slots:{type:Xe.ARRAY,items:{type:Xe.OBJECT,properties:{id:{type:Xe.STRING},subject:{type:Xe.STRING},time:{type:Xe.STRING},color:{type:Xe.STRING},icon:{type:Xe.STRING}},required:["id","subject","time","color","icon"]}}},required:["day","slots"]}}}})).text;if(!l)throw new Error("Empty response from AI");return JSON.parse(l.trim())}catch(n){return console.error("AI Schedule Parsing Error:",n),L0(t)}},ME=async(t,e)=>{try{const n=e||void 0;if(!n)return console.warn("API Key is missing for teacher parsing."),[];const r=await new ff({apiKey:n}).models.generateContent({model:"gemini-1.5-flash",contents:`         JSON.
      : "${t}"
      
        ( ):
      - name:  .
      - subject:  ().
      - bio:   ().
      - availability:   ().
      - teachingHours:   ().
      - grades:   ().
      - imageUrl:   .
      - id:  .`,config:{responseMimeType:"application/json",responseSchema:{type:Xe.ARRAY,items:{type:Xe.OBJECT,properties:{id:{type:Xe.STRING},name:{type:Xe.STRING},subject:{type:Xe.STRING},bio:{type:Xe.STRING},availability:{type:Xe.STRING},teachingHours:{type:Xe.STRING},grades:{type:Xe.ARRAY,items:{type:Xe.STRING}},imageUrl:{type:Xe.STRING}},required:["id","name","subject","bio","availability","teachingHours","grades","imageUrl"]}}}});return JSON.parse(r.text.trim())}catch(n){return console.error("AI Teacher Parsing Error:",n),[]}};var PM={};const DE=({onUpdateSchedule:t,onAddTeacher:e,grades:n,apiKey:o})=>{const[r,l]=Ae.useState(!1),[u,d]=Ae.useState(!1),[g,m]=Ae.useState(""),_=Ae.useRef(null),E=Ae.useRef(0),S=Ae.useRef(new Set),x=Ae.useRef(null),D=Ae.useRef(null),V=Y=>{let re="";for(let M=0;M<Y.byteLength;M++)re+=String.fromCharCode(Y[M]);return btoa(re)},P=Y=>{const re=atob(Y),M=new Uint8Array(re.length);for(let R=0;R<re.length;R++)M[R]=re.charCodeAt(R);return M},H=async(Y,re,M)=>{const R=new Int16Array(Y.buffer),N=re.createBuffer(1,R.length,M),k=N.getChannelData(0);for(let L=0;L<R.length;L++)k[L]=R[L]/32768;return N},j=Y=>{const re=new Int16Array(Y.length);for(let M=0;M<Y.length;M++)re[M]=Y[M]*32768;return{data:V(new Uint8Array(re.buffer)),mimeType:"audio/pcm;rate=16000"}},$=async()=>{if(r){Z();return}const Y=o||PM.API_KEY;if(!Y){alert("   API    ");return}d(!0);try{const re=new ff({apiKey:Y}),M=await navigator.mediaDevices.getUserMedia({audio:!0});D.current=M;const R=new AudioContext({sampleRate:16e3}),N=new AudioContext({sampleRate:24e3});_.current=N;const k=re.live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",callbacks:{onopen:()=>{d(!1),l(!0);const L=R.createMediaStreamSource(M),q=R.createScriptProcessor(4096,1,1);q.onaudioprocess=U=>{const Oe=U.inputBuffer.getChannelData(0);k.then(je=>je.sendRealtimeInput({media:j(Oe)}))},L.connect(q),q.connect(R.destination)},onmessage:async L=>{var U,Oe,je,te,fe,ye,we,Re;if(L.toolCall)for(const B of L.toolCall.functionCalls){let ne=" ";B.name==="updateSchedule"?(console.log("Updating schedule for:",B.args.gradeId,B.args.scheduleText),await t(B.args.gradeId,B.args.scheduleText),ne="     "):B.name==="addTeacher"&&(await e(B.args.teacherInfo),ne="     "),k.then(ae=>ae.sendToolResponse({functionResponses:{id:B.id,name:B.name,response:{result:ne}}}))}const q=(te=(je=(Oe=(U=L.serverContent)==null?void 0:U.modelTurn)==null?void 0:Oe.parts[0])==null?void 0:je.inlineData)==null?void 0:te.data;if(q&&_.current){const B=_.current;E.current=Math.max(E.current,B.currentTime);const ne=await H(P(q),B,24e3),ae=B.createBufferSource();ae.buffer=ne,ae.connect(B.destination),ae.start(E.current),E.current+=ne.duration,S.current.add(ae),ae.onended=()=>S.current.delete(ae)}(fe=L.serverContent)!=null&&fe.interrupted&&(S.current.forEach(B=>B.stop()),S.current.clear(),E.current=0),(Re=(we=(ye=L.serverContent)==null?void 0:ye.modelTurn)==null?void 0:we.parts[0])!=null&&Re.text&&m(B=>{var ne,ae,ge;return B+((ge=(ae=(ne=L.serverContent)==null?void 0:ne.modelTurn)==null?void 0:ae.parts[0])==null?void 0:ge.text)})},onclose:()=>Z(),onerror:()=>Z()},config:{responseModalities:[Ul.AUDIO],systemInstruction:`      Educators Academy.
           :        .
          
           : ${n.map(L=>`${L.name} (ID: ${L.id})`).join(", ")}.
          
          :
          1.      (: "   ...")   updateSchedule.
          2.       (: "    ...")   addTeacher       (   ).
          3.         .
          4.           .`,tools:[{functionDeclarations:[{name:"updateSchedule",description:"     ",parameters:{type:Xe.OBJECT,properties:{gradeId:{type:Xe.STRING,description:"   "},scheduleText:{type:Xe.STRING,description:"     "}},required:["gradeId","scheduleText"]}},{name:"addTeacher",description:"    ",parameters:{type:Xe.OBJECT,properties:{teacherInfo:{type:Xe.STRING,description:"     (   )"}},required:["teacherInfo"]}}]}]}});x.current=await k}catch(re){console.error(re),d(!1)}},Z=()=>{var Y,re;l(!1),d(!1),(Y=D.current)==null||Y.getTracks().forEach(M=>M.stop()),(re=x.current)==null||re.close(),m("")};return b.jsxs("div",{className:"fixed bottom-8 left-8 z-[100] flex flex-col items-end gap-4",children:[r&&b.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-6 w-72 border border-emerald-100 animate-in slide-in-from-bottom-4",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[b.jsxs("div",{className:"flex gap-1",children:[b.jsx("span",{className:"w-1.5 h-6 bg-emerald-500 rounded-full animate-bounce",style:{animationDelay:"0s"}}),b.jsx("span",{className:"w-1.5 h-10 bg-emerald-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),b.jsx("span",{className:"w-1.5 h-4 bg-emerald-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),b.jsx("span",{className:"font-black text-emerald-600",children:"  ..."})]}),b.jsx("p",{className:"text-gray-500 text-sm font-bold leading-relaxed",children:': "          "'})]}),b.jsx("button",{onClick:$,disabled:u,className:`w-20 h-20 rounded-full flex items-center justify-center shadow-2xl transition-all active:scale-90 ${r?"bg-red-500 text-white":"bg-[#10b981] text-white hover:bg-emerald-600"} ${u?"opacity-50 cursor-wait":""}`,children:u?b.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"}):r?b.jsx("span",{className:"text-3xl",children:""}):b.jsx("span",{className:"text-4xl",children:""})})]})};var O0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let r=t.charCodeAt(o);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++o)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},UM=function(t){const e=[];let n=0,o=0;for(;n<t.length;){const r=t[n++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=t[n++];e[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=t[n++],u=t[n++],d=t[n++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const l=t[n++],u=t[n++];e[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},UE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<t.length;r+=3){const l=t[r],u=r+1<t.length,d=u?t[r+1]:0,g=r+2<t.length,m=g?t[r+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|m>>6,x=m&63;g||(x=64,u||(S=64)),o.push(n[_],n[E],n[S],n[x])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<t.length;){const l=n[t.charAt(r++)],d=r<t.length?n[t.charAt(r)]:0;++r;const m=r<t.length?n[t.charAt(r)]:64;++r;const E=r<t.length?n[t.charAt(r)]:64;if(++r,l==null||d==null||m==null||E==null)throw new VM;const S=l<<2|d>>4;if(o.push(S),m!==64){const x=d<<4&240|m>>2;if(o.push(x),E!==64){const D=m<<6&192|E;o.push(D)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kM=function(t){const e=PE(t);return UE.encodeByteArray(e,!0)},Yc=function(t){return kM(t).replace(/\./g,"")},LM=function(t){try{return UE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=()=>OM().__FIREBASE_DEFAULTS__,GM=()=>{if(typeof process>"u"||typeof O0>"u")return;const t=O0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LM(t[1]);return e&&JSON.parse(e)},Yp=()=>{try{return BM()||GM()||qM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},FM=t=>{var e,n;return(n=(e=Yp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},VE=t=>{const e=FM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},kE=()=>{var t;return(t=Yp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",r=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Yc(JSON.stringify(n)),Yc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KM(){var t;const e=(t=Yp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YM(){return!KM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JM(){try{return typeof indexedDB=="object"}catch{return!1}}function $M(){return new Promise((t,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(o),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var l;e(((l=r.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM="FirebaseError";class lr extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=QM,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,OE.prototype.create)}}class OE{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?XM(l,o):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new lr(r,d,o)}}function XM(t,e){return t.replace(jM,(n,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const jM=/\{\$([^}]+)}/g;function hp(t,e){if(t===e)return!0;const n=Object.keys(t),o=Object.keys(e);for(const r of n){if(!o.includes(r))return!1;const l=t[r],u=e[r];if(B0(l)&&B0(u)){if(!hp(l,u))return!1}else if(l!==u)return!1}for(const r of o)if(!n.includes(r))return!1;return!0}function B0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t){return t&&t._delegate?t._delegate:t}class sa{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new HM;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eD(e))try{this.getOrInitializeService({instanceIdentifier:Zs})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(e=Zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zs){return this.instances.has(e)}getOptions(e=Zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&u.resolve(r)}return r}onInit(e,n){var o;const r=this.normalizeInstanceIdentifier(n),l=(o=this.onInitCallbacks.get(r))!==null&&o!==void 0?o:new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const r of o)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:ZM(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Zs){return this.component?this.component.multipleInstances?e:Zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZM(t){return t===Zs?void 0:t}function eD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const nD={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},iD=We.INFO,oD={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},sD=(t,e,...n)=>{if(e<t.logLevel)return;const o=new Date().toISOString(),r=oD[e];if(r)console[r](`[${o}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class BE{constructor(e){this.name=e,this._logLevel=iD,this._logHandler=sD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const rD=(t,e)=>e.some(n=>t instanceof n);let G0,q0;function aD(){return G0||(G0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lD(){return q0||(q0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GE=new WeakMap,pp=new WeakMap,qE=new WeakMap,Vh=new WeakMap,Jp=new WeakMap;function uD(t){const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(ds(t.result)),r()},u=()=>{o(t.error),r()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&GE.set(n,t)}).catch(()=>{}),Jp.set(e,t),e}function cD(t){if(pp.has(t))return;const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),r()},u=()=>{o(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});pp.set(t,e)}let mp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ds(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fD(t){mp=t(mp)}function dD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(kh(this),e,...n);return qE.set(o,e.sort?e.sort():[e]),ds(o)}:lD().includes(t)?function(...e){return t.apply(kh(this),e),ds(GE.get(this))}:function(...e){return ds(t.apply(kh(this),e))}}function hD(t){return typeof t=="function"?dD(t):(t instanceof IDBTransaction&&cD(t),rD(t,aD())?new Proxy(t,mp):t)}function ds(t){if(t instanceof IDBRequest)return uD(t);if(Vh.has(t))return Vh.get(t);const e=hD(t);return e!==t&&(Vh.set(t,e),Jp.set(e,t)),e}const kh=t=>Jp.get(t);function pD(t,e,{blocked:n,upgrade:o,blocking:r,terminated:l}={}){const u=indexedDB.open(t,e),d=ds(u);return o&&u.addEventListener("upgradeneeded",g=>{o(ds(u.result),g.oldVersion,g.newVersion,ds(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const mD=["get","getKey","getAll","getAllKeys","count"],gD=["put","add","delete","clear"],Lh=new Map;function F0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lh.get(e))return Lh.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,r=gD.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(r||mD.includes(n)))return;const l=async function(u,...d){const g=this.transaction(u,r?"readwrite":"readonly");let m=g.store;return o&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),r&&g.done]))[0]};return Lh.set(e,l),l}fD(t=>({...t,get:(e,n,o)=>F0(e,n)||t.get(e,n,o),has:(e,n)=>!!F0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vD(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function vD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gp="@firebase/app",H0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new BE("@firebase/app"),_D="@firebase/app-compat",TD="@firebase/analytics-compat",ED="@firebase/analytics",SD="@firebase/app-check-compat",AD="@firebase/app-check",bD="@firebase/auth",CD="@firebase/auth-compat",xD="@firebase/database",wD="@firebase/data-connect",RD="@firebase/database-compat",ID="@firebase/functions",ND="@firebase/functions-compat",MD="@firebase/installations",DD="@firebase/installations-compat",PD="@firebase/messaging",UD="@firebase/messaging-compat",VD="@firebase/performance",kD="@firebase/performance-compat",LD="@firebase/remote-config",OD="@firebase/remote-config-compat",BD="@firebase/storage",GD="@firebase/storage-compat",qD="@firebase/firestore",FD="@firebase/vertexai-preview",HD="@firebase/firestore-compat",zD="firebase",KD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="[DEFAULT]",YD={[gp]:"fire-core",[_D]:"fire-core-compat",[ED]:"fire-analytics",[TD]:"fire-analytics-compat",[AD]:"fire-app-check",[SD]:"fire-app-check-compat",[bD]:"fire-auth",[CD]:"fire-auth-compat",[xD]:"fire-rtdb",[wD]:"fire-data-connect",[RD]:"fire-rtdb-compat",[ID]:"fire-fn",[ND]:"fire-fn-compat",[MD]:"fire-iid",[DD]:"fire-iid-compat",[PD]:"fire-fcm",[UD]:"fire-fcm-compat",[VD]:"fire-perf",[kD]:"fire-perf-compat",[LD]:"fire-rc",[OD]:"fire-rc-compat",[BD]:"fire-gcs",[GD]:"fire-gcs-compat",[qD]:"fire-fst",[HD]:"fire-fst-compat",[FD]:"fire-vertex","fire-js":"fire-js",[zD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Map,JD=new Map,vp=new Map;function z0(t,e){try{t.container.addComponent(e)}catch(n){go.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kl(t){const e=t.name;if(vp.has(e))return go.debug(`There were multiple attempts to register component ${e}.`),!1;vp.set(e,t);for(const n of Jc.values())z0(n,t);for(const n of JD.values())z0(n,t);return!0}function FE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hs=new OE("app","Firebase",$D);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=KD;function zE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const o=Object.assign({name:yp,automaticDataCollectionEnabled:!1},e),r=o.name;if(typeof r!="string"||!r)throw hs.create("bad-app-name",{appName:String(r)});if(n||(n=kE()),!n)throw hs.create("no-options");const l=Jc.get(r);if(l){if(hp(n,l.options)&&hp(o,l.config))return l;throw hs.create("duplicate-app",{appName:r})}const u=new tD(r);for(const g of vp.values())u.addComponent(g);const d=new QD(n,o,u);return Jc.set(r,d),d}function KE(t=yp){const e=Jc.get(t);if(!e&&t===yp&&kE())return zE();if(!e)throw hs.create("no-app",{appName:t});return e}function ps(t,e,n){var o;let r=(o=YD[t])!==null&&o!==void 0?o:t;n&&(r+=`-${n}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${r}" with version "${e}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),go.warn(d.join(" "));return}kl(new sa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="firebase-heartbeat-database",jD=1,Ll="firebase-heartbeat-store";let Oh=null;function YE(){return Oh||(Oh=pD(XD,jD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ll)}catch(n){console.warn(n)}}}}).catch(t=>{throw hs.create("idb-open",{originalErrorMessage:t.message})})),Oh}async function WD(t){try{const n=(await YE()).transaction(Ll),o=await n.objectStore(Ll).get(JE(t));return await n.done,o}catch(e){if(e instanceof lr)go.warn(e.message);else{const n=hs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});go.warn(n.message)}}}async function K0(t,e){try{const o=(await YE()).transaction(Ll,"readwrite");await o.objectStore(Ll).put(e,JE(t)),await o.done}catch(n){if(n instanceof lr)go.warn(n.message);else{const o=hs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});go.warn(o.message)}}}function JE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=1024,e2=720*60*60*1e3;class t2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new i2(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Y0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=e2}),this._storage.overwrite(this._heartbeatsCache))}catch(o){go.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Y0(),{heartbeatsToSend:o,unsentEntries:r}=n2(this._heartbeatsCache.heartbeats),l=Yc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return go.warn(n),""}}}function Y0(){return new Date().toISOString().substring(0,10)}function n2(t,e=ZD){const n=[];let o=t.slice();for(const r of t){const l=n.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),J0(n)>e){l.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),J0(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class i2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JM()?$M().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return K0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return K0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function J0(t){return Yc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t){kl(new sa("platform-logger",e=>new yD(e),"PRIVATE")),kl(new sa("heartbeat",e=>new t2(e),"PRIVATE")),ps(gp,H0,t),ps(gp,H0,"esm2017"),ps("fire-js","")}o2("");var s2="firebase",r2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ps(s2,r2,"app");var $0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tr,$E;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function N(){}N.prototype=R.prototype,M.D=R.prototype,M.prototype=new N,M.prototype.constructor=M,M.C=function(k,L,q){for(var U=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)U[Oe-2]=arguments[Oe];return R.prototype[L].apply(k,U)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,n),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,R,N){N||(N=0);var k=Array(16);if(typeof R=="string")for(var L=0;16>L;++L)k[L]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(L=0;16>L;++L)k[L]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=M.g[0],N=M.g[1],L=M.g[2];var q=M.g[3],U=R+(q^N&(L^q))+k[0]+3614090360&4294967295;R=N+(U<<7&4294967295|U>>>25),U=q+(L^R&(N^L))+k[1]+3905402710&4294967295,q=R+(U<<12&4294967295|U>>>20),U=L+(N^q&(R^N))+k[2]+606105819&4294967295,L=q+(U<<17&4294967295|U>>>15),U=N+(R^L&(q^R))+k[3]+3250441966&4294967295,N=L+(U<<22&4294967295|U>>>10),U=R+(q^N&(L^q))+k[4]+4118548399&4294967295,R=N+(U<<7&4294967295|U>>>25),U=q+(L^R&(N^L))+k[5]+1200080426&4294967295,q=R+(U<<12&4294967295|U>>>20),U=L+(N^q&(R^N))+k[6]+2821735955&4294967295,L=q+(U<<17&4294967295|U>>>15),U=N+(R^L&(q^R))+k[7]+4249261313&4294967295,N=L+(U<<22&4294967295|U>>>10),U=R+(q^N&(L^q))+k[8]+1770035416&4294967295,R=N+(U<<7&4294967295|U>>>25),U=q+(L^R&(N^L))+k[9]+2336552879&4294967295,q=R+(U<<12&4294967295|U>>>20),U=L+(N^q&(R^N))+k[10]+4294925233&4294967295,L=q+(U<<17&4294967295|U>>>15),U=N+(R^L&(q^R))+k[11]+2304563134&4294967295,N=L+(U<<22&4294967295|U>>>10),U=R+(q^N&(L^q))+k[12]+1804603682&4294967295,R=N+(U<<7&4294967295|U>>>25),U=q+(L^R&(N^L))+k[13]+4254626195&4294967295,q=R+(U<<12&4294967295|U>>>20),U=L+(N^q&(R^N))+k[14]+2792965006&4294967295,L=q+(U<<17&4294967295|U>>>15),U=N+(R^L&(q^R))+k[15]+1236535329&4294967295,N=L+(U<<22&4294967295|U>>>10),U=R+(L^q&(N^L))+k[1]+4129170786&4294967295,R=N+(U<<5&4294967295|U>>>27),U=q+(N^L&(R^N))+k[6]+3225465664&4294967295,q=R+(U<<9&4294967295|U>>>23),U=L+(R^N&(q^R))+k[11]+643717713&4294967295,L=q+(U<<14&4294967295|U>>>18),U=N+(q^R&(L^q))+k[0]+3921069994&4294967295,N=L+(U<<20&4294967295|U>>>12),U=R+(L^q&(N^L))+k[5]+3593408605&4294967295,R=N+(U<<5&4294967295|U>>>27),U=q+(N^L&(R^N))+k[10]+38016083&4294967295,q=R+(U<<9&4294967295|U>>>23),U=L+(R^N&(q^R))+k[15]+3634488961&4294967295,L=q+(U<<14&4294967295|U>>>18),U=N+(q^R&(L^q))+k[4]+3889429448&4294967295,N=L+(U<<20&4294967295|U>>>12),U=R+(L^q&(N^L))+k[9]+568446438&4294967295,R=N+(U<<5&4294967295|U>>>27),U=q+(N^L&(R^N))+k[14]+3275163606&4294967295,q=R+(U<<9&4294967295|U>>>23),U=L+(R^N&(q^R))+k[3]+4107603335&4294967295,L=q+(U<<14&4294967295|U>>>18),U=N+(q^R&(L^q))+k[8]+1163531501&4294967295,N=L+(U<<20&4294967295|U>>>12),U=R+(L^q&(N^L))+k[13]+2850285829&4294967295,R=N+(U<<5&4294967295|U>>>27),U=q+(N^L&(R^N))+k[2]+4243563512&4294967295,q=R+(U<<9&4294967295|U>>>23),U=L+(R^N&(q^R))+k[7]+1735328473&4294967295,L=q+(U<<14&4294967295|U>>>18),U=N+(q^R&(L^q))+k[12]+2368359562&4294967295,N=L+(U<<20&4294967295|U>>>12),U=R+(N^L^q)+k[5]+4294588738&4294967295,R=N+(U<<4&4294967295|U>>>28),U=q+(R^N^L)+k[8]+2272392833&4294967295,q=R+(U<<11&4294967295|U>>>21),U=L+(q^R^N)+k[11]+1839030562&4294967295,L=q+(U<<16&4294967295|U>>>16),U=N+(L^q^R)+k[14]+4259657740&4294967295,N=L+(U<<23&4294967295|U>>>9),U=R+(N^L^q)+k[1]+2763975236&4294967295,R=N+(U<<4&4294967295|U>>>28),U=q+(R^N^L)+k[4]+1272893353&4294967295,q=R+(U<<11&4294967295|U>>>21),U=L+(q^R^N)+k[7]+4139469664&4294967295,L=q+(U<<16&4294967295|U>>>16),U=N+(L^q^R)+k[10]+3200236656&4294967295,N=L+(U<<23&4294967295|U>>>9),U=R+(N^L^q)+k[13]+681279174&4294967295,R=N+(U<<4&4294967295|U>>>28),U=q+(R^N^L)+k[0]+3936430074&4294967295,q=R+(U<<11&4294967295|U>>>21),U=L+(q^R^N)+k[3]+3572445317&4294967295,L=q+(U<<16&4294967295|U>>>16),U=N+(L^q^R)+k[6]+76029189&4294967295,N=L+(U<<23&4294967295|U>>>9),U=R+(N^L^q)+k[9]+3654602809&4294967295,R=N+(U<<4&4294967295|U>>>28),U=q+(R^N^L)+k[12]+3873151461&4294967295,q=R+(U<<11&4294967295|U>>>21),U=L+(q^R^N)+k[15]+530742520&4294967295,L=q+(U<<16&4294967295|U>>>16),U=N+(L^q^R)+k[2]+3299628645&4294967295,N=L+(U<<23&4294967295|U>>>9),U=R+(L^(N|~q))+k[0]+4096336452&4294967295,R=N+(U<<6&4294967295|U>>>26),U=q+(N^(R|~L))+k[7]+1126891415&4294967295,q=R+(U<<10&4294967295|U>>>22),U=L+(R^(q|~N))+k[14]+2878612391&4294967295,L=q+(U<<15&4294967295|U>>>17),U=N+(q^(L|~R))+k[5]+4237533241&4294967295,N=L+(U<<21&4294967295|U>>>11),U=R+(L^(N|~q))+k[12]+1700485571&4294967295,R=N+(U<<6&4294967295|U>>>26),U=q+(N^(R|~L))+k[3]+2399980690&4294967295,q=R+(U<<10&4294967295|U>>>22),U=L+(R^(q|~N))+k[10]+4293915773&4294967295,L=q+(U<<15&4294967295|U>>>17),U=N+(q^(L|~R))+k[1]+2240044497&4294967295,N=L+(U<<21&4294967295|U>>>11),U=R+(L^(N|~q))+k[8]+1873313359&4294967295,R=N+(U<<6&4294967295|U>>>26),U=q+(N^(R|~L))+k[15]+4264355552&4294967295,q=R+(U<<10&4294967295|U>>>22),U=L+(R^(q|~N))+k[6]+2734768916&4294967295,L=q+(U<<15&4294967295|U>>>17),U=N+(q^(L|~R))+k[13]+1309151649&4294967295,N=L+(U<<21&4294967295|U>>>11),U=R+(L^(N|~q))+k[4]+4149444226&4294967295,R=N+(U<<6&4294967295|U>>>26),U=q+(N^(R|~L))+k[11]+3174756917&4294967295,q=R+(U<<10&4294967295|U>>>22),U=L+(R^(q|~N))+k[2]+718787259&4294967295,L=q+(U<<15&4294967295|U>>>17),U=N+(q^(L|~R))+k[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(L+(U<<21&4294967295|U>>>11))&4294967295,M.g[2]=M.g[2]+L&4294967295,M.g[3]=M.g[3]+q&4294967295}o.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var N=R-this.blockSize,k=this.B,L=this.h,q=0;q<R;){if(L==0)for(;q<=N;)r(this,M,q),q+=this.blockSize;if(typeof M=="string"){for(;q<R;)if(k[L++]=M.charCodeAt(q++),L==this.blockSize){r(this,k),L=0;break}}else for(;q<R;)if(k[L++]=M[q++],L==this.blockSize){r(this,k),L=0;break}}this.h=L,this.o+=R},o.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var N=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=N&255,N/=256;for(this.u(M),M=Array(16),R=N=0;4>R;++R)for(var k=0;32>k;k+=8)M[N++]=this.g[R]>>>k&255;return M};function l(M,R){var N=d;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=R(M)}function u(M,R){this.h=R;for(var N=[],k=!0,L=M.length-1;0<=L;L--){var q=M[L]|0;k&&q==R||(N[L]=q,k=!1)}this.g=N}var d={};function g(M){return-128<=M&&128>M?l(M,function(R){return new u([R|0],0>R?-1:0)}):new u([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return E;if(0>M)return P(m(-M));for(var R=[],N=1,k=0;M>=N;k++)R[k]=M/N|0,N*=4294967296;return new u(R,0)}function _(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return P(_(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(R,8)),k=E,L=0;L<M.length;L+=8){var q=Math.min(8,M.length-L),U=parseInt(M.substring(L,L+q),R);8>q?(q=m(Math.pow(R,q)),k=k.j(q).add(m(U))):(k=k.j(N),k=k.add(m(U)))}return k}var E=g(0),S=g(1),x=g(16777216);t=u.prototype,t.m=function(){if(V(this))return-P(this).m();for(var M=0,R=1,N=0;N<this.g.length;N++){var k=this.i(N);M+=(0<=k?k:4294967296+k)*R,R*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(D(this))return"0";if(V(this))return"-"+P(this).toString(M);for(var R=m(Math.pow(M,6)),N=this,k="";;){var L=Z(N,R).g;N=H(N,L.j(R));var q=((0<N.g.length?N.g[0]:N.h)>>>0).toString(M);if(N=L,D(N))return q+k;for(;6>q.length;)q="0"+q;k=q+k}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function D(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function V(M){return M.h==-1}t.l=function(M){return M=H(this,M),V(M)?-1:D(M)?0:1};function P(M){for(var R=M.g.length,N=[],k=0;k<R;k++)N[k]=~M.g[k];return new u(N,~M.h).add(S)}t.abs=function(){return V(this)?P(this):this},t.add=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],k=0,L=0;L<=R;L++){var q=k+(this.i(L)&65535)+(M.i(L)&65535),U=(q>>>16)+(this.i(L)>>>16)+(M.i(L)>>>16);k=U>>>16,q&=65535,U&=65535,N[L]=U<<16|q}return new u(N,N[N.length-1]&-2147483648?-1:0)};function H(M,R){return M.add(P(R))}t.j=function(M){if(D(this)||D(M))return E;if(V(this))return V(M)?P(this).j(P(M)):P(P(this).j(M));if(V(M))return P(this.j(P(M)));if(0>this.l(x)&&0>M.l(x))return m(this.m()*M.m());for(var R=this.g.length+M.g.length,N=[],k=0;k<2*R;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<M.g.length;L++){var q=this.i(k)>>>16,U=this.i(k)&65535,Oe=M.i(L)>>>16,je=M.i(L)&65535;N[2*k+2*L]+=U*je,j(N,2*k+2*L),N[2*k+2*L+1]+=q*je,j(N,2*k+2*L+1),N[2*k+2*L+1]+=U*Oe,j(N,2*k+2*L+1),N[2*k+2*L+2]+=q*Oe,j(N,2*k+2*L+2)}for(k=0;k<R;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=R;k<2*R;k++)N[k]=0;return new u(N,0)};function j(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function $(M,R){this.g=M,this.h=R}function Z(M,R){if(D(R))throw Error("division by zero");if(D(M))return new $(E,E);if(V(M))return R=Z(P(M),R),new $(P(R.g),P(R.h));if(V(R))return R=Z(M,P(R)),new $(P(R.g),R.h);if(30<M.g.length){if(V(M)||V(R))throw Error("slowDivide_ only works with positive integers.");for(var N=S,k=R;0>=k.l(M);)N=Y(N),k=Y(k);var L=re(N,1),q=re(k,1);for(k=re(k,2),N=re(N,2);!D(k);){var U=q.add(k);0>=U.l(M)&&(L=L.add(N),q=U),k=re(k,1),N=re(N,1)}return R=H(M,L.j(R)),new $(L,R)}for(L=E;0<=M.l(R);){for(N=Math.max(1,Math.floor(M.m()/R.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),q=m(N),U=q.j(R);V(U)||0<U.l(M);)N-=k,q=m(N),U=q.j(R);D(q)&&(q=S),L=L.add(q),M=H(M,U)}return new $(L,M)}t.A=function(M){return Z(this,M).h},t.and=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],k=0;k<R;k++)N[k]=this.i(k)&M.i(k);return new u(N,this.h&M.h)},t.or=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],k=0;k<R;k++)N[k]=this.i(k)|M.i(k);return new u(N,this.h|M.h)},t.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],k=0;k<R;k++)N[k]=this.i(k)^M.i(k);return new u(N,this.h^M.h)};function Y(M){for(var R=M.g.length+1,N=[],k=0;k<R;k++)N[k]=M.i(k)<<1|M.i(k-1)>>>31;return new u(N,M.h)}function re(M,R){var N=R>>5;R%=32;for(var k=M.g.length-N,L=[],q=0;q<k;q++)L[q]=0<R?M.i(q+N)>>>R|M.i(q+N+1)<<32-R:M.i(q+N);return new u(L,M.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,$E=o,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,tr=u}).apply(typeof $0<"u"?$0:typeof self<"u"?self:typeof window<"u"?window:{});var xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QE,Cl,XE,Vc,_p,jE,WE,ZE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,T,C){return p==Array.prototype||p==Object.prototype||(p[T]=C.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof xc=="object"&&xc];for(var T=0;T<p.length;++T){var C=p[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=n(this);function r(p,T){if(T)e:{var C=o;p=p.split(".");for(var I=0;I<p.length-1;I++){var K=p[I];if(!(K in C))break e;C=C[K]}p=p[p.length-1],I=C[p],T=T(I),T!=I&&T!=null&&e(C,p,{configurable:!0,writable:!0,value:T})}}function l(p,T){p instanceof String&&(p+="");var C=0,I=!1,K={next:function(){if(!I&&C<p.length){var ee=C++;return{value:T(ee,p[ee]),done:!1}}return I=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}r("Array.prototype.values",function(p){return p||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function g(p){var T=typeof p;return T=T!="object"?T:p?Array.isArray(p)?"array":T:"null",T=="array"||T=="object"&&typeof p.length=="number"}function m(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function _(p,T,C){return p.call.apply(p.bind,arguments)}function E(p,T,C){if(!p)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,I),p.apply(T,K)}}return function(){return p.apply(T,arguments)}}function S(p,T,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function x(p,T){var C=Array.prototype.slice.call(arguments,1);return function(){var I=C.slice();return I.push.apply(I,arguments),p.apply(this,I)}}function D(p,T){function C(){}C.prototype=T.prototype,p.aa=T.prototype,p.prototype=new C,p.prototype.constructor=p,p.Qb=function(I,K,ee){for(var de=Array(arguments.length-2),at=2;at<arguments.length;at++)de[at-2]=arguments[at];return T.prototype[K].apply(I,de)}}function V(p){const T=p.length;if(0<T){const C=Array(T);for(let I=0;I<T;I++)C[I]=p[I];return C}return[]}function P(p,T){for(let C=1;C<arguments.length;C++){const I=arguments[C];if(g(I)){const K=p.length||0,ee=I.length||0;p.length=K+ee;for(let de=0;de<ee;de++)p[K+de]=I[de]}else p.push(I)}}class H{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function j(p){return/^[\s\xa0]*$/.test(p)}function $(){var p=d.navigator;return p&&(p=p.userAgent)?p:""}function Z(p){return Z[" "](p),p}Z[" "]=function(){};var Y=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function re(p,T,C){for(const I in p)T.call(C,p[I],I,p)}function M(p,T){for(const C in p)T.call(void 0,p[C],C,p)}function R(p){const T={};for(const C in p)T[C]=p[C];return T}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(p,T){let C,I;for(let K=1;K<arguments.length;K++){I=arguments[K];for(C in I)p[C]=I[C];for(let ee=0;ee<N.length;ee++)C=N[ee],Object.prototype.hasOwnProperty.call(I,C)&&(p[C]=I[C])}}function L(p){var T=1;p=p.split(":");const C=[];for(;0<T&&p.length;)C.push(p.shift()),T--;return p.length&&C.push(p.join(":")),C}function q(p){d.setTimeout(()=>{throw p},0)}function U(){var p=we;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class Oe{constructor(){this.h=this.g=null}add(T,C){const I=je.get();I.set(T,C),this.h?this.h.next=I:this.g=I,this.h=I}}var je=new H(()=>new te,p=>p.reset());class te{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ye=!1,we=new Oe,Re=()=>{const p=d.Promise.resolve(void 0);fe=()=>{p.then(B)}};var B=()=>{for(var p;p=U();){try{p.h.call(p.g)}catch(C){q(C)}var T=je;T.j(p),100>T.h&&(T.h++,p.next=T.g,T.g=p)}ye=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ge=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};d.addEventListener("test",C,T),d.removeEventListener("test",C,T)}catch{}return p})();function pe(p,T){if(ae.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var C=this.type=p.type,I=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget){if(Y){e:{try{Z(T.nodeName);var K=!0;break e}catch{}K=!1}K||(T=null)}}else C=="mouseover"?T=p.fromElement:C=="mouseout"&&(T=p.toElement);this.relatedTarget=T,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:De[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&pe.aa.h.call(this)}}D(pe,ae);var De={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function yt(p,T,C,I,K){this.listener=p,this.proxy=null,this.src=T,this.type=C,this.capture=!!I,this.ha=K,this.key=++Vt,this.da=this.fa=!1}function Ln(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Wn(p){this.src=p,this.g={},this.h=0}Wn.prototype.add=function(p,T,C,I,K){var ee=p.toString();p=this.g[ee],p||(p=this.g[ee]=[],this.h++);var de=qi(p,T,I,K);return-1<de?(T=p[de],C||(T.fa=!1)):(T=new yt(T,this.src,ee,!!I,K),T.fa=C,p.push(T)),T};function fi(p,T){var C=T.type;if(C in p.g){var I=p.g[C],K=Array.prototype.indexOf.call(I,T,void 0),ee;(ee=0<=K)&&Array.prototype.splice.call(I,K,1),ee&&(Ln(T),p.g[C].length==0&&(delete p.g[C],p.h--))}}function qi(p,T,C,I){for(var K=0;K<p.length;++K){var ee=p[K];if(!ee.da&&ee.listener==T&&ee.capture==!!C&&ee.ha==I)return K}return-1}var Rn="closure_lm_"+(1e6*Math.random()|0),ot={};function On(p,T,C,I,K){if(Array.isArray(T)){for(var ee=0;ee<T.length;ee++)On(p,T[ee],C,I,K);return null}return C=Cs(C),p&&p[qe]?p.K(T,C,m(I)?!!I.capture:!1,K):Eo(p,T,C,!1,I,K)}function Eo(p,T,C,I,K,ee){if(!T)throw Error("Invalid event type");var de=m(K)?!!K.capture:!!K,at=Ao(p);if(at||(p[Rn]=at=new Wn(p)),C=at.add(T,C,I,de,ee),C.proxy)return C;if(I=Ss(),C.proxy=I,I.src=p,I.listener=C,p.addEventListener)ge||(K=de),K===void 0&&(K=!1),p.addEventListener(T.toString(),I,K);else if(p.attachEvent)p.attachEvent(bs(T.toString()),I);else if(p.addListener&&p.removeListener)p.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ss(){function p(C){return T.call(p.src,p.listener,C)}const T=Xl;return p}function As(p,T,C,I,K){if(Array.isArray(T))for(var ee=0;ee<T.length;ee++)As(p,T[ee],C,I,K);else I=m(I)?!!I.capture:!!I,C=Cs(C),p&&p[qe]?(p=p.i,T=String(T).toString(),T in p.g&&(ee=p.g[T],C=qi(ee,C,I,K),-1<C&&(Ln(ee[C]),Array.prototype.splice.call(ee,C,1),ee.length==0&&(delete p.g[T],p.h--)))):p&&(p=Ao(p))&&(T=p.g[T.toString()],p=-1,T&&(p=qi(T,C,I,K)),(C=-1<p?T[p]:null)&&So(C))}function So(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[qe])fi(T.i,p);else{var C=p.type,I=p.proxy;T.removeEventListener?T.removeEventListener(C,I,p.capture):T.detachEvent?T.detachEvent(bs(C),I):T.addListener&&T.removeListener&&T.removeListener(I),(C=Ao(T))?(fi(C,p),C.h==0&&(C.src=null,T[Rn]=null)):Ln(p)}}}function bs(p){return p in ot?ot[p]:ot[p]="on"+p}function Xl(p,T){if(p.da)p=!0;else{T=new pe(T,this);var C=p.listener,I=p.ha||p.src;p.fa&&So(p),p=C.call(I,T)}return p}function Ao(p){return p=p[Rn],p instanceof Wn?p:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cs(p){return typeof p=="function"?p:(p[kt]||(p[kt]=function(T){return p.handleEvent(T)}),p[kt])}function Nt(){ne.call(this),this.i=new Wn(this),this.M=this,this.F=null}D(Nt,ne),Nt.prototype[qe]=!0,Nt.prototype.removeEventListener=function(p,T,C,I){As(this,p,T,C,I)};function Lt(p,T){var C,I=p.F;if(I)for(C=[];I;I=I.F)C.push(I);if(p=p.M,I=T.type||T,typeof T=="string")T=new ae(T,p);else if(T instanceof ae)T.target=T.target||p;else{var K=T;T=new ae(I,p),k(T,K)}if(K=!0,C)for(var ee=C.length-1;0<=ee;ee--){var de=T.g=C[ee];K=di(de,I,!0,T)&&K}if(de=T.g=p,K=di(de,I,!0,T)&&K,K=di(de,I,!1,T)&&K,C)for(ee=0;ee<C.length;ee++)de=T.g=C[ee],K=di(de,I,!1,T)&&K}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var p=this.i,T;for(T in p.g){for(var C=p.g[T],I=0;I<C.length;I++)Ln(C[I]);delete p.g[T],p.h--}}this.F=null},Nt.prototype.K=function(p,T,C,I){return this.i.add(String(p),T,!1,C,I)},Nt.prototype.L=function(p,T,C,I){return this.i.add(String(p),T,!0,C,I)};function di(p,T,C,I){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();for(var K=!0,ee=0;ee<T.length;++ee){var de=T[ee];if(de&&!de.da&&de.capture==C){var at=de.listener,Ot=de.ha||de.src;de.fa&&fi(p.i,de),K=at.call(Ot,I)!==!1&&K}}return K&&!I.defaultPrevented}function fr(p,T,C){if(typeof p=="function")C&&(p=S(p,C));else if(p&&typeof p.handleEvent=="function")p=S(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:d.setTimeout(p,T||0)}function xs(p){p.g=fr(()=>{p.g=null,p.i&&(p.i=!1,xs(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class _a extends ne{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:xs(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(p){ne.call(this),this.h=p,this.g={}}D(Fi,ne);var bi=[];function zt(p){re(p.g,function(T,C){this.g.hasOwnProperty(C)&&So(T)},p),p.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),zt(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var G=d.JSON.stringify,ce=d.JSON.parse,he=class{stringify(p){return d.JSON.stringify(p,void 0)}parse(p){return d.JSON.parse(p,void 0)}};function ve(){}ve.prototype.h=null;function Ee(p){return p.h||(p.h=p.i())}function Me(){}var Ce={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ft(){ae.call(this,"d")}D(ft,ae);function dt(){ae.call(this,"c")}D(dt,ae);var rt={},Kt=null;function _n(){return Kt=Kt||new Nt}rt.La="serverreachability";function Ta(p){ae.call(this,rt.La,p)}D(Ta,ae);function Hi(p){const T=_n();Lt(T,new Ta(T))}rt.STAT_EVENT="statevent";function bo(p,T){ae.call(this,rt.STAT_EVENT,p),this.stat=T}D(bo,ae);function tn(p){const T=_n();Lt(T,new bo(T,p))}rt.Ma="timingevent";function Ea(p,T){ae.call(this,rt.Ma,p),this.size=T}D(Ea,ae);function Co(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){p()},T)}function xo(){this.g=!0}xo.prototype.xa=function(){this.g=!1};function Sa(p,T,C,I,K,ee){p.info(function(){if(p.g)if(ee)for(var de="",at=ee.split("&"),Ot=0;Ot<at.length;Ot++){var Fe=at[Ot].split("=");if(1<Fe.length){var Xt=Fe[0];Fe=Fe[1];var jt=Xt.split("_");de=2<=jt.length&&jt[1]=="type"?de+(Xt+"="+Fe+"&"):de+(Xt+"=redacted&")}}else de=null;else de=ee;return"XMLHTTP REQ ("+I+") [attempt "+K+"]: "+T+`
`+C+`
`+de})}function Aa(p,T,C,I,K,ee,de){p.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+K+"]: "+T+`
`+C+`
`+ee+" "+de})}function zi(p,T,C,I){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+Ci(p,C)+(I?" "+I:"")})}function jl(p,T){p.info(function(){return"TIMEOUT: "+T})}xo.prototype.info=function(){};function Ci(p,T){if(!p.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(p=0;p<C.length;p++)if(Array.isArray(C[p])){var I=C[p];if(!(2>I.length)){var K=I[1];if(Array.isArray(K)&&!(1>K.length)){var ee=K[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var de=1;de<K.length;de++)K[de]=""}}}}return G(C)}catch{return T}}var bt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xi;function wo(){}D(wo,ve),wo.prototype.g=function(){return new XMLHttpRequest},wo.prototype.i=function(){return{}},xi=new wo;function wi(p,T,C,I){this.j=p,this.i=T,this.l=C,this.R=I||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wl}function Wl(){this.i=null,this.g="",this.h=!1}var ba={},Ki={};function ws(p,T,C){p.L=1,p.v=Ns(Ct(T)),p.m=C,p.P=!0,Yi(p,null)}function Yi(p,T){p.F=Date.now(),hi(p),p.A=Ct(p.v);var C=p.A,I=p.R;Array.isArray(I)||(I=[String(I)]),Qi(C.i,"t",I),p.C=0,C=p.j.J,p.h=new Wl,p.g=pu(p.j,C?T:null,!p.m),0<p.O&&(p.M=new _a(S(p.Y,p,p.g),p.O)),T=p.U,C=p.g,I=p.ca;var K="readystatechange";Array.isArray(K)||(K&&(bi[0]=K.toString()),K=bi);for(var ee=0;ee<K.length;ee++){var de=On(C,K[ee],I||T.handleEvent,!1,T.h||T);if(!de)break;T.g[de.key]=de}T=p.H?R(p.H):{},p.m?(p.u||(p.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,T)):(p.u="GET",p.g.ea(p.A,p.u,null,T)),Hi(),Sa(p.i,p.u,p.A,p.l,p.R,p.m)}wi.prototype.ca=function(p){p=p.target;const T=this.M;T&&Sn(p)==3?T.j():this.Y(p)},wi.prototype.Y=function(p){try{if(p==this.g)e:{const jt=Sn(this.g);var T=this.g.Ba();const Go=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||Ps(this.g)))){this.J||jt!=4||T==7||(T==8||0>=Go?Hi(3):Hi(2)),dr(this);var C=this.g.Z();this.X=C;t:if(Ji(this)){var I=Ps(this.g);p="";var K=I.length,ee=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tn(this),Ro(this);var de="";break t}this.h.i=new d.TextDecoder}for(T=0;T<K;T++)this.h.h=!0,p+=this.h.i.decode(I[T],{stream:!(ee&&T==K-1)});I.length=0,this.h.g+=p,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=C==200,Aa(this.i,this.u,this.A,this.l,this.R,jt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Ot=this.g;if((at=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(at)){var Fe=at;break t}}Fe=null}if(C=Fe)zi(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ri(this,C);else{this.o=!1,this.s=3,tn(12),Tn(this),Ro(this);break e}}if(this.P){C=!0;let Nn;for(;!this.J&&this.C<de.length;)if(Nn=Rs(this,de),Nn==Ki){jt==4&&(this.s=4,tn(14),C=!1),zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==ba){this.s=4,tn(15),zi(this.i,this.l,de,"[Invalid Chunk]"),C=!1;break}else zi(this.i,this.l,Nn,null),Ri(this,Nn);if(Ji(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||de.length!=0||this.h.h||(this.s=1,tn(16),C=!1),this.o=this.o&&C,!C)zi(this.i,this.l,de,"[Invalid Chunked Response]"),Tn(this),Ro(this);else if(0<de.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Va(Xt),Xt.M=!0,tn(11))}}else zi(this.i,this.l,de,null),Ri(this,de);jt==4&&Tn(this),this.o&&!this.J&&(jt==4?fu(this.j,this):(this.o=!1,hi(this)))}else su(this.g),C==400&&0<de.indexOf("Unknown SID")?(this.s=3,tn(12)):(this.s=0,tn(13)),Tn(this),Ro(this)}}}catch{}finally{}};function Ji(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Rs(p,T){var C=p.C,I=T.indexOf(`
`,C);return I==-1?Ki:(C=Number(T.substring(C,I)),isNaN(C)?ba:(I+=1,I+C>T.length?Ki:(T=T.slice(I,I+C),p.C=I+C,T)))}wi.prototype.cancel=function(){this.J=!0,Tn(this)};function hi(p){p.S=Date.now()+p.I,Mt(p,p.I)}function Mt(p,T){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Co(S(p.ba,p),T)}function dr(p){p.B&&(d.clearTimeout(p.B),p.B=null)}wi.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(jl(this.i,this.A),this.L!=2&&(Hi(),tn(17)),Tn(this),this.s=2,Ro(this)):Mt(this,this.S-p)};function Ro(p){p.j.G==0||p.J||fu(p.j,p)}function Tn(p){dr(p);var T=p.M;T&&typeof T.ma=="function"&&T.ma(),p.M=null,zt(p.U),p.g&&(T=p.g,p.g=null,T.abort(),T.ma())}function Ri(p,T){try{var C=p.j;if(C.G!=0&&(C.g==p||Io(C.h,p))){if(!p.K&&Io(C.h,p)&&C.G==3){try{var I=C.Da.g.parse(T)}catch{I=null}if(Array.isArray(I)&&I.length==3){var K=I;if(K[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<p.F)Oo(C),Lo(C);else break e;Ua(C),tn(18)}}else C.za=K[1],0<C.za-C.T&&37500>K[2]&&C.F&&C.v==0&&!C.C&&(C.C=Co(S(C.Za,C),6e3));if(1>=Zl(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else ji(C,11)}else if((p.K||C.g==p)&&Oo(C),!j(T))for(K=C.Da.g.parse(T),T=0;T<K.length;T++){let Fe=K[T];if(C.T=Fe[0],Fe=Fe[1],C.G==2)if(Fe[0]=="c"){C.K=Fe[1],C.ia=Fe[2];const Xt=Fe[3];Xt!=null&&(C.la=Xt,C.j.info("VER="+C.la));const jt=Fe[4];jt!=null&&(C.Aa=jt,C.j.info("SVER="+C.Aa));const Go=Fe[5];Go!=null&&typeof Go=="number"&&0<Go&&(I=1.5*Go,C.L=I,C.j.info("backChannelRequestTimeoutMs_="+I)),I=C;const Nn=p.g;if(Nn){const ks=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ks){var ee=I.h;ee.g||ks.indexOf("spdy")==-1&&ks.indexOf("quic")==-1&&ks.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(No(ee,ee.h),ee.h=null))}if(I.D){const Wi=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Wi&&(I.ya=Wi,Ze(I.I,I.D,Wi))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-p.F,C.j.info("Handshake RTT: "+C.R+"ms")),I=C;var de=p;if(I.qa=hu(I,I.J?I.ia:null,I.W),de.K){Zn(I.h,de);var at=de,Ot=I.L;Ot&&(at.I=Ot),at.B&&(dr(at),hi(at)),I.g=de}else uu(I);0<C.i.length&&Tr(C)}else Fe[0]!="stop"&&Fe[0]!="close"||ji(C,7);else C.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ji(C,7):Da(C):Fe[0]!="noop"&&C.l&&C.l.ta(Fe),C.v=0)}}Hi(4)}catch{}}var wf=class{constructor(p,T){this.g=p,this.map=T}};function Ca(p){this.l=p||10,d.PerformanceNavigationTiming?(p=d.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xa(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Zl(p){return p.h?1:p.g?p.g.size:0}function Io(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function No(p,T){p.g?p.g.add(T):p.h=T}function Zn(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}Ca.prototype.cancel=function(){if(this.i=En(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function En(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const C of p.g.values())T=T.concat(C.D);return T}return V(p.i)}function eu(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(g(p)){for(var T=[],C=p.length,I=0;I<C;I++)T.push(p[I]);return T}T=[],C=0;for(I in p)T[C++]=p[I];return T}function Rf(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(g(p)||typeof p=="string"){var T=[];p=p.length;for(var C=0;C<p;C++)T.push(C);return T}T=[],C=0;for(const I in p)T[C++]=I;return T}}}function hr(p,T){if(p.forEach&&typeof p.forEach=="function")p.forEach(T,void 0);else if(g(p)||typeof p=="string")Array.prototype.forEach.call(p,T,void 0);else for(var C=Rf(p),I=eu(p),K=I.length,ee=0;ee<K;ee++)T.call(void 0,I[ee],C&&C[ee],p)}var wa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pr(p,T){if(p){p=p.split("&");for(var C=0;C<p.length;C++){var I=p[C].indexOf("="),K=null;if(0<=I){var ee=p[C].substring(0,I);K=p[C].substring(I+1)}else ee=p[C];T(ee,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function $i(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof $i){this.h=p.h,Mo(this,p.j),this.o=p.o,this.g=p.g,Is(this,p.s),this.l=p.l;var T=p.i,C=new Ii;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),mr(this,C),this.m=p.m}else p&&(T=String(p).match(wa))?(this.h=!1,Mo(this,T[1]||"",!0),this.o=Do(T[2]||""),this.g=Do(T[3]||"",!0),Is(this,T[4]),this.l=Do(T[5]||"",!0),mr(this,T[6]||"",!0),this.m=Do(T[7]||"")):(this.h=!1,this.i=new Ii(null,this.h))}$i.prototype.toString=function(){var p=[],T=this.j;T&&p.push(ei(T,Ra,!0),":");var C=this.g;return(C||T=="file")&&(p.push("//"),(T=this.o)&&p.push(ei(T,Ra,!0),"@"),p.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&p.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(ei(C,C.charAt(0)=="/"?Ia:tu,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",ei(C,Mf)),p.join("")};function Ct(p){return new $i(p)}function Mo(p,T,C){p.j=C?Do(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function Is(p,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);p.s=T}else p.s=null}function mr(p,T,C){T instanceof Ii?(p.i=T,nu(p.i,p.h)):(C||(T=ei(T,Nf)),p.i=new Ii(T,p.h))}function Ze(p,T,C){p.i.set(T,C)}function Ns(p){return Ze(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Do(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ei(p,T,C){return typeof p=="string"?(p=encodeURI(p).replace(T,If),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function If(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ra=/[#\/\?@]/g,tu=/[#\?:]/g,Ia=/[#\?]/g,Nf=/[#\?@]/g,Mf=/#/g;function Ii(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function Qt(p){p.g||(p.g=new Map,p.h=0,p.i&&pr(p.i,function(T,C){p.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}t=Ii.prototype,t.add=function(p,T){Qt(this),this.i=null,p=Bn(this,p);var C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(T),this.h+=1,this};function gr(p,T){Qt(p),T=Bn(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function yr(p,T){return Qt(p),T=Bn(p,T),p.g.has(T)}t.forEach=function(p,T){Qt(this),this.g.forEach(function(C,I){C.forEach(function(K){p.call(T,K,I,this)},this)},this)},t.na=function(){Qt(this);const p=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let I=0;I<T.length;I++){const K=p[I];for(let ee=0;ee<K.length;ee++)C.push(T[I])}return C},t.V=function(p){Qt(this);let T=[];if(typeof p=="string")yr(this,p)&&(T=T.concat(this.g.get(Bn(this,p))));else{p=Array.from(this.g.values());for(let C=0;C<p.length;C++)T=T.concat(p[C])}return T},t.set=function(p,T){return Qt(this),this.i=null,p=Bn(this,p),yr(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},t.get=function(p,T){return p?(p=this.V(p),0<p.length?String(p[0]):T):T};function Qi(p,T,C){gr(p,T),0<C.length&&(p.i=null,p.g.set(Bn(p,T),V(C)),p.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var I=T[C];const ee=encodeURIComponent(String(I)),de=this.V(I);for(I=0;I<de.length;I++){var K=ee;de[I]!==""&&(K+="="+encodeURIComponent(String(de[I]))),p.push(K)}}return this.i=p.join("&")};function Bn(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function nu(p,T){T&&!p.j&&(Qt(p),p.i=null,p.g.forEach(function(C,I){var K=I.toLowerCase();I!=K&&(gr(this,I),Qi(this,K,C))},p)),p.j=T}function Na(p,T){const C=new xo;if(d.Image){const I=new Image;I.onload=x(In,C,"TestLoadImage: loaded",!0,T,I),I.onerror=x(In,C,"TestLoadImage: error",!1,T,I),I.onabort=x(In,C,"TestLoadImage: abort",!1,T,I),I.ontimeout=x(In,C,"TestLoadImage: timeout",!1,T,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=p}else T(!1)}function iu(p,T){const C=new xo,I=new AbortController,K=setTimeout(()=>{I.abort(),In(C,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:I.signal}).then(ee=>{clearTimeout(K),ee.ok?In(C,"TestPingServer: ok",!0,T):In(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(K),In(C,"TestPingServer: error",!1,T)})}function In(p,T,C,I,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),I(C)}catch{}}function pi(){this.g=new he}function Ma(p,T,C){const I=C||"";try{hr(p,function(K,ee){let de=K;m(K)&&(de=G(K)),T.push(I+ee+"="+encodeURIComponent(de))})}catch(K){throw T.push(I+"type="+encodeURIComponent("_badmap")),K}}function Ni(p){this.l=p.Ub||null,this.j=p.eb||!1}D(Ni,ve),Ni.prototype.g=function(){return new Gn(this.l,this.j)},Ni.prototype.i=(function(p){return function(){return p}})({});function Gn(p,T){Nt.call(this),this.D=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Gn,Nt),t=Gn.prototype,t.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=T,this.readyState=1,Po(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(T.body=p),(this.D||d).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mi(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Po(this)),this.g&&(this.readyState=3,Po(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vr(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function vr(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?Mi(this):Po(this),this.readyState==3&&vr(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Mi(this))},t.Qa=function(p){this.g&&(this.response=p,Mi(this))},t.ga=function(){this.g&&Mi(this)};function Mi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Po(p)}t.setRequestHeader=function(p,T){this.u.append(p,T)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=T.next();return p.join(`\r
`)};function Po(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Gn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Ms(p){let T="";return re(p,function(C,I){T+=I,T+=":",T+=C,T+=`\r
`}),T}function Uo(p,T,C){e:{for(I in C){var I=!1;break e}I=!0}I||(C=Ms(C),typeof p=="string"?C!=null&&encodeURIComponent(String(C)):Ze(p,T,C))}function vt(p){Nt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(vt,Nt);var dn=/^https?$/i,Xi=["POST","PUT"];t=vt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,T,C,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xi.g(),this.v=this.o?Ee(this.o):Ee(xi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(ee){Ds(this,ee);return}if(p=C||"",C=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var K in I)C.set(K,I[K]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ee of I.keys())C.set(ee,I.get(ee));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(C.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=d.FormData&&p instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Xi,T,void 0))||I||K||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,de]of C)this.g.setRequestHeader(ee,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_r(this),this.u=!0,this.g.send(p),this.u=!1}catch(ee){Ds(this,ee)}};function Ds(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.m=5,Vo(p),ko(p)}function Vo(p){p.A||(p.A=!0,Lt(p,"complete"),Lt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Lt(this,"complete"),Lt(this,"abort"),ko(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ko(this,!0)),vt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ou(this):this.bb())},t.bb=function(){ou(this)};function ou(p){if(p.h&&typeof u<"u"&&(!p.v[1]||Sn(p)!=4||p.Z()!=2)){if(p.u&&Sn(p)==4)fr(p.Ea,0,p);else if(Lt(p,"readystatechange"),Sn(p)==4){p.h=!1;try{const de=p.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var I;if(I=de===0){var K=String(p.D).match(wa)[1]||null;!K&&d.self&&d.self.location&&(K=d.self.location.protocol.slice(0,-1)),I=!dn.test(K?K.toLowerCase():"")}C=I}if(C)Lt(p,"complete"),Lt(p,"success");else{p.m=6;try{var ee=2<Sn(p)?p.g.statusText:""}catch{ee=""}p.l=ee+" ["+p.Z()+"]",Vo(p)}}finally{ko(p)}}}}function ko(p,T){if(p.g){_r(p);const C=p.g,I=p.v[0]?()=>{}:null;p.g=null,p.v=null,T||Lt(p,"ready");try{C.onreadystatechange=I}catch{}}}function _r(p){p.I&&(d.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function Sn(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),ce(T)}};function Ps(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function su(p){const T={};p=(p.g&&2<=Sn(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<p.length;I++){if(j(p[I]))continue;var C=L(p[I]);const K=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ee=T[K]||[];T[K]=ee,ee.push(C)}M(T,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Us(p,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||T}function ru(p){this.Aa=0,this.i=[],this.j=new xo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Us("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Us("baseRetryDelayMs",5e3,p),this.cb=Us("retryDelaySeedMs",1e4,p),this.Wa=Us("forwardChannelMaxRetries",2,p),this.wa=Us("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Ca(p&&p.concurrentRequestLimit),this.Da=new pi,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ru.prototype,t.la=8,t.G=1,t.connect=function(p,T,C,I){tn(0),this.W=p,this.H=T||{},C&&I!==void 0&&(this.H.OSID=C,this.H.OAID=I),this.F=this.X,this.I=hu(this,null,this.W),Tr(this)};function Da(p){if(au(p),p.G==3){var T=p.U++,C=Ct(p.I);if(Ze(C,"SID",p.K),Ze(C,"RID",T),Ze(C,"TYPE","terminate"),Vs(p,C),T=new wi(p,p.j,T),T.L=2,T.v=Ns(Ct(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=T.v,C=!0),C||(T.g=pu(T.j,null),T.g.ea(T.v)),T.F=Date.now(),hi(T)}ka(p)}function Lo(p){p.g&&(Va(p),p.g.cancel(),p.g=null)}function au(p){Lo(p),p.u&&(d.clearTimeout(p.u),p.u=null),Oo(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&d.clearTimeout(p.s),p.s=null)}function Tr(p){if(!xa(p.h)&&!p.s){p.s=!0;var T=p.Ga;fe||Re(),ye||(fe(),ye=!0),we.add(T,p),p.B=0}}function Df(p,T){return Zl(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=T.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Co(S(p.Ga,p,T),du(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const K=new wi(this,this.j,p);let ee=this.o;if(this.S&&(ee?(ee=R(ee),k(ee,this.S)):ee=this.S),this.m!==null||this.O||(K.H=ee,ee=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var I=this.i[C];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(T+=I,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=Pa(this,K,T),C=Ct(this.I),Ze(C,"RID",p),Ze(C,"CVER",22),this.D&&Ze(C,"X-HTTP-Session-Id",this.D),Vs(this,C),ee&&(this.O?T="headers="+encodeURIComponent(String(Ms(ee)))+"&"+T:this.m&&Uo(C,this.m,ee)),No(this.h,K),this.Ua&&Ze(C,"TYPE","init"),this.P?(Ze(C,"$req",T),Ze(C,"SID","null"),K.T=!0,ws(K,C,null)):ws(K,C,T),this.G=2}}else this.G==3&&(p?lu(this,p):this.i.length==0||xa(this.h)||lu(this))};function lu(p,T){var C;T?C=T.l:C=p.U++;const I=Ct(p.I);Ze(I,"SID",p.K),Ze(I,"RID",C),Ze(I,"AID",p.T),Vs(p,I),p.m&&p.o&&Uo(I,p.m,p.o),C=new wi(p,p.j,C,p.B+1),p.m===null&&(C.H=p.o),T&&(p.i=T.D.concat(p.i)),T=Pa(p,C,1e3),C.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),No(p.h,C),ws(C,I,T)}function Vs(p,T){p.H&&re(p.H,function(C,I){Ze(T,I,C)}),p.l&&hr({},function(C,I){Ze(T,I,C)})}function Pa(p,T,C){C=Math.min(p.i.length,C);var I=p.l?S(p.l.Na,p.l,p):null;e:{var K=p.i;let ee=-1;for(;;){const de=["count="+C];ee==-1?0<C?(ee=K[0].g,de.push("ofs="+ee)):ee=0:de.push("ofs="+ee);let at=!0;for(let Ot=0;Ot<C;Ot++){let Fe=K[Ot].g;const Xt=K[Ot].map;if(Fe-=ee,0>Fe)ee=Math.max(0,K[Ot].g-100),at=!1;else try{Ma(Xt,de,"req"+Fe+"_")}catch{I&&I(Xt)}}if(at){I=de.join("&");break e}}}return p=p.i.splice(0,C),T.D=p,I}function uu(p){if(!p.g&&!p.u){p.Y=1;var T=p.Fa;fe||Re(),ye||(fe(),ye=!0),we.add(T,p),p.v=0}}function Ua(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Co(S(p.Fa,p),du(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,cu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Co(S(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tn(10),Lo(this),cu(this))};function Va(p){p.A!=null&&(d.clearTimeout(p.A),p.A=null)}function cu(p){p.g=new wi(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var T=Ct(p.qa);Ze(T,"RID","rpc"),Ze(T,"SID",p.K),Ze(T,"AID",p.T),Ze(T,"CI",p.F?"0":"1"),!p.F&&p.ja&&Ze(T,"TO",p.ja),Ze(T,"TYPE","xmlhttp"),Vs(p,T),p.m&&p.o&&Uo(T,p.m,p.o),p.L&&(p.g.I=p.L);var C=p.g;p=p.ia,C.L=1,C.v=Ns(Ct(T)),C.m=null,C.P=!0,Yi(C,p)}t.Za=function(){this.C!=null&&(this.C=null,Lo(this),Ua(this),tn(19))};function Oo(p){p.C!=null&&(d.clearTimeout(p.C),p.C=null)}function fu(p,T){var C=null;if(p.g==T){Oo(p),Va(p),p.g=null;var I=2}else if(Io(p.h,T))C=T.D,Zn(p.h,T),I=1;else return;if(p.G!=0){if(T.o)if(I==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var K=p.B;I=_n(),Lt(I,new Ea(I,C)),Tr(p)}else uu(p);else if(K=T.s,K==3||K==0&&0<T.X||!(I==1&&Df(p,T)||I==2&&Ua(p)))switch(C&&0<C.length&&(T=p.h,T.i=T.i.concat(C)),K){case 1:ji(p,5);break;case 4:ji(p,10);break;case 3:ji(p,6);break;default:ji(p,2)}}}function du(p,T){let C=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(C*=2),C*T}function ji(p,T){if(p.j.info("Error code "+T),T==2){var C=S(p.fb,p),I=p.Xa;const K=!I;I=new $i(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Mo(I,"https"),Ns(I),K?Na(I.toString(),C):iu(I.toString(),C)}else tn(2);p.G=0,p.l&&p.l.sa(T),ka(p),au(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function ka(p){if(p.G=0,p.ka=[],p.l){const T=En(p.h);(T.length!=0||p.i.length!=0)&&(P(p.ka,T),P(p.ka,p.i),p.h.i.length=0,V(p.i),p.i.length=0),p.l.ra()}}function hu(p,T,C){var I=C instanceof $i?Ct(C):new $i(C);if(I.g!="")T&&(I.g=T+"."+I.g),Is(I,I.s);else{var K=d.location;I=K.protocol,T=T?T+"."+K.hostname:K.hostname,K=+K.port;var ee=new $i(null);I&&Mo(ee,I),T&&(ee.g=T),K&&Is(ee,K),C&&(ee.l=C),I=ee}return C=p.D,T=p.ya,C&&T&&Ze(I,C,T),Ze(I,"VER",p.la),Vs(p,I),I}function pu(p,T,C){if(T&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Ca&&!p.pa?new vt(new Ni({eb:C})):new vt(p.pa),T.Ha(p.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mu(){}t=mu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Er(){}Er.prototype.g=function(p,T){return new An(p,T)};function An(p,T){Nt.call(this),this.g=new ru(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(p?p["X-WebChannel-Client-Profile"]=T.va:p={"X-WebChannel-Client-Profile":T.va}),this.g.S=p,(p=T&&T.Sb)&&!j(p)&&(this.g.m=p),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!j(T)&&(this.g.D=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new Bo(this)}D(An,Nt),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Da(this.g)},An.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.u&&(C={},C.__data__=G(p),p=C);T.i.push(new wf(T.Ya++,p)),T.G==3&&Tr(T)},An.prototype.N=function(){this.g.l=null,delete this.j,Da(this.g),delete this.g,An.aa.N.call(this)};function gu(p){ft.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const C in T){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}D(gu,ft);function yu(){dt.call(this),this.status=1}D(yu,dt);function Bo(p){this.g=p}D(Bo,mu),Bo.prototype.ua=function(){Lt(this.g,"a")},Bo.prototype.ta=function(p){Lt(this.g,new gu(p))},Bo.prototype.sa=function(p){Lt(this.g,new yu)},Bo.prototype.ra=function(){Lt(this.g,"b")},Er.prototype.createWebChannel=Er.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,ZE=function(){return new Er},WE=function(){return _n()},jE=rt,_p={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bt.NO_ERROR=0,bt.TIMEOUT=8,bt.HTTP_ERROR=6,Vc=bt,nn.COMPLETE="complete",XE=nn,Me.EventType=Ce,Ce.OPEN="a",Ce.CLOSE="b",Ce.ERROR="c",Ce.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,Cl=Me,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,QE=vt}).apply(typeof xc<"u"?xc:typeof self<"u"?self:typeof window<"u"?window:{});const Q0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new BE("@firebase/firestore");function Sl(){return ir.logLevel}function Te(t,...e){if(ir.logLevel<=We.DEBUG){const n=e.map($p);ir.debug(`Firestore (${ga}): ${t}`,...n)}}function yo(t,...e){if(ir.logLevel<=We.ERROR){const n=e.map($p);ir.error(`Firestore (${ga}): ${t}`,...n)}}function ra(t,...e){if(ir.logLevel<=We.WARN){const n=e.map($p);ir.warn(`Firestore (${ga}): ${t}`,...n)}}function $p(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t="Unexpected state"){const e=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: `+t;throw yo(e),new Error(e)}function ct(t,e){t||Pe()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(gn.UNAUTHENTICATED)))}shutdown(){}}class l2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class u2{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0);let o=this.i;const r=g=>this.i!==o?(o=this.i,n(g)):Promise.resolve();let l=new ms;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ms,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},d=g=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ms)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ct(typeof o.accessToken=="string"),new eS(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string"),new gn(e)}}class c2{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class f2{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new c2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class d2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ct(this.o===void 0);const o=l=>{l.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,Te("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const r=l=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?r(l):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ct(typeof n.token=="string"),this.R=n.token,new d2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<t;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const r=p2(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<n&&(o+=e.charAt(r[l]%e.length))}return o}}function nt(t,e){return t<e?-1:t>e?1:0}function aa(t,e,n){return t.length===e.length&&t.every(((o,r)=>n(o,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new $t(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new $t(0,0))}static max(){return new ke(new $t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,o){n===void 0?n=0:n>e.length&&Pe(),o===void 0?o=e.length-n:o>e.length-n&&Pe(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Ol.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ol?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let r=0;r<o;r++){const l=e.get(r),u=n.get(r);if(l<u)return-1;if(l>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class St extends Ol{construct(e,n,o){return new St(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new be(le.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((r=>r.length>0)))}return new St(n)}static emptyPath(){return new St([])}}const m2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Ol{construct(e,n,o){return new un(e,n,o)}static isValidIdentifier(e){return m2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new un(["__name__"])}static fromServerFormat(e){const n=[];let o="",r=0;const l=()=>{if(o.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new be(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new be(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=g,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(o+=d,r++):(l(),r++)}if(l(),u)throw new be(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(n)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(St.fromString(e))}static fromName(e){return new Ie(St.fromString(e).popFirst(5))}static empty(){return new Ie(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return St.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new St(e.slice()))}}function g2(t,e){const n=t.toTimestamp().seconds,o=t.toTimestamp().nanoseconds+1,r=ke.fromTimestamp(o===1e9?new $t(n+1,0):new $t(n,o));return new ys(r,Ie.empty(),e)}function y2(t){return new ys(t.readTime,t.key,-1)}class ys{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new ys(ke.min(),Ie.empty(),-1)}static max(){return new ys(ke.max(),Ie.empty(),-1)}}function v2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==_2)throw t;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(n,l).next(o,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,o)=>{n(e)}))}static reject(e){return new ue(((n,o)=>{o(e)}))}static waitFor(e){return new ue(((n,o)=>{let r=0,l=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++l,u&&l===r&&n()}),(g=>o(g)))})),u=!0,l===r&&n()}))}static or(e){let n=ue.resolve(!1);for(const o of e)n=n.next((r=>r?ue.resolve(r):o()));return n}static forEach(e,n){const o=[];return e.forEach(((r,l)=>{o.push(n.call(this,r,l))})),this.waitFor(o)}static mapArray(e,n){return new ue(((o,r)=>{const l=e.length,u=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;n(e[m]).next((_=>{u[m]=_,++d,d===l&&o(u)}),(_=>r(_)))}}))}static doWhile(e,n){return new ue(((o,r)=>{const l=()=>{e()===!0?n().next((()=>{l()}),r):o()};l()}))}}function E2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ie(o),this.se=o=>n.writeSequenceNumber(o))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qp.oe=-1;function df(t){return t==null}function $c(t){return t===0&&1/t==-1/0}function S2(t){return typeof t=="number"&&Number.isInteger(t)&&!$c(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ur(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(e,o.key);if(r===0)return n+o.left.size;r<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}}class wc{constructor(e,n,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?o(e.key,n):1,n&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,o,r,l){this.key=e,this.value=n,this.color=o??ln.RED,this.left=r??ln.EMPTY,this.right=l??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,r,l){return new ln(e??this.key,n??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let r=this;const l=o(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,n,o),null):l===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ln.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,n,o,r,l){return this}insert(e,n,o){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j0(this.data.getIterator())}getIteratorFrom(e){return new j0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new cn(this.comparator);return n.data=e,n}}class j0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new Qn([])}unionWith(e){let n=new cn(un.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new iS("Invalid base64 string: "+l):l}})(e);return new fn(n)}static fromUint8Array(e){const n=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const A2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(t){if(ct(!!t),typeof t=="string"){let e=0;const n=A2.exec(t);if(ct(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const o=new Date(t);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function or(t){return typeof t=="string"?fn.fromBase64String(t):fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jp(t){const e=t.mapValue.fields.__previous_value__;return Xp(e)?jp(e):e}function Bl(t){const e=vs(t.mapValue.fields.__local_write_time__.timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n,o,r,l,u,d,g,m){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m}}class Gl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc={mapValue:{}};function sr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xp(t)?4:x2(t)?9007199254740991:C2(t)?10:11:Pe()}function Bi(t,e){if(t===e)return!0;const n=sr(t);if(n!==sr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bl(t).isEqual(Bl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=vs(r.timestampValue),d=vs(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,l){return or(r.bytesValue).isEqual(or(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,l){return Ut(r.geoPointValue.latitude)===Ut(l.geoPointValue.latitude)&&Ut(r.geoPointValue.longitude)===Ut(l.geoPointValue.longitude)})(t,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return Ut(r.integerValue)===Ut(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=Ut(r.doubleValue),d=Ut(l.doubleValue);return u===d?$c(u)===$c(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return aa(t.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},d=l.mapValue.fields||{};if(X0(u)!==X0(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Bi(u[g],d[g])))return!1;return!0})(t,e);default:return Pe()}}function ql(t,e){return(t.values||[]).find((n=>Bi(n,e)))!==void 0}function la(t,e){if(t===e)return 0;const n=sr(t),o=sr(e);if(n!==o)return nt(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return nt(t.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=Ut(l.integerValue||l.doubleValue),g=Ut(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(t,e);case 3:return W0(t.timestampValue,e.timestampValue);case 4:return W0(Bl(t),Bl(e));case 5:return nt(t.stringValue,e.stringValue);case 6:return(function(l,u){const d=or(l),g=or(u);return d.compareTo(g)})(t.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),g=u.split("/");for(let m=0;m<d.length&&m<g.length;m++){const _=nt(d[m],g[m]);if(_!==0)return _}return nt(d.length,g.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=nt(Ut(l.latitude),Ut(u.latitude));return d!==0?d:nt(Ut(l.longitude),Ut(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Z0(t.arrayValue,e.arrayValue);case 10:return(function(l,u){var d,g,m,_;const E=l.fields||{},S=u.fields||{},x=(d=E.value)===null||d===void 0?void 0:d.arrayValue,D=(g=S.value)===null||g===void 0?void 0:g.arrayValue,V=nt(((m=x==null?void 0:x.values)===null||m===void 0?void 0:m.length)||0,((_=D==null?void 0:D.values)===null||_===void 0?void 0:_.length)||0);return V!==0?V:Z0(x,D)})(t.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Rc.mapValue&&u===Rc.mapValue)return 0;if(l===Rc.mapValue)return 1;if(u===Rc.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=u.fields||{},_=Object.keys(m);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const S=nt(g[E],_[E]);if(S!==0)return S;const x=la(d[g[E]],m[_[E]]);if(x!==0)return x}return nt(g.length,_.length)})(t.mapValue,e.mapValue);default:throw Pe()}}function W0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nt(t,e);const n=vs(t),o=vs(e),r=nt(n.seconds,o.seconds);return r!==0?r:nt(n.nanos,o.nanos)}function Z0(t,e){const n=t.values||[],o=e.values||[];for(let r=0;r<n.length&&r<o.length;++r){const l=la(n[r],o[r]);if(l)return l}return nt(n.length,o.length)}function ua(t){return Tp(t)}function Tp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const o=vs(n);return`time(${o.seconds},${o.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return or(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ie.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let o="[",r=!0;for(const l of n.values||[])r?r=!1:o+=",",o+=Tp(l);return o+"]"})(t.arrayValue):"mapValue"in t?(function(n){const o=Object.keys(n.fields||{}).sort();let r="{",l=!0;for(const u of o)l?l=!1:r+=",",r+=`${u}:${Tp(n.fields[u])}`;return r+"}"})(t.mapValue):Pe()}function Ep(t){return!!t&&"integerValue"in t}function Wp(t){return!!t&&"arrayValue"in t}function eT(t){return!!t&&"nullValue"in t}function tT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kc(t){return!!t&&"mapValue"in t}function C2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Rl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ur(t.mapValue.fields,((n,o)=>e.mapValue.fields[n]=Rl(o))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Rl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function x2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!kc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rl(n)}setAll(e){let n=un.emptyPath(),o={},r=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,o,r),o={},r=[],n=d.popLast()}u?o[d.lastSegment()]=Rl(u):r.push(d.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,o,r)}delete(e){const n=this.field(e.popLast());kc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let r=n.mapValue.fields[e.get(o)];kc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,o){ur(n,((r,l)=>e[r]=l));for(const r of o)delete e[r]}clone(){return new kn(Rl(this.value))}}function oS(t){const e=[];return ur(t.fields,((n,o)=>{const r=new un([n]);if(kc(o)){const l=oS(o.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n,o,r,l,u,d){this.key=e,this.documentType=n,this.version=o,this.readTime=r,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new yn(e,0,ke.min(),ke.min(),ke.min(),kn.empty(),0)}static newFoundDocument(e,n,o,r){return new yn(e,1,n,ke.min(),o,r,0)}static newNoDocument(e,n){return new yn(e,2,n,ke.min(),ke.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new yn(e,3,n,ke.min(),ke.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n){this.position=e,this.inclusive=n}}function nT(t,e,n){let o=0;for(let r=0;r<t.position.length;r++){const l=e[r],u=t.position[r];if(l.field.isKeyField()?o=Ie.comparator(Ie.fromName(u.referenceValue),n.key):o=la(u,n.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function iT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function w2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{}class Jt extends sS{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new I2(e,n,o):n==="array-contains"?new D2(e,o):n==="in"?new P2(e,o):n==="not-in"?new U2(e,o):n==="array-contains-any"?new V2(e,o):new Jt(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new N2(e,o):new M2(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(la(n,this.value)):n!==null&&sr(this.value)===sr(n)&&this.matchesComparison(la(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gi extends sS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Gi(e,n)}matches(e){return rS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function rS(t){return t.op==="and"}function aS(t){return R2(t)&&rS(t)}function R2(t){for(const e of t.filters)if(e instanceof Gi)return!1;return!0}function Sp(t){if(t instanceof Jt)return t.field.canonicalString()+t.op.toString()+ua(t.value);if(aS(t))return t.filters.map((e=>Sp(e))).join(",");{const e=t.filters.map((n=>Sp(n))).join(",");return`${t.op}(${e})`}}function lS(t,e){return t instanceof Jt?(function(o,r){return r instanceof Jt&&o.op===r.op&&o.field.isEqual(r.field)&&Bi(o.value,r.value)})(t,e):t instanceof Gi?(function(o,r){return r instanceof Gi&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,u,d)=>l&&lS(u,r.filters[d])),!0):!1})(t,e):void Pe()}function uS(t){return t instanceof Jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${ua(n.value)}`})(t):t instanceof Gi?(function(n){return n.op.toString()+" {"+n.getFilters().map(uS).join(" ,")+"}"})(t):"Filter"}class I2 extends Jt{constructor(e,n,o){super(e,n,o),this.key=Ie.fromName(o.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class N2 extends Jt{constructor(e,n){super(e,"in",n),this.keys=cS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class M2 extends Jt{constructor(e,n){super(e,"not-in",n),this.keys=cS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function cS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((o=>Ie.fromName(o.referenceValue)))}class D2 extends Jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wp(n)&&ql(n.arrayValue,this.value)}}class P2 extends Jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ql(this.value.arrayValue,n)}}class U2 extends Jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ql(this.value.arrayValue,n)}}class V2 extends Jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>ql(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n=null,o=[],r=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=u,this.endAt=d,this.ue=null}}function oT(t,e=null,n=[],o=[],r=null,l=null,u=null){return new k2(t,e,n,o,r,l,u)}function Zp(t){const e=Le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>Sp(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>ua(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>ua(o))).join(",")),e.ue=n}return e.ue}function em(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!w2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iT(t.startAt,e.startAt)&&iT(t.endAt,e.endAt)}function Ap(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n=null,o=[],r=[],l=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function L2(t,e,n,o,r,l,u,d){return new hf(t,e,n,o,r,l,u,d)}function fS(t){return new hf(t)}function sT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function O2(t){return t.collectionGroup!==null}function Il(t){const e=Le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),n.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new cn(un.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Xc(l,o))})),n.has(un.keyField().canonicalString())||e.ce.push(new Xc(un.keyField(),o))}return e.ce}function Li(t){const e=Le(t);return e.le||(e.le=B2(e,Il(t))),e.le}function B2(t,e){if(t.limitType==="F")return oT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Xc(r.field,l)}));const n=t.endAt?new Qc(t.endAt.position,t.endAt.inclusive):null,o=t.startAt?new Qc(t.startAt.position,t.startAt.inclusive):null;return oT(t.path,t.collectionGroup,e,t.filters,t.limit,n,o)}}function bp(t,e,n){return new hf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pf(t,e){return em(Li(t),Li(e))&&t.limitType===e.limitType}function dS(t){return`${Zp(Li(t))}|lt:${t.limitType}`}function jr(t){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((r=>uS(r))).join(", ")}]`),df(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((r=>ua(r))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((r=>ua(r))).join(",")),`Target(${o})`})(Li(t))}; limitType=${t.limitType})`}function mf(t,e){return e.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):Ie.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(t,e)&&(function(o,r){for(const l of Il(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(t,e)&&(function(o,r){return!(o.startAt&&!(function(u,d,g){const m=nT(u,d,g);return u.inclusive?m<=0:m<0})(o.startAt,Il(o),r)||o.endAt&&!(function(u,d,g){const m=nT(u,d,g);return u.inclusive?m>=0:m>0})(o.endAt,Il(o),r))})(t,e)}function G2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hS(t){return(e,n)=>{let o=!1;for(const r of Il(t)){const l=q2(r,e,n);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function q2(t,e,n){const o=t.field.isKeyField()?Ie.comparator(e.key,n.key):(function(l,u,d){const g=u.data.field(l),m=d.data.field(l);return g!==null&&m!==null?la(g,m):Pe()})(t.field,e,n);switch(t.dir){case"asc":return o;case"desc":return-1*o;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),r=this.inner[o];if(r===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],e))return o.length===1?delete this.inner[n]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ur(this.inner,((n,o)=>{for(const[r,l]of o)e(r,l)}))}isEmpty(){return nS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new At(Ie.comparator);function vo(){return F2}const pS=new At(Ie.comparator);function xl(...t){let e=pS;for(const n of t)e=e.insert(n.key,n);return e}function mS(t){let e=pS;return t.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function er(){return Nl()}function gS(){return Nl()}function Nl(){return new ya((t=>t.toString()),((t,e)=>t.isEqual(e)))}const H2=new At(Ie.comparator),z2=new cn(Ie.comparator);function Je(...t){let e=z2;for(const n of t)e=e.add(n);return e}const K2=new cn(nt);function Y2(){return K2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function yS(t){return{integerValue:""+t}}function J2(t,e){return S2(e)?yS(e):tm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this._=void 0}}function $2(t,e,n){return t instanceof jc?(function(r,l){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Xp(l)&&(l=jp(l)),l&&(u.fields.__previous_value__=l),{mapValue:u}})(n,e):t instanceof Fl?_S(t,e):t instanceof Hl?TS(t,e):(function(r,l){const u=vS(r,l),d=rT(u)+rT(r.Pe);return Ep(u)&&Ep(r.Pe)?yS(d):tm(r.serializer,d)})(t,e)}function Q2(t,e,n){return t instanceof Fl?_S(t,e):t instanceof Hl?TS(t,e):n}function vS(t,e){return t instanceof Wc?(function(o){return Ep(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class jc extends gf{}class Fl extends gf{constructor(e){super(),this.elements=e}}function _S(t,e){const n=ES(e);for(const o of t.elements)n.some((r=>Bi(r,o)))||n.push(o);return{arrayValue:{values:n}}}class Hl extends gf{constructor(e){super(),this.elements=e}}function TS(t,e){let n=ES(e);for(const o of t.elements)n=n.filter((r=>!Bi(r,o)));return{arrayValue:{values:n}}}class Wc extends gf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function rT(t){return Ut(t.integerValue||t.doubleValue)}function ES(t){return Wp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function X2(t,e){return t.field.isEqual(e.field)&&(function(o,r){return o instanceof Fl&&r instanceof Fl||o instanceof Hl&&r instanceof Hl?aa(o.elements,r.elements,Bi):o instanceof Wc&&r instanceof Wc?Bi(o.Pe,r.Pe):o instanceof jc&&r instanceof jc})(t.transform,e.transform)}class j2{constructor(e,n){this.version=e,this.transformResults=n}}class Ei{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ei}static exists(e){return new Ei(void 0,e)}static updateTime(e){return new Ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yf{}function SS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nm(t.key,Ei.none()):new Yl(t.key,t.data,Ei.none());{const n=t.data,o=kn.empty();let r=new cn(un.comparator);for(let l of e.fields)if(!r.has(l)){let u=n.field(l);u===null&&l.length>1&&(l=l.popLast(),u=n.field(l)),u===null?o.delete(l):o.set(l,u),r=r.add(l)}return new Es(t.key,o,new Qn(r.toArray()),Ei.none())}}function W2(t,e,n){t instanceof Yl?(function(r,l,u){const d=r.value.clone(),g=lT(r.fieldTransforms,l,u.transformResults);d.setAll(g),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof Es?(function(r,l,u){if(!Lc(r.precondition,l))return void l.convertToUnknownDocument(u.version);const d=lT(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(AS(r)),g.setAll(d),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(t,e,n):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Ml(t,e,n,o){return t instanceof Yl?(function(l,u,d,g){if(!Lc(l.precondition,u))return d;const m=l.value.clone(),_=uT(l.fieldTransforms,g,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(t,e,n,o):t instanceof Es?(function(l,u,d,g){if(!Lc(l.precondition,u))return d;const m=uT(l.fieldTransforms,g,u),_=u.data;return _.setAll(AS(l)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(t,e,n,o):(function(l,u,d){return Lc(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function Z2(t,e){let n=null;for(const o of t.fieldTransforms){const r=e.data.field(o.field),l=vS(o.transform,r||null);l!=null&&(n===null&&(n=kn.empty()),n.set(o.field,l))}return n||null}function aT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&aa(o,r,((l,u)=>X2(l,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yl extends yf{constructor(e,n,o,r=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Es extends yf{constructor(e,n,o,r,l=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function AS(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=t.data.field(n);e.set(n,o)}})),e}function lT(t,e,n){const o=new Map;ct(t.length===n.length);for(let r=0;r<n.length;r++){const l=t[r],u=l.transform,d=e.data.field(l.field);o.set(l.field,Q2(u,d,n[r]))}return o}function uT(t,e,n){const o=new Map;for(const r of t){const l=r.transform,u=n.data.field(r.field);o.set(r.field,$2(l,u,e))}return o}class nm extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eP extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,o,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&W2(l,e,o[r])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Ml(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Ml(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=gS();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=n.has(r.key)?null:d;const g=SS(u,d);g!==null&&o.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(ke.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,((n,o)=>aT(n,o)))&&aa(this.baseMutations,e.baseMutations,((n,o)=>aT(n,o)))}}class im{constructor(e,n,o,r){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=r}static from(e,n,o){ct(e.mutations.length===o.length);let r=(function(){return H2})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,o[u].version);return new im(e,n,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,Qe;function oP(t){switch(t){default:return Pe();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function bS(t){if(t===void 0)return yo("GRPC error has no .code"),le.UNKNOWN;switch(t){case Ht.OK:return le.OK;case Ht.CANCELLED:return le.CANCELLED;case Ht.UNKNOWN:return le.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return le.INTERNAL;case Ht.UNAVAILABLE:return le.UNAVAILABLE;case Ht.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Ht.NOT_FOUND:return le.NOT_FOUND;case Ht.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Ht.ABORTED:return le.ABORTED;case Ht.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Ht.DATA_LOSS:return le.DATA_LOSS;default:return Pe()}}(Qe=Ht||(Ht={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=new tr([4294967295,4294967295],0);function cT(t){const e=sP().encode(t),n=new $E;return n.update(e),new Uint8Array(n.digest())}function fT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new tr([n,o],0),new tr([r,l],0)]}class om{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new wl(`Invalid padding: ${n}`);if(o<0)throw new wl(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new wl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=tr.fromNumber(this.Ie)}Ee(e,n,o){let r=e.add(n.multiply(tr.fromNumber(o)));return r.compare(rP)===1&&(r=new tr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=cT(e),[o,r]=fT(n);for(let l=0;l<this.hashCount;l++){const u=this.Ee(o,r,l);if(!this.de(u))return!1}return!0}static create(e,n,o){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new om(l,r,n);return o.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const n=cT(e),[o,r]=fT(n);for(let l=0;l<this.hashCount;l++){const u=this.Ee(o,r,l);this.Ae(u)}}Ae(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,o,r,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const r=new Map;return r.set(e,Jl.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new vf(ke.min(),r,new At(nt),vo(),Je())}}class Jl{constructor(e,n,o,r,l){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Jl(o,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n,o,r){this.Re=e,this.removedTargetIds=n,this.key=o,this.Ve=r}}class CS{constructor(e,n){this.targetId=e,this.me=n}}class xS{constructor(e,n,o=fn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=r}}class dT{constructor(){this.fe=0,this.ge=pT(),this.pe=fn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Je(),n=Je(),o=Je();return this.ge.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:o=o.add(r);break;default:Pe()}})),new Jl(this.pe,this.ye,e,n,o)}Ce(){this.we=!1,this.ge=pT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aP{constructor(e){this.Le=e,this.Be=new Map,this.ke=vo(),this.qe=hT(),this.Qe=new At(nt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const o=this.Ge(n);switch(e.state){case 0:this.ze(n)&&o.De(e.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(e.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(o.Ne(),o.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),o.De(e.resumeToken));break;default:Pe()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((o,r)=>{this.ze(r)&&n(r)}))}He(e){const n=e.targetId,o=e.me.count,r=this.Je(n);if(r){const l=r.target;if(Ap(l))if(o===0){const u=new Ie(l.path);this.Ue(n,u,yn.newNoDocument(u,ke.min()))}else ct(o===1);else{const u=this.Ye(n);if(u!==o){const d=this.Ze(e),g=d?this.Xe(d,e,u):1;if(g!==0){this.je(n);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=n;let u,d;try{u=or(o).toUint8Array()}catch(g){if(g instanceof iS)return ra("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new om(u,r,l)}catch(g){return ra(g instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.Ie===0?null:d}Xe(e,n,o){return n.me.count===o-this.nt(e,n.targetId)?0:2}nt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let r=0;return o.forEach((l=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Ue(n,l,null),r++)})),r}rt(e){const n=new Map;this.Be.forEach(((l,u)=>{const d=this.Je(u);if(d){if(l.current&&Ap(d.target)){const g=new Ie(d.target.path);this.ke.get(g)!==null||this.it(u,g)||this.Ue(u,g,yn.newNoDocument(g,e))}l.be&&(n.set(u,l.ve()),l.Ce())}}));let o=Je();this.qe.forEach(((l,u)=>{let d=!0;u.forEachWhile((g=>{const m=this.Je(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.ke.forEach(((l,u)=>u.setReadTime(e)));const r=new vf(e,n,this.Qe,this.ke,o);return this.ke=vo(),this.qe=hT(),this.Qe=new At(nt),r}$e(e,n){if(!this.ze(e))return;const o=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,o),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,o){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),o&&(this.ke=this.ke.insert(n,o))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new dT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new cn(nt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dT),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function hT(){return new At(Ie.comparator)}function pT(){return new At(Ie.comparator)}const lP={asc:"ASCENDING",desc:"DESCENDING"},uP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cP={and:"AND",or:"OR"};class fP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cp(t,e){return t.useProto3Json||df(e)?e:{value:e}}function Zc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dP(t,e){return Zc(t,e.toTimestamp())}function Oi(t){return ct(!!t),ke.fromTimestamp((function(n){const o=vs(n);return new $t(o.seconds,o.nanos)})(t))}function sm(t,e){return xp(t,e).canonicalString()}function xp(t,e){const n=(function(r){return new St(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function RS(t){const e=St.fromString(t);return ct(PS(e)),e}function wp(t,e){return sm(t.databaseId,e.path)}function Bh(t,e){const n=RS(e);if(n.get(1)!==t.databaseId.projectId)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(NS(n))}function IS(t,e){return sm(t.databaseId,e)}function hP(t){const e=RS(t);return e.length===4?St.emptyPath():NS(e)}function Rp(t){return new St(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NS(t){return ct(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mT(t,e,n){return{name:wp(t,e),fields:n.value.mapValue.fields}}function pP(t,e){let n;if("targetChange"in e){e.targetChange;const o=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Pe()})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(m,_){return m.useProto3Json?(ct(_===void 0||typeof _=="string"),fn.fromBase64String(_||"")):(ct(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),fn.fromUint8Array(_||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const _=m.code===void 0?le.UNKNOWN:bS(m.code);return new be(_,m.message||"")})(u);n=new xS(o,r,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const r=Bh(t,o.document.name),l=Oi(o.document.updateTime),u=o.document.createTime?Oi(o.document.createTime):ke.min(),d=new kn({mapValue:{fields:o.document.fields}}),g=yn.newFoundDocument(r,l,u,d),m=o.targetIds||[],_=o.removedTargetIds||[];n=new Oc(m,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const r=Bh(t,o.document),l=o.readTime?Oi(o.readTime):ke.min(),u=yn.newNoDocument(r,l),d=o.removedTargetIds||[];n=new Oc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const r=Bh(t,o.document),l=o.removedTargetIds||[];n=new Oc([],l,r,null)}else{if(!("filter"in e))return Pe();{e.filter;const o=e.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,u=new iP(r,l),d=o.targetId;n=new CS(d,u)}}return n}function mP(t,e){let n;if(e instanceof Yl)n={update:mT(t,e.key,e.value)};else if(e instanceof nm)n={delete:wp(t,e.key)};else if(e instanceof Es)n={update:mT(t,e.key,e.data),updateMask:bP(e.fieldMask)};else{if(!(e instanceof eP))return Pe();n={verify:wp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(l,u){const d=u.transform;if(d instanceof jc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Fl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Hl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Wc)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw Pe()})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:dP(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Pe()})(t,e.precondition)),n}function gP(t,e){return t&&t.length>0?(ct(e!==void 0),t.map((n=>(function(r,l){let u=r.updateTime?Oi(r.updateTime):Oi(l);return u.isEqual(ke.min())&&(u=Oi(l)),new j2(u,r.transformResults||[])})(n,e)))):[]}function yP(t,e){return{documents:[IS(t,e.path)]}}function vP(t,e){const n={structuredQuery:{}},o=e.path;let r;e.collectionGroup!==null?(r=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=IS(t,r);const l=(function(m){if(m.length!==0)return DS(Gi.create(m,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((_=>(function(S){return{field:Wr(S.field),direction:EP(S.dir)}})(_)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=Cp(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:n,parent:r}}function _P(t){let e=hP(t.parent);const n=t.structuredQuery,o=n.from?n.from.length:0;let r=null;if(o>0){ct(o===1);const _=n.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];n.where&&(l=(function(E){const S=MS(E);return S instanceof Gi&&aS(S)?S.getFilters():[S]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((S=>(function(D){return new Xc(Zr(D.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(S)))})(n.orderBy));let d=null;n.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,df(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(E){const S=!!E.before,x=E.values||[];return new Qc(x,S)})(n.startAt));let m=null;return n.endAt&&(m=(function(E){const S=!E.before,x=E.values||[];return new Qc(x,S)})(n.endAt)),L2(e,r,u,l,d,"F",g,m)}function TP(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Zr(n.unaryFilter.field);return Jt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=Zr(n.unaryFilter.field);return Jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Zr(n.unaryFilter.field);return Jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Zr(n.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}})(t):t.fieldFilter!==void 0?(function(n){return Jt.create(Zr(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Gi.create(n.compositeFilter.filters.map((o=>MS(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Pe()}})(n.compositeFilter.op))})(t):Pe()}function EP(t){return lP[t]}function SP(t){return uP[t]}function AP(t){return cP[t]}function Wr(t){return{fieldPath:t.canonicalString()}}function Zr(t){return un.fromServerFormat(t.fieldPath)}function DS(t){return t instanceof Jt?(function(n){if(n.op==="=="){if(tT(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NAN"}};if(eT(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tT(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NOT_NAN"}};if(eT(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wr(n.field),op:SP(n.op),value:n.value}}})(t):t instanceof Gi?(function(n){const o=n.getFilters().map((r=>DS(r)));return o.length===1?o[0]:{compositeFilter:{op:AP(n.op),filters:o}}})(t):Pe()}function bP(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function PS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,o,r,l=ke.min(),u=ke.min(),d=fn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.ct=e}}function xP(t){const e=_P({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.un=new RP}addToCollectionParentIndex(e,n){return this.un.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(ys.min())}updateCollectionGroup(e,n,o){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class RP{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),r=this.index[n]||new cn(St.comparator),l=!r.has(o);return this.index[n]=r.add(o),l}has(e){const n=e.lastSegment(),o=e.popLast(),r=this.index[n];return r&&r.has(o)}getEntries(e){return(this.index[e]||new cn(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ca(0)}static kn(){return new ca(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.changes=new ya((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?ue.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n,o,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=r}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(o=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(o!==null&&Ml(o.mutation,r,Qn.empty(),$t.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,Je()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=Je()){const r=er();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,o).next((l=>{let u=xl();return l.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const o=er();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,Je())))}populateOverlays(e,n,o){const r=[];return o.forEach((l=>{n.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,o,r){let l=vo();const u=Nl(),d=(function(){return Nl()})();return n.forEach(((g,m)=>{const _=o.get(m.key);r.has(m.key)&&(_===void 0||_.mutation instanceof Es)?l=l.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),Ml(_.mutation,m,_.mutation.getFieldMask(),$t.now())):u.set(m.key,Qn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((m,_)=>u.set(m,_))),n.forEach(((m,_)=>{var E;return d.set(m,new NP(_,(E=u.get(m))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,n){const o=Nl();let r=new At(((u,d)=>u-d)),l=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((g=>{const m=n.get(g);if(m===null)return;let _=o.get(g)||Qn.empty();_=d.applyToLocalView(m,_),o.set(g,_);const E=(r.get(d.batchId)||Je()).add(g);r=r.insert(d.batchId,E)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,_=g.value,E=gS();_.forEach((S=>{if(!l.has(S)){const x=SS(n.get(S),o.get(S));x!==null&&E.set(S,x),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return ue.waitFor(u)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,r){return(function(u){return Ie.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):O2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,r):this.getDocumentsMatchingCollectionQuery(e,n,o,r)}getNextDocuments(e,n,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,r-l.size):ue.resolve(er());let d=-1,g=l;return u.next((m=>ue.forEach(m,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?ue.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{g=g.insert(_,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,g,m,Je()))).next((_=>({batchId:d,changes:mS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next((o=>{let r=xl();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,r){const l=n.collectionGroup;let u=xl();return this.indexManager.getCollectionParents(e,l).next((d=>ue.forEach(d,(g=>{const m=(function(E,S){return new hf(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,o,r).next((_=>{_.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,l,r)))).next((u=>{l.forEach(((g,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,yn.newInvalidDocument(_)))}));let d=xl();return u.forEach(((g,m)=>{const _=l.get(g);_!==void 0&&Ml(_.mutation,m,Qn.empty(),$t.now()),mf(n,m)&&(d=d.insert(g,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ue.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Oi(r.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(r){return{name:r.name,query:xP(r.bundledQuery),readTime:Oi(r.readTime)}})(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.overlays=new At(Ie.comparator),this.Ir=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const o=er();return ue.forEach(n,(r=>this.getOverlay(e,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((r,l)=>{this.ht(e,n,l)})),ue.resolve()}removeOverlaysForBatchId(e,n,o){const r=this.Ir.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(o)),ue.resolve()}getOverlaysForCollection(e,n,o){const r=er(),l=n.length+1,u=new Ie(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>o&&r.set(g.getKey(),g)}return ue.resolve(r)}getOverlaysForCollectionGroup(e,n,o,r){let l=new At(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>o){let _=l.get(m.largestBatchId);_===null&&(_=er(),l=l.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=er(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=r)););return ue.resolve(d)}ht(e,n,o){const r=this.overlays.get(o.key);if(r!==null){const u=this.Ir.get(r.largestBatchId).delete(o.key);this.Ir.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new nP(n,o));let l=this.Ir.get(n);l===void 0&&(l=Je(),this.Ir.set(n,l)),this.Ir.set(n,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this.Tr=new cn(Zt.Er),this.dr=new cn(Zt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const o=new Zt(e,n);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Vr(new Zt(e,n))}mr(e,n){e.forEach((o=>this.removeReference(o,n)))}gr(e){const n=new Ie(new St([])),o=new Zt(n,e),r=new Zt(n,e+1),l=[];return this.dr.forEachInRange([o,r],(u=>{this.Vr(u),l.push(u.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ie(new St([])),o=new Zt(n,e),r=new Zt(n,e+1);let l=Je();return this.dr.forEachInRange([o,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const n=new Zt(e,0),o=this.Tr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class Zt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ie.comparator(e.key,n.key)||nt(e.wr,n.wr)}static Ar(e,n){return nt(e.wr,n.wr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new cn(Zt.Er)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,r){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new tP(l,n,o,r);this.mutationQueue.push(u);for(const d of r)this.br=this.br.add(new Zt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,n){return ue.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,r=this.vr(o),l=r<0?0:r;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Zt(n,0),r=new Zt(n,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([o,r],(u=>{const d=this.Dr(u.wr);l.push(d)})),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new cn(nt);return n.forEach((r=>{const l=new Zt(r,0),u=new Zt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,u],(d=>{o=o.add(d.wr)}))})),ue.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,r=o.length+1;let l=o;Ie.isDocumentKey(l)||(l=l.child(""));const u=new Zt(new Ie(l),0);let d=new cn(nt);return this.br.forEachWhile((g=>{const m=g.key.path;return!!o.isPrefixOf(m)&&(m.length===r&&(d=d.add(g.wr)),!0)}),u),ue.resolve(this.Cr(d))}Cr(e){const n=[];return e.forEach((o=>{const r=this.Dr(o);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){ct(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let o=this.br;return ue.forEach(n.mutations,(r=>{const l=new Zt(r.key,n.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=o}))}On(e){}containsKey(e,n){const o=new Zt(n,0),r=this.br.firstAfterOrEqual(o);return ue.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.Mr=e,this.docs=(function(){return new At(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,r=this.docs.get(o),l=r?r.size:0,u=this.Mr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return ue.resolve(o?o.document.mutableCopy():yn.newInvalidDocument(n))}getEntries(e,n){let o=vo();return n.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():yn.newInvalidDocument(r))})),ue.resolve(o)}getDocumentsMatchingQuery(e,n,o,r){let l=vo();const u=n.path,d=new Ie(u.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:_}}=g.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||v2(y2(_),o)<=0||(r.has(_.key)||mf(n,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ue.resolve(l)}getAllFromCollectionGroup(e,n,o,r){Pe()}Or(e,n){return ue.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new LP(this)}getSize(e){return ue.resolve(this.size)}}class LP extends IP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(o)})),ue.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.persistence=e,this.Nr=new ya((n=>Zp(n)),em),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rm,this.targetCount=0,this.kr=ca.Bn()}forEachTarget(e,n){return this.Nr.forEach(((o,r)=>n(r))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Lr&&(this.Lr=n),ue.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ca(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Kn(n),ue.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,o){let r=0;const l=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=n&&o.get(d.targetId)===null&&(this.Nr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),ue.waitFor(l).next((()=>r))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const o=this.Nr.get(n)||null;return ue.resolve(o)}addMatchingKeys(e,n,o){return this.Br.Rr(n,o),ue.resolve()}removeMatchingKeys(e,n,o){this.Br.mr(n,o);const r=this.persistence.referenceDelegate,l=[];return r&&n.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),ue.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Br.yr(n);return ue.resolve(o)}containsKey(e,n){return ue.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Qp(0),this.Kr=!1,this.Kr=!0,this.$r=new UP,this.referenceDelegate=e(this),this.Ur=new OP(this),this.indexManager=new wP,this.remoteDocumentCache=(function(r){return new kP(r)})((o=>this.referenceDelegate.Wr(o))),this.serializer=new CP(n),this.Gr=new DP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.qr[e.toKey()];return o||(o=new VP(n,this.referenceDelegate),this.qr[e.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,o){Te("MemoryPersistence","Starting transaction:",e);const r=new GP(this.Qr.next());return this.referenceDelegate.zr(),o(r).next((l=>this.referenceDelegate.jr(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Hr(e,n){return ue.or(Object.values(this.qr).map((o=>()=>o.containsKey(e,n))))}}class GP extends T2{constructor(e){super(),this.currentSequenceNumber=e}}class am{constructor(e){this.persistence=e,this.Jr=new rm,this.Yr=null}static Zr(e){return new am(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,n,o){return this.Jr.addReference(o,n),this.Xr.delete(o.toString()),ue.resolve()}removeReference(e,n,o){return this.Jr.removeReference(o,n),this.Xr.add(o.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((r=>this.Xr.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((l=>this.Xr.add(l.toString())))})).next((()=>o.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Xr,(o=>{const r=Ie.fromPath(o);return this.ei(e,r).next((l=>{l||n.removeEntry(r,ke.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((o=>{o?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return ue.or([()=>ue.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n,o,r){this.targetId=e,this.fromCache=n,this.$i=o,this.Ui=r}static Wi(e,n){let o=Je(),r=Je();for(const l of n.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new lm(e,n.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return YM()?8:E2(zM())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,o,r){const l={result:null};return this.Yi(e,n).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.Zi(e,n,r,o).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new qP;return this.Xi(e,n,u).next((d=>{if(l.result=d,this.zi)return this.es(e,n,u,d.size)}))})).next((()=>l.result))}es(e,n,o,r){return o.documentReadCount<this.ji?(Sl()<=We.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",jr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ue.resolve()):(Sl()<=We.DEBUG&&Te("QueryEngine","Query:",jr(n),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.Hi*r?(Sl()<=We.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",jr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(n))):ue.resolve())}Yi(e,n){if(sT(n))return ue.resolve(null);let o=Li(n);return this.indexManager.getIndexType(e,o).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=bp(n,null,"F"),o=Li(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const u=Je(...l);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,o).next((g=>{const m=this.ts(n,d);return this.ns(n,m,u,g.readTime)?this.Yi(e,bp(n,null,"F")):this.rs(e,m,n,g)}))))})))))}Zi(e,n,o,r){return sT(n)||r.isEqual(ke.min())?ue.resolve(null):this.Ji.getDocuments(e,o).next((l=>{const u=this.ts(n,l);return this.ns(n,u,o,r)?ue.resolve(null):(Sl()<=We.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jr(n)),this.rs(e,u,n,g2(r,-1)).next((d=>d)))}))}ts(e,n){let o=new cn(hS(e));return n.forEach(((r,l)=>{mf(e,l)&&(o=o.add(l))})),o}ns(e,n,o,r){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Xi(e,n,o){return Sl()<=We.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",jr(n)),this.Ji.getDocumentsMatchingQuery(e,n,ys.min(),o)}rs(e,n,o,r){return this.Ji.getDocumentsMatchingQuery(e,o,r).next((l=>(n.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n,o,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new At(nt),this._s=new ya((l=>Zp(l)),em),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(o)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function zP(t,e,n,o){return new HP(t,e,n,o)}async function US(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return n.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,n.ls(e),n.mutationQueue.getAllMutationBatches(o)))).next((l=>{const u=[],d=[];let g=Je();for(const m of r){u.push(m.batchId);for(const _ of m.mutations)g=g.add(_.key)}for(const m of l){d.push(m.batchId);for(const _ of m.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(o,g).next((m=>({hs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function KP(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=e.batch.keys(),l=n.cs.newChangeBuffer({trackRemovals:!0});return(function(d,g,m,_){const E=m.batch,S=E.keys();let x=ue.resolve();return S.forEach((D=>{x=x.next((()=>_.getEntry(g,D))).next((V=>{const P=m.docVersions.get(D);ct(P!==null),V.version.compareTo(P)<0&&(E.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),_.addEntry(V)))}))})),x.next((()=>d.mutationQueue.removeMutationBatch(g,E)))})(n,o,e,l).next((()=>l.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let g=Je();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(o,r)))}))}function VS(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function YP(t,e){const n=Le(t),o=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const d=[];e.targetChanges.forEach(((_,E)=>{const S=r.get(E);if(!S)return;d.push(n.Ur.removeMatchingKeys(l,_.removedDocuments,E).next((()=>n.Ur.addMatchingKeys(l,_.addedDocuments,E))));let x=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(fn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):_.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(_.resumeToken,o)),r=r.insert(E,x),(function(V,P,H){return V.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(S,x,_)&&d.push(n.Ur.updateTargetData(l,x))}));let g=vo(),m=Je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(JP(l,u,e.documentUpdates).next((_=>{g=_.Ps,m=_.Is}))),!o.isEqual(ke.min())){const _=n.Ur.getLastRemoteSnapshotVersion(l).next((E=>n.Ur.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(_)}return ue.waitFor(d).next((()=>u.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,g,m))).next((()=>g))})).then((l=>(n.os=r,l)))}function JP(t,e,n){let o=Je(),r=Je();return n.forEach((l=>o=o.add(l))),e.getEntries(t,o).next((l=>{let u=vo();return n.forEach(((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(ke.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):Te("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)})),{Ps:u,Is:r}}))}function $P(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function QP(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return n.Ur.getTargetData(o,e).next((l=>l?(r=l,ue.resolve(r)):n.Ur.allocateTargetId(o).next((u=>(r=new fs(e,u,"TargetPurposeListen",o.currentSequenceNumber),n.Ur.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=n.os.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(o.targetId,o),n._s.set(e,o.targetId)),o}))}async function Ip(t,e,n){const o=Le(t),r=o.os.get(e),l=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",l,(u=>o.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Kl(u))throw u;Te("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}o.os=o.os.remove(e),o._s.delete(r.target)}function gT(t,e,n){const o=Le(t);let r=ke.min(),l=Je();return o.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,m,_){const E=Le(g),S=E._s.get(_);return S!==void 0?ue.resolve(E.os.get(S)):E.Ur.getTargetData(m,_)})(o,u,Li(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(u,d.targetId).next((g=>{l=g}))})).next((()=>o.ss.getDocumentsMatchingQuery(u,e,n?r:ke.min(),n?l:Je()))).next((d=>(XP(o,G2(e),d),{documents:d,Ts:l})))))}function XP(t,e,n){let o=t.us.get(e)||ke.min();n.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),t.us.set(e,o)}class yT{constructor(){this.activeTargetIds=Y2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jP{constructor(){this.so=new yT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,o){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yT,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic=null;function Gh(){return Ic===null?Ic=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ic++,"0x"+Ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class tU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+n.host,this.vo=`projects/${r}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${l}`}get Fo(){return!1}Mo(n,o,r,l,u){const d=Gh(),g=this.xo(n,o.toUriEncodedString());Te("RestConnection",`Sending RPC '${n}' ${d}:`,g,r);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,l,u),this.No(n,g,m,r).then((_=>(Te("RestConnection",`Received RPC '${n}' ${d}: `,_),_)),(_=>{throw ra("RestConnection",`RPC '${n}' ${d} failed with error: `,_,"url: ",g,"request:",r),_}))}Lo(n,o,r,l,u,d){return this.Mo(n,o,r,l,u)}Oo(n,o,r){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ga})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach(((l,u)=>n[u]=l)),r&&r.headers.forEach(((l,u)=>n[u]=l))}xo(n,o){const r=ZP[n];return`${this.Do}/v1/${o}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,o,r){const l=Gh();return new Promise(((u,d)=>{const g=new QE;g.setWithCredentials(!0),g.listenOnce(XE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Vc.NO_ERROR:const _=g.getResponseJson();Te(mn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),u(_);break;case Vc.TIMEOUT:Te(mn,`RPC '${e}' ${l} timed out`),d(new be(le.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:const E=g.getStatus();if(Te(mn,`RPC '${e}' ${l} failed with status:`,E,"response text:",g.getResponseText()),E>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const x=S==null?void 0:S.error;if(x&&x.status&&x.message){const D=(function(P){const H=P.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(H)>=0?H:le.UNKNOWN})(x.status);d(new be(D,x.message))}else d(new be(le.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new be(le.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{Te(mn,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(r);Te(mn,`RPC '${e}' ${l} sending request:`,r),g.send(n,"POST",m,o,15)}))}Bo(e,n,o){const r=Gh(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ZE(),d=WE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,n,o),g.encodeInitMessageHeaders=!0;const _=l.join("");Te(mn,`Creating RPC '${e}' stream ${r}: ${_}`,g);const E=u.createWebChannel(_,g);let S=!1,x=!1;const D=new eU({Io:P=>{x?Te(mn,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(S||(Te(mn,`Opening RPC '${e}' stream ${r} transport.`),E.open(),S=!0),Te(mn,`RPC '${e}' stream ${r} sending:`,P),E.send(P))},To:()=>E.close()}),V=(P,H,j)=>{P.listen(H,($=>{try{j($)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return V(E,Cl.EventType.OPEN,(()=>{x||(Te(mn,`RPC '${e}' stream ${r} transport opened.`),D.yo())})),V(E,Cl.EventType.CLOSE,(()=>{x||(x=!0,Te(mn,`RPC '${e}' stream ${r} transport closed`),D.So())})),V(E,Cl.EventType.ERROR,(P=>{x||(x=!0,ra(mn,`RPC '${e}' stream ${r} transport errored:`,P),D.So(new be(le.UNAVAILABLE,"The operation could not be completed")))})),V(E,Cl.EventType.MESSAGE,(P=>{var H;if(!x){const j=P.data[0];ct(!!j);const $=j,Z=$.error||((H=$[0])===null||H===void 0?void 0:H.error);if(Z){Te(mn,`RPC '${e}' stream ${r} received error:`,Z);const Y=Z.status;let re=(function(N){const k=Ht[N];if(k!==void 0)return bS(k)})(Y),M=Z.message;re===void 0&&(re=le.INTERNAL,M="Unknown error status: "+Y+" with message "+Z.message),x=!0,D.So(new be(re,M)),E.close()}else Te(mn,`RPC '${e}' stream ${r} received:`,j),D.bo(j)}})),V(d,jE.STAT_EVENT,(P=>{P.stat===_p.PROXY?Te(mn,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===_p.NOPROXY&&Te(mn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{D.wo()}),0),D}}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t){return new fP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n,o=1e3,r=1.5,l=6e4){this.ui=e,this.timerId=n,this.ko=o,this.qo=r,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-o);r>0&&Te("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,n,o,r,l,u,d,g){this.ui=e,this.Ho=o,this.Jo=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(yo(n.toString()),yo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.Yo===n&&this.P_(o,r)}),(o=>{e((()=>{const r=new be(le.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(r)}))}))}P_(e,n){const o=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{o((()=>this.listener.Eo()))})),this.stream.Ro((()=>{o((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((r=>{o((()=>this.I_(r)))})),this.stream.onMessage((r=>{o((()=>++this.e_==1?this.E_(r):this.onNext(r)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(Te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nU extends LS{constructor(e,n,o,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,r,u),this.serializer=l}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=pP(this.serializer,e),o=(function(l){if(!("targetChange"in l))return ke.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?ke.min():u.readTime?Oi(u.readTime):ke.min()})(e);return this.listener.d_(n,o)}A_(e){const n={};n.database=Rp(this.serializer),n.addTarget=(function(l,u){let d;const g=u.target;if(d=Ap(g)?{documents:yP(l,g)}:{query:vP(l,g)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=wS(l,u.resumeToken);const m=Cp(l,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(ke.min())>0){d.readTime=Zc(l,u.snapshotVersion.toTimestamp());const m=Cp(l,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const o=TP(this.serializer,e);o&&(n.labels=o),this.a_(n)}R_(e){const n={};n.database=Rp(this.serializer),n.removeTarget=e,this.a_(n)}}class iU extends LS{constructor(e,n,o,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,r,u),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ct(!!e.streamToken),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=gP(e.writeResults,e.commitTime),o=Oi(e.commitTime);return this.listener.g_(o,n)}p_(){const e={};e.database=Rp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>mP(this.serializer,o)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU extends class{}{constructor(e,n,o,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,o,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Mo(e,xp(n,o),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(le.UNKNOWN,l.toString())}))}Lo(e,n,o,r,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,xp(n,o),r,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(le.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class sU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yo(n),this.D_=!1):Te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,n,o,r,l){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((u=>{o.enqueueAndForget((async()=>{cr(this)&&(Te("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const m=Le(g);m.L_.add(4),await $l(m),m.q_.set("Unknown"),m.L_.delete(4),await Tf(m)})(this))}))})),this.q_=new sU(o,r)}}async function Tf(t){if(cr(t))for(const e of t.B_)await e(!0)}async function $l(t){for(const e of t.B_)await e(!1)}function OS(t,e){const n=Le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),dm(n)?fm(n):va(n).r_()&&cm(n,e))}function um(t,e){const n=Le(t),o=va(n);n.N_.delete(e),o.r_()&&BS(n,e),n.N_.size===0&&(o.r_()?o.o_():cr(n)&&n.q_.set("Unknown"))}function cm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}va(t).A_(e)}function BS(t,e){t.Q_.xe(e),va(t).R_(e)}function fm(t){t.Q_=new aP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),va(t).start(),t.q_.v_()}function dm(t){return cr(t)&&!va(t).n_()&&t.N_.size>0}function cr(t){return Le(t).L_.size===0}function GS(t){t.Q_=void 0}async function aU(t){t.q_.set("Online")}async function lU(t){t.N_.forEach(((e,n)=>{cm(t,e)}))}async function uU(t,e){GS(t),dm(t)?(t.q_.M_(e),fm(t)):t.q_.set("Unknown")}async function cU(t,e,n){if(t.q_.set("Online"),e instanceof xS&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const d of l.targetIds)r.N_.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.N_.delete(d),r.Q_.removeTarget(d))})(t,e)}catch(o){Te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),await ef(t,o)}else if(e instanceof Oc?t.Q_.Ke(e):e instanceof CS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ke.min()))try{const o=await VS(t.localStore);n.compareTo(o)>=0&&await(function(l,u){const d=l.Q_.rt(u);return d.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.N_.get(m);_&&l.N_.set(m,_.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,m)=>{const _=l.N_.get(g);if(!_)return;l.N_.set(g,_.withResumeToken(fn.EMPTY_BYTE_STRING,_.snapshotVersion)),BS(l,g);const E=new fs(_.target,g,m,_.sequenceNumber);cm(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(o){Te("RemoteStore","Failed to raise snapshot:",o),await ef(t,o)}}async function ef(t,e,n){if(!Kl(e))throw e;t.L_.add(1),await $l(t),t.q_.set("Offline"),n||(n=()=>VS(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Tf(t)}))}function qS(t,e){return e().catch((n=>ef(t,n,e)))}async function Ef(t){const e=Le(t),n=_s(e);let o=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fU(e);)try{const r=await $P(e.localStore,o);if(r===null){e.O_.length===0&&n.o_();break}o=r.batchId,dU(e,r)}catch(r){await ef(e,r)}FS(e)&&HS(e)}function fU(t){return cr(t)&&t.O_.length<10}function dU(t,e){t.O_.push(e);const n=_s(t);n.r_()&&n.V_&&n.m_(e.mutations)}function FS(t){return cr(t)&&!_s(t).n_()&&t.O_.length>0}function HS(t){_s(t).start()}async function hU(t){_s(t).p_()}async function pU(t){const e=_s(t);for(const n of t.O_)e.m_(n.mutations)}async function mU(t,e,n){const o=t.O_.shift(),r=im.from(o,e,n);await qS(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Ef(t)}async function gU(t,e){e&&_s(t).V_&&await(async function(o,r){if((function(u){return oP(u)&&u!==le.ABORTED})(r.code)){const l=o.O_.shift();_s(o).s_(),await qS(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Ef(o)}})(t,e),FS(t)&&HS(t)}async function _T(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),Te("RemoteStore","RemoteStore received new credentials");const o=cr(n);n.L_.add(3),await $l(n),o&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Tf(n)}async function yU(t,e){const n=Le(t);e?(n.L_.delete(2),await Tf(n)):e||(n.L_.add(2),await $l(n),n.q_.set("Unknown"))}function va(t){return t.K_||(t.K_=(function(n,o,r){const l=Le(n);return l.w_(),new nU(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(t.datastore,t.asyncQueue,{Eo:aU.bind(null,t),Ro:lU.bind(null,t),mo:uU.bind(null,t),d_:cU.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),dm(t)?fm(t):t.q_.set("Unknown")):(await t.K_.stop(),GS(t))}))),t.K_}function _s(t){return t.U_||(t.U_=(function(n,o,r){const l=Le(n);return l.w_(),new iU(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hU.bind(null,t),mo:gU.bind(null,t),f_:pU.bind(null,t),g_:mU.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Ef(t)):(await t.U_.stop(),t.O_.length>0&&(Te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,o,r,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,r,l){const u=Date.now()+o,d=new hm(e,n,u,r,l);return d.start(o),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pm(t,e){if(yo("AsyncQueue",`${e}: ${t}`),Kl(t))return new be(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Ie.comparator(n.key,o.key):(n,o)=>Ie.comparator(n.key,o.key),this.keyedMap=xl(),this.sortedSet=new At(this.comparator)}static emptySet(e){return new oa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new oa;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.W_=new At(Ie.comparator)}track(e){const n=e.doc.key,o=this.W_.get(n);o?e.type!==0&&o.type===3?this.W_=this.W_.insert(n,e):e.type===3&&o.type!==1?this.W_=this.W_.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.W_=this.W_.remove(n):e.type===1&&o.type===2?this.W_=this.W_.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,o)=>{e.push(o)})),e}}class fa{constructor(e,n,o,r,l,u,d,g,m){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(e,n,o,r,l){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new fa(e,n,oa.emptySet(n),u,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==o[r].type||!n[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class _U{constructor(){this.queries=ET(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,o){const r=Le(n),l=r.queries;r.queries=ET(),l.forEach(((u,d)=>{for(const g of d.j_)g.onError(o)}))})(this,new be(le.ABORTED,"Firestore shutting down"))}}function ET(){return new ya((t=>dS(t)),pf)}async function TU(t,e){const n=Le(t);let o=3;const r=e.query;let l=n.queries.get(r);l?!l.H_()&&e.J_()&&(o=2):(l=new vU,o=e.J_()?0:1);try{switch(o){case 0:l.z_=await n.onListen(r,!0);break;case 1:l.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(u){const d=pm(u,`Initialization of query '${jr(e.query)}' failed`);return void e.onError(d)}n.queries.set(r,l),l.j_.push(e),e.Z_(n.onlineState),l.z_&&e.X_(l.z_)&&mm(n)}async function EU(t,e){const n=Le(t),o=e.query;let r=3;const l=n.queries.get(o);if(l){const u=l.j_.indexOf(e);u>=0&&(l.j_.splice(u,1),l.j_.length===0?r=e.J_()?0:1:!l.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function SU(t,e){const n=Le(t);let o=!1;for(const r of e){const l=r.query,u=n.queries.get(l);if(u){for(const d of u.j_)d.X_(r)&&(o=!0);u.z_=r}}o&&mm(n)}function AU(t,e,n){const o=Le(t),r=o.queries.get(e);if(r)for(const l of r.j_)l.onError(n);o.queries.delete(e)}function mm(t){t.Y_.forEach((e=>{e.next()}))}var Np,ST;(ST=Np||(Np={})).ea="default",ST.Cache="cache";class bU{constructor(e,n,o){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(e){if(!this.options.includeMetadataChanges){const o=[];for(const r of e.docChanges)r.type!==3&&o.push(r);e=new fa(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const o=n!=="Offline";return(!this.options._a||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Np.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.key=e}}class KS{constructor(e){this.key=e}}class CU{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Je(),this.mutatedKeys=Je(),this.Aa=hS(e),this.Ra=new oa(this.Aa)}get Va(){return this.Ta}ma(e,n){const o=n?n.fa:new TT,r=n?n.Ra:this.Ra;let l=n?n.mutatedKeys:this.mutatedKeys,u=r,d=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,E)=>{const S=r.get(_),x=mf(this.query,E)?E:null,D=!!S&&this.mutatedKeys.has(S.key),V=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let P=!1;S&&x?S.data.isEqual(x.data)?D!==V&&(o.track({type:3,doc:x}),P=!0):this.ga(S,x)||(o.track({type:2,doc:x}),P=!0,(g&&this.Aa(x,g)>0||m&&this.Aa(x,m)<0)&&(d=!0)):!S&&x?(o.track({type:0,doc:x}),P=!0):S&&!x&&(o.track({type:1,doc:S}),P=!0,(g||m)&&(d=!0)),P&&(x?(u=u.add(x),l=V?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),o.track({type:1,doc:_})}return{Ra:u,fa:o,ns:d,mutatedKeys:l}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,r){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,E)=>(function(x,D){const V=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return V(x)-V(D)})(_.type,E.type)||this.Aa(_.doc,E.doc))),this.pa(o),r=r!=null&&r;const d=n&&!r?this.ya():[],g=this.da.size===0&&this.current&&!r?1:0,m=g!==this.Ea;return this.Ea=g,u.length!==0||m?{snapshot:new fa(this.query,e.Ra,l,u,e.mutatedKeys,g===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new TT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Je(),this.Ra.forEach((o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))}));const n=[];return e.forEach((o=>{this.da.has(o)||n.push(new KS(o))})),this.da.forEach((o=>{e.has(o)||n.push(new zS(o))})),n}ba(e){this.Ta=e.Ts,this.da=Je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return fa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class xU{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class wU{constructor(e){this.key=e,this.va=!1}}class RU{constructor(e,n,o,r,l,u){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new ya((d=>dS(d)),pf),this.Ma=new Map,this.xa=new Set,this.Oa=new At(Ie.comparator),this.Na=new Map,this.La=new rm,this.Ba={},this.ka=new Map,this.qa=ca.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function IU(t,e,n=!0){const o=jS(t);let r;const l=o.Fa.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.Da()):r=await YS(o,e,n,!0),r}async function NU(t,e){const n=jS(t);await YS(n,e,!0,!1)}async function YS(t,e,n,o){const r=await QP(t.localStore,Li(e)),l=r.targetId,u=t.sharedClientState.addLocalQueryTarget(l,n);let d;return o&&(d=await MU(t,e,l,u==="current",r.resumeToken)),t.isPrimaryClient&&n&&OS(t.remoteStore,r),d}async function MU(t,e,n,o,r){t.Ka=(E,S,x)=>(async function(V,P,H,j){let $=P.view.ma(H);$.ns&&($=await gT(V.localStore,P.query,!1).then((({documents:M})=>P.view.ma(M,$))));const Z=j&&j.targetChanges.get(P.targetId),Y=j&&j.targetMismatches.get(P.targetId)!=null,re=P.view.applyChanges($,V.isPrimaryClient,Z,Y);return bT(V,P.targetId,re.wa),re.snapshot})(t,E,S,x);const l=await gT(t.localStore,e,!0),u=new CU(e,l.Ts),d=u.ma(l.documents),g=Jl.createSynthesizedTargetChangeForCurrentChange(n,o&&t.onlineState!=="Offline",r),m=u.applyChanges(d,t.isPrimaryClient,g);bT(t,n,m.wa);const _=new xU(e,n,u);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function DU(t,e,n){const o=Le(t),r=o.Fa.get(e),l=o.Ma.get(r.targetId);if(l.length>1)return o.Ma.set(r.targetId,l.filter((u=>!pf(u,e)))),void o.Fa.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await Ip(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),n&&um(o.remoteStore,r.targetId),Mp(o,r.targetId)})).catch(zl)):(Mp(o,r.targetId),await Ip(o.localStore,r.targetId,!0))}async function PU(t,e){const n=Le(t),o=n.Fa.get(e),r=n.Ma.get(o.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),um(n.remoteStore,o.targetId))}async function UU(t,e,n){const o=qU(t);try{const r=await(function(u,d){const g=Le(u),m=$t.now(),_=d.reduce(((x,D)=>x.add(D.key)),Je());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let D=vo(),V=Je();return g.cs.getEntries(x,_).next((P=>{D=P,D.forEach(((H,j)=>{j.isValidDocument()||(V=V.add(H))}))})).next((()=>g.localDocuments.getOverlayedDocuments(x,D))).next((P=>{E=P;const H=[];for(const j of d){const $=Z2(j,E.get(j.key).overlayedDocument);$!=null&&H.push(new Es(j.key,$,oS($.value.mapValue),Ei.exists(!0)))}return g.mutationQueue.addMutationBatch(x,m,H,d)})).next((P=>{S=P;const H=P.applyToLocalDocumentSet(E,V);return g.documentOverlayCache.saveOverlays(x,P.batchId,H)}))})).then((()=>({batchId:S.batchId,changes:mS(E)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(r.batchId),(function(u,d,g){let m=u.Ba[u.currentUser.toKey()];m||(m=new At(nt)),m=m.insert(d,g),u.Ba[u.currentUser.toKey()]=m})(o,r.batchId,n),await Ql(o,r.changes),await Ef(o.remoteStore)}catch(r){const l=pm(r,"Failed to persist write");n.reject(l)}}async function JS(t,e){const n=Le(t);try{const o=await YP(n.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=n.Na.get(l);u&&(ct(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.va=!0:r.modifiedDocuments.size>0?ct(u.va):r.removedDocuments.size>0&&(ct(u.va),u.va=!1))})),await Ql(n,o,e)}catch(o){await zl(o)}}function AT(t,e,n){const o=Le(t);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const r=[];o.Fa.forEach(((l,u)=>{const d=u.view.Z_(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const g=Le(u);g.onlineState=d;let m=!1;g.queries.forEach(((_,E)=>{for(const S of E.j_)S.Z_(d)&&(m=!0)})),m&&mm(g)})(o.eventManager,e),r.length&&o.Ca.d_(r),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function VU(t,e,n){const o=Le(t);o.sharedClientState.updateQueryState(e,"rejected",n);const r=o.Na.get(e),l=r&&r.key;if(l){let u=new At(Ie.comparator);u=u.insert(l,yn.newNoDocument(l,ke.min()));const d=Je().add(l),g=new vf(ke.min(),new Map,new At(nt),u,d);await JS(o,g),o.Oa=o.Oa.remove(l),o.Na.delete(e),gm(o)}else await Ip(o.localStore,e,!1).then((()=>Mp(o,e,n))).catch(zl)}async function kU(t,e){const n=Le(t),o=e.batch.batchId;try{const r=await KP(n.localStore,e);QS(n,o,null),$S(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await Ql(n,r)}catch(r){await zl(r)}}async function LU(t,e,n){const o=Le(t);try{const r=await(function(u,d){const g=Le(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return g.mutationQueue.lookupMutationBatch(m,d).next((E=>(ct(E!==null),_=E.keys(),g.mutationQueue.removeMutationBatch(m,E)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>g.localDocuments.getDocuments(m,_)))}))})(o.localStore,e);QS(o,e,n),$S(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await Ql(o,r)}catch(r){await zl(r)}}function $S(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function QS(t,e,n){const o=Le(t);let r=o.Ba[o.currentUser.toKey()];if(r){const l=r.get(e);l&&(n?l.reject(n):l.resolve(),r=r.remove(e)),o.Ba[o.currentUser.toKey()]=r}}function Mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const o of t.Ma.get(e))t.Fa.delete(o),n&&t.Ca.$a(o,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((o=>{t.La.containsKey(o)||XS(t,o)}))}function XS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(um(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),gm(t))}function bT(t,e,n){for(const o of n)o instanceof zS?(t.La.addReference(o.key,e),OU(t,o)):o instanceof KS?(Te("SyncEngine","Document no longer in limbo: "+o.key),t.La.removeReference(o.key,e),t.La.containsKey(o.key)||XS(t,o.key)):Pe()}function OU(t,e){const n=e.key,o=n.path.canonicalString();t.Oa.get(n)||t.xa.has(o)||(Te("SyncEngine","New document in limbo: "+n),t.xa.add(o),gm(t))}function gm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ie(St.fromString(e)),o=t.qa.next();t.Na.set(o,new wU(n)),t.Oa=t.Oa.insert(n,o),OS(t.remoteStore,new fs(Li(fS(n.path)),o,"TargetPurposeLimboResolution",Qp.oe))}}async function Ql(t,e,n){const o=Le(t),r=[],l=[],u=[];o.Fa.isEmpty()||(o.Fa.forEach(((d,g)=>{u.push(o.Ka(g,e,n).then((m=>{var _;if((m||n)&&o.isPrimaryClient){const E=m?!m.fromCache:(_=n==null?void 0:n.targetChanges.get(g.targetId))===null||_===void 0?void 0:_.current;o.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(m){r.push(m);const E=lm.Wi(g.targetId,m);l.push(E)}})))})),await Promise.all(u),o.Ca.d_(r),await(async function(g,m){const _=Le(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(m,(S=>ue.forEach(S.$i,(x=>_.persistence.referenceDelegate.addReference(E,S.targetId,x))).next((()=>ue.forEach(S.Ui,(x=>_.persistence.referenceDelegate.removeReference(E,S.targetId,x)))))))))}catch(E){if(!Kl(E))throw E;Te("LocalStore","Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const x=_.os.get(S),D=x.snapshotVersion,V=x.withLastLimboFreeSnapshotVersion(D);_.os=_.os.insert(S,V)}}})(o.localStore,l))}async function BU(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){Te("SyncEngine","User change. New user:",e.toKey());const o=await US(n.localStore,e);n.currentUser=e,(function(l,u){l.ka.forEach((d=>{d.forEach((g=>{g.reject(new be(le.CANCELLED,u))}))})),l.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Ql(n,o.hs)}}function GU(t,e){const n=Le(t),o=n.Na.get(e);if(o&&o.va)return Je().add(o.key);{let r=Je();const l=n.Ma.get(e);if(!l)return r;for(const u of l){const d=n.Fa.get(u);r=r.unionWith(d.view.Va)}return r}}function jS(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VU.bind(null,e),e.Ca.d_=SU.bind(null,e.eventManager),e.Ca.$a=AU.bind(null,e.eventManager),e}function qU(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LU.bind(null,e),e}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return zP(this.persistence,new FP,e.initialUser,this.serializer)}Ga(e){return new BP(am.Zr,this.serializer)}Wa(e){return new jP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class Dp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>AT(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=BU.bind(null,this.syncEngine),await yU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _U})()}createDatastore(e){const n=_f(e.databaseInfo.databaseId),o=(function(l){return new tU(l)})(e.databaseInfo);return(function(l,u,d,g){return new oU(l,u,d,g)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,r,l,u,d){return new rU(o,r,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>AT(this.syncEngine,n,0)),(function(){return vT.D()?new vT:new WP})())}createSyncEngine(e,n){return(function(r,l,u,d,g,m,_){const E=new RU(r,l,u,d,g,m);return _&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const l=Le(r);Te("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await $l(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dp.provider={build:()=>new Dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):yo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,n,o,r,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=r,this.user=gn.UNAUTHENTICATED,this.clientId=tS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async u=>{Te("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(o,(u=>(Te("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=pm(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Fh(t,e){t.asyncQueue.verifyOperationInProgress(),Te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let o=n.initialUser;t.setCredentialChangeListener((async r=>{o.isEqual(r)||(await US(e.localStore,r),o=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function CT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zU(t);Te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((o=>_T(e.remoteStore,o))),t.setAppCheckTokenChangeListener(((o,r)=>_T(e.remoteStore,r))),t._onlineComponents=e}async function zU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===le.FAILED_PRECONDITION||r.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;ra("Error using user provided cache. Falling back to memory cache: "+n),await Fh(t,new tf)}}else Te("FirestoreClient","Using default OfflineComponentProvider"),await Fh(t,new tf);return t._offlineComponents}async function WS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te("FirestoreClient","Using user provided OnlineComponentProvider"),await CT(t,t._uninitializedComponentsProvider._online)):(Te("FirestoreClient","Using default OnlineComponentProvider"),await CT(t,new Dp))),t._onlineComponents}function KU(t){return WS(t).then((e=>e.syncEngine))}async function YU(t){const e=await WS(t),n=e.eventManager;return n.onListen=IU.bind(null,e.syncEngine),n.onUnlisten=DU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PU.bind(null,e.syncEngine),n}function JU(t,e,n={}){const o=new ms;return t.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,g,m){const _=new FU({next:S=>{_.Za(),u.enqueueAndForget((()=>EU(l,E))),S.fromCache&&g.source==="server"?m.reject(new be(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new bU(d,_,{includeMetadataChanges:!0,_a:!0});return TU(l,E)})(await YU(t),t.asyncQueue,e,n,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t,e,n){if(!n)throw new be(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $U(t,e,n,o){if(e===!0&&o===!0)throw new be(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wT(t){if(!Ie.isDocumentKey(t))throw new be(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function RT(t){if(Ie.isDocumentKey(t))throw new be(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ym(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe()}function nf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ym(t);throw new be(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){var n,o;if(e.host===void 0){if(e.ssl!==void 0)throw new be(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new be(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$U("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZS((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sf{constructor(e,n,o,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IT(e),e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new a2;switch(o.type){case"firstParty":return new f2(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new be(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=xT.get(n);o&&(Te("ComponentProvider","Removing Datastore"),xT.delete(n),o.terminate())})(this),Promise.resolve()}}function QU(t,e,n,o={}){var r;const l=(t=nf(t,Sf))._getSettings(),u=`${e}:${n}`;if(l.host!=="firestore.googleapis.com"&&l.host!==u&&ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:u,ssl:!1})),o.mockUserToken){let d,g;if(typeof o.mockUserToken=="string")d=o.mockUserToken,g=gn.MOCK_USER;else{d=LE(o.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const m=o.mockUserToken.sub||o.mockUserToken.user_id;if(!m)throw new be(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new gn(m)}t._authCredentials=new l2(new eS(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Af(this.firestore,e,this._query)}}class Si{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Si(this.firestore,e,this._key)}}class gs extends Af{constructor(e,n,o){super(e,n,fS(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Si(this.firestore,null,new Ie(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function Hh(t,e,...n){if(t=jn(t),eA("collection","path",e),t instanceof Sf){const o=St.fromString(e,...n);return RT(o),new gs(t,null,o)}{if(!(t instanceof Si||t instanceof gs))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(St.fromString(e,...n));return RT(o),new gs(t.firestore,null,o)}}function zh(t,e,...n){if(t=jn(t),arguments.length===1&&(e=tS.newId()),eA("doc","path",e),t instanceof Sf){const o=St.fromString(e,...n);return wT(o),new Si(t,null,new Ie(o))}{if(!(t instanceof Si||t instanceof gs))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(St.fromString(e,...n));return wT(o),new Si(t.firestore,t instanceof gs?t.converter:null,new Ie(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kS(this,"async_queue_retry"),this.Vu=()=>{const o=qh();o&&Te("AsyncQueue","Visibility state changed to "+o.visibilityState),this.t_.jo()},this.mu=e;const n=qh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=qh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new ms;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Kl(e))throw e;Te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((o=>{this.Eu=o,this.du=!1;const r=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(o);throw yo("INTERNAL UNHANDLED ERROR: ",r),o})).then((o=>(this.du=!1,o))))));return this.mu=n,n}enqueueAfterDelay(e,n,o){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=hm.createAndSchedule(this,e,n,o,(l=>this.yu(l)));return this.Tu.push(r),r}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class vm extends Sf{constructor(e,n,o,r){super(e,n,o,r),this.type="firestore",this._queue=new NT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NT(e),this._firestoreClient=void 0,await e}}}function XU(t,e){const n=typeof t=="object"?t:KE(),o=typeof t=="string"?t:"(default)",r=FE(n,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=VE("firestore");l&&QU(r,...l)}return r}function _m(t){if(t._terminated)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jU(t),t._firestoreClient}function jU(t){var e,n,o;const r=t._freezeSettings(),l=(function(d,g,m,_){return new b2(d,g,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,ZS(_.experimentalLongPollingOptions),_.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((o=r.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new HU(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new da(fn.fromBase64String(e))}catch(n){throw new be(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new da(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=/^__.*__$/;class ZU{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new Es(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yl(e,this.data,n,this.fieldTransforms)}}class tA{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Am{constructor(e,n,o,r,l,u){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Am(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const o=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:o,xu:!1});return r.Ou(e),r}Nu(e){var n;const o=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:o,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return of(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nA(this.Cu)&&WU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class eV{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||_f(e)}Qu(e,n,o,r=!1){return new Am({Cu:e,methodName:n,qu:o,path:un.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tV(t){const e=t._freezeSettings(),n=_f(t._databaseId);return new eV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nV(t,e,n,o,r,l={}){const u=t.Qu(l.merge||l.mergeFields?2:0,e,n,r);bm("Data must be an object, but it was:",u,o);const d=iA(o,u);let g,m;if(l.merge)g=new Qn(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const S=Pp(e,E,n);if(!u.contains(S))throw new be(le.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);sA(_,S)||_.push(S)}g=new Qn(_),m=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,m=u.fieldTransforms;return new ZU(new kn(d),g,m)}class Cf extends Tm{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cf}}function iV(t,e,n,o){const r=t.Qu(1,e,n);bm("Data must be an object, but it was:",r,o);const l=[],u=kn.empty();ur(o,((g,m)=>{const _=Cm(e,g,n);m=jn(m);const E=r.Nu(_);if(m instanceof Cf)l.push(_);else{const S=xf(m,E);S!=null&&(l.push(_),u.set(_,S))}}));const d=new Qn(l);return new tA(u,d,r.fieldTransforms)}function oV(t,e,n,o,r,l){const u=t.Qu(1,e,n),d=[Pp(e,o,n)],g=[r];if(l.length%2!=0)throw new be(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Pp(e,l[S])),g.push(l[S+1]);const m=[],_=kn.empty();for(let S=d.length-1;S>=0;--S)if(!sA(m,d[S])){const x=d[S];let D=g[S];D=jn(D);const V=u.Nu(x);if(D instanceof Cf)m.push(x);else{const P=xf(D,V);P!=null&&(m.push(x),_.set(x,P))}}const E=new Qn(m);return new tA(_,E,u.fieldTransforms)}function xf(t,e){if(oA(t=jn(t)))return bm("Unsupported field value:",e,t),iA(t,e);if(t instanceof Tm)return(function(o,r){if(!nA(r.Cu))throw r.Bu(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(o,r){const l=[];let u=0;for(const d of o){let g=xf(d,r.Lu(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(t,e)}return(function(o,r){if((o=jn(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return J2(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=$t.fromDate(o);return{timestampValue:Zc(r.serializer,l)}}if(o instanceof $t){const l=new $t(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Zc(r.serializer,l)}}if(o instanceof Em)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof da)return{bytesValue:wS(r.serializer,o._byteString)};if(o instanceof Si){const l=r.databaseId,u=o.firestore._databaseId;if(!u.isEqual(l))throw r.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:sm(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof Sm)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw d.Bu("VectorValues must only contain numeric values.");return tm(d.serializer,g)}))}}}}}})(o,r);throw r.Bu(`Unsupported field value: ${ym(o)}`)})(t,e)}function iA(t,e){const n={};return nS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ur(t,((o,r)=>{const l=xf(r,e.Mu(o));l!=null&&(n[o]=l)})),{mapValue:{fields:n}}}function oA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $t||t instanceof Em||t instanceof da||t instanceof Si||t instanceof Tm||t instanceof Sm)}function bm(t,e,n){if(!oA(n)||!(function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)})(n)){const o=ym(n);throw o==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+o)}}function Pp(t,e,n){if((e=jn(e))instanceof bf)return e._internalPath;if(typeof e=="string")return Cm(t,e);throw of("Field path arguments must be of type string or ",t,!1,void 0,n)}const sV=new RegExp("[~\\*/\\[\\]]");function Cm(t,e,n){if(e.search(sV)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bf(...e.split("."))._internalPath}catch{throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function of(t,e,n,o,r){const l=o&&!o.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${o}`),u&&(g+=` in document ${r}`),g+=")"),new be(le.INVALID_ARGUMENT,d+t+g)}function sA(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,o,r,l){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Si(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(aA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rV extends rA{data(){return super.data()}}function aA(t,e){return typeof e=="string"?Cm(t,e):e instanceof bf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lV{convertValue(e,n="none"){switch(sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return ur(e,((r,l)=>{o[r]=this.convertValue(l,n)})),o}convertVectorValue(e){var n,o,r;const l=(r=(o=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||o===void 0?void 0:o.values)===null||r===void 0?void 0:r.map((u=>Ut(u.doubleValue)));return new Sm(l)}convertGeoPoint(e){return new Em(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=jp(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){const n=vs(e);return new $t(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=St.fromString(e);ct(PS(o));const r=new Gl(o.get(1),o.get(3)),l=new Ie(o.popFirst(5));return r.isEqual(n)||yo(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t,e,n){let o;return o=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cV extends rA{constructor(e,n,o,r,l,u){super(e,n,o,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(aA("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Bc extends cV{data(e={}){return super.data(e)}}class fV{constructor(e,n,o,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Nc(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new Bc(this._firestore,this._userDataWriter,o.key,o,new Nc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const g=new Bc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Nc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new Bc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Nc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,_=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:dV(d.type),doc:g,oldIndex:m,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}class hV extends lV{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Si(this.firestore,null,n)}}function Kh(t){t=nf(t,Af);const e=nf(t.firestore,vm),n=_m(e),o=new hV(e);return aV(t._query),JU(n,t._query).then((r=>new fV(e,o,t,r)))}function pV(t,e){return(function(o,r){const l=new ms;return o.asyncQueue.enqueueAndForget((async()=>UU(await KU(o),r,l))),l.promise})(_m(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=tV(e)}set(e,n,o){this._verifyNotCommitted();const r=Yh(e,this._firestore),l=uV(r.converter,n,o),u=nV(this._dataReader,"WriteBatch.set",r._key,l,r.converter!==null,o);return this._mutations.push(u.toMutation(r._key,Ei.none())),this}update(e,n,o,...r){this._verifyNotCommitted();const l=Yh(e,this._firestore);let u;return u=typeof(n=jn(n))=="string"||n instanceof bf?oV(this._dataReader,"WriteBatch.update",l._key,n,o,r):iV(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(u.toMutation(l._key,Ei.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Yh(e,this._firestore);return this._mutations=this._mutations.concat(new nm(n._key,Ei.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yh(t,e){if((t=jn(t)).firestore!==e)throw new be(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t){return _m(t=nf(t,vm)),new mV(t,(e=>pV(t,e)))}(function(e,n=!0){(function(r){ga=r})(HE),kl(new sa("firestore",((o,{instanceIdentifier:r,options:l})=>{const u=o.getProvider("app").getImmediate(),d=new vm(new u2(o.getProvider("auth-internal")),new h2(o.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new be(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(m.options.projectId,_)})(u,r),u);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ps(Q0,"4.7.3",e),ps(Q0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="firebasestorage.googleapis.com",uA="storageBucket",gV=120*1e3,yV=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It extends lr{constructor(e,n,o=0){super($h(e),`Firebase Storage: ${n} (${$h(e)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,It.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $h(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rt||(Rt={}));function $h(t){return"storage/"+t}function xm(){const t="An unknown error occurred, please check the error payload for server response.";return new It(Rt.UNKNOWN,t)}function vV(t){return new It(Rt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function _V(t){return new It(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function TV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new It(Rt.UNAUTHENTICATED,t)}function EV(){return new It(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function SV(t){return new It(Rt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function AV(){return new It(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bV(){return new It(Rt.CANCELED,"User canceled the upload/download.")}function CV(t){return new It(Rt.INVALID_URL,"Invalid URL '"+t+"'.")}function xV(t){return new It(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function wV(){return new It(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uA+"' property when initializing the app?")}function RV(){return new It(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function IV(){return new It(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function NV(t){return new It(Rt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Up(t){return new It(Rt.INVALID_ARGUMENT,t)}function cA(){return new It(Rt.APP_DELETED,"The Firebase app was deleted.")}function MV(t){return new It(Rt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dl(t,e){return new It(Rt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Al(t){throw new It(Rt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let o;try{o=Xn.makeFromUrl(e,n)}catch{return new Xn(e,"")}if(o.path==="")return o;throw xV(e)}static makeFromUrl(e,n){let o=null;const r="([A-Za-z0-9.\\-_]+)";function l(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+r+u,"i"),g={bucket:1,path:3};function m(Z){Z.path_=decodeURIComponent(Z.path)}const _="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",x=new RegExp(`^https?://${E}/${_}/b/${r}/o${S}`,"i"),D={bucket:1,path:3},V=n===lA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",H=new RegExp(`^https?://${V}/${r}/${P}`,"i"),$=[{regex:d,indices:g,postModify:l},{regex:x,indices:D,postModify:m},{regex:H,indices:{bucket:1,path:2},postModify:m}];for(let Z=0;Z<$.length;Z++){const Y=$[Z],re=Y.regex.exec(e);if(re){const M=re[Y.indices.bucket];let R=re[Y.indices.path];R||(R=""),o=new Xn(M,R),Y.postModify(o);break}}if(o==null)throw CV(e);return o}}class DV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(t,e,n){let o=1,r=null,l=null,u=!1,d=0;function g(){return d===2}let m=!1;function _(...P){m||(m=!0,e.apply(null,P))}function E(P){r=setTimeout(()=>{r=null,t(x,g())},P)}function S(){l&&clearTimeout(l)}function x(P,...H){if(m){S();return}if(P){S(),_.call(null,P,...H);return}if(g()||u){S(),_.call(null,P,...H);return}o<64&&(o*=2);let $;d===1?(d=2,$=0):$=(o+Math.random())*1e3,E($)}let D=!1;function V(P){D||(D=!0,S(),!m&&(r!==null?(P||(d=2),clearTimeout(r),E(0)):P||(d=1)))}return E(0),l=setTimeout(()=>{u=!0,V(!0)},n),V}function UV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){return t!==void 0}function kV(t){return typeof t=="object"&&!Array.isArray(t)}function wm(t){return typeof t=="string"||t instanceof String}function MT(t){return Rm()&&t instanceof Blob}function Rm(){return typeof Blob<"u"}function DT(t,e,n,o){if(o<e)throw Up(`Invalid value for '${t}'. Expected ${e} or greater.`);if(o>n)throw Up(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t,e,n){let o=e;return n==null&&(o=`https://${e}`),`${n}://${o}/v0${t}`}function fA(t){const e=encodeURIComponent;let n="?";for(const o in t)if(t.hasOwnProperty(o)){const r=e(o)+"="+e(t[o]);n=n+r+"&"}return n=n.slice(0,-1),n}var nr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(nr||(nr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||r||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,n,o,r,l,u,d,g,m,_,E,S=!0){this.url_=e,this.method_=n,this.headers_=o,this.body_=r,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=g,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=E,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,D)=>{this.resolve_=x,this.reject_=D,this.start_()})}start_(){const e=(o,r)=>{if(r){o(!1,new Mc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=d=>{const g=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,m)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const d=l.getErrorCode()===nr.NO_ERROR,g=l.getStatus();if(!d||LV(g,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===nr.ABORT;o(!1,new Mc(!1,null,_));return}const m=this.successCodes_.indexOf(g)!==-1;o(!0,new Mc(m,l))})},n=(o,r)=>{const l=this.resolve_,u=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());VV(g)?l(g):l()}catch(g){u(g)}else if(d!==null){const g=xm();g.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,g)):u(g)}else if(r.canceled){const g=this.appDelete_?cA():bV();u(g)}else{const g=AV();u(g)}};this.canceled_?n(!1,new Mc(!1,null,!0)):this.backoffId_=PV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&UV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mc{constructor(e,n,o){this.wasSuccessCode=e,this.connection=n,this.canceled=!!o}}function BV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function GV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function FV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function HV(t,e,n,o,r,l,u=!0){const d=fA(t.urlParams),g=t.url+d,m=Object.assign({},t.headers);return qV(m,e),BV(m,n),GV(m,l),FV(m,o),new OV(g,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function KV(...t){const e=zV();if(e!==void 0){const n=new e;for(let o=0;o<t.length;o++)n.append(t[o]);return n.getBlob()}else{if(Rm())return new Blob(t);throw new It(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function YV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t){if(typeof atob>"u")throw NV("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qh{constructor(e,n){this.data=e,this.contentType=n||null}}function $V(t,e){switch(t){case ki.RAW:return new Qh(dA(e));case ki.BASE64:case ki.BASE64URL:return new Qh(hA(t,e));case ki.DATA_URL:return new Qh(XV(e),jV(e))}throw xm()}function dA(t){const e=[];for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);if(o<=127)e.push(o);else if(o<=2047)e.push(192|o>>6,128|o&63);else if((o&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const l=o,u=t.charCodeAt(++n);o=65536|(l&1023)<<10|u&1023,e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|o&63)}else(o&64512)===56320?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|o&63)}return new Uint8Array(e)}function QV(t){let e;try{e=decodeURIComponent(t)}catch{throw Dl(ki.DATA_URL,"Malformed data URL.")}return dA(e)}function hA(t,e){switch(t){case ki.BASE64:{const r=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(r||l)throw Dl(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ki.BASE64URL:{const r=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(r||l)throw Dl(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=JV(e)}catch(r){throw r.message.includes("polyfill")?r:Dl(t,"Invalid character found")}const o=new Uint8Array(n.length);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return o}class pA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Dl(ki.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=n[1]||null;o!=null&&(this.base64=WV(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=e.substring(e.indexOf(",")+1)}}function XV(t){const e=new pA(t);return e.base64?hA(ki.BASE64,e.rest):QV(e.rest)}function jV(t){return new pA(t).contentType}function WV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){let o=0,r="";MT(e)?(this.data_=e,o=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),o=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),o=e.length),this.size_=o,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(MT(this.data_)){const o=this.data_,r=YV(o,e,n);return r===null?null:new us(r)}else{const o=new Uint8Array(this.data_.buffer,e,n-e);return new us(o,!0)}}static getBlob(...e){if(Rm()){const n=e.map(o=>o instanceof us?o.data_:o);return new us(KV.apply(null,n))}else{const n=e.map(u=>wm(u)?$V(ki.RAW,u).data:u.data_);let o=0;n.forEach(u=>{o+=u.byteLength});const r=new Uint8Array(o);let l=0;return n.forEach(u=>{for(let d=0;d<u.length;d++)r[l++]=u[d]}),new us(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){let e;try{e=JSON.parse(t)}catch{return null}return kV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ek(t,e){const n=e.split("/").filter(o=>o.length>0).join("/");return t.length===0?n:t+"/"+n}function gA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t,e){return e}class Cn{constructor(e,n,o,r){this.server=e,this.local=n||e,this.writable=!!o,this.xform=r||tk}}let Dc=null;function nk(t){return!wm(t)||t.length<2?t:gA(t)}function yA(){if(Dc)return Dc;const t=[];t.push(new Cn("bucket")),t.push(new Cn("generation")),t.push(new Cn("metageneration")),t.push(new Cn("name","fullPath",!0));function e(l,u){return nk(u)}const n=new Cn("name");n.xform=e,t.push(n);function o(l,u){return u!==void 0?Number(u):u}const r=new Cn("size");return r.xform=o,t.push(r),t.push(new Cn("timeCreated")),t.push(new Cn("updated")),t.push(new Cn("md5Hash",null,!0)),t.push(new Cn("cacheControl",null,!0)),t.push(new Cn("contentDisposition",null,!0)),t.push(new Cn("contentEncoding",null,!0)),t.push(new Cn("contentLanguage",null,!0)),t.push(new Cn("contentType",null,!0)),t.push(new Cn("metadata","customMetadata",!0)),Dc=t,Dc}function ik(t,e){function n(){const o=t.bucket,r=t.fullPath,l=new Xn(o,r);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:n})}function ok(t,e,n){const o={};o.type="file";const r=n.length;for(let l=0;l<r;l++){const u=n[l];o[u.local]=u.xform(o,e[u.server])}return ik(o,t),o}function vA(t,e,n){const o=mA(e);return o===null?null:ok(t,o,n)}function sk(t,e,n,o){const r=mA(e);if(r===null||!wm(r.downloadTokens))return null;const l=r.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(m=>{const _=t.bucket,E=t.fullPath,S="/b/"+u(_)+"/o/"+u(E),x=Im(S,n,o),D=fA({alt:"media",token:m});return x+D})[0]}function rk(t,e){const n={},o=e.length;for(let r=0;r<o;r++){const l=e[r];l.writable&&(n[l.server]=t[l.local])}return JSON.stringify(n)}class _A{constructor(e,n,o,r){this.url=e,this.method=n,this.handler=o,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t){if(!t)throw xm()}function ak(t,e){function n(o,r){const l=vA(t,r,e);return TA(l!==null),l}return n}function lk(t,e){function n(o,r){const l=vA(t,r,e);return TA(l!==null),sk(l,r,t.host,t._protocol)}return n}function EA(t){function e(n,o){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=EV():r=TV():n.getStatus()===402?r=_V(t.bucket):n.getStatus()===403?r=SV(t.path):r=o,r.status=n.getStatus(),r.serverResponse=o.serverResponse,r}return e}function uk(t){const e=EA(t);function n(o,r){let l=e(o,r);return o.getStatus()===404&&(l=vV(t.path)),l.serverResponse=r.serverResponse,l}return n}function ck(t,e,n){const o=e.fullServerUrl(),r=Im(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,d=new _A(r,l,lk(t,n),u);return d.errorHandler=uk(e),d}function fk(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function dk(t,e,n){const o=Object.assign({},n);return o.fullPath=t.path,o.size=e.size(),o.contentType||(o.contentType=fk(null,e)),o}function hk(t,e,n,o,r){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let $="";for(let Z=0;Z<2;Z++)$=$+Math.random().toString().slice(2);return $}const g=d();u["Content-Type"]="multipart/related; boundary="+g;const m=dk(e,o,r),_=rk(m,n),E="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+g+`\r
Content-Type: `+m.contentType+`\r
\r
`,S=`\r
--`+g+"--",x=us.getBlob(E,o,S);if(x===null)throw RV();const D={name:m.fullPath},V=Im(l,t.host,t._protocol),P="POST",H=t.maxUploadRetryTime,j=new _A(V,P,ak(t,n),H);return j.urlParams=D,j.headers=u,j.body=x.uploadData(),j.errorHandler=EA(e),j}class pk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=nr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=nr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,o,r){if(this.sent_)throw Al("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const l in r)r.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,r[l].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Al("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Al("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Al("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Al("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class mk extends pk{initXhr(){this.xhr_.responseType="text"}}function SA(){return new mk}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n){this._service=e,n instanceof Xn?this._location=n:this._location=Xn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new rr(e,n)}get root(){const e=new Xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gA(this._location.path)}get storage(){return this._service}get parent(){const e=ZV(this._location.path);if(e===null)return null;const n=new Xn(this._location.bucket,e);return new rr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw MV(e)}}function gk(t,e,n){t._throwIfRoot("uploadBytes");const o=hk(t.storage,t._location,yA(),new us(e,!0),n);return t.storage.makeRequestWithTokens(o,SA).then(r=>({metadata:r,ref:t}))}function yk(t){t._throwIfRoot("getDownloadURL");const e=ck(t.storage,t._location,yA());return t.storage.makeRequestWithTokens(e,SA).then(n=>{if(n===null)throw IV();return n})}function vk(t,e){const n=ek(t._location.path,e),o=new Xn(t._location.bucket,n);return new rr(t.storage,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(t){return/^[A-Za-z]+:\/\//.test(t)}function Tk(t,e){return new rr(t,e)}function AA(t,e){if(t instanceof Nm){const n=t;if(n._bucket==null)throw wV();const o=new rr(n,n._bucket);return e!=null?AA(o,e):o}else return e!==void 0?vk(t,e):t}function Ek(t,e){if(e&&_k(e)){if(t instanceof Nm)return Tk(t,e);throw Up("To use ref(service, url), the first argument must be a Storage instance.")}else return AA(t,e)}function PT(t,e){const n=e==null?void 0:e[uA];return n==null?null:Xn.makeFromBucketSpec(n,t)}function Sk(t,e,n,o={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=o;r&&(t._overrideAuthToken=typeof r=="string"?r:LE(r,t.app.options.projectId))}class Nm{constructor(e,n,o,r,l){this.app=e,this._authProvider=n,this._appCheckProvider=o,this._url=r,this._firebaseVersion=l,this._bucket=null,this._host=lA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gV,this._maxUploadRetryTime=yV,this._requests=new Set,r!=null?this._bucket=Xn.makeFromBucketSpec(r,this._host):this._bucket=PT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xn.makeFromBucketSpec(this._url,e):this._bucket=PT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rr(this,e)}_makeRequest(e,n,o,r,l=!0){if(this._deleted)return new DV(cA());{const u=HV(e,this._appId,o,r,n,this._firebaseVersion,l);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[o,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,o,r).getPromise()}}const UT="@firebase/storage",VT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="storage";function Ak(t,e,n){return t=jn(t),gk(t,e,n)}function bk(t){return t=jn(t),yk(t)}function Ck(t,e){return t=jn(t),Ek(t,e)}function xk(t=KE(),e){t=jn(t);const o=FE(t,bA).getImmediate({identifier:e}),r=VE("storage");return r&&wk(o,...r),o}function wk(t,e,n,o={}){Sk(t,e,n,o)}function Rk(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Nm(n,o,r,e,HE)}function Ik(){kl(new sa(bA,Rk,"PUBLIC").setMultipleInstances(!0)),ps(UT,VT,""),ps(UT,VT,"esm2017")}Ik();const Nk={apiKey:"AIzaSyBvTHMQKOJ3wc3iz-MiOYCBG9j2o3oDOGc",authDomain:"educators-academy.firebaseapp.com",projectId:"educators-academy",storageBucket:"educators-academy.firebasestorage.app",messagingSenderId:"827874514960",appId:"1:827874514960:web:4ab3a29c04b447b413d295",measurementId:"G-TDZ7DD1HQL"},CA=zE(Nk),$n=XU(CA),kT=xk(CA),Xh=t=>JSON.parse(JSON.stringify(t,(e,n)=>n===void 0?null:n)),vi={async uploadFile(t,e){if(!kT)throw new Error("Firebase Storage is not initialized properly.");const n=t.name.split(".").pop(),o=`${Date.now()}_${Math.random().toString(36).substr(2,5)}.${n}`,r=Ck(kT,`${e}/${o}`),l=await Ak(r,t);return await bk(l.ref)},async saveGrades(t){if(localStorage.setItem("academy_grades",JSON.stringify(t)),$n)try{const e=Jh($n);t.forEach(n=>{const o=zh($n,"grades",n.id);e.set(o,Xh(n))}),await e.commit()}catch(e){console.error("Firebase Save Grades Error:",e)}},async saveTeachers(t){if(localStorage.setItem("academy_teachers",JSON.stringify(t)),$n)try{const e=Jh($n);t.forEach(n=>{const o=zh($n,"teachers",n.id);e.set(o,Xh(n))}),await e.commit()}catch(e){console.error("Firebase Save Teachers Error:",e)}},async saveCourses(t){if(localStorage.setItem("academy_courses",JSON.stringify(t)),$n)try{const e=Jh($n);t.forEach(n=>{const o=zh($n,"courses",n.id);e.set(o,Xh(n))}),await e.commit()}catch(e){console.error("Firebase Save Courses Error:",e)}},async loadData(){const t={grades:JSON.parse(localStorage.getItem("academy_grades")||"null"),teachers:JSON.parse(localStorage.getItem("academy_teachers")||"null"),courses:JSON.parse(localStorage.getItem("academy_courses")||"null")};if($n)try{const[e,n,o]=await Promise.all([Kh(Hh($n,"grades")),Kh(Hh($n,"teachers")),Kh(Hh($n,"courses"))]),r={grades:e.docs.map(l=>l.data()),teachers:n.docs.map(l=>l.data()),courses:o.docs.map(l=>l.data())};if(r.grades.length>0||r.teachers.length>0||r.courses.length>0)return localStorage.setItem("academy_grades",JSON.stringify(r.grades)),localStorage.setItem("academy_teachers",JSON.stringify(r.teachers)),localStorage.setItem("academy_courses",JSON.stringify(r.courses)),r}catch(e){console.error("Firebase Load Error:",e)}return t}};var Mk={};const Dk=({grades:t,setGrades:e,teachers:n,setTeachers:o,courses:r,setCourses:l,onLogout:u})=>{var zt;const[d,g]=Ae.useState("ai-schedule"),[m,_]=Ae.useState("list"),[E,S]=Ae.useState("list"),[x,D]=Ae.useState(null),[V,P]=Ae.useState(null),[H,j]=Ae.useState(null),[$,Z]=Ae.useState(!1),[Y,re]=Ae.useState(""),[M,R]=Ae.useState(()=>{const G=localStorage.getItem("academy_stage_subjects");return G?JSON.parse(G):dC}),[N,k]=Ae.useState(""),[L,q]=Ae.useState(""),[U,Oe]=Ae.useState(""),[je,te]=Ae.useState(""),[fe,ye]=Ae.useState(((zt=t[0])==null?void 0:zt.id)||""),[we,Re]=Ae.useState(!1),[B,ne]=Ae.useState(!1),[ae,ge]=Ae.useState(localStorage.getItem("google_sheet_webhook_url")||""),[pe,De]=Ae.useState({name:"",subject:"",teachingHours:"",availability:"",bio:"",imageUrl:"",grades:[],stages:[]}),[qe,Vt]=Ae.useState(null),[yt,Ln]=Ae.useState(null),[Wn,fi]=Ae.useState(!1),[qi,Rn]=Ae.useState(""),[ot,On]=Ae.useState({title:"",description:"",videoUrl:"",thumbnailUrl:"",gradeId:""}),[Eo,Ss]=Ae.useState(null),[As,So]=Ae.useState(!1),[bs,Xl]=Ae.useState("info"),Ao=Array.from(new Set(M.flatMap(G=>G.subjects))).sort();Ae.useEffect(()=>{(async()=>{if(window.aistudio){const ce=await window.aistudio.getKey();ce&&(re(ce),Z(!0))}})(),vi.saveGrades(t),vi.saveTeachers(n),vi.saveCourses(r),localStorage.setItem("academy_stage_subjects",JSON.stringify(M))},[t,n,r,M]),Ae.useEffect(()=>{localStorage.setItem("google_sheet_webhook_url",ae)},[ae]);const kt=async()=>{if(window.aistudio){await window.aistudio.openSelectKey();const G=await window.aistudio.getKey();G&&(re(G),Z(!0),alert("    API !     ."))}},Cs=async G=>{var he,ve,Ee;const ce=typeof G=="string"?G:je;if(ce.trim()){Re(!0);try{const Ce=(await ME(ce,Y)).map(ft=>{const dt=t.filter(rt=>{var Kt;return(Kt=ft.grades)==null?void 0:Kt.some(_n=>rt.name.includes(_n)||_n.includes(rt.name)||rt.stage==="primary"&&_n.includes("")||rt.stage==="preparatory"&&_n.includes("")||rt.stage==="secondary"&&_n.includes(""))}).map(rt=>rt.id);return{...ft,id:ft.id||`t-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,whatsapp:Pl.phone,imageUrl:ft.imageUrl||`https://picsum.photos/seed/${Math.random()}/400`,grades:dt.length>0?dt:[]}});o(ft=>{const dt=[...ft];return Ce.forEach(rt=>{dt.find(Kt=>Kt.name===rt.name)||dt.push(rt)}),dt}),e(ft=>ft.map(dt=>{const rt=Ce.filter(Kt=>{var _n;return(_n=Kt.grades)==null?void 0:_n.includes(dt.id)}).map(Kt=>Kt.id);return rt.length>0?{...dt,teachers:Array.from(new Set([...dt.teachers,...rt]))}:dt})),alert(`   ${Ce.length}    !`),te(""),_("list")}catch(Me){console.error(Me),(he=Me.message)!=null&&he.includes("permission denied")||(ve=Me.message)!=null&&ve.includes("Requested entity was not found")?(alert("    :     '   '    ."),(Ee=Me.message)!=null&&Ee.includes("Requested entity was not found")&&Z(!1)):alert("     ")}finally{Re(!1)}}},Nt=async G=>{G.preventDefault();const ce=Wn?qi:pe.subject;if(!pe.name||!ce)return alert("   ");if(!pe.stages||pe.stages.length===0)return alert("     ");Re(!0);try{let he=pe.imageUrl||`https://picsum.photos/seed/${Date.now()}/400`;qe&&(he=await vi.uploadFile(qe,"teachers"));const ve=`t-${Date.now()}`,Ee={id:ve,name:pe.name,subject:ce,imageUrl:he,whatsapp:Pl.phone,teachingHours:pe.teachingHours||"",availability:pe.availability||"",bio:pe.bio||"",grades:pe.grades||[],stages:pe.stages||[]};o(Me=>[...Me,Ee]),pe.grades&&pe.grades.length>0&&e(Me=>Me.map(Ce=>{var ft;return(ft=pe.grades)!=null&&ft.includes(Ce.id)?{...Ce,teachers:Array.from(new Set([...Ce.teachers,ve]))}:Ce})),alert("      !"),_("list"),Lt()}catch(he){console.error(he),alert("    ")}finally{Re(!1)}},Lt=()=>{De({name:"",subject:"",bio:"",availability:"",teachingHours:"",imageUrl:"",grades:[],stages:[]}),Vt(null),fi(!1),Rn("")},di=async()=>{var G,ce,he,ve,Ee,Me;if(!ot.title)return alert("    ");if(!$&&confirm("   4K  API .    ")){await kt();return}ne(!0);try{const dt=(he=(ce=(G=(await new ff({apiKey:Mk.API_KEY}).models.generateContent({model:"gemini-3-pro-image-preview",contents:{parts:[{text:`High-end 4K cinematic educational course thumbnail for a subject titled "${ot.title}". 
            Atmosphere: Professional, prestigious, elite academic. 
            Visuals: Dramatic studio lighting, shallow depth of field, sharp textures of books and polished wood, 
            luxurious gold and deep navy blue color palette. 
            Style: Inspirational and modern, suitable for Educators Academy.`}]},config:{imageConfig:{aspectRatio:"16:9",imageSize:"4K"}}})).candidates)==null?void 0:G[0])==null?void 0:ce.content)==null?void 0:he.parts.find(rt=>rt.inlineData);if(dt!=null&&dt.inlineData){const rt=dt.inlineData.data;On(Kt=>({...Kt,thumbnailUrl:`data:image/png;base64,${rt}`}))}else alert("          .")}catch(Ce){console.error(Ce),(ve=Ce.message)!=null&&ve.includes("permission denied")||(Ee=Ce.message)!=null&&Ee.includes("Requested entity was not found")?(alert("  :      API    GCP   ."),(Me=Ce.message)!=null&&Me.includes("Requested entity was not found")&&Z(!1)):alert("    .")}finally{ne(!1)}},fr=async G=>{if(G.preventDefault(),!ot.title||!ot.gradeId)return alert("    ");Re(!0);try{let ce=ot.thumbnailUrl||"";Eo&&(ce=await vi.uploadFile(Eo,"courses/thumbs"));const he=t.find(Me=>Me.id===ot.gradeId),ve=`c-${Date.now()}`,Ee={id:ve,title:ot.title,description:ot.description||"     ",thumbnailUrl:ce||`https://picsum.photos/seed/${ve}/800/400`,stage:he?he.stage:"primary",grade:he?he.name:"",gradeId:ot.gradeId,media:ot.videoUrl?[{id:`m-${Date.now()}`,title:" ",url:ot.videoUrl,type:"video"}]:[]};l(Me=>[...Me,Ee]),e(Me=>Me.map(Ce=>Ce.id===ot.gradeId?{...Ce,courses:Array.from(new Set([...Ce.courses,ve]))}:Ce)),alert("   !"),S("list"),On({title:"",description:"",videoUrl:"",thumbnailUrl:"",gradeId:""}),Ss(null)}catch(ce){console.error(ce)}finally{Re(!1)}},xs=G=>{De(ce=>{const he=ce.stages||[],ve=he.includes(G)?he.filter(Ce=>Ce!==G):[...he,G],Ee=t.filter(Ce=>ve.includes(Ce.stage)).map(Ce=>Ce.id),Me=(ce.grades||[]).filter(Ce=>Ee.includes(Ce));return{...ce,stages:ve,grades:Me}})},_a=G=>{De(ce=>{const he=ce.grades||[],ve=he.includes(G)?he.filter(Ee=>Ee!==G):[...he,G];return{...ce,grades:ve}})},Fi=async G=>{Re(!0);try{let ce=G.imageUrl;yt&&(ce=await vi.uploadFile(yt,"teachers"));const he={...G,imageUrl:ce};o(ve=>ve.map(Ee=>Ee.id===he.id?he:Ee)),alert("    !"),D(null),Ln(null)}catch(ce){console.error(ce),alert("    ")}finally{Re(!1)}},bi=async()=>{if(L.trim()){Re(!0);try{const G=t.find(ve=>ve.id===U),ce=G?`[CONTEXT: Grade=${G.name}, Stage=${G.stage}] `:"",he=await dp(`${ce}${L}`,Y);e(ve=>ve.map(Ee=>Ee.id===U?{...Ee,schedule:he}:Ee)),alert("   !       "),q("")}catch(G){alert("   .     ."),console.error(G)}finally{Re(!1)}}};return b.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-10",dir:"rtl",children:[!$&&b.jsxs("div",{className:"mb-8 bg-orange-50 border-2 border-orange-200 p-6 rounded-[2rem] flex flex-col md:flex-row items-center justify-between gap-4 animate-in fade-in slide-in-from-top duration-500",children:[b.jsxs("div",{className:"flex items-center gap-4 text-orange-800",children:[b.jsx("span",{className:"text-4xl",children:""}),b.jsxs("div",{children:[b.jsx("p",{className:"font-black text-lg",children:"    (Gemini Pro) "}),b.jsx("p",{className:"font-bold opacity-75",children:"   API      4K   ."})]})]}),b.jsx("button",{onClick:kt,className:"bg-orange-500 text-white px-8 py-3 rounded-2xl font-black hover:bg-orange-600 transition-all shadow-xl shadow-orange-500/20 whitespace-nowrap active:scale-95",children:"   "})]}),b.jsx(DE,{grades:t,apiKey:Y,onUpdateSchedule:async(G,ce)=>{const he=t.find(Me=>Me.id===G),ve=he?` ${he.name} (${he.stage})`:"",Ee=await dp(`${ve} ${ce}`,Y);e(Me=>Me.map(Ce=>Ce.id===G?{...Ce,schedule:Ee}:Ce))},onAddTeacher:Cs}),b.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-10 gap-6 text-right",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("img",{src:Gc,alt:"Logo",className:"w-16 h-auto"}),b.jsx("h1",{className:"text-4xl font-black text-[#0a192f]",children:"  "})]}),b.jsxs("div",{className:"flex bg-white rounded-2xl p-1 shadow-lg border overflow-x-auto max-w-full",children:[[{id:"ai-schedule",label:" "},{id:"teachers",label:" "},{id:"subjects",label:" "},{id:"courses",label:" "},{id:"settings",label:" "}].map(G=>b.jsx("button",{onClick:()=>g(G.id),className:`px-5 py-2.5 rounded-xl font-bold transition-all whitespace-nowrap ${d===G.id?"bg-[#0a192f] text-white":"text-gray-500 hover:bg-gray-50"}`,children:G.label},G.id)),b.jsx("button",{onClick:u,className:"px-5 py-2.5 rounded-xl font-bold text-red-500 hover:bg-red-50",children:""})]})]}),d==="ai-schedule"&&b.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl p-10 animate-in fade-in border border-gray-100",children:[b.jsx("h2",{className:"text-3xl font-black mb-8 text-[#0a192f]",children:"    "}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[b.jsxs("div",{className:"md:col-span-1",children:[b.jsx("label",{className:"block text-sm font-black text-gray-400 mb-3",children:"  :"}),b.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:t.map(G=>b.jsx("button",{onClick:()=>Oe(G.id),className:`w-full text-right p-4 rounded-2xl font-bold transition-all border-2 ${U===G.id?"bg-[#0a192f] text-white border-[#0a192f]":"bg-gray-50 text-gray-500 border-transparent hover:border-gray-200"}`,children:G.name},G.id))})]}),b.jsxs("div",{className:"md:col-span-2 space-y-6",children:[b.jsx("textarea",{value:L,onChange:G=>q(G.target.value),className:"w-full border-2 rounded-[2rem] p-8 h-64 outline-none font-bold text-xl leading-relaxed shadow-inner bg-gray-50 focus:border-[#10b981] transition-all",placeholder:":  4     6  ..."}),b.jsx("button",{onClick:bi,disabled:we,className:"w-full bg-[#0a192f] text-white py-6 rounded-[2.5rem] font-black text-2xl shadow-2xl hover:bg-[#10b981] transition-all active:scale-95 flex items-center justify-center gap-4",children:we?b.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"}):"   "})]})]})]}),d==="teachers"&&b.jsxs("div",{className:"animate-in fade-in text-right",children:[b.jsxs("div",{className:"flex justify-between items-center mb-8 border-b pb-4",children:[b.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"  "}),b.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[b.jsx("button",{onClick:()=>_("list"),className:`px-4 py-2 rounded-lg font-bold ${m==="list"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:""}),b.jsx("button",{onClick:()=>_("add"),className:`px-4 py-2 rounded-lg font-bold ${m==="add"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:" "}),b.jsx("button",{onClick:()=>_("ai-add"),className:`px-4 py-2 rounded-lg font-bold ${m==="ai-add"?"bg-white shadow text-[#10b981]":"text-gray-400"}`,children:"  "})]})]}),m==="ai-add"&&b.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-xl space-y-8 max-w-2xl mx-auto border-t-8 border-[#10b981]",children:[b.jsx("h3",{className:"text-2xl font-black text-[#0a192f] text-center",children:"    "}),b.jsx("textarea",{value:je,onChange:G=>te(G.target.value),className:"w-full border-2 rounded-2xl p-6 h-64 focus:border-[#10b981] outline-none font-bold text-lg shadow-inner bg-gray-50",placeholder:"    (:     1  2 )..."}),b.jsx("button",{onClick:()=>Cs(),disabled:we||!je.trim(),className:"w-full bg-[#0a192f] text-white py-5 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all active:scale-95",children:we?"  ...":"   "})]}),m==="add"&&b.jsxs("form",{onSubmit:Nt,className:"bg-white p-8 rounded-[2.5rem] shadow-xl space-y-8 max-w-3xl mx-auto border-t-8 border-[#10b981]",children:[b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),b.jsx("input",{required:!0,placeholder:"",value:pe.name,onChange:G=>De({...pe,name:G.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold outline-none focus:border-[#10b981]"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),Wn?b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{autoFocus:!0,required:!0,placeholder:" ",value:qi,onChange:G=>Rn(G.target.value),className:"flex-1 border-2 rounded-xl p-4 font-bold outline-none border-orange-500"}),b.jsx("button",{type:"button",onClick:()=>fi(!1),className:"bg-gray-100 px-4 rounded-xl text-gray-400 font-bold",children:""})]}):b.jsxs("select",{required:!0,value:pe.subject,onChange:G=>G.target.value==="ADD_NEW"?fi(!0):De({...pe,subject:G.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white",children:[b.jsx("option",{value:"",children:" ..."}),Ao.map(G=>b.jsx("option",{value:G,children:G},G)),b.jsx("option",{value:"ADD_NEW",className:"text-orange-500 font-black",children:"+  ..."})]})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-500 mb-4",children:"   :"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:cs.map(G=>{var ce,he,ve,Ee,Me;return b.jsxs("div",{className:`p-4 rounded-2xl border-2 transition-all cursor-pointer ${(ce=pe.stages)!=null&&ce.includes(G.id)?"bg-[#10b981]/5 border-[#10b981]":"bg-gray-50 border-gray-100"}`,onClick:()=>xs(G.id),children:[b.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[b.jsx("span",{className:"text-xl",children:G.icon}),b.jsx("span",{className:`font-black ${(he=pe.stages)!=null&&he.includes(G.id)?"text-[#10b981]":"text-gray-400"}`,children:G.name}),b.jsx("div",{className:`mr-auto w-5 h-5 rounded-full border-2 flex items-center justify-center ${(ve=pe.stages)!=null&&ve.includes(G.id)?"border-[#10b981] bg-[#10b981]":"border-gray-300"}`,children:((Ee=pe.stages)==null?void 0:Ee.includes(G.id))&&b.jsx("span",{className:"text-white text-[10px]",children:""})})]}),((Me=pe.stages)==null?void 0:Me.includes(G.id))&&b.jsx("div",{className:"space-y-1 mt-2 animate-in fade-in zoom-in-95",onClick:Ce=>Ce.stopPropagation(),children:t.filter(Ce=>Ce.stage===G.id).map(Ce=>{var ft;return b.jsx("div",{onClick:()=>_a(Ce.id),className:`flex items-center gap-2 p-2 rounded-lg text-xs font-bold transition-all ${(ft=pe.grades)!=null&&ft.includes(Ce.id)?"bg-[#10b981] text-white":"bg-white border text-gray-400"}`,children:Ce.name},Ce.id)})})]},G.id)})})]}),b.jsxs("div",{className:"border-2 border-dashed rounded-2xl p-8 text-center bg-gray-50 hover:bg-gray-100 transition-all cursor-pointer relative group",children:[b.jsx("input",{type:"file",accept:"image/*",onChange:G=>{var ce;return Vt(((ce=G.target.files)==null?void 0:ce[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),b.jsxs("div",{className:"flex flex-col items-center",children:[b.jsx("span",{className:"text-4xl mb-2",children:""}),b.jsx("p",{className:"text-gray-400 font-bold",children:qe?`  : ${qe.name}`:"    "})]})]}),b.jsx("textarea",{placeholder:" ...",value:pe.bio,onChange:G=>De({...pe,bio:G.target.value}),className:"w-full border-2 rounded-xl p-4 h-32 font-bold focus:border-[#10b981] outline-none"}),b.jsx("button",{disabled:we,className:"w-full bg-[#10b981] text-white py-5 rounded-2xl font-black text-xl shadow-xl shadow-emerald-500/20 active:scale-95 transition-all",children:we?" ...":"  "})]}),m==="list"&&b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(G=>{var ce;return b.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] shadow-md border border-gray-100 group hover:border-[#10b981] transition-all flex flex-col",children:[b.jsx("img",{src:G.imageUrl,className:"w-32 h-32 rounded-[2rem] object-cover mx-auto mb-4 border-4 border-gray-50 shadow-sm"}),b.jsx("h3",{className:"text-2xl font-black text-center text-[#0a192f]",children:G.name}),b.jsx("p",{className:"text-[#10b981] font-bold text-center mb-6",children:G.subject}),b.jsx("div",{className:"flex flex-wrap gap-1 justify-center mb-4",children:(ce=G.grades)==null?void 0:ce.map(he=>{const ve=t.find(Ee=>Ee.id===he);return ve?b.jsx("span",{className:"bg-gray-100 text-gray-600 text-[10px] px-2 py-1 rounded-full font-bold border border-gray-200",children:ve.name},he):null})}),b.jsxs("div",{className:"flex gap-2 mt-auto",children:[b.jsx("button",{onClick:()=>D(G),className:"flex-1 bg-gray-50 text-gray-600 py-3 rounded-xl font-bold hover:bg-[#10b981] hover:text-white transition-all",children:" "}),b.jsx("button",{onClick:()=>j(G),className:"bg-red-50 p-3 rounded-xl text-red-500 hover:bg-red-500 hover:text-white transition-all",children:""})]})]},G.id)})})]}),d==="courses"&&b.jsxs("div",{className:"animate-in fade-in text-right",children:[b.jsxs("div",{className:"flex justify-between items-center mb-8 border-b pb-4",children:[b.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"   "}),b.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:[b.jsx("button",{onClick:()=>S("list"),className:`px-4 py-2 rounded-lg font-bold ${E==="list"?"bg-white shadow text-[#f97316]":"text-gray-400"}`,children:""}),b.jsx("button",{onClick:()=>S("add"),className:`px-4 py-2 rounded-lg font-bold ${E==="add"?"bg-white shadow text-[#f97316]":"text-gray-400"}`,children:"  "})]})]}),E==="add"&&b.jsxs("form",{onSubmit:fr,className:"bg-white p-10 rounded-[2.5rem] shadow-xl space-y-8 max-w-2xl mx-auto border-t-8 border-[#f97316]",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),b.jsx("input",{required:!0,placeholder:" ",value:ot.title,onChange:G=>On({...ot,title:G.target.value}),className:"w-full border-2 rounded-2xl p-5 font-black text-2xl focus:border-[#f97316] outline-none"})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("button",{type:"button",onClick:di,disabled:B||!ot.title,className:"bg-[#0a192f] text-white p-5 rounded-2xl font-black flex items-center justify-center gap-3 hover:bg-black group transition-all active:scale-95 shadow-xl",children:[B?b.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):b.jsx("span",{className:"text-2xl group-hover:rotate-12 transition-transform",children:""}),B?"  4K...":"  4K"]}),b.jsxs("div",{className:"relative h-full",children:[b.jsx("input",{type:"file",accept:"image/*",onChange:G=>{var ce;return Ss(((ce=G.target.files)==null?void 0:ce[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),b.jsx("div",{className:"bg-orange-50 border-2 border-dashed border-orange-200 rounded-2xl p-5 text-center font-bold text-orange-600 h-full flex items-center justify-center",children:Eo?` ${Eo.name}`:"   "})]})]}),b.jsx("input",{type:"text",placeholder:"     ...",value:ot.thumbnailUrl,onChange:G=>On({...ot,thumbnailUrl:G.target.value}),className:"w-full bg-gray-50 border-2 border-gray-100 rounded-xl p-3 font-bold text-sm focus:border-[#f97316] outline-none text-left",dir:"ltr"}),ot.thumbnailUrl&&b.jsx("img",{src:ot.thumbnailUrl,className:"w-full h-56 object-cover rounded-[2rem] border-4 border-white shadow-xl animate-in zoom-in"})]}),b.jsxs("select",{required:!0,value:ot.gradeId,onChange:G=>On({...ot,gradeId:G.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white focus:border-[#f97316] outline-none",children:[b.jsx("option",{value:"",children:"  ..."}),t.map(G=>b.jsx("option",{value:G.id,children:G.name},G.id))]}),b.jsx("textarea",{placeholder:"  ...",value:ot.description,onChange:G=>On({...ot,description:G.target.value}),className:"w-full border-2 rounded-2xl p-4 h-32 font-bold focus:border-[#f97316] outline-none"}),b.jsx("button",{disabled:we,className:"w-full bg-[#f97316] text-white py-6 rounded-[2rem] font-black text-2xl shadow-2xl hover:bg-orange-600 transition-all active:scale-95 shadow-orange-500/20",children:we?" ...":"    "})]}),E==="list"&&b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(G=>b.jsxs("div",{className:"bg-white rounded-[3rem] shadow-xl border border-gray-100 overflow-hidden group flex flex-col hover:-translate-y-2 transition-all duration-500",children:[b.jsx("img",{src:G.thumbnailUrl,className:"w-full h-56 object-cover group-hover:scale-105 transition-transform duration-1000"}),b.jsxs("div",{className:"p-8 flex-1 flex flex-col",children:[b.jsx("h3",{className:"text-2xl font-black mb-2 text-[#0a192f]",children:G.title}),b.jsx("p",{className:"text-gray-400 font-bold text-sm mb-6",children:G.grade}),b.jsxs("div",{className:"flex gap-2 mt-auto",children:[b.jsx("button",{onClick:()=>P(G),className:"flex-1 bg-gray-50 text-[#0a192f] py-4 rounded-2xl font-black hover:bg-[#0a192f] hover:text-white transition-all shadow-sm",children:"  "}),b.jsx("button",{onClick:()=>{confirm("    ")&&l(ce=>ce.filter(he=>he.id!==G.id))},className:"bg-red-50 p-4 rounded-2xl text-red-500 hover:bg-red-500 hover:text-white transition-all",children:""})]})]})]},G.id))})]}),x&&b.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:b.jsxs("form",{onSubmit:G=>{G.preventDefault(),Fi(x)},className:"bg-white w-full max-w-4xl rounded-[2.5rem] p-8 md:p-12 shadow-2xl overflow-y-auto max-h-[90vh] animate-in zoom-in-95 border-t-8 border-[#10b981]",children:[b.jsxs("div",{className:"flex justify-between items-center mb-8",children:[b.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),b.jsx("button",{type:"button",onClick:()=>D(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 hover:bg-red-100 hover:text-red-500 transition-all font-black",children:""})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"text-center",children:[b.jsxs("div",{className:"relative inline-block group cursor-pointer",children:[b.jsx("img",{src:x.imageUrl,alt:x.name,className:"w-40 h-40 rounded-[2.5rem] object-cover border-4 border-[#10b981] shadow-xl group-hover:brightness-75 transition-all"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:b.jsx("span",{className:"text-white text-3xl",children:""})}),b.jsx("input",{type:"file",accept:"image/*",onChange:G=>{var ce;return Ln(((ce=G.target.files)==null?void 0:ce[0])||null)},className:"absolute inset-0 opacity-0 cursor-pointer"})]}),b.jsx("p",{className:"text-sm font-bold text-gray-400 mt-2",children:"  "}),b.jsx("input",{type:"text",placeholder:"    ...",value:x.imageUrl,onChange:G=>D({...x,imageUrl:G.target.value}),className:"w-full mt-4 bg-gray-50 border-2 border-gray-100 rounded-xl p-3 font-bold text-sm focus:border-[#10b981] outline-none text-center",dir:"ltr"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:":"}),b.jsx("input",{required:!0,value:x.name,onChange:G=>D({...x,name:G.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold outline-none focus:border-[#10b981]"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:":"}),b.jsx("select",{required:!0,value:x.subject,onChange:G=>D({...x,subject:G.target.value}),className:"w-full border-2 rounded-xl p-4 font-bold bg-white",children:Ao.map(G=>b.jsx("option",{value:G,children:G},G))})]})]}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:"  (Bio):"}),b.jsxs("div",{className:"relative",children:[b.jsx("textarea",{value:x.bio,onChange:G=>D({...x,bio:G.target.value}),className:"w-full border-2 rounded-xl p-4 h-40 font-bold focus:border-[#10b981] outline-none resize-none"}),b.jsx("button",{type:"button",onClick:async()=>{if(!x.bio)return alert("       .");Re(!0);try{await new Promise(G=>setTimeout(G,1500)),D({...x,bio:"   : "+x.bio})}catch(G){console.error(G),alert("      .    API.")}finally{Re(!1)}},className:"absolute bottom-4 left-4 bg-[#0a192f] text-white text-xs px-3 py-1.5 rounded-lg font-bold flex items-center gap-1 hover:bg-[#10b981] transition-all",disabled:we,children:we?"...":"  "})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),b.jsx("div",{className:"flex flex-wrap gap-2",children:cs.map(G=>{var ce;return b.jsx("button",{type:"button",onClick:()=>{const he=x.stages||[],ve=he.includes(G.id)?he.filter(Ee=>Ee!==G.id):[...he,G.id];D({...x,stages:ve})},className:`px-3 py-1.5 rounded-lg text-sm font-bold border-2 transition-all ${(ce=x.stages)!=null&&ce.includes(G.id)?"bg-[#10b981] text-white border-[#10b981]":"bg-gray-50 text-gray-400 border-gray-100"}`,children:G.name},G.id)})})]})]})]}),b.jsxs("div",{className:"mb-8 border-t pt-8",children:[b.jsx("h3",{className:"text-xl font-black text-[#0a192f] mb-6",children:"  (/) "}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:[t.filter(G=>{var ce;return(ce=x.stages)==null?void 0:ce.includes(G.stage)}).map(G=>{var he,ve;const ce=(he=x.grades)==null?void 0:he.includes(G.id);return b.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all ${ce?"border-[#10b981] bg-[#10b981]/5":"border-gray-100 bg-gray-50"}`,children:[b.jsx("div",{className:"flex items-center justify-between gap-2 mb-3",children:b.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[b.jsx("input",{type:"checkbox",checked:ce,onChange:()=>{const Ee=x.grades||[],Me=ce?Ee.filter(Ce=>Ce!==G.id):[...Ee,G.id];D({...x,grades:Me})},className:"w-5 h-5 accent-[#10b981] rounded-md"}),b.jsx("span",{className:`font-bold text-sm ${ce?"text-[#0a192f]":"text-gray-400"}`,children:G.name})]})}),ce&&b.jsx("div",{className:"animate-in slide-in-from-top-2",children:b.jsx("input",{type:"number",placeholder:" ",value:((ve=x.hourlyRates)==null?void 0:ve[G.id])||"",onChange:Ee=>{const Me={...x.hourlyRates||{}};Me[G.id]=parseFloat(Ee.target.value),D({...x,hourlyRates:Me})},className:"w-full border rounded-lg p-2 text-sm font-bold focus:border-[#10b981] outline-none"})})]},G.id)}),t.filter(G=>{var ce;return(ce=x.stages)==null?void 0:ce.includes(G.stage)}).length===0&&b.jsx("p",{className:"text-gray-400 font-bold col-span-full text-center py-4",children:"      ."})]})]}),b.jsx("button",{type:"submit",disabled:we,className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all shadow-xl active:scale-95 flex items-center justify-center gap-2",children:we?b.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):b.jsx("span",{children:"  "})})]})}),V&&b.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:b.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-[2.5rem] p-8 md:p-12 shadow-2xl overflow-y-auto max-h-[90vh] animate-in zoom-in-95 border-t-8 border-[#f97316]",children:[b.jsxs("div",{className:"flex justify-between items-center mb-8",children:[b.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),b.jsx("button",{onClick:()=>P(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 hover:bg-red-100 hover:text-red-500 transition-all font-black",children:""})]}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full overflow-hidden",children:[b.jsxs("div",{className:"lg:col-span-8 flex flex-col h-full overflow-hidden bg-gray-50 rounded-[2.5rem] p-8 border border-gray-100 shadow-inner",children:[b.jsxs("div",{className:"flex items-center justify-between mb-8",children:[b.jsx("h3",{className:"font-black text-2xl text-[#0a192f]",children:"   "}),b.jsxs("div",{className:"flex gap-3",children:[b.jsxs("button",{onClick:()=>{const G={id:`m-${Date.now()}`,title:" ",url:"",type:"video"};P({...V,media:[...V.media,G]})},className:"bg-blue-100 text-blue-600 px-6 py-3 rounded-2xl font-black hover:bg-blue-500 hover:text-white transition-all flex items-center gap-2",children:[b.jsx("span",{children:"+"})," "]}),b.jsxs("button",{onClick:()=>{const G={id:`m-${Date.now()}`,title:" PDF ",url:"",type:"pdf"};P({...V,media:[...V.media,G]})},className:"bg-red-100 text-red-500 px-6 py-3 rounded-2xl font-black hover:bg-red-500 hover:text-white transition-all flex items-center gap-2",children:[b.jsx("span",{children:"+"}),"  PDF"]}),b.jsxs("button",{onClick:()=>{const G={id:`m-${Date.now()}`,title:" ",url:"",type:"image"};P({...V,media:[...V.media,G]})},className:"bg-green-100 text-green-600 px-6 py-3 rounded-2xl font-black hover:bg-green-500 hover:text-white transition-all flex items-center gap-2",children:[b.jsx("span",{children:"+"})," "]})]})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-4 pr-2",children:[V.media.map((G,ce)=>b.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 flex items-start gap-4 group hover:border-[#f97316] transition-all",children:[b.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gray-50 flex items-center justify-center text-3xl shrink-0",children:G.type==="video"?"":G.type==="pdf"?"":""}),b.jsxs("div",{className:"flex-1 space-y-3",children:[b.jsx("input",{placeholder:"  (:  )",value:G.title,onChange:he=>{const ve=V.media.map(Ee=>Ee.id===G.id?{...Ee,title:he.target.value}:Ee);P({...V,media:ve})},className:"w-full bg-[#334155] text-white placeholder-gray-400 p-3 rounded-xl font-bold text-sm outline-none border border-transparent focus:border-orange-500 transition-all"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{placeholder:G.type==="video"?"  (YouTube/)":" ",value:G.url,onChange:he=>{const ve=V.media.map(Ee=>Ee.id===G.id?{...Ee,url:he.target.value}:Ee);P({...V,media:ve})},className:"flex-1 bg-[#334155] text-white placeholder-gray-400 p-3 rounded-xl font-bold text-xs outline-none border border-transparent focus:border-orange-500 transition-all text-left",dir:"ltr"}),b.jsxs("div",{className:"relative overflow-hidden",children:[b.jsx("button",{className:"bg-gray-200 text-gray-600 px-4 py-3 rounded-xl font-bold text-xs hover:bg-gray-300 transition-all whitespace-nowrap",children:"  "}),b.jsx("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:async he=>{var Ee;const ve=(Ee=he.target.files)==null?void 0:Ee[0];if(ve){Re(!0);try{const Me=await vi.uploadFile(ve,`courses/media/${V.id}`),Ce=V.media.map(ft=>ft.id===G.id?{...ft,url:Me}:ft);P({...V,media:Ce})}catch(Me){console.error(Me)}finally{Re(!1)}}}})]})]})]}),b.jsx("button",{onClick:()=>{confirm("  ")&&P({...V,media:V.media.filter(he=>he.id!==G.id)})},className:"w-10 h-10 bg-red-50 text-red-500 rounded-xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all self-center",children:""})]},G.id)),V.media.length===0&&b.jsx("div",{className:"text-center py-20 opacity-50",children:b.jsx("p",{className:"font-bold text-xl",children:"     "})})]})]}),b.jsxs("div",{className:"lg:col-span-4 space-y-6 overflow-y-auto custom-scrollbar",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),b.jsx("input",{value:V.title,onChange:G=>P({...V,title:G.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 font-black text-lg focus:ring-2 focus:ring-[#f97316] outline-none"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),b.jsx("textarea",{value:V.description,onChange:G=>P({...V,description:G.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 h-32 font-bold focus:ring-2 focus:ring-[#f97316] outline-none resize-none"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-400 mb-2",children:" :"}),b.jsx("select",{value:V.gradeId,onChange:G=>P({...V,gradeId:G.target.value}),className:"w-full bg-[#334155] text-white border-none rounded-xl p-4 font-bold focus:ring-2 focus:ring-[#f97316] outline-none",children:t.map(G=>b.jsx("option",{value:G.id,children:G.name},G.id))})]}),b.jsxs("div",{className:"relative group cursor-pointer rounded-[2rem] overflow-hidden border-4 border-[#334155] hover:border-[#f97316] transition-all shadow-xl h-48",children:[b.jsx("img",{src:V.thumbnailUrl,className:"w-full h-full object-cover"}),b.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-all",children:b.jsx("span",{className:"text-white font-black",children:"  "})}),b.jsx("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:async G=>{var he;const ce=(he=G.target.files)==null?void 0:he[0];if(ce){Re(!0);try{const ve=await vi.uploadFile(ce,"course-thumbnails");P({...V,thumbnailUrl:ve})}catch{alert("    ")}finally{Re(!1)}}}})]}),b.jsx("input",{type:"text",placeholder:"     ...",value:V.thumbnailUrl,onChange:G=>P({...V,thumbnailUrl:G.target.value}),className:"w-full bg-[#334155] text-white border-2 border-[#1e293b] rounded-xl p-3 font-bold text-sm focus:border-[#f97316] outline-none text-left",dir:"ltr"}),b.jsx("button",{onClick:async()=>{Re(!0);try{const G=r.map(he=>he.id===V.id?V:he),ce=r.find(he=>he.id===V.id);ce&&ce.gradeId!==V.gradeId&&e(he=>he.map(ve=>ve.id===ce.gradeId?{...ve,courses:ve.courses.filter(Ee=>Ee!==V.id)}:ve.id===V.gradeId?{...ve,courses:Array.from(new Set([...ve.courses,V.id]))}:ve)),l(G),alert("  ! "),P(null)}catch(G){console.error(G)}finally{Re(!1)}},disabled:we,className:"w-full bg-[#f97316] text-white py-4 rounded-2xl font-black text-xl hover:bg-orange-600 transition-all shadow-xl active:scale-95",children:we?" ...":"  "})]})]})]})}),H&&b.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-[#0a192f]/90 backdrop-blur-md animate-in fade-in",children:b.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 text-center shadow-2xl border-t-8 border-red-500 animate-in zoom-in-95",children:[b.jsx("div",{className:"text-6xl mb-6",children:""}),b.jsx("h3",{className:"text-3xl font-black text-[#0a192f] mb-4",children:" "}),b.jsxs("p",{className:"text-gray-500 text-lg mb-4 font-bold",children:["     ",b.jsxs("span",{className:"text-red-500",children:['"',H.name,'"']})," ."]}),b.jsx("div",{className:"bg-red-50 p-4 rounded-2xl mb-8 border border-red-100",children:b.jsx("p",{className:"text-red-600 font-black text-sm",children:"        ."})}),b.jsxs("div",{className:"flex flex-col gap-3",children:[b.jsx("button",{onClick:()=>{const G=H.id;o(ce=>ce.filter(he=>he.id!==G)),l(ce=>ce.filter(he=>he.teacherId!==G)),e(ce=>ce.map(he=>({...he,teachers:he.teachers.filter(ve=>ve!==G)}))),j(null),alert(`   "${H.name}" .`)},className:"w-full bg-red-500 text-white py-5 rounded-2xl font-black text-xl hover:bg-red-600 transition-all active:scale-95 shadow-xl shadow-red-500/20",children:"   "}),b.jsx("button",{onClick:()=>j(null),className:"w-full bg-gray-100 text-gray-500 py-4 rounded-2xl font-black text-lg hover:bg-gray-200 transition-all",children:" "})]})]})}),d==="subjects"&&b.jsxs("div",{className:"animate-in fade-in space-y-8",children:[b.jsxs("div",{className:"flex justify-between items-center border-b pb-6",children:[b.jsx("h2",{className:"text-3xl font-black text-[#0a192f]",children:"   "}),b.jsxs("div",{className:"bg-orange-50 text-orange-600 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2",children:[b.jsx("span",{children:""}),"        "]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:M.map((G,ce)=>{var he,ve;return b.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 shadow-xl border border-gray-100 hover:border-[#10b981] transition-all group",children:[b.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[b.jsx("div",{className:"w-16 h-16 rounded-2xl bg-[#0a192f] text-white flex items-center justify-center text-3xl shadow-lg group-hover:scale-110 transition-transform",children:(he=cs.find(Ee=>Ee.id===G.stage))==null?void 0:he.icon}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-2xl font-black text-[#0a192f]",children:(ve=cs.find(Ee=>Ee.id===G.stage))==null?void 0:ve.name}),b.jsxs("p",{className:"text-gray-400 font-bold text-sm",children:[G.subjects.length,"  "]})]})]}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[G.subjects.map((Ee,Me)=>b.jsx("span",{className:"bg-gray-50 text-gray-600 px-4 py-2 rounded-xl font-bold border hover:bg-[#10b981] hover:text-white hover:border-[#10b981] transition-colors cursor-default",children:Ee},Me)),b.jsx("button",{onClick:()=>{const Ee=prompt("   :");if(Ee){const Me=[...M];Me[ce].subjects.push(Ee),R(Me)}},className:"bg-gray-100 text-gray-400 px-4 py-2 rounded-xl font-bold border-2 border-dashed border-gray-200 hover:border-[#10b981] hover:text-[#10b981] transition-all",children:"+ "})]})]},ce)})})]}),d==="settings"&&b.jsx("div",{className:"animate-in fade-in max-w-2xl mx-auto space-y-8",children:b.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-xl border border-gray-100",children:[b.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[b.jsx("span",{className:"text-4xl",children:""}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-black text-[#0a192f]",children:"  "}),b.jsx("p",{className:"text-gray-400 font-bold text-sm",children:"   Google Sheets"})]})]}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-black text-gray-500 mb-2",children:" Webhook (Google Apps Script):"}),b.jsx("input",{type:"url",value:ae,onChange:G=>ge(G.target.value),placeholder:"https://script.google.com/macros/s/...",className:"w-full border-2 border-gray-200 rounded-xl p-4 font-bold text-left outline-none focus:border-[#10b981] transition-colors",dir:"ltr"}),b.jsxs("p",{className:"text-xs text-gray-400 mt-2 font-bold leading-relaxed",children:['*   Google Apps Script    Web App  "Anyone".',b.jsx("br",{}),"*     (     )       ."]})]}),b.jsxs("div",{className:"bg-blue-50 p-6 rounded-2xl border border-blue-100",children:[b.jsx("h4",{className:"font-black text-blue-800 mb-2 text-sm",children:" :"}),b.jsxs("ol",{className:"list-decimal list-inside text-sm text-blue-700 space-y-1 font-bold",children:[b.jsx("li",{children:"   ."}),b.jsxs("li",{children:["  Extensions ",">"," Apps Script."]}),b.jsxs("li",{children:["     ",b.jsx("code",{children:"sheetService.ts"}),"."]}),b.jsxs("li",{children:[" Deploy ",">"," New Deployment."]}),b.jsx("li",{children:" Web app   Access: Anyone."}),b.jsx("li",{children:"    ."})]})]}),b.jsx("div",{className:"flex gap-4 pt-4",children:b.jsx("button",{onClick:()=>{if(!ae)return alert("   ");alert("   !     .")},className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black hover:bg-[#10b981] transition-all shadow-xl active:scale-95",children:"  "})})]})]})})]})},Pk=({teachers:t,onBack:e})=>{const[n,o]=Ae.useState("all"),[r,l]=Ae.useState(""),[u,d]=Ae.useState(null),g=t.filter(m=>{var S;const _=n==="all"||((S=m.stages)==null?void 0:S.includes(n)),E=m.name.toLowerCase().includes(r.toLowerCase())||m.subject.toLowerCase().includes(r.toLowerCase());return _&&E});return b.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[u&&b.jsx(OT,{targetName:u,type:"",onClose:()=>d(null)}),b.jsxs("button",{onClick:e,className:"mb-8 text-gray-400 hover:text-[#0a192f] flex items-center gap-3 font-black text-lg transition-colors group",children:[b.jsx("span",{className:"bg-white p-3 rounded-2xl shadow-sm group-hover:-translate-x-2 transition-transform",children:""}),"  "]}),b.jsxs("div",{className:"text-center mb-16",children:[b.jsx("h1",{className:"text-5xl font-black text-[#0a192f] mb-4",children:"  "}),b.jsx("p",{className:"text-gray-500 text-xl font-medium",children:"      "})]}),b.jsxs("div",{className:"flex flex-col items-center gap-8 mb-16",children:[b.jsxs("div",{className:"relative w-full max-w-2xl group",children:[b.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-2xl group-focus-within:scale-110 transition-transform",children:""}),b.jsx("input",{type:"text",value:r,onChange:m=>l(m.target.value),placeholder:"     ...",className:"w-full bg-white border-2 border-gray-100 rounded-[2rem] py-6 pr-16 pl-8 text-xl font-bold shadow-xl shadow-gray-200/20 focus:border-[#10b981] focus:ring-4 focus:ring-[#10b981]/5 outline-none transition-all placeholder:text-gray-300"})]}),b.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[b.jsx("button",{onClick:()=>o("all"),className:`px-8 py-3 rounded-2xl font-black transition-all ${n==="all"?"bg-[#0a192f] text-white shadow-xl scale-105":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100"}`,children:""}),cs.map(m=>b.jsxs("button",{onClick:()=>o(m.id),className:`px-8 py-3 rounded-2xl font-black transition-all flex items-center gap-2 ${n===m.id?"bg-[#10b981] text-white shadow-xl scale-105":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100"}`,children:[b.jsx("span",{children:m.icon})," ",m.name]},m.id))]})]}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:[g.map(m=>b.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 shadow-xl border border-gray-100 hover:border-[#10b981] hover:-translate-y-2 transition-all group flex flex-col h-full",children:[b.jsxs("div",{className:"relative mb-6",children:[b.jsx("img",{src:m.imageUrl,className:"w-32 h-32 rounded-[2rem] mx-auto border-4 border-gray-50 shadow-md group-hover:scale-105 transition-transform object-cover",alt:m.name}),b.jsx("div",{className:"absolute -bottom-2 right-1/2 translate-x-1/2 bg-[#10b981] text-white px-4 py-1 rounded-full text-xs font-black shadow-lg whitespace-nowrap",children:m.subject})]}),b.jsxs("div",{className:"text-center flex-1 flex flex-col",children:[b.jsx("h3",{className:"text-2xl font-black text-[#0a192f] mb-2",children:m.name}),b.jsx("p",{className:"text-gray-400 text-sm font-medium mb-6 line-clamp-3 flex-1",children:m.bio||"   ."}),b.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl text-right space-y-2 mb-6",children:[b.jsx("div",{className:"text-xs font-black text-gray-400",children:" :"}),b.jsx("div",{className:"text-sm font-bold text-[#0a192f]",children:m.availability})]}),b.jsx("button",{onClick:()=>d(m.name),className:"block w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black hover:bg-[#10b981] transition-all shadow-lg active:scale-95",children:" "})]})]},m.id)),g.length===0&&b.jsxs("div",{className:"col-span-full py-20 text-center",children:[b.jsx("div",{className:"text-6xl mb-4",children:""}),b.jsx("h3",{className:"text-2xl font-black text-gray-400",children:"      "}),b.jsx("button",{onClick:()=>{l(""),o("all")},className:"mt-4 text-[#10b981] font-black hover:underline",children:"  "})]})]})]})},Uk=()=>{var M;const[t,e]=Ae.useState("home"),[n,o]=Ae.useState(!1),[r,l]=Ae.useState(""),[u,d]=Ae.useState(""),[g,m]=Ae.useState(null),[_,E]=Ae.useState(null),[S,x]=Ae.useState(mC),[D,V]=Ae.useState(hC),[P,H]=Ae.useState(pC);Ae.useEffect(()=>{(async()=>{const N=await vi.loadData();if(N.grades&&N.grades.length>0&&x(N.grades),N.teachers&&N.teachers.length>0&&V(N.teachers),N.courses&&N.courses.length>0&&H(N.courses),window.aistudio){const k=await window.aistudio.getKey();k&&d(k)}})()},[]);const j=R=>{R.preventDefault(),r==="55"?o(!0):alert("   !")},$=R=>{m(R),e("stages")},Z=R=>{const N=S.find(k=>k.id===R);N&&(E(N),e("grade"))},Y=async(R,N)=>{try{const k=await dp(N,u),L=S.map(q=>q.id===R?{...q,schedule:k}:q);x(L),await vi.saveGrades(L)}catch(k){console.error("Voice Schedule Error:",k)}},re=async R=>{try{const N=await ME(R,u);if(N.length>0){const k=N.map(q=>({...q,id:q.id||`t-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,imageUrl:q.imageUrl||`https://ui-avatars.com/api/?name=${encodeURIComponent(q.name||"Teacher")}&background=random`})),L=[...D,...k];V(L),await vi.saveTeachers(L)}}catch(N){console.error("Voice Teacher Add Error:",N)}};return b.jsxs("div",{className:"min-h-screen pb-20 bg-gray-50 selection:bg-[#10b981] selection:text-white",children:[b.jsx(gC,{onNavigate:R=>{e(R),m(null)},isAdmin:n}),n&&b.jsx(DE,{onUpdateSchedule:Y,onAddTeacher:re,grades:S,apiKey:u}),t==="home"&&b.jsxs("main",{children:[b.jsxs("section",{className:"relative bg-[#0a192f] text-white py-24 md:py-32 overflow-hidden",children:[b.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10 flex flex-col items-center text-center",children:[b.jsx("div",{className:"mb-10 animate-in fade-in zoom-in duration-1000",children:b.jsx("img",{src:Gc,alt:"Logo",className:"w-48 md:w-64 h-auto drop-shadow-[0_0_30px_rgba(16,185,129,0.3)] mx-auto"})}),b.jsx("div",{className:"inline-block bg-[#10b981]/20 border border-[#10b981]/30 text-[#10b981] px-6 py-2 rounded-full font-black text-sm mb-8 animate-bounce",children:"     2025"}),b.jsxs("h1",{className:"text-5xl md:text-8xl font-black mb-8 leading-tight",children:["Educators Academy",b.jsx("br",{}),b.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#10b981] to-[#34d399]",children:"  "})]}),b.jsx("p",{className:"text-xl md:text-2xl text-gray-300 max-w-3xl mb-12 leading-relaxed font-bold",children:"              ."}),b.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[b.jsx("button",{onClick:()=>e("stages"),className:"bg-[#10b981] px-12 py-5 rounded-2xl font-black text-xl hover:bg-emerald-600 transition-all shadow-2xl shadow-emerald-500/20 active:scale-95",children:"  "}),b.jsx("a",{href:`https://wa.me/20${Pl.phone}`,target:"_blank",className:"bg-white/5 backdrop-blur-xl border border-white/10 px-12 py-5 rounded-2xl font-black text-xl hover:bg-white/10 transition-all active:scale-95",children:" "})]})]}),b.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[#10b981] rounded-full blur-[180px] opacity-20 -mr-64 -mt-64"}),b.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-[#f97316] rounded-full blur-[180px] opacity-10 -ml-64 -mb-64"})]}),b.jsxs("section",{className:"py-24 max-w-7xl mx-auto px-4",children:[b.jsxs("div",{className:"text-right mb-16",children:[b.jsx("h2",{className:"text-5xl font-black mb-4 text-[#0a192f]",children:" "}),b.jsx("div",{className:"h-2 w-32 bg-gradient-to-r from-[#10b981] to-transparent rounded-full"})]}),b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:cs.map(R=>b.jsxs("div",{onClick:()=>$(R.id),className:"group bg-white p-12 rounded-[3rem] shadow-xl border-2 border-transparent hover:border-[#10b981] hover:-translate-y-3 transition-all cursor-pointer text-center relative overflow-hidden active:scale-95",children:[b.jsx("div",{className:"text-7xl mb-8 relative z-10 group-hover:scale-110 transition-transform duration-500",children:R.icon}),b.jsx("h3",{className:"text-3xl font-black text-[#0a192f] relative z-10",children:R.name})]},R.id))})]})]}),t==="stages"&&b.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-20 animate-in fade-in slide-in-from-bottom-6",children:[b.jsxs("button",{onClick:()=>e("home"),className:"mb-10 text-gray-400 hover:text-[#0a192f] flex items-center gap-3 font-black text-lg transition-colors group",children:[b.jsx("span",{className:"bg-white p-3 rounded-2xl shadow-sm group-hover:-translate-x-2 transition-transform",children:""}),"  "]}),g?b.jsxs("div",{children:[b.jsxs("div",{className:"flex justify-between items-center mb-12",children:[b.jsx("button",{onClick:()=>m(null),className:"text-[#10b981] font-black hover:underline text-xl",children:"  "}),b.jsxs("h2",{className:"text-4xl font-black text-[#0a192f]",children:[" ",(M=cs.find(R=>R.id===g))==null?void 0:M.name]})]}),b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:S.filter(R=>R.stage===g).map(R=>b.jsx("div",{onClick:()=>Z(R.id),className:"bg-white p-10 rounded-[2.5rem] shadow-xl hover:shadow-2xl hover:border-[#10b981] border-2 border-transparent transition-all cursor-pointer text-center group active:scale-95",children:b.jsx("h3",{className:"text-2xl font-black text-[#0a192f] leading-tight",children:R.name})},R.id))})]}):b.jsxs("div",{children:[b.jsx("h2",{className:"text-4xl font-black text-[#0a192f] mb-12 text-right",children:"  "}),b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:cs.map(R=>b.jsxs("div",{onClick:()=>m(R.id),className:"group bg-white p-12 rounded-[3rem] shadow-xl border-2 border-transparent hover:border-[#10b981] hover:-translate-y-3 transition-all cursor-pointer text-center active:scale-95",children:[b.jsx("div",{className:"text-7xl mb-8",children:R.icon}),b.jsx("h3",{className:"text-3xl font-black text-[#0a192f]",children:R.name})]},R.id))})]})]}),t==="grade"&&_&&b.jsx(vC,{grade:_,teachers:D,courses:P,onBack:()=>e("stages")}),t==="teachers"&&b.jsx(Pk,{teachers:D,onBack:()=>e("home")}),t==="admin"&&(n?b.jsx(Dk,{grades:S,setGrades:x,teachers:D,setTeachers:V,courses:P,setCourses:H,onLogout:()=>o(!1)}):b.jsx("div",{className:"min-h-[80vh] flex items-center justify-center p-4",children:b.jsxs("form",{onSubmit:j,className:"bg-white p-12 rounded-[3rem] shadow-2xl w-full max-w-md text-center border-t-8 border-[#0a192f]",children:[b.jsx("img",{src:Gc,alt:"Logo",className:"w-24 h-auto mx-auto mb-6"}),b.jsx("h2",{className:"text-4xl font-black text-[#0a192f] mb-8",children:"  "}),b.jsx("input",{type:"password",value:r,onChange:R=>l(R.target.value),placeholder:" ",className:"w-full border-2 rounded-2xl p-4 mb-6 font-bold text-center text-lg focus:border-[#10b981] outline-none transition-all"}),b.jsx("button",{type:"submit",className:"w-full bg-[#0a192f] text-white py-4 rounded-2xl font-black text-xl hover:bg-[#10b981] transition-all shadow-lg active:scale-95",children:"  "})]})}))]})},xA=document.getElementById("root");if(!xA)throw new Error("Could not find root element to mount to");const Vk=fC.createRoot(xA);Vk.render(b.jsx(iC.StrictMode,{children:b.jsx(Uk,{})}));
